{"version":3,"sources":["webpack://voyager/webpack/universalModuleDefinition","webpack://voyager/webpack/bootstrap","webpack://voyager/./src/lib-voyager.tsx","webpack://voyager/./node_modules/ajv/lib/ajv.js","webpack://voyager/./node_modules/ajv/lib/compile/index.js","webpack://voyager/./node_modules/ajv/lib/compile/resolve.js","webpack://voyager/./node_modules/url/url.js","webpack://voyager/./node_modules/punycode/punycode.js","webpack://voyager/(webpack)/buildin/module.js","webpack://voyager/(webpack)/buildin/global.js","webpack://voyager/./node_modules/url/util.js","webpack://voyager/./node_modules/querystring-es3/index.js","webpack://voyager/./node_modules/querystring-es3/decode.js","webpack://voyager/./node_modules/querystring-es3/encode.js","webpack://voyager/./node_modules/fast-deep-equal/index.js","webpack://voyager/./node_modules/ajv/lib/compile/util.js","webpack://voyager/./node_modules/ajv/lib/compile/ucs2length.js","webpack://voyager/./node_modules/ajv/lib/compile/schema_obj.js","webpack://voyager/./node_modules/json-schema-traverse/index.js","webpack://voyager/./node_modules/ajv/lib/compile/error_classes.js","webpack://voyager/./node_modules/json-stable-stringify/index.js","webpack://voyager/./node_modules/jsonify/index.js","webpack://voyager/./node_modules/jsonify/lib/parse.js","webpack://voyager/./node_modules/jsonify/lib/stringify.js","webpack://voyager/./node_modules/ajv/lib/dotjs/validate.js","webpack://voyager/./node_modules/co/index.js","webpack://voyager/./node_modules/ajv/lib/cache.js","webpack://voyager/./node_modules/ajv/lib/compile/formats.js","webpack://voyager/./node_modules/ajv/lib/compile/rules.js","webpack://voyager/./node_modules/ajv/lib/compile/_rules.js","webpack://voyager/./node_modules/ajv/lib/dotjs/ref.js","webpack://voyager/./node_modules/ajv/lib/dotjs/allOf.js","webpack://voyager/./node_modules/ajv/lib/dotjs/anyOf.js","webpack://voyager/./node_modules/ajv/lib/dotjs/const.js","webpack://voyager/./node_modules/ajv/lib/dotjs/contains.js","webpack://voyager/./node_modules/ajv/lib/dotjs/dependencies.js","webpack://voyager/./node_modules/ajv/lib/dotjs/enum.js","webpack://voyager/./node_modules/ajv/lib/dotjs/format.js","webpack://voyager/./node_modules/ajv/lib/dotjs/items.js","webpack://voyager/./node_modules/ajv/lib/dotjs/_limit.js","webpack://voyager/./node_modules/ajv/lib/dotjs/_limitItems.js","webpack://voyager/./node_modules/ajv/lib/dotjs/_limitLength.js","webpack://voyager/./node_modules/ajv/lib/dotjs/_limitProperties.js","webpack://voyager/./node_modules/ajv/lib/dotjs/multipleOf.js","webpack://voyager/./node_modules/ajv/lib/dotjs/not.js","webpack://voyager/./node_modules/ajv/lib/dotjs/oneOf.js","webpack://voyager/./node_modules/ajv/lib/dotjs/pattern.js","webpack://voyager/./node_modules/ajv/lib/dotjs/properties.js","webpack://voyager/./node_modules/ajv/lib/dotjs/propertyNames.js","webpack://voyager/./node_modules/ajv/lib/dotjs/required.js","webpack://voyager/./node_modules/ajv/lib/dotjs/uniqueItems.js","webpack://voyager/./node_modules/ajv/lib/$data.js","webpack://voyager/./node_modules/ajv/lib/patternGroups.js","webpack://voyager/./node_modules/ajv/lib/compile/async.js","webpack://voyager/./node_modules/ajv/lib/keyword.js","webpack://voyager/./node_modules/ajv/lib/dotjs/custom.js","webpack://voyager/external \"font-awesome-sass-loader\"","webpack://voyager/external \"react\"","webpack://voyager/external \"react-dom\"","webpack://voyager/external \"react-redux\"","webpack://voyager/./node_modules/vega-lite/src/spec.ts","webpack://voyager/./node_modules/vega-lite/node_modules/tslib/tslib.es6.js","webpack://voyager/./node_modules/vega-util/index.js","webpack://voyager/./node_modules/vega-util/src/accessor.js","webpack://voyager/./node_modules/vega-util/src/accessors.js","webpack://voyager/./node_modules/vega-util/src/field.js","webpack://voyager/./node_modules/vega-util/src/splitAccessPath.js","webpack://voyager/./node_modules/vega-util/src/error.js","webpack://voyager/./node_modules/vega-util/src/stringValue.js","webpack://voyager/./node_modules/vega-util/src/isArray.js","webpack://voyager/./node_modules/vega-util/src/isObject.js","webpack://voyager/./node_modules/vega-util/src/isString.js","webpack://voyager/./node_modules/vega-util/src/logger.js","webpack://voyager/./node_modules/vega-util/src/transform.js","webpack://voyager/./node_modules/vega-util/src/peek.js","webpack://voyager/./node_modules/vega-util/src/toNumber.js","webpack://voyager/./node_modules/vega-util/src/array.js","webpack://voyager/./node_modules/vega-util/src/compare.js","webpack://voyager/./node_modules/vega-util/src/isFunction.js","webpack://voyager/./node_modules/vega-util/src/constant.js","webpack://voyager/./node_modules/vega-util/src/debounce.js","webpack://voyager/./node_modules/vega-util/src/extend.js","webpack://voyager/./node_modules/vega-util/src/extentIndex.js","webpack://voyager/./node_modules/vega-util/src/fastmap.js","webpack://voyager/./node_modules/vega-util/src/inherits.js","webpack://voyager/./node_modules/vega-util/src/isBoolean.js","webpack://voyager/./node_modules/vega-util/src/isDate.js","webpack://voyager/./node_modules/vega-util/src/isNumber.js","webpack://voyager/./node_modules/vega-util/src/isRegExp.js","webpack://voyager/./node_modules/vega-util/src/key.js","webpack://voyager/./node_modules/vega-util/src/merge.js","webpack://voyager/./node_modules/vega-util/src/pad.js","webpack://voyager/./node_modules/vega-util/src/repeat.js","webpack://voyager/./node_modules/vega-util/src/toBoolean.js","webpack://voyager/./node_modules/vega-util/src/toDate.js","webpack://voyager/./node_modules/vega-util/src/toString.js","webpack://voyager/./node_modules/vega-util/src/toSet.js","webpack://voyager/./node_modules/vega-util/src/truncate.js","webpack://voyager/./node_modules/vega-util/src/visitArray.js","webpack://voyager/./node_modules/vega-lite/src/channel.ts","webpack://voyager/./node_modules/vega-lite/src/util.ts","webpack://voyager/./node_modules/vega-lite/src/logical.ts","webpack://voyager/./node_modules/vega-lite/src/compositemark/index.ts","webpack://voyager/./node_modules/vega-lite/src/mark.ts","webpack://voyager/./node_modules/vega-lite/src/compositemark/boxplot.ts","webpack://voyager/./node_modules/vega-lite/src/encoding.ts","webpack://voyager/./node_modules/vega-lite/src/fielddef.ts","webpack://voyager/./node_modules/vega-lite/src/aggregate.ts","webpack://voyager/./node_modules/vega-lite/src/bin.ts","webpack://voyager/./node_modules/vega-lite/src/log.ts","webpack://voyager/./node_modules/vega-lite/src/timeunit.ts","webpack://voyager/./node_modules/vega-lite/src/datetime.ts","webpack://voyager/./node_modules/vega-lite/src/type.ts","webpack://voyager/./node_modules/vega-lite/src/compositemark/common.ts","webpack://voyager/./node_modules/vega-lite/src/compositemark/errorbar.ts","webpack://voyager/./node_modules/vega-lite/src/stack.ts","webpack://voyager/./node_modules/vega-lite/src/scale.ts","webpack://voyager/./src/actions/index.ts","webpack://voyager/./src/actions/shelf/spec.ts","webpack://voyager/./src/actions/tab.ts","webpack://voyager/./src/actions/bookmark.ts","webpack://voyager/./src/actions/custom-wildcard-field.ts","webpack://voyager/./src/actions/config.ts","webpack://voyager/./src/actions/dataset.ts","webpack://voyager/external \"redux-undo\"","webpack://voyager/./src/api/api.ts","webpack://voyager/./node_modules/compassql/src/recommend.ts","webpack://voyager/./node_modules/compassql/src/config.ts","webpack://voyager/./node_modules/compassql/src/property.ts","webpack://voyager/./node_modules/vega-lite/src/axis.ts","webpack://voyager/./node_modules/vega-lite/src/legend.ts","webpack://voyager/./node_modules/compassql/src/wildcard.ts","webpack://voyager/./node_modules/compassql/src/util.ts","webpack://voyager/./node_modules/datalib/src/util.js","webpack://voyager/./node_modules/buffer/index.js","webpack://voyager/./node_modules/base64-js/index.js","webpack://voyager/./node_modules/ieee754/index.js","webpack://voyager/./node_modules/isarray/index.js","webpack://voyager/./node_modules/compassql/src/generate.ts","webpack://voyager/./node_modules/compassql/src/enumerator.ts","webpack://voyager/./node_modules/compassql/src/constraint/encoding.ts","webpack://voyager/./node_modules/compassql/src/query/encoding.ts","webpack://voyager/./node_modules/compassql/src/query/expandedtype.ts","webpack://voyager/./node_modules/vega-lite/src/compile/scale/type.ts","webpack://voyager/./node_modules/compassql/src/query/shorthand.ts","webpack://voyager/./node_modules/compassql/src/query/spec.ts","webpack://voyager/./node_modules/compassql/src/propindex.ts","webpack://voyager/./node_modules/compassql/src/constraint/field.ts","webpack://voyager/./node_modules/compassql/src/schema.ts","webpack://voyager/./node_modules/datalib/src/stats.js","webpack://voyager/./node_modules/datalib/src/import/type.js","webpack://voyager/./node_modules/datalib/src/generate.js","webpack://voyager/./node_modules/datalib/src/bins/bins.js","webpack://voyager/./node_modules/datalib/src/time.js","webpack://voyager/./node_modules/datalib/node_modules/d3-time/build/d3-time.js","webpack://voyager/./node_modules/compassql/src/constraint/base.ts","webpack://voyager/./node_modules/compassql/src/constraint/value.ts","webpack://voyager/./node_modules/compassql/src/constraint/spec.ts","webpack://voyager/./node_modules/compassql/src/model.ts","webpack://voyager/./node_modules/compassql/src/wildcardindex.ts","webpack://voyager/./node_modules/compassql/src/query/groupby.ts","webpack://voyager/./node_modules/compassql/src/nest.ts","webpack://voyager/./node_modules/compassql/src/stylize.ts","webpack://voyager/./node_modules/compassql/src/query/normalize.ts","webpack://voyager/./node_modules/compassql/src/ranking/ranking.ts","webpack://voyager/./node_modules/compassql/src/result.ts","webpack://voyager/./node_modules/compassql/src/ranking/effectiveness/index.ts","webpack://voyager/./node_modules/compassql/src/ranking/effectiveness/axis.ts","webpack://voyager/./node_modules/compassql/src/ranking/effectiveness/type.ts","webpack://voyager/./node_modules/compassql/src/ranking/effectiveness/base.ts","webpack://voyager/./node_modules/compassql/src/ranking/effectiveness/dimension.ts","webpack://voyager/./node_modules/compassql/src/ranking/effectiveness/facet.ts","webpack://voyager/./node_modules/compassql/src/ranking/effectiveness/sizechannel.ts","webpack://voyager/./node_modules/compassql/src/ranking/effectiveness/typechannel.ts","webpack://voyager/./node_modules/compassql/src/ranking/effectiveness/mark.ts","webpack://voyager/./node_modules/compassql/src/ranking/aggregation.ts","webpack://voyager/./node_modules/compassql/src/ranking/fieldorder.ts","webpack://voyager/./node_modules/isomorphic-fetch/fetch-npm-browserify.js","webpack://voyager/./node_modules/whatwg-fetch/fetch.js","webpack://voyager/./node_modules/vega-lite/src/data.ts","webpack://voyager/./src/models/result/index.ts","webpack://voyager/./src/models/result/plot.ts","webpack://voyager/./src/models/shelf/index.ts","webpack://voyager/./src/models/shelf/spec/index.ts","webpack://voyager/./src/models/shelf/spec/encoding.ts","webpack://voyager/./src/models/shelf/spec/function.ts","webpack://voyager/./src/models/shelf/filter.ts","webpack://voyager/./node_modules/vega-expression/index.js","webpack://voyager/./node_modules/vega-expression/src/ast.js","webpack://voyager/./node_modules/vega-expression/src/parser.js","webpack://voyager/./node_modules/vega-expression/src/codegen.js","webpack://voyager/./node_modules/vega-expression/src/constants.js","webpack://voyager/./node_modules/vega-expression/src/functions.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/index.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/accessor.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/accessors.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/field.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/splitAccessPath.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/error.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/stringValue.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/isArray.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/isObject.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/isString.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/logger.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/array.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/compare.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/constant.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/isFunction.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/debounce.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/extend.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/extentIndex.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/fastmap.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/inherits.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/isBoolean.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/isDate.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/isNumber.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/isRegExp.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/key.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/merge.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/pad.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/repeat.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/peek.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/toBoolean.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/toDate.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/toNumber.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/toString.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/toSet.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/truncate.js","webpack://voyager/./node_modules/vega-expression/node_modules/vega-util/src/visitArray.js","webpack://voyager/./node_modules/vega-lite/src/predicate.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/selection.ts","webpack://voyager/./node_modules/vega-event-selector/index.js","webpack://voyager/./node_modules/vega-event-selector/src/event-selector.js","webpack://voyager/./node_modules/vega-lite/src/selection.ts","webpack://voyager/./node_modules/vega-lite/src/compile/model.ts","webpack://voyager/./node_modules/vega-lite/src/title.ts","webpack://voyager/./node_modules/vega-lite/src/transform.ts","webpack://voyager/./node_modules/vega-lite/src/vega.schema.ts","webpack://voyager/./node_modules/vega-lite/src/compile/axis/assemble.ts","webpack://voyager/./node_modules/vega-lite/src/compile/layout/header.ts","webpack://voyager/./node_modules/vega-lite/src/compile/common.ts","webpack://voyager/./node_modules/vega-lite/src/compile/layoutsize/assemble.ts","webpack://voyager/./node_modules/vega-lite/src/compile/legend/assemble.ts","webpack://voyager/./node_modules/vega-lite/src/compile/legend/parse.ts","webpack://voyager/./node_modules/vega-lite/src/compile/resolve.ts","webpack://voyager/./node_modules/vega-lite/src/compile/split.ts","webpack://voyager/./node_modules/vega-lite/src/compile/legend/component.ts","webpack://voyager/./node_modules/vega-lite/src/compile/legend/encode.ts","webpack://voyager/./node_modules/vega-lite/src/compile/mark/mixins.ts","webpack://voyager/./node_modules/vega-lite/src/compile/mark/valueref.ts","webpack://voyager/./node_modules/vega-lite/src/compile/legend/properties.ts","webpack://voyager/./node_modules/vega-lite/src/compile/projection/assemble.ts","webpack://voyager/./node_modules/vega-lite/src/compile/projection/parse.ts","webpack://voyager/./node_modules/vega-lite/src/projection.ts","webpack://voyager/./node_modules/vega-lite/src/compile/projection/component.ts","webpack://voyager/./node_modules/vega-lite/src/compile/scale/assemble.ts","webpack://voyager/./node_modules/vega-lite/src/compile/scale/domain.ts","webpack://voyager/./node_modules/vega-lite/src/sort.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/calculate.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/dataflow.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/optimize.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/aggregate.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/facet.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/filterinvalid.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/optimizers.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/formatparse.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/source.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/timeunit.ts","webpack://voyager/./node_modules/vega-lite/src/compile/data/stack.ts","webpack://voyager/./node_modules/vega-lite/src/compile/scale/parse.ts","webpack://voyager/./node_modules/vega-lite/src/compile/scale/component.ts","webpack://voyager/./node_modules/vega-lite/src/compile/scale/properties.ts","webpack://voyager/./node_modules/vega-lite/src/compile/scale/range.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/interval.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/transforms/scales.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/multi.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/transforms/nearest.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/single.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/transforms/transforms.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/transforms/inputs.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/transforms/project.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/transforms/toggle.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/transforms/translate.ts","webpack://voyager/./node_modules/vega-lite/src/compile/selection/transforms/zoom.ts","webpack://voyager/./src/selectors/index.ts","webpack://voyager/./node_modules/reselect/lib/index.js","webpack://voyager/./src/selectors/dataset.ts","webpack://voyager/./src/selectors/shelf.ts","webpack://voyager/./src/selectors/tab.ts","webpack://voyager/./src/selectors/result.ts","webpack://voyager/./src/actions/reset.ts","webpack://voyager/./src/actions/log.ts","webpack://voyager/./src/actions/redux-action.ts","webpack://voyager/./src/actions/related-views.ts","webpack://voyager/./src/actions/result.ts","webpack://voyager/./src/actions/shelf/index.ts","webpack://voyager/./src/actions/shelf/filter.ts","webpack://voyager/./src/actions/state.ts","webpack://voyager/./src/actions/undo-redo.ts","webpack://voyager/./src/actions/shelf-preview.ts","webpack://voyager/./src/components/app.tsx","webpack://voyager/./src/components/app-root/index.tsx","webpack://voyager/external \"react-dnd\"","webpack://voyager/external \"react-dnd-html5-backend\"","webpack://voyager/./node_modules/react-spinners/index.js","webpack://voyager/./node_modules/react-spinners/dist/index.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/BarLoader.js","webpack://voyager/./node_modules/prop-types/index.js","webpack://voyager/./node_modules/prop-types/factoryWithTypeCheckers.js","webpack://voyager/./node_modules/fbjs/lib/emptyFunction.js","webpack://voyager/./node_modules/fbjs/lib/invariant.js","webpack://voyager/./node_modules/fbjs/lib/warning.js","webpack://voyager/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://voyager/./node_modules/prop-types/checkPropTypes.js","webpack://voyager/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://voyager/./node_modules/domkit/appendVendorPrefix.js","webpack://voyager/./node_modules/domkit/getVendorPropertyName.js","webpack://voyager/./node_modules/domkit/builtinStyle.js","webpack://voyager/./node_modules/domkit/insertKeyframesRule.js","webpack://voyager/./node_modules/domkit/insertRule.js","webpack://voyager/./node_modules/domkit/getVendorPrefix.js","webpack://voyager/./node_modules/react-spinners/dist/helpers/index.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/BeatLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/BounceLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/CircleLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/ClipLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/ClimbingBoxLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/DotLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/FadeLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/GridLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/HashLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/MoonLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/PacmanLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/PropagateLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/PulseLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/RingLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/RiseLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/RotateLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/ScaleLoader.js","webpack://voyager/./node_modules/react-spinners/dist/spinners/SyncLoader.js","webpack://voyager/./node_modules/react-split-pane/index.js","webpack://voyager/./node_modules/react-split-pane/lib/SplitPane.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/index.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/createPrefixer.js","webpack://voyager/./node_modules/inline-style-prefixer/utils/getBrowserInformation.js","webpack://voyager/./node_modules/bowser/src/bowser.js","webpack://voyager/(webpack)/buildin/amd-define.js","webpack://voyager/./node_modules/inline-style-prefixer/utils/getPrefixedKeyframes.js","webpack://voyager/./node_modules/inline-style-prefixer/utils/capitalizeString.js","webpack://voyager/./node_modules/inline-style-prefixer/utils/addNewValuesOnly.js","webpack://voyager/./node_modules/inline-style-prefixer/utils/isObject.js","webpack://voyager/./node_modules/inline-style-prefixer/utils/prefixValue.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/cursor.js","webpack://voyager/./node_modules/inline-style-prefixer/utils/getPrefixedValue.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/crossFade.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/filter.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/flex.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/flexboxOld.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/gradient.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/imageSet.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/position.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/sizing.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/plugins/transition.js","webpack://voyager/./node_modules/css-in-js-utils/lib/hyphenateProperty.js","webpack://voyager/./node_modules/hyphenate-style-name/index.js","webpack://voyager/./node_modules/inline-style-prefixer/static/index.js","webpack://voyager/./node_modules/inline-style-prefixer/static/createPrefixer.js","webpack://voyager/./node_modules/inline-style-prefixer/utils/prefixProperty.js","webpack://voyager/./node_modules/inline-style-prefixer/static/staticData.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/cursor.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/crossFade.js","webpack://voyager/./node_modules/css-in-js-utils/lib/isPrefixedValue.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/filter.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/flex.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/flexboxOld.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/gradient.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/imageSet.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/position.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/sizing.js","webpack://voyager/./node_modules/inline-style-prefixer/static/plugins/transition.js","webpack://voyager/./node_modules/inline-style-prefixer/dynamic/dynamicData.js","webpack://voyager/./node_modules/react-style-proptype/src/index.js","webpack://voyager/./node_modules/react-style-proptype/src/css-properties.js","webpack://voyager/./node_modules/react-split-pane/lib/Pane.js","webpack://voyager/./node_modules/react-split-pane/lib/Resizer.js","webpack://voyager/./src/constants.ts","webpack://voyager/./src/components/data-pane/index.tsx","webpack://voyager/external \"react-css-modules\"","webpack://voyager/./src/components/data-pane/data-pane.scss","webpack://voyager/./src/components/data-pane/field-list.tsx","webpack://voyager/./src/components/field/index.tsx","webpack://voyager/external \"react-tether\"","webpack://voyager/./src/components/field/field.scss","webpack://voyager/./src/components/data-pane/field-list.scss","webpack://voyager/./src/components/data-pane/type-changer.tsx","webpack://voyager/./src/components/data-pane/type-changer.scss","webpack://voyager/./src/components/encoding-pane/index.tsx","webpack://voyager/./src/components/filter-pane/index.tsx","webpack://voyager/./src/components/encoding-pane/function-picker.tsx","webpack://voyager/./src/components/encoding-pane/function-picker.scss","webpack://voyager/./src/components/filter-pane/filter-pane.scss","webpack://voyager/./src/components/filter-pane/one-of-filter-shelf.tsx","webpack://voyager/./src/reducers/util.ts","webpack://voyager/./src/components/filter-pane/one-of-filter-shelf.scss","webpack://voyager/./src/components/filter-pane/range-filter-shelf.tsx","webpack://voyager/./node_modules/rc-slider/es/index.js","webpack://voyager/./node_modules/rc-slider/es/Slider.js","webpack://voyager/./node_modules/babel-runtime/helpers/extends.js","webpack://voyager/./node_modules/babel-runtime/core-js/object/assign.js","webpack://voyager/./node_modules/core-js/library/fn/object/assign.js","webpack://voyager/./node_modules/core-js/library/modules/es6.object.assign.js","webpack://voyager/./node_modules/core-js/library/modules/_export.js","webpack://voyager/./node_modules/core-js/library/modules/_global.js","webpack://voyager/./node_modules/core-js/library/modules/_core.js","webpack://voyager/./node_modules/core-js/library/modules/_ctx.js","webpack://voyager/./node_modules/core-js/library/modules/_a-function.js","webpack://voyager/./node_modules/core-js/library/modules/_hide.js","webpack://voyager/./node_modules/core-js/library/modules/_object-dp.js","webpack://voyager/./node_modules/core-js/library/modules/_an-object.js","webpack://voyager/./node_modules/core-js/library/modules/_is-object.js","webpack://voyager/./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack://voyager/./node_modules/core-js/library/modules/_descriptors.js","webpack://voyager/./node_modules/core-js/library/modules/_fails.js","webpack://voyager/./node_modules/core-js/library/modules/_dom-create.js","webpack://voyager/./node_modules/core-js/library/modules/_to-primitive.js","webpack://voyager/./node_modules/core-js/library/modules/_property-desc.js","webpack://voyager/./node_modules/core-js/library/modules/_object-assign.js","webpack://voyager/./node_modules/core-js/library/modules/_object-keys.js","webpack://voyager/./node_modules/core-js/library/modules/_object-keys-internal.js","webpack://voyager/./node_modules/core-js/library/modules/_has.js","webpack://voyager/./node_modules/core-js/library/modules/_to-iobject.js","webpack://voyager/./node_modules/core-js/library/modules/_iobject.js","webpack://voyager/./node_modules/core-js/library/modules/_cof.js","webpack://voyager/./node_modules/core-js/library/modules/_defined.js","webpack://voyager/./node_modules/core-js/library/modules/_array-includes.js","webpack://voyager/./node_modules/core-js/library/modules/_to-length.js","webpack://voyager/./node_modules/core-js/library/modules/_to-integer.js","webpack://voyager/./node_modules/core-js/library/modules/_to-index.js","webpack://voyager/./node_modules/core-js/library/modules/_shared-key.js","webpack://voyager/./node_modules/core-js/library/modules/_shared.js","webpack://voyager/./node_modules/core-js/library/modules/_uid.js","webpack://voyager/./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack://voyager/./node_modules/core-js/library/modules/_object-gops.js","webpack://voyager/./node_modules/core-js/library/modules/_object-pie.js","webpack://voyager/./node_modules/core-js/library/modules/_to-object.js","webpack://voyager/./node_modules/babel-runtime/helpers/classCallCheck.js","webpack://voyager/./node_modules/babel-runtime/helpers/createClass.js","webpack://voyager/./node_modules/babel-runtime/core-js/object/define-property.js","webpack://voyager/./node_modules/core-js/library/fn/object/define-property.js","webpack://voyager/./node_modules/core-js/library/modules/es6.object.define-property.js","webpack://voyager/./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack://voyager/./node_modules/babel-runtime/helpers/typeof.js","webpack://voyager/./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack://voyager/./node_modules/core-js/library/fn/symbol/iterator.js","webpack://voyager/./node_modules/core-js/library/modules/es6.string.iterator.js","webpack://voyager/./node_modules/core-js/library/modules/_string-at.js","webpack://voyager/./node_modules/core-js/library/modules/_iter-define.js","webpack://voyager/./node_modules/core-js/library/modules/_library.js","webpack://voyager/./node_modules/core-js/library/modules/_redefine.js","webpack://voyager/./node_modules/core-js/library/modules/_iterators.js","webpack://voyager/./node_modules/core-js/library/modules/_iter-create.js","webpack://voyager/./node_modules/core-js/library/modules/_object-create.js","webpack://voyager/./node_modules/core-js/library/modules/_object-dps.js","webpack://voyager/./node_modules/core-js/library/modules/_html.js","webpack://voyager/./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack://voyager/./node_modules/core-js/library/modules/_wks.js","webpack://voyager/./node_modules/core-js/library/modules/_object-gpo.js","webpack://voyager/./node_modules/core-js/library/modules/web.dom.iterable.js","webpack://voyager/./node_modules/core-js/library/modules/es6.array.iterator.js","webpack://voyager/./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack://voyager/./node_modules/core-js/library/modules/_iter-step.js","webpack://voyager/./node_modules/core-js/library/modules/_wks-ext.js","webpack://voyager/./node_modules/babel-runtime/core-js/symbol.js","webpack://voyager/./node_modules/core-js/library/fn/symbol/index.js","webpack://voyager/./node_modules/core-js/library/modules/es6.symbol.js","webpack://voyager/./node_modules/core-js/library/modules/_meta.js","webpack://voyager/./node_modules/core-js/library/modules/_wks-define.js","webpack://voyager/./node_modules/core-js/library/modules/_keyof.js","webpack://voyager/./node_modules/core-js/library/modules/_enum-keys.js","webpack://voyager/./node_modules/core-js/library/modules/_is-array.js","webpack://voyager/./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack://voyager/./node_modules/core-js/library/modules/_object-gopn.js","webpack://voyager/./node_modules/core-js/library/modules/_object-gopd.js","webpack://voyager/./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack://voyager/./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack://voyager/./node_modules/babel-runtime/helpers/inherits.js","webpack://voyager/./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack://voyager/./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack://voyager/./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack://voyager/./node_modules/core-js/library/modules/_set-proto.js","webpack://voyager/./node_modules/babel-runtime/core-js/object/create.js","webpack://voyager/./node_modules/core-js/library/fn/object/create.js","webpack://voyager/./node_modules/core-js/library/modules/es6.object.create.js","webpack://voyager/./node_modules/warning/browser.js","webpack://voyager/./node_modules/rc-slider/es/common/Track.js","webpack://voyager/./node_modules/rc-slider/es/common/createSlider.js","webpack://voyager/./node_modules/babel-runtime/helpers/objectWithoutProperties.js","webpack://voyager/./node_modules/babel-runtime/helpers/defineProperty.js","webpack://voyager/./node_modules/babel-runtime/helpers/get.js","webpack://voyager/./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack://voyager/./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack://voyager/./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack://voyager/./node_modules/core-js/library/modules/_object-sap.js","webpack://voyager/./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js","webpack://voyager/./node_modules/core-js/library/fn/object/get-own-property-descriptor.js","webpack://voyager/./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js","webpack://voyager/./node_modules/rc-util/es/Dom/addEventListener.js","webpack://voyager/./node_modules/add-dom-event-listener/lib/index.js","webpack://voyager/./node_modules/add-dom-event-listener/lib/EventObject.js","webpack://voyager/./node_modules/add-dom-event-listener/lib/EventBaseObject.js","webpack://voyager/./node_modules/object-assign/index.js","webpack://voyager/./node_modules/rc-slider/node_modules/classnames/index.js","webpack://voyager/./node_modules/rc-slider/es/common/Steps.js","webpack://voyager/./node_modules/rc-slider/es/common/Marks.js","webpack://voyager/./node_modules/rc-slider/es/Handle.js","webpack://voyager/./node_modules/rc-slider/es/utils.js","webpack://voyager/./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack://voyager/./node_modules/babel-runtime/core-js/array/from.js","webpack://voyager/./node_modules/core-js/library/fn/array/from.js","webpack://voyager/./node_modules/core-js/library/modules/es6.array.from.js","webpack://voyager/./node_modules/core-js/library/modules/_iter-call.js","webpack://voyager/./node_modules/core-js/library/modules/_is-array-iter.js","webpack://voyager/./node_modules/core-js/library/modules/_create-property.js","webpack://voyager/./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack://voyager/./node_modules/core-js/library/modules/_classof.js","webpack://voyager/./node_modules/core-js/library/modules/_iter-detect.js","webpack://voyager/./node_modules/rc-util/es/KeyCode.js","webpack://voyager/./node_modules/rc-slider/es/Range.js","webpack://voyager/./node_modules/shallowequal/index.js","webpack://voyager/./node_modules/rc-slider/es/createSliderWithTooltip.js","webpack://voyager/./node_modules/rc-tooltip/es/index.js","webpack://voyager/./node_modules/rc-tooltip/es/Tooltip.js","webpack://voyager/./node_modules/rc-trigger/es/index.js","webpack://voyager/./node_modules/create-react-class/index.js","webpack://voyager/./node_modules/create-react-class/factory.js","webpack://voyager/./node_modules/fbjs/lib/emptyObject.js","webpack://voyager/./node_modules/rc-util/es/Dom/contains.js","webpack://voyager/./node_modules/rc-util/lib/Dom/addEventListener.js","webpack://voyager/./node_modules/rc-trigger/es/Popup.js","webpack://voyager/./node_modules/rc-align/lib/index.js","webpack://voyager/./node_modules/rc-align/lib/Align.js","webpack://voyager/./node_modules/dom-align/es/index.js","webpack://voyager/./node_modules/dom-align/es/utils.js","webpack://voyager/./node_modules/dom-align/es/propertyUtils.js","webpack://voyager/./node_modules/dom-align/es/getOffsetParent.js","webpack://voyager/./node_modules/dom-align/es/getVisibleRectForElement.js","webpack://voyager/./node_modules/dom-align/es/adjustForViewport.js","webpack://voyager/./node_modules/dom-align/es/getRegion.js","webpack://voyager/./node_modules/dom-align/es/getElFuturePos.js","webpack://voyager/./node_modules/dom-align/es/getAlignOffset.js","webpack://voyager/./node_modules/rc-align/lib/isWindow.js","webpack://voyager/./node_modules/rc-animate/es/Animate.js","webpack://voyager/./node_modules/rc-animate/es/ChildrenUtils.js","webpack://voyager/./node_modules/rc-animate/es/AnimateChild.js","webpack://voyager/./node_modules/css-animation/lib/index.js","webpack://voyager/./node_modules/css-animation/lib/Event.js","webpack://voyager/./node_modules/component-classes/index.js","webpack://voyager/./node_modules/component-indexof/index.js","webpack://voyager/./node_modules/rc-animate/es/util.js","webpack://voyager/./node_modules/rc-trigger/es/PopupInner.js","webpack://voyager/./node_modules/rc-trigger/es/LazyRenderBox.js","webpack://voyager/./node_modules/rc-trigger/es/utils.js","webpack://voyager/./node_modules/rc-util/lib/getContainerRenderMixin.js","webpack://voyager/./node_modules/rc-tooltip/es/placements.js","webpack://voyager/./node_modules/react-datetime/DateTime.js","webpack://voyager/./node_modules/react-datetime/node_modules/object-assign/index.js","webpack://voyager/external \"moment\"","webpack://voyager/./node_modules/react-datetime/src/CalendarContainer.js","webpack://voyager/./node_modules/react-datetime/src/DaysView.js","webpack://voyager/./node_modules/react-onclickoutside/index.js","webpack://voyager/./node_modules/react-datetime/src/MonthsView.js","webpack://voyager/./node_modules/react-datetime/src/YearsView.js","webpack://voyager/./node_modules/react-datetime/src/TimeView.js","webpack://voyager/./src/components/filter-pane/range-filter-shelf.scss","webpack://voyager/./src/components/encoding-pane/encoding-pane.scss","webpack://voyager/./src/components/encoding-pane/encoding-shelf.tsx","webpack://voyager/./src/components/encoding-pane/encoding-shelf.scss","webpack://voyager/./src/components/encoding-pane/field-customizer.tsx","webpack://voyager/./node_modules/react-tabs/esm/index.js","webpack://voyager/./node_modules/react-tabs/esm/components/Tabs.js","webpack://voyager/./node_modules/react-tabs/esm/helpers/propTypes.js","webpack://voyager/./node_modules/react-tabs/esm/helpers/childrenDeepMap.js","webpack://voyager/./node_modules/react-tabs/esm/helpers/elementTypes.js","webpack://voyager/./node_modules/react-tabs/esm/components/UncontrolledTabs.js","webpack://voyager/./node_modules/clsx/dist/clsx.m.js","webpack://voyager/./node_modules/react-tabs/esm/helpers/uuid.js","webpack://voyager/./node_modules/react-tabs/esm/helpers/count.js","webpack://voyager/./node_modules/react-tabs/esm/components/TabList.js","webpack://voyager/./node_modules/react-tabs/esm/components/Tab.js","webpack://voyager/./node_modules/react-tabs/esm/components/TabPanel.js","webpack://voyager/./src/components/encoding-pane/field-customizer.scss","webpack://voyager/./src/components/encoding-pane/property-editor.tsx","webpack://voyager/./node_modules/react-jsonschema-form/lib/index.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/Form.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/ErrorList.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/utils.js","webpack://voyager/./node_modules/timers-browserify/main.js","webpack://voyager/./node_modules/setimmediate/setImmediate.js","webpack://voyager/./node_modules/process/browser.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/index.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/ArrayField.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/BooleanField.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/DescriptionField.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/NumberField.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/ObjectField.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/SchemaField.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/UnsupportedField.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/StringField.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/fields/TitleField.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/index.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/AltDateWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/AltDateTimeWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/CheckboxWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/CheckboxesWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/ColorWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/BaseInput.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/DateWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/DateTimeWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/EmailWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/FileWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/HiddenWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/PasswordWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/RadioWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/RangeWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/SelectWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/TextareaWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/TextWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/URLWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/components/widgets/UpDownWidget.js","webpack://voyager/./node_modules/react-jsonschema-form/lib/validate.js","webpack://voyager/./node_modules/lodash.topath/index.js","webpack://voyager/./node_modules/jsonschema/lib/index.js","webpack://voyager/./node_modules/jsonschema/lib/validator.js","webpack://voyager/./node_modules/jsonschema/lib/attribute.js","webpack://voyager/./node_modules/jsonschema/lib/helpers.js","webpack://voyager/./node_modules/throttle-debounce/throttle.js","webpack://voyager/./node_modules/throttle-debounce/debounce.js","webpack://voyager/./src/components/encoding-pane/property-editor-schema.ts","webpack://voyager/./src/components/encoding-pane/property-editor.scss","webpack://voyager/./src/components/encoding-pane/mark-picker.tsx","webpack://voyager/./src/components/encoding-pane/mark-picker.scss","webpack://voyager/./src/components/footer/index.tsx","webpack://voyager/./node_modules/papaparse/papaparse.min.js","webpack://voyager/./node_modules/react-file-download/file-download.js","webpack://voyager/./src/models/export-logs.ts","webpack://voyager/./src/store/index.ts","webpack://voyager/external \"redux\"","webpack://voyager/./node_modules/redux-action-log/src/index.js","webpack://voyager/./node_modules/redux-logger/dist/redux-logger.js","webpack://voyager/external \"redux-thunk\"","webpack://voyager/./src/models/index.ts","webpack://voyager/./src/models/bookmark.ts","webpack://voyager/./src/models/config.ts","webpack://voyager/./src/models/custom-wildcard-field.ts","webpack://voyager/./src/models/dataset.ts","webpack://voyager/./src/models/log.ts","webpack://voyager/./src/models/related-views.ts","webpack://voyager/./src/models/shelf-preview.ts","webpack://voyager/./src/models/tab.ts","webpack://voyager/./src/reducers/index.ts","webpack://voyager/./src/reducers/bookmark.ts","webpack://voyager/./src/reducers/config.ts","webpack://voyager/./src/reducers/custom-wildcard-field.ts","webpack://voyager/./src/reducers/dataset.ts","webpack://voyager/./src/reducers/log.ts","webpack://voyager/./src/reducers/related-views.ts","webpack://voyager/./src/reducers/reset.ts","webpack://voyager/./src/reducers/shelf-preview.ts","webpack://voyager/./src/reducers/shelf/spec.ts","webpack://voyager/./src/reducers/state.ts","webpack://voyager/./src/reducers/tab.ts","webpack://voyager/./src/reducers/result.ts","webpack://voyager/./node_modules/util/util.js","webpack://voyager/./node_modules/util/support/isBufferBrowser.js","webpack://voyager/./node_modules/util/node_modules/inherits/inherits_browser.js","webpack://voyager/./src/reducers/shelf/index.ts","webpack://voyager/./src/reducers/shelf/filter.ts","webpack://voyager/./src/store/listener.ts","webpack://voyager/./src/queries/index.ts","webpack://voyager/./src/queries/alternative-encodings.ts","webpack://voyager/./src/queries/common.ts","webpack://voyager/./src/queries/field-suggestions.ts","webpack://voyager/./src/queries/histograms.ts","webpack://voyager/./src/queries/summaries.ts","webpack://voyager/./src/components/footer/footer.scss","webpack://voyager/./src/components/header/index.tsx","webpack://voyager/./images/idl-h56.png","webpack://voyager/./images/logo.png","webpack://voyager/./src/components/header/controls.tsx","webpack://voyager/./src/components/bookmark/index.tsx","webpack://voyager/./node_modules/react-modal/lib/index.js","webpack://voyager/./node_modules/react-modal/lib/components/Modal.js","webpack://voyager/./node_modules/exenv/index.js","webpack://voyager/./node_modules/element-class/index.js","webpack://voyager/./node_modules/react-modal/lib/components/ModalPortal.js","webpack://voyager/./node_modules/react-modal/lib/helpers/focusManager.js","webpack://voyager/./node_modules/react-modal/lib/helpers/tabbable.js","webpack://voyager/./node_modules/react-modal/lib/helpers/scopeTab.js","webpack://voyager/./node_modules/react-modal/lib/helpers/ariaAppHider.js","webpack://voyager/./node_modules/react-modal/lib/helpers/refCount.js","webpack://voyager/./src/components/plot/index.tsx","webpack://voyager/./node_modules/react-copy-to-clipboard/lib/index.js","webpack://voyager/./node_modules/react-copy-to-clipboard/lib/Component.js","webpack://voyager/./node_modules/copy-to-clipboard/index.js","webpack://voyager/./node_modules/toggle-selection/index.js","webpack://voyager/./src/components/util/util.logger.ts","webpack://voyager/./src/components/vega-lite/index.tsx","webpack://voyager/external \"vega\"","webpack://voyager/external \"vega-lite\"","webpack://voyager/external \"vega-tooltip\"","webpack://voyager/./src/components/plot/bookmarkbutton.tsx","webpack://voyager/./src/components/plot/bookmarkbutton.scss","webpack://voyager/./src/components/plot/plot.scss","webpack://voyager/./src/components/bookmark/bookmark.scss","webpack://voyager/./src/components/header/controls.scss","webpack://voyager/./src/components/header/undo-redo.tsx","webpack://voyager/./src/components/header/header.scss","webpack://voyager/./src/components/log-pane/index.tsx","webpack://voyager/./src/components/log-pane/log-pane.scss","webpack://voyager/./src/components/view-pane/index.tsx","webpack://voyager/./src/components/plot-list/index.tsx","webpack://voyager/./src/components/plot-list/plot-list.scss","webpack://voyager/./src/components/view-pane/related-views.tsx","webpack://voyager/./src/components/view-pane/related-views.scss","webpack://voyager/./src/components/view-pane/related-views-button.tsx","webpack://voyager/./src/components/view-pane/related-views-button.scss","webpack://voyager/./src/components/view-pane/view-pane.scss"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__57__","__WEBPACK_EXTERNAL_MODULE__58__","__WEBPACK_EXTERNAL_MODULE__59__","__WEBPACK_EXTERNAL_MODULE__60__","__WEBPACK_EXTERNAL_MODULE__126__","__WEBPACK_EXTERNAL_MODULE__305__","__WEBPACK_EXTERNAL_MODULE__306__","__WEBPACK_EXTERNAL_MODULE__394__","__WEBPACK_EXTERNAL_MODULE__399__","__WEBPACK_EXTERNAL_MODULE__581__","__WEBPACK_EXTERNAL_MODULE__666__","__WEBPACK_EXTERNAL_MODULE__669__","__WEBPACK_EXTERNAL_MODULE__728__","__WEBPACK_EXTERNAL_MODULE__729__","__WEBPACK_EXTERNAL_MODULE__730__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","container","config","data","isString","this","document","querySelector","DEFAULT_VOYAGER_CONFIG","init","updateData","render","undo","store","dispatch","type","UNDO","redo","REDO","updateConfig","setFilename","filename","setSpec","spec","ajv","Ajv","validateSchema","allErrors","extendRefs","addMetaSchema","draft4Schemas","validateVl","compile","vlSchema","Error","errors","toString","isUnitSpec","validSpec","setApplicationState","state","undefined","renderFromState","fromSerializable","getApplicationState","toSerializable","getState","getSpec","includeData","selectMainSpec","selectData","getBookmarkedSpecs","selectBookmark","list","onStateChange","onChange","currentState","subscribe","nextState","configureStore","ReactDOM","Provider","App","applicationState","Voyager","compileSchema","resolve","Cache","SchemaObject","stableStringify","formats","rules","$dataMetaSchema","patternGroups","util","co","validate","schemaKeyRef","v","getSchema","schemaObj","_addSchema","_compile","valid","$async","_opts","async","schema","_meta","addSchema","key","_skipValidation","Array","isArray","length","id","_getId","checkUnique","normalizeId","_schemas","skipValidation","throwOrLogError","$schema","defaultMeta","self","meta","META_SCHEMA_ID","console","warn","currentUriFormat","_formats","uri","_schemaUriFormatFunc","_schemaUriFormat","message","errorsText","error","keyRef","_getSchemaObj","ref","res","baseId","_fragments","fragment","_getSchemaFragment","removeSchema","RegExp","_removeAllSchemas","_refs","_cache","clear","del","cacheKey","serialize","addFormat","format","options","separator","dataVar","text","e","dataPath","slice","shouldAddSchema","cached","addUsedSchema","recursiveMeta","willValidate","localRefs","ids","put","compiling","callValidate","currentOpts","_metaOpts","refs","refVal","_validate","result","apply","arguments","compileAsync","customKeyword","addKeyword","add","getKeyword","removeKeyword","remove","errorClasses","ValidationError","Validation","MissingRefError","MissingRef","META_IGNORE_OPTIONS","META_SUPPORT_DATA","opts","copy","schemaUriFormat","str","test","cache","_loadingSchemas","_compilations","RULES","schemaId","_get$Id","_get$IdOrId","chooseGetId","loopRequired","Infinity","errorDataPath","_errorDataPathProperty","metaOpts","getMetaSchemaOptions","addInitialFormats","$dataSchema","$data","$id","metaSchema","addDraft6MetaSchema","optsSchemas","schemas","addInitialSchemas","regex","validateGenerator","ucs2length","equal","checkCompiling","index","compIndex","endCompiling","splice","patternCode","patterns","toQuotedString","defaultCode","refValCode","customRuleCode","vars","arr","statement","code","patternsHash","defaults","defaultsHash","customRules","compilation","localCompile","cv","sourceCode","source","_schema","_root","isRoot","isTop","schemaPath","errSchemaPath","errorPath","resolveRef","usePattern","useDefault","useCustomRule","processCode","Function","makeValidate","url","_refVal","refCode","refIndex","resolvedRef","rootRefId","addLocalRef","localSchema","inlineRef","inlineRefs","refId","replaceLocalRef","removeLocalRef","inline","regexStr","valueStr","rule","parentSchema","it","definition","macro","keyword","traverse","resolveSchema","parse","refPath","_getFullPath","getFullPath","resolveRecursive","getJsonPointer","parsedRef","resolveUrl","fullPath","baseIds","fullPaths","allKeys","sch","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","keyIndex","escapeFragment","PREVENT_SCOPE_CHANGE","toHash","hash","parts","split","part","unescapeFragment","$ref","SIMPLE_INLINED","limit","checkNoRef","item","countKeys","count","normalize","protocolSeparator","protocol","href","host","path","TRAILING_SLASH_HASH","replace","punycode","Url","slashes","auth","port","hostname","search","query","pathname","urlParse","relative","resolveObject","obj","protocolPattern","portPattern","simplePathPattern","unwise","concat","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","isObject","u","TypeError","queryIndex","indexOf","splitter","uSplit","rest","join","trim","simplePath","exec","substr","proto","lowerProto","toLowerCase","match","atSign","hostEnd","hec","lastIndexOf","decodeURIComponent","parseHost","ipv6Hostname","hostparts","newpart","j","k","charCodeAt","validParts","notHost","bit","push","unshift","toASCII","h","ae","esc","encodeURIComponent","escape","qm","keys","stringify","charAt","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","isAbsolute","nodeType","freeGlobal","global","maxInt","regexPunycode","regexNonASCII","regexSeparators","floor","Math","stringFromCharCode","String","fromCharCode","RangeError","map","array","fn","mapDomain","string","ucs2decode","extra","output","counter","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","base","decode","input","out","basic","oldi","w","t","baseMinusT","codePoint","inputLength","bias","encode","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","webpackPolyfill","deprecate","paths","children","g","eval","arg","prop","qs","sep","eq","regexp","maxKeys","len","kstr","vstr","x","idx","xs","stringifyPrimitive","isFinite","objectKeys","ks","f","a","b","arrA","arrB","dateA","Date","dateB","getTime","regexpA","regexpB","checkDataType","dataType","negate","EQUAL","AND","OK","NOT","to","checkDataTypes","dataTypes","types","null","number","integer","coerceToTypes","optionCoerceTypes","COERCE_TO_TYPES","getProperty","escapeQuotes","varOccurences","matches","varReplace","expr","cleanUpCode","EMPTY_ELSE","EMPTY_IF_NO_ELSE","EMPTY_IF_WITH_ELSE","finalCleanUpCode","ERRORS_REGEXP","REMOVE_ERRORS_ASYNC","RETURN_ASYNC","REMOVE_ERRORS","ROOTDATA_REGEXP","REMOVE_ROOTDATA","schemaHasRules","schemaHasRulesExcept","exceptKeyword","getPathExpr","currentPath","jsonPointers","isNumber","joinPaths","getPath","escapeJsonPointer","getData","lvl","jsonPointer","JSON_POINTER","RELATIVE_JSON_POINTER","segments","segment","unescapeJsonPointer","IDENTIFIER","SINGLE_QUOTE","pos","cb","_traverse","arrayKeywords","propsKeywords","keywords","skipKeywords","additionalItems","items","contains","additionalProperties","propertyNames","not","allOf","anyOf","oneOf","definitions","properties","patternProperties","dependencies","enum","const","required","maximum","minimum","exclusiveMaximum","exclusiveMinimum","multipleOf","maxLength","minLength","pattern","maxItems","minItems","uniqueItems","maxProperties","minProperties","missingRef","missingSchema","errorSubclass","Subclass","create","constructor","validation","json","JSON","cmp","space","cycles","replacer","node","aobj","bobj","seen","parent","level","indent","colonSeparator","toJSON","sort","keyValue","has","at","ch","escapee","next","hex","uffff","parseInt","white","word","reviver","walk","holder","gap","rep","escapable","quote","lastIndex","partial","mind","$keyword","$ruleType","$refKeywords","all","$es7","yieldAwait","$lvl","$dataLvl","dataLevel","$schemaPath","$errSchemaPath","$breakOnError","$valid","$$outStack","createErrors","messages","verbose","__err","compositeRule","$top","rootId","dataPathArr","$closingBraces1","$closingBraces2","$typeSchema","$typeIsArray","coerceTypes","$coerceToTypes","$rulesGroup","$shouldUseGroup","$method","$dataType","$coerced","$bracesCoercion","arr1","$type","$i","l1","$parentData","v5","arr2","i2","l2","useDefaults","arr3","$propertyKey","i3","l3","$sch","default","$passData","arr4","l4","arr5","$rule","i5","l5","$shouldUseRule","$code","implements","impl","$ruleImlementsSomeKeyword","gen","ctx","args","Promise","reject","onFulfilled","ret","onRejected","err","throw","done","toPromise","isPromise","then","displayName","isGenerator","isGeneratorFunction","thunkToPromise","arrayToPromise","objectToPromise","results","promises","promise","defer","wrap","createPromise","__generatorFunction__","DATE","DAYS","TIME","HOSTNAME","URI","URITEMPLATE","URL","UUID","mode","date","month","day","time","full","hour","minute","second","timeZone","fast","email","ipv4","ipv6","uuid","dateTime","DATE_TIME_SEPARATOR","NOT_URI_FRAGMENT","Z_ANCHOR","ruleModules","ALL","forEach","group","implKeywords","custom","$refCode","$refVal","$message","missingRefs","$it","$nextValid","passContext","__callValidate","$closingBraces","$currentBaseId","$allSchemasEmpty","$errs","every","$wasComposite","$isData","$idx","$dataNxt","$nextData","$nonEmptySchema","$schemaDeps","$propertyDeps","$ownProperties","ownProperties","$property","$deps","$currentErrorPath","$useData","$prop","$propertyPath","$missingProperty","$vSchema","$schemaValue","$unknownFormats","unknownFormats","$allowUnknown","$format","$isObject","$formatType","$formatRef","$additionalItems","$currErrSchemaPath","$isMax","$exclusiveKeyword","$schemaExcl","$op","$notOp","$errorKeyword","$schemaValueExcl","$exclusive","$exclType","$exclIsNumber","$opStr","$opExpr","unicode","multipleOfPrecision","$allErrorsOption","$key","$dataProperties","$schemaKeys","$pProperties","$pPropertyKeys","$aProperties","$someProperties","$noAdditional","$additionalIsSchema","$removeAdditional","removeAdditional","$checkAdditional","$required","$requiredHash","$pgProperties","$pgPropertyKeys","i1","$pProperty","$pgProperty","$additionalProperty","$useDefaults","i4","$hasDefault","arr6","i6","l6","$pgSchema","$pgMin","$pgMax","$limit","$reason","$moreOrLess","$invalidName","$propertySch","$loopRequired","KEYWORDS","keywordsJsonPointers","metaSchemaRef","callback","loadSchema","loadMetaSchemaOf","_compileAsync","loadMissingSchema","added","schemaPromise","removePromise","_addRule","ruleGroup","rg","$compile","$inline","$macro","$ruleValidate","$validateCode","$definition","$rDef","$validateSchema","$ruleErrs","$ruleErr","$asyncKeyword","statements","$parentDataProperty","def_callRuleValidate","modifying","def_customError","isVConcatSpec","isHConcatSpec","isFacetSpec","subspec","normalizeFacet","isLayerSpec","normalizeLayer","parentEncoding","parentProjection","layer","encoding","projection","mergedEncoding","mergeEncoding","mergedProjection","mergeProjection","normalizeNonFacetUnit","isRepeatSpec","normalizeRepeat","vconcat","normalizeVConcat","hconcat","normalizeHConcat","hasRow","channelHasField","ROW","hasColumn","COLUMN","row","column","mark","width","height","selection","outerSpec","facet","normalizeFacetedUnit","log","INVALID_SPEC","opt","overriden","reduce","encodingOverridden","merged","projectionOverridden","isMarkDef","isPrimitiveMark","isNonFacetUnitSpecWithPrimitiveMark","isRanged","hasX","X","hasY","Y","hasX2","X2","hasY2","Y2","normalizedSpec","duplicate","x2","y","y2","normalizeRangedUnit","lineWithRange","isPathMark","markDef","pointOverlay","markConfig","point","opacity","shape","getPointOverlay","lineOverlay","line","getLineOverlay","dropLineAndPoint","stackProps","stack","overlayEncoding","fieldChannel","offset","stackFieldChannel","filled","normalizePathOverlay","compositeMark","accumulate","dict","defs","fieldDef","pureFieldDef","vals","fieldDefIndex","vlEncoding","fieldDefs","isConcatSpec","child","extendStatics","setPrototypeOf","__proto__","__extends","__","__assign","assign","__rest","getOwnPropertySymbols","__decorate","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","__generator","body","_","label","sent","trys","ops","verb","Symbol","iterator","op","__exportStar","__values","__read","ar","__spread","__await","__asyncGenerator","asyncIterator","resume","fulfill","settle","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__importDefault","accessorName","fname","accessorFields","fields","empty","identity","zero","one","truthy","falsy","field","substring","$","method","None","Warn","Info","Debug","info","debug","exp","sign","pow","exponent","pan","domain","lift","ground","d0","d1","dd","panLinear","panLog","panPow","zoom","anchor","scale","da","zoomLinear","zoomLog","zoomPow","lt","gt","ord","orders","bind","tid","evt","handler","clearTimeout","setTimeout","delay","NULL","size","set","delete","clean","flat","n0","array0","n1","array1","i0","compare","padchar","align","ceil","reps","defaultParser","parser","ellipsis","max","filter","visitor","Channel","LATITUDE","LONGITUDE","LATITUDE2","LONGITUDE2","COLOR","FILL","STROKE","SHAPE","SIZE","OPACITY","TEXT","ORDER","DETAIL","KEY","TOOLTIP","HREF","GEOPOSITION_CHANNEL_INDEX","longitude","longitude2","latitude","latitude2","GEOPOSITION_CHANNELS","flagKeys","UNIT_CHANNEL_INDEX","color","fill","stroke","order","detail","tooltip","channel","CHANNEL_INDEX","CHANNELS","SINGLE_DEF_CHANNELS","SINGLE_DEF_CHANNEL_INDEX","UNIT_CHANNELS","NONPOSITION_CHANNELS","NONPOSITION_CHANNEL_INDEX","POSITION_SCALE_CHANNEL_INDEX","POSITION_SCALE_CHANNELS","NONPOSITION_SCALE_CHANNELS","NONPOSITION_SCALE_CHANNEL_INDEX","SCALE_CHANNEL_INDEX","tick","circle","square","bar","rect","trail","area","geoshape","SCALE_CHANNELS","getSupportedMark","stableStringify_","excludedItems","dest","src","deepMerge_","mergeDeep","props","other","without","arrays","values","val","num","isNaN","_vals","alphanumericS","isLogicalNot","logicalExpr","isLogicalAnd","and","isLogicalOr","or","orderedProps","deleteNestedProperty","toUpperCase","splitAccessPath","stringValue","forEachLeave","normalizer","normalizeLogicalOperand","normalizerRegistry","COMPOSITE_MARK_STYLES","BOXPLOT_STYLES","VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX","VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX","BOXPLOT","normalizeBoxPlot","ERRORBAR","normalizeErrorBar","Mark","AREA","BAR","LINE","POINT","RECT","RULE","TICK","TRAIL","CIRCLE","SQUARE","GEOSHAPE","MARK_INDEX","PRIMITIVE_MARKS","PRIMITIVE_MARK_INDEX","toSet","STROKE_CONFIG","FILL_CONFIG","FILL_STROKE_CONFIG","VL_ONLY_MARK_CONFIG_PROPERTIES","VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX","defaultMarkConfig","defaultBarConfig","binSpacing","continuousBandSize","defaultTickConfig","thickness","box","boxWhisker","boxMid","supportedChannels","newEncoding","incompatibleChannel","filterUnsupportedChannels","kIQRScalar","extent","isBoxPlotDef","orient","continuousAxisChannelDef","continuousAxis","aggregate","continuousAxisWithoutAggregate","isMinMax","as","postAggregateCalculates","calculate","groupby","bins","timeUnits","encodingWithoutContinuousAxis","channelDef","isFieldDef","vgField","transformedField","bin","timeUnit","transform","isContinuous","boxOrient","sizeMixins","getMarkSpecificConfigMixins","continuousAxisScaleAndAxis","axis","style","encodingWithoutSizeColorAndContinuousAxis","some","hasConditionalFieldDef","getFieldDef","normalizedEncoding","isChannel","invalidEncodingChannel","supportMark","LINE_WITH_VARYING_SIZE","droppingColor","normalizeFieldDef","emptyFieldDef","Type","newChannel","latLongDeprecated","isValueDef","isConditionalDef","def","condition","mapping","r1","invalidFieldType","isDiscrete","countTitle","getTimeUnitParts","titlecase","prefix","suffix","isCount","nofn","binToString","binSuffix","accessPath","defaultTitleFormatter","fieldTitle","functionalTitleFormatter","verbalTitleFormatter","titleFormatter","formatter","rangeType","isAggregateOp","invalidAggregate","fieldDefWithoutAggregate","normalizeTimeUnit","normalizeBin","fullType","getFullName","isCountingAggregateOp","invalidFieldTypeForCountAggregate","newType","defaultType","emptyOrInvalidFieldType","compatible","warning","isBoolean","maxbins","autoMaxBins","setTitleFormatter","primitiveType","primitiveChannelDef","COMPATIBLE","facetChannelShouldBeDiscrete","QUANTITATIVE","AGGREGATE_OP_INDEX","argmax","argmin","average","distinct","mean","median","min","missing","q1","q3","ci0","ci1","stderr","stdev","stdevp","sum","variance","variancep","AGGREGATE_OPS","COUNTING_OPS","SUM_OPS","SHARED_DOMAIN_OPS","SHARED_DOMAIN_OP_INDEX","varName","main","logger","current","warns","infos","debugs","LocalLogger","reset","newLogger","FIT_NON_SINGLE","CANNOT_FIX_RANGE_STEP_WITH_FIT","cannotProjectOnChannelWithoutField","nearestNotSupportForContinuous","selectionNotFound","SCALE_BINDINGS_CONTINUOUS","noSuchRepeatedValue","CONCAT_CANNOT_SHARE_AXIS","REPEAT_CANNOT_SHARE_AXIS","cannotSetTitleAnchor","unrecognizedParse","differentParse","local","ancestor","invalidTransformIgnored","NO_FIELDS_NEEDS_AS","channels","nonZeroScaleUsedWithLengthMark","scaleType","zeroFalse","markOrFacet","when","discreteChannelCannotEncode","BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL","unclearOrientContinuous","unclearOrientDiscreteOrEmpty","orientOverridden","original","actual","CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN","cannotUseScalePropertyWithNonColor","unaggregateDomainHasNoEffectForRawField","unaggregateDomainWithNonSharedDomainOp","unaggregatedDomainWithLogScale","cannotUseSizeFieldWithBandSize","positionChannel","cannotApplySizeToNonOrientedMark","rangeStepDropped","scaleTypeNotWorkWithChannel","defaultScaleType","scaleTypeNotWorkWithFieldDef","scalePropertyNotWorkWithScaleType","propName","scaleTypeNotWorkWithMark","mergeConflictingProperty","propertyOf","v1","v2","independentScaleMeansIndependentGuide","conflictedDomain","domainSortDropped","UNABLE_TO_MERGE_DOMAINS","MORE_THAN_ONE_SORT","INVALID_CHANNEL_FOR_AXIS","cannotStackRangedMark","cannotStackNonLinearScale","stackNonSummativeAggregate","invalidTimeUnit","unitName","dayReplacedWithDate","fullTimeUnit","droppedDay","TimeUnit","YEAR","MONTH","DAY","HOURS","MINUTES","SECONDS","MILLISECONDS","YEARMONTH","YEARMONTHDATE","YEARMONTHDATEHOURS","YEARMONTHDATEHOURSMINUTES","YEARMONTHDATEHOURSMINUTESSECONDS","MONTHDATE","HOURSMINUTES","HOURSMINUTESSECONDS","MINUTESSECONDS","SECONDSMILLISECONDS","QUARTER","YEARQUARTER","QUARTERMONTH","YEARQUARTERMONTH","UTCYEAR","UTCMONTH","UTCDAY","UTCDATE","UTCHOURS","UTCMINUTES","UTCSECONDS","UTCMILLISECONDS","UTCYEARMONTH","UTCYEARMONTHDATE","UTCYEARMONTHDATEHOURS","UTCYEARMONTHDATEHOURSMINUTES","UTCYEARMONTHDATEHOURSMINUTESSECONDS","UTCMONTHDATE","UTCHOURSMINUTES","UTCHOURSMINUTESSECONDS","UTCMINUTESSECONDS","UTCSECONDSMILLISECONDS","UTCQUARTER","UTCYEARQUARTER","UTCQUARTERMONTH","UTCYEARQUARTERMONTH","LOCAL_SINGLE_TIMEUNIT_INDEX","year","quarter","hours","minutes","seconds","milliseconds","TIMEUNIT_PARTS","UTC_SINGLE_TIMEUNIT_INDEX","utcyear","utcquarter","utcmonth","utcday","utcdate","utchours","utcminutes","utcseconds","utcmilliseconds","UTC_MULTI_TIMEUNIT_INDEX","utcyearquarter","utcyearquartermonth","utcyearmonth","utcyearmonthdate","utcyearmonthdatehours","utcyearmonthdatehoursminutes","utcyearmonthdatehoursminutesseconds","utcquartermonth","utcmonthdate","utchoursminutes","utchoursminutesseconds","utcminutesseconds","utcsecondsmilliseconds","UTC_TIMEUNIT_INDEX","TIMEUNIT_INDEX","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quartermonth","monthdate","hoursminutes","hoursminutesseconds","minutesseconds","secondsmilliseconds","TIMEUNITS","SET_DATE_METHOD","dateMethods","singleUnit","isUtc","rawSetDateMethod","setDateMethod","getDateMethod","unit","isUTC","isUTCTimeUnit","UTC","timeUnitPart","containsTimeUnit","fieldRef","utc","dateExpr","tu","dateTimeExpr","shortTimeLabels","isUTCScale","dateComponents","expression","hasYear","timeComponents","dateTimeComponents","MONTHS","SHORT_MONTHS","SHORT_DAYS","units","lowerM","monthIndex","shortM","shortMonthIndex","normalizeMonth","normalizeQuarter","lowerD","dayIndex","shortD","shortDayIndex","normalizeDay","ORDINAL","TEMPORAL","NOMINAL","GEOJSON","TYPE_INDEX","quantitative","ordinal","temporal","nominal","geojson","markSpecificConfig","encodingWithoutSize","encodingWithoutX2Y2","encodingWithoutX_X2_Y_Y2","STACK_OFFSET_INDEX","center","STACKABLE_MARKS","STACK_BY_DEFAULT_MARKS","stackConfig","xDef","yDef","potentialStackedChannel","stackedFieldDef","stackedField","isStringFieldDef","dimensionChannel","dimensionDef","dimensionField","stackBy","sc","cDef","isStackOffset","ScaleType","LINEAR","groupbyChannel","impute","BIN_LINEAR","LOG","POW","SQRT","SEQUENTIAL","QUANTILE","QUANTIZE","THRESHOLD","BIN_ORDINAL","BAND","SCALE_CATEGORY_INDEX","linear","sqrt","sequential","band","SCALE_TYPES","scaleType1","scaleType2","scaleCategory1","scaleCategory2","SCALE_PRECEDENCE_INDEX","CONTINUOUS_TO_CONTINUOUS_SCALES","CONTINUOUS_TO_CONTINUOUS_INDEX","CONTINUOUS_DOMAIN_SCALES","CONTINUOUS_DOMAIN_INDEX","DISCRETE_DOMAIN_SCALES","DISCRETE_DOMAIN_INDEX","BIN_SCALES_INDEX","TIME_SCALE_TYPES","defaultScaleConfig","textXRangeStep","rangeStep","pointPadding","bandPaddingInner","facetSpacing","minBandSize","minFontSize","maxFontSize","minOpacity","maxOpacity","minSize","minStrokeWidth","maxStrokeWidth","scheme","SCALE_PROPERTY_INDEX","range","reverse","round","clamp","nice","interpolate","padding","paddingInner","paddingOuter","SCALE_PROPERTIES","NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES","NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX","isContinuousToContinuous","hasContinuousDomain","isColorChannel","ACTION_TYPE_INDEX","BOOKMARK_ADD_PLOT","BOOKMARK_CLEAR_ALL","BOOKMARK_MODIFY_NOTE","BOOKMARK_REMOVE_PLOT","CUSTOM_WILDCARD_ADD","CUSTOM_WILDCARD_ADD_FIELD","CUSTOM_WILDCARD_MODIFY_DESCRIPTION","CUSTOM_WILDCARD_REMOVE","CUSTOM_WILDCARD_REMOVE_FIELD","DATASET_SCHEMA_CHANGE_FIELD_TYPE","DATASET_SCHEMA_CHANGE_ORDINAL_DOMAIN","DATASET_REQUEST","DATASET_RECEIVE","FILTER_ADD","FILTER_CLEAR","FILTER_MODIFY_EXTENT","FILTER_MODIFY_MAX_BOUND","FILTER_MODIFY_MIN_BOUND","FILTER_MODIFY_TIME_UNIT","FILTER_MODIFY_ONE_OF","FILTER_REMOVE","FILTER_TOGGLE","LOG_ERRORS_ADD","LOG_ERRORS_CLEAR","LOG_WARNINGS_ADD","LOG_WARNINGS_CLEAR","RELATED_VIEWS_HIDE_TOGGLE","RESULT_RECEIVE","RESULT_REQUEST","RESULT_LIMIT_INCREASE","RESULT_MODIFY_FIELD_PROP","RESULT_MODIFY_NESTED_FIELD_PROP","RESET","SET_CONFIG","SHELF_AUTO_ADD_COUNT_CHANGE","SHELF_LOAD_QUERY","SHELF_GROUP_BY_CHANGE","SHELF_PREVIEW_SPEC","SHELF_PREVIEW_QUERY","SHELF_PREVIEW_DISABLE","SPEC_ACTION_TYPE_INDEX","TAB_ACTION_TYPE_INDEX","SET_APPLICATION_STATE","ACTION_TYPES","action","SPEC_CLEAR","SPEC_MARK_CHANGE_TYPE","SPEC_FIELD_ADD","SPEC_FIELD_AUTO_ADD","SPEC_FIELD_REMOVE","SPEC_FIELD_MOVE","SPEC_FIELD_PROP_CHANGE","SPEC_FIELD_NESTED_PROP_CHANGE","SPEC_FUNCTION_CHANGE","SPEC_FUNCTION_ADD_WILDCARD","SPEC_FUNCTION_DISABLE_WILDCARD","SPEC_FUNCTION_ENABLE_WILDCARD","SPEC_FUNCTION_REMOVE_WILDCARD","SPEC_VALUE_CHANGE","SPEC_LOAD","TAB_ADD","TAB_REMOVE","TAB_SWITCH","TAB_TITLE_UPDATE","errorCatch","alert","selectConfig","payload","fetchCompassQLBuildSchema","catch","ActionCreators","clearHistory","buildSchemaAndDispatchDataReceive","Query","Schema","Data","serverUrl","fetch","headers","credentials","fieldSchemas","response","modelGroup","recommend","fromSpecQueryModelGroup","build","DEFAULT_QUERY_CONFIG","answerSet","generate","nestedAnswerSet","nest","rank","extendNestedEnumIndex","enumIndex","DEFAULT_ENUM_INDEX","defaultSpecConfig","useUnaggregatedDomain","propertyPrecedence","DEFAULT_PROP_PRECEDENCE","toKey","numberNominalProportion","numberNominalLimit","constraintManuallySpecifiedValue","autoAddCount","hasAppropriateGraphicTypeForMark","omitAggregate","omitAggregatePlotWithDimensionOnlyOnFacet","omitAggregatePlotWithoutDimension","omitBarLineAreaWithOcclusion","omitBarTickWithSize","omitMultipleNonPositionalChannels","omitRaw","omitRawContinuousFieldForAggregatePlot","omitRepeatedField","omitNonPositionalOrFacetOverPositionalChannels","omitTableWithOcclusionIfAutoAddCount","omitVerticalDotPlot","omitInvalidStackSpec","omitNonSumStack","preferredBinAxis","preferredTemporalAxis","preferredOrdinalAxis","preferredNominalAxis","preferredFacet","minCardinalityForBin","maxCardinalityForCategoricalColor","maxCardinalityForFacet","maxCardinalityForShape","timeUnitShouldHaveVariation","typeMatchesSchemaType","stylize","smallRangeStepForHighCardinalityOrFacet","maxCardinality","nominalColorScaleForHighCardinality","palette","xAxisOnTopForHighYCardinalityWithoutColumn","maxGoodCardinalityForFacet","maxGoodCardinalityForColor","minPercentUniqueForKey","minCardinalityForKey","enumOpt","binProps","scaleProps","axisProps","legendProps","ENCODING_TOPLEVEL_PROP_INDEX","autoCount","hasFn","legend","ENCODING_TOPLEVEL_PROPS","ENCODING_NESTED_PROP_PARENT_INDEX","BIN_CHILD_PROPS","SORT_CHILD_PROPS","BIN_PROPS","SORT_PROPS","SCALE_PROPS","AXIS_PROPS","AXIS_PROPERTIES","LEGEND_PROPS","LEGEND_PROPERTIES","ENCODING_NESTED_PROPS","VIEW_PROPS","isEncodingNestedProp","ENCODING_NESTED_PROP_INDEX","isEncodingTopLevelProperty","ALL_ENCODING_PROPS","Property","MARK","TRANSFORM","STACK","FORMAT","CHANNEL","AGGREGATE","AUTOCOUNT","BIN","HAS_FN","TIMEUNIT","FIELD","TYPE","SORT","SCALE","AXIS","LEGEND","WIDTH","HEIGHT","BACKGROUND","PADDING","TITLE","AXIS_PARTS","AXIS_PROPERTY_TYPE","grid","gridScale","labels","labelFlush","labelOverlap","minExtent","maxExtent","ticks","title","zindex","COMMON_AXIS_PROPERTIES_INDEX","labelBound","labelPadding","position","tickCount","tickSize","titlePadding","AXIS_PROPERTIES_INDEX","labelAngle","titleMaxLength","VG_AXIS_PROPERTIES_INDEX","VG_AXIS_PROPERTIES","defaultLegendConfig","COMMON_LEGEND_PROPERTY_INDEX","entryPadding","VG_LEGEND_PROPERTY_INDEX","VG_LEGEND_PROPERTIES","SHORT_WILDCARD","initNestedPropName","fullNames","fullName","initialIndices","shortName","shortNameWithNo","isShortWildcard","isWildcardDef","defaultName","defaultEnumValues","extend","DEFAULT_NAME","steps","minstep","divide","sortProps","DEFAULT_BOOLEAN_ENUM","DEFAULT_BIN_PROPS_ENUM","DEFAULT_SORT_PROPS","DEFAULT_SCALE_PROPS_ENUM","DEFAULT_AXIS_PROPS_ENUM","DEFAULT_LEGEND_PROPS_ENUM","fieldNames","toMap","nestedMap","namedfunc","true","false","keystr","isFunction","isDate","isValid","isBuffer","Buffer","boolean","field_re","strrep","truncateOnWord","rev","cnt","tok","truncate_word_re","accessor","mutator","$func","$length","$in","comparator","numcmp","stablesort","sortBy","keyFn","indices","sa","sb","permute","swap","random","pad","truncate","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","Uint8Array","encodingOrOffset","allocUnsafe","from","ArrayBuffer","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","isEncoding","write","fromString","checked","buffer","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","read","buf","readUInt16BE","foundIndex","found","hexWrite","Number","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","hi","lo","utf16leToBytes","fromByteArray","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","allocUnsafeSlow","_isBuffer","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","includes","_arr","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","toByteArray","stringtrim","base64clean","dst","b64","placeHoldersCount","tmp","placeHolders","Arr","L","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","LN2","specQ","specM","SpecQueryModel","wildcardIndex","propKey","fromKey","hasProperty","reducer","getEnumerator","enumerator","ENUMERATOR_INDEX","PropIndex","encodingIndicesByProperty","enumerate","jobIndex","wildcard","encodings","encQ","getEncodingQueryByIndex","propWildcard","getEncodingProperty","isValueQuery","isDisabledAutoCountQuery","propVal","setEncodingProperty","checkEncoding","checkSpec","resetEncodingProperty","getMark","setMark","resetMark","EncodingPropertyGeneratorFactory","nestedProp","encodingConstraints","FIELD_CONSTRAINTS_BY_PROPERTY","strict","satisfy","violatedConstraint","toShorthand","VALUE_CONSTRAINTS_BY_PROPERTY","isAutoCountQuery","DEFAULT_PROPS","valueQ","isWildcard","params","wildcardMode","isFieldQuery","encodingProperty","PROPERTY_SUPPORTED_CHANNELS","isEncodingNestedParent","childProp","ordinalDomain","toFieldDef","vlFieldDef","encQs","toValueDef","isDimension","fieldQ","ExpandedType","fieldType","specifiedType","hasDiscreteDomain","scaleConfig","isScaleChannel","channelSupportScaleType","fieldDefMatchScaleType","shorthandParser","include","INCLUDE_ALL","REPLACE_NONE","getVlStack","viewProp","propString","fieldDefStr","fieldAndParams","isEnabledAutoCountQuery","func","getEncodingNestedProp","localeCompare","parentValue","nestedPropChildren","nestedPropObject","fieldDefProps","delim","indexOfDelim","replaceIndex","getReplacer","pi","vlspec","fromSpec","shorthand","splitShorthand","splitPart","splitWithTail","splitPartKey","splitPartValue","fieldDefPart","partParams","closingBraceIndex","propEqualSignIndex","parsedValue","openingBraceIndex","getClosingIndex","openingBracketIndex","closingBracketIndex","propIndex","nextCommaIndex","closingChar","fieldDefShorthand","fnEnumIndex","rawFieldDef","insideFnParts","isTimeUnit","encQMixins","requiredEncodingProps","exclude","objectContainsWildcard","background","hasRequiredStackProperties","toEncoding","getStackOffset","setByKey","FIELD_CONSTRAINTS","description","allowWildcardForProperties","___","fieldQwithoutBin","cardinality","encWildcardIndex","channelCompatibility","timeUnitHasVariation","sType","scaleProp","sProp","scaleTypeSupportProperty","channelScalePropertyIncompatability","PrimitiveType","BOOLEAN","STRING","NUMBER","INTEGER","DATETIME","vlType","ec","EncodingConstraintModel","FIELD_CONSTRAINT_INDEX","dlBin","dlBin_","tableSchema","summaries","summary","inferAll","tableSchemaFieldIndex","fieldProfile","dataEntry","fieldSchema","originalIndex","stats","timeStats","binStats","orgFieldSchema","binSummary","timeSummary","derivedTableSchema","_tableSchema","_fieldSchemaIndex","fieldName","augmentTimeUnitDomain","excludeInvalid","invalidCount","unique","dateEncQ","singleUnitEncQ","fieldQueryParts","oldUnique","newUnique","bucket","binUnique","stop","timeunit","dateString","getDay","convert","prev","cur","ztest1","nullH","nullh","gaussian","normal","mu","SE","z","cdf","ztestP","n2","diffs","ztest2","meanDiff","quantile","quartile","H","geometric","harmonic","M2","modeskew","avg","med","std","dot","dist","L2","cohensd","x1","s1","s2","covariance","vx","vy","xm","ym","tie","cor","mua","mub","sda","sdb","ra","rb","aa","bb","ab","A","mat","B","linearRegression","xy","sx","sy","slope","icept","fit","intercept","R","rss","bootstrap","ci","N","alpha","smooth","bs","means","samples","icdf","paired","zeros","M","entropy","counts","mutual","px","py","I","profile","sd","__summary__","TYPES","PARSERS","TESTS","datum","bracket","infer","annotation","parsers","repeat","uniform","pdf","rds","PI","cd","Z","SQRT2","precision","eps","maxb","logb","div","span","mid","bisect","date_value","date_index","dmin","dmax","minb","minbins","find","d3_time","tempDate","baseDate","setFullYear","utcBaseDate","setUTCFullYear","setTime","entry","locale","getSeconds","getMinutes","getHours","getDate","getMonth","utcSecond","utcMinute","utcHour","utcDay","utcMonth","utcYear","getUTCSeconds","getUTCMinutes","getUTCHours","getUTCDay","getUTCDate","getUTCMonth","STEPS","toUnitMap","t0","t1","newInterval","floori","offseti","interval","millisecond","setMilliseconds","setSeconds","setMinutes","setHours","setDate","getTimezoneOffset","weekday","sunday","monday","tuesday","wednesday","thursday","friday","saturday","setMonth","getFullYear","setUTCMilliseconds","setUTCSeconds","setUTCMinutes","setUTCHours","setUTCDate","utcWeekday","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","setUTCMonth","getUTCFullYear","days","sundays","mondays","tuesdays","wednesdays","thursdays","fridays","saturdays","weeks","months","years","utcMillisecond","utcMilliseconds","utcSeconds","utcMinutes","utcHours","utcDays","utcSundays","utcMondays","utcTuesdays","utcWednesdays","utcThursdays","utcFridays","utcSaturdays","utcWeeks","utcMonths","utcYears","version","week","utcWeek","constraint","AbstractConstraintModel","hasAllRequiredPropertiesSpecific","VALUE_CONSTRAINTS","VALUE_CONSTRAINT_INDEX","NONPOSITION_CHANNELS_INDEX","specConstraint","getEncodings","isEncodingProperty","SpecConstraintModel","SPEC_CONSTRAINTS","usedChannel","autoCountEncIndex","channelUsed","isAggregate","specQuery","hasEncodingProperty","nonPositionChannelCount","hasEnumeratedNonPositionChannel","hasNonPositionalChannelOrFacet","hasEnumeratedNonPositionOrFacetChannel","fieldUsed","fieldEnumerated","getEncodingQueryByChannel","xIsMeasure","isMeasure","yIsMeasure","xEncQ","yEncQ","xIsDimension","yIsDimension","colorEncQ","colorIsQuantitative","colorIsOrdinal","getStackChannel","specStack","stackParentEncQ","SPEC_CONSTRAINT_INDEX","SPEC_CONSTRAINTS_BY_PROPERTY","wildcardAssignment","_rankingScore","_spec","_channelFieldCount","_wildcardIndex","_assignedWildcardIndex","_opt","WildcardIndex","getDefaultName","initWildcard","defaultWildcardName","getDefaultEnumValues","propObj","countEncQ","specEncoding","groupBy","getGroupByKey","parsedGroupBy","parseGroupBy","toSpec","getRankingScore","rankingName","setRankingScore","score","_mark","_encodings","_encodingIndicesByProperty","encodingsIndex","indicesByProp","isEmpty","REPLACE_BLANK_FIELDS","REPLACE_XY_CHANNELS","REPLACE_FACET_CHANNELS","REPLACE_MARK_STYLE_CHANNELS","grpBy","isExtendedGroupBy","getReplacerIndex","valFrom","valTo","GROUP_BY_FIELD_TRANSFORM","GROUP_BY_ENCODING","groupRegistry","FIELD_TRANSFORM","ENCODING","SPEC","specModels","queryNest","replaces","orderGroupBy","GROUP_BY_FIELD","PARSED_GROUP_BY_FIELD","registerKeyFn","PARSED_GROUP_BY_FIELD_TRANSFORM","PARSED_GROUP_BY_ENCODING","encQIndex","yScaleType","xScaleType","orderBy","normalizedQ","chooseBy","aggregation","fieldOrder","rankingRegistry","m1","m2","getScoreDifference","g1","g2","getTopResultTreeItem","scoreDifference","getScore","model","subgroup","groupComparatorFactory","comparatorFactory","EFFECTIVENESS","register","effectiveness","topItem","isResultTree","mapLeaves","SCORERS","AxisScorer","DimensionScorer","FacetScorer","MarkScorer","SizeChannelScorer","TypeChannelScorer","features","scorer","scores","initScore","feature","BIN_Q","T","TIMEUNIT_T","TIMEUNIT_O","O","pAxis","featurize","getExtendedType","featureScore","getFeatureScore","Scorer","ExtendedType","Q","K","NONE","scoreIndex","maxFScore","bar_size","tick_size","featureScores","TERRIBLE","SCORE","CONTINUOUS_TYPE_CHANNEL_SCORE","ORDERED_TYPE_CHANNEL_SCORE","NOMINAL_TYPE_CHANNEL_SCORE","encodingQueryByField","fieldKey","bestFieldFeature","best","MEASURES","DISCRETE_OR_NONE","xType","yType","feature2","ttMark","tdMark","ddMark","hasOcclusion","hasCount","hasBin","aggregationQualityFeature","fieldWildcardIndices","numFields","totalScore","fieldWildcard","fieldIndex","globalThis","support","Blob","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","Headers","append","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","bufferClone","view","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","arrayBuffer","isConsumed","readAsText","chars","readArrayBufferAsText","formData","oldValue","entries","methods","Request","upcased","signal","referrer","reParamSearch","form","Response","bodyInit","status","ok","statusText","clone","redirectStatuses","redirect","location","DOMException","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","open","fixUrl","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","MAIN","RAW","DEFAULT_RESULT","isLoading","plots","DEFAULT_RESULT_INDEX","addCategoricalField","addQuantitativeField","addTemporalField","alternativeEncodings","histograms","RESULT_TYPES","plotWithKey","wildcardFieldIndex","plot","fieldInfos","fromFieldQuery","isEnumeratedWildcardField","groupByKey","DEFAULT_SHELF","DEFAULT_SHELF_UNIT_SPEC","filters","SHELF_GROUP_BY_INDEX","auto","fieldTransform","hasWildcardFn","hasWildcardField","SHELF_GROUP_BYS","DEFAULT_ORDER_BY","DEFAULT_CHOOSE_BY","toSpecQuery","hasAnyWildcard","getDefaultGroupBy","shelf","toFieldQuery","anyEncodings","fd","toEncodingQuery","oldConfig","fromEncodingQueries","hasWildcardChannel","fromValueQuery","toFieldQueryFunctionMixins","fieldDefWithoutFn","fromFieldQueryFunctionMixins","fromFieldQueryNestedProp","propQ","encDef","valueDef","shelfId","encodingMixins","fromEncodingQuery","isShelfFieldDef","toValueQuery","QUANTITATIVE_FUNCTIONS","TEMPORAL_FUNCTIONS","FUNCTIONS_INDEX","excludeUndefined","isShelfFunction","fns","aggregates","hasNoFn","sortFunctions","enumerateUndefined","baseEnum","mixins","fieldQParts","hasUndefinedInEnum","convertToDateTimeObject","timeStamp","getMilliseconds","transforms","isFilter","isFieldRangePredicate","isFieldOneOfPredicate","fieldFilterExpression","ast","vegaExpression","codegen","whitelist","globalvar","getDefaultTimeRange","filterIndexOf","ASTNode","visit","elements","left","right","callee","consequent","alternate","argument","TokenName","lookahead","ILLEGAL","RegexNonAsciiIdentifierStart","RegexNonAsciiIdentifierPart","assert","isDecimalDigit","isHexDigit","isOctalDigit","isWhiteSpace","isLineTerminator","isIdentifierStart","isIdentifierPart","skipComment","scanHexEscape","throwError","scanUnicodeCodePointEscape","cu1","cu2","getEscapedIdentifier","scanIdentifier","getIdentifier","scanPunctuator","code2","ch2","ch3","ch4","ch1","scanNumericLiteral","scanHexLiteral","octal","scanOctalLiteral","parseFloat","scanRegExp","flags","classMarker","terminated","literal","scanRegExpBody","scanRegExpFlags","$0","$1","exception","testRegExp","advance","scanStringLiteral","lex","token","peek","finishBinaryExpression","operator","finishCallExpression","finishIdentifier","finishLiteral","finishMemberExpression","computed","member","finishProperty","kind","messageFormat","msg","whole","throwUnexpected","expect","matchKeyword","parseArrayInitialiser","parseConditionalExpression","finishArrayExpression","parseObjectPropertyKey","parseObjectProperty","parseObjectInitialiser","finishObjectExpression","legalKeywords","parsePrimaryExpression","parseExpression","parseGroupExpression","parseArguments","parseNonComputedMember","isIdentifierName","parseComputedMember","parsePostfixExpression","parseLeftHandSideExpressionAllowCall","parseUnaryExpression","binaryPrecedence","prec","marker","markers","parseBinaryExpression","finishConditionalExpression","blacklist","constants","functions","fieldvar","globals","memberDepth","outputGlobal","Generators","Literal","Identifier","MemberExpression","CallExpression","ArrayExpression","BinaryExpression","UnaryExpression","ConditionalExpression","LogicalExpression","ObjectExpression","E","LN10","LOG2E","LOG10E","SQRT1_2","MIN_VALUE","MAX_VALUE","cast","fncall","acos","asin","atan","atan2","cos","sin","tan","now","datetime","timezoneoffset","indexof","lastindexof","upper","lower","if","predicate","in","isFieldEqualPredicate","useInRange","fieldExpr","valueExpr","exprs","isDateTime","isLocalSingleTimeUnit","isUtcSingleTimeUnit","getLocalTimeUnit","filterOp","isSelectionPredicate","selectionPredicate","isFieldPredicate","marks","forEachSelection","selCmpt","selCompiler","forEachTransform","txCompiler","selections","component","sel","compiler","getFacetModel","isFacetModel","STORE","TUPLE","MODIFY","SELECTION_DOMAIN","selDefs","selCmpts","selectionConfig","selDef","cfg","events","on","signals","modifyExpr","update","facetModel","getName","needsUnit","topLevelSignals","isUnitModel","assembleUnitSelectionMarks","dfnode","stores","predicateStr","vname","getSelectionComponent","tunode","insertAsParentOf","domainRaw","selDomain","project","scaleDomain","identifier","proj","SELECTION_ID","sgNames","_signalNames","basename","xi","yi","DEFAULT_SOURCE","VIEW","MARKS","DEFAULT_MARKS","parseMerge","selector","parseSelector","arc","image","symbol","endChar","pushChar","popChar","LBRACK","RBRACK","stream","between","parseBetween","throttle","markname","parseThrottle","marktype","consume","debounce","parseStream","defaultConfig","single","multi","toggle","translate","fillOpacity","nameMap","rename","oldName","newName","NameMap","parentGivenName","repeater","correctDataNames","lookupDataSource","scaleNameMap","projectionNameMap","layoutSizeNameMap","normalizeTransform","sources","outputNodes","outputNodeRefCounts","ancestorParse","isFaceted","layoutSize","Split","layoutHeaders","scales","axes","legends","getSizeSignalRef","initSize","parseScale","parseLayoutSize","renameTopLevelLayoutSize","parseSelection","parseProjection","parseData","parseAxisAndHeader","parseLegend","parseMarkGroup","renameLayoutSize","assembleGroupStyle","assembleLayoutSize","assembleHeaderMarks","headerMarks","HEADER_CHANNELS","getTitleGroup","getHeaderGroups","assembleAxes","assembleLegends","assembleProjections","assembleTitle","extractTitleConfig","nonMark","assembleGroup","assembleSelectionSignals","layout","assembleLayout","assembleMarks","assembleScales","hasDescendantWithFieldOnChannel","requestDataName","refCounts","sizeType","scaleComponent","isVgRangeStep","scaleName","assembleDomain","getFieldFromDomain","sizeExpr","getSource","getSizeName","oldSizeName","renameScale","renameProjection","originalScaleName","projectionName","getScaleComponent","localScaleComponent","variableName","origName","Model","reduceFieldDef","getMapping","acc","forEachFieldDef","ModelWithField","titleConfig","titleMarkConfig","normalizePredicate","VG_MARK_CONFIGS","strokeCap","strokeWidth","strokeOpacity","strokeDash","strokeDashOffset","tension","baseline","dx","dy","radius","theta","angle","font","fontSize","fontWeight","fontStyle","cursor","axisCmpt","propType","mainExtracted","hasAxisPart","titleString","axisComponents","assembleAxis","getHeaderGroup","headerType","layoutHeader","headerCmpt","facetFieldDef","labelAlign","labelBaseline","formatSignalRef","hasAxes","sizeChannel","role","sizeSignal","HEADER_TYPES","textOrient","groups","getStyles","styleConfig","specifiedFormat","numberFormat","formatExpr","startField","endField","numberFormatExpr","timeFormatConfig","_format","formatExpression","f1","f2","fdToMerge","fieldDef1","propsList","getMarkConfig","binFormatExpression","isTimeFieldDef","isScaleFieldDef","timeFormatExpression","timeFormat","specifiedValue","defaultValue","orderDef","fieldRefOption","orderChannelDef","explicit","mergeTitleFieldDefs","stepSignal","sizeSignals","legendComponentIndex","legendByDomain","domainHash","domains","mergedLegendComponent","mergeLegendComponent","flatten","legendCmpt","combine","legendComponent","parseLegendForChannel","parseUnitLegend","parseGuideResolve","parseNonUnitLegend","LegendComponent","getLegendDefWithScale","specifiedLegend","specifiedTitle","getSpecifiedOrDefaultValue","legendEncoding","legendEncode","mergedLegend","childLegend","mergedOrient","getWithExplicit","childOrient","typeMerged","mergedValueWithExplicit","mergeValuesWithExplicit","titleMerger","makeImplicit","defaultTieBreaker","setWithExplicit","implicit","gradient","isLayerModel","isConcatModel","isRepeatModel","channelScaleResolve","guide","copyKeyFromSplit","copyKeyFromObject","diff","tieBreaker","getMaxValue","getConditionValue","conditionalDef","getFirstConditionValue","hasConditionalValueDef","symbolsSpec","applyMarkConfig","gradientSpec","labelsSpec","valueOnly","configValue","transparentIfNeeded","markType","colorVgChannel","fillStrokeMarkDefAndConfig","nonPosition","vgChannel","validPredicate","vgRef","defaultRef","wrapCondition","midPoint","refFn","valueRef","vgConditions","conditionValueRef","isConditionalSelection","textCommon","stackable","getDefaultRef","ignore","markDefProperties","invalidValues","defined","centeredBandPositionMixins","bandRef","defaultPosRef","defaultSizeRef","centerChannel","pointPosition","spacing","baseChannel","stackable2","binMidSignal","binRequiresRange","aFieldDef","a2fieldDef","side","textDef","sizeRef","mult","domainDefinitelyIncludeZero","dt","isBinScale","projections","assembleProjectionForModel","isVgSignalRef","assembleProjectionsForModelAndChildren","specifiedProjection","isGeoShapeMark","isGeoPointOrLineMark","posssiblePair","ProjectionComponent","parseUnitProjection","nonUnitProjection","mergable","merge","first","allPropertiesShared","PROJECTION_PROPERTIES","mergeIfNoConflict","parseNonUnitProjections","assembleScaleRange","isRawSelectionDomain","selectionScaleDomain","otherScaleProps","scaleRange","r0","assembleScalesForModel","specifiedScales","localScaleComponents","specifiedScale","specifiedDomain","parseDomainForChannel","localScaleCmpt","isSelectionDomain","facetParent","isDataRefDomain","FACET_SCALE_PREFIX","parseUnitScaleDomain","parseScaleDomain","childComponent","dr","parseNonUnitScaleDomain","reason","normalizeUnaggregatedDomain","parseSingleChannelDomain","domainSort","isSortField","isSortArray","sortArrayIndexField","uniqueDomains","sorts","simpleSorts","allData","isDataRefUnionedDomain","nonUnionDomain","isFieldRefUnionDomain","mergeDomains","CalculateNode","parseAllForSortIndex","calculateExpressionFromSortField","sortFields","producedFields","assemble","DataFlowNode","debugName","_children","_parent","dependentFields","addChild","numChildren","removeChild","oldChild","swapWithParent","newParent","_source","_name","cloneObj","isRequired","setSource","OutputNode","moveFacetDown","FacetNode","moveMainDownToFacet","AggregateNode","StackNode","addDimensions","removeUnnecessaryNodes","FilterInvalidNode","getLeaves","roots","leaves","dataComponent","optimizers","iterateFromLeaves","removeUnusedSubtrees","moveParseUp","removeDuplicateTimeUnits","dimensions","measures","makeFromEncoding","meas","dims","addDimension","makeFromTransform","differ","parentMeasures","childMeasures","mergeMeasures","columnFields","columnName","rowFields","rowName","childModel","getChildIndependentFieldsWithStep","childIndependentFieldsWithStep","childScaleComponent","assembleRowColumnData","crossedDataName","aggregateChildField","childChannel","make","aggregator","vegaFilters","optimizeNextFromLeaves","SourceNode","ParseNode","hasIntersection","leaf","TimeUnitNode","pfields","_parse","calcFieldMap","isCalculate","isNumberFieldDef","modelParse","assembleFormatParse","assembleTransforms","isInlineData","_data","isUrlData","defaultExtension","isNamedData","hasName","_hash","formula","timeUnitComponent","_stack","dimensionFieldDef","stackProperties","stackby","by","_field","getStackByFields","sortParams","facetby","getGroupbyFields","stackField","scaleComponents","specifiedScaleType","ScaleComponent","parseUnitScaleCore","scaleTypeWithExplicitIndex","parseScaleCore","defaultScaleResolve","explicitScaleType","childScaleType","scaleCompatible","scaleTypeTieBreaker","typeWithExplicit","childScale","parseNonUnitScaleCore","parseScaleProperty","parseScaleRange","tieBreakByComparing","st1","st2","scaleTypePrecedence","mergedScaleCmpt","supportedByScaleType","channelIncompatability","getDefaultValue","parseUnitScaleProperty","parseNonUnitScaleProperty","scalePadding","scalePaddingInner","valueWithExplicit","childValueWithExplicit","barConfig","continuousPadding","paddingValue","paddingInnerValue","bandPaddingOuter","sizeSpecified","xyRangeSteps","noRangeStep","RANGE_PROPERTIES","makeExplicit","parseScheme","defaultRange","isExtendedScheme","sizeRangeMin","maxBandSize","minXYRangeStep","maxSize","pointStep","sizeRangeMax","xScale","xRange","yScale","yRange","getXYRangeStep","rangeWithExplicit","parseRangeForChannel","parseUnitScaleRange","BRUSH","SCALE_TRIGGER","hasScales","intervals","tupleTriggers","scaleTriggers","cs","channelSignalName","dname","scaleStr","coord","channelSignals","toNum","vgStroke","clip","enter","scaleBindings","bound","force","nearest","cellDef","isVoronoi","exists","hasSignal","compilers","inputs","inputBindings","sgname","tuField","tpl","DELTA","onDelta","sizeSg","scaleCmpt","persistent","bookmark","selectRelatedViews","relatedViews","selectShelfPreview","shelfPreview","selectLog","selectCustomWildcardFields","undoable","present","customWildcardFields","selectFilteredData","createSelector","selectFilters","toPredicateFunction","_toConsumableArray","defaultEqualityCheck","defaultMemoize","equalityCheck","lastArgs","lastResult","_len","_key","getDependencies","funcs","dep","dependencyTypes","createSelectorCreator","memoize","_len2","memoizeOptions","_key2","_len3","_key3","recomputations","resultFunc","memoizedResultFunc","_len4","_key4","dependency","resetRecomputations","createStructuredSelector","selectors","selectorCreator","_len5","_key5","composition","dataset","selectDataset","selectSchema","ALL_PRESET_WILDCARD_FIELDS","selectPresetWildcardFields","typeIndex","selectSchemaFieldDefs","selectShelf","selectActiveTab","plotTabState","selectShelfGroupBy","selectShelfSpec","selectShelfAutoAddCount","selectQuery","toQuery","selectQuerySpec","selectDefaultGroupBy","hasWildcards","selectIsQuerySpecific","selectIsQueryEmpty","selectTab","tab","selectActiveTabID","activeTabID","selectResult","resultType","selectResultLimit","selectResultPlots","isQuerySpecific","isQueryEmpty","mainPlots","handleAction","RESULT_ACTION_TYPE_INDEX","filterKey","fetchCompassQLRecommend","preFilteredPlots","componentWillUpdate","nextProps","componentWillMount","componentDidMount","event","datasetLoad","AppRoot","setData","setConfig","shelfSpecLoad","keepWildcardMark","React","PureComponent","bottomPane","footer","hideHeader","hideFooter","SplitPane","defaultSize","DataPane","EncodingPane","ViewPane","Footer","className","LogPane","Header","ClipLoader","SPINNER_COLOR","loading","connect","DragDropContext","AppRootBase","_BarLoader","_BeatLoader","_BounceLoader","_CircleLoader","_ClipLoader","_ClimbingBoxLoader","_DotLoader","_FadeLoader","_GridLoader","_HashLoader","_MoonLoader","_PacmanLoader","_PropagateLoader","_PulseLoader","_RingLoader","_RiseLoader","_RotateLoader","_ScaleLoader","_SyncLoader","_BarLoader2","_interopRequireDefault","_BeatLoader2","_BounceLoader2","_CircleLoader2","_ClipLoader2","_ClimbingBoxLoader2","_DotLoader2","_FadeLoader2","_GridLoader2","_HashLoader2","_MoonLoader2","_PacmanLoader2","_PropagateLoader2","_PulseLoader2","_RingLoader2","_RiseLoader2","_RotateLoader2","_ScaleLoader2","_SyncLoader2","BarLoader","BeatLoader","BounceLoader","CircleLoader","ClimbingBoxLoader","DotLoader","FadeLoader","GridLoader","HashLoader","MoonLoader","PacmanLoader","PropagateLoader","PulseLoader","RingLoader","RiseLoader","RotateLoader","ScaleLoader","SyncLoader","_react","_propTypes","_appendVendorPrefix","_insertKeyframesRule","_helpers","_react2","_propTypes2","_appendVendorPrefix2","_insertKeyframesRule2","_classCallCheck","instance","Constructor","_createClass","defineProperties","descriptor","writable","protoProps","staticProps","_possibleConstructorReturn","ReferenceError","animationNameLong","animationNameShort","Loader","_React$Component","getPrototypeOf","subClass","superClass","_inherits","display","backgroundColor","borderRadius","backgroundClip","overflow","willChange","animation","animationFillMode","calculateRgba","getLineStyle","getAnimationStyle","createElement","getStyle","renderLoader","Component","propTypes","bool","defaultProps","REACT_ELEMENT_TYPE","for","$$typeof","emptyFunction","invariant","ReactPropTypesSecret","checkPropTypes","isValidElement","throwOnDirectAccess","ITERATOR_SYMBOL","ReactPropTypes","createPrimitiveTypeChecker","any","createChainableTypeChecker","thatReturnsNull","arrayOf","typeChecker","componentName","propFullName","PropTypeError","propValue","getPropType","element","instanceOf","expectedClass","expectedClassName","getClassName","isNode","objectOf","expectedValues","is","oneOfType","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","shapeTypes","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","secret","chainedCheckType","expectedType","getPreciseType","iteratorFn","maybeIterable","getIteratorFn","isSymbol","PropTypes","makeEmptyFunction","thatReturns","thatReturnsFalse","thatReturnsTrue","thatReturnsThis","thatReturnsArgument","validateFormat","argIndex","framesToPop","printWarning","loggedTypeFailures","typeSpecs","getStack","typeSpecName","ex","shim","getShim","getVendorPropertyName","nextIndex","nextSource","prefixed","domVendorPrefix","builtinStyle","prefixes","isSupportTest","vendorProp","UpperProp","insertRule","vendorPrefix","keyframes","css","extraSheet","getElementsByTagName","appendChild","sheet","styleSheet","cssRules","cssVendorPrefix","styles","getComputedStyle","documentElement","pre","OLink","animationName","margin","getBallStyle","top","border","transition","borderBottom","borderRight","getCircleStyle","borderColor","borderBottomColor","bottom","borderLeft","getBoxStyle","marginTop","marginLeft","getHillStyle","rotateAnimationName","bounceAnimationName","ballSize","l7","l8","getPosStyle","animationDuration","animationDelay","content","_props","lat","keyframesBefore","keyframesAfter","moonSize","_extends","0","1","animations","keyframesBall","borderTop","distance","2","3","4","5","rightRotateAnimationName","leftRotateAnimationName","perspective","keyframesEven","25","keyframesOdd","animationNameEven","animationNameOdd","_reactDom2","_inlineStylePrefixer2","_reactStyleProptype2","_Pane2","_Resizer2","unFocus","getSelection","removeAllRanges","_Component","_ref","_this","onMouseDown","onTouchStart","onMouseMove","onTouchMove","onMouseUp","active","resized","setSize","eventWithTouches","touches","clientX","clientY","allowResize","onDragStarted","setState","isPrimaryFirst","primary","pane1","pane2","findDOMNode","getBoundingClientRect","newPosition","splPane","splitPane","newSize","draggedSize","onDragFinished","_this2","disabledClass","flex","outline","MozUserSelect","WebkitUserSelect","msUserSelect","userSelect","flexDirection","minHeight","classes","pane1Style","prefixer","paneStyle","pane2Style","resizer","resizerClassName","onTouchEnd","resizerStyle","userAgent","_createPrefixer2","_cursor2","_crossFade2","_filter2","_flex2","_flexboxOld2","_gradient2","_imageSet2","_position2","_sizing2","_transition2","_static2","_dynamicData2","plugins","Prefixer","prefixMap","fallback","defaultUserAgent","navigator","_userAgent","_keepUnprefixed","keepUnprefixed","_browserInfo","_getBrowserInformation2","cssPrefix","_useFallback","prefixedKeyframes","_getPrefixedKeyframes2","browserName","browserVersion","prefixData","_requiresPrefix","_hasPropsRequiringPrefix","_metaData","jsPrefix","requiresPrefix","_prefixStyle","_isObject2","combinedValue","processedValue","_prefixValue2","_addNewValuesOnly2","_processedValue","_capitalizeString2","browserInfo","_bowser2","_detect","browser","prefixByBrowser","firefox","mobile","tablet","ios","android","opera","browserByCanIuseAlias","getBrowserName","osversion","osVersion","chrome","samsungBrowser","_bowser","safari","phantom","webos","blackberry","bada","tizen","chromium","vivaldi","seamoney","sailfish","msie","msedge","firfox","detect","ua","getFirstMatch","iosdevice","nexusMobile","nexusTablet","chromeos","silk","windowsphone","windows","mac","linux","edgeVersion","versionIdentifier","xbox","coast","yandexbrowser","ucbrowser","maxthon","epiphany","puffin","sleipnir","kMeleon","chromeBook","seamonkey","firefoxos","slimer","touchpad","qupzilla","googlebot","blink","webkit","gecko","osMajorVersion","bowser","getVersionPrecision","compareVersions","versions","chunks","chunk","isUnsupportedBrowser","minVersions","strictMode","browserList","browserItem","check","addIfNew","metaData","grabValues","_getPrefixedValue2","zoomValues","_getPrefixedValue","grab","grabbing","prefixedValue","WebkitBoxOrient","WebkitBoxDirection","alternativeValues","alternativeProps","alignItems","justifyContent","flexWrap","maxHeight","maxWidth","columnWidth","minWidth","_typeof","_ret","requiresPrefixDashCased","_hyphenateProperty2","multipleValues","_hyphenateProperty","transitionProperty","WebkitTransition","WebkitTransitionProperty","MozTransition","MozTransitionProperty","_hyphenateStyleName2","_hyphenateStyleName","uppercasePattern","msPattern","_staticData2","prefixAll","_prefixProperty2","prefixProperties","requiredPrefixes","_capitalizeString","_isPrefixedValue2","_isPrefixedValue","propertyPrefixMap","outputValue","singleValue","dashCaseProperty","pLen","prefixMapping","prefixValue","webkitOutput","mozOutput","Webkit","Moz","ms","failures","styleKey","supportingArrays","Pane","Resizer","preventDefault","HISTORY_LIMIT","PLOT_HOVER_MIN_DURATION","DraggableType","FieldParentType","DEFAULT_DATASETS","VOYAGER_CONFIG","showDataSourceSelector","fieldCount","wildcards","styleName","FieldList","wildcardFields","PresetWildcardFieldList","DataPaneBase","CSSModules","FieldListRenderer","onAdd","onFilterToggle","fieldItems","hideTypeChanger","getValidTypes","renderComponent","getFilter","createDefaultFilter","renderField","popupComponent","renderTypeChanger","TypeChanger","validTypes","filterHasField","onToggle","Field","isPill","draggable","parentId","FIELD_LIST","caretShow","onDoubleClick","createDispatchHandler","fieldRefHandler","popupRefHandler","popup","popupIsOpened","togglePopup","handleClickOutside","fnName","connectDragSource","isWildcardField","isFieldFn","renderCaretTypeSpan","renderFuncSpan","renderAddFilterSpan","renderAddSpan","renderRemoveSpan","TetherComponent","attachment","targetAttachment","icon","TYPE_ICONS","TYPE_NAMES","onClick","onRemove","closePopup","geographic","fieldSource","beginDrag","canDrag","monitor","DragSource","dragSource","isDragging","FieldBase","validType","onTypeChange","TypeChangerBase","onClear","specPreview","positionShelves","encodingShelf","facetShelves","nonPositionShelves","wildcardShelvesGroup","wildcardShelf","markPicker","filterPane","EncodingShelf","MarkPicker","FilterPane","EncodingPanelBase","filterModifyTimeUnit","connectDropTarget","filterShelves","renderFilterShelf","renderFieldPlaceholder","filterRemove","filterComponent","FunctionPicker","fieldDefParts","onFunctionChange","RangeFilterShelf","renderDateTimePicker","getDefaultList","OneOfFilterShelf","isOver","canDrop","filterShelfTarget","drop","didDrop","DropTarget","dropTarget","getItem","FilterPaneBase","onCheck","onFunctionCheck","wildcardHandler","supportedFns","getSupportedFunction","fnIsWildcard","checkboxradios","shelfFunction","onWildcardAdd","onWildcardRemove","onWildcardEnable","onWildcardDisable","FunctionPickerBase","hideSearchBar","oneOfFilter","option","toggleCheckbox","onSelectOne","onSelectAll","onClearAll","onSearch","autoFocus","onClickSearch","filterModifyOneOf","changedSelectedValues","valueIndex","insertItemToArray","removeItemFromArray","divs","getDivs","searchedDivs","searchedDiv","childNodes","getElementById","getElementsByClassName","OneOfFilterShelfBase","modifier","minDateTimePickerOpen","maxDateTimePickerOpen","filterModifyExtent","filterModifyMaxBound","filterModifyMinBound","toggleMinDateTimePicker","toggleMaxDateTimePicker","minInput","maxInput","currMin","currMax","lowerBound","upperBound","Range","createSliderWithTooltip","Slider","convertToTimestamp","renderNumberInput","allowCross","onAfterChange","tipFormatter","getFormat","getStep","maxBound","minBound","onChangeAction","focusInput","dateTimePickerOpen","dataTimePickerOpenAction","DateTimePicker","showTime","disableOnClickOutside","focus","renderDateTime","RangeFilterShelfBase","Handle","onEnd","dragging","removeDocumentEvents","getValue","trimAlignValue","prevValue","nextValue","changedValue","onBeforeChange","calcValueByPos","startValue","startPosition","valueMutator","mutatedValue","mergedProps","prefixCls","vertical","included","disabled","minimumTrackStyle","trackStyle","handleStyle","handleGenerator","handle","_state","calcOffset","saveHandle","_trackStyle","tracks","handles","_assign","_assign2","$export","S","F","core","hide","own","IS_FORCED","IS_GLOBAL","G","IS_STATIC","IS_PROTO","IS_BIND","IS_WRAP","W","expProto","C","virtual","U","__g","__e","aFunction","dP","createDesc","anObject","IE8_DOM_DEFINE","toPrimitive","Attributes","valueOf","bitmap","getKeys","gOPS","pIE","toObject","IObject","$assign","aLen","getSymbols","isEnum","$keys","enumBugKeys","toIObject","IE_PROTO","names","cof","propertyIsEnumerable","toLength","toIndex","IS_INCLUDES","$this","el","fromIndex","toInteger","shared","uid","_defineProperty","_defineProperty2","$Object","_typeof2","_typeof3","_iterator2","_symbol2","$at","iterated","_t","_i","TO_STRING","LIBRARY","redefine","Iterators","$iterCreate","setToStringTag","ITERATOR","BUGGY","returnThis","Base","NAME","DEFAULT","IS_SET","FORCED","IteratorPrototype","getMethod","TAG","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","dPs","Empty","createDict","iframeDocument","iframe","contentWindow","close","Properties","tag","stat","USE_SYMBOL","ObjectProto","TO_STRING_TAG","collections","Collection","addToUnscopables","_k","Arguments","DESCRIPTORS","META","$fails","wks","wksExt","wksDefine","keyOf","enumKeys","_create","gOPNExt","$GOPD","$DP","gOPD","gOPN","$Symbol","$JSON","_stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","D","protoDesc","sym","$defineProperty","$defineProperties","$propertyIsEnumerable","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","symbols","keyFor","useSetter","useSimple","$replacer","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","NEED","fastKey","getWeak","onFreeze","windowNames","getWindowNames","hiddenKeys","_setPrototypeOf2","_create2","buggy","positonStyle","elStyle","visibility","noop","createSlider","_class","_temp","ComponentEnhancer","button","isVertical","handlesRefs","handlePosition","dragOffset","onStart","addDocumentMouseEvents","addDocumentTouchEvents","onFocus","onBlur","sliderRef","onMove","onKeyDown","onKeyboard","saveSlider","slider","onTouchMoveListener","onTouchUpListener","onMouseMoveListener","onMouseUpListener","coords","ratio","getSliderLength","pixelOffset","getSliderStart","calcValue","_props2","_classNames","_props3","dots","maximumTrackStyle","railStyle","dotStyle","activeDotStyle","_get$call","sliderClassName","getLowerBound","getUpperBound","restProps","_getPrototypeOf2","_getOwnPropertyDescriptor2","receiver","$getPrototypeOf","fails","addEventListenerWrap","eventType","unstable_batchedUpdates","wrapCallback","ne","_EventObject2","attachEvent","detachEvent","_EventObject","_EventBaseObject2","_objectAssign2","commonProps","eventNormalizers","reg","fix","nativeEvent","which","charCode","keyCode","metaKey","ctrlKey","deltaX","deltaY","wheelDelta","wheelDeltaY","wheelDeltaX","HORIZONTAL_AXIS","VERTICAL_AXIS","eventDoc","doc","pageX","ownerDocument","scrollLeft","clientLeft","pageY","scrollTop","clientTop","relatedTarget","fromElement","toElement","retTrue","retFalse","DomEventObject","isNative","stopPropagation","cancelBubble","isDefaultPrevented","defaultPrevented","getPreventDefault","returnValue","fixFns","srcElement","parentNode","fixFn","EventBaseObjectProto","returnFalse","returnTrue","EventBaseObject","currentTarget","isEventObject","isPropagationStopped","isImmediatePropagationStopped","stopImmediatePropagation","halt","immediate","propIsEnumerable","test1","test2","test3","letter","shouldUseNative","hasOwn","classNames","argType","points","calcPoints","isActived","pointClassName","marksKeys","marksCount","markWidth","isActive","markClassName","marginBottom","markPoint","markPointIsObject","markLabel","markStyle","postionStyle","ariaProps","tabIndex","isEventFromHandle","isValueOutOfRange","isNotTouchEvent","getClosestPoint","_ref2","closestStep","getPrecision","stepString","getMousePosition","getTouchPosition","getHandleCenterPosition","ensureValueInRange","_ref3","ensureValuePrecision","closestPoint","toFixed","pauseEvent","getKeyboardValueMutator","UP","RIGHT","DOWN","LEFT","END","HOME","PAGE_UP","PAGE_DOWN","_from","_from2","isArrayIter","createProperty","getIterFn","iter","arrayLike","mapfn","iterFn","ArrayProto","classof","getIteratorMethod","ARG","tryGet","SAFE_CLOSING","riter","skipClosing","safe","KeyCode","MAC_ENTER","BACKSPACE","TAB","NUM_CENTER","ENTER","SHIFT","CTRL","ALT","PAUSE","CAPS_LOCK","ESC","SPACE","PRINT_SCREEN","INSERT","DELETE","ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","QUESTION_MARK","J","V","WIN_KEY_RIGHT","CONTEXT_MENU","NUM_ZERO","NUM_ONE","NUM_TWO","NUM_THREE","NUM_FOUR","NUM_FIVE","NUM_SIX","NUM_SEVEN","NUM_EIGHT","NUM_NINE","NUM_MULTIPLY","NUM_PLUS","NUM_MINUS","NUM_PERIOD","NUM_DIVISION","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NUMLOCK","SEMICOLON","DASH","EQUALS","COMMA","PERIOD","SLASH","APOSTROPHE","OPEN_SQUARE_BRACKET","BACKSLASH","CLOSE_SQUARE_BRACKET","WIN_KEY","MAC_FF_META","WIN_IME","altKey","navigation","initialValue","bounds","recent","nextBounds","closestBound","getClosestBound","boundNeedMoving","getBoundNeedMoving","nextHandle","pushable","originalValue","pushSurroundingHandles","isAtTheSamePoint","_getPointsCache","pointsObject","threshold","direction","diffToNext","pushHandle","amount","pushHandleOnePoint","getPoints","nextPointIndex","valInRange","valNotConflict","ensureValueNotConflict","_this3","_state2","offsets","handleClassName","_classNames2","trackClassName","objA","objB","compareContext","keysA","keysB","bHasOwnProperty","valueA","valueB","ComponentWrapper","handleTooltipVisibleChange","visible","prevState","visibles","handleWithTooltip","_this$props","tipProps","_tipProps$prefixCls","_tipProps$overlay","overlay","_tipProps$placement","placement","restTooltipProps","onMouseEnter","onMouseLeave","Tooltip","getPopupElement","arrowContent","trigger","getPopupDomNode","overlayClassName","mouseEnterDelay","mouseLeaveDelay","overlayStyle","onVisibleChange","afterVisibleChange","transitionName","destroyTooltipOnHide","defaultVisible","getTooltipContainer","extraProps","popupVisible","popupClassName","builtinPlacements","popupPlacement","popupAlign","getPopupContainer","onPopupVisibleChange","afterPopupVisibleChange","popupTransitionName","popupAnimation","defaultPopupVisible","destroyPopupOnHide","popupStyle","returnEmptyString","returnDocument","ALL_HANDLERS","Trigger","showAction","hideAction","getPopupClassNameFromAlign","zIndex","focusDelay","blurDelay","getDocument","mask","maskClosable","onPopupAlign","maskTransitionName","maskAnimation","autoMount","isVisible","getContainer","popupContainer","getDefaultProps","getInitialState","fireEvents","componentDidUpdate","componentWillReceiveProps","currentDocument","clickOutsideHandler","isClickToHide","onDocumentClick","touchOutsideHandler","clearOutsideHandler","componentWillUnmount","clearDelayTimer","delaySetPopupVisible","onPopupMouseEnter","onPopupMouseLeave","_component","isFocusToShow","focusTime","preClickTime","preTouchTime","isBlurToHide","preTime","nextVisible","isClickToShow","setPopupVisible","popupNode","getRootDomNode","getPopupAlign","getComponent","mouseProps","isMouseEnterToShow","isMouseLeaveToHide","onAlign","getClassNameFromAlign","delayS","delayTimer","createTwoChains","childPros","_props4","_props5","_props6","forcePopupAlign","alignInstance","forceAlign","childCallback","Children","only","newChildProps","cloneElement","ReactNoopUpdateQueue","updater","ReactPropTypeLocationNames","emptyObject","_invariant","context","childContext","ReactComponent","injectedMixins","ReactClassInterface","statics","contextTypes","childContextTypes","getChildContext","shouldComponentUpdate","updateComponent","RESERVED_SPEC_KEYS","mixSpecIntoComponent","validateTypeDef","createMergedResultFunction","mixStaticSpecIntoComponent","autobind","typeDef","validateMethodOverride","isAlreadyDefined","specPolicy","ReactClassMixin","autoBindPairs","__reactAutoBindPairs","isReactClassMethod","createChainedFunction","typeofSpec","mergeIntoWithNoDuplicateKeys","two","bindAutoBindMethod","boundMethod","__reactBoundContext","__reactBoundMethod","__reactBoundArguments","_bind","newThis","reboundMethod","IsMountedPreMixin","__isMounted","IsMountedPostMixin","replaceState","newState","enqueueReplaceState","isMounted","__didWarnIsMounted","ReactClassComponent","pairs","autoBindKey","bindAutoBindMethods","initialState","_isMockFunction","methodName","isReactClassApproved","componentShouldUpdate","componentWillRecieveProps","freeze","_addDomEventListener2","Popup","_initialiseProps","savePopupRef","saveAlignRef","rootNode","popupInstance","currentAlignClassName","hiddenClassName","newStyle","getZIndexStyle","popupInnerProps","exclusive","transitionAppear","getTransitionName","getTarget","monitorWindowResize","showProp","xVisible","childrenProps","maskElement","maskTransition","getMaskTransitionName","getMaskElement","popupDomNode","_Align","_Align2","_domAlign2","_addEventListener2","_isWindow2","_defaults","Align","startMonitorWindowResize","prevProps","reAlign","lastTarget","stopMonitorWindowResize","resizeHandler","bufferMonitor","timer","bufferFn","monitorBufferTime","newProps","isFailX","elFuturePos","elRegion","visibleRect","isFailY","flip","each","flipOffset","convertOffset","offsetLen","ySize","region","xSize","normalizeOffset","domAlign","refNode","targetOffset","newOverflowCfg","fail","refNodeRegion","newElRegion","isTargetNotOutOfVisible","targetRegion","isOutOfVisibleRect","refNodeOffset","Xregion","YRegion","xRefPoint","yRefPoint","realXRegion","realYRegion","adjustX","adjustY","newPoints","newOffset","newTargetOffset","newElFuturePos","XregionReversal","isCompleteFailX","_newPoints","_newOffset","_newTargetOffset","_newElFuturePos","YRegionReversal","isCompleteFailY","mix","resizeHeight","resizeWidth","useCssRight","useCssBottom","useCssTransform","__getOffsetParent","__getVisibleRectForElement","getComputedStyleX","getScroll","getScrollLeft","getScrollTop","getOffset","elem","docElem","getClientPosition","defaultView","parentWindow","isWindow","_RE_NUM_NO_PX","RE_POS","getOffsetDirection","oppositeOffsetDirection","setLeftTop","presetH","presetV","horizontalProperty","verticalProperty","oppositeHorizontalProperty","oppositeVerticalProperty","originalTransition","originalOffset","old","originalStyle","preset","off","offsetTop","offsetLeft","_dir","_off","setOffset","originalXY","resultXY","setTransform","isBorderBoxFn","computedStyle","getPropertyValue","rsLeft","pixelLeft","BOX_MODELS","getPBMWidth","cssProp","domUtils","getWH","viewportWidth","viewportHeight","docWidth","docHeight","borderBoxValue","offsetWidth","offsetHeight","isBorderBox","cssBoxValue","borderBoxValueOrIsBorderBox","refWin","win","documentElementProp","compatMode","cssShow","getWHIgnoreDisplay","includeMargin","utils","getWindow","getWindowScrollLeft","getWindowScrollTop","jsCssMap","getVendorPrefix","getTransformName","setTransitionProperty","getTransitionProperty","getTransformXY","matrix","matrix2d","matrix3d","setTransformXY","match2d","positionStyle","nodeName","scrollX","scrollY","winSize","clientWidth","clientHeight","xRect","yRect","outerWidth","outerHeight","p1","p2","defaultKey","getChildrenFromProps","Animate","currentlyAnimatingKeys","keysToEnter","keysToLeave","childrenRefs","performAppear","nextChildren","currentChildren","newChildren","currentChild","nextChild","newChild","hasPrev","showInNext","hasNext","showInNow","performEnter","performLeave","_this4","stateChildren","transitionEnter","transitionLeave","passedProps","componentProps","onEnter","onLeave","onAppear","_this5","componentWillEnter","handleDoneAdding","componentWillAppear","isValidChildByKey","allowAppearCallback","allowEnterCallback","componentWillLeave","handleDoneLeaving","allowLeaveCallback","toArrayChildren","findChildInChildrenByKey","findShownChildInChildrenByKey","findHiddenChildInChildrenByKey","isSameChildren","c1","c2","same","child2","mergeChildren","nextChildrenPending","pendingChildren","transitionMap","appear","leave","AnimateChild","isEnterSupported","isAppearSupported","isLeaveSupported","animationType","finishCallback","nameIsObj","stopper","activeName","_Event2","_componentClasses2","isCssAnimationSupported","endEvents","capitalPrefixes","getStyleProperty","fixBrowserByTimeout","transitionDelay","transitionDuration","rcEndAnimTimeout","rcEndListener","clearBrowserBugTimeout","cssAnimation","endCallback","activeClassName","nodeClasses","rcAnimTimeout","removeEndEventListener","addEndEventListener","setTransition","EVENT_NAME_MAP","transitionend","OTransition","msTransition","animationend","WebkitAnimation","MozAnimation","OAnimation","msAnimation","baseEventName","baseEvents","detectEvents","TransitionEvents","eventListener","endEvent","eventName","re","ClassList","classList","removeMatching","getAttribute","PopupInner","LazyRenderBox","getAlignFromPlacement","placementStr","baseAlign","a1","a2","saveRef","_extends3","_config$autoMount","_config$autoDestroy","autoDestroy","_config$getContainer","defaultGetContainer","mixin","_renderComponent","componentArg","ready","_container","unstable_renderSubtreeIntoContainer","_removeContainer","unmountComponentAtNode","removeContainer","autoAdjustOverflow","placements","topLeft","leftTop","topRight","rightTop","bottomRight","rightBottom","bottomLeft","leftBottom","createClass","moment","CalendarContainer","Datetime","onViewModeChange","inputProps","timeConstraints","viewMode","isValidDate","strictParsing","closeOnSelect","closeOnTab","nof","dateFormat","getStateFromProps","currentView","updateOn","selectedDate","viewDate","inputValue","getFormats","localMoment","startOf","getUpdateOn","inputFormat","localeData","longDateFormat","updatedState","updatedViewDate","updatedSelectedDate","onInputChange","onInputKey","closeCalendar","showView","me","nextViews","addTime","toSelected","updateTime","subtractTime","allowedSetTime","nextType","updateSelectedDate","currentDate","openCalendar","fromProps","fromState","fromThis","getComponentProps","viewProps","onClickOutside","ToObject","ownEnumerableKeys","viewComponents","DateTimePickerDays","tableChildren","renderFooter","colSpan","getDaysOfWeek","renderDays","_weekdaysMin","firstDayOfWeek","dow","isDisabled","dayProps","selected","prevMonth","subtract","currentYear","currentMonth","renderer","renderDay","alwaysValidDate","daysInMonth","lastDay","isBefore","isSame","registeredComponents","handlers","DEFAULT_EVENTS","isNodeFound","generateOutsideCheck","componentNode","ignoreClass","correspondingElement","componentInstance","eventHandler","excludeScrollbar","clickedScrollbar","findHighest","ReactDom","createReactClass","setupBinding","wrapper","wrapComponentWithOnClickOutsideHandling","getClass","getInstance","isReactComponent","__outsideClickHandler","outsideClickIgnoreClass","enableOnClickOutside","eventTypes","DateTimePickerMonths","renderMonths","noOfDaysInMonth","rows","renderMonth","endOf","updateSelectedMonth","monthStrFixedLength","monthsShort","DateTimePickerYears","renderYears","noOfDaysInYear","renderYear","dayOfYear","updateSelectedYear","DateTimePickerTime","calculateState","counters","daypart","renderCounter","onStartClicking","renderDayPart","updateMilli","renderHeader","milli","increaseTimer","setInterval","mouseUpListener","clearInterval","padValues","toggleDayPart","increase","decrease","fieldCustomizer","fieldHandler","customizerIsOpened","toggleCustomizer","isWildcardShelf","channelName","isWildcardChannelId","CUSTOMIZABLE_ENCODING_CHANNELS","FieldCustomizer","functionPicker","ENCODING_SHELF","encodingShelfTarget","EncodingShelfBase","propertyGroupIndex","getFieldPropertyGroupIndex","Tabs","TabList","encodingType","Tab","customProps","TabPanel","customizableProp","PropertyEditor","propTab","FieldCustomizerBase","_setPrototypeOf","handleSelected","onSelect","selectedIndex","copyPropsToState","defaultFocus","getDerivedStateFromProps","getModeFromProps","maxTabIndex","defaultIndex","excluded","sourceKeys","_objectWithoutPropertiesLoose","_this$state","forceRenderTabPanel","environment","disableUpDownKeys","disabledTabClassName","domRef","selectedTabClassName","selectedTabPanelClassName","tabsRole","childrenPropType","tabsCount","panelsCount","tabListFound","listTabs","listChild","onSelectPropType","selectedIndexPropType","deepMap","isTabChild","deepForEach","makeTypeChecker","isTab","isTabList","isTabPanel","canUseActiveElement","isTabNode","isTabDisabled","UncontrolledTabs","tabNodes","handleKeyDown","isTabFromContainer","useSelectedIndex","handleClick","getNextTab","getPrevTab","getLastTab","getFirstTab","setSelected","_proto","getTabsCount","_this$props2","getTab","getPanelsCount","getChildren","_this$props3","tabIds","panelIds","listIndex","wasTabFocused","env","activeElement","determineCanUseActiveElement","toArray","tabRef","panelId","selectedClassName","disabledClassName","tabId","forceRender","nodeAncestor","parentElement","_this$props4","attributes","toVal","tabCount","panelCount","checkFocus","_cx","DEFAULT_CLASS","changeFieldProperty","uiSchema","generateFormData","parseFormDataResult","PropertyEditorBase","_Form","_Form2","_ErrorList2","_utils","_validate2","Form","mustValidate","noValidate","liveValidate","_this$validate","errorSchema","onSubmit","_this$validate2","onError","edit","getDefaultFormState","idSchema","toIdSchema","shouldRender","transformErrors","ErrorList","showErrorList","_getDefaultRegistry","getDefaultRegistry","widgets","ArrayFieldTemplate","FieldTemplate","formContext","safeRenderCompletion","autocomplete","enctype","acceptcharset","noHtml5Validate","registry","getRegistry","_SchemaField","SchemaField","autoComplete","encType","acceptCharset","renderErrors","getWidget","widget","registeredWidgets","mergeOptions","Widget","MergedWidget","defaultOptions","_ref$options","_objectWithoutProperties","registeredWidget","widgetMap","_registeredWidget","retrieveSchema","computeDefaults","mergeObjects","getUiOptions","asNumber","orderProperties","arrayToHash","curr","errorPropList","propertyHash","orderHash","extraneous","restIndex","complete","isMultiSelect","isFilesArray","isFixedItems","allowAdditionalItems","optionsList","enumNames","deepEquals","comp","fieldId","parseDateString","includeTime","toDateString","_ref2$hour","_ref2$minute","_ref2$second","utcTime","setImmediate","dataURItoBlob","dataURI","splitted","param","binary","atob","rangeSpec","checkbox","radio","select","hidden","password","textarea","file","updown","checkboxes","files","parentDefaults","refSchema","findSchemaDefinition","itemSchema","thing","obj1","obj2","concatArrays","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","return","$refSchema","isArguments","ca","multiline","ignoreCase","ka","kb","cal","Timeout","clearFn","_id","_clearFn","scope","timeout","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","clearImmediate","registerImmediate","html","messagePrefix","onGlobalMessage","tasksByHandle","currentlyRunningATask","attachTo","process","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","script","task","run","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","runClearTimeout","Item","argv","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","_ArrayField2","_BooleanField2","_DescriptionField2","_NumberField2","_ObjectField2","_SchemaField2","_StringField2","_TitleField2","_UnsupportedField2","ArrayField","BooleanField","DescriptionField","NumberField","ObjectField","StringField","TitleField","UnsupportedField","ArrayFieldTitle","ArrayFieldDescription","IconBtn","_props$type","otherProps","DefaultArrayItem","btnStyle","paddingLeft","paddingRight","hasToolbar","hasMoveUp","hasMoveDown","readonly","onReorderClick","hasRemove","onDropIndexClick","DefaultFixedArrayFieldTemplate","canAdd","AddButton","onAddClick","DefaultNormalArrayFieldTemplate","_this$props$registry","newIndex","blur","onChangeForIndex","onSelectChange","renderFiles","renderFixedArray","renderMultiSelect","renderNormalArray","autofocus","_props2$registry","itemsSchema","_getUiOptions$addable","addable","arrayProps","itemErrorSchema","itemIdPrefix","itemIdSchema","renderArrayFieldItem","canMoveUp","canMoveDown","itemData","itemUiSchema","_props3$registry","enumOptions","_getUiOptions$enumOpt","_getUiOptions$enumOpt2","multiple","_props4$registry","_getUiOptions2","_getUiOptions2$widget","_props5$registry","itemSchemas","additionalSchema","_getUiOptions3$addabl","additional","canRemove","Template","_props$canRemove","_props$canMoveUp","_props$canMoveDown","_props6$registry","_orderable$removable$","orderable","removable","moveUp","moveDown","toolbar","isItemRequired","_ref4","_props$registry","_getUiOptions","_getUiOptions$widget","onPropertyChange","newFormData","orderedProperties","COMPONENT_TYPES","Label","htmlFor","Help","help","_props$errors","DefaultTemplate","displayLabel","SchemaFieldRender","_registry$FieldTempla","FieldComponent","getFieldComponent","Boolean","_uiOptions$label","__errors","fieldErrorSchema","fieldProps","rawDescription","rawHelp","rawErrors","defaultWidget","_getUiOptions$placeho","placeholder","_AltDateWidget2","_AltDateTimeWidget2","_CheckboxWidget2","_CheckboxesWidget2","_ColorWidget2","_DateWidget2","_DateTimeWidget2","_EmailWidget2","_FileWidget2","_HiddenWidget2","_PasswordWidget2","_RadioWidget2","_RangeWidget2","_SelectWidget2","_TextareaWidget2","_TextWidget2","_URLWidget2","_UpDownWidget2","PasswordWidget","RadioWidget","UpDownWidget","RangeWidget","SelectWidget","TextWidget","DateWidget","DateTimeWidget","AltDateWidget","AltDateTimeWidget","EmailWidget","URLWidget","TextareaWidget","HiddenWidget","ColorWidget","FileWidget","CheckboxWidget","CheckboxesWidget","rangeOptions","DateElement","setNow","nowDateObj","dateElementProps","elemProps","_onChange","disabledCls","selectValue","deselectValue","_BaseInput2","BaseInput","inputType","readOnly","emptyValue","jsonDate","toJSONDate","addNameToDataURL","dataURL","processFile","readAsDataURL","FilesInfo","filesInfo","fileInfo","dataURLs","_dataURItoBlob","inputRef","processValue","newValue","toErrorList","customValidate","_jsonschema","_lodash2","toErrorSchema","userErrorSchema","unwrapErrorHandler","errorHandler","createErrorHandler","addError","newErrorSchema","_lodash","errorList","reLeadingDot","rePropName","reEscapeChar","reIsHostCtor","freeSelf","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","funcToString","objectToString","reIsNative","Map","getNative","nativeCreate","symbolProto","symbolToString","Hash","ListCache","MapCache","assocIndexOf","baseIsNative","isHostObject","toSource","getMapData","__data__","isKeyable","stringToPath","baseToString","resolver","memoized","isObjectLike","iteratee","arrayMap","copyArray","Validator","ValidatorResult","SchemaError","urilib","attribute","helpers","SchemaContext","customFormats","unresolvedRefs","validators","shouldResolve","ourUri","addSubSchema","baseuri","ourBase","deepCompareStrict","documentUri","addSubSchemaArray","extends","addSubSchemaObject","disallow","resolvedUri","setSchemas","urn","propertyName","switchSchema","schemaobj","schemaTraverser","deepMerge","superResolve","resolved","subctx","subschema","propertyPath","skipAttributes","ignoreProperties","validatorErr","validator","allowUnknownAttributes","importErrors","rewrite","objectGetPath","testType","testSchema","testAdditionalProperty","makeChild","inner","nestedErrors","validateMultipleOfOrDivisbleBy","validationType","errorMessage","validationArgument","instanceDecimals","getDecimalPlaces","divisorDecimals","maxDecimals","multiplier","testArrays","divisibleBy","disableFormat","isFormat","notTypes","stringizer","validatorType","captureStackTrace","makeSuffix","FORMAT_REGEXPS","deepMerger","copyist","copyistWithDeepMerge","pathEncoder","aKeys","bKeys","encodePath","decimalPlaces","decimalParts","noTrailing","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","arguments_","elapsed","cancel","atBegin","AXIS_ORIENT_TITLE","LEGEND_ORIENT_TITLE","POSITION_FIELD_NOMINAL_INDEX","POSITION_FIELD_TEMPORAL_INDEX","POSITION_FIELD_QUANTITATIVE_INDEX","Common","COLOR_CHANNEL_FIELD_INDEX","SIZE_CHANNEL_FIELD_INDEX","SHAPE_CHANNEL_FIELD_INDEX","generateSelectSchema","propertyKey","enumVals","generateTextBoxSchema","placeHolderText","CATEGORICAL_COLOR_SCHEMES","SEQUENTIAL_COLOR_SCHEMES","txt","generateTitle","scaleTypes","generateScaleEditorSchema","getSupportedScaleTypes","axisProp","generateAxisEditorSchema","StackOffset","legendProp","LegendOrient","Legend","generateLegendEditorSchema","formDataIndex","customProp","onMarkChange","MarkPickerBase","exportLogs","logs","constructLogString","actionLogs","getLog","actions","csv","Papa","unparse","fileName","fileDownload","FooterBase","dynamicTyping","dynamicTypingFunction","worker","WORKERS_SUPPORTED","webkitURL","BLOB_URL","createObjectURL","Worker","userStep","userChunk","userComplete","userError","workerId","NODE_STREAM_INPUT","download","readable","File","delimiter","BAD_DELIMITERS","quotes","skipEmptyLines","newline","quoteChar","columns","escapeChar","escapeFormulae","RECORD_SEP","UNIT_SEP","BYTE_ORDER_MARK","LocalChunkSize","RemoteChunkSize","DefaultDelimiter","Parser","ParserHandle","NetworkStreamer","FileStreamer","StringStreamer","ReadableStreamStreamer","jQuery","attr","inputElem","instanceConfig","before","_handle","_finished","_completed","_halted","_input","_baseIndex","_partialLine","_rowCount","_start","_nextChunk","isFirstChunk","_completeResults","chunkSize","streamer","_config","parseChunk","beforeFirstChunk","paused","preview","WORKER_ID","finished","_sendError","_readChunk","_chunkLoaded","_chunkError","downloadRequestBody","downloadRequestHeaders","getResponseHeader","webkitSlice","mozSlice","FileReaderSync","pause","_streamData","_streamEnd","_streamError","_checkIsFinished","_streamCleanUp","transformHeader","comments","successful","bestDelimiter","delimitersToGuess","getCharIndex","fastMode","linebreak","truncated","terminate","mime","msSaveBlob","blobURL","tempLink","setAttribute","click","revokeObjectURL","inputLogs","outputLogs","inputLog","timestamp","ISOString","toISOString","loggerMiddleware","createLogger","collapsed","composeEnhancers","compose","middleware","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","DEFAULT_STATE","createActionLog","createStore","rootReducer","applyMiddleware","enhancer","createQueryListener","snapshotInterval","skipped","countActionsInChunks","cull","extraActionsCount","firstNecessaryChunk","lastChunk","actionEntry","setLimit","super_","prefilter","lhs","rhs","groupCollapsed","groupEnd","actionTransformer","duration","colors","started","startedTime","took","stateTransformer","errorTransformer","logErrors","diffPredicate","performance","DeepDiff","observableDiff","applyDiff","applyChange","revertChange","isConflict","noConflict","transformer","DEFAULT_UNDOABLE_STATE_BASE","DEFAULT_CUSTOM_WILDCARD_FIELDS","DEFAULT_DATASET","DEFAULT_TAB","DEFAULT_UNDOABLE_STATE","past","future","_latestUnfiltered","DEFAULT_PERSISTENT_STATE","DEFAULT_BOOKMARK","DEFAULT_LOG","DEFAULT_RELATED_VIEWS","DEFAULT_SHELF_PREVIEW","undoableStateBaseWithoutDataset","datasetWithoutSchema","tableschema","serializable","undoableBase","FieldSchema","warnings","isCollapsed","DEFAULT_TAB_TITLE","DEFAULT_PLOT_TAB_STATE","DEFAULT_ACTIVE_TAB_ID","persistentReducer","makeResetReducer","combineReducers","bookmarkReducer","configReducer","relatedViewsReducer","logReducer","shelfPreviewReducer","ACTIONS_EXCLUDED_FROM_HISTORY","USER_ACTIONS","USER_ACTION_INDEX","GROUPED_ACTIONS","_groupId","undoableStateToReset","combinedUndoableReducer","customWildcardFieldReducer","datasetReducer","tabReducer","undoableReducerBase","modifyItemInArray","shelfSpecFieldAutoAddReducer","undoableReducer","undoType","redoType","previousHistory","currentActionType","excludeAction","rootBase","stateReducer","specKey","note","modifyFieldsProperty","customWildcardField","originalFields","addedFields","updatedFields","originalField","changeFieldType","changeOrdinalDomain","updateSchema","changedFieldSchema","originalTableSchema","updatedTableSchemaFields","schemaReducer","isSpecAction","newUniqueErrors","preWarnings","newUniqueWarnings","logWarningsInLevel","relatedViewToggler","newIsCollapsed","resetIndex","fromSpecQuery","specWithoutTransform","addEncoding","modifyEncoding","removeEncoding","fieldDefWithoutProp","parentWithoutNestedProp","shelfSpec","autoAddFieldQuery","rec","topSpecQuery","addedShelf1","fieldDefFrom","fieldDefTo","modifyFieldProp","modifyNestedFieldProp","oldFn","shelfFunc","combinedPlotTabReducer","titleReducer","shelfReducer","resultIndexReducer","newActiveTabID","tabID","resultPlotSpecModifyFieldReducer","DEFAULT_LIMIT","isResultAction","increment","resultReducer","getOwnPropertyDescriptors","descriptors","formatRegExp","objects","noDeprecation","warned","throwDeprecation","traceDeprecation","trace","debugEnviron","stylizeNoColor","depth","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","recurseTimes","primitive","simple","formatPrimitive","visibleKeys","isError","formatError","isRegExp","braces","toUTCString","formatProperty","formatArray","numLinesEst","reduceToSingleString","debuglog","NODE_DEBUG","pid","isPrimitive","inherits","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","newReason","promisify","promiseResolve","promiseReject","callbackify","callbackified","maybeCb","rej","ctor","superCtor","TempCtor","shelfReducerBase","shelfSpecReducer","filterReducer","defaultGroupBy","isShelfGroupBy","newFilters","fromTransforms","getModifyTimeUnitFunction","previousQuery","previousData","previousRelatedViews","dispatchQueries","RELATED_VIEWS_INDEX","RELATED_VIEWS_PRIORITY","relatedViewResultRequest","queryCreator","mainQuery","mainQueryKey","createQuery","filterSpecifiedView","resultRequest","hasOpenPosition","hasStyleChannel","hasOpenFacet","isSpecAggregate","RELATED_VIEWS_TYPES","t2","makeRelatedViewQueries","makeWildcard","makeFieldSuggestionQueryCreator","additionalFieldQuery","logo","Controls","openLink","idlLogo","HeaderBase","BookmarkPane","UndoRedo","ControlsBase","modalIsOpen","openModal","closeModal","onExport","isOpen","onRequestClose","contentLabel","renderBookmarks","specs","bookmarkItem","exportWindow","bookmarkPlotListItems","Plot","isPlotListItem","showBookmarkButton","showSpecifyButton","BookmarkBase","BookmarkRenderer","_Modal","_Modal2","_exenv2","_elementClass2","_ModalPortal2","ariaAppHider","_interopRequireWildcard","refCount","newObj","EE","renderSubtreeIntoContainer","SafeHTMLElement","canUseDOM","HTMLElement","AppElement","getParentElement","parentSelector","Modal","removePortal","bodyOpenClassName","renderPortal","ariaHideApp","appElement","portal","defaultStyles","portalClassName","currentParent","show","closesAt","closeTimeoutMS","beforeClose","closeWithTimeout","setElement","onAfterOpen","shouldCloseOnOverlayClick","WebkitOverflowScrolling","ExecutionEnvironment","canUseWorkers","canUseEventListeners","canUseViewport","screen","ElementClass","focusManager","_scopeTab2","CLASS_NAMES","ModalPortal","setFocusAfterRender","focusAfterRender","setOverlayRef","setContentRef","afterClose","returnFocus","teardownScopedFocus","afterOpen","closeTimer","setupScopedFocus","markForFocusLater","closeWithoutTimeout","focusContent","contentHasFocus","requestClose","handleOverlayOnClick","shouldClose","ownerHandlesClose","handleContentOnClick","shouldBeClosed","buildClassName","contentStyles","overlayStyles","handleBlur","handleFocus","focusLaterElements","toFocus","modalElement","_tabbable","_tabbable2","needToFocus","querySelectorAll","tabbable","tabbableNode","focusable","isTabIndexNotNaN","isTabIndexNaN","shiftKey","useElement","globalElement","validateElement","shouldHide","resetForTesting","removeAttribute","modals","vegaLiteWrapperRefHandler","vegaLiteWrapper","hovered","copiedPopupIsOpened","handleTextChange","onPreviewMouseEnter","onPreviewMouseLeave","onSpecify","onSort","plotLogger","Logger","isVerticallyOverFlown","notesDiv","renderSortButton","renderBookmarkButton","renderSpecifyButton","renderCopySpecButton","renderFields","VegaLite","clearHoverTimeout","fieldInfo","hoverTimeoutId","clearPreviewTimeout","previewTimeoutId","specWithFilter","BookmarkButton","toTransforms","CopyToClipboard","onCopy","copied","scrollHeight","PlotBase","_copyToClipboard","ownKeys","enumerableOnly","sourceSymbolKeys","_defineProperties","_assertThisInitialized","_getPrototypeOf","_React$PureComponent","_objectSpread","deselectCurrent","reselectPrevious","success","createRange","textContent","whiteSpace","webkitUserSelect","selectNode","addRange","execCommand","clipboardData","copyKey","prompt","removeRange","rangeCount","ranges","getRangeAt","tagName","mountTimeout","updateSpec","runView","getChartSize","updateTimeout","chart","bindData","finalize","vlSpec","vl","runtime","vega","View","logLevel","initialize","hover","vegaTooltip","change","changeset","insert","viewRunAfter","runAfter","chartContainer","bookmarkHandler","bookmarkPopup","alertHandler","bookmarkDialog","openDialog","onBookmarkRemove","onBookmarkAdd","onBookmarkClick","onKeepBookmark","isBookmarked","BookmarkButtonBase","canUndo","canRedo","onUndo","onRedo","UndoRedoBase","warningPane","closeWarnings","returnLevelWarnings","errorPane","closeErrors","LogPaneBase","GROUP_BY_LABEL","onAutoAddCountChange","onGroupByChange","collapseRelatedViews","relatedViewsElement","RelatedViewsButton","RelatedViews","renderSpecifiedView","renderSpecifiedViews","PlotList","ViewPaneBase","onLoadMore","plotListItems","onPlotSort","PlotListBase","subpanes","relatedViewType","RelatedViewsBase","onHideClick","RelatedViewsButtonBase"],"mappings":"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AO4O,EAAU02E,GACzC,IAAIqE,EAAS3pF,EAAM4O,GACnB,GAAK+6E,EAAL,CAIA,IAAIiS,EAAW,GAMf,GALAhlI,OAAO0Y,KAAKq6G,GAAQ3jG,SAAQ,SAAS61G,IACG,IAAlClhH,EAAW1N,QAAQ4uH,IACrBD,EAAS/sH,KAAKgtH,MAGdD,EAASp+H,OACX,MAAM,IAAI5D,MAAM,QAAUg1C,EAAW,cAAgB02E,EAAgB,sBAAwBsW,EAASvuH,KAAK,SAI/G1Y,EAAOD,QAAQs3G,WAAa,SAAShsE,EAAO4O,EAAU02E,GACpD,IAAKtlF,EAAM4O,GACT,MAAM,IAAIh1C,MAAM,QAAUg1C,EAAW,cAAgB02E,EAAgB,gBAEvE,OAAO3wH,EAAOD,QAAQsrC,EAAO4O,EAAU02E,IAGzC3wH,EAAOD,QAAQonI,iBAAmBrf,EAAM2K,UAAUhB,UAAU,CAC1D3J,EAAM2K,UAAUhC,QAAQzwH,EAAOD,SAC/BC,EAAOD;;;;4CC7BTC,EAAOD,QAAU,CACf,eACA,kBACA,qBACA,iBACA,gBACA,aACA,gBACA,mBACA,eACA,cACA,YACA,eACA,kBACA,cACA,aACA,MACA,SACA,YACA,QACA,OACA,YACA,eACA,kBACA,cACA,aACA,iBACA,oBACA,uBACA,mBACA,kBACA,qBACA,wBACA,2BACA,uBACA,sBACA,oBACA,uBACA,0BACA,sBACA,qBACA,oBACA,uBACA,0BACA,sBACA,qBACA,0BACA,6BACA,gCACA,4BACA,2BACA,gBACA,mBACA,sBACA,kBACA,iBACA,qBACA,wBACA,2BACA,uBACA,sBACA,0BACA,6BACA,gCACA,4BACA,2BACA,qBACA,wBACA,2BACA,uBACA,sBACA,aACA,gBACA,mBACA,eACA,cACA,uBACA,0BACA,6BACA,yBACA,wBACA,sBACA,yBACA,4BACA,wBACA,uBACA,iBACA,oBACA,uBACA,mBACA,kBACA,kBACA,qBACA,wBACA,oBACA,mBACA,kBACA,qBACA,wBACA,oBACA,mBACA,mBACA,sBACA,yBACA,qBACA,oBACA,qBACA,wBACA,2BACA,uBACA,sBACA,mBACA,sBACA,yBACA,qBACA,oBACA,iBACA,oBACA,uBACA,mBACA,kBACA,YACA,eACA,kBACA,cACA,aACA,SACA,YACA,eACA,WACA,UACA,iBACA,oBACA,uBACA,mBACA,kBACA,sBACA,yBACA,4BACA,wBACA,uBACA,sBACA,yBACA,4BACA,wBACA,uBACA,sBACA,yBACA,4BACA,wBACA,uBACA,mBACA,sBACA,yBACA,qBACA,oBACA,wBACA,2BACA,8BACA,0BACA,yBACA,wBACA,2BACA,8BACA,0BACA,yBACA,wBACA,2BACA,8BACA,0BACA,yBACA,eACA,kBACA,qBACA,iBACA,gBACA,oBACA,uBACA,0BACA,sBACA,qBACA,yBACA,4BACA,+BACA,2BACA,0BACA,0BACA,6BACA,gCACA,4BACA,2BACA,oBACA,uBACA,0BACA,sBACA,qBACA,oBACA,uBACA,0BACA,sBACA,qBACA,iBACA,oBACA,uBACA,mBACA,kBACA,cACA,iBACA,oBACA,gBACA,eACA,cACA,iBACA,oBACA,gBACA,eACA,oBACA,uBACA,0BACA,sBACA,qBACA,oBACA,uBACA,0BACA,sBACA,qBACA,mBACA,sBACA,yBACA,qBACA,oBACA,oBACA,uBACA,0BACA,sBACA,qBACA,mBACA,sBACA,yBACA,qBACA,oBACA,kBACA,qBACA,wBACA,oBACA,mBACA,uBACA,0BACA,6BACA,yBACA,wBACA,uBACA,0BACA,6BACA,yBACA,wBACA,uBACA,0BACA,6BACA,yBACA,wBACA,oBACA,uBACA,0BACA,sBACA,qBACA,yBACA,4BACA,+BACA,2BACA,0BACA,yBACA,4BACA,+BACA,2BACA,0BACA,yBACA,4BACA,+BACA,2BACA,0BACA,aACA,gBACA,mBACA,eACA,cACA,kBACA,qBACA,wBACA,oBACA,mBACA,kBACA,qBACA,wBACA,oBACA,mBACA,kBACA,qBACA,wBACA,oBACA,mBACA,eACA,kBACA,qBACA,iBACA,gBACA,cACA,iBACA,oBACA,gBACA,eACA,mBACA,sBACA,yBACA,qBACA,oBACA,mBACA,sBACA,yBACA,qBACA,oBACA,mBACA,sBACA,yBACA,qBACA,oBACA,gBACA,mBACA,sBACA,kBACA,iBACA,cACA,iBACA,oBACA,gBACA,eACA,YACA,eACA,kBACA,cACA,aACA,iBACA,oBACA,uBACA,mBACA,kBACA,sBACA,yBACA,4BACA,wBACA,uBACA,uBACA,0BACA,6BACA,yBACA,wBACA,iBACA,oBACA,uBACA,mBACA,kBACA,iBACA,oBACA,uBACA,mBACA,kBACA,cACA,iBACA,oBACA,gBACA,eACA,SACA,YACA,eACA,WACA,UACA,qBACA,wBACA,2BACA,uBACA,sBACA,YACA,eACA,kBACA,cACA,aACA,YACA,eACA,kBACA,cACA,aACA,aACA,gBACA,mBACA,eACA,cACA,cACA,iBACA,oBACA,gBACA,eACA,cACA,iBACA,oBACA,gBACA,eACA,cACA,iBACA,oBACA,gBACA,eACA,aACA,gBACA,mBACA,eACA,cACA,KACA,QACA,WACA,OACA,MACA,QACA,WACA,cACA,UACA,SACA,OACA,UACA,aACA,SACA,QACA,WACA,cACA,iBACA,aACA,YACA,KACA,QACA,WACA,OACA,MACA,QACA,WACA,cACA,UACA,SACA,cACA,iBACA,oBACA,gBACA,eACA,aACA,gBACA,mBACA,eACA,cACA,YACA,eACA,kBACA,cACA,aACA,aACA,gBACA,mBACA,eACA,cACA,kBACA,qBACA,wBACA,oBACA,mBACA,kBACA,qBACA,wBACA,oBACA,mBACA,kBACA,qBACA,wBACA,oBACA,mBACA,aACA,gBACA,mBACA,eACA,cACA,cACA,iBACA,oBACA,gBACA,eACA,UACA,aACA,gBACA,YACA,WACA,UACA,aACA,gBACA,YACA,WACA,mBACA,sBACA,yBACA,qBACA,oBACA,eACA,kBACA,qBACA,iBACA,gBACA,SACA,YACA,eACA,WACA,UACA,MACA,SACA,YACA,QACA,OACA,YACA,eACA,kBACA,cACA,aACA,UACA,aACA,gBACA,YACA,WACA,OACA,UACA,aACA,SACA,QACA,MACA,SACA,YACA,QACA,OACA,OACA,UACA,aACA,SACA,QACA,KACA,QACA,WACA,OACA,MACA,aACA,gBACA,mBACA,eACA,cACA,KACA,QACA,WACA,OACA,MACA,SACA,YACA,eACA,WACA,UACA,YACA,eACA,kBACA,cACA,aACA,gBACA,mBACA,sBACA,kBACA,iBACA,WACA,cACA,iBACA,aACA,YACA,WACA,cACA,iBACA,aACA,YACA,aACA,gBACA,mBACA,eACA,cACA,WACA,cACA,iBACA,aACA,YACA,QACA,WACA,cACA,UACA,SACA,OACA,UACA,aACA,SACA,QACA,aACA,gBACA,mBACA,eACA,cACA,sBACA,yBACA,4BACA,wBACA,uBACA,cACA,iBACA,oBACA,gBACA,eACA,uBACA,0BACA,6BACA,yBACA,wBACA,WACA,cACA,iBACA,aACA,YACA,iBACA,oBACA,uBACA,mBACA,kBACA,cACA,iBACA,oBACA,gBACA,eACA,YACA,eACA,kBACA,cACA,aACA,gBACA,mBACA,sBACA,kBACA,iBACA,cACA,iBACA,oBACA,gBACA,eACA,wBACA,2BACA,8BACA,0BACA,yBACA,kBACA,qBACA,wBACA,oBACA,mBACA,uBACA,0BACA,6BACA,yBACA,wBACA,uBACA,0BACA,6BACA,yBACA,wBACA,qBACA,wBACA,2BACA,uBACA,sBACA,sBACA,yBACA,4BACA,wBACA,uBACA,aACA,gBACA,mBACA,eACA,cACA,KACA,QACA,WACA,OACA,MACA,OACA,UACA,aACA,SACA,QACA,OACA,UACA,aACA,SACA,QACA,WACA,cACA,iBACA,aACA,YACA,kBACA,qBACA,wBACA,oBACA,mBACA,eACA,kBACA,qBACA,iBACA,gBACA,eACA,kBACA,qBACA,iBACA,gBACA,aACA,gBACA,mBACA,eACA,cACA,gBACA,mBACA,sBACA,kBACA,iBACA,gBACA,mBACA,sBACA,kBACA,iBACA,kBACA,qBACA,wBACA,oBACA,mBACA,UACA,aACA,gBACA,YACA,WACA,UACA,aACA,gBACA,YACA,WACA,aACA,gBACA,mBACA,eACA,cACA,aACA,gBACA,mBACA,eACA,cACA,eACA,kBACA,qBACA,iBACA,gBACA,eACA,kBACA,qBACA,iBACA,gBACA,oBACA,uBACA,0BACA,sBACA,qBACA,sBACA,yBACA,4BACA,wBACA,uBACA,mBACA,sBACA,yBACA,qBACA,oBACA,SACA,YACA,eACA,WACA,UACA,UACA,aACA,gBACA,YACA,WACA,KACA,QACA,WACA,OACA,MACA,mBACA,sBACA,yBACA,qBACA,oBACA,iBACA,oBACA,uBACA,mBACA,kBACA,kBACA,qBACA,wBACA,oBACA,mBACA,UACA,aACA,gBACA,YACA,WACA,KACA,QACA,WACA,OACA,MACA,UACA,aACA,gBACA,YACA,WACA,UACA,aACA,gBACA,YACA,WACA,aACA,gBACA,mBACA,eACA,cACA,YACA,eACA,kBACA,cACA,aACA,iBACA,oBACA,uBACA,mBACA,kBACA,MACA,SACA,YACA,QACA,OACA,OACA,UACA,aACA,SACA,QACA,gBACA,mBACA,sBACA,kBACA,iBACA,YACA,eACA,kBACA,cACA,aACA,aACA,gBACA,mBACA,eACA,cACA,YACA,eACA,kBACA,cACA,aACA,iBACA,oBACA,uBACA,mBACA,kBACA,oBACA,uBACA,0BACA,sBACA,qBACA,gBACA,mBACA,sBACA,kBACA,iBACA,SACA,YACA,eACA,WACA,UACA,iBACA,oBACA,uBACA,mBACA,kBACA,mBACA,sBACA,yBACA,qBACA,oBACA,eACA,kBACA,qBACA,iBACA,gBACA,kBACA,qBACA,wBACA,oBACA,mBACA,oBACA,uBACA,0BACA,sBACA,qBACA,aACA,gBACA,mBACA,eACA,cACA,cACA,iBACA,oBACA,gBACA,eACA,YACA,eACA,kBACA,cACA,aACA,OACA,UACA,aACA,SACA,QACA,WACA,cACA,iBACA,aACA,YACA,gBACA,mBACA,sBACA,kBACA,iBACA,YACA,eACA,kBACA,cACA,aACA,WACA,cACA,iBACA,aACA,YACA,aACA,gBACA,mBACA,eACA,cACA,eACA,kBACA,qBACA,iBACA,gBACA,aACA,gBACA,mBACA,eACA,cACA,WACA,cACA,iBACA,aACA,YACA,WACA,cACA,iBACA,aACA,YACA,eACA,kBACA,qBACA,iBACA,gBACA,YACA,eACA,kBACA,cACA,aACA,gBACA,mBACA,sBACA,kBACA,iBACA,WACA,cACA,iBACA,aACA,YACA,eACA,kBACA,qBACA,iBACA,gBACA,YACA,eACA,kBACA,cACA,aACA,gBACA,mBACA,sBACA,kBACA,iBACA,WACA,cACA,iBACA,aACA,YACA,eACA,kBACA,qBACA,iBACA,gBACA,KACA,QACA,WACA,OACA,MACA,KACA,QACA,WACA,OACA,MACA,YACA,eACA,kBACA,cACA,aACA,iBACA,oBACA,uBACA,mBACA,kBACA,iBACA,oBACA,uBACA,mBACA,kBACA,mBACA,sBACA,yBACA,qBACA,oBACA,kBACA,qBACA,wBACA,oBACA,mBACA,oBACA,uBACA,0BACA,sBACA,qBACA,UACA,aACA,gBACA,YACA,WACA,QACA,WACA,cACA,UACA,SACA,UACA,aACA,gBACA,YACA,WACA,UACA,aACA,gBACA,YACA,WACA,eACA,kBACA,qBACA,iBACA,gBACA,gBACA,mBACA,sBACA,kBACA,iBACA,eACA,kBACA,qBACA,iBACA,gBACA,eACA,kBACA,qBACA,iBACA,gBACA,WACA,cACA,iBACA,aACA,YACA,eACA,kBACA,qBACA,iBACA,gBACA,YACA,eACA,kBACA,cACA,aACA,YACA,eACA,kBACA,cACA,aACA,UACA,aACA,gBACA,YACA,WACA,kBACA,qBACA,wBACA,oBACA,mBACA,oBACA,uBACA,0BACA,sBACA,qBACA,gBACA,mBACA,sBACA,kBACA,iBACA,mBACA,sBACA,yBACA,qBACA,oBACA,qBACA,wBACA,2BACA,uBACA,sBACA,cACA,iBACA,oBACA,gBACA,eACA,eACA,kBACA,qBACA,iBACA,gBACA,aACA,gBACA,mBACA,eACA,cACA,iBACA,oBACA,uBACA,mBACA,kBACA,kBACA,qBACA,wBACA,oBACA,mBACA,kBACA,qBACA,wBACA,oBACA,mBACA,KACA,QACA,WACA,OACA,MACA,cACA,iBACA,oBACA,gBACA,eACA,oBACA,uBACA,0BACA,sBACA,qBACA,gBACA,mBACA,sBACA,kBACA,iBACA,WACA,cACA,iBACA,aACA,YACA,KACA,QACA,WACA,OACA,MACA,KACA,QACA,WACA,OACA,MACA,IACA,OACA,UACA,MACA,KACA,SACA,YACA,eACA,WACA,UACA,MACA,SACA,YACA,QACA,OACA,MACA,SACA,YACA,QACA,OACA,SACA,YACA,eACA,WACA,UACA,SACA,YACA,eACA,WACA,UACA,QACA,WACA,cACA,UACA,SACA,YACA,eACA,kBACA,cACA,aACA,YACA,eACA,kBACA,cACA,aACA,eACA,kBACA,qBACA,iBACA,gBACA,IACA,OACA,UACA,MACA,KACA,iBACA,oBACA,uBACA,mBACA,kBACA,uBACA,0BACA,6BACA,yBACA,wBACA,wBACA,2BACA,8BACA,0BACA,yBACA,iBACA,oBACA,uBACA,mBACA,kBACA,sBACA,yBACA,4BACA,wBACA,uBACA,cACA,iBACA,oBACA,gBACA,eACA,eACA,kBACA,qBACA,iBACA,gBACA,UACA,aACA,gBACA,YACA,WACA,cACA,iBACA,oBACA,gBACA,eACA,YACA,eACA,kBACA,cACA,aACA,gBACA,mBACA,sBACA,kBACA,iBACA,qBACA,wBACA,2BACA,uBACA,sBACA,iBACA,oBACA,uBACA,mBACA,kBACA,sBACA,yBACA,4BACA,wBACA,uBACA,qBACA,wBACA,2BACA,uBACA,sBACA,sBACA,yBACA,4BACA,wBACA,uBACA,eACA,kBACA,qBACA,iBACA,gBACA,oBACA,uBACA,0BACA,sBACA,qBACA,uBACA,0BACA,6BACA,yBACA,wBACA,oBACA,uBACA,0BACA,sBACA,qBACA,aACA,gBACA,mBACA,eACA,cACA,kBACA,qBACA,wBACA,oBACA,mBACA,eACA,kBACA,qBACA,iBACA,gBACA,gBACA,mBACA,sBACA,kBACA,iBACA,aACA,gBACA,mBACA,eACA,cACA,gBACA,mBACA,sBACA,kBACA,iBACA,wBACA,2BACA,8BACA,0BACA,yBACA,MACA,SACA,YACA,QACA,OACA,cACA,iBACA,oBACA,gBACA,eACA,YACA,eACA,kBACA,cACA,aACA,eACA,kBACA,qBACA,iBACA,gBACA,kBACA,qBACA,wBACA,oBACA,mBACA,iBACA,oBACA,uBACA,mBACA,kBACA,aACA,gBACA,mBACA,eACA,cACA,kBACA,qBACA,wBACA,oBACA,mBACA,qBACA,wBACA,2BACA,uBACA,sBACA,qBACA,wBACA,2BACA,uBACA,sBACA,2BACA,8BACA,iCACA,6BACA,4BACA,OACA,UACA,aACA,SACA,QACA,cACA,iBACA,oBACA,gBACA,eACA,QACA,WACA,cACA,UACA,SACA,gBACA,mBACA,sBACA,kBACA,iBACA,KACA,QACA,WACA,OACA,MACA,aACA,gBACA,mBACA,eACA,cACA,OACA,UACA,aACA,SACA,QACA,OACA,UACA,aACA,SACA,QACA,KACA,QACA,WACA,OACA,MACA,aACA,gBACA,mBACA,eACA,cACA,SACA,YACA,eACA,WACA,UACA,QACA,WACA,cACA,UACA,SACA,aACA,gBACA,mBACA,eACA,cACA,YACA,eACA,kBACA,cACA,aACA,cACA,iBACA,oBACA,gBACA,eACA,WACA,cACA,iBACA,aACA,YACA,cACA,iBACA,oBACA,gBACA,eACA,SACA,YACA,eACA,WACA,UACA,WACA,cACA,iBACA,aACA,YACA,OACA,UACA,aACA,SACA,QACA,KACA,QACA,WACA,OACA;;;;2DC/iDFkC,OAAOC,eAAenC,EAAS,aAAc,CACzCwC,OAAO,IAGX,IAAI60H,EAAWn1H,OAAOu9B,QAAU,SAAUK,GAAU,IAAK,IAAIt+B,EAAI,EAAGA,EAAIwL,UAAUlE,OAAQtH,IAAK,CAAE,IAAI8P,EAAStE,UAAUxL,GAAI,I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","file":"lib-voyager.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"font-awesome-sass-loader\"), require(\"react\"), require(\"react-dom\"), require(\"react-redux\"), require(\"redux-undo\"), require(\"react-dnd\"), require(\"react-dnd-html5-backend\"), require(\"react-css-modules\"), require(\"react-tether\"), require(\"moment\"), require(\"redux\"), require(\"redux-thunk\"), require(\"vega\"), require(\"vega-lite\"), require(\"vega-tooltip\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"font-awesome-sass-loader\", \"react\", \"react-dom\", \"react-redux\", \"redux-undo\", \"react-dnd\", \"react-dnd-html5-backend\", \"react-css-modules\", \"react-tether\", \"moment\", \"redux\", \"redux-thunk\", \"vega\", \"vega-lite\", \"vega-tooltip\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"voyager\"] = factory(require(\"font-awesome-sass-loader\"), require(\"react\"), require(\"react-dom\"), require(\"react-redux\"), require(\"redux-undo\"), require(\"react-dnd\"), require(\"react-dnd-html5-backend\"), require(\"react-css-modules\"), require(\"react-tether\"), require(\"moment\"), require(\"redux\"), require(\"redux-thunk\"), require(\"vega\"), require(\"vega-lite\"), require(\"vega-tooltip\"));\n\telse\n\t\troot[\"voyager\"] = factory(root[\"font-awesome-sass-loader\"], root[\"react\"], root[\"react-dom\"], root[\"react-redux\"], root[\"redux-undo\"], root[\"react-dnd\"], root[\"react-dnd-html5-backend\"], root[\"react-css-modules\"], root[\"react-tether\"], root[\"moment\"], root[\"redux\"], root[\"redux-thunk\"], root[\"vega\"], root[\"vega-lite\"], root[\"vega-tooltip\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__57__, __WEBPACK_EXTERNAL_MODULE__58__, __WEBPACK_EXTERNAL_MODULE__59__, __WEBPACK_EXTERNAL_MODULE__60__, __WEBPACK_EXTERNAL_MODULE__126__, __WEBPACK_EXTERNAL_MODULE__305__, __WEBPACK_EXTERNAL_MODULE__306__, __WEBPACK_EXTERNAL_MODULE__394__, __WEBPACK_EXTERNAL_MODULE__399__, __WEBPACK_EXTERNAL_MODULE__581__, __WEBPACK_EXTERNAL_MODULE__666__, __WEBPACK_EXTERNAL_MODULE__669__, __WEBPACK_EXTERNAL_MODULE__728__, __WEBPACK_EXTERNAL_MODULE__729__, __WEBPACK_EXTERNAL_MODULE__730__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// This module is intended to be used when embedding voyager\r\n// in some other context than the orgiginal app.\r\n//\r\n// It provides factory methods for creating instances of the Voyager application\r\n// and should eventually also export a react component if one is doing that kind\r\n// of integration.\r\n\r\nimport * as Ajv from 'ajv';\r\nimport * as draft4Schemas from 'ajv/lib/refs/json-schema-draft-04.json';\r\nimport 'font-awesome-sass-loader'; // TODO should this move to App?\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport {Provider} from 'react-redux';\r\nimport {Store} from 'redux';\r\nimport {TopLevelSpec} from 'vega-lite';\r\nimport {Data} from 'vega-lite/build/src/data';\r\nimport {FacetedCompositeUnitSpec, isUnitSpec, TopLevel} from 'vega-lite/build/src/spec';\r\nimport * as vlSchema from 'vega-lite/build/vega-lite-schema.json';\r\nimport {isString} from 'vega-util';\r\nimport { REDO, UNDO } from './actions/index';\r\nimport {App} from './components/app';\r\nimport {State} from './models';\r\nimport {DEFAULT_VOYAGER_CONFIG, VoyagerConfig} from './models/config';\r\nimport {fromSerializable, SerializableState, toSerializable} from './models/index';\r\nimport {selectData} from './selectors/dataset';\r\nimport {selectBookmark} from './selectors/index';\r\nimport {selectMainSpec} from './selectors/result';\r\nimport {configureStore} from './store';\r\n\r\n\r\n\r\nexport type Container = string | HTMLElement;\r\n\r\n/**\r\n * The Voyager class encapsulates the voyager application and allows for easy\r\n * instantiation and interaction from non-react projects.\r\n */\r\nexport class Voyager {\r\n  private container: HTMLElement;\r\n  private config: VoyagerConfig;\r\n  private store: Store<State>;\r\n  private data: Data;\r\n  private filename: string;\r\n\r\n  constructor(container: Container, config: VoyagerConfig, data: Data) {\r\n    if (isString(container)) {\r\n      this.container = document.querySelector(container) as HTMLElement;\r\n      // TODO throw error if not found\r\n    } else {\r\n      this.container = container;\r\n    }\r\n\r\n    this.config = {\r\n      ...DEFAULT_VOYAGER_CONFIG,\r\n      ...config\r\n    };\r\n    this.data = data;\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * Update the dataset currently loaded into voyager\r\n   *\r\n   * @param {VoyagerData} data\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public updateData(data: Data) {\r\n    this.data = data;\r\n    this.render();\r\n  }\r\n\r\n  /**\r\n   * Update state to reflect the previous state\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public undo(): void {\r\n    this.store.dispatch({type: UNDO});\r\n    this.render();\r\n  }\r\n\r\n  /**\r\n   * Update state to reflect the future state\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public redo(): void {\r\n    this.store.dispatch({type: REDO});\r\n    this.render();\r\n  }\r\n  /**\r\n   * Update the configuration of the voyager application.\r\n   *\r\n   * @param {VoyagerConfig} config\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public updateConfig(config: VoyagerConfig) {\r\n    this.config = config;\r\n    this.render();\r\n  }\r\n\r\n  public setFilename(filename: string) {\r\n    this.filename = filename;\r\n  }\r\n\r\n  /**\r\n   * Apply a vega-lite spec to voyager.\r\n   *\r\n   * @param {VoyagerConfig} config\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public setSpec(spec: Object) {\r\n\r\n    const ajv = new Ajv({\r\n      validateSchema: true,\r\n      allErrors: true,\r\n      extendRefs: 'fail'\r\n    });\r\n    ajv.addMetaSchema(draft4Schemas, 'http://json-schema.org/draft-04/schema#');\r\n\r\n    const validateVl = ajv.compile(vlSchema);\r\n    const valid = validateVl(spec);\r\n\r\n    if (!valid) {\r\n      throw new Error(\"Invalid spec:\" + validateVl.errors.toString());\r\n    }\r\n\r\n    // If it is validated, it is a TopLevelExtendedSpec\r\n    if (!isUnitSpec(spec as TopLevelSpec)) {\r\n      throw new Error(\"Voyager does not support layered or multi-view vega-lite specs\");\r\n    }\r\n\r\n    // If it is unit, then we can cast to a top level unit spec\r\n    const validSpec: TopLevel<FacetedCompositeUnitSpec> = spec as TopLevel<FacetedCompositeUnitSpec>;\r\n\r\n    this.data = validSpec.data;\r\n    this.render(validSpec);\r\n  }\r\n\r\n  /**\r\n   * Sets the entire voyager application state. This is useful for restoring\r\n   * the state of the application to a previosly saved state.\r\n   *\r\n   * @param state A State object with the following keys\r\n   *\r\n   * @param state.config\r\n   * @param state.dataset\r\n   * @param state.shelf\r\n   * @param state.result\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public setApplicationState(state: SerializableState): void {\r\n    this.data = undefined;\r\n    this.config = undefined;\r\n\r\n    this.renderFromState(fromSerializable(state));\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Gets the current application state.\r\n   *\r\n   * @returns {Readonly<State>}\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public getApplicationState(): SerializableState {\r\n    return toSerializable(this.store.getState());\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Gets Vega-Lite spec of current specified view\r\n   *\r\n   * @returns {Readonly<Spec>}\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public getSpec(includeData: boolean): FacetedCompositeUnitSpec {\r\n    const spec = selectMainSpec(this.store.getState());\r\n    if (includeData) {\r\n      return {\r\n        ...spec,\r\n        data: selectData(this.store.getState()),\r\n      };\r\n    }\r\n\r\n    return spec;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Gets the current bookmarked vega-lite specs.\r\n   *\r\n   * @returns {string[]}\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public getBookmarkedSpecs(): string[] {\r\n    return selectBookmark(this.store.getState()).list;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to state changes.\r\n   *\r\n   * This is useful for taking state snapshots to persist and later restore.\r\n   *\r\n   * @param {Function} onChange callback that takes a single state parameter.\r\n   * @returns {Function} unsubscribe, call this function to remove this listener.\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  public onStateChange(onChange: (state: SerializableState) => void): Function {\r\n    let currentState: State;\r\n\r\n    const handleChange = () => {\r\n      const nextState = this.store.getState();\r\n      if (nextState !== currentState) {\r\n        currentState = nextState;\r\n        onChange(toSerializable(currentState));\r\n      }\r\n    };\r\n\r\n    const unsubscribe = this.store.subscribe(handleChange);\r\n    return unsubscribe;\r\n  }\r\n\r\n  /**\r\n   * Initialized the application, and renders it into the target container\r\n   *\r\n   * @private\r\n   *\r\n   * @memberof Voyager\r\n   */\r\n  private init() {\r\n    this.store = configureStore();\r\n    this.render();\r\n  }\r\n\r\n  private render(spec?: TopLevel<FacetedCompositeUnitSpec>) {\r\n    const store = this.store;\r\n    const root = this.container;\r\n    ReactDOM.render(\r\n      <Provider store={store}>\r\n        <App\r\n          dispatch={store.dispatch}\r\n          data={this.data}\r\n          config={this.config}\r\n          spec={spec}\r\n          filename={this.filename}\r\n        />\r\n      </Provider>,\r\n      root\r\n    );\r\n  }\r\n\r\n  private renderFromState(state: Readonly<State>) {\r\n    const store = this.store;\r\n    const root = this.container;\r\n    ReactDOM.render(\r\n      <Provider store={store}>\r\n        <App\r\n          dispatch={store.dispatch}\r\n          applicationState={state}\r\n        />\r\n      </Provider>,\r\n      root\r\n    );\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * Create an instance of the voyager application.\r\n *\r\n * @param {Container} container css selector or HTMLElement that will be the parent\r\n *                              element of the application\r\n * @param {Object}    config    configuration options\r\n * @param {Array}     data      data object. Can be a string or an array of objects.\r\n */\r\nexport function CreateVoyager(container: Container, config: VoyagerConfig, data: Data): Voyager {\r\n  return new Voyager(container, config, data);\r\n}\r\n","'use strict';\n\nvar compileSchema = require('./compile')\n  , resolve = require('./compile/resolve')\n  , Cache = require('./cache')\n  , SchemaObject = require('./compile/schema_obj')\n  , stableStringify = require('json-stable-stringify')\n  , formats = require('./compile/formats')\n  , rules = require('./compile/rules')\n  , $dataMetaSchema = require('./$data')\n  , patternGroups = require('./patternGroups')\n  , util = require('./compile/util')\n  , co = require('co');\n\nmodule.exports = Ajv;\n\nAjv.prototype.validate = validate;\nAjv.prototype.compile = compile;\nAjv.prototype.addSchema = addSchema;\nAjv.prototype.addMetaSchema = addMetaSchema;\nAjv.prototype.validateSchema = validateSchema;\nAjv.prototype.getSchema = getSchema;\nAjv.prototype.removeSchema = removeSchema;\nAjv.prototype.addFormat = addFormat;\nAjv.prototype.errorsText = errorsText;\n\nAjv.prototype._addSchema = _addSchema;\nAjv.prototype._compile = _compile;\n\nAjv.prototype.compileAsync = require('./compile/async');\nvar customKeyword = require('./keyword');\nAjv.prototype.addKeyword = customKeyword.add;\nAjv.prototype.getKeyword = customKeyword.get;\nAjv.prototype.removeKeyword = customKeyword.remove;\n\nvar errorClasses = require('./compile/error_classes');\nAjv.ValidationError = errorClasses.Validation;\nAjv.MissingRefError = errorClasses.MissingRef;\nAjv.$dataMetaSchema = $dataMetaSchema;\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-06/schema';\n\nvar META_IGNORE_OPTIONS = [ 'removeAdditional', 'useDefaults', 'coerceTypes' ];\nvar META_SUPPORT_DATA = ['/properties'];\n\n/**\n * Creates validator instance.\n * Usage: `Ajv(opts)`\n * @param {Object} opts optional options\n * @return {Object} ajv instance\n */\nfunction Ajv(opts) {\n  if (!(this instanceof Ajv)) return new Ajv(opts);\n  opts = this._opts = util.copy(opts) || {};\n  this._schemas = {};\n  this._refs = {};\n  this._fragments = {};\n  this._formats = formats(opts.format);\n  var schemaUriFormat = this._schemaUriFormat = this._formats['uri-reference'];\n  this._schemaUriFormatFunc = function (str) { return schemaUriFormat.test(str); };\n\n  this._cache = opts.cache || new Cache;\n  this._loadingSchemas = {};\n  this._compilations = [];\n  this.RULES = rules();\n  this._getId = chooseGetId(opts);\n\n  opts.loopRequired = opts.loopRequired || Infinity;\n  if (opts.errorDataPath == 'property') opts._errorDataPathProperty = true;\n  if (opts.serialize === undefined) opts.serialize = stableStringify;\n  this._metaOpts = getMetaSchemaOptions(this);\n\n  if (opts.formats) addInitialFormats(this);\n  addDraft6MetaSchema(this);\n  if (typeof opts.meta == 'object') this.addMetaSchema(opts.meta);\n  addInitialSchemas(this);\n  if (opts.patternGroups) patternGroups(this);\n}\n\n\n\n/**\n * Validate data using schema\n * Schema will be compiled and cached (using serialized JSON as key. [json-stable-stringify](https://github.com/substack/json-stable-stringify) is used to serialize.\n * @this   Ajv\n * @param  {String|Object} schemaKeyRef key, ref or schema object\n * @param  {Any} data to be validated\n * @return {Boolean} validation result. Errors from the last validation will be available in `ajv.errors` (and also in compiled schema: `schema.errors`).\n */\nfunction validate(schemaKeyRef, data) {\n  var v;\n  if (typeof schemaKeyRef == 'string') {\n    v = this.getSchema(schemaKeyRef);\n    if (!v) throw new Error('no schema with key or ref \"' + schemaKeyRef + '\"');\n  } else {\n    var schemaObj = this._addSchema(schemaKeyRef);\n    v = schemaObj.validate || this._compile(schemaObj);\n  }\n\n  var valid = v(data);\n  if (v.$async === true)\n    return this._opts.async == '*' ? co(valid) : valid;\n  this.errors = v.errors;\n  return valid;\n}\n\n\n/**\n * Create validating function for passed schema.\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Boolean} _meta true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.\n * @return {Function} validating function\n */\nfunction compile(schema, _meta) {\n  var schemaObj = this._addSchema(schema, undefined, _meta);\n  return schemaObj.validate || this._compile(schemaObj);\n}\n\n\n/**\n * Adds schema to the instance.\n * @this   Ajv\n * @param {Object|Array} schema schema or array of schemas. If array is passed, `key` and other parameters will be ignored.\n * @param {String} key Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n * @param {Boolean} _skipValidation true to skip schema validation. Used internally, option validateSchema should be used instead.\n * @param {Boolean} _meta true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n */\nfunction addSchema(schema, key, _skipValidation, _meta) {\n  if (Array.isArray(schema)){\n    for (var i=0; i<schema.length; i++) this.addSchema(schema[i], undefined, _skipValidation, _meta);\n    return;\n  }\n  var id = this._getId(schema);\n  if (id !== undefined && typeof id != 'string')\n    throw new Error('schema id must be string');\n  key = resolve.normalizeId(key || id);\n  checkUnique(this, key);\n  this._schemas[key] = this._addSchema(schema, _skipValidation, _meta, true);\n}\n\n\n/**\n * Add schema that will be used to validate other schemas\n * options in META_IGNORE_OPTIONS are alway set to false\n * @this   Ajv\n * @param {Object} schema schema object\n * @param {String} key optional schema key\n * @param {Boolean} skipValidation true to skip schema validation, can be used to override validateSchema option for meta-schema\n */\nfunction addMetaSchema(schema, key, skipValidation) {\n  this.addSchema(schema, key, skipValidation, true);\n}\n\n\n/**\n * Validate schema\n * @this   Ajv\n * @param {Object} schema schema to validate\n * @param {Boolean} throwOrLogError pass true to throw (or log) an error if invalid\n * @return {Boolean} true if schema is valid\n */\nfunction validateSchema(schema, throwOrLogError) {\n  var $schema = schema.$schema;\n  if ($schema !== undefined && typeof $schema != 'string')\n    throw new Error('$schema must be a string');\n  $schema = $schema || this._opts.defaultMeta || defaultMeta(this);\n  if (!$schema) {\n    console.warn('meta-schema not available');\n    this.errors = null;\n    return true;\n  }\n  var currentUriFormat = this._formats.uri;\n  this._formats.uri = typeof currentUriFormat == 'function'\n                      ? this._schemaUriFormatFunc\n                      : this._schemaUriFormat;\n  var valid;\n  try { valid = this.validate($schema, schema); }\n  finally { this._formats.uri = currentUriFormat; }\n  if (!valid && throwOrLogError) {\n    var message = 'schema is invalid: ' + this.errorsText();\n    if (this._opts.validateSchema == 'log') console.error(message);\n    else throw new Error(message);\n  }\n  return valid;\n}\n\n\nfunction defaultMeta(self) {\n  var meta = self._opts.meta;\n  self._opts.defaultMeta = typeof meta == 'object'\n                            ? self._getId(meta) || meta\n                            : self.getSchema(META_SCHEMA_ID)\n                              ? META_SCHEMA_ID\n                              : undefined;\n  return self._opts.defaultMeta;\n}\n\n\n/**\n * Get compiled schema from the instance by `key` or `ref`.\n * @this   Ajv\n * @param  {String} keyRef `key` that was passed to `addSchema` or full schema reference (`schema.id` or resolved id).\n * @return {Function} schema validating function (with property `schema`).\n */\nfunction getSchema(keyRef) {\n  var schemaObj = _getSchemaObj(this, keyRef);\n  switch (typeof schemaObj) {\n    case 'object': return schemaObj.validate || this._compile(schemaObj);\n    case 'string': return this.getSchema(schemaObj);\n    case 'undefined': return _getSchemaFragment(this, keyRef);\n  }\n}\n\n\nfunction _getSchemaFragment(self, ref) {\n  var res = resolve.schema.call(self, { schema: {} }, ref);\n  if (res) {\n    var schema = res.schema\n      , root = res.root\n      , baseId = res.baseId;\n    var v = compileSchema.call(self, schema, root, undefined, baseId);\n    self._fragments[ref] = new SchemaObject({\n      ref: ref,\n      fragment: true,\n      schema: schema,\n      root: root,\n      baseId: baseId,\n      validate: v\n    });\n    return v;\n  }\n}\n\n\nfunction _getSchemaObj(self, keyRef) {\n  keyRef = resolve.normalizeId(keyRef);\n  return self._schemas[keyRef] || self._refs[keyRef] || self._fragments[keyRef];\n}\n\n\n/**\n * Remove cached schema(s).\n * If no parameter is passed all schemas but meta-schemas are removed.\n * If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n * Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n * @this   Ajv\n * @param  {String|Object|RegExp} schemaKeyRef key, ref, pattern to match key/ref or schema object\n */\nfunction removeSchema(schemaKeyRef) {\n  if (schemaKeyRef instanceof RegExp) {\n    _removeAllSchemas(this, this._schemas, schemaKeyRef);\n    _removeAllSchemas(this, this._refs, schemaKeyRef);\n    return;\n  }\n  switch (typeof schemaKeyRef) {\n    case 'undefined':\n      _removeAllSchemas(this, this._schemas);\n      _removeAllSchemas(this, this._refs);\n      this._cache.clear();\n      return;\n    case 'string':\n      var schemaObj = _getSchemaObj(this, schemaKeyRef);\n      if (schemaObj) this._cache.del(schemaObj.cacheKey);\n      delete this._schemas[schemaKeyRef];\n      delete this._refs[schemaKeyRef];\n      return;\n    case 'object':\n      var serialize = this._opts.serialize;\n      var cacheKey = serialize ? serialize(schemaKeyRef) : schemaKeyRef;\n      this._cache.del(cacheKey);\n      var id = this._getId(schemaKeyRef);\n      if (id) {\n        id = resolve.normalizeId(id);\n        delete this._schemas[id];\n        delete this._refs[id];\n      }\n  }\n}\n\n\nfunction _removeAllSchemas(self, schemas, regex) {\n  for (var keyRef in schemas) {\n    var schemaObj = schemas[keyRef];\n    if (!schemaObj.meta && (!regex || regex.test(keyRef))) {\n      self._cache.del(schemaObj.cacheKey);\n      delete schemas[keyRef];\n    }\n  }\n}\n\n\n/* @this   Ajv */\nfunction _addSchema(schema, skipValidation, meta, shouldAddSchema) {\n  if (typeof schema != 'object' && typeof schema != 'boolean')\n    throw new Error('schema should be object or boolean');\n  var serialize = this._opts.serialize;\n  var cacheKey = serialize ? serialize(schema) : schema;\n  var cached = this._cache.get(cacheKey);\n  if (cached) return cached;\n\n  shouldAddSchema = shouldAddSchema || this._opts.addUsedSchema !== false;\n\n  var id = resolve.normalizeId(this._getId(schema));\n  if (id && shouldAddSchema) checkUnique(this, id);\n\n  var willValidate = this._opts.validateSchema !== false && !skipValidation;\n  var recursiveMeta;\n  if (willValidate && !(recursiveMeta = id && id == resolve.normalizeId(schema.$schema)))\n    this.validateSchema(schema, true);\n\n  var localRefs = resolve.ids.call(this, schema);\n\n  var schemaObj = new SchemaObject({\n    id: id,\n    schema: schema,\n    localRefs: localRefs,\n    cacheKey: cacheKey,\n    meta: meta\n  });\n\n  if (id[0] != '#' && shouldAddSchema) this._refs[id] = schemaObj;\n  this._cache.put(cacheKey, schemaObj);\n\n  if (willValidate && recursiveMeta) this.validateSchema(schema, true);\n\n  return schemaObj;\n}\n\n\n/* @this   Ajv */\nfunction _compile(schemaObj, root) {\n  if (schemaObj.compiling) {\n    schemaObj.validate = callValidate;\n    callValidate.schema = schemaObj.schema;\n    callValidate.errors = null;\n    callValidate.root = root ? root : callValidate;\n    if (schemaObj.schema.$async === true)\n      callValidate.$async = true;\n    return callValidate;\n  }\n  schemaObj.compiling = true;\n\n  var currentOpts;\n  if (schemaObj.meta) {\n    currentOpts = this._opts;\n    this._opts = this._metaOpts;\n  }\n\n  var v;\n  try { v = compileSchema.call(this, schemaObj.schema, root, schemaObj.localRefs); }\n  finally {\n    schemaObj.compiling = false;\n    if (schemaObj.meta) this._opts = currentOpts;\n  }\n\n  schemaObj.validate = v;\n  schemaObj.refs = v.refs;\n  schemaObj.refVal = v.refVal;\n  schemaObj.root = v.root;\n  return v;\n\n\n  function callValidate() {\n    var _validate = schemaObj.validate;\n    var result = _validate.apply(null, arguments);\n    callValidate.errors = _validate.errors;\n    return result;\n  }\n}\n\n\nfunction chooseGetId(opts) {\n  switch (opts.schemaId) {\n    case '$id': return _get$Id;\n    case 'id': return _getId;\n    default: return _get$IdOrId;\n  }\n}\n\n\nfunction _getId(schema) {\n  if (schema.$id) console.warn('schema $id ignored', schema.$id);\n  return schema.id;\n}\n\n\nfunction _get$Id(schema) {\n  if (schema.id) console.warn('schema id ignored', schema.id);\n  return schema.$id;\n}\n\n\nfunction _get$IdOrId(schema) {\n  if (schema.$id && schema.id && schema.$id != schema.id)\n    throw new Error('schema $id is different from id');\n  return schema.$id || schema.id;\n}\n\n\n/**\n * Convert array of error message objects to string\n * @this   Ajv\n * @param  {Array<Object>} errors optional array of validation errors, if not passed errors from the instance are used.\n * @param  {Object} options optional options with properties `separator` and `dataVar`.\n * @return {String} human readable string with all errors descriptions\n */\nfunction errorsText(errors, options) {\n  errors = errors || this.errors;\n  if (!errors) return 'No errors';\n  options = options || {};\n  var separator = options.separator === undefined ? ', ' : options.separator;\n  var dataVar = options.dataVar === undefined ? 'data' : options.dataVar;\n\n  var text = '';\n  for (var i=0; i<errors.length; i++) {\n    var e = errors[i];\n    if (e) text += dataVar + e.dataPath + ' ' + e.message + separator;\n  }\n  return text.slice(0, -separator.length);\n}\n\n\n/**\n * Add custom format\n * @this   Ajv\n * @param {String} name format name\n * @param {String|RegExp|Function} format string is converted to RegExp; function should return boolean (true when valid)\n */\nfunction addFormat(name, format) {\n  if (typeof format == 'string') format = new RegExp(format);\n  this._formats[name] = format;\n}\n\n\nfunction addDraft6MetaSchema(self) {\n  var $dataSchema;\n  if (self._opts.$data) {\n    $dataSchema = require('./refs/$data.json');\n    self.addMetaSchema($dataSchema, $dataSchema.$id, true);\n  }\n  if (self._opts.meta === false) return;\n  var metaSchema = require('./refs/json-schema-draft-06.json');\n  if (self._opts.$data) metaSchema = $dataMetaSchema(metaSchema, META_SUPPORT_DATA);\n  self.addMetaSchema(metaSchema, META_SCHEMA_ID, true);\n  self._refs['http://json-schema.org/schema'] = META_SCHEMA_ID;\n}\n\n\nfunction addInitialSchemas(self) {\n  var optsSchemas = self._opts.schemas;\n  if (!optsSchemas) return;\n  if (Array.isArray(optsSchemas)) self.addSchema(optsSchemas);\n  else for (var key in optsSchemas) self.addSchema(optsSchemas[key], key);\n}\n\n\nfunction addInitialFormats(self) {\n  for (var name in self._opts.formats) {\n    var format = self._opts.formats[name];\n    self.addFormat(name, format);\n  }\n}\n\n\nfunction checkUnique(self, id) {\n  if (self._schemas[id] || self._refs[id])\n    throw new Error('schema with key or id \"' + id + '\" already exists');\n}\n\n\nfunction getMetaSchemaOptions(self) {\n  var metaOpts = util.copy(self._opts);\n  for (var i=0; i<META_IGNORE_OPTIONS.length; i++)\n    delete metaOpts[META_IGNORE_OPTIONS[i]];\n  return metaOpts;\n}\n","'use strict';\n\nvar resolve = require('./resolve')\n  , util = require('./util')\n  , errorClasses = require('./error_classes')\n  , stableStringify = require('json-stable-stringify');\n\nvar validateGenerator = require('../dotjs/validate');\n\n/**\n * Functions below are used inside compiled validations function\n */\n\nvar co = require('co');\nvar ucs2length = util.ucs2length;\nvar equal = require('fast-deep-equal');\n\n// this error is thrown by async schemas to return validation errors via exception\nvar ValidationError = errorClasses.Validation;\n\nmodule.exports = compile;\n\n\n/**\n * Compiles schema to validation function\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Object} root object with information about the root schema for this schema\n * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution\n * @param  {String} baseId base ID for IDs in the schema\n * @return {Function} validation function\n */\nfunction compile(schema, root, localRefs, baseId) {\n  /* jshint validthis: true, evil: true */\n  /* eslint no-shadow: 0 */\n  var self = this\n    , opts = this._opts\n    , refVal = [ undefined ]\n    , refs = {}\n    , patterns = []\n    , patternsHash = {}\n    , defaults = []\n    , defaultsHash = {}\n    , customRules = [];\n\n  root = root || { schema: schema, refVal: refVal, refs: refs };\n\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling) return (compilation.callValidate = callValidate);\n\n  var formats = this._formats;\n  var RULES = this.RULES;\n\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (opts.sourceCode) cv.source = v.source;\n    }\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n\n  function callValidate() {\n    var validate = compilation.validate;\n    var result = validate.apply(null, arguments);\n    callValidate.errors = validate.errors;\n    return result;\n  }\n\n  function localCompile(_schema, _root, localRefs, baseId) {\n    var isRoot = !_root || (_root && _root.schema == _schema);\n    if (_root.schema != root.schema)\n      return compile.call(self, _schema, _root, localRefs, baseId);\n\n    var $async = _schema.$async === true;\n\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot: isRoot,\n      baseId: baseId,\n      root: _root,\n      schemaPath: '',\n      errSchemaPath: '#',\n      errorPath: '\"\"',\n      MissingRefError: errorClasses.MissingRef,\n      RULES: RULES,\n      validate: validateGenerator,\n      util: util,\n      resolve: resolve,\n      resolveRef: resolveRef,\n      usePattern: usePattern,\n      useDefault: useDefault,\n      useCustomRule: useCustomRule,\n      opts: opts,\n      formats: formats,\n      self: self\n    });\n\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode)\n                   + vars(defaults, defaultCode) + vars(customRules, customRuleCode)\n                   + sourceCode;\n\n    if (opts.processCode) sourceCode = opts.processCode(sourceCode);\n    // console.log('\\n\\n\\n *** \\n', JSON.stringify(sourceCode));\n    var validate;\n    try {\n      var makeValidate = new Function(\n        'self',\n        'RULES',\n        'formats',\n        'root',\n        'refVal',\n        'defaults',\n        'customRules',\n        'co',\n        'equal',\n        'ucs2length',\n        'ValidationError',\n        sourceCode\n      );\n\n      validate = makeValidate(\n        self,\n        RULES,\n        formats,\n        root,\n        refVal,\n        defaults,\n        customRules,\n        co,\n        equal,\n        ucs2length,\n        ValidationError\n      );\n\n      refVal[0] = validate;\n    } catch(e) {\n      console.error('Error compiling schema, function code:', sourceCode);\n      throw e;\n    }\n\n    validate.schema = _schema;\n    validate.errors = null;\n    validate.refs = refs;\n    validate.refVal = refVal;\n    validate.root = isRoot ? validate : _root;\n    if ($async) validate.$async = true;\n    if (opts.sourceCode === true) {\n      validate.source = {\n        code: sourceCode,\n        patterns: patterns,\n        defaults: defaults\n      };\n    }\n\n    return validate;\n  }\n\n  function resolveRef(baseId, ref, isRoot) {\n    ref = resolve.url(baseId, ref);\n    var refIndex = refs[ref];\n    var _refVal, refCode;\n    if (refIndex !== undefined) {\n      _refVal = refVal[refIndex];\n      refCode = 'refVal[' + refIndex + ']';\n      return resolvedRef(_refVal, refCode);\n    }\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref];\n      if (rootRefId !== undefined) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n\n    refCode = addLocalRef(ref);\n    var v = resolve.call(self, localCompile, root, ref);\n    if (v === undefined) {\n      var localSchema = localRefs && localRefs[ref];\n      if (localSchema) {\n        v = resolve.inlineRef(localSchema, opts.inlineRefs)\n            ? localSchema\n            : compile.call(self, localSchema, root, localRefs, baseId);\n      }\n    }\n\n    if (v === undefined) {\n      removeLocalRef(ref);\n    } else {\n      replaceLocalRef(ref, v);\n      return resolvedRef(v, refCode);\n    }\n  }\n\n  function addLocalRef(ref, v) {\n    var refId = refVal.length;\n    refVal[refId] = v;\n    refs[ref] = refId;\n    return 'refVal' + refId;\n  }\n\n  function removeLocalRef(ref) {\n    delete refs[ref];\n  }\n\n  function replaceLocalRef(ref, v) {\n    var refId = refs[ref];\n    refVal[refId] = v;\n  }\n\n  function resolvedRef(refVal, code) {\n    return typeof refVal == 'object' || typeof refVal == 'boolean'\n            ? { code: code, schema: refVal, inline: true }\n            : { code: code, $async: refVal && refVal.$async };\n  }\n\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n    if (index === undefined) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n    return 'pattern' + index;\n  }\n\n  function useDefault(value) {\n    switch (typeof value) {\n      case 'boolean':\n      case 'number':\n        return '' + value;\n      case 'string':\n        return util.toQuotedString(value);\n      case 'object':\n        if (value === null) return 'null';\n        var valueStr = stableStringify(value);\n        var index = defaultsHash[valueStr];\n        if (index === undefined) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n        return 'default' + index;\n    }\n  }\n\n  function useCustomRule(rule, schema, parentSchema, it) {\n    var validateSchema = rule.definition.validateSchema;\n    if (validateSchema && self._opts.validateSchema !== false) {\n      var valid = validateSchema(schema);\n      if (!valid) {\n        var message = 'keyword schema is invalid: ' + self.errorsText(validateSchema.errors);\n        if (self._opts.validateSchema == 'log') console.error(message);\n        else throw new Error(message);\n      }\n    }\n\n    var compile = rule.definition.compile\n      , inline = rule.definition.inline\n      , macro = rule.definition.macro;\n\n    var validate;\n    if (compile) {\n      validate = compile.call(self, schema, parentSchema, it);\n    } else if (macro) {\n      validate = macro.call(self, schema, parentSchema, it);\n      if (opts.validateSchema !== false) self.validateSchema(validate, true);\n    } else if (inline) {\n      validate = inline.call(self, it, rule.keyword, schema, parentSchema);\n    } else {\n      validate = rule.definition.validate;\n      if (!validate) return;\n    }\n\n    if (validate === undefined)\n      throw new Error('custom keyword \"' + rule.keyword + '\"failed to compile');\n\n    var index = customRules.length;\n    customRules[index] = validate;\n\n    return {\n      code: 'customRule' + index,\n      validate: validate\n    };\n  }\n}\n\n\n/**\n * Checks if the schema is currently compiled\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Object} object with properties \"index\" (compilation index) and \"compiling\" (boolean)\n */\nfunction checkCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0) return { index: index, compiling: true };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema: schema,\n    root: root,\n    baseId: baseId\n  };\n  return { index: index, compiling: false };\n}\n\n\n/**\n * Removes the schema from the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n */\nfunction endCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0) this._compilations.splice(i, 1);\n}\n\n\n/**\n * Index of schema compilation in the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Integer} compilation index\n */\nfunction compIndex(schema, root, baseId) {\n  /* jshint validthis: true */\n  for (var i=0; i<this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId) return i;\n  }\n  return -1;\n}\n\n\nfunction patternCode(i, patterns) {\n  return 'var pattern' + i + ' = new RegExp(' + util.toQuotedString(patterns[i]) + ');';\n}\n\n\nfunction defaultCode(i) {\n  return 'var default' + i + ' = defaults[' + i + '];';\n}\n\n\nfunction refValCode(i, refVal) {\n  return refVal[i] === undefined ? '' : 'var refVal' + i + ' = refVal[' + i + '];';\n}\n\n\nfunction customRuleCode(i) {\n  return 'var customRule' + i + ' = customRules[' + i + '];';\n}\n\n\nfunction vars(arr, statement) {\n  if (!arr.length) return '';\n  var code = '';\n  for (var i=0; i<arr.length; i++)\n    code += statement(i, arr);\n  return code;\n}\n","'use strict';\n\nvar url = require('url')\n  , equal = require('fast-deep-equal')\n  , util = require('./util')\n  , SchemaObject = require('./schema_obj')\n  , traverse = require('json-schema-traverse');\n\nmodule.exports = resolve;\n\nresolve.normalizeId = normalizeId;\nresolve.fullPath = getFullPath;\nresolve.url = resolveUrl;\nresolve.ids = resolveIds;\nresolve.inlineRef = inlineRef;\nresolve.schema = resolveSchema;\n\n/**\n * [resolve and compile the references ($ref)]\n * @this   Ajv\n * @param  {Function} compile reference to schema compilation funciton (localCompile)\n * @param  {Object} root object with information about the root schema for the current schema\n * @param  {String} ref reference to resolve\n * @return {Object|Function} schema object (if the schema can be inlined) or validation function\n */\nfunction resolve(compile, root, ref) {\n  /* jshint validthis: true */\n  var refVal = this._refs[ref];\n  if (typeof refVal == 'string') {\n    if (this._refs[refVal]) refVal = this._refs[refVal];\n    else return resolve.call(this, compile, root, refVal);\n  }\n\n  refVal = refVal || this._schemas[ref];\n  if (refVal instanceof SchemaObject) {\n    return inlineRef(refVal.schema, this._opts.inlineRefs)\n            ? refVal.schema\n            : refVal.validate || this._compile(refVal);\n  }\n\n  var res = resolveSchema.call(this, root, ref);\n  var schema, v, baseId;\n  if (res) {\n    schema = res.schema;\n    root = res.root;\n    baseId = res.baseId;\n  }\n\n  if (schema instanceof SchemaObject) {\n    v = schema.validate || compile.call(this, schema.schema, root, undefined, baseId);\n  } else if (schema !== undefined) {\n    v = inlineRef(schema, this._opts.inlineRefs)\n        ? schema\n        : compile.call(this, schema, root, undefined, baseId);\n  }\n\n  return v;\n}\n\n\n/**\n * Resolve schema, its root and baseId\n * @this Ajv\n * @param  {Object} root root object with properties schema, refVal, refs\n * @param  {String} ref  reference to resolve\n * @return {Object} object with properties schema, root, baseId\n */\nfunction resolveSchema(root, ref) {\n  /* jshint validthis: true */\n  var p = url.parse(ref, false, true)\n    , refPath = _getFullPath(p)\n    , baseId = getFullPath(this._getId(root.schema));\n  if (refPath !== baseId) {\n    var id = normalizeId(refPath);\n    var refVal = this._refs[id];\n    if (typeof refVal == 'string') {\n      return resolveRecursive.call(this, root, refVal, p);\n    } else if (refVal instanceof SchemaObject) {\n      if (!refVal.validate) this._compile(refVal);\n      root = refVal;\n    } else {\n      refVal = this._schemas[id];\n      if (refVal instanceof SchemaObject) {\n        if (!refVal.validate) this._compile(refVal);\n        if (id == normalizeId(ref))\n          return { schema: refVal, root: root, baseId: baseId };\n        root = refVal;\n      } else {\n        return;\n      }\n    }\n    if (!root.schema) return;\n    baseId = getFullPath(this._getId(root.schema));\n  }\n  return getJsonPointer.call(this, p, baseId, root.schema, root);\n}\n\n\n/* @this Ajv */\nfunction resolveRecursive(root, ref, parsedRef) {\n  /* jshint validthis: true */\n  var res = resolveSchema.call(this, root, ref);\n  if (res) {\n    var schema = res.schema;\n    var baseId = res.baseId;\n    root = res.root;\n    var id = this._getId(schema);\n    if (id) baseId = resolveUrl(baseId, id);\n    return getJsonPointer.call(this, parsedRef, baseId, schema, root);\n  }\n}\n\n\nvar PREVENT_SCOPE_CHANGE = util.toHash(['properties', 'patternProperties', 'enum', 'dependencies', 'definitions']);\n/* @this Ajv */\nfunction getJsonPointer(parsedRef, baseId, schema, root) {\n  /* jshint validthis: true */\n  parsedRef.hash = parsedRef.hash || '';\n  if (parsedRef.hash.slice(0,2) != '#/') return;\n  var parts = parsedRef.hash.split('/');\n\n  for (var i = 1; i < parts.length; i++) {\n    var part = parts[i];\n    if (part) {\n      part = util.unescapeFragment(part);\n      schema = schema[part];\n      if (schema === undefined) break;\n      var id;\n      if (!PREVENT_SCOPE_CHANGE[part]) {\n        id = this._getId(schema);\n        if (id) baseId = resolveUrl(baseId, id);\n        if (schema.$ref) {\n          var $ref = resolveUrl(baseId, schema.$ref);\n          var res = resolveSchema.call(this, root, $ref);\n          if (res) {\n            schema = res.schema;\n            root = res.root;\n            baseId = res.baseId;\n          }\n        }\n      }\n    }\n  }\n  if (schema !== undefined && schema !== root.schema)\n    return { schema: schema, root: root, baseId: baseId };\n}\n\n\nvar SIMPLE_INLINED = util.toHash([\n  'type', 'format', 'pattern',\n  'maxLength', 'minLength',\n  'maxProperties', 'minProperties',\n  'maxItems', 'minItems',\n  'maximum', 'minimum',\n  'uniqueItems', 'multipleOf',\n  'required', 'enum'\n]);\nfunction inlineRef(schema, limit) {\n  if (limit === false) return false;\n  if (limit === undefined || limit === true) return checkNoRef(schema);\n  else if (limit) return countKeys(schema) <= limit;\n}\n\n\nfunction checkNoRef(schema) {\n  var item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return false;\n      item = schema[key];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  }\n  return true;\n}\n\n\nfunction countKeys(schema) {\n  var count = 0, item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object') count += countKeys(item);\n      if (count == Infinity) return Infinity;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return Infinity;\n      if (SIMPLE_INLINED[key]) {\n        count++;\n      } else {\n        item = schema[key];\n        if (typeof item == 'object') count += countKeys(item) + 1;\n        if (count == Infinity) return Infinity;\n      }\n    }\n  }\n  return count;\n}\n\n\nfunction getFullPath(id, normalize) {\n  if (normalize !== false) id = normalizeId(id);\n  var p = url.parse(id, false, true);\n  return _getFullPath(p);\n}\n\n\nfunction _getFullPath(p) {\n  var protocolSeparator = p.protocol || p.href.slice(0,2) == '//' ? '//' : '';\n  return (p.protocol||'') + protocolSeparator + (p.host||'') + (p.path||'')  + '#';\n}\n\n\nvar TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n  return id ? id.replace(TRAILING_SLASH_HASH, '') : '';\n}\n\n\nfunction resolveUrl(baseId, id) {\n  id = normalizeId(id);\n  return url.resolve(baseId, id);\n}\n\n\n/* @this Ajv */\nfunction resolveIds(schema) {\n  var schemaId = normalizeId(this._getId(schema));\n  var baseIds = {'': schemaId};\n  var fullPaths = {'': getFullPath(schemaId, false)};\n  var localRefs = {};\n  var self = this;\n\n  traverse(schema, {allKeys: true}, function(sch, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n    if (jsonPtr === '') return;\n    var id = self._getId(sch);\n    var baseId = baseIds[parentJsonPtr];\n    var fullPath = fullPaths[parentJsonPtr] + '/' + parentKeyword;\n    if (keyIndex !== undefined)\n      fullPath += '/' + (typeof keyIndex == 'number' ? keyIndex : util.escapeFragment(keyIndex));\n\n    if (typeof id == 'string') {\n      id = baseId = normalizeId(baseId ? url.resolve(baseId, id) : id);\n\n      var refVal = self._refs[id];\n      if (typeof refVal == 'string') refVal = self._refs[refVal];\n      if (refVal && refVal.schema) {\n        if (!equal(sch, refVal.schema))\n          throw new Error('id \"' + id + '\" resolves to more than one schema');\n      } else if (id != normalizeId(fullPath)) {\n        if (id[0] == '#') {\n          if (localRefs[id] && !equal(sch, localRefs[id]))\n            throw new Error('id \"' + id + '\" resolves to more than one schema');\n          localRefs[id] = sch;\n        } else {\n          self._refs[id] = fullPath;\n        }\n      }\n    }\n    baseIds[jsonPtr] = baseId;\n    fullPaths[jsonPtr] = fullPath;\n  });\n\n  return localRefs;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  var arrA = Array.isArray(a)\n    , arrB = Array.isArray(b)\n    , i;\n\n  if (arrA && arrB) {\n    if (a.length != b.length) return false;\n    for (i = 0; i < a.length; i++)\n      if (!equal(a[i], b[i])) return false;\n    return true;\n  }\n\n  if (arrA != arrB) return false;\n\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    var keys = Object.keys(a);\n    if (keys.length !== Object.keys(b).length) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    if (dateA != dateB) return false;\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    if (regexpA != regexpB) return false;\n\n    for (i = 0; i < keys.length; i++)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = 0; i < keys.length; i++)\n      if(!equal(a[keys[i]], b[keys[i]])) return false;\n\n    return true;\n  }\n\n  return false;\n};\n","'use strict';\n\n\nmodule.exports = {\n  copy: copy,\n  checkDataType: checkDataType,\n  checkDataTypes: checkDataTypes,\n  coerceToTypes: coerceToTypes,\n  toHash: toHash,\n  getProperty: getProperty,\n  escapeQuotes: escapeQuotes,\n  equal: require('fast-deep-equal'),\n  ucs2length: require('./ucs2length'),\n  varOccurences: varOccurences,\n  varReplace: varReplace,\n  cleanUpCode: cleanUpCode,\n  finalCleanUpCode: finalCleanUpCode,\n  schemaHasRules: schemaHasRules,\n  schemaHasRulesExcept: schemaHasRulesExcept,\n  toQuotedString: toQuotedString,\n  getPathExpr: getPathExpr,\n  getPath: getPath,\n  getData: getData,\n  unescapeFragment: unescapeFragment,\n  unescapeJsonPointer: unescapeJsonPointer,\n  escapeFragment: escapeFragment,\n  escapeJsonPointer: escapeJsonPointer\n};\n\n\nfunction copy(o, to) {\n  to = to || {};\n  for (var key in o) to[key] = o[key];\n  return to;\n}\n\n\nfunction checkDataType(dataType, data, negate) {\n  var EQUAL = negate ? ' !== ' : ' === '\n    , AND = negate ? ' || ' : ' && '\n    , OK = negate ? '!' : ''\n    , NOT = negate ? '' : '!';\n  switch (dataType) {\n    case 'null': return data + EQUAL + 'null';\n    case 'array': return OK + 'Array.isArray(' + data + ')';\n    case 'object': return '(' + OK + data + AND +\n                          'typeof ' + data + EQUAL + '\"object\"' + AND +\n                          NOT + 'Array.isArray(' + data + '))';\n    case 'integer': return '(typeof ' + data + EQUAL + '\"number\"' + AND +\n                           NOT + '(' + data + ' % 1)' +\n                           AND + data + EQUAL + data + ')';\n    default: return 'typeof ' + data + EQUAL + '\"' + dataType + '\"';\n  }\n}\n\n\nfunction checkDataTypes(dataTypes, data) {\n  switch (dataTypes.length) {\n    case 1: return checkDataType(dataTypes[0], data, true);\n    default:\n      var code = '';\n      var types = toHash(dataTypes);\n      if (types.array && types.object) {\n        code = types.null ? '(': '(!' + data + ' || ';\n        code += 'typeof ' + data + ' !== \"object\")';\n        delete types.null;\n        delete types.array;\n        delete types.object;\n      }\n      if (types.number) delete types.integer;\n      for (var t in types)\n        code += (code ? ' && ' : '' ) + checkDataType(t, data, true);\n\n      return code;\n  }\n}\n\n\nvar COERCE_TO_TYPES = toHash([ 'string', 'number', 'integer', 'boolean', 'null' ]);\nfunction coerceToTypes(optionCoerceTypes, dataTypes) {\n  if (Array.isArray(dataTypes)) {\n    var types = [];\n    for (var i=0; i<dataTypes.length; i++) {\n      var t = dataTypes[i];\n      if (COERCE_TO_TYPES[t]) types[types.length] = t;\n      else if (optionCoerceTypes === 'array' && t === 'array') types[types.length] = t;\n    }\n    if (types.length) return types;\n  } else if (COERCE_TO_TYPES[dataTypes]) {\n    return [dataTypes];\n  } else if (optionCoerceTypes === 'array' && dataTypes === 'array') {\n    return ['array'];\n  }\n}\n\n\nfunction toHash(arr) {\n  var hash = {};\n  for (var i=0; i<arr.length; i++) hash[arr[i]] = true;\n  return hash;\n}\n\n\nvar IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nvar SINGLE_QUOTE = /'|\\\\/g;\nfunction getProperty(key) {\n  return typeof key == 'number'\n          ? '[' + key + ']'\n          : IDENTIFIER.test(key)\n            ? '.' + key\n            : \"['\" + escapeQuotes(key) + \"']\";\n}\n\n\nfunction escapeQuotes(str) {\n  return str.replace(SINGLE_QUOTE, '\\\\$&')\n            .replace(/\\n/g, '\\\\n')\n            .replace(/\\r/g, '\\\\r')\n            .replace(/\\f/g, '\\\\f')\n            .replace(/\\t/g, '\\\\t');\n}\n\n\nfunction varOccurences(str, dataVar) {\n  dataVar += '[^0-9]';\n  var matches = str.match(new RegExp(dataVar, 'g'));\n  return matches ? matches.length : 0;\n}\n\n\nfunction varReplace(str, dataVar, expr) {\n  dataVar += '([^0-9])';\n  expr = expr.replace(/\\$/g, '$$$$');\n  return str.replace(new RegExp(dataVar, 'g'), expr + '$1');\n}\n\n\nvar EMPTY_ELSE = /else\\s*{\\s*}/g\n  , EMPTY_IF_NO_ELSE = /if\\s*\\([^)]+\\)\\s*\\{\\s*\\}(?!\\s*else)/g\n  , EMPTY_IF_WITH_ELSE = /if\\s*\\(([^)]+)\\)\\s*\\{\\s*\\}\\s*else(?!\\s*if)/g;\nfunction cleanUpCode(out) {\n  return out.replace(EMPTY_ELSE, '')\n            .replace(EMPTY_IF_NO_ELSE, '')\n            .replace(EMPTY_IF_WITH_ELSE, 'if (!($1))');\n}\n\n\nvar ERRORS_REGEXP = /[^v.]errors/g\n  , REMOVE_ERRORS = /var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g\n  , REMOVE_ERRORS_ASYNC = /var errors = 0;|var vErrors = null;/g\n  , RETURN_VALID = 'return errors === 0;'\n  , RETURN_TRUE = 'validate.errors = null; return true;'\n  , RETURN_ASYNC = /if \\(errors === 0\\) return data;\\s*else throw new ValidationError\\(vErrors\\);/\n  , RETURN_DATA_ASYNC = 'return data;'\n  , ROOTDATA_REGEXP = /[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g\n  , REMOVE_ROOTDATA = /if \\(rootData === undefined\\) rootData = data;/;\n\nfunction finalCleanUpCode(out, async) {\n  var matches = out.match(ERRORS_REGEXP);\n  if (matches && matches.length == 2) {\n    out = async\n          ? out.replace(REMOVE_ERRORS_ASYNC, '')\n               .replace(RETURN_ASYNC, RETURN_DATA_ASYNC)\n          : out.replace(REMOVE_ERRORS, '')\n               .replace(RETURN_VALID, RETURN_TRUE);\n  }\n\n  matches = out.match(ROOTDATA_REGEXP);\n  if (!matches || matches.length !== 3) return out;\n  return out.replace(REMOVE_ROOTDATA, '');\n}\n\n\nfunction schemaHasRules(schema, rules) {\n  if (typeof schema == 'boolean') return !schema;\n  for (var key in schema) if (rules[key]) return true;\n}\n\n\nfunction schemaHasRulesExcept(schema, rules, exceptKeyword) {\n  if (typeof schema == 'boolean') return !schema && exceptKeyword != 'not';\n  for (var key in schema) if (key != exceptKeyword && rules[key]) return true;\n}\n\n\nfunction toQuotedString(str) {\n  return '\\'' + escapeQuotes(str) + '\\'';\n}\n\n\nfunction getPathExpr(currentPath, expr, jsonPointers, isNumber) {\n  var path = jsonPointers // false by default\n              ? '\\'/\\' + ' + expr + (isNumber ? '' : '.replace(/~/g, \\'~0\\').replace(/\\\\//g, \\'~1\\')')\n              : (isNumber ? '\\'[\\' + ' + expr + ' + \\']\\'' : '\\'[\\\\\\'\\' + ' + expr + ' + \\'\\\\\\']\\'');\n  return joinPaths(currentPath, path);\n}\n\n\nfunction getPath(currentPath, prop, jsonPointers) {\n  var path = jsonPointers // false by default\n              ? toQuotedString('/' + escapeJsonPointer(prop))\n              : toQuotedString(getProperty(prop));\n  return joinPaths(currentPath, path);\n}\n\n\nvar JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nvar RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, lvl, paths) {\n  var up, jsonPointer, data, matches;\n  if ($data === '') return 'rootData';\n  if ($data[0] == '/') {\n    if (!JSON_POINTER.test($data)) throw new Error('Invalid JSON-pointer: ' + $data);\n    jsonPointer = $data;\n    data = 'rootData';\n  } else {\n    matches = $data.match(RELATIVE_JSON_POINTER);\n    if (!matches) throw new Error('Invalid JSON-pointer: ' + $data);\n    up = +matches[1];\n    jsonPointer = matches[2];\n    if (jsonPointer == '#') {\n      if (up >= lvl) throw new Error('Cannot access property/index ' + up + ' levels up, current level is ' + lvl);\n      return paths[lvl - up];\n    }\n\n    if (up > lvl) throw new Error('Cannot access data ' + up + ' levels up, current level is ' + lvl);\n    data = 'data' + ((lvl - up) || '');\n    if (!jsonPointer) return data;\n  }\n\n  var expr = data;\n  var segments = jsonPointer.split('/');\n  for (var i=0; i<segments.length; i++) {\n    var segment = segments[i];\n    if (segment) {\n      data += getProperty(unescapeJsonPointer(segment));\n      expr += ' && ' + data;\n    }\n  }\n  return expr;\n}\n\n\nfunction joinPaths (a, b) {\n  if (a == '\"\"') return b;\n  return (a + ' + ' + b).replace(/' \\+ '/g, '');\n}\n\n\nfunction unescapeFragment(str) {\n  return unescapeJsonPointer(decodeURIComponent(str));\n}\n\n\nfunction escapeFragment(str) {\n  return encodeURIComponent(escapeJsonPointer(str));\n}\n\n\nfunction escapeJsonPointer(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n\n\nfunction unescapeJsonPointer(str) {\n  return str.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n","'use strict';\n\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nmodule.exports = function ucs2length(str) {\n  var length = 0\n    , len = str.length\n    , pos = 0\n    , value;\n  while (pos < len) {\n    length++;\n    value = str.charCodeAt(pos++);\n    if (value >= 0xD800 && value <= 0xDBFF && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos);\n      if ((value & 0xFC00) == 0xDC00) pos++; // low surrogate\n    }\n  }\n  return length;\n};\n","'use strict';\n\nvar util = require('./util');\n\nmodule.exports = SchemaObject;\n\nfunction SchemaObject(obj) {\n  util.copy(obj, this);\n}\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n  _traverse(opts, cb, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, cb, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    cb(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, cb, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, cb, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, cb, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","'use strict';\n\nvar resolve = require('./resolve');\n\nmodule.exports = {\n  Validation: errorSubclass(ValidationError),\n  MissingRef: errorSubclass(MissingRefError)\n};\n\n\nfunction ValidationError(errors) {\n  this.message = 'validation failed';\n  this.errors = errors;\n  this.ajv = this.validation = true;\n}\n\n\nMissingRefError.message = function (baseId, ref) {\n  return 'can\\'t resolve reference ' + ref + ' from id ' + baseId;\n};\n\n\nfunction MissingRefError(baseId, ref, message) {\n  this.message = message || MissingRefError.message(baseId, ref);\n  this.missingRef = resolve.url(baseId, ref);\n  this.missingSchema = resolve.normalizeId(resolve.fullPath(this.missingRef));\n}\n\n\nfunction errorSubclass(Subclass) {\n  Subclass.prototype = Object.create(Error.prototype);\n  Subclass.prototype.constructor = Subclass;\n  return Subclass;\n}\n","var json = typeof JSON !== 'undefined' ? JSON : require('jsonify');\n\nmodule.exports = function (obj, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var space = opts.space || '';\n    if (typeof space === 'number') space = Array(space+1).join(' ');\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n    var replacer = opts.replacer || function(key, value) { return value; };\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (parent, key, node, level) {\n        var indent = space ? ('\\n' + new Array(level + 1).join(space)) : '';\n        var colonSeparator = space ? ': ' : ':';\n\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        node = replacer.call(parent, key, node);\n\n        if (node === undefined) {\n            return;\n        }\n        if (typeof node !== 'object' || node === null) {\n            return json.stringify(node);\n        }\n        if (isArray(node)) {\n            var out = [];\n            for (var i = 0; i < node.length; i++) {\n                var item = stringify(node, i, node[i], level+1) || json.stringify(null);\n                out.push(indent + space + item);\n            }\n            return '[' + out.join(',') + indent + ']';\n        }\n        else {\n            if (seen.indexOf(node) !== -1) {\n                if (cycles) return json.stringify('__cycle__');\n                throw new TypeError('Converting circular structure to JSON');\n            }\n            else seen.push(node);\n\n            var keys = objectKeys(node).sort(cmp && cmp(node));\n            var out = [];\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                var value = stringify(node, key, node[key], level+1);\n\n                if(!value) continue;\n\n                var keyValue = json.stringify(key)\n                    + colonSeparator\n                    + value;\n                ;\n                out.push(indent + space + keyValue);\n            }\n            seen.splice(seen.indexOf(node), 1);\n            return '{' + out.join(',') + indent + '}';\n        }\n    })({ '': obj }, '', obj, 0);\n};\n\nvar isArray = Array.isArray || function (x) {\n    return {}.toString.call(x) === '[object Array]';\n};\n\nvar objectKeys = Object.keys || function (obj) {\n    var has = Object.prototype.hasOwnProperty || function () { return true };\n    var keys = [];\n    for (var key in obj) {\n        if (has.call(obj, key)) keys.push(key);\n    }\n    return keys;\n};\n","exports.parse = require('./lib/parse');\nexports.stringify = require('./lib/stringify');\n","var at, // The index of the current character\n    ch, // The current character\n    escapee = {\n        '\"':  '\"',\n        '\\\\': '\\\\',\n        '/':  '/',\n        b:    '\\b',\n        f:    '\\f',\n        n:    '\\n',\n        r:    '\\r',\n        t:    '\\t'\n    },\n    text,\n\n    error = function (m) {\n        // Call error when something is wrong.\n        throw {\n            name:    'SyntaxError',\n            message: m,\n            at:      at,\n            text:    text\n        };\n    },\n    \n    next = function (c) {\n        // If a c parameter is provided, verify that it matches the current character.\n        if (c && c !== ch) {\n            error(\"Expected '\" + c + \"' instead of '\" + ch + \"'\");\n        }\n        \n        // Get the next character. When there are no more characters,\n        // return the empty string.\n        \n        ch = text.charAt(at);\n        at += 1;\n        return ch;\n    },\n    \n    number = function () {\n        // Parse a number value.\n        var number,\n            string = '';\n        \n        if (ch === '-') {\n            string = '-';\n            next('-');\n        }\n        while (ch >= '0' && ch <= '9') {\n            string += ch;\n            next();\n        }\n        if (ch === '.') {\n            string += '.';\n            while (next() && ch >= '0' && ch <= '9') {\n                string += ch;\n            }\n        }\n        if (ch === 'e' || ch === 'E') {\n            string += ch;\n            next();\n            if (ch === '-' || ch === '+') {\n                string += ch;\n                next();\n            }\n            while (ch >= '0' && ch <= '9') {\n                string += ch;\n                next();\n            }\n        }\n        number = +string;\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    },\n    \n    string = function () {\n        // Parse a string value.\n        var hex,\n            i,\n            string = '',\n            uffff;\n        \n        // When parsing for string values, we must look for \" and \\ characters.\n        if (ch === '\"') {\n            while (next()) {\n                if (ch === '\"') {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    },\n\n    white = function () {\n\n// Skip whitespace.\n\n        while (ch && ch <= ' ') {\n            next();\n        }\n    },\n\n    word = function () {\n\n// true, false, or null.\n\n        switch (ch) {\n        case 't':\n            next('t');\n            next('r');\n            next('u');\n            next('e');\n            return true;\n        case 'f':\n            next('f');\n            next('a');\n            next('l');\n            next('s');\n            next('e');\n            return false;\n        case 'n':\n            next('n');\n            next('u');\n            next('l');\n            next('l');\n            return null;\n        }\n        error(\"Unexpected '\" + ch + \"'\");\n    },\n\n    value,  // Place holder for the value function.\n\n    array = function () {\n\n// Parse an array value.\n\n        var array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            if (ch === ']') {\n                next(']');\n                return array;   // empty array\n            }\n            while (ch) {\n                array.push(value());\n                white();\n                if (ch === ']') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    },\n\n    object = function () {\n\n// Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            if (ch === '}') {\n                next('}');\n                return object;   // empty object\n            }\n            while (ch) {\n                key = string();\n                white();\n                next(':');\n                if (Object.hasOwnProperty.call(object, key)) {\n                    error('Duplicate key \"' + key + '\"');\n                }\n                object[key] = value();\n                white();\n                if (ch === '}') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\nvalue = function () {\n\n// Parse a JSON value. It could be an object, an array, a string, a number,\n// or a word.\n\n    white();\n    switch (ch) {\n    case '{':\n        return object();\n    case '[':\n        return array();\n    case '\"':\n        return string();\n    case '-':\n        return number();\n    default:\n        return ch >= '0' && ch <= '9' ? number() : word();\n    }\n};\n\n// Return the json_parse function. It will have access to all of the above\n// functions and variables.\n\nmodule.exports = function (source, reviver) {\n    var result;\n    \n    text = source;\n    at = 0;\n    ch = ' ';\n    result = value();\n    white();\n    if (ch) {\n        error(\"Syntax error\");\n    }\n\n    // If there is a reviver function, we recursively walk the new structure,\n    // passing each name/value pair to the reviver function for possible\n    // transformation, starting with a temporary root object that holds the result\n    // in an empty key. If there is not a reviver function, we simply return the\n    // result.\n\n    return typeof reviver === 'function' ? (function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && typeof value === 'object') {\n            for (k in value) {\n                if (Object.prototype.hasOwnProperty.call(value, k)) {\n                    v = walk(value, k);\n                    if (v !== undefined) {\n                        value[k] = v;\n                    } else {\n                        delete value[k];\n                    }\n                }\n            }\n        }\n        return reviver.call(holder, key, value);\n    }({'': result}, '')) : result;\n};\n","var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n    escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n    gap,\n    indent,\n    meta = {    // table of character substitutions\n        '\\b': '\\\\b',\n        '\\t': '\\\\t',\n        '\\n': '\\\\n',\n        '\\f': '\\\\f',\n        '\\r': '\\\\r',\n        '\"' : '\\\\\"',\n        '\\\\': '\\\\\\\\'\n    },\n    rep;\n\nfunction quote(string) {\n    // If the string contains no control characters, no quote characters, and no\n    // backslash characters, then we can safely slap some quotes around it.\n    // Otherwise we must also replace the offending characters with safe escape\n    // sequences.\n    \n    escapable.lastIndex = 0;\n    return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n        var c = meta[a];\n        return typeof c === 'string' ? c :\n            '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    }) + '\"' : '\"' + string + '\"';\n}\n\nfunction str(key, holder) {\n    // Produce a string from holder[key].\n    var i,          // The loop counter.\n        k,          // The member key.\n        v,          // The member value.\n        length,\n        mind = gap,\n        partial,\n        value = holder[key];\n    \n    // If the value has a toJSON method, call it to obtain a replacement value.\n    if (value && typeof value === 'object' &&\n            typeof value.toJSON === 'function') {\n        value = value.toJSON(key);\n    }\n    \n    // If we were called with a replacer function, then call the replacer to\n    // obtain a replacement value.\n    if (typeof rep === 'function') {\n        value = rep.call(holder, key, value);\n    }\n    \n    // What happens next depends on the value's type.\n    switch (typeof value) {\n        case 'string':\n            return quote(value);\n        \n        case 'number':\n            // JSON numbers must be finite. Encode non-finite numbers as null.\n            return isFinite(value) ? String(value) : 'null';\n        \n        case 'boolean':\n        case 'null':\n            // If the value is a boolean or null, convert it to a string. Note:\n            // typeof null does not produce 'null'. The case is included here in\n            // the remote chance that this gets fixed someday.\n            return String(value);\n            \n        case 'object':\n            if (!value) return 'null';\n            gap += indent;\n            partial = [];\n            \n            // Array.isArray\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n                \n                // Join all of the elements together, separated with commas, and\n                // wrap them in brackets.\n                v = partial.length === 0 ? '[]' : gap ?\n                    '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                    '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n            \n            // If the replacer is an array, use it to select the members to be\n            // stringified.\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    k = rep[i];\n                    if (typeof k === 'string') {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n            else {\n                // Otherwise, iterate through all of the keys in the object.\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n            \n        // Join all of the member texts together, separated with commas,\n        // and wrap them in braces.\n\n        v = partial.length === 0 ? '{}' : gap ?\n            '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n            '{' + partial.join(',') + '}';\n        gap = mind;\n        return v;\n    }\n}\n\nmodule.exports = function (value, replacer, space) {\n    var i;\n    gap = '';\n    indent = '';\n    \n    // If the space parameter is a number, make an indent string containing that\n    // many spaces.\n    if (typeof space === 'number') {\n        for (i = 0; i < space; i += 1) {\n            indent += ' ';\n        }\n    }\n    // If the space parameter is a string, it will be used as the indent string.\n    else if (typeof space === 'string') {\n        indent = space;\n    }\n\n    // If there is a replacer, it must be a function or an array.\n    // Otherwise, throw an error.\n    rep = replacer;\n    if (replacer && typeof replacer !== 'function'\n    && (typeof replacer !== 'object' || typeof replacer.length !== 'number')) {\n        throw new Error('JSON.stringify');\n    }\n    \n    // Make a fake root object containing our value under the key of ''.\n    // Return the result of stringifying the value.\n    return str('', {'': value});\n};\n","'use strict';\nmodule.exports = function generate_validate(it, $keyword, $ruleType) {\n  var out = '';\n  var $async = it.schema.$async === true,\n    $refKeywords = it.util.schemaHasRulesExcept(it.schema, it.RULES.all, '$ref'),\n    $id = it.self._getId(it.schema);\n  if (it.isTop) {\n    if ($async) {\n      it.async = true;\n      var $es7 = it.opts.async == 'es7';\n      it.yieldAwait = $es7 ? 'await' : 'yield';\n    }\n    out += ' var validate = ';\n    if ($async) {\n      if ($es7) {\n        out += ' (async function ';\n      } else {\n        if (it.opts.async != '*') {\n          out += 'co.wrap';\n        }\n        out += '(function* ';\n      }\n    } else {\n      out += ' (function ';\n    }\n    out += ' (data, dataPath, parentData, parentDataProperty, rootData) { \\'use strict\\'; ';\n    if ($id && (it.opts.sourceCode || it.opts.processCode)) {\n      out += ' ' + ('/\\*# sourceURL=' + $id + ' */') + ' ';\n    }\n  }\n  if (typeof it.schema == 'boolean' || !($refKeywords || it.schema.$ref)) {\n    var $keyword = 'false schema';\n    var $lvl = it.level;\n    var $dataLvl = it.dataLevel;\n    var $schema = it.schema[$keyword];\n    var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n    var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n    var $breakOnError = !it.opts.allErrors;\n    var $errorKeyword;\n    var $data = 'data' + ($dataLvl || '');\n    var $valid = 'valid' + $lvl;\n    if (it.schema === false) {\n      if (it.isTop) {\n        $breakOnError = true;\n      } else {\n        out += ' var ' + ($valid) + ' = false; ';\n      }\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'false schema') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'boolean schema is false\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n    } else {\n      if (it.isTop) {\n        if ($async) {\n          out += ' return data; ';\n        } else {\n          out += ' validate.errors = null; return true; ';\n        }\n      } else {\n        out += ' var ' + ($valid) + ' = true; ';\n      }\n    }\n    if (it.isTop) {\n      out += ' }); return validate; ';\n    }\n    return out;\n  }\n  if (it.isTop) {\n    var $top = it.isTop,\n      $lvl = it.level = 0,\n      $dataLvl = it.dataLevel = 0,\n      $data = 'data';\n    it.rootId = it.resolve.fullPath(it.self._getId(it.root.schema));\n    it.baseId = it.baseId || it.rootId;\n    delete it.isTop;\n    it.dataPathArr = [undefined];\n    out += ' var vErrors = null; ';\n    out += ' var errors = 0;     ';\n    out += ' if (rootData === undefined) rootData = data; ';\n  } else {\n    var $lvl = it.level,\n      $dataLvl = it.dataLevel,\n      $data = 'data' + ($dataLvl || '');\n    if ($id) it.baseId = it.resolve.url(it.baseId, $id);\n    if ($async && !it.async) throw new Error('async schema in sync schema');\n    out += ' var errs_' + ($lvl) + ' = errors;';\n  }\n  var $valid = 'valid' + $lvl,\n    $breakOnError = !it.opts.allErrors,\n    $closingBraces1 = '',\n    $closingBraces2 = '';\n  var $errorKeyword;\n  var $typeSchema = it.schema.type,\n    $typeIsArray = Array.isArray($typeSchema);\n  if ($typeIsArray && $typeSchema.length == 1) {\n    $typeSchema = $typeSchema[0];\n    $typeIsArray = false;\n  }\n  if (it.schema.$ref && $refKeywords) {\n    if (it.opts.extendRefs == 'fail') {\n      throw new Error('$ref: validation keywords used in schema at path \"' + it.errSchemaPath + '\" (see option extendRefs)');\n    } else if (it.opts.extendRefs !== true) {\n      $refKeywords = false;\n      console.warn('$ref: keywords ignored in schema at path \"' + it.errSchemaPath + '\"');\n    }\n  }\n  if ($typeSchema) {\n    if (it.opts.coerceTypes) {\n      var $coerceToTypes = it.util.coerceToTypes(it.opts.coerceTypes, $typeSchema);\n    }\n    var $rulesGroup = it.RULES.types[$typeSchema];\n    if ($coerceToTypes || $typeIsArray || $rulesGroup === true || ($rulesGroup && !$shouldUseGroup($rulesGroup))) {\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type';\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type',\n        $method = $typeIsArray ? 'checkDataTypes' : 'checkDataType';\n      out += ' if (' + (it.util[$method]($typeSchema, $data, true)) + ') { ';\n      if ($coerceToTypes) {\n        var $dataType = 'dataType' + $lvl,\n          $coerced = 'coerced' + $lvl;\n        out += ' var ' + ($dataType) + ' = typeof ' + ($data) + '; ';\n        if (it.opts.coerceTypes == 'array') {\n          out += ' if (' + ($dataType) + ' == \\'object\\' && Array.isArray(' + ($data) + ')) ' + ($dataType) + ' = \\'array\\'; ';\n        }\n        out += ' var ' + ($coerced) + ' = undefined; ';\n        var $bracesCoercion = '';\n        var arr1 = $coerceToTypes;\n        if (arr1) {\n          var $type, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $type = arr1[$i += 1];\n            if ($i) {\n              out += ' if (' + ($coerced) + ' === undefined) { ';\n              $bracesCoercion += '}';\n            }\n            if (it.opts.coerceTypes == 'array' && $type != 'array') {\n              out += ' if (' + ($dataType) + ' == \\'array\\' && ' + ($data) + '.length == 1) { ' + ($coerced) + ' = ' + ($data) + ' = ' + ($data) + '[0]; ' + ($dataType) + ' = typeof ' + ($data) + ';  } ';\n            }\n            if ($type == 'string') {\n              out += ' if (' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\') ' + ($coerced) + ' = \\'\\' + ' + ($data) + '; else if (' + ($data) + ' === null) ' + ($coerced) + ' = \\'\\'; ';\n            } else if ($type == 'number' || $type == 'integer') {\n              out += ' if (' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' === null || (' + ($dataType) + ' == \\'string\\' && ' + ($data) + ' && ' + ($data) + ' == +' + ($data) + ' ';\n              if ($type == 'integer') {\n                out += ' && !(' + ($data) + ' % 1)';\n              }\n              out += ')) ' + ($coerced) + ' = +' + ($data) + '; ';\n            } else if ($type == 'boolean') {\n              out += ' if (' + ($data) + ' === \\'false\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === null) ' + ($coerced) + ' = false; else if (' + ($data) + ' === \\'true\\' || ' + ($data) + ' === 1) ' + ($coerced) + ' = true; ';\n            } else if ($type == 'null') {\n              out += ' if (' + ($data) + ' === \\'\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === false) ' + ($coerced) + ' = null; ';\n            } else if (it.opts.coerceTypes == 'array' && $type == 'array') {\n              out += ' if (' + ($dataType) + ' == \\'string\\' || ' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' == null) ' + ($coerced) + ' = [' + ($data) + ']; ';\n            }\n          }\n        }\n        out += ' ' + ($bracesCoercion) + ' if (' + ($coerced) + ' === undefined) {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else {  ';\n        var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n          $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n        out += ' ' + ($data) + ' = ' + ($coerced) + '; ';\n        if (!$dataLvl) {\n          out += 'if (' + ($parentData) + ' !== undefined)';\n        }\n        out += ' ' + ($parentData) + '[' + ($parentDataProperty) + '] = ' + ($coerced) + '; } ';\n      } else {\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      }\n      out += ' } ';\n    }\n  }\n  if (it.schema.$ref && !$refKeywords) {\n    out += ' ' + (it.RULES.all.$ref.code(it, '$ref')) + ' ';\n    if ($breakOnError) {\n      out += ' } if (errors === ';\n      if ($top) {\n        out += '0';\n      } else {\n        out += 'errs_' + ($lvl);\n      }\n      out += ') { ';\n      $closingBraces2 += '}';\n    }\n  } else {\n    if (it.opts.v5 && it.schema.patternGroups) {\n      console.warn('keyword \"patternGroups\" is deprecated and disabled. Use option patternGroups: true to enable.');\n    }\n    var arr2 = it.RULES;\n    if (arr2) {\n      var $rulesGroup, i2 = -1,\n        l2 = arr2.length - 1;\n      while (i2 < l2) {\n        $rulesGroup = arr2[i2 += 1];\n        if ($shouldUseGroup($rulesGroup)) {\n          if ($rulesGroup.type) {\n            out += ' if (' + (it.util.checkDataType($rulesGroup.type, $data)) + ') { ';\n          }\n          if (it.opts.useDefaults && !it.compositeRule) {\n            if ($rulesGroup.type == 'object' && it.schema.properties) {\n              var $schema = it.schema.properties,\n                $schemaKeys = Object.keys($schema);\n              var arr3 = $schemaKeys;\n              if (arr3) {\n                var $propertyKey, i3 = -1,\n                  l3 = arr3.length - 1;\n                while (i3 < l3) {\n                  $propertyKey = arr3[i3 += 1];\n                  var $sch = $schema[$propertyKey];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + it.util.getProperty($propertyKey);\n                    out += '  if (' + ($passData) + ' === undefined) ' + ($passData) + ' = ';\n                    if (it.opts.useDefaults == 'shared') {\n                      out += ' ' + (it.useDefault($sch.default)) + ' ';\n                    } else {\n                      out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                    }\n                    out += '; ';\n                  }\n                }\n              }\n            } else if ($rulesGroup.type == 'array' && Array.isArray(it.schema.items)) {\n              var arr4 = it.schema.items;\n              if (arr4) {\n                var $sch, $i = -1,\n                  l4 = arr4.length - 1;\n                while ($i < l4) {\n                  $sch = arr4[$i += 1];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + '[' + $i + ']';\n                    out += '  if (' + ($passData) + ' === undefined) ' + ($passData) + ' = ';\n                    if (it.opts.useDefaults == 'shared') {\n                      out += ' ' + (it.useDefault($sch.default)) + ' ';\n                    } else {\n                      out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                    }\n                    out += '; ';\n                  }\n                }\n              }\n            }\n          }\n          var arr5 = $rulesGroup.rules;\n          if (arr5) {\n            var $rule, i5 = -1,\n              l5 = arr5.length - 1;\n            while (i5 < l5) {\n              $rule = arr5[i5 += 1];\n              if ($shouldUseRule($rule)) {\n                var $code = $rule.code(it, $rule.keyword, $rulesGroup.type);\n                if ($code) {\n                  out += ' ' + ($code) + ' ';\n                  if ($breakOnError) {\n                    $closingBraces1 += '}';\n                  }\n                }\n              }\n            }\n          }\n          if ($breakOnError) {\n            out += ' ' + ($closingBraces1) + ' ';\n            $closingBraces1 = '';\n          }\n          if ($rulesGroup.type) {\n            out += ' } ';\n            if ($typeSchema && $typeSchema === $rulesGroup.type && !$coerceToTypes) {\n              out += ' else { ';\n              var $schemaPath = it.schemaPath + '.type',\n                $errSchemaPath = it.errSchemaPath + '/type';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n                if ($typeIsArray) {\n                  out += '' + ($typeSchema.join(\",\"));\n                } else {\n                  out += '' + ($typeSchema);\n                }\n                out += '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should be ';\n                  if ($typeIsArray) {\n                    out += '' + ($typeSchema.join(\",\"));\n                  } else {\n                    out += '' + ($typeSchema);\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n            }\n          }\n          if ($breakOnError) {\n            out += ' if (errors === ';\n            if ($top) {\n              out += '0';\n            } else {\n              out += 'errs_' + ($lvl);\n            }\n            out += ') { ';\n            $closingBraces2 += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces2) + ' ';\n  }\n  if ($top) {\n    if ($async) {\n      out += ' if (errors === 0) return data;           ';\n      out += ' else throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; ';\n      out += ' return errors === 0;       ';\n    }\n    out += ' }); return validate;';\n  } else {\n    out += ' var ' + ($valid) + ' = errors === errs_' + ($lvl) + ';';\n  }\n  out = it.util.cleanUpCode(out);\n  if ($top) {\n    out = it.util.finalCleanUpCode(out, $async);\n  }\n\n  function $shouldUseGroup($rulesGroup) {\n    var rules = $rulesGroup.rules;\n    for (var i = 0; i < rules.length; i++)\n      if ($shouldUseRule(rules[i])) return true;\n  }\n\n  function $shouldUseRule($rule) {\n    return it.schema[$rule.keyword] !== undefined || ($rule.implements && $ruleImlementsSomeKeyword($rule));\n  }\n\n  function $ruleImlementsSomeKeyword($rule) {\n    var impl = $rule.implements;\n    for (var i = 0; i < impl.length; i++)\n      if (it.schema[impl[i]] !== undefined) return true;\n  }\n  return out;\n}\n","\n/**\n * slice() reference.\n */\n\nvar slice = Array.prototype.slice;\n\n/**\n * Expose `co`.\n */\n\nmodule.exports = co['default'] = co.co = co;\n\n/**\n * Wrap the given generator `fn` into a\n * function that returns a promise.\n * This is a separate function so that\n * every `co()` call doesn't create a new,\n * unnecessary closure.\n *\n * @param {GeneratorFunction} fn\n * @return {Function}\n * @api public\n */\n\nco.wrap = function (fn) {\n  createPromise.__generatorFunction__ = fn;\n  return createPromise;\n  function createPromise() {\n    return co.call(this, fn.apply(this, arguments));\n  }\n};\n\n/**\n * Execute the generator function or a generator\n * and return a promise.\n *\n * @param {Function} fn\n * @return {Promise}\n * @api public\n */\n\nfunction co(gen) {\n  var ctx = this;\n  var args = slice.call(arguments, 1)\n\n  // we wrap everything in a promise to avoid promise chaining,\n  // which leads to memory leak errors.\n  // see https://github.com/tj/co/issues/180\n  return new Promise(function(resolve, reject) {\n    if (typeof gen === 'function') gen = gen.apply(ctx, args);\n    if (!gen || typeof gen.next !== 'function') return resolve(gen);\n\n    onFulfilled();\n\n    /**\n     * @param {Mixed} res\n     * @return {Promise}\n     * @api private\n     */\n\n    function onFulfilled(res) {\n      var ret;\n      try {\n        ret = gen.next(res);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n    }\n\n    /**\n     * @param {Error} err\n     * @return {Promise}\n     * @api private\n     */\n\n    function onRejected(err) {\n      var ret;\n      try {\n        ret = gen.throw(err);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n    }\n\n    /**\n     * Get the next value in the generator,\n     * return a promise.\n     *\n     * @param {Object} ret\n     * @return {Promise}\n     * @api private\n     */\n\n    function next(ret) {\n      if (ret.done) return resolve(ret.value);\n      var value = toPromise.call(ctx, ret.value);\n      if (value && isPromise(value)) return value.then(onFulfilled, onRejected);\n      return onRejected(new TypeError('You may only yield a function, promise, generator, array, or object, '\n        + 'but the following object was passed: \"' + String(ret.value) + '\"'));\n    }\n  });\n}\n\n/**\n * Convert a `yield`ed value into a promise.\n *\n * @param {Mixed} obj\n * @return {Promise}\n * @api private\n */\n\nfunction toPromise(obj) {\n  if (!obj) return obj;\n  if (isPromise(obj)) return obj;\n  if (isGeneratorFunction(obj) || isGenerator(obj)) return co.call(this, obj);\n  if ('function' == typeof obj) return thunkToPromise.call(this, obj);\n  if (Array.isArray(obj)) return arrayToPromise.call(this, obj);\n  if (isObject(obj)) return objectToPromise.call(this, obj);\n  return obj;\n}\n\n/**\n * Convert a thunk to a promise.\n *\n * @param {Function}\n * @return {Promise}\n * @api private\n */\n\nfunction thunkToPromise(fn) {\n  var ctx = this;\n  return new Promise(function (resolve, reject) {\n    fn.call(ctx, function (err, res) {\n      if (err) return reject(err);\n      if (arguments.length > 2) res = slice.call(arguments, 1);\n      resolve(res);\n    });\n  });\n}\n\n/**\n * Convert an array of \"yieldables\" to a promise.\n * Uses `Promise.all()` internally.\n *\n * @param {Array} obj\n * @return {Promise}\n * @api private\n */\n\nfunction arrayToPromise(obj) {\n  return Promise.all(obj.map(toPromise, this));\n}\n\n/**\n * Convert an object of \"yieldables\" to a promise.\n * Uses `Promise.all()` internally.\n *\n * @param {Object} obj\n * @return {Promise}\n * @api private\n */\n\nfunction objectToPromise(obj){\n  var results = new obj.constructor();\n  var keys = Object.keys(obj);\n  var promises = [];\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var promise = toPromise.call(this, obj[key]);\n    if (promise && isPromise(promise)) defer(promise, key);\n    else results[key] = obj[key];\n  }\n  return Promise.all(promises).then(function () {\n    return results;\n  });\n\n  function defer(promise, key) {\n    // predefine the key in the result\n    results[key] = undefined;\n    promises.push(promise.then(function (res) {\n      results[key] = res;\n    }));\n  }\n}\n\n/**\n * Check if `obj` is a promise.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isPromise(obj) {\n  return 'function' == typeof obj.then;\n}\n\n/**\n * Check if `obj` is a generator.\n *\n * @param {Mixed} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isGenerator(obj) {\n  return 'function' == typeof obj.next && 'function' == typeof obj.throw;\n}\n\n/**\n * Check if `obj` is a generator function.\n *\n * @param {Mixed} obj\n * @return {Boolean}\n * @api private\n */\nfunction isGeneratorFunction(obj) {\n  var constructor = obj.constructor;\n  if (!constructor) return false;\n  if ('GeneratorFunction' === constructor.name || 'GeneratorFunction' === constructor.displayName) return true;\n  return isGenerator(constructor.prototype);\n}\n\n/**\n * Check for plain object.\n *\n * @param {Mixed} val\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(val) {\n  return Object == val.constructor;\n}\n","'use strict';\n\n\nvar Cache = module.exports = function Cache() {\n  this._cache = {};\n};\n\n\nCache.prototype.put = function Cache_put(key, value) {\n  this._cache[key] = value;\n};\n\n\nCache.prototype.get = function Cache_get(key) {\n  return this._cache[key];\n};\n\n\nCache.prototype.del = function Cache_del(key) {\n  delete this._cache[key];\n};\n\n\nCache.prototype.clear = function Cache_clear() {\n  this._cache = {};\n};\n","'use strict';\n\nvar util = require('./util');\n\nvar DATE = /^\\d\\d\\d\\d-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0,31,29,31,30,31,30,31,31,30,31,30,31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d:\\d\\d)?$/i;\nvar HOSTNAME = /^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URIREF = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\n// uri-template: https://tools.ietf.org/html/rfc6570\nvar URITEMPLATE = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\n// For the source: https://gist.github.com/dperini/729294\n// For test cases: https://mathiasbynens.be/demo/url-regex\n// @todo Delete current URL in favour of the commented out URL rule when this issue is fixed https://github.com/eslint/eslint/issues/7983.\n// var URL = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-?)*[a-z\\u{00a1}-\\u{ffff}0-9]+)(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-?)*[a-z\\u{00a1}-\\u{ffff}0-9]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu;\nvar URL = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar UUID = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nvar JSON_POINTER = /^(?:\\/(?:[^~/]|~0|~1)*)*$|^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;\nvar RELATIVE_JSON_POINTER = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\n\n\nmodule.exports = formats;\n\nfunction formats(mode) {\n  mode = mode == 'full' ? 'full' : 'fast';\n  return util.copy(formats[mode]);\n}\n\n\nformats.fast = {\n  // date: http://tools.ietf.org/html/rfc3339#section-5.6\n  date: /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/,\n  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n  time: /^[0-2]\\d:[0-5]\\d:[0-5]\\d(?:\\.\\d+)?(?:z|[+-]\\d\\d:\\d\\d)?$/i,\n  'date-time': /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s][0-2]\\d:[0-5]\\d:[0-5]\\d(?:\\.\\d+)?(?:z|[+-]\\d\\d:\\d\\d)$/i,\n  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n  uri: /^(?:[a-z][a-z0-9+-.]*)(?::|\\/)\\/?[^\\s]*$/i,\n  'uri-reference': /^(?:(?:[a-z][a-z0-9+-.]*:)?\\/\\/)?[^\\s]*$/i,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  // email (sources from jsen validator):\n  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'willful violation')\n  email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n  hostname: HOSTNAME,\n  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  // optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  // uuid: http://tools.ietf.org/html/rfc4122\n  uuid: UUID,\n  // JSON-pointer: https://tools.ietf.org/html/rfc6901\n  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n  'json-pointer': JSON_POINTER,\n  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nformats.full = {\n  date: date,\n  time: time,\n  'date-time': date_time,\n  uri: uri,\n  'uri-reference': URIREF,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&''*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname: hostname,\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  uuid: UUID,\n  'json-pointer': JSON_POINTER,\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nfunction date(str) {\n  // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n  var matches = str.match(DATE);\n  if (!matches) return false;\n\n  var month = +matches[1];\n  var day = +matches[2];\n  return month >= 1 && month <= 12 && day >= 1 && day <= DAYS[month];\n}\n\n\nfunction time(str, full) {\n  var matches = str.match(TIME);\n  if (!matches) return false;\n\n  var hour = matches[1];\n  var minute = matches[2];\n  var second = matches[3];\n  var timeZone = matches[5];\n  return hour <= 23 && minute <= 59 && second <= 59 && (!full || timeZone);\n}\n\n\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n  // http://tools.ietf.org/html/rfc3339#section-5.6\n  var dateTime = str.split(DATE_TIME_SEPARATOR);\n  return dateTime.length == 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\n\n\nfunction hostname(str) {\n  // https://tools.ietf.org/html/rfc1034#section-3.5\n  // https://tools.ietf.org/html/rfc1123#section-2\n  return str.length <= 255 && HOSTNAME.test(str);\n}\n\n\nvar NOT_URI_FRAGMENT = /\\/|:/;\nfunction uri(str) {\n  // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\n\n\nvar Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n  if (Z_ANCHOR.test(str)) return false;\n  try {\n    new RegExp(str);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n","'use strict';\n\nvar ruleModules = require('./_rules')\n  , toHash = require('./util').toHash;\n\nmodule.exports = function rules() {\n  var RULES = [\n    { type: 'number',\n      rules: [ { 'maximum': ['exclusiveMaximum'] },\n               { 'minimum': ['exclusiveMinimum'] }, 'multipleOf', 'format'] },\n    { type: 'string',\n      rules: [ 'maxLength', 'minLength', 'pattern', 'format' ] },\n    { type: 'array',\n      rules: [ 'maxItems', 'minItems', 'uniqueItems', 'contains', 'items' ] },\n    { type: 'object',\n      rules: [ 'maxProperties', 'minProperties', 'required', 'dependencies', 'propertyNames',\n               { 'properties': ['additionalProperties', 'patternProperties'] } ] },\n    { rules: [ '$ref', 'const', 'enum', 'not', 'anyOf', 'oneOf', 'allOf' ] }\n  ];\n\n  var ALL = [ 'type' ];\n  var KEYWORDS = [\n    'additionalItems', '$schema', 'id', 'title',\n    'description', 'default', 'definitions'\n  ];\n  var TYPES = [ 'number', 'integer', 'string', 'array', 'object', 'boolean', 'null' ];\n  RULES.all = toHash(ALL);\n  RULES.types = toHash(TYPES);\n\n  RULES.forEach(function (group) {\n    group.rules = group.rules.map(function (keyword) {\n      var implKeywords;\n      if (typeof keyword == 'object') {\n        var key = Object.keys(keyword)[0];\n        implKeywords = keyword[key];\n        keyword = key;\n        implKeywords.forEach(function (k) {\n          ALL.push(k);\n          RULES.all[k] = true;\n        });\n      }\n      ALL.push(keyword);\n      var rule = RULES.all[keyword] = {\n        keyword: keyword,\n        code: ruleModules[keyword],\n        implements: implKeywords\n      };\n      return rule;\n    });\n\n    if (group.type) RULES.types[group.type] = group;\n  });\n\n  RULES.keywords = toHash(ALL.concat(KEYWORDS));\n  RULES.custom = {};\n\n  return RULES;\n};\n","'use strict';\n\n//all requires must be explicit because browserify won't work with dynamic requires\nmodule.exports = {\n  '$ref': require('../dotjs/ref'),\n  allOf: require('../dotjs/allOf'),\n  anyOf: require('../dotjs/anyOf'),\n  const: require('../dotjs/const'),\n  contains: require('../dotjs/contains'),\n  dependencies: require('../dotjs/dependencies'),\n  'enum': require('../dotjs/enum'),\n  format: require('../dotjs/format'),\n  items: require('../dotjs/items'),\n  maximum: require('../dotjs/_limit'),\n  minimum: require('../dotjs/_limit'),\n  maxItems: require('../dotjs/_limitItems'),\n  minItems: require('../dotjs/_limitItems'),\n  maxLength: require('../dotjs/_limitLength'),\n  minLength: require('../dotjs/_limitLength'),\n  maxProperties: require('../dotjs/_limitProperties'),\n  minProperties: require('../dotjs/_limitProperties'),\n  multipleOf: require('../dotjs/multipleOf'),\n  not: require('../dotjs/not'),\n  oneOf: require('../dotjs/oneOf'),\n  pattern: require('../dotjs/pattern'),\n  properties: require('../dotjs/properties'),\n  propertyNames: require('../dotjs/propertyNames'),\n  required: require('../dotjs/required'),\n  uniqueItems: require('../dotjs/uniqueItems'),\n  validate: require('../dotjs/validate')\n};\n","'use strict';\nmodule.exports = function generate_ref(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $async, $refCode;\n  if ($schema == '#' || $schema == '#/') {\n    if (it.isRoot) {\n      $async = it.async;\n      $refCode = 'validate';\n    } else {\n      $async = it.root.schema.$async === true;\n      $refCode = 'root.refVal[0]';\n    }\n  } else {\n    var $refVal = it.resolveRef(it.baseId, $schema, it.isRoot);\n    if ($refVal === undefined) {\n      var $message = it.MissingRefError.message(it.baseId, $schema);\n      if (it.opts.missingRefs == 'fail') {\n        console.error($message);\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('$ref') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { ref: \\'' + (it.util.escapeQuotes($schema)) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'can\\\\\\'t resolve reference ' + (it.util.escapeQuotes($schema)) + '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: ' + (it.util.toQuotedString($schema)) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        if ($breakOnError) {\n          out += ' if (false) { ';\n        }\n      } else if (it.opts.missingRefs == 'ignore') {\n        console.warn($message);\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n      } else {\n        throw new it.MissingRefError(it.baseId, $schema, $message);\n      }\n    } else if ($refVal.inline) {\n      var $it = it.util.copy(it);\n      $it.level++;\n      var $nextValid = 'valid' + $it.level;\n      $it.schema = $refVal.schema;\n      $it.schemaPath = '';\n      $it.errSchemaPath = $schema;\n      var $code = it.validate($it).replace(/validate\\.schema/g, $refVal.code);\n      out += ' ' + ($code) + ' ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n      }\n    } else {\n      $async = $refVal.$async === true;\n      $refCode = $refVal.code;\n    }\n  }\n  if ($refCode) {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    if (it.opts.passContext) {\n      out += ' ' + ($refCode) + '.call(this, ';\n    } else {\n      out += ' ' + ($refCode) + '( ';\n    }\n    out += ' ' + ($data) + ', (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ', rootData)  ';\n    var __callValidate = out;\n    out = $$outStack.pop();\n    if ($async) {\n      if (!it.async) throw new Error('async schema referenced by sync schema');\n      if ($breakOnError) {\n        out += ' var ' + ($valid) + '; ';\n      }\n      out += ' try { ' + (it.yieldAwait) + ' ' + (__callValidate) + '; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = true; ';\n      }\n      out += ' } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = false; ';\n      }\n      out += ' } ';\n      if ($breakOnError) {\n        out += ' if (' + ($valid) + ') { ';\n      }\n    } else {\n      out += ' if (!' + (__callValidate) + ') { if (vErrors === null) vErrors = ' + ($refCode) + '.errors; else vErrors = vErrors.concat(' + ($refCode) + '.errors); errors = vErrors.length; } ';\n      if ($breakOnError) {\n        out += ' else { ';\n      }\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_allOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $allSchemasEmpty = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if (it.util.schemaHasRules($sch, it.RULES.all)) {\n        $allSchemasEmpty = false;\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    if ($allSchemasEmpty) {\n      out += ' if (true) { ';\n    } else {\n      out += ' ' + ($closingBraces.slice(0, -1)) + ' ';\n    }\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_anyOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $noEmptySchema = $schema.every(function($sch) {\n    return it.util.schemaHasRules($sch, it.RULES.all);\n  });\n  if ($noEmptySchema) {\n    var $currentBaseId = $it.baseId;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = false;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        out += ' ' + ($valid) + ' = ' + ($valid) + ' || ' + ($nextValid) + '; if (!' + ($valid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('anyOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match some schema in anyOf\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n    out = it.util.cleanUpCode(out);\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_const(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!$isData) {\n    out += ' var schema' + ($lvl) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ' = equal(' + ($data) + ', schema' + ($lvl) + '); if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('const') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to constant\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_contains(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId,\n    $nonEmptySchema = it.util.schemaHasRules($schema, it.RULES.all);\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($nonEmptySchema) {\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($nextValid) + ' = false; for (var ' + ($idx) + ' = 0; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    out += ' if (' + ($nextValid) + ') break; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($nextValid) + ') {';\n  } else {\n    out += ' if (' + ($data) + '.length == 0) {';\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('contains') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should contain a valid item\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } else { ';\n  if ($nonEmptySchema) {\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n  }\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_dependencies(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $schemaDeps = {},\n    $propertyDeps = {},\n    $ownProperties = it.opts.ownProperties;\n  for ($property in $schema) {\n    var $sch = $schema[$property];\n    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;\n    $deps[$property] = $sch;\n  }\n  out += 'var ' + ($errs) + ' = errors;';\n  var $currentErrorPath = it.errorPath;\n  out += 'var missing' + ($lvl) + ';';\n  for (var $property in $propertyDeps) {\n    $deps = $propertyDeps[$property];\n    if ($deps.length) {\n      out += ' if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      if ($breakOnError) {\n        out += ' && ( ';\n        var arr1 = $deps;\n        if (arr1) {\n          var $propertyKey, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $propertyKey = arr1[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ')) {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should have ';\n            if ($deps.length == 1) {\n              out += 'property ' + (it.util.escapeQuotes($deps[0]));\n            } else {\n              out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n            }\n            out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      } else {\n        out += ' ) { ';\n        var arr2 = $deps;\n        if (arr2) {\n          var $propertyKey, i2 = -1,\n            l2 = arr2.length - 1;\n          while (i2 < l2) {\n            $propertyKey = arr2[i2 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'should have ';\n                if ($deps.length == 1) {\n                  out += 'property ' + (it.util.escapeQuotes($deps[0]));\n                } else {\n                  out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n                }\n                out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n      out += ' }   ';\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n  }\n  it.errorPath = $currentErrorPath;\n  var $currentBaseId = $it.baseId;\n  for (var $property in $schemaDeps) {\n    var $sch = $schemaDeps[$property];\n    if (it.util.schemaHasRules($sch, it.RULES.all)) {\n      out += ' ' + ($nextValid) + ' = true; if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      out += ') { ';\n      $it.schema = $sch;\n      $it.schemaPath = $schemaPath + it.util.getProperty($property);\n      $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($property);\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += '   ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_enum(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $i = 'i' + $lvl,\n    $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ';';\n  if ($isData) {\n    out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n  }\n  out += '' + ($valid) + ' = false;for (var ' + ($i) + '=0; ' + ($i) + '<' + ($vSchema) + '.length; ' + ($i) + '++) if (equal(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + '])) { ' + ($valid) + ' = true; break; }';\n  if ($isData) {\n    out += '  }  ';\n  }\n  out += ' if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('enum') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValues: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to one of the allowed values\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_format(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  if (it.opts.format === false) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n    return out;\n  }\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $unknownFormats = it.opts.unknownFormats,\n    $allowUnknown = Array.isArray($unknownFormats);\n  if ($isData) {\n    var $format = 'format' + $lvl,\n      $isObject = 'isObject' + $lvl,\n      $formatType = 'formatType' + $lvl;\n    out += ' var ' + ($format) + ' = formats[' + ($schemaValue) + ']; var ' + ($isObject) + ' = typeof ' + ($format) + ' == \\'object\\' && !(' + ($format) + ' instanceof RegExp) && ' + ($format) + '.validate; var ' + ($formatType) + ' = ' + ($isObject) + ' && ' + ($format) + '.type || \\'string\\'; if (' + ($isObject) + ') { ';\n    if (it.async) {\n      out += ' var async' + ($lvl) + ' = ' + ($format) + '.async; ';\n    }\n    out += ' ' + ($format) + ' = ' + ($format) + '.validate; } if (  ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n    }\n    out += ' (';\n    if ($unknownFormats != 'ignore') {\n      out += ' (' + ($schemaValue) + ' && !' + ($format) + ' ';\n      if ($allowUnknown) {\n        out += ' && self._opts.unknownFormats.indexOf(' + ($schemaValue) + ') == -1 ';\n      }\n      out += ') || ';\n    }\n    out += ' (' + ($format) + ' && ' + ($formatType) + ' == \\'' + ($ruleType) + '\\' && !(typeof ' + ($format) + ' == \\'function\\' ? ';\n    if (it.async) {\n      out += ' (async' + ($lvl) + ' ? ' + (it.yieldAwait) + ' ' + ($format) + '(' + ($data) + ') : ' + ($format) + '(' + ($data) + ')) ';\n    } else {\n      out += ' ' + ($format) + '(' + ($data) + ') ';\n    }\n    out += ' : ' + ($format) + '.test(' + ($data) + '))))) {';\n  } else {\n    var $format = it.formats[$schema];\n    if (!$format) {\n      if ($unknownFormats == 'ignore') {\n        console.warn('unknown format \"' + $schema + '\" ignored in schema at path \"' + it.errSchemaPath + '\"');\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else if ($allowUnknown && $unknownFormats.indexOf($schema) >= 0) {\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else {\n        throw new Error('unknown format \"' + $schema + '\" is used in schema at path \"' + it.errSchemaPath + '\"');\n      }\n    }\n    var $isObject = typeof $format == 'object' && !($format instanceof RegExp) && $format.validate;\n    var $formatType = $isObject && $format.type || 'string';\n    if ($isObject) {\n      var $async = $format.async === true;\n      $format = $format.validate;\n    }\n    if ($formatType != $ruleType) {\n      if ($breakOnError) {\n        out += ' if (true) { ';\n      }\n      return out;\n    }\n    if ($async) {\n      if (!it.async) throw new Error('async format in sync schema');\n      var $formatRef = 'formats' + it.util.getProperty($schema) + '.validate';\n      out += ' if (!(' + (it.yieldAwait) + ' ' + ($formatRef) + '(' + ($data) + '))) { ';\n    } else {\n      out += ' if (! ';\n      var $formatRef = 'formats' + it.util.getProperty($schema);\n      if ($isObject) $formatRef += '.validate';\n      if (typeof $format == 'function') {\n        out += ' ' + ($formatRef) + '(' + ($data) + ') ';\n      } else {\n        out += ' ' + ($formatRef) + '.test(' + ($data) + ') ';\n      }\n      out += ') { ';\n    }\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('format') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { format:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match format \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_items(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId;\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if (Array.isArray($schema)) {\n    var $additionalItems = it.schema.additionalItems;\n    if ($additionalItems === false) {\n      out += ' ' + ($valid) + ' = ' + ($data) + '.length <= ' + ($schema.length) + '; ';\n      var $currErrSchemaPath = $errSchemaPath;\n      $errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += '  if (!' + ($valid) + ') {   ';\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ('additionalItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schema.length) + ' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should NOT have more than ' + ($schema.length) + ' items\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n      out += ' } ';\n      $errSchemaPath = $currErrSchemaPath;\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        if (it.util.schemaHasRules($sch, it.RULES.all)) {\n          out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($i) + ') { ';\n          var $passData = $data + '[' + $i + ']';\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + '[' + $i + ']';\n          $it.errSchemaPath = $errSchemaPath + '/' + $i;\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $i, it.opts.jsonPointers, true);\n          $it.dataPathArr[$dataNxt] = $i;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n    if (typeof $additionalItems == 'object' && it.util.schemaHasRules($additionalItems, it.RULES.all)) {\n      $it.schema = $additionalItems;\n      $it.schemaPath = it.schemaPath + '.additionalItems';\n      $it.errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($schema.length) + ') {  for (var ' + ($idx) + ' = ' + ($schema.length) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n      $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n      var $passData = $data + '[' + $idx + ']';\n      $it.dataPathArr[$dataNxt] = $idx;\n      var $code = it.validate($it);\n      $it.baseId = $currentBaseId;\n      if (it.util.varOccurences($code, $nextData) < 2) {\n        out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n      } else {\n        out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n      }\n      if ($breakOnError) {\n        out += ' if (!' + ($nextValid) + ') break; ';\n      }\n      out += ' } }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  } else if (it.util.schemaHasRules($schema, it.RULES.all)) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += '  for (var ' + ($idx) + ' = ' + (0) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    if ($breakOnError) {\n      out += ' if (!' + ($nextValid) + ') break; ';\n    }\n    out += ' }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limit(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $isMax = $keyword == 'maximum',\n    $exclusiveKeyword = $isMax ? 'exclusiveMaximum' : 'exclusiveMinimum',\n    $schemaExcl = it.schema[$exclusiveKeyword],\n    $isDataExcl = it.opts.$data && $schemaExcl && $schemaExcl.$data,\n    $op = $isMax ? '<' : '>',\n    $notOp = $isMax ? '>' : '<',\n    $errorKeyword = undefined;\n  if ($isDataExcl) {\n    var $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr),\n      $exclusive = 'exclusive' + $lvl,\n      $exclType = 'exclType' + $lvl,\n      $exclIsNumber = 'exclIsNumber' + $lvl,\n      $opExpr = 'op' + $lvl,\n      $opStr = '\\' + ' + $opExpr + ' + \\'';\n    out += ' var schemaExcl' + ($lvl) + ' = ' + ($schemaValueExcl) + '; ';\n    $schemaValueExcl = 'schemaExcl' + $lvl;\n    out += ' var ' + ($exclusive) + '; var ' + ($exclType) + ' = typeof ' + ($schemaValueExcl) + '; if (' + ($exclType) + ' != \\'boolean\\' && ' + ($exclType) + ' != \\'undefined\\' && ' + ($exclType) + ' != \\'number\\') { ';\n    var $errorKeyword = $exclusiveKeyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || '_exclusiveLimit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'' + ($exclusiveKeyword) + ' should be boolean\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else if ( ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n    }\n    out += ' ' + ($exclType) + ' == \\'number\\' ? ( (' + ($exclusive) + ' = ' + ($schemaValue) + ' === undefined || ' + ($schemaValueExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ') ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValueExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) : ( (' + ($exclusive) + ' = ' + ($schemaValueExcl) + ' === true) ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValue) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { var op' + ($lvl) + ' = ' + ($exclusive) + ' ? \\'' + ($op) + '\\' : \\'' + ($op) + '=\\';';\n  } else {\n    var $exclIsNumber = typeof $schemaExcl == 'number',\n      $opStr = $op;\n    if ($exclIsNumber && $isData) {\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ( ' + ($schemaValue) + ' === undefined || ' + ($schemaExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ' ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { ';\n    } else {\n      if ($exclIsNumber && $schema === undefined) {\n        $exclusive = true;\n        $errorKeyword = $exclusiveKeyword;\n        $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n        $schemaValue = $schemaExcl;\n        $notOp += '=';\n      } else {\n        if ($exclIsNumber) $schemaValue = Math[$isMax ? 'min' : 'max']($schemaExcl, $schema);\n        if ($schemaExcl === ($exclIsNumber ? $schemaValue : true)) {\n          $exclusive = true;\n          $errorKeyword = $exclusiveKeyword;\n          $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n          $notOp += '=';\n        } else {\n          $exclusive = false;\n          $opStr += '=';\n        }\n      }\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' || ' + ($data) + ' !== ' + ($data) + ') { ';\n    }\n  }\n  $errorKeyword = $errorKeyword || $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { comparison: ' + ($opExpr) + ', limit: ' + ($schemaValue) + ', exclusive: ' + ($exclusive) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be ' + ($opStr) + ' ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $op = $keyword == 'maxItems' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' ' + ($data) + '.length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxItems') {\n        out += 'more';\n      } else {\n        out += 'less';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' items\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitLength(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $op = $keyword == 'maxLength' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  if (it.opts.unicode === false) {\n    out += ' ' + ($data) + '.length ';\n  } else {\n    out += ' ucs2length(' + ($data) + ') ';\n  }\n  out += ' ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitLength') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT be ';\n      if ($keyword == 'maxLength') {\n        out += 'longer';\n      } else {\n        out += 'shorter';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' characters\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitProperties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $op = $keyword == 'maxProperties' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' Object.keys(' + ($data) + ').length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxProperties') {\n        out += 'more';\n      } else {\n        out += 'less';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' properties\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_multipleOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  out += 'var division' + ($lvl) + ';if (';\n  if ($isData) {\n    out += ' ' + ($schemaValue) + ' !== undefined && ( typeof ' + ($schemaValue) + ' != \\'number\\' || ';\n  }\n  out += ' (division' + ($lvl) + ' = ' + ($data) + ' / ' + ($schemaValue) + ', ';\n  if (it.opts.multipleOfPrecision) {\n    out += ' Math.abs(Math.round(division' + ($lvl) + ') - division' + ($lvl) + ') > 1e-' + (it.opts.multipleOfPrecision) + ' ';\n  } else {\n    out += ' division' + ($lvl) + ' !== parseInt(division' + ($lvl) + ') ';\n  }\n  out += ' ) ';\n  if ($isData) {\n    out += '  )  ';\n  }\n  out += ' ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('multipleOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { multipleOf: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be multiple of ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_not(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  if (it.util.schemaHasRules($schema, it.RULES.all)) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.createErrors = false;\n    var $allErrorsOption;\n    if ($it.opts.allErrors) {\n      $allErrorsOption = $it.opts.allErrors;\n      $it.opts.allErrors = false;\n    }\n    out += ' ' + (it.validate($it)) + ' ';\n    $it.createErrors = true;\n    if ($allErrorsOption) $it.opts.allErrors = $allErrorsOption;\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (' + ($nextValid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    out += '  var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if ($breakOnError) {\n      out += ' if (false) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_oneOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  out += 'var ' + ($errs) + ' = errors;var prevValid' + ($lvl) + ' = false;var ' + ($valid) + ' = false;';\n  var $currentBaseId = $it.baseId;\n  var $wasComposite = it.compositeRule;\n  it.compositeRule = $it.compositeRule = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if (it.util.schemaHasRules($sch, it.RULES.all)) {\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n      } else {\n        out += ' var ' + ($nextValid) + ' = true; ';\n      }\n      if ($i) {\n        out += ' if (' + ($nextValid) + ' && prevValid' + ($lvl) + ') ' + ($valid) + ' = false; else { ';\n        $closingBraces += '}';\n      }\n      out += ' if (' + ($nextValid) + ') ' + ($valid) + ' = prevValid' + ($lvl) + ' = true;';\n    }\n  }\n  it.compositeRule = $it.compositeRule = $wasComposite;\n  out += '' + ($closingBraces) + 'if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('oneOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match exactly one schema in oneOf\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; return false; ';\n    }\n  }\n  out += '} else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }';\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_pattern(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $regexp = $isData ? '(new RegExp(' + $schemaValue + '))' : it.usePattern($schema);\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n  }\n  out += ' !' + ($regexp) + '.test(' + ($data) + ') ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('pattern') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { pattern:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match pattern \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_properties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $key = 'key' + $lvl,\n    $idx = 'idx' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $dataProperties = 'dataProperties' + $lvl;\n  var $schemaKeys = Object.keys($schema || {}),\n    $pProperties = it.schema.patternProperties || {},\n    $pPropertyKeys = Object.keys($pProperties),\n    $aProperties = it.schema.additionalProperties,\n    $someProperties = $schemaKeys.length || $pPropertyKeys.length,\n    $noAdditional = $aProperties === false,\n    $additionalIsSchema = typeof $aProperties == 'object' && Object.keys($aProperties).length,\n    $removeAdditional = it.opts.removeAdditional,\n    $checkAdditional = $noAdditional || $additionalIsSchema || $removeAdditional,\n    $ownProperties = it.opts.ownProperties,\n    $currentBaseId = it.baseId;\n  var $required = it.schema.required;\n  if ($required && !(it.opts.v5 && $required.$data) && $required.length < it.opts.loopRequired) var $requiredHash = it.util.toHash($required);\n  if (it.opts.patternGroups) {\n    var $pgProperties = it.schema.patternGroups || {},\n      $pgPropertyKeys = Object.keys($pgProperties);\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($nextValid) + ' = true;';\n  if ($ownProperties) {\n    out += ' var ' + ($dataProperties) + ' = undefined;';\n  }\n  if ($checkAdditional) {\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    if ($someProperties) {\n      out += ' var isAdditional' + ($lvl) + ' = !(false ';\n      if ($schemaKeys.length) {\n        if ($schemaKeys.length > 5) {\n          out += ' || validate.schema' + ($schemaPath) + '[' + ($key) + '] ';\n        } else {\n          var arr1 = $schemaKeys;\n          if (arr1) {\n            var $propertyKey, i1 = -1,\n              l1 = arr1.length - 1;\n            while (i1 < l1) {\n              $propertyKey = arr1[i1 += 1];\n              out += ' || ' + ($key) + ' == ' + (it.util.toQuotedString($propertyKey)) + ' ';\n            }\n          }\n        }\n      }\n      if ($pPropertyKeys.length) {\n        var arr2 = $pPropertyKeys;\n        if (arr2) {\n          var $pProperty, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $pProperty = arr2[$i += 1];\n            out += ' || ' + (it.usePattern($pProperty)) + '.test(' + ($key) + ') ';\n          }\n        }\n      }\n      if (it.opts.patternGroups && $pgPropertyKeys.length) {\n        var arr3 = $pgPropertyKeys;\n        if (arr3) {\n          var $pgProperty, $i = -1,\n            l3 = arr3.length - 1;\n          while ($i < l3) {\n            $pgProperty = arr3[$i += 1];\n            out += ' || ' + (it.usePattern($pgProperty)) + '.test(' + ($key) + ') ';\n          }\n        }\n      }\n      out += ' ); if (isAdditional' + ($lvl) + ') { ';\n    }\n    if ($removeAdditional == 'all') {\n      out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n    } else {\n      var $currentErrorPath = it.errorPath;\n      var $additionalProperty = '\\' + ' + $key + ' + \\'';\n      if (it.opts._errorDataPathProperty) {\n        it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n      }\n      if ($noAdditional) {\n        if ($removeAdditional) {\n          out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n        } else {\n          out += ' ' + ($nextValid) + ' = false; ';\n          var $currErrSchemaPath = $errSchemaPath;\n          $errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          var $$outStack = $$outStack || [];\n          $$outStack.push(out);\n          out = ''; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('additionalProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { additionalProperty: \\'' + ($additionalProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'should NOT have additional properties\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          var __err = out;\n          out = $$outStack.pop();\n          if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n            if (it.async) {\n              out += ' throw new ValidationError([' + (__err) + ']); ';\n            } else {\n              out += ' validate.errors = [' + (__err) + ']; return false; ';\n            }\n          } else {\n            out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n          }\n          $errSchemaPath = $currErrSchemaPath;\n          if ($breakOnError) {\n            out += ' break; ';\n          }\n        }\n      } else if ($additionalIsSchema) {\n        if ($removeAdditional == 'failing') {\n          out += ' var ' + ($errs) + ' = errors;  ';\n          var $wasComposite = it.compositeRule;\n          it.compositeRule = $it.compositeRule = true;\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' if (!' + ($nextValid) + ') { errors = ' + ($errs) + '; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete ' + ($data) + '[' + ($key) + ']; }  ';\n          it.compositeRule = $it.compositeRule = $wasComposite;\n        } else {\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n        }\n      }\n      it.errorPath = $currentErrorPath;\n    }\n    if ($someProperties) {\n      out += ' } ';\n    }\n    out += ' }  ';\n    if ($breakOnError) {\n      out += ' if (' + ($nextValid) + ') { ';\n      $closingBraces += '}';\n    }\n  }\n  var $useDefaults = it.opts.useDefaults && !it.compositeRule;\n  if ($schemaKeys.length) {\n    var arr4 = $schemaKeys;\n    if (arr4) {\n      var $propertyKey, i4 = -1,\n        l4 = arr4.length - 1;\n      while (i4 < l4) {\n        $propertyKey = arr4[i4 += 1];\n        var $sch = $schema[$propertyKey];\n        if (it.util.schemaHasRules($sch, it.RULES.all)) {\n          var $prop = it.util.getProperty($propertyKey),\n            $passData = $data + $prop,\n            $hasDefault = $useDefaults && $sch.default !== undefined;\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + $prop;\n          $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($propertyKey);\n          $it.errorPath = it.util.getPath(it.errorPath, $propertyKey, it.opts.jsonPointers);\n          $it.dataPathArr[$dataNxt] = it.util.toQuotedString($propertyKey);\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            $code = it.util.varReplace($code, $nextData, $passData);\n            var $useData = $passData;\n          } else {\n            var $useData = $nextData;\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ';\n          }\n          if ($hasDefault) {\n            out += ' ' + ($code) + ' ';\n          } else {\n            if ($requiredHash && $requiredHash[$propertyKey]) {\n              out += ' if ( ' + ($useData) + ' === undefined ';\n              if ($ownProperties) {\n                out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n              }\n              out += ') { ' + ($nextValid) + ' = false; ';\n              var $currentErrorPath = it.errorPath,\n                $currErrSchemaPath = $errSchemaPath,\n                $missingProperty = it.util.escapeQuotes($propertyKey);\n              if (it.opts._errorDataPathProperty) {\n                it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n              }\n              $errSchemaPath = it.errSchemaPath + '/required';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'';\n                  if (it.opts._errorDataPathProperty) {\n                    out += 'is a required property';\n                  } else {\n                    out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              $errSchemaPath = $currErrSchemaPath;\n              it.errorPath = $currentErrorPath;\n              out += ' } else { ';\n            } else {\n              if ($breakOnError) {\n                out += ' if ( ' + ($useData) + ' === undefined ';\n                if ($ownProperties) {\n                  out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ') { ' + ($nextValid) + ' = true; } else { ';\n              } else {\n                out += ' if (' + ($useData) + ' !== undefined ';\n                if ($ownProperties) {\n                  out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ' ) { ';\n              }\n            }\n            out += ' ' + ($code) + ' } ';\n          }\n        }\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($pPropertyKeys.length) {\n    var arr5 = $pPropertyKeys;\n    if (arr5) {\n      var $pProperty, i5 = -1,\n        l5 = arr5.length - 1;\n      while (i5 < l5) {\n        $pProperty = arr5[i5 += 1];\n        var $sch = $pProperties[$pProperty];\n        if (it.util.schemaHasRules($sch, it.RULES.all)) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + '.patternProperties' + it.util.getProperty($pProperty);\n          $it.errSchemaPath = it.errSchemaPath + '/patternProperties/' + it.util.escapeFragment($pProperty);\n          if ($ownProperties) {\n            out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n          } else {\n            out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n          }\n          out += ' if (' + (it.usePattern($pProperty)) + '.test(' + ($key) + ')) { ';\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n          out += ' } ';\n          if ($breakOnError) {\n            out += ' else ' + ($nextValid) + ' = true; ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n  }\n  if (it.opts.patternGroups && $pgPropertyKeys.length) {\n    var arr6 = $pgPropertyKeys;\n    if (arr6) {\n      var $pgProperty, i6 = -1,\n        l6 = arr6.length - 1;\n      while (i6 < l6) {\n        $pgProperty = arr6[i6 += 1];\n        var $pgSchema = $pgProperties[$pgProperty],\n          $sch = $pgSchema.schema;\n        if (it.util.schemaHasRules($sch, it.RULES.all)) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + '.patternGroups' + it.util.getProperty($pgProperty) + '.schema';\n          $it.errSchemaPath = it.errSchemaPath + '/patternGroups/' + it.util.escapeFragment($pgProperty) + '/schema';\n          out += ' var pgPropCount' + ($lvl) + ' = 0;  ';\n          if ($ownProperties) {\n            out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n          } else {\n            out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n          }\n          out += ' if (' + (it.usePattern($pgProperty)) + '.test(' + ($key) + ')) { pgPropCount' + ($lvl) + '++; ';\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n          out += ' } ';\n          if ($breakOnError) {\n            out += ' else ' + ($nextValid) + ' = true; ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n          var $pgMin = $pgSchema.minimum,\n            $pgMax = $pgSchema.maximum;\n          if ($pgMin !== undefined || $pgMax !== undefined) {\n            out += ' var ' + ($valid) + ' = true; ';\n            var $currErrSchemaPath = $errSchemaPath;\n            if ($pgMin !== undefined) {\n              var $limit = $pgMin,\n                $reason = 'minimum',\n                $moreOrLess = 'less';\n              out += ' ' + ($valid) + ' = pgPropCount' + ($lvl) + ' >= ' + ($pgMin) + '; ';\n              $errSchemaPath = it.errSchemaPath + '/patternGroups/minimum';\n              out += '  if (!' + ($valid) + ') {   ';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('patternGroups') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { reason: \\'' + ($reason) + '\\', limit: ' + ($limit) + ', pattern: \\'' + (it.util.escapeQuotes($pgProperty)) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should NOT have ' + ($moreOrLess) + ' than ' + ($limit) + ' properties matching pattern \"' + (it.util.escapeQuotes($pgProperty)) + '\"\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n              if ($pgMax !== undefined) {\n                out += ' else ';\n              }\n            }\n            if ($pgMax !== undefined) {\n              var $limit = $pgMax,\n                $reason = 'maximum',\n                $moreOrLess = 'more';\n              out += ' ' + ($valid) + ' = pgPropCount' + ($lvl) + ' <= ' + ($pgMax) + '; ';\n              $errSchemaPath = it.errSchemaPath + '/patternGroups/maximum';\n              out += '  if (!' + ($valid) + ') {   ';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('patternGroups') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { reason: \\'' + ($reason) + '\\', limit: ' + ($limit) + ', pattern: \\'' + (it.util.escapeQuotes($pgProperty)) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should NOT have ' + ($moreOrLess) + ' than ' + ($limit) + ' properties matching pattern \"' + (it.util.escapeQuotes($pgProperty)) + '\"\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n            }\n            $errSchemaPath = $currErrSchemaPath;\n            if ($breakOnError) {\n              out += ' if (' + ($valid) + ') { ';\n              $closingBraces += '}';\n            }\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_propertyNames(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  if (it.util.schemaHasRules($schema, it.RULES.all)) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    var $key = 'key' + $lvl,\n      $idx = 'idx' + $lvl,\n      $i = 'i' + $lvl,\n      $invalidName = '\\' + ' + $key + ' + \\'',\n      $dataNxt = $it.dataLevel = it.dataLevel + 1,\n      $nextData = 'data' + $dataNxt,\n      $dataProperties = 'dataProperties' + $lvl,\n      $ownProperties = it.opts.ownProperties,\n      $currentBaseId = it.baseId;\n    out += ' var ' + ($errs) + ' = errors; ';\n    if ($ownProperties) {\n      out += ' var ' + ($dataProperties) + ' = undefined; ';\n    }\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    out += ' var startErrs' + ($lvl) + ' = errors; ';\n    var $passData = $key;\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (!' + ($nextValid) + ') { for (var ' + ($i) + '=startErrs' + ($lvl) + '; ' + ($i) + '<errors; ' + ($i) + '++) { vErrors[' + ($i) + '].propertyName = ' + ($key) + '; }   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('propertyNames') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { propertyName: \\'' + ($invalidName) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'property name \\\\\\'' + ($invalidName) + '\\\\\\' is invalid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    if ($breakOnError) {\n      out += ' break; ';\n    }\n    out += ' } }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_required(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    if ($schema.length < it.opts.loopRequired && it.schema.properties && Object.keys(it.schema.properties).length) {\n      var $required = [];\n      var arr1 = $schema;\n      if (arr1) {\n        var $property, i1 = -1,\n          l1 = arr1.length - 1;\n        while (i1 < l1) {\n          $property = arr1[i1 += 1];\n          var $propertySch = it.schema.properties[$property];\n          if (!($propertySch && it.util.schemaHasRules($propertySch, it.RULES.all))) {\n            $required[$required.length] = $property;\n          }\n        }\n      }\n    } else {\n      var $required = $schema;\n    }\n  }\n  if ($isData || $required.length) {\n    var $currentErrorPath = it.errorPath,\n      $loopRequired = $isData || $required.length >= it.opts.loopRequired,\n      $ownProperties = it.opts.ownProperties;\n    if ($breakOnError) {\n      out += ' var missing' + ($lvl) + '; ';\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        out += ' var ' + ($valid) + ' = true; ';\n        if ($isData) {\n          out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { ' + ($valid) + ' = ' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] !== undefined ';\n        if ($ownProperties) {\n          out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += '; if (!' + ($valid) + ') break; } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n        out += '  if (!' + ($valid) + ') {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      } else {\n        out += ' if ( ';\n        var arr2 = $required;\n        if (arr2) {\n          var $propertyKey, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $propertyKey = arr2[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ') {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      }\n    } else {\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        if ($isData) {\n          out += ' if (' + ($vSchema) + ' && !Array.isArray(' + ($vSchema) + ')) {  var err =   '; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is a required property';\n              } else {\n                out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (' + ($vSchema) + ' !== undefined) { ';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { if (' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] === undefined ';\n        if ($ownProperties) {\n          out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += ') {  var err =   '; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n      } else {\n        var arr3 = $required;\n        if (arr3) {\n          var $propertyKey, i3 = -1,\n            l3 = arr3.length - 1;\n          while (i3 < l3) {\n            $propertyKey = arr3[i3 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'';\n                if (it.opts._errorDataPathProperty) {\n                  out += 'is a required property';\n                } else {\n                  out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                }\n                out += '\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n    }\n    it.errorPath = $currentErrorPath;\n  } else if ($breakOnError) {\n    out += ' if (true) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_uniqueItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (($schema || $isData) && it.opts.uniqueItems !== false) {\n    if ($isData) {\n      out += ' var ' + ($valid) + '; if (' + ($schemaValue) + ' === false || ' + ($schemaValue) + ' === undefined) ' + ($valid) + ' = true; else if (typeof ' + ($schemaValue) + ' != \\'boolean\\') ' + ($valid) + ' = false; else { ';\n    }\n    out += ' var ' + ($valid) + ' = true; if (' + ($data) + '.length > 1) { var i = ' + ($data) + '.length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal(' + ($data) + '[i], ' + ($data) + '[j])) { ' + ($valid) + ' = false; break outer; } } } } ';\n    if ($isData) {\n      out += '  }  ';\n    }\n    out += ' if (!' + ($valid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('uniqueItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { i: i, j: j } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT have duplicate items (items ## \\' + j + \\' and \\' + i + \\' are identical)\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema:  ';\n        if ($isData) {\n          out += 'validate.schema' + ($schemaPath);\n        } else {\n          out += '' + ($schema);\n        }\n        out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\n\nvar KEYWORDS = [\n  'multipleOf',\n  'maximum',\n  'exclusiveMaximum',\n  'minimum',\n  'exclusiveMinimum',\n  'maxLength',\n  'minLength',\n  'pattern',\n  'additionalItems',\n  'maxItems',\n  'minItems',\n  'uniqueItems',\n  'maxProperties',\n  'minProperties',\n  'required',\n  'additionalProperties',\n  'enum',\n  'format',\n  'const'\n];\n\nmodule.exports = function (metaSchema, keywordsJsonPointers) {\n  for (var i=0; i<keywordsJsonPointers.length; i++) {\n    metaSchema = JSON.parse(JSON.stringify(metaSchema));\n    var segments = keywordsJsonPointers[i].split('/');\n    var keywords = metaSchema;\n    var j;\n    for (j=1; j<segments.length; j++)\n      keywords = keywords[segments[j]];\n\n    for (j=0; j<KEYWORDS.length; j++) {\n      var key = KEYWORDS[j];\n      var schema = keywords[key];\n      if (schema) {\n        keywords[key] = {\n          anyOf: [\n            schema,\n            { $ref: 'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#' }\n          ]\n        };\n      }\n    }\n  }\n\n  return metaSchema;\n};\n","'use strict';\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-06/schema';\n\nmodule.exports = function (ajv) {\n  var defaultMeta = ajv._opts.defaultMeta;\n  var metaSchemaRef = typeof defaultMeta == 'string'\n                      ? { $ref: defaultMeta }\n                      : ajv.getSchema(META_SCHEMA_ID)\n                        ? { $ref: META_SCHEMA_ID }\n                        : {};\n\n  ajv.addKeyword('patternGroups', {\n    // implemented in properties.jst\n    metaSchema: {\n      type: 'object',\n      additionalProperties: {\n        type: 'object',\n        required: [ 'schema' ],\n        properties: {\n          maximum: {\n            type: 'integer',\n            minimum: 0\n          },\n          minimum: {\n            type: 'integer',\n            minimum: 0\n          },\n          schema: metaSchemaRef\n        },\n        additionalProperties: false\n      }\n    }\n  });\n  ajv.RULES.all.properties.implements.push('patternGroups');\n};\n","'use strict';\n\nvar MissingRefError = require('./error_classes').MissingRef;\n\nmodule.exports = compileAsync;\n\n\n/**\n * Creates validating function for passed schema with asynchronous loading of missing schemas.\n * `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n * @this  Ajv\n * @param {Object}   schema schema object\n * @param {Boolean}  meta optional true to compile meta-schema; this parameter can be skipped\n * @param {Function} callback an optional node-style callback, it is called with 2 parameters: error (or null) and validating function.\n * @return {Promise} promise that resolves with a validating function.\n */\nfunction compileAsync(schema, meta, callback) {\n  /* eslint no-shadow: 0 */\n  /* global Promise */\n  /* jshint validthis: true */\n  var self = this;\n  if (typeof this._opts.loadSchema != 'function')\n    throw new Error('options.loadSchema should be a function');\n\n  if (typeof meta == 'function') {\n    callback = meta;\n    meta = undefined;\n  }\n\n  var p = loadMetaSchemaOf(schema).then(function () {\n    var schemaObj = self._addSchema(schema, undefined, meta);\n    return schemaObj.validate || _compileAsync(schemaObj);\n  });\n\n  if (callback) {\n    p.then(\n      function(v) { callback(null, v); },\n      callback\n    );\n  }\n\n  return p;\n\n\n  function loadMetaSchemaOf(sch) {\n    var $schema = sch.$schema;\n    return $schema && !self.getSchema($schema)\n            ? compileAsync.call(self, { $ref: $schema }, true)\n            : Promise.resolve();\n  }\n\n\n  function _compileAsync(schemaObj) {\n    try { return self._compile(schemaObj); }\n    catch(e) {\n      if (e instanceof MissingRefError) return loadMissingSchema(e);\n      throw e;\n    }\n\n\n    function loadMissingSchema(e) {\n      var ref = e.missingSchema;\n      if (added(ref)) throw new Error('Schema ' + ref + ' is loaded but ' + e.missingRef + ' cannot be resolved');\n\n      var schemaPromise = self._loadingSchemas[ref];\n      if (!schemaPromise) {\n        schemaPromise = self._loadingSchemas[ref] = self._opts.loadSchema(ref);\n        schemaPromise.then(removePromise, removePromise);\n      }\n\n      return schemaPromise.then(function (sch) {\n        if (!added(ref)) {\n          return loadMetaSchemaOf(sch).then(function () {\n            if (!added(ref)) self.addSchema(sch, ref, undefined, meta);\n          });\n        }\n      }).then(function() {\n        return _compileAsync(schemaObj);\n      });\n\n      function removePromise() {\n        delete self._loadingSchemas[ref];\n      }\n\n      function added(ref) {\n        return self._refs[ref] || self._schemas[ref];\n      }\n    }\n  }\n}\n","'use strict';\n\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\nvar customRuleCode = require('./dotjs/custom');\n\nmodule.exports = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword\n};\n\n/**\n * Define custom keyword\n * @this  Ajv\n * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n */\nfunction addKeyword(keyword, definition) {\n  /* jshint validthis: true */\n  /* eslint no-shadow: 0 */\n  var RULES = this.RULES;\n\n  if (RULES.keywords[keyword])\n    throw new Error('Keyword ' + keyword + ' is already defined');\n\n  if (!IDENTIFIER.test(keyword))\n    throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n  if (definition) {\n    if (definition.macro && definition.valid !== undefined)\n      throw new Error('\"valid\" option cannot be used with macro keywords');\n\n    var dataType = definition.type;\n    if (Array.isArray(dataType)) {\n      var i, len = dataType.length;\n      for (i=0; i<len; i++) checkDataType(dataType[i]);\n      for (i=0; i<len; i++) _addRule(keyword, dataType[i], definition);\n    } else {\n      if (dataType) checkDataType(dataType);\n      _addRule(keyword, dataType, definition);\n    }\n\n    var $data = definition.$data === true && this._opts.$data;\n    if ($data && !definition.validate)\n      throw new Error('$data support: \"validate\" function is not defined');\n\n    var metaSchema = definition.metaSchema;\n    if (metaSchema) {\n      if ($data) {\n        metaSchema = {\n          anyOf: [\n            metaSchema,\n            { '$ref': 'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#' }\n          ]\n        };\n      }\n      definition.validateSchema = this.compile(metaSchema, true);\n    }\n  }\n\n  RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n\n  function _addRule(keyword, dataType, definition) {\n    var ruleGroup;\n    for (var i=0; i<RULES.length; i++) {\n      var rg = RULES[i];\n      if (rg.type == dataType) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    if (!ruleGroup) {\n      ruleGroup = { type: dataType, rules: [] };\n      RULES.push(ruleGroup);\n    }\n\n    var rule = {\n      keyword: keyword,\n      definition: definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword] = rule;\n  }\n\n\n  function checkDataType(dataType) {\n    if (!RULES.types[dataType]) throw new Error('Unknown type ' + dataType);\n  }\n}\n\n\n/**\n * Get keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n */\nfunction getKeyword(keyword) {\n  /* jshint validthis: true */\n  var rule = this.RULES.custom[keyword];\n  return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n}\n\n\n/**\n * Remove keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n */\nfunction removeKeyword(keyword) {\n  /* jshint validthis: true */\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword];\n  delete RULES.all[keyword];\n  delete RULES.custom[keyword];\n  for (var i=0; i<RULES.length; i++) {\n    var rules = RULES[i].rules;\n    for (var j=0; j<rules.length; j++) {\n      if (rules[j].keyword == keyword) {\n        rules.splice(j, 1);\n        break;\n      }\n    }\n  }\n}\n","'use strict';\nmodule.exports = function generate_custom(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $rule = this,\n    $definition = 'definition' + $lvl,\n    $rDef = $rule.definition,\n    $closingBraces = '';\n  var $compile, $inline, $macro, $ruleValidate, $validateCode;\n  if ($isData && $rDef.$data) {\n    $validateCode = 'keywordValidate' + $lvl;\n    var $validateSchema = $rDef.validateSchema;\n    out += ' var ' + ($definition) + ' = RULES.custom[\\'' + ($keyword) + '\\'].definition; var ' + ($validateCode) + ' = ' + ($definition) + '.validate;';\n  } else {\n    $ruleValidate = it.useCustomRule($rule, $schema, it.schema, it);\n    if (!$ruleValidate) return;\n    $schemaValue = 'validate.schema' + $schemaPath;\n    $validateCode = $ruleValidate.code;\n    $compile = $rDef.compile;\n    $inline = $rDef.inline;\n    $macro = $rDef.macro;\n  }\n  var $ruleErrs = $validateCode + '.errors',\n    $i = 'i' + $lvl,\n    $ruleErr = 'ruleErr' + $lvl,\n    $asyncKeyword = $rDef.async;\n  if ($asyncKeyword && !it.async) throw new Error('async keyword in sync schema');\n  if (!($inline || $macro)) {\n    out += '' + ($ruleErrs) + ' = null;';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($isData && $rDef.$data) {\n    $closingBraces += '}';\n    out += ' if (' + ($schemaValue) + ' === undefined) { ' + ($valid) + ' = true; } else { ';\n    if ($validateSchema) {\n      $closingBraces += '}';\n      out += ' ' + ($valid) + ' = ' + ($definition) + '.validateSchema(' + ($schemaValue) + '); if (' + ($valid) + ') { ';\n    }\n  }\n  if ($inline) {\n    if ($rDef.statements) {\n      out += ' ' + ($ruleValidate.validate) + ' ';\n    } else {\n      out += ' ' + ($valid) + ' = ' + ($ruleValidate.validate) + '; ';\n    }\n  } else if ($macro) {\n    var $it = it.util.copy(it);\n    var $closingBraces = '';\n    $it.level++;\n    var $nextValid = 'valid' + $it.level;\n    $it.schema = $ruleValidate.validate;\n    $it.schemaPath = '';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it).replace(/validate\\.schema/g, $validateCode);\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($code);\n  } else {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    out += '  ' + ($validateCode) + '.call( ';\n    if (it.opts.passContext) {\n      out += 'this';\n    } else {\n      out += 'self';\n    }\n    if ($compile || $rDef.schema === false) {\n      out += ' , ' + ($data) + ' ';\n    } else {\n      out += ' , ' + ($schemaValue) + ' , ' + ($data) + ' , validate.schema' + (it.schemaPath) + ' ';\n    }\n    out += ' , (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ' , rootData )  ';\n    var def_callRuleValidate = out;\n    out = $$outStack.pop();\n    if ($rDef.errors === false) {\n      out += ' ' + ($valid) + ' = ';\n      if ($asyncKeyword) {\n        out += '' + (it.yieldAwait);\n      }\n      out += '' + (def_callRuleValidate) + '; ';\n    } else {\n      if ($asyncKeyword) {\n        $ruleErrs = 'customErrors' + $lvl;\n        out += ' var ' + ($ruleErrs) + ' = null; try { ' + ($valid) + ' = ' + (it.yieldAwait) + (def_callRuleValidate) + '; } catch (e) { ' + ($valid) + ' = false; if (e instanceof ValidationError) ' + ($ruleErrs) + ' = e.errors; else throw e; } ';\n      } else {\n        out += ' ' + ($ruleErrs) + ' = null; ' + ($valid) + ' = ' + (def_callRuleValidate) + '; ';\n      }\n    }\n  }\n  if ($rDef.modifying) {\n    out += ' if (' + ($parentData) + ') ' + ($data) + ' = ' + ($parentData) + '[' + ($parentDataProperty) + '];';\n  }\n  out += '' + ($closingBraces);\n  if ($rDef.valid) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  } else {\n    out += ' if ( ';\n    if ($rDef.valid === undefined) {\n      out += ' !';\n      if ($macro) {\n        out += '' + ($nextValid);\n      } else {\n        out += '' + ($valid);\n      }\n    } else {\n      out += ' ' + (!$rDef.valid) + ' ';\n    }\n    out += ') { ';\n    $errorKeyword = $rule.keyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    var def_customError = out;\n    out = $$outStack.pop();\n    if ($inline) {\n      if ($rDef.errors) {\n        if ($rDef.errors != 'full') {\n          out += '  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } ';\n        }\n      } else {\n        if ($rDef.errors === false) {\n          out += ' ' + (def_customError) + ' ';\n        } else {\n          out += ' if (' + ($errs) + ' == errors) { ' + (def_customError) + ' } else {  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } } ';\n        }\n      }\n    } else if ($macro) {\n      out += '   var err =   '; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError(vErrors); ';\n        } else {\n          out += ' validate.errors = vErrors; return false; ';\n        }\n      }\n    } else {\n      if ($rDef.errors === false) {\n        out += ' ' + (def_customError) + ' ';\n      } else {\n        out += ' if (Array.isArray(' + ($ruleErrs) + ')) { if (vErrors === null) vErrors = ' + ($ruleErrs) + '; else vErrors = vErrors.concat(' + ($ruleErrs) + '); errors = vErrors.length;  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + ';  ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\";  ';\n        if (it.opts.verbose) {\n          out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n        }\n        out += ' } } else { ' + (def_customError) + ' } ';\n      }\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  }\n  return out;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__57__;","module.exports = __WEBPACK_EXTERNAL_MODULE__58__;","module.exports = __WEBPACK_EXTERNAL_MODULE__59__;","module.exports = __WEBPACK_EXTERNAL_MODULE__60__;","import {isObject} from 'vega-util';\nimport {COLUMN, ROW, X, X2, Y, Y2} from './channel';\nimport * as compositeMark from './compositemark';\nimport {Config} from './config';\nimport {Data} from './data';\nimport {channelHasField, Encoding, EncodingWithFacet, isRanged} from './encoding';\nimport * as vlEncoding from './encoding';\nimport {FacetMapping} from './facet';\nimport {Field, FieldDef, RepeatRef} from './fielddef';\nimport * as log from './log';\nimport {AnyMark, AreaConfig, isMarkDef, isPathMark, isPrimitiveMark, LineConfig, Mark, MarkDef, MarkProperties} from './mark';\nimport {Projection} from './projection';\nimport {Repeat} from './repeat';\nimport {Resolve} from './resolve';\nimport {SelectionDef} from './selection';\nimport {stack} from './stack';\nimport {TitleParams} from './title';\nimport {TopLevelProperties} from './toplevelprops';\nimport {Transform} from './transform';\nimport {Dict, duplicate, hash, keys, vals} from './util';\n\n\nexport type TopLevel<S extends BaseSpec> = S & TopLevelProperties & {\n  /**\n   * URL to [JSON schema](http://json-schema.org/) for a Vega-Lite specification. Unless you have a reason to change this, use `https://vega.github.io/schema/vega-lite/v2.json`. Setting the `$schema` property allows automatic validation and autocomplete in editors that support JSON schema.\n   * @format uri\n   */\n  $schema?: string;\n\n  /**\n   * Vega-Lite configuration object.  This property can only be defined at the top-level of a specification.\n   */\n  config?: Config;\n};\n\nexport interface BaseSpec {\n  /**\n   * Title for the plot.\n   */\n  title?: string | TitleParams;\n\n  /**\n   * Name of the visualization for later reference.\n   */\n  name?: string;\n\n  /**\n   * Description of this mark for commenting purpose.\n   */\n  description?: string;\n\n  /**\n   * An object describing the data source\n   */\n  data?: Data;\n\n  /**\n   * An array of data transformations such as filter and new field calculation.\n   */\n  transform?: Transform[];\n}\n\nexport type DataRequired = {\n  /**\n   * An object describing the data source\n   */\n  data: Data;\n};\n\n\n// TODO(https://github.com/vega/vega-lite/issues/2503): Make this generic so we can support some form of top-down sizing.\nexport interface LayoutSizeMixins {\n  /**\n   * The width of a visualization.\n   *\n   * __Default value:__ This will be determined by the following rules:\n   *\n   * - If a view's [`autosize`](https://vega.github.io/vega-lite/docs/size.html#autosize) type is `\"fit\"` or its x-channel has a [continuous scale](https://vega.github.io/vega-lite/docs/scale.html#continuous), the width will be the value of [`config.view.width`](https://vega.github.io/vega-lite/docs/spec.html#config).\n   * - For x-axis with a band or point scale: if [`rangeStep`](https://vega.github.io/vega-lite/docs/scale.html#band) is a numeric value or unspecified, the width is [determined by the range step, paddings, and the cardinality of the field mapped to x-channel](https://vega.github.io/vega-lite/docs/scale.html#band).   Otherwise, if the `rangeStep` is `null`, the width will be the value of [`config.view.width`](https://vega.github.io/vega-lite/docs/spec.html#config).\n   * - If no field is mapped to `x` channel, the `width` will be the value of [`config.scale.textXRangeStep`](https://vega.github.io/vega-lite/docs/size.html#default-width-and-height) for `text` mark and the value of `rangeStep` for other marks.\n   *\n   * __Note:__ For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the width of a single view.\n   *\n   * __See also:__ The documentation for [width and height](https://vega.github.io/vega-lite/docs/size.html) contains more examples.\n   */\n  width?: number;\n\n  /**\n   * The height of a visualization.\n   *\n   * __Default value:__\n   * - If a view's [`autosize`](https://vega.github.io/vega-lite/docs/size.html#autosize) type is `\"fit\"` or its y-channel has a [continuous scale](https://vega.github.io/vega-lite/docs/scale.html#continuous), the height will be the value of [`config.view.height`](https://vega.github.io/vega-lite/docs/spec.html#config).\n   * - For y-axis with a band or point scale: if [`rangeStep`](https://vega.github.io/vega-lite/docs/scale.html#band) is a numeric value or unspecified, the height is [determined by the range step, paddings, and the cardinality of the field mapped to y-channel](https://vega.github.io/vega-lite/docs/scale.html#band). Otherwise, if the `rangeStep` is `null`, the height will be the value of [`config.view.height`](https://vega.github.io/vega-lite/docs/spec.html#config).\n   * - If no field is mapped to `y` channel, the `height` will be the value of `rangeStep`.\n   *\n   * __Note__: For plots with [`row` and `column` channels](https://vega.github.io/vega-lite/docs/encoding.html#facet), this represents the height of a single view.\n   *\n   * __See also:__ The documentation for [width and height](https://vega.github.io/vega-lite/docs/size.html) contains more examples.\n   */\n  height?: number;\n}\n\nexport interface GenericUnitSpec<E extends Encoding<any>, M> extends BaseSpec, LayoutSizeMixins {\n\n  /**\n   * A string describing the mark type (one of `\"bar\"`, `\"circle\"`, `\"square\"`, `\"tick\"`, `\"line\"`,\n   * `\"area\"`, `\"point\"`, `\"rule\"`, `\"geoshape\"`, and `\"text\"`) or a [mark definition object](https://vega.github.io/vega-lite/docs/mark.html#mark-def).\n   */\n  mark: M;\n\n  /**\n   * A key-value mapping between encoding channels and definition of fields.\n   */\n  encoding?: E;\n\n\n  /**\n   * An object defining properties of geographic projection, which will be applied to `shape` path for `\"geoshape\"` marks\n   * and to `latitude` and `\"longitude\"` channels for other marks.\n   */\n  projection?: Projection;\n\n  /**\n   * A key-value mapping between selection names and definitions.\n   */\n  selection?: {[name: string]: SelectionDef};\n}\n\nexport type NormalizedUnitSpec = GenericUnitSpec<Encoding<string | RepeatRef>, Mark | MarkDef>;\n\n/**\n * Unit spec that can have a composite mark.\n */\nexport type CompositeUnitSpec = GenericUnitSpec<Encoding<string | RepeatRef>, AnyMark>;\n\n/**\n * Unit spec that can have a composite mark and row or column channels.\n */\nexport type FacetedCompositeUnitSpec = GenericUnitSpec<EncodingWithFacet<string | RepeatRef>, AnyMark>;\n\nexport interface GenericLayerSpec<U extends GenericUnitSpec<any, any>> extends BaseSpec, LayoutSizeMixins {\n  /**\n   * Layer or single view specifications to be layered.\n   *\n   * __Note__: Specifications inside `layer` cannot use `row` and `column` channels as layering facet specifications is not allowed.\n   */\n  layer: (GenericLayerSpec<U> | U)[];\n\n  /**\n   * Scale, axis, and legend resolutions for layers.\n   */\n  resolve?: Resolve;\n}\n\n/**\n * Layer Spec with encoding and projection\n */\nexport interface ExtendedLayerSpec extends GenericLayerSpec<CompositeUnitSpec> {\n  /**\n   * A shared key-value mapping between encoding channels and definition of fields in the underlying layers.\n   */\n  encoding?: Encoding<string | RepeatRef>;\n\n\n  /**\n   * An object defining properties of the geographic projection shared by underlying layers.\n   */\n  projection?: Projection;\n}\n\nexport type NormalizedLayerSpec = GenericLayerSpec<NormalizedUnitSpec>;\n\n\nexport interface GenericFacetSpec<\n  U extends GenericUnitSpec<any, any>,\n  L extends GenericLayerSpec<any>\n  > extends BaseSpec {\n  /**\n   * An object that describes mappings between `row` and `column` channels and their field definitions.\n   */\n  facet: FacetMapping<string | RepeatRef>;\n\n  /**\n   * A specification of the view that gets faceted.\n   */\n  spec: L | U;\n  // TODO: replace this with GenericSpec<U> once we support all cases;\n\n  /**\n   * Scale, axis, and legend resolutions for facets.\n   */\n  resolve?: Resolve;\n}\n\nexport type NormalizedFacetSpec = GenericFacetSpec<NormalizedUnitSpec, NormalizedLayerSpec>;\n\nexport interface GenericRepeatSpec<\n  U extends GenericUnitSpec<any, any>,\n  L extends GenericLayerSpec<any>\n> extends BaseSpec {\n  /**\n   * An object that describes what fields should be repeated into views that are laid out as a `row` or `column`.\n   */\n  repeat: Repeat;\n\n  spec: GenericSpec<U, L>;\n\n  /**\n   * Scale and legend resolutions for repeated charts.\n   */\n  resolve?: Resolve;\n}\n\nexport type NormalizedRepeatSpec = GenericRepeatSpec<NormalizedUnitSpec, NormalizedLayerSpec>;\n\nexport interface GenericVConcatSpec<\n  U extends GenericUnitSpec<any, any>,\n  L extends GenericLayerSpec<any>\n> extends BaseSpec {\n  /**\n   * A list of views that should be concatenated and put into a column.\n   */\n  vconcat: (GenericSpec<U, L>)[];\n\n  /**\n   * Scale, axis, and legend resolutions for vertically concatenated charts.\n   */\n  resolve?: Resolve;\n}\n\nexport interface GenericHConcatSpec<\n  U extends GenericUnitSpec<any, any>,\n  L extends GenericLayerSpec<any>\n> extends BaseSpec {\n  /**\n   * A list of views that should be concatenated and put into a row.\n   */\n  hconcat: (GenericSpec<U, L>)[];\n\n  /**\n   * Scale, axis, and legend resolutions for horizontally concatenated charts.\n   */\n  resolve?: Resolve;\n}\n\nexport type NormalizedConcatSpec =\n  GenericVConcatSpec<NormalizedUnitSpec, NormalizedLayerSpec> | GenericHConcatSpec<NormalizedUnitSpec, NormalizedLayerSpec>;\n\nexport type GenericSpec<\n  U extends GenericUnitSpec<any, any>,\n  L extends GenericLayerSpec<any>\n> = U | L | GenericFacetSpec<U, L> | GenericRepeatSpec<U, L> |\n  GenericVConcatSpec<U, L> |GenericHConcatSpec<U, L>;\n\nexport type NormalizedSpec = GenericSpec<NormalizedUnitSpec, NormalizedLayerSpec>;\n\nexport type TopLevelFacetedUnitSpec = TopLevel<FacetedCompositeUnitSpec> & DataRequired;\nexport type TopLevelFacetSpec = TopLevel<GenericFacetSpec<CompositeUnitSpec, ExtendedLayerSpec>> & DataRequired;\n\nexport type TopLevelSpec = TopLevelFacetedUnitSpec | TopLevelFacetSpec | TopLevel<ExtendedLayerSpec> |\nTopLevel<GenericRepeatSpec<CompositeUnitSpec, ExtendedLayerSpec>> | TopLevel<GenericVConcatSpec<CompositeUnitSpec, ExtendedLayerSpec>> | TopLevel<GenericHConcatSpec<CompositeUnitSpec, ExtendedLayerSpec>>;\n\n/* Custom type guards */\n\n\nexport function isFacetSpec(spec: BaseSpec): spec is GenericFacetSpec<any, any> {\n  return spec['facet'] !== undefined;\n}\n\nexport function isUnitSpec(spec: BaseSpec): spec is FacetedCompositeUnitSpec | NormalizedUnitSpec {\n  return !!spec['mark'];\n}\n\nexport function isLayerSpec(spec: BaseSpec): spec is GenericLayerSpec<any> {\n  return spec['layer'] !== undefined;\n}\n\nexport function isRepeatSpec(spec: BaseSpec): spec is GenericRepeatSpec<any, any> {\n  return spec['repeat'] !== undefined;\n}\n\nexport function isConcatSpec(spec: BaseSpec):\n  spec is GenericVConcatSpec<any, any> |\n    GenericHConcatSpec<any, any> {\n  return isVConcatSpec(spec) || isHConcatSpec(spec);\n}\n\nexport function isVConcatSpec(spec: BaseSpec): spec is GenericVConcatSpec<any, any> {\n  return spec['vconcat'] !== undefined;\n}\n\nexport function isHConcatSpec(spec: BaseSpec): spec is GenericHConcatSpec<any, any> {\n  return spec['hconcat'] !== undefined;\n}\n\n/**\n * Decompose extended unit specs into composition of pure unit specs.\n */\n// TODO: consider moving this to another file.  Maybe vl.spec.normalize or vl.normalize\nexport function normalize(spec: TopLevelSpec | GenericSpec<CompositeUnitSpec, ExtendedLayerSpec> | FacetedCompositeUnitSpec, config: Config): NormalizedSpec {\n  if (isFacetSpec(spec)) {\n    return normalizeFacet(spec, config);\n  }\n  if (isLayerSpec(spec)) {\n    return normalizeLayer(spec, config);\n  }\n  if (isRepeatSpec(spec)) {\n    return normalizeRepeat(spec, config);\n  }\n  if (isVConcatSpec(spec)) {\n    return normalizeVConcat(spec, config);\n  }\n  if (isHConcatSpec(spec)) {\n    return normalizeHConcat(spec, config);\n  }\n  if (isUnitSpec(spec)) {\n    const hasRow = channelHasField(spec.encoding, ROW);\n    const hasColumn = channelHasField(spec.encoding, COLUMN);\n\n    if (hasRow || hasColumn) {\n      return normalizeFacetedUnit(spec, config);\n    }\n    return normalizeNonFacetUnit(spec, config);\n  }\n  throw new Error(log.message.INVALID_SPEC);\n}\n\nfunction normalizeFacet(spec: GenericFacetSpec<CompositeUnitSpec, ExtendedLayerSpec>, config: Config): NormalizedFacetSpec {\n  const {spec: subspec, ...rest} = spec;\n  return {\n    ...rest,\n    // TODO: remove \"any\" once we support all facet listed in https://github.com/vega/vega-lite/issues/2760\n    spec: normalize(subspec, config) as any\n  };\n}\n\nfunction mergeEncoding(opt: {parentEncoding: Encoding<any>, encoding: Encoding<any>}): Encoding<any> {\n  const {parentEncoding, encoding} = opt;\n  if (parentEncoding && encoding) {\n    const overriden = keys(parentEncoding).reduce((o, key) => {\n      if (encoding[key]) {\n        o.push(key);\n      }\n      return o;\n    }, []);\n\n    if (overriden.length > 0) {\n      log.warn(log.message.encodingOverridden(overriden));\n    }\n  }\n\n  const merged = {\n    ...(parentEncoding || {}),\n    ...(encoding || {})\n  };\n  return keys(merged).length > 0 ? merged : undefined;\n}\n\nfunction mergeProjection(opt: {parentProjection: Projection, projection: Projection}) {\n  const {parentProjection, projection} = opt;\n  if (parentProjection && projection) {\n    log.warn(log.message.projectionOverridden({parentProjection, projection}));\n  }\n  return projection || parentProjection;\n}\n\nfunction normalizeLayer(\n  spec: ExtendedLayerSpec,\n  config: Config,\n  parentEncoding?: Encoding<string | RepeatRef>,\n  parentProjection?: Projection\n): NormalizedLayerSpec {\n  const {layer, encoding, projection, ...rest} = spec;\n  const mergedEncoding = mergeEncoding({parentEncoding, encoding});\n  const mergedProjection = mergeProjection({parentProjection, projection});\n  return {\n    ...rest,\n    layer: layer.map((subspec) => {\n      if (isLayerSpec(subspec)) {\n        return normalizeLayer(subspec, config, mergedEncoding, mergedProjection);\n      }\n      return normalizeNonFacetUnit(subspec, config, mergedEncoding, mergedProjection);\n    })\n  };\n}\n\nfunction normalizeRepeat(spec: GenericRepeatSpec<CompositeUnitSpec, ExtendedLayerSpec>, config: Config): NormalizedRepeatSpec {\n  const {spec: subspec, ...rest} = spec;\n  return {\n    ...rest,\n    spec: normalize(subspec, config)\n  };\n}\n\nfunction normalizeVConcat(spec: GenericVConcatSpec<CompositeUnitSpec, ExtendedLayerSpec>, config: Config): NormalizedConcatSpec {\n  const {vconcat: vconcat, ...rest} = spec;\n  return {\n    ...rest,\n    vconcat: vconcat.map((subspec) => normalize(subspec, config))\n  };\n}\n\nfunction normalizeHConcat(spec: GenericHConcatSpec<CompositeUnitSpec, ExtendedLayerSpec>, config: Config): NormalizedConcatSpec {\n  const {hconcat: hconcat, ...rest} = spec;\n  return {\n    ...rest,\n    hconcat: hconcat.map((subspec) => normalize(subspec, config))\n  };\n}\n\nfunction normalizeFacetedUnit(spec: FacetedCompositeUnitSpec, config: Config): NormalizedFacetSpec {\n  // New encoding in the inside spec should not contain row / column\n  // as row/column should be moved to facet\n  const {row: row, column: column, ...encoding} = spec.encoding;\n\n  // Mark and encoding should be moved into the inner spec\n  const {mark, width, projection, height, selection, encoding: _, ...outerSpec} = spec;\n\n  return {\n    ...outerSpec,\n    facet: {\n      ...(row ? {row} : {}),\n      ...(column ? {column}: {}),\n    },\n    spec: normalizeNonFacetUnit({\n      ...(projection ? {projection} : {}),\n      mark,\n      ...(width ? {width} : {}),\n      ...(height ? {height} : {}),\n      encoding,\n      ...(selection ? {selection} : {})\n    }, config)\n  };\n}\n\nfunction isNonFacetUnitSpecWithPrimitiveMark(spec: GenericUnitSpec<Encoding<Field>, AnyMark>):\n  spec is GenericUnitSpec<Encoding<Field>, Mark> {\n    return isPrimitiveMark(spec.mark);\n}\n\nfunction getPointOverlay(markDef: MarkDef, markConfig: LineConfig, encoding: Encoding<Field>): MarkProperties {\n  if (markDef.point === 'transparent') {\n    return {opacity: 0};\n  } else if (markDef.point) { // truthy : true or object\n    return isObject(markDef.point) ? markDef.point : {};\n  } else if (markDef.point !== undefined) { // false or null\n    return null;\n  } else { // undefined (not disabled)\n    if (markConfig.point || encoding.shape) {\n      // enable point overlay if config[mark].point is truthy or if encoding.shape is provided\n      return isObject(markConfig.point) ? markConfig.point : {};\n    }\n    // markDef.point is defined as falsy\n    return null;\n  }\n}\n\nfunction getLineOverlay(markDef: MarkDef, markConfig: AreaConfig): MarkProperties {\n  if (markDef.line) { // true or object\n    return markDef.line === true ? {} : markDef.line;\n  } else if (markDef.line !== undefined) { // false or null\n    return null;\n  } else { // undefined (not disabled)\n    if (markConfig.line) {\n      // enable line overlay if config[mark].line is truthy\n      return markConfig.line === true ? {} : markConfig.line;\n    }\n    // markDef.point is defined as falsy\n    return null;\n  }\n}\n\nfunction normalizeNonFacetUnit(\n  spec: GenericUnitSpec<Encoding<Field>, AnyMark>, config: Config,\n  parentEncoding?: Encoding<string | RepeatRef>, parentProjection?: Projection\n): NormalizedUnitSpec | NormalizedLayerSpec {\n  const {encoding, projection} = spec;\n  const mark = isMarkDef(spec.mark) ? spec.mark.type : spec.mark;\n\n\n  // merge parent encoding / projection first\n  if (parentEncoding || parentProjection) {\n    const mergedProjection = mergeProjection({parentProjection, projection});\n    const mergedEncoding = mergeEncoding({parentEncoding, encoding});\n    return normalizeNonFacetUnit({\n      ...spec,\n      ...(mergedProjection ? {projection: mergedProjection} : {}),\n      ...(mergedEncoding ? {encoding: mergedEncoding} : {}),\n    }, config);\n  }\n\n  if (isNonFacetUnitSpecWithPrimitiveMark(spec)) {\n    // TODO: thoroughly test\n    if (isRanged(encoding)) {\n      return normalizeRangedUnit(spec);\n    }\n\n    if (mark === 'line' && (encoding.x2 || encoding.y2)) {\n      log.warn(log.message.lineWithRange(!!encoding.x2, !!encoding.y2));\n\n      return normalizeNonFacetUnit({\n        mark: 'rule',\n        ...spec\n      }, config, parentEncoding, parentProjection);\n    }\n\n    if (isPathMark(mark)) {\n      return normalizePathOverlay(spec, config);\n    }\n\n    return spec; // Nothing to normalize\n  } else {\n    return compositeMark.normalize(spec, config);\n  }\n}\n\nfunction normalizeRangedUnit(spec: NormalizedUnitSpec) {\n  const hasX = channelHasField(spec.encoding, X);\n  const hasY = channelHasField(spec.encoding, Y);\n  const hasX2 = channelHasField(spec.encoding, X2);\n  const hasY2 = channelHasField(spec.encoding, Y2);\n  if ((hasX2 && !hasX) || (hasY2 && !hasY)) {\n    const normalizedSpec = duplicate(spec);\n    if (hasX2 && !hasX) {\n      normalizedSpec.encoding.x = normalizedSpec.encoding.x2;\n      delete normalizedSpec.encoding.x2;\n    }\n    if (hasY2 && !hasY) {\n      normalizedSpec.encoding.y = normalizedSpec.encoding.y2;\n      delete normalizedSpec.encoding.y2;\n    }\n\n    return normalizedSpec;\n  }\n  return spec;\n}\n\nfunction dropLineAndPoint(markDef: MarkDef): MarkDef | Mark {\n  const {point: _point, line: _line, ...mark} = markDef;\n\n  return keys(mark).length > 1 ? mark : mark.type;\n}\n\nfunction normalizePathOverlay(spec: NormalizedUnitSpec, config: Config = {}): NormalizedLayerSpec | NormalizedUnitSpec {\n\n  // _ is used to denote a dropped property of the unit spec\n  // which should not be carried over to the layer spec\n  const {selection, projection, encoding, mark, ...outerSpec} = spec;\n  const markDef = isMarkDef(mark) ? mark : {type: mark};\n\n  const pointOverlay = getPointOverlay(markDef, config[markDef.type], encoding);\n  const lineOverlay = markDef.type === 'area' && getLineOverlay(markDef, config[markDef.type]);\n\n  if (!pointOverlay && !lineOverlay) {\n    return {\n      ...spec,\n      // Do not include point / line overlay in the normalize spec\n      mark: dropLineAndPoint(markDef)\n    };\n  }\n\n  const layer: NormalizedUnitSpec[] = [{\n    // Do not include point / line overlay in the normalize spec\n    mark: dropLineAndPoint({\n      ...markDef,\n      // make area mark translucent by default\n      // TODO: extract this 0.7 to be shared with default opacity for point/tick/...\n      ...(markDef.type === 'area' ? {opacity: 0.7} : {}),\n    }),\n    encoding\n  }];\n\n  // FIXME: disable tooltip for the line layer if tooltip is not group-by field.\n  // FIXME: determine rules for applying selections.\n\n  // Need to copy stack config to overlayed layer\n  const stackProps = stack(markDef, encoding, config ? config.stack : undefined);\n\n  let overlayEncoding = encoding;\n  if (stackProps) {\n    const {fieldChannel: stackFieldChannel, offset} = stackProps;\n    overlayEncoding = {\n      ...encoding,\n      [stackFieldChannel]: {\n        ...encoding[stackFieldChannel],\n        ...(offset ? {stack: offset} : {})\n      }\n    };\n  }\n\n  if (lineOverlay) {\n    layer.push({\n      ...(projection ? {projection} : {}),\n      mark: {\n        type: 'line',\n        ...lineOverlay\n      },\n      ...(selection ? {selection} : {}),\n      encoding: overlayEncoding\n    });\n  }\n  if (pointOverlay) {\n    layer.push({\n      ...(projection ? {projection} : {}),\n      mark: {\n        type: 'point',\n        opacity: 1,\n        filled: true,\n        ...pointOverlay\n      },\n      ...(selection ? {selection} : {}),\n      encoding: overlayEncoding\n    });\n  }\n\n  return {\n    ...outerSpec,\n    layer\n  };\n}\n\n// TODO: add vl.spec.validate & move stuff from vl.validate to here\n\n/* Accumulate non-duplicate fieldDefs in a dictionary */\nfunction accumulate(dict: any, defs: FieldDef<Field>[]): any {\n  defs.forEach(function(fieldDef) {\n    // Consider only pure fieldDef properties (ignoring scale, axis, legend)\n    const pureFieldDef = ['field', 'type', 'value', 'timeUnit', 'bin', 'aggregate'].reduce((f, key) => {\n      if (fieldDef[key] !== undefined) {\n        f[key] = fieldDef[key];\n      }\n      return f;\n    }, {});\n    const key = hash(pureFieldDef);\n    dict[key] = dict[key] || fieldDef;\n  });\n  return dict;\n}\n\n/* Recursively get fieldDefs from a spec, returns a dictionary of fieldDefs */\nfunction fieldDefIndex<T>(spec: GenericSpec<any, any>, dict: Dict<FieldDef<T>> = {}): Dict<FieldDef<T>> {\n  // FIXME(https://github.com/vega/vega-lite/issues/2207): Support fieldDefIndex for repeat\n  if (isLayerSpec(spec)) {\n    spec.layer.forEach(layer => {\n      if (isUnitSpec(layer)) {\n        accumulate(dict, vlEncoding.fieldDefs(layer.encoding));\n      } else {\n        fieldDefIndex(layer, dict);\n      }\n    });\n  } else if (isFacetSpec(spec)) {\n    accumulate(dict, vlEncoding.fieldDefs(spec.facet));\n    fieldDefIndex(spec.spec, dict);\n  } else if (isRepeatSpec(spec)) {\n    fieldDefIndex(spec.spec, dict);\n  } else if (isConcatSpec(spec)) {\n    const childSpec = isVConcatSpec(spec) ? spec.vconcat : spec.hconcat;\n    childSpec.forEach(child => fieldDefIndex(child, dict));\n  } else { // Unit Spec\n    accumulate(dict, vlEncoding.fieldDefs(spec.encoding));\n  }\n  return dict;\n}\n\n/* Returns all non-duplicate fieldDefs in a spec in a flat array */\nexport function fieldDefs(spec: GenericSpec<any, any>): FieldDef<any>[] {\n  return vals(fieldDefIndex(spec));\n}\n\nexport function isStacked(spec: TopLevel<FacetedCompositeUnitSpec>, config?: Config): boolean {\n  config = config || spec.config;\n  if (isPrimitiveMark(spec.mark)) {\n    return stack(spec.mark, spec.encoding,\n            config ? config.stack : undefined\n          ) !== null;\n  }\n  return false;\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export {\n  default as accessor,\n  accessorName,\n  accessorFields\n} from './src/accessor';\n\nexport {\n  id,\n  identity,\n  zero,\n  one,\n  truthy,\n  falsy\n} from './src/accessors';\n\nexport {\n  default as logger,\n  None,\n  Error,\n  Warn,\n  Info,\n  Debug\n} from './src/logger';\n\nexport {\n  panLinear,\n  panLog,\n  panPow,\n  zoomLinear,\n  zoomLog,\n  zoomPow\n} from './src/transform';\n\nexport {default as array} from './src/array';\nexport {default as compare} from './src/compare';\nexport {default as constant} from './src/constant';\nexport {default as debounce} from './src/debounce';\nexport {default as error} from './src/error';\nexport {default as extend} from './src/extend';\nexport {default as extentIndex} from './src/extentIndex';\nexport {default as fastmap} from './src/fastmap';\nexport {default as field} from './src/field';\nexport {default as inherits} from './src/inherits';\nexport {default as isArray} from './src/isArray';\nexport {default as isBoolean} from './src/isBoolean';\nexport {default as isDate} from './src/isDate';\nexport {default as isFunction} from './src/isFunction';\nexport {default as isNumber} from './src/isNumber';\nexport {default as isObject} from './src/isObject';\nexport {default as isRegExp} from './src/isRegExp';\nexport {default as isString} from './src/isString';\nexport {default as key} from './src/key';\nexport {default as merge} from './src/merge';\nexport {default as pad} from './src/pad';\nexport {default as peek} from './src/peek';\nexport {default as repeat} from './src/repeat';\nexport {default as splitAccessPath} from './src/splitAccessPath';\nexport {default as stringValue} from './src/stringValue';\nexport {default as toBoolean} from './src/toBoolean';\nexport {default as toDate} from './src/toDate';\nexport {default as toNumber} from './src/toNumber';\nexport {default as toString} from './src/toString';\nexport {default as toSet} from './src/toSet';\nexport {default as truncate} from './src/truncate';\nexport {default as visitArray} from './src/visitArray';\n","export default function(fn, fields, name) {\n  fn.fields = fields || [];\n  fn.fname = name;\n  return fn;\n}\n\nexport function accessorName(fn) {\n  return fn == null ? null : fn.fname;\n}\n\nexport function accessorFields(fn) {\n  return fn == null ? null : fn.fields;\n}\n","import accessor from './accessor';\nimport field from './field';\n\nvar empty = [];\n\nexport var id = field('id');\n\nexport var identity = accessor(function(_) { return _; }, empty, 'identity');\n\nexport var zero = accessor(function() { return 0; }, empty, 'zero');\n\nexport var one = accessor(function() { return 1; }, empty, 'one');\n\nexport var truthy = accessor(function() { return true; }, empty, 'true');\n\nexport var falsy = accessor(function() { return false; }, empty, 'false');\n","import accessor from './accessor';\nimport splitAccessPath from './splitAccessPath';\nimport stringValue from './stringValue';\n\nexport default function(field, name) {\n  var path = splitAccessPath(field),\n      code = 'return _[' + path.map(stringValue).join('][') + '];';\n\n  return accessor(\n    Function('_', code),\n    [(field = path.length===1 ? path[0] : field)],\n    name || field\n  );\n}\n","import error from './error';\n\nexport default function(p) {\n  var path = [],\n      q = null,\n      b = 0,\n      n = p.length,\n      s = '',\n      i, j, c;\n\n  p = p + '';\n\n  function push() {\n    path.push(s + p.substring(i, j));\n    s = '';\n    i = j + 1;\n  }\n\n  for (i=j=0; j<n; ++j) {\n    c = p[j];\n    if (c === '\\\\') {\n      s += p.substring(i, j);\n      i = ++j;\n    } else if (c === q) {\n      push();\n      q = null;\n      b = -1;\n    } else if (q) {\n      continue;\n    } else if (i === b && c === '\"') {\n      i = j + 1;\n      q = c;\n    } else if (i === b && c === \"'\") {\n      i = j + 1;\n      q = c;\n    } else if (c === '.' && !b) {\n      if (j > i) {\n        push();\n      } else {\n        i = j + 1;\n      }\n    } else if (c === '[') {\n      if (j > i) push();\n      b = i = j + 1;\n    } else if (c === ']') {\n      if (!b) error('Access path missing open bracket: ' + p);\n      if (b > 0) push();\n      b = 0;\n      i = j + 1;\n    }\n  }\n\n  if (b) error('Access path missing closing bracket: ' + p);\n  if (q) error('Access path missing closing quote: ' + p);\n\n  if (j > i) {\n    j++;\n    push();\n  }\n\n  return path;\n}\n","export default function(message) {\n  throw Error(message);\n}\n","import isArray from './isArray';\nimport isObject from './isObject';\nimport isString from './isString';\n\nexport default function $(x) {\n  return isArray(x) ? '[' + x.map($) + ']'\n    : isObject(x) || isString(x) ?\n      // Output valid JSON and JS source strings.\n      // See http://timelessrepo.com/json-isnt-a-javascript-subset\n      JSON.stringify(x).replace('\\u2028','\\\\u2028').replace('\\u2029', '\\\\u2029')\n    : x;\n}\n","export default Array.isArray;\n","export default function(_) {\n  return _ === Object(_);\n}\n","export default function(_) {\n  return typeof _ === 'string';\n}\n","function log(method, level, input) {\n  var args = [level].concat([].slice.call(input));\n  console[method].apply(console, args); // eslint-disable-line no-console\n}\n\nexport var None  = 0;\nexport var Error = 1;\nexport var Warn  = 2;\nexport var Info  = 3;\nexport var Debug = 4;\n\nexport default function(_) {\n  var level = _ || None;\n  return {\n    level: function(_) {\n      if (arguments.length) {\n        level = +_;\n        return this;\n      } else {\n        return level;\n      }\n    },\n    error: function() {\n      if (level >= Error) log('error', 'ERROR', arguments);\n      return this;\n    },\n    warn: function() {\n      if (level >= Warn) log('warn', 'WARN', arguments);\n      return this;\n    },\n    info: function() {\n      if (level >= Info) log('log', 'INFO', arguments);\n      return this;\n    },\n    debug: function() {\n      if (level >= Debug) log('log', 'DEBUG', arguments);\n      return this;\n    }\n  }\n}\n","import {identity} from './accessors';\nimport peek from './peek';\nimport toNumber from './toNumber';\n\nfunction exp(sign) {\n  return function(x) { return sign * Math.exp(x); };\n}\n\nfunction log(sign) {\n  return function(x) { return Math.log(sign * x); };\n}\n\nfunction pow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction pan(domain, delta, lift, ground) {\n  var d0 = lift(domain[0]),\n      d1 = lift(peek(domain)),\n      dd = (d1 - d0) * delta;\n\n  return [\n    ground(d0 - dd),\n    ground(d1 - dd)\n  ];\n}\n\nexport function panLinear(domain, delta) {\n  return pan(domain, delta, toNumber, identity);\n}\n\nexport function panLog(domain, delta) {\n  var sign = Math.sign(domain[0]);\n  return pan(domain, delta, log(sign), exp(sign));\n}\n\nexport function panPow(domain, delta, exponent) {\n  return pan(domain, delta, pow(exponent), pow(1/exponent));\n}\n\nfunction zoom(domain, anchor, scale, lift, ground) {\n  var d0 = lift(domain[0]),\n      d1 = lift(peek(domain)),\n      da = anchor != null ? lift(anchor) : (d0 + d1) / 2;\n\n  return [\n    ground(da + (d0 - da) * scale),\n    ground(da + (d1 - da) * scale)\n  ];\n}\n\nexport function zoomLinear(domain, anchor, scale) {\n  return zoom(domain, anchor, scale, toNumber, identity);\n}\n\nexport function zoomLog(domain, anchor, scale) {\n  var sign = Math.sign(domain[0]);\n  return zoom(domain, anchor, scale, log(sign), exp(sign));\n}\n\nexport function zoomPow(domain, anchor, scale, exponent) {\n  return zoom(domain, anchor, scale, pow(exponent), pow(1/exponent));\n}\n","export default function(array) {\n  return array[array.length - 1];\n}\n","export default function(_) {\n  return _ == null || _ === '' ? null : +_;\n}\n","import isArray from './isArray';\n\nexport default function(_) {\n  return _ != null ? (isArray(_) ? _ : [_]) : [];\n}\n","import {default as accessor, accessorFields} from './accessor';\nimport array from './array';\nimport isFunction from './isFunction';\nimport splitAccessPath from './splitAccessPath';\nimport stringValue from './stringValue';\n\nexport default function(fields, orders) {\n  var idx = [],\n      cmp = (fields = array(fields)).map(function(f, i) {\n        if (f == null) {\n          return null;\n        } else {\n          idx.push(i);\n          return isFunction(f) ? f\n            : splitAccessPath(f).map(stringValue).join('][');\n        }\n      }),\n      n = idx.length - 1,\n      ord = array(orders),\n      code = 'var u,v;return ',\n      i, j, f, u, v, d, t, lt, gt;\n\n  if (n < 0) return null;\n\n  for (j=0; j<=n; ++j) {\n    i = idx[j];\n    f = cmp[i];\n\n    if (isFunction(f)) {\n      d = 'f' + i;\n      u = '(u=this.' + d + '(a))';\n      v = '(v=this.' + d + '(b))';\n      (t = t || {})[d] = f;\n    } else {\n      u = '(u=a['+f+'])';\n      v = '(v=b['+f+'])';\n    }\n\n    d = '((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))';\n\n    if (ord[i] !== 'descending') {\n      gt = 1;\n      lt = -1;\n    } else {\n      gt = -1;\n      lt = 1;\n    }\n\n    code += '(' + u+'<'+v+'||u==null)&&v!=null?' + lt\n      + ':(u>v||v==null)&&u!=null?' + gt\n      + ':'+d+'!==u&&v===v?' + lt\n      + ':v!==v&&u===u?' + gt\n      + (i < n ? ':' : ':0');\n  }\n\n  f = Function('a', 'b', code + ';');\n  if (t) f = f.bind(t);\n\n  fields = fields.reduce(function(map, field) {\n    if (isFunction(field)) {\n      (accessorFields(field) || []).forEach(function(_) { map[_] = 1; });\n    } else if (field != null) {\n      map[field + ''] = 1;\n    }\n    return map;\n  }, {});\n\n  return accessor(f, Object.keys(fields));\n}\n","export default function(_) {\n  return typeof _ === 'function';\n}\n","import isFunction from './isFunction';\n\nexport default function(_) {\n  return isFunction(_) ? _ : function() { return _; };\n}\n","export default function(delay, handler) {\n  var tid, evt;\n\n  function callback() {\n    handler(evt);\n    tid = evt = null;\n  }\n\n  return function(e) {\n    evt = e;\n    if (tid) clearTimeout(tid);\n    tid = setTimeout(callback, delay);\n  };\n}\n","export default function(_) {\n  for (var x, k, i=1, len=arguments.length; i<len; ++i) {\n    x = arguments[i];\n    for (k in x) { _[k] = x[k]; }\n  }\n  return _;\n}\n","export default function(array, f) {\n  var i = -1,\n      n = array.length,\n      a, b, c, u, v;\n\n  if (f == null) {\n    while (++i < n) {\n      b = array[i];\n      if (b != null && b >= b) {\n        a = c = b;\n        break;\n      }\n    }\n    u = v = i;\n    while (++i < n) {\n      b = array[i];\n      if (b != null) {\n        if (a > b) {\n          a = b;\n          u = i;\n        }\n        if (c < b) {\n          c = b;\n          v = i;\n        }\n      }\n    }\n  } else {\n    while (++i < n) {\n      b = f(array[i], i, array);\n      if (b != null && b >= b) {\n        a = c = b;\n        break;\n      }\n    }\n    u = v = i;\n    while (++i < n) {\n      b = f(array[i], i, array);\n      if (b != null) {\n        if (a > b) {\n          a = b;\n          u = i;\n        }\n        if (c < b) {\n          c = b;\n          v = i;\n        }\n      }\n    }\n  }\n\n  return [u, v];\n}\n","var NULL = {};\n\nexport default function(input) {\n  var obj = {},\n      map,\n      test;\n\n  function has(key) {\n    return obj.hasOwnProperty(key) && obj[key] !== NULL;\n  }\n\n  map = {\n    size: 0,\n    empty: 0,\n    object: obj,\n    has: has,\n    get: function(key) {\n      return has(key) ? obj[key] : undefined;\n    },\n    set: function(key, value) {\n      if (!has(key)) {\n        ++map.size;\n        if (obj[key] === NULL) --map.empty;\n      }\n      obj[key] = value;\n      return this;\n    },\n    delete: function(key) {\n      if (has(key)) {\n        --map.size;\n        ++map.empty;\n        obj[key] = NULL;\n      }\n      return this;\n    },\n    clear: function() {\n      map.size = map.empty = 0;\n      map.object = obj = {};\n    },\n    test: function(_) {\n      if (arguments.length) {\n        test = _;\n        return map;\n      } else {\n        return test;\n      }\n    },\n    clean: function() {\n      var next = {},\n          size = 0,\n          key, value;\n      for (key in obj) {\n        value = obj[key];\n        if (value !== NULL && (!test || !test(value))) {\n          next[key] = value;\n          ++size;\n        }\n      }\n      map.size = size;\n      map.empty = 0;\n      map.object = (obj = next);\n    }\n  };\n\n  if (input) Object.keys(input).forEach(function(key) {\n    map.set(key, input[key]);\n  });\n\n  return map;\n}\n","export default function(child, parent) {\n  var proto = (child.prototype = Object.create(parent.prototype));\n  proto.constructor = child;\n  return proto;\n}\n","export default function(_) {\n  return typeof _ === 'boolean';\n}\n","export default function(_) {\n  return Object.prototype.toString.call(_) === '[object Date]';\n}\n","export default function(_) {\n  return typeof _ === 'number';\n}\n","export default function(_) {\n  return Object.prototype.toString.call(_) === '[object RegExp]';\n}\n","import accessor from './accessor';\nimport array from './array';\nimport splitAccessPath from './splitAccessPath';\nimport stringValue from './stringValue';\n\nexport default function(fields, flat) {\n  if (fields) {\n    fields = flat\n      ? array(fields).map(function(f) { return f.replace(/\\\\(.)/g, '$1'); })\n      : array(fields);\n  }\n\n  var fn = !(fields && fields.length)\n    ? function() { return ''; }\n    : Function('_', 'return \\'\\'+' +\n        fields.map(function(f) {\n          return '_[' + (flat\n              ? stringValue(f)\n              : splitAccessPath(f).map(stringValue).join('][')\n            ) + ']';\n        }).join('+\\'|\\'+') + ';');\n\n  return accessor(fn, fields, 'key');\n}\n","export default function(compare, array0, array1, output) {\n  var n0 = array0.length,\n      n1 = array1.length;\n\n  if (!n1) return array0;\n  if (!n0) return array1;\n\n  var merged = output || new array0.constructor(n0 + n1),\n      i0 = 0, i1 = 0, i = 0;\n\n  for (; i0<n0 && i1<n1; ++i) {\n    merged[i] = compare(array0[i0], array1[i1]) > 0\n       ? array1[i1++]\n       : array0[i0++];\n  }\n\n  for (; i0<n0; ++i0, ++i) {\n    merged[i] = array0[i0];\n  }\n\n  for (; i1<n1; ++i1, ++i) {\n    merged[i] = array1[i1];\n  }\n\n  return merged;\n}\n","import repeat from './repeat';\n\nexport default function(str, length, padchar, align) {\n  var c = padchar || ' ',\n      s = str + '',\n      n = length - s.length;\n\n  return n <= 0 ? s\n    : align === 'left' ? repeat(c, n) + s\n    : align === 'center' ? repeat(c, ~~(n/2)) + s + repeat(c, Math.ceil(n/2))\n    : s + repeat(c, n);\n}\n","export default function(str, reps) {\n  var s = '';\n  while (--reps >= 0) s += str;\n  return s;\n}\n","export default function(_) {\n  return _ == null || _ === '' ? null : !_ || _ === 'false' || _ === '0' ? false : !!_;\n}\n","import isDate from './isDate';\nimport isNumber from './isNumber';\n\nfunction defaultParser(_) {\n  return isNumber(_) ? _ : isDate(_) ? _ : Date.parse(_);\n}\n\nexport default function(_, parser) {\n  parser = parser || defaultParser;\n  return _ == null || _ === '' ? null : parser(_);\n}\n","export default function(_) {\n  return _ == null || _ === '' ? null : _ + '';\n}\n","export default function(_) {\n  for (var s={}, i=0, n=_.length; i<n; ++i) s[_[i]] = true;\n  return s;\n}\n","export default function(str, length, align, ellipsis) {\n  var e = ellipsis != null ? ellipsis : '\\u2026',\n      s = str + '',\n      n = s.length,\n      l = Math.max(0, length - e.length);\n\n  return n <= length ? s\n    : align === 'left' ? e + s.slice(n - l)\n    : align === 'center' ? s.slice(0, Math.ceil(l/2)) + e + s.slice(n - ~~(l/2))\n    : s.slice(0, l) + e;\n}\n","export default function(array, filter, visitor) {\n  if (array) {\n    var i = 0, n = array.length, t;\n    if (filter) {\n      for (; i<n; ++i) {\n        if (t = filter(array[i])) visitor(t, i, array);\n      }\n    } else {\n      array.forEach(visitor);\n    }\n  }\n}\n","/*\n * Constants and utilities for encoding channels (Visual variables)\n * such as 'x', 'y', 'color'.\n */\n\nimport {RangeType} from './compile/scale/type';\nimport {Encoding} from './encoding';\nimport {FacetMapping} from './facet';\nimport {Mark} from './mark';\nimport {Flag, flagKeys} from './util';\n\nexport namespace Channel {\n  // Facet\n  export const ROW: 'row' = 'row';\n  export const COLUMN: 'column' = 'column';\n\n  // Position\n  export const X: 'x' = 'x';\n  export const Y: 'y' = 'y';\n  export const X2: 'x2' = 'x2';\n  export const Y2: 'y2' = 'y2';\n\n  // Geo Position\n  export const LATITUDE: 'latitude' = 'latitude';\n  export const LONGITUDE: 'longitude' = 'longitude';\n  export const LATITUDE2: 'latitude2' = 'latitude2';\n  export const LONGITUDE2: 'longitude2' = 'longitude2';\n\n  // Mark property with scale\n  export const COLOR: 'color' = 'color';\n\n  export const FILL: 'fill' = 'fill';\n\n  export const STROKE: 'stroke' = 'stroke';\n\n  export const SHAPE: 'shape' = 'shape';\n  export const SIZE: 'size' = 'size';\n  export const OPACITY: 'opacity' = 'opacity';\n\n  // Non-scale channel\n  export const TEXT: 'text' = 'text';\n  export const ORDER: 'order' = 'order';\n  export const DETAIL: 'detail' = 'detail';\n  export const KEY: 'key' = 'key';\n\n  export const TOOLTIP: 'tooltip' = 'tooltip';\n  export const HREF: 'href' = 'href';\n}\n\nexport type Channel = keyof Encoding<any> | keyof FacetMapping<any>;\n\nexport const X = Channel.X;\nexport const Y = Channel.Y;\nexport const X2 = Channel.X2;\nexport const Y2 = Channel.Y2;\n\nexport const LATITUDE = Channel.LATITUDE;\nexport const LATITUDE2 = Channel.LATITUDE2;\nexport const LONGITUDE = Channel.LONGITUDE;\nexport const LONGITUDE2 = Channel.LONGITUDE2;\n\nexport const ROW = Channel.ROW;\nexport const COLUMN = Channel.COLUMN;\nexport const SHAPE = Channel.SHAPE;\nexport const SIZE = Channel.SIZE;\nexport const COLOR = Channel.COLOR;\n\nexport const FILL = Channel.FILL;\nexport const STROKE = Channel.STROKE;\nexport const TEXT = Channel.TEXT;\nexport const DETAIL = Channel.DETAIL;\nexport const KEY = Channel.KEY;\nexport const ORDER = Channel.ORDER;\nexport const OPACITY = Channel.OPACITY;\nexport const TOOLTIP = Channel.TOOLTIP;\nexport const HREF = Channel.HREF;\n\nexport type GeoPositionChannel = 'longitude' | 'latitude' | 'longitude2' | 'latitude2';\n\nexport const GEOPOSITION_CHANNEL_INDEX: Flag<GeoPositionChannel> = {\n  longitude: 1,\n  longitude2: 1,\n  latitude: 1,\n  latitude2: 1,\n};\n\nexport const GEOPOSITION_CHANNELS = flagKeys(GEOPOSITION_CHANNEL_INDEX);\n\nconst UNIT_CHANNEL_INDEX: Flag<keyof Encoding<any>> = {\n  // position\n  x: 1,\n  y: 1,\n  x2: 1,\n  y2: 1,\n\n  ...GEOPOSITION_CHANNEL_INDEX,\n\n  // color\n  color: 1,\n  fill: 1,\n  stroke: 1,\n\n  // other non-position with scale\n  opacity: 1,\n  size: 1,\n  shape: 1,\n\n  // channels without scales\n  order: 1,\n  text: 1,\n  detail: 1,\n  key: 1,\n  tooltip: 1,\n  href: 1,\n};\n\nexport type ColorChannel = 'color' | 'fill' | 'stroke';\n\nexport function isColorChannel(channel: Channel): channel is ColorChannel {\n  return channel === 'color' || channel === 'fill' || channel === 'stroke';\n}\n\nconst FACET_CHANNEL_INDEX: Flag<keyof FacetMapping<any>> = {\n  row: 1,\n  column: 1\n};\n\nconst CHANNEL_INDEX = {\n  ...UNIT_CHANNEL_INDEX,\n  ...FACET_CHANNEL_INDEX\n};\n\nexport const CHANNELS = flagKeys(CHANNEL_INDEX);\n\nconst {order: _o, detail: _d, ...SINGLE_DEF_CHANNEL_INDEX} = CHANNEL_INDEX;\n/**\n * Channels that cannot have an array of channelDef.\n * model.fieldDef, getFieldDef only work for these channels.\n *\n * (The only two channels that can have an array of channelDefs are \"detail\" and \"order\".\n * Since there can be multiple fieldDefs for detail and order, getFieldDef/model.fieldDef\n * are not applicable for them.  Similarly, selection projection won't work with \"detail\" and \"order\".)\n */\n\nexport const SINGLE_DEF_CHANNELS: SingleDefChannel[] = flagKeys(SINGLE_DEF_CHANNEL_INDEX);\n\n// Using the following line leads to TypeError: Cannot read property 'elementTypes' of undefined\n// when running the schema generator\n// export type SingleDefChannel = typeof SINGLE_DEF_CHANNELS[0];\nexport type SingleDefChannel = 'x' | 'y' | 'x2' | 'y2' |\n  'longitude' | 'latitude' | 'longitude2' | 'latitude2' |\n  'row' | 'column' |\n  'color' | 'fill' | 'stroke' |\n  'size' | 'shape' | 'opacity' |\n  'text' | 'tooltip' | 'href' | 'key';\n\nexport function isChannel(str: string): str is Channel {\n  return !!CHANNEL_INDEX[str];\n}\n\n// CHANNELS without COLUMN, ROW\nexport const UNIT_CHANNELS = flagKeys(UNIT_CHANNEL_INDEX);\n\n\n// NONPOSITION_CHANNELS = UNIT_CHANNELS without X, Y, X2, Y2;\nconst {\n  x: _x, y: _y,\n  // x2 and y2 share the same scale as x and y\n  x2: _x2, y2: _y2,\n  latitude: _latitude, longitude: _longitude,\n  latitude2: _latitude2, longitude2: _longitude2,\n  // The rest of unit channels then have scale\n  ...NONPOSITION_CHANNEL_INDEX\n} = UNIT_CHANNEL_INDEX;\n\nexport const NONPOSITION_CHANNELS = flagKeys(NONPOSITION_CHANNEL_INDEX);\nexport type NonPositionChannel = typeof NONPOSITION_CHANNELS[0];\n\n// POSITION_SCALE_CHANNELS = X and Y;\nconst POSITION_SCALE_CHANNEL_INDEX: {x:1, y:1} = {x:1, y:1};\nexport const POSITION_SCALE_CHANNELS = flagKeys(POSITION_SCALE_CHANNEL_INDEX);\nexport type PositionScaleChannel = typeof POSITION_SCALE_CHANNELS[0];\n\n// NON_POSITION_SCALE_CHANNEL = SCALE_CHANNELS without X, Y\nconst {\n  // x2 and y2 share the same scale as x and y\n  // text and tooltip have format instead of scale,\n  // href has neither format, nor scale\n  text: _t, tooltip: _tt, href: _hr,\n  // detail and order have no scale\n  detail: _dd, key: _k, order: _oo,\n  ...NONPOSITION_SCALE_CHANNEL_INDEX\n} = NONPOSITION_CHANNEL_INDEX;\nexport const NONPOSITION_SCALE_CHANNELS = flagKeys(NONPOSITION_SCALE_CHANNEL_INDEX);\nexport type NonPositionScaleChannel = typeof NONPOSITION_SCALE_CHANNELS[0];\n\n// Declare SCALE_CHANNEL_INDEX\nconst SCALE_CHANNEL_INDEX = {\n  ...POSITION_SCALE_CHANNEL_INDEX,\n  ...NONPOSITION_SCALE_CHANNEL_INDEX\n};\n\n/** List of channels with scales */\nexport const SCALE_CHANNELS = flagKeys(SCALE_CHANNEL_INDEX);\nexport type ScaleChannel = typeof SCALE_CHANNELS[0];\n\nexport function isScaleChannel(channel: Channel): channel is ScaleChannel {\n  return !!SCALE_CHANNEL_INDEX[channel];\n}\n\nexport type SupportedMark = {\n  [mark in Mark]?: boolean\n};\n\n/**\n * Return whether a channel supports a particular mark type.\n * @param channel  channel name\n * @param mark the mark type\n * @return whether the mark supports the channel\n */\nexport function supportMark(channel: Channel, mark: Mark) {\n  return mark in getSupportedMark(channel);\n}\n\n/**\n * Return a dictionary showing whether a channel supports mark type.\n * @param channel\n * @return A dictionary mapping mark types to boolean values.\n */\nexport function getSupportedMark(channel: Channel): SupportedMark {\n  switch (channel) {\n    case COLOR:\n    case FILL:\n    case STROKE:\n\n    case DETAIL:\n    case KEY:\n    case TOOLTIP:\n    case HREF:\n    case ORDER:    // TODO: revise (order might not support rect, which is not stackable?)\n    case OPACITY:\n    case ROW:\n    case COLUMN:\n      return { // all marks\n        point: true, tick: true, rule: true, circle: true, square: true,\n        bar: true, rect: true, line: true, trail: true, area: true, text: true, geoshape: true\n      };\n    case X:\n    case Y:\n    case LATITUDE:\n    case LONGITUDE:\n      return { // all marks except geoshape. geoshape does not use X, Y -- it uses a projection\n        point: true, tick: true, rule: true, circle: true, square: true,\n        bar: true, rect: true, line: true, trail: true, area: true, text: true\n      };\n    case X2:\n    case Y2:\n    case LATITUDE2:\n    case LONGITUDE2:\n      return {\n        rule: true, bar: true, rect: true, area: true\n      };\n    case SIZE:\n      return {\n        point: true, tick: true, rule: true, circle: true, square: true,\n        bar: true, text: true, line: true, trail: true\n      };\n    case SHAPE:\n      return {point: true, geoshape: true};\n    case TEXT:\n      return {text: true};\n  }\n}\n\nexport function rangeType(channel: Channel): RangeType {\n  switch (channel) {\n    case X:\n    case Y:\n    case SIZE:\n    case OPACITY:\n    // X2 and Y2 use X and Y scales, so they similarly have continuous range.\n    case X2:\n    case Y2:\n      return 'continuous';\n\n    case ROW:\n    case COLUMN:\n    case SHAPE:\n    // TEXT, TOOLTIP, and HREF have no scale but have discrete output\n    case TEXT:\n    case TOOLTIP:\n    case HREF:\n      return 'discrete';\n\n    // Color can be either continuous or discrete, depending on scale type.\n    case COLOR:\n    case FILL:\n    case STROKE:\n      return 'flexible';\n\n    // No scale, no range type.\n\n    case LATITUDE:\n    case LONGITUDE:\n    case LATITUDE2:\n    case LONGITUDE2:\n    case DETAIL:\n    case KEY:\n    case ORDER:\n      return undefined;\n  }\n  /* istanbul ignore next: should never reach here. */\n  throw new Error('rangeType not implemented for ' + channel);\n}\n","import * as stableStringify_ from 'json-stable-stringify';\nimport {isArray, isNumber, isString, splitAccessPath, stringValue} from 'vega-util';\nimport {isLogicalAnd, isLogicalNot, isLogicalOr, LogicalOperand} from './logical';\n\nconst stableStringify = stableStringify_['default'] || stableStringify_;\n\n/**\n * Creates an object composed of the picked object properties.\n *\n * Example:  (from lodash)\n *\n * var object = {'a': 1, 'b': '2', 'c': 3};\n * pick(object, ['a', 'c']);\n * //  {'a': 1, 'c': 3}\n *\n */\nexport function pick(obj: object, props: string[]) {\n  const copy = {};\n  for (const prop of props) {\n    if (obj.hasOwnProperty(prop)) {\n      copy[prop] = obj[prop];\n    }\n  }\n  return copy;\n}\n\n/**\n * The opposite of _.pick; this method creates an object composed of the own\n * and inherited enumerable string keyed properties of object that are not omitted.\n */\nexport function omit(obj: object, props: string[]) {\n  const copy = duplicate(obj);\n  for (const prop of props) {\n    delete copy[prop];\n  }\n  return copy;\n}\n\n/**\n * Converts any object into a string representation that can be consumed by humans.\n */\nexport const stringify = stableStringify;\n\n/**\n * Converts any object into a string of limited size, or a number.\n */\nexport function hash(a: any) {\n  if (isNumber(a)) {\n    return a;\n  }\n\n  const str = isString(a) ? a : stableStringify(a);\n\n  // short strings can be used as hash directly, longer strings are hashed to reduce memory usage\n  if (str.length < 100) {\n    return str;\n  }\n\n  // from http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/\n  let h = 0;\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i);\n    h = ((h<<5)-h)+char;\n    h = h & h; // Convert to 32bit integer\n  }\n  return h;\n}\n\nexport function contains<T>(array: T[], item: T) {\n  return array.indexOf(item) > -1;\n}\n\n/** Returns the array without the elements in item */\nexport function without<T>(array: T[], excludedItems: T[]) {\n  return array.filter(item => !contains(excludedItems, item));\n}\n\nexport function union<T>(array: T[], other: T[]) {\n  return array.concat(without(other, array));\n}\n\n/**\n * Returns true if any item returns true.\n */\nexport function some<T>(arr: T[], f: (d: T, k?: any, i?: any) => boolean) {\n  let i = 0;\n  for (let k = 0; k<arr.length; k++) {\n    if (f(arr[k], k, i++)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Returns true if all items return true.\n */\n export function every<T>(arr: T[], f: (d: T, k?: any, i?: any) => boolean) {\n  let i = 0;\n  for (let k = 0; k<arr.length; k++) {\n    if (!f(arr[k], k, i++)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function flatten(arrays: any[]) {\n  return [].concat.apply([], arrays);\n}\n\n/**\n * recursively merges src into dest\n */\nexport function mergeDeep<T>(dest: T, ...src: Partial<T>[]): T {\n  for (const s of src) {\n    dest = deepMerge_(dest, s);\n  }\n  return dest;\n}\n\n// recursively merges src into dest\nfunction deepMerge_(dest: any, src: any) {\n  if (typeof src !== 'object' || src === null) {\n    return dest;\n  }\n\n  for (const p in src) {\n    if (!src.hasOwnProperty(p)) {\n      continue;\n    }\n    if (src[p] === undefined) {\n      continue;\n    }\n    if (typeof src[p] !== 'object' || isArray(src[p]) || src[p] === null) {\n      dest[p] = src[p];\n    } else if (typeof dest[p] !== 'object' || dest[p] === null) {\n      dest[p] = mergeDeep(isArray(src[p].constructor) ? [] : {}, src[p]);\n    } else {\n      mergeDeep(dest[p], src[p]);\n    }\n  }\n  return dest;\n}\n\nexport function unique<T>(values: T[], f: (item: T) => string | number): T[] {\n  const results: any[] = [];\n  const u = {};\n  let v: string | number;\n  for (const val of values) {\n    v = f(val);\n    if (v in u) {\n      continue;\n    }\n    u[v] = 1;\n    results.push(val);\n  }\n  return results;\n}\n\nexport interface Dict<T> {\n  [key: string]: T;\n}\n\nexport type StringSet = Dict<true>;\n\n/**\n * Returns true if the two dictionaries disagree. Applies only to defined values.\n */\nexport function differ<T>(dict: Dict<T>, other: Dict<T>) {\n  for (const key in dict) {\n    if (dict.hasOwnProperty(key)) {\n      if (other[key] && dict[key] && other[key] !== dict[key]) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nexport function hasIntersection(a: StringSet, b: StringSet) {\n  for (const key in a) {\n    if (key in b) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function isNumeric(num: string | number) {\n  return !isNaN(num as any);\n}\n\nexport function differArray<T>(array: T[], other: T[]) {\n  if (array.length !== other.length) {\n    return true;\n  }\n\n  array.sort();\n  other.sort();\n\n  for (let i = 0; i < array.length; i++) {\n    if (other[i] !== array[i]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// This is a stricter version of Object.keys but with better types. See https://github.com/Microsoft/TypeScript/pull/12253#issuecomment-263132208\nexport const keys = Object.keys as <T>(o: T) => (keyof T)[];\n\nexport function vals<T>(x: {[key: string]: T}): T[] {\n  const _vals: T[] = [];\n  for (const k in x) {\n    if (x.hasOwnProperty(k)) {\n      _vals.push(x[k]);\n    }\n  }\n  return _vals;\n}\n\n// Using mapped type to declare a collect of flags for a string literal type S\n// https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types\nexport type Flag<S extends string> = {\n  [K in S]: 1\n};\n\nexport function flagKeys<S extends string>(f: Flag<S>): S[] {\n  return keys(f) as S[];\n}\n\nexport function duplicate<T>(obj: T): T {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nexport function isBoolean(b: any): b is boolean {\n  return b === true || b === false;\n}\n\n/**\n * Convert a string into a valid variable name\n */\nexport function varName(s: string): string {\n  // Replace non-alphanumeric characters (anything besides a-zA-Z0-9_) with _\n  const alphanumericS = s.replace(/\\W/g, '_');\n\n  // Add _ if the string has leading numbers.\n  return (s.match(/^\\d+/) ? '_' : '') + alphanumericS;\n}\n\nexport function logicalExpr<T>(op: LogicalOperand<T>, cb: Function): string {\n  if (isLogicalNot(op)) {\n    return '!(' + logicalExpr(op.not, cb) + ')';\n  } else if (isLogicalAnd(op)) {\n    return '(' + op.and.map((and: LogicalOperand<T>) => logicalExpr(and, cb)).join(') && (') + ')';\n  } else if (isLogicalOr(op)) {\n    return '(' + op.or.map((or: LogicalOperand<T>) => logicalExpr(or, cb)).join(') || (') + ')';\n  } else {\n    return cb(op);\n  }\n}\n\n// Omit from http://ideasintosoftware.com/typescript-advanced-tricks/\nexport type Diff<T extends string, U extends string> = ({[P in T]: P } & {[P in U]: never } & { [x: string]: never })[T];\nexport type Omit<T, K extends keyof T> = {[P in Diff<keyof T, K>]: T[P]};\n\n/**\n * Delete nested property of an object, and delete the ancestors of the property if they become empty.\n */\nexport function deleteNestedProperty(obj: any, orderedProps: string[]) {\n  if (orderedProps.length === 0) {\n    return true;\n  }\n  const prop = orderedProps.shift();\n  if (deleteNestedProperty(obj[prop], orderedProps)) {\n    delete obj[prop];\n  }\n  return Object.keys(obj).length === 0;\n}\n\nexport function titlecase(s: string) {\n  return s.charAt(0).toUpperCase() + s.substr(1);\n}\n\n/**\n * Converts a path to an access path.\n */\nexport function accessPath(path: string) {\n  return `[${splitAccessPath(path).map(stringValue).join('][')}]`;\n}\n","export type LogicalOperand<T> = LogicalNot<T> | LogicalAnd<T> | LogicalOr<T> | T;\n\nexport interface LogicalOr<T> {\n  or: LogicalOperand<T>[];\n}\n\nexport interface LogicalAnd<T> {\n  and: LogicalOperand<T>[];\n}\n\nexport interface LogicalNot<T> {\n  not: LogicalOperand<T>;\n}\n\nexport function isLogicalOr(op: LogicalOperand<any>): op is LogicalOr<any> {\n  return !!op.or;\n}\n\nexport function isLogicalAnd(op: LogicalOperand<any>): op is LogicalAnd<any> {\n  return !!op.and;\n}\n\nexport function isLogicalNot(op: LogicalOperand<any>): op is LogicalNot<any> {\n  return !!op.not;\n}\n\nexport function forEachLeave<T>(op: LogicalOperand<T>, fn: (op: T) => void) {\n  if (isLogicalNot(op)) {\n    forEachLeave(op.not, fn);\n  } else if (isLogicalAnd(op)) {\n    for (const subop of op.and) {\n      forEachLeave(subop, fn);\n    }\n  } else if (isLogicalOr(op)) {\n    for (const subop of op.or) {\n      forEachLeave(subop, fn);\n    }\n  } else {\n    fn(op);\n  }\n}\n\nexport function normalizeLogicalOperand<T>(op: LogicalOperand<T>, normalizer: (o: T) => T): LogicalOperand<T> {\n  if (isLogicalNot(op)) {\n    return {not: normalizeLogicalOperand(op.not, normalizer)};\n  } else if (isLogicalAnd(op)) {\n    return {and: op.and.map(o => normalizeLogicalOperand(o, normalizer))};\n  } else if (isLogicalOr(op)) {\n    return {or: op.or.map(o => normalizeLogicalOperand(o, normalizer))};\n  } else {\n    return normalizer(op);\n  }\n}\n","import {Config} from './../config';\nimport {AnyMark, isMarkDef} from './../mark';\nimport {GenericUnitSpec, NormalizedLayerSpec} from './../spec';\nimport {BOXPLOT, BOXPLOT_STYLES, BoxPlotConfigMixins, BoxPlotDef, normalizeBoxPlot, VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX} from './boxplot';\nimport {ERRORBAR, normalizeErrorBar} from './errorbar';\n\n\nexport {BoxPlotConfig} from './boxplot';\nexport type UnitNormalizer = (spec: GenericUnitSpec<any, any>, config: Config)=> NormalizedLayerSpec;\n\n/**\n * Registry index for all composite mark's normalizer\n */\nconst normalizerRegistry: {[mark: string]: UnitNormalizer} = {};\n\nexport function add(mark: string, normalizer: UnitNormalizer) {\n  normalizerRegistry[mark] = normalizer;\n}\n\nexport function remove(mark: string) {\n  delete normalizerRegistry[mark];\n}\n\nexport type CompositeMark = BOXPLOT | ERRORBAR;\n\nexport type CompositeMarkDef = BoxPlotDef;\n\nexport type CompositeAggregate = BOXPLOT;\n\nexport const COMPOSITE_MARK_STYLES = BOXPLOT_STYLES;\nexport type CompositeMarkStyle = typeof COMPOSITE_MARK_STYLES[0];\n\nexport interface CompositeMarkConfigMixins extends BoxPlotConfigMixins {}\n\nexport const VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX = {\n  ...VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX\n};\n\nadd(BOXPLOT, normalizeBoxPlot);\nadd(ERRORBAR, normalizeErrorBar);\n\n/**\n * Transform a unit spec with composite mark into a normal layer spec.\n */\nexport function normalize(\n    // This GenericUnitSpec has any as Encoding because unit specs with composite mark can have additional encoding channels.\n    spec: GenericUnitSpec<any, AnyMark>,\n    config: Config\n  ): NormalizedLayerSpec {\n\n  const mark = isMarkDef(spec.mark) ? spec.mark.type : spec.mark;\n  const normalizer = normalizerRegistry[mark];\n  if (normalizer) {\n    return normalizer(spec, config);\n  }\n\n  throw new Error(`Invalid mark type \"${mark}\"`);\n}\n","import {toSet} from 'vega-util';\nimport {CompositeMark, CompositeMarkDef} from './compositemark/index';\nimport {contains, flagKeys} from './util';\nimport {VgMarkConfig} from './vega.schema';\n\nexport namespace Mark {\n  export const AREA: 'area' = 'area';\n  export const BAR: 'bar' = 'bar';\n  export const LINE: 'line' = 'line';\n  export const POINT: 'point' = 'point';\n  export const RECT: 'rect' = 'rect';\n  export const RULE: 'rule' = 'rule';\n  export const TEXT: 'text' = 'text';\n  export const TICK: 'tick' = 'tick';\n  export const TRAIL: 'trail' = 'trail';\n  export const CIRCLE: 'circle' = 'circle';\n  export const SQUARE: 'square' = 'square';\n  export const GEOSHAPE: 'geoshape' = 'geoshape';\n}\n\n/**\n * All types of primitive marks.\n */\nexport type Mark = typeof Mark.AREA | typeof Mark.BAR | typeof Mark.LINE | typeof Mark.TRAIL | typeof Mark.POINT | typeof Mark.TEXT | typeof Mark.TICK | typeof Mark.RECT | typeof Mark.RULE | typeof Mark.CIRCLE | typeof Mark.SQUARE | typeof Mark.GEOSHAPE;\n\n\nexport const AREA = Mark.AREA;\nexport const BAR = Mark.BAR;\nexport const LINE = Mark.LINE;\nexport const POINT = Mark.POINT;\nexport const TEXT = Mark.TEXT;\nexport const TICK = Mark.TICK;\nexport const TRAIL = Mark.TRAIL;\nexport const RECT = Mark.RECT;\nexport const RULE = Mark.RULE;\nexport const GEOSHAPE = Mark.GEOSHAPE;\n\nexport const CIRCLE = Mark.CIRCLE;\nexport const SQUARE = Mark.SQUARE;\n\n// Using mapped type to declare index, ensuring we always have all marks when we add more.\nconst MARK_INDEX: {[M in Mark]: 1} = {\n  area: 1,\n  bar: 1,\n  line: 1,\n  point: 1,\n  text: 1,\n  tick: 1,\n  trail: 1,\n  rect: 1,\n  geoshape: 1,\n  rule: 1,\n  circle: 1,\n  square: 1\n};\n\nexport function isMark(m: string): m is Mark {\n  return !!MARK_INDEX[m];\n}\n\nexport function isPathMark(m: Mark | CompositeMark): m is 'line' | 'area' | 'trail' {\n  return contains(['line', 'area', 'trail'], m);\n}\n\nexport const PRIMITIVE_MARKS = flagKeys(MARK_INDEX);\n\n\nexport interface MarkConfig extends VgMarkConfig {\n  // ---------- Color ----------\n  /**\n   * Whether the mark's color should be used as fill color instead of stroke color.\n   *\n   * __Default value:__ `true` for all marks except `point` and `false` for `point`.\n   *\n   * __Applicable for:__ `bar`, `point`, `circle`, `square`, and `area` marks.\n   *\n   * __Note:__ This property cannot be used in a [style config](mark.html#style-config).\n   *\n   */\n  filled?: boolean;\n\n  /**\n   * Default color.  Note that `fill` and `stroke` have higher precedence than `color` and will override `color`.\n   *\n   * __Default value:__ <span style=\"color: #4682b4;\">&#9632;</span> `\"#4682b4\"`\n   *\n   * __Note:__ This property cannot be used in a [style config](mark.html#style-config).\n   */\n  color?: string;\n}\n\nexport interface BarBinSpacingMixins {\n  /**\n   * Offset between bars for binned field.  Ideal value for this is either 0 (Preferred by statisticians) or 1 (Vega-Lite Default, D3 example style).\n   *\n   * __Default value:__ `1`\n   *\n   * @minimum 0\n   */\n  binSpacing?: number;\n}\n\nexport interface MarkProperties extends BarBinSpacingMixins, MarkConfig {\n  /**\n   *\n   * A string or array of strings indicating the name of custom styles to apply to the mark. A style is a named collection of mark property defaults defined within the [style configuration](mark.html#style-config). If style is an array, later styles will override earlier styles. Any [mark properties](encoding.html#mark-prop) explicitly defined within the `encoding` will override a style default.\n   *\n   * __Default value:__ The mark's name.  For example, a bar mark will have style `\"bar\"` by default.\n   * __Note:__ Any specified style will augment the default style. For example, a bar mark with `\"style\": \"foo\"` will receive from `config.style.bar` and `config.style.foo` (the specified style `\"foo\"` has higher precedence).\n   */\n  style?: string | string[];\n\n  /**\n   * Whether a mark be clipped to the enclosing groups width and height.\n   */\n  clip?: boolean;\n}\n\n/** @hide */\nexport type HiddenComposite = CompositeMark | CompositeMarkDef;\n\nexport type AnyMark =\n  HiddenComposite |\n  Mark |\n  MarkDef;\n\nexport function isMarkDef(mark: AnyMark): mark is (MarkDef | CompositeMarkDef) {\n  return mark['type'];\n}\n\nconst PRIMITIVE_MARK_INDEX = toSet(PRIMITIVE_MARKS);\n\nexport function isPrimitiveMark(mark: CompositeMark | CompositeMarkDef | Mark | MarkDef): mark is Mark {\n  const markType = isMarkDef(mark) ? mark.type : mark;\n  return markType in PRIMITIVE_MARK_INDEX;\n}\n\nexport const STROKE_CONFIG = ['stroke', 'strokeWidth',\n  'strokeDash', 'strokeDashOffset', 'strokeOpacity'];\n\nexport const FILL_CONFIG = ['fill', 'fillOpacity'];\n\nexport const FILL_STROKE_CONFIG = [].concat(STROKE_CONFIG, FILL_CONFIG);\n\nexport const VL_ONLY_MARK_CONFIG_PROPERTIES: (keyof MarkConfig)[] = ['filled', 'color'];\n\nexport const VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX: {\n  [k in (typeof PRIMITIVE_MARKS[0])]?: (keyof MarkConfigMixins[k])[]\n} = {\n  area: ['line', 'point'],\n  bar: ['binSpacing', 'continuousBandSize', 'discreteBandSize'],\n  line: ['point'],\n  text: ['shortTimeLabels'],\n  tick: ['bandSize', 'thickness']\n};\n\nexport const defaultMarkConfig: MarkConfig = {\n  color: '#4c78a8',\n};\n\nexport interface MarkConfigMixins {\n  /** Mark Config */\n  mark?: MarkConfig;\n\n  // MARK-SPECIFIC CONFIGS\n  /** Area-Specific Config */\n  area?: AreaConfig;\n\n  /** Bar-Specific Config */\n  bar?: BarConfig;\n\n  /** Circle-Specific Config */\n  circle?: MarkConfig;\n\n  /** Line-Specific Config */\n  line?: LineConfig;\n\n  /** Point-Specific Config */\n  point?: MarkConfig;\n\n  /** Rect-Specific Config */\n  rect?: MarkConfig;\n\n  /** Rule-Specific Config */\n  rule?: MarkConfig;\n\n  /** Square-Specific Config */\n  square?: MarkConfig;\n\n  /** Text-Specific Config */\n  text?: TextConfig;\n\n  /** Tick-Specific Config */\n  tick?: TickConfig;\n\n  /** Trail-Specific Config */\n  trail?: LineConfig;\n\n  /** Geoshape-Specific Config */\n  geoshape?: MarkConfig;\n}\n\n\nexport interface BarConfig extends BarBinSpacingMixins, MarkConfig {\n\n  /**\n   * The default size of the bars on continuous scales.\n   *\n   * __Default value:__ `5`\n   *\n   * @minimum 0\n   */\n  continuousBandSize?: number;\n\n  /**\n   * The size of the bars.  If unspecified, the default size is  `bandSize-1`,\n   * which provides 1 pixel offset between bars.\n   * @minimum 0\n   */\n  discreteBandSize?: number;\n}\n\nexport interface PointOverlayMixins {\n  /**\n   * A flag for overlaying points on top of line or area marks, or an object defining the properties of the overlayed points.\n   *\n   * - If this property is `\"transparent\"`, transparent points will be used (for enhancing tooltips and selections).\n   *\n   * - If this property is an empty object (`{}`) or `true`, filled points with default properties will be used.\n   *\n   * - If this property is `false`, no points would be automatically added to line or area marks.\n   *\n   * __Default value:__ `false`.\n   */\n  point?: boolean | MarkProperties | 'transparent';\n}\n\nexport interface LineConfig extends MarkConfig, PointOverlayMixins {}\n\nexport interface LineOverlayMixins {\n  /**\n   * A flag for overlaying line on top of area marks, or an object defining the properties of the overlayed lines.\n   *\n   * - If this value is an empty object (`{}`) or `true`, lines with default properties will be used.\n   *\n   * - If this value is `false`, no lines would be automatically added to area marks.\n   *\n   * __Default value:__ `false`.\n   */\n  line?: boolean | MarkProperties;\n}\n\nexport interface AreaConfig extends MarkConfig, PointOverlayMixins, LineOverlayMixins {}\n\n\n// Point/Line OverlayMixins are only for area, line, and trail but we don't want to declare multiple types of MarkDef\nexport interface MarkDef extends MarkProperties, PointOverlayMixins, LineOverlayMixins {\n  /**\n   * The mark type.\n   * One of `\"bar\"`, `\"circle\"`, `\"square\"`, `\"tick\"`, `\"line\"`,\n   * `\"area\"`, `\"point\"`, `\"geoshape\"`, `\"rule\"`, and `\"text\"`.\n   */\n  type: Mark;\n}\n\nexport const defaultBarConfig: BarConfig = {\n  binSpacing: 1,\n  continuousBandSize: 5\n};\n\nexport interface TextConfig extends MarkConfig {\n  /**\n   * Whether month names and weekday names should be abbreviated.\n   */\n  shortTimeLabels?: boolean;\n}\n\nexport interface TickConfig extends MarkConfig {\n  /**\n   * The width of the ticks.\n   *\n   * __Default value:__  2/3 of rangeStep.\n   * @minimum 0\n   */\n  bandSize?: number;\n\n  /**\n   * Thickness of the tick mark.\n   *\n   * __Default value:__  `1`\n   *\n   * @minimum 0\n   */\n  thickness?: number;\n}\n\nexport const defaultTickConfig: TickConfig = {\n  thickness: 1\n};\n","import {isNumber} from 'vega-util';\nimport {Channel} from '../channel';\nimport {Config} from '../config';\nimport {reduce} from '../encoding';\nimport {AggregatedFieldDef, BinTransform, CalculateTransform, TimeUnitTransform} from '../transform';\nimport {Encoding, forEach} from './../encoding';\nimport {Field, FieldDef, isContinuous, isFieldDef, PositionFieldDef, vgField} from './../fielddef';\nimport * as log from './../log';\nimport {MarkConfig} from './../mark';\nimport {GenericUnitSpec, NormalizedLayerSpec} from './../spec';\nimport {Orient} from './../vega.schema';\nimport {getMarkSpecificConfigMixins} from './common';\n\n\nexport const BOXPLOT: 'box-plot' = 'box-plot';\nexport type BOXPLOT = typeof BOXPLOT;\nexport type BoxPlotStyle = 'boxWhisker' | 'box' | 'boxMid';\n\n\nexport interface BoxPlotDef {\n  /**\n   * Type of the mark.  For box plots, this should always be `\"box-plot\"`.\n   * [boxplot](compositemark.html#boxplot)\n   */\n  type: BOXPLOT;\n\n  /**\n   * Orientation of the box plot.  This is normally automatically determined, but can be specified when the orientation is ambiguous and cannot be automatically determined.\n   */\n  orient?: Orient;\n\n  /**\n   * Extent is used to determine where the whiskers extend to. The options are\n   * - `\"min-max\": min and max are the lower and upper whiskers respectively.\n   * -  A scalar (integer or floating point number) that will be multiplied by the IQR and the product will be added to the third quartile to get the upper whisker and subtracted from the first quartile to get the lower whisker.\n   * __Default value:__ `\"1.5\"`.\n   */\n  extent?: 'min-max' | number;\n}\n\nexport function isBoxPlotDef(mark: BOXPLOT | BoxPlotDef): mark is BoxPlotDef {\n  return !!mark['type'];\n}\n\nexport const BOXPLOT_STYLES: BoxPlotStyle[] = ['boxWhisker', 'box', 'boxMid'];\n\nexport interface BoxPlotConfig extends MarkConfig {\n  /** Size of the box and mid tick of a box plot */\n  size?: number;\n  /** The default extent, which is used to determine where the whiskers extend to. The options are\n   * - `\"min-max\": min and max are the lower and upper whiskers respectively.\n   * - `\"number\": A scalar (integer or floating point number) that will be multiplied by the IQR and the product will be added to the third quartile to get the upper whisker and subtracted from the first quartile to get the lower whisker.\n   */\n  extent?: 'min-max' | number;\n}\n\nexport interface BoxPlotConfigMixins {\n  /**\n   * Box Config\n   * @hide\n   */\n  box?: BoxPlotConfig;\n\n  /**\n   * @hide\n   */\n  boxWhisker?: MarkConfig;\n\n  /**\n   * @hide\n   */\n  boxMid?: MarkConfig;\n}\n\nexport const VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX: {\n  [k in keyof BoxPlotConfigMixins]?: (keyof BoxPlotConfigMixins[k])[]\n} = {\n  box: ['size', 'color', 'extent'],\n  boxWhisker: ['color'],\n  boxMid: ['color']\n};\n\nconst supportedChannels: Channel[] = ['x', 'y', 'color', 'detail', 'opacity', 'size'];\nexport function filterUnsupportedChannels(spec: GenericUnitSpec<Encoding<string>, BOXPLOT | BoxPlotDef>): GenericUnitSpec<Encoding<string>, BOXPLOT | BoxPlotDef> {\n  return {\n    ...spec,\n    encoding: reduce(spec.encoding, (newEncoding, fieldDef, channel) => {\n      if (supportedChannels.indexOf(channel) > -1) {\n        newEncoding[channel] = fieldDef;\n      } else {\n        log.warn(log.message.incompatibleChannel(channel, BOXPLOT));\n      }\n      return newEncoding;\n    }, {}),\n  };\n}\n\nexport function normalizeBoxPlot(spec: GenericUnitSpec<Encoding<string>, BOXPLOT | BoxPlotDef>, config: Config): NormalizedLayerSpec {\n  spec = filterUnsupportedChannels(spec);\n  // TODO: use selection\n  const {mark, encoding, selection, projection: _p, ...outerSpec} = spec;\n\n  let kIQRScalar: number = undefined;\n  if (isNumber(config.box.extent)) {\n    kIQRScalar = config.box.extent;\n  }\n\n  if (isBoxPlotDef(mark)) {\n    if (mark.extent) {\n      if(mark.extent === 'min-max') {\n        kIQRScalar = undefined;\n      }\n    }\n  }\n\n  const orient: Orient = boxOrient(spec);\n  const {transform, continuousAxisChannelDef, continuousAxis, encodingWithoutContinuousAxis} = boxParams(spec, orient, kIQRScalar);\n\n  const {color, size, ...encodingWithoutSizeColorAndContinuousAxis} = encodingWithoutContinuousAxis;\n\n  // Size encoding or the default config.box.size is applied to box and boxMid\n  const sizeMixins = size ? {size} : getMarkSpecificConfigMixins(config.box, 'size');\n\n  const continuousAxisScaleAndAxis = {};\n  if (continuousAxisChannelDef.scale) {\n    continuousAxisScaleAndAxis['scale'] = continuousAxisChannelDef.scale;\n  }\n  if (continuousAxisChannelDef.axis) {\n    continuousAxisScaleAndAxis['axis'] = continuousAxisChannelDef.axis;\n  }\n\n  return {\n    ...outerSpec,\n    transform,\n    layer: [\n      { // lower whisker\n        mark: {\n          type: 'rule',\n          style: 'boxWhisker'\n        },\n        encoding: {\n          [continuousAxis]: {\n            field: 'lower_whisker_' + continuousAxisChannelDef.field,\n            type: continuousAxisChannelDef.type,\n            ...continuousAxisScaleAndAxis\n          },\n          [continuousAxis + '2']: {\n            field: 'lower_box_' + continuousAxisChannelDef.field,\n            type: continuousAxisChannelDef.type\n          },\n          ...encodingWithoutSizeColorAndContinuousAxis,\n          ...getMarkSpecificConfigMixins(config.boxWhisker, 'color')\n        }\n      }, { // upper whisker\n        mark: {\n          type: 'rule',\n          style: 'boxWhisker'\n        },\n        encoding: {\n          [continuousAxis]: {\n            field: 'upper_box_' + continuousAxisChannelDef.field,\n            type: continuousAxisChannelDef.type\n          },\n          [continuousAxis + '2']: {\n            field: 'upper_whisker_' + continuousAxisChannelDef.field,\n            type: continuousAxisChannelDef.type\n          },\n          ...encodingWithoutSizeColorAndContinuousAxis,\n          ...getMarkSpecificConfigMixins(config.boxWhisker, 'color')\n        }\n      }, { // box (q1 to q3)\n        ...(selection ? {selection} : {}),\n        mark: {\n          type: 'bar',\n          style: 'box'\n        },\n        encoding: {\n          [continuousAxis]: {\n            field: 'lower_box_' + continuousAxisChannelDef.field,\n            type: continuousAxisChannelDef.type\n          },\n          [continuousAxis + '2']: {\n            field: 'upper_box_' + continuousAxisChannelDef.field,\n            type: continuousAxisChannelDef.type\n          },\n          ...encodingWithoutContinuousAxis,\n          ...(encodingWithoutContinuousAxis.color ? {} : getMarkSpecificConfigMixins(config.box, 'color')),\n          ...sizeMixins,\n        }\n      }, { // mid tick\n        mark: {\n          type: 'tick',\n          style: 'boxMid'\n        },\n        encoding: {\n          [continuousAxis]: {\n            field: 'mid_box_' + continuousAxisChannelDef.field,\n            type: continuousAxisChannelDef.type\n          },\n          ...encodingWithoutSizeColorAndContinuousAxis,\n          ...getMarkSpecificConfigMixins(config.boxMid, 'color'),\n          ...sizeMixins,\n        }\n      }\n    ]\n  };\n}\n\nfunction boxOrient(spec: GenericUnitSpec<Encoding<Field>, BOXPLOT | BoxPlotDef>): Orient {\n  const {mark: mark, encoding: encoding, projection: _p, ..._outerSpec} = spec;\n\n  if (isFieldDef(encoding.x) && isContinuous(encoding.x)) {\n    // x is continuous\n    if (isFieldDef(encoding.y) && isContinuous(encoding.y)) {\n      // both x and y are continuous\n      if (encoding.x.aggregate === undefined && encoding.y.aggregate === BOXPLOT) {\n        return 'vertical';\n      } else if (encoding.y.aggregate === undefined && encoding.x.aggregate === BOXPLOT) {\n        return 'horizontal';\n      } else if (encoding.x.aggregate === BOXPLOT && encoding.y.aggregate === BOXPLOT) {\n        throw new Error('Both x and y cannot have aggregate');\n      } else {\n        if (isBoxPlotDef(mark) && mark.orient) {\n          return mark.orient;\n        }\n\n        // default orientation = vertical\n        return 'vertical';\n      }\n    }\n\n    // x is continuous but y is not\n    return 'horizontal';\n  } else if (isFieldDef(encoding.y) && isContinuous(encoding.y)) {\n    // y is continuous but x is not\n    return 'vertical';\n  } else {\n    // Neither x nor y is continuous.\n    throw new Error('Need a valid continuous axis for boxplots');\n  }\n}\n\n\nfunction boxContinousAxis(spec: GenericUnitSpec<Encoding<string>, BOXPLOT | BoxPlotDef>, orient: Orient) {\n  const {mark: mark, encoding: encoding, projection: _p, ..._outerSpec} = spec;\n\n  let continuousAxisChannelDef: PositionFieldDef<string>;\n  let continuousAxis: 'x' | 'y';\n\n  if (orient === 'vertical') {\n    continuousAxis = 'y';\n    continuousAxisChannelDef = encoding.y as FieldDef<string>; // Safe to cast because if y is not continuous fielddef, the orient would not be vertical.\n  } else {\n    continuousAxis = 'x';\n    continuousAxisChannelDef = encoding.x as FieldDef<string>; // Safe to cast because if x is not continuous fielddef, the orient would not be horizontal.\n  }\n\n  if (continuousAxisChannelDef && continuousAxisChannelDef.aggregate) {\n    const {aggregate, ...continuousAxisWithoutAggregate} = continuousAxisChannelDef;\n    if (aggregate !== BOXPLOT) {\n      log.warn(`Continuous axis should not have customized aggregation function ${aggregate}`);\n    }\n    continuousAxisChannelDef = continuousAxisWithoutAggregate;\n  }\n\n  return {\n    continuousAxisChannelDef,\n    continuousAxis\n  };\n}\n\nfunction boxParams(spec: GenericUnitSpec<Encoding<string>, BOXPLOT | BoxPlotDef>, orient: Orient, kIQRScalar: 'min-max' | number) {\n\n  const {continuousAxisChannelDef, continuousAxis} = boxContinousAxis(spec, orient);\n  const encoding = spec.encoding;\n\n  const isMinMax = kIQRScalar === undefined;\n  const aggregate: AggregatedFieldDef[] = [\n    {\n      op: 'q1',\n      field: continuousAxisChannelDef.field,\n      as: 'lower_box_' + continuousAxisChannelDef.field\n    },\n    {\n      op: 'q3',\n      field: continuousAxisChannelDef.field,\n      as: 'upper_box_' + continuousAxisChannelDef.field\n    },\n    {\n      op: 'median',\n      field: continuousAxisChannelDef.field,\n      as: 'mid_box_' + continuousAxisChannelDef.field\n    }\n  ];\n  let postAggregateCalculates: CalculateTransform[] = [];\n\n  aggregate.push({\n    op: 'min',\n    field: continuousAxisChannelDef.field,\n    as: (isMinMax ? 'lower_whisker_' : 'min_') + continuousAxisChannelDef.field\n  });\n  aggregate.push({\n    op: 'max',\n    field: continuousAxisChannelDef.field,\n    as:  (isMinMax ? 'upper_whisker_' : 'max_') + continuousAxisChannelDef.field\n  });\n\n  if (!isMinMax) {\n    postAggregateCalculates = [\n      {\n        calculate: `datum.upper_box_${continuousAxisChannelDef.field} - datum.lower_box_${continuousAxisChannelDef.field}`,\n        as: 'iqr_' + continuousAxisChannelDef.field\n      },\n      {\n        calculate: `min(datum.upper_box_${continuousAxisChannelDef.field} + datum.iqr_${continuousAxisChannelDef.field} * ${kIQRScalar}, datum.max_${continuousAxisChannelDef.field})`,\n        as: 'upper_whisker_' + continuousAxisChannelDef.field\n      },\n      {\n        calculate: `max(datum.lower_box_${continuousAxisChannelDef.field} - datum.iqr_${continuousAxisChannelDef.field} * ${kIQRScalar}, datum.min_${continuousAxisChannelDef.field})`,\n        as: 'lower_whisker_' + continuousAxisChannelDef.field\n      }\n    ];\n  }\n\n  const groupby: string[] = [];\n  const bins: BinTransform[] = [];\n  const timeUnits: TimeUnitTransform[] = [];\n\n  const encodingWithoutContinuousAxis: Encoding<string> = {};\n  forEach(encoding, (channelDef, channel) => {\n    if (channel === continuousAxis) {\n      // Skip continuous axis as we already handle it separately\n      return;\n    }\n    if (isFieldDef(channelDef)) {\n      if (channelDef.aggregate && channelDef.aggregate !== BOXPLOT) {\n        aggregate.push({\n          op: channelDef.aggregate,\n          field: channelDef.field,\n          as: vgField(channelDef)\n        });\n      } else if (channelDef.aggregate === undefined) {\n        const transformedField = vgField(channelDef);\n\n        // Add bin or timeUnit transform if applicable\n        const bin = channelDef.bin;\n        if (bin) {\n          const {field} = channelDef;\n          bins.push({bin, field, as: transformedField});\n        } else if (channelDef.timeUnit) {\n          const {timeUnit, field} = channelDef;\n          timeUnits.push({timeUnit, field, as: transformedField});\n        }\n\n        groupby.push(transformedField);\n      }\n      // now the field should refer to post-transformed field instead\n      encodingWithoutContinuousAxis[channel] = {\n        field: vgField(channelDef),\n        type: channelDef.type\n      };\n    } else {\n      // For value def, just copy\n      encodingWithoutContinuousAxis[channel] = encoding[channel];\n    }\n  });\n\n  return {\n    transform: [].concat(\n      bins,\n      timeUnits,\n      [{aggregate, groupby}],\n      postAggregateCalculates\n    ),\n    continuousAxisChannelDef,\n    continuousAxis,\n    encodingWithoutContinuousAxis\n  };\n}\n","\nimport {isArray} from 'vega-util';\nimport {Channel, CHANNELS, isChannel, supportMark} from './channel';\nimport {FacetMapping} from './facet';\nimport {\n  ChannelDef,\n  Field,\n  FieldDef,\n  FieldDefWithCondition,\n  getFieldDef,\n  hasConditionalFieldDef,\n  isConditionalDef,\n  isFieldDef,\n  isValueDef,\n  MarkPropFieldDef,\n  normalize,\n  normalizeFieldDef,\n  OrderFieldDef,\n  PositionFieldDef,\n  TextFieldDef,\n  ValueDef,\n  ValueDefWithCondition\n} from './fielddef';\nimport * as log from './log';\nimport {Mark} from './mark';\nimport {Type} from './type';\nimport {contains, keys, some} from './util';\n\nexport interface Encoding<F> {\n  /**\n   * X coordinates of the marks, or width of horizontal `\"bar\"` and `\"area\"`.\n   */\n  x?: PositionFieldDef<F> | ValueDef;\n\n  /**\n   * Y coordinates of the marks, or height of vertical `\"bar\"` and `\"area\"`.\n   */\n  y?: PositionFieldDef<F> | ValueDef;\n\n  /**\n   * X2 coordinates for ranged `\"area\"`, `\"bar\"`, `\"rect\"`, and  `\"rule\"`.\n   */\n  // TODO: Ham need to add default behavior\n  x2?: FieldDef<F> | ValueDef;\n\n  /**\n   * Y2 coordinates for ranged `\"area\"`, `\"bar\"`, `\"rect\"`, and  `\"rule\"`.\n   */\n  // TODO: Ham need to add default behavior\n  y2?: FieldDef<F> | ValueDef;\n\n\n  /**\n   * Longitude position of geographically projected marks.\n   */\n  longitude?: FieldDef<F>;\n\n  /**\n   * Latitude position of geographically projected marks.\n   */\n  latitude?: FieldDef<F>;\n\n  /**\n   * Longitude-2 position for geographically projected ranged `\"area\"`, `\"bar\"`, `\"rect\"`, and  `\"rule\"`.\n   */\n  longitude2?: FieldDef<F>;\n\n  /**\n   * Latitude-2 position for geographically projected ranged `\"area\"`, `\"bar\"`, `\"rect\"`, and  `\"rule\"`.\n   */\n  latitude2?: FieldDef<F>;\n\n  /**\n   * Color of the marks  either fill or stroke color based on  the `filled` property of mark definition.\n   * By default, `color` represents fill color for `\"area\"`, `\"bar\"`, `\"tick\"`,\n   * `\"text\"`, `\"trail\"`, `\"circle\"`, and `\"square\"` / stroke color for `\"line\"` and `\"point\"`.\n   *\n   * __Default value:__ If undefined, the default color depends on [mark config](config.html#mark)'s `color` property.\n   *\n   * _Note:_\n   * 1) For fine-grained control over both fill and stroke colors of the marks, please use the `fill` and `stroke` channels.  If either `fill` or `stroke` channel is specified, `color` channel will be ignored.\n   * 2) See the scale documentation for more information about customizing [color scheme](scale.html#scheme).\n   */\n  color?: FieldDefWithCondition<MarkPropFieldDef<F>> | ValueDefWithCondition<MarkPropFieldDef<F>>;\n\n  /**\n   * Fill color of the marks.\n   * __Default value:__ If undefined, the default color depends on [mark config](config.html#mark)'s `color` property.\n   *\n   * _Note:_ When using `fill` channel, `color ` channel will be ignored. To customize both fill and stroke, please use `fill` and `stroke` channels (not `fill` and `color`).\n   */\n  fill?: FieldDefWithCondition<MarkPropFieldDef<F>> | ValueDefWithCondition<MarkPropFieldDef<F>>;\n\n\n  /**\n   * Stroke color of the marks.\n   * __Default value:__ If undefined, the default color depends on [mark config](config.html#mark)'s `color` property.\n   *\n   * _Note:_ When using `stroke` channel, `color ` channel will be ignored. To customize both stroke and fill, please use `stroke` and `fill` channels (not `stroke` and `color`).\n   */\n  stroke?: FieldDefWithCondition<MarkPropFieldDef<F>> | ValueDefWithCondition<MarkPropFieldDef<F>>;\n\n\n  /**\n   * Opacity of the marks  either can be a value or a range.\n   *\n   * __Default value:__ If undefined, the default opacity depends on [mark config](config.html#mark)'s `opacity` property.\n   */\n  opacity?: FieldDefWithCondition<MarkPropFieldDef<F>> | ValueDefWithCondition<MarkPropFieldDef<F>>;\n\n  /**\n   * Size of the mark.\n   * - For `\"point\"`, `\"square\"` and `\"circle\"`,  the symbol size, or pixel area of the mark.\n   * - For `\"bar\"` and `\"tick\"`  the bar and tick's size.\n   * - For `\"text\"`  the text's font size.\n   * - Size is unsupported for `\"line\"`, `\"area\"`, and `\"rect\"`. (Use `\"trail\"` instead of line with varying size)\n   */\n  size?: FieldDefWithCondition<MarkPropFieldDef<F>> | ValueDefWithCondition<MarkPropFieldDef<F>>;\n\n  /**\n   * For `point` marks the supported values are\n   * `\"circle\"` (default), `\"square\"`, `\"cross\"`, `\"diamond\"`, `\"triangle-up\"`,\n   * or `\"triangle-down\"`, or else a custom SVG path string.\n   * For `geoshape` marks it should be a field definition of the geojson data\n   *\n   * __Default value:__ If undefined, the default shape depends on [mark config](config.html#point-config)'s `shape` property.\n   */\n  shape?: FieldDefWithCondition<MarkPropFieldDef<F>> | ValueDefWithCondition<MarkPropFieldDef<F>>; // TODO: maybe distinguish ordinal-only\n\n  /**\n   * Additional levels of detail for grouping data in aggregate views and\n   * in line, trail, and area marks without mapping data to a specific visual channel.\n   */\n  detail?: FieldDef<F> | FieldDef<F>[];\n\n  /**\n   * A data field to use as a unique key for data binding. When a visualizations data is updated, the key value will be used to match data elements to existing mark instances. Use a key channel to enable object constancy for transitions over dynamic data.\n   */\n  key?: FieldDef<F>;\n\n  /**\n   * Text of the `text` mark.\n   */\n  text?: FieldDefWithCondition<TextFieldDef<F>> | ValueDefWithCondition<TextFieldDef<F>>;\n\n  /**\n   * The tooltip text to show upon mouse hover.\n   */\n  tooltip?: FieldDefWithCondition<TextFieldDef<F>> | ValueDefWithCondition<TextFieldDef<F>> | TextFieldDef<F>[];\n\n  /**\n   * A URL to load upon mouse click.\n   */\n  href?: FieldDefWithCondition<FieldDef<F>> | ValueDefWithCondition<FieldDef<F>>;\n\n  /**\n   * Order of the marks.\n   * - For stacked marks, this `order` channel encodes [stack order](https://vega.github.io/vega-lite/docs/stack.html#order).\n   * - For line and trail marks, this `order` channel encodes order of data points in the lines. This can be useful for creating [a connected scatterplot](https://vega.github.io/vega-lite/examples/connected_scatterplot.html).\n   * - Otherwise, this `order` channel encodes layer order of the marks.\n   *\n   * __Note__: In aggregate plots, `order` field should be `aggregate`d to avoid creating additional aggregation grouping.\n   */\n  order?: OrderFieldDef<F> | OrderFieldDef<F>[];\n}\n\nexport interface EncodingWithFacet<F> extends Encoding<F>, FacetMapping<F> {}\n\nexport function channelHasField(encoding: EncodingWithFacet<Field>, channel: Channel): boolean {\n  const channelDef = encoding && encoding[channel];\n  if (channelDef) {\n    if (isArray(channelDef)) {\n      return some(channelDef, (fieldDef) => !!fieldDef.field);\n    } else {\n      return isFieldDef(channelDef) || hasConditionalFieldDef(channelDef);\n    }\n  }\n  return false;\n}\n\n\nexport function isAggregate(encoding: EncodingWithFacet<Field>) {\n  return some(CHANNELS, (channel) => {\n    if (channelHasField(encoding, channel)) {\n      const channelDef = encoding[channel];\n      if (isArray(channelDef)) {\n        return some(channelDef, (fieldDef) => !!fieldDef.aggregate);\n      } else {\n        const fieldDef = getFieldDef(channelDef);\n        return fieldDef && !!fieldDef.aggregate;\n      }\n    }\n    return false;\n  });\n}\n\nexport function normalizeEncoding(encoding: Encoding<string>, mark: Mark): Encoding<string> {\n   return keys(encoding).reduce((normalizedEncoding: Encoding<string>, channel: Channel | string) => {\n    if (!isChannel(channel)) {\n      // Drop invalid channel\n      log.warn(log.message.invalidEncodingChannel(channel));\n      return normalizedEncoding;\n    }\n\n    if (!supportMark(channel, mark)) {\n      // Drop unsupported channel\n\n      log.warn(log.message.incompatibleChannel(channel, mark));\n      return normalizedEncoding;\n    }\n\n    // Drop line's size if the field is aggregated.\n    if (channel === 'size' && mark === 'line') {\n      const fieldDef = getFieldDef(encoding[channel]);\n      if (fieldDef && fieldDef.aggregate) {\n        log.warn(log.message.LINE_WITH_VARYING_SIZE);\n        return normalizedEncoding;\n      }\n    }\n\n    // Drop color if either fill or stroke is specified\n     if (channel === 'color' && ('fill' in encoding || 'stroke' in encoding) ) {\n       log.warn(log.message.droppingColor('encoding', {fill: 'fill' in encoding, stroke: 'stroke' in encoding}));\n       return normalizedEncoding;\n    }\n\n    if (channel === 'detail' || channel === 'order' || (channel === 'tooltip' && isArray(encoding[channel]))) {\n      const channelDef = encoding[channel];\n      if (channelDef) {\n        // Array of fieldDefs for detail channel (or production rule)\n        normalizedEncoding[channel] = (isArray(channelDef) ? channelDef : [channelDef])\n          .reduce((defs: FieldDef<string>[], fieldDef: FieldDef<string>) => {\n            if (!isFieldDef(fieldDef)) {\n              log.warn(log.message.emptyFieldDef(fieldDef, channel));\n            } else {\n              defs.push(normalizeFieldDef(fieldDef, channel));\n            }\n            return defs;\n          }, []);\n      }\n    } else {\n      // FIXME: remove this casting.  (I don't know why Typescript doesn't infer this correctly here.)\n      const channelDef = encoding[channel] as ChannelDef<string>;\n\n      const fieldDef = getFieldDef(encoding[channel]);\n      if (fieldDef && contains([Type.LATITUDE, Type.LONGITUDE], fieldDef.type)) {\n        const {[channel]: _, ...newEncoding} = normalizedEncoding;\n        const newChannel = channel === 'x' ? 'longitude' :\n          channel === 'y' ? 'latitude' :\n          channel === 'x2' ? 'longitude2' :\n          channel === 'y2' ? 'latitude2' : undefined;\n        log.warn(log.message.latLongDeprecated(channel, fieldDef.type, newChannel));\n        return {\n          ...newEncoding,\n          [newChannel]: {\n            ...normalize(fieldDef as any, channel),\n            type: 'quantitative'\n          }\n        };\n      }\n\n      if (!isFieldDef(channelDef) && !isValueDef(channelDef) && !isConditionalDef(channelDef)) {\n        log.warn(log.message.emptyFieldDef(channelDef, channel));\n        return normalizedEncoding;\n      }\n      normalizedEncoding[channel] = normalize(channelDef, channel);\n    }\n    return normalizedEncoding;\n  }, {});\n}\n\n\nexport function isRanged(encoding: EncodingWithFacet<any>) {\n  return encoding && ((!!encoding.x && !!encoding.x2) || (!!encoding.y && !!encoding.y2));\n}\n\nexport function fieldDefs(encoding: EncodingWithFacet<Field>): FieldDef<Field>[] {\n  const arr: FieldDef<Field>[] = [];\n  CHANNELS.forEach(function(channel) {\n    if (channelHasField(encoding, channel)) {\n      const channelDef = encoding[channel];\n      (isArray(channelDef) ? channelDef : [channelDef]).forEach((def) => {\n        if (isFieldDef(def)) {\n          arr.push(def);\n        } else if (hasConditionalFieldDef(def)) {\n          arr.push(def.condition);\n        }\n      });\n    }\n  });\n  return arr;\n}\n\nexport function forEach(mapping: any,\n    f: (fd: FieldDef<string>, c: Channel) => void,\n    thisArg?: any) {\n  if (!mapping) {\n    return;\n  }\n\n  for (const channel of keys(mapping)) {\n    if (isArray(mapping[channel])) {\n      mapping[channel].forEach(function(channelDef: ChannelDef<string>) {\n        f.call(thisArg, channelDef, channel);\n      });\n    } else {\n      f.call(thisArg, mapping[channel], channel);\n    }\n  }\n}\n\nexport function reduce<T, U extends {[k in Channel]?: any}>(mapping: U,\n    f: (acc: any, fd: FieldDef<string>, c: Channel) => U,\n    init: T, thisArg?: any) {\n  if (!mapping) {\n    return init;\n  }\n\n  return keys(mapping).reduce((r, channel) => {\n    const map = mapping[channel];\n    if (isArray(map)) {\n      return map.reduce((r1: T, channelDef: ChannelDef<string>) => {\n        return f.call(thisArg, r1, channelDef, channel);\n      }, r);\n    } else {\n      return f.call(thisArg, r, map, channel);\n    }\n  }, init);\n}\n","// Declaration and utility for variants of a field definition object\nimport {AggregateOp} from 'vega';\nimport {isArray, isBoolean, isNumber, isString} from 'vega-util';\nimport {isAggregateOp, isCountingAggregateOp} from './aggregate';\nimport {Axis} from './axis';\nimport {autoMaxBins, BinParams, binToString} from './bin';\nimport {Channel, rangeType} from './channel';\nimport {CompositeAggregate} from './compositemark';\nimport {Config} from './config';\nimport {TitleMixins} from './guide';\nimport {Legend} from './legend';\nimport * as log from './log';\nimport {LogicalOperand} from './logical';\nimport {Predicate} from './predicate';\nimport {Scale} from './scale';\nimport {SortField, SortOrder} from './sort';\nimport {StackOffset} from './stack';\nimport {getTimeUnitParts, normalizeTimeUnit, TimeUnit} from './timeunit';\nimport {getFullName, QUANTITATIVE, Type} from './type';\nimport {accessPath, titlecase} from './util';\n\n/**\n * Definition object for a constant value of an encoding channel.\n */\nexport interface ValueDef {\n  /**\n   * A constant value in visual domain (e.g., `\"red\"` / \"#0099ff\" for color, values between `0` to `1` for opacity).\n   */\n  value: number | string | boolean;\n}\n\n/**\n * Generic type for conditional channelDef.\n * F defines the underlying FieldDef type.\n */\nexport type ChannelDefWithCondition<F extends FieldDef<any>> = FieldDefWithCondition<F> | ValueDefWithCondition<F>;\n\nexport type Conditional<T> = ConditionalPredicate<T> | ConditionalSelection<T>;\n\nexport type ConditionalPredicate<T> = {\n  test: LogicalOperand<Predicate>;\n} & T;\n\nexport type ConditionalSelection<T> = {\n  /**\n   * A [selection name](https://vega.github.io/vega-lite/docs/selection.html), or a series of [composed selections](https://vega.github.io/vega-lite/docs/selection.html#compose).\n   */\n  selection: LogicalOperand<string>;\n} & T;\n\nexport function isConditionalSelection<T>(c: Conditional<T>): c is ConditionalSelection<T> {\n  return c['selection'];\n}\n\n/**\n * A FieldDef with Condition<ValueDef>\n * {\n *   condition: {value: ...},\n *   field: ...,\n *   ...\n * }\n */\nexport type FieldDefWithCondition<F extends FieldDef<any>> = F & {\n  /**\n   * One or more value definition(s) with a selection predicate.\n   *\n   * __Note:__ A field definition's `condition` property can only contain [value definitions](https://vega.github.io/vega-lite/docs/encoding.html#value-def)\n   * since Vega-Lite only allows at most one encoded field per encoding channel.\n   */\n  condition?: Conditional<ValueDef> | Conditional<ValueDef>[];\n};\n\n/**\n * A ValueDef with Condition<ValueDef | FieldDef>\n * {\n *   condition: {field: ...} | {value: ...},\n *   value: ...,\n * }\n */\nexport interface ValueDefWithCondition<F extends FieldDef<any>> {\n  /**\n   * A field definition or one or more value definition(s) with a selection predicate.\n   */\n  condition?: Conditional<F> | Conditional<ValueDef> | Conditional<ValueDef>[];\n\n  /**\n   * A constant value in visual domain.\n   */\n  value?: number | string | boolean;\n}\n\n/**\n * Reference to a repeated value.\n */\nexport type RepeatRef = {\n  repeat: 'row' | 'column'\n};\n\nexport type Field = string | RepeatRef;\n\nexport function isRepeatRef(field: Field): field is RepeatRef {\n  return field && !isString(field) && 'repeat' in field;\n}\n\n/** @hide */\nexport type HiddenCompositeAggregate = CompositeAggregate;\n\nexport type Aggregate = AggregateOp | HiddenCompositeAggregate;\n\nexport interface FieldDefBase<F> {\n\n  /**\n   * __Required.__ A string defining the name of the field from which to pull a data value\n   * or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n   *\n   * __Note:__ Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `\"field\": \"foo.bar\"` and `\"field\": \"foo['bar']\"`).\n   * If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `\"a\\\\.b\"` and `\"a\\\\[0\\\\]\"`).\n   * See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html).\n   *\n   * __Note:__ `field` is not required if `aggregate` is `count`.\n   */\n  field?: F;\n\n  // function\n\n  /**\n   * Time unit (e.g., `year`, `yearmonth`, `month`, `hours`) for a temporal field.\n   * or [a temporal field that gets casted as ordinal](https://vega.github.io/vega-lite/docs/type.html#cast).\n   *\n   * __Default value:__ `undefined` (None)\n   */\n  timeUnit?: TimeUnit;\n\n  /**\n   * A flag for binning a `quantitative` field, or [an object defining binning parameters](https://vega.github.io/vega-lite/docs/bin.html#params).\n   * If `true`, default [binning parameters](https://vega.github.io/vega-lite/docs/bin.html) will be applied.\n   *\n   * __Default value:__ `false`\n   */\n  bin?: boolean | BinParams;\n\n  /**\n   * Aggregation function for the field\n   * (e.g., `mean`, `sum`, `median`, `min`, `max`, `count`).\n   *\n   * __Default value:__ `undefined` (None)\n   */\n  aggregate?: Aggregate;\n}\n\nexport function toFieldDefBase(fieldDef: FieldDef<string>): FieldDefBase<string> {\n  const {field, timeUnit, bin, aggregate} = fieldDef;\n  return {\n    ...(timeUnit ? {timeUnit} : {}),\n    ...(bin ? {bin} : {}),\n    ...(aggregate ? {aggregate} : {}),\n    field\n  };\n}\n\n/**\n *  Definition object for a data field, its type and transformation of an encoding channel.\n */\nexport interface FieldDef<F> extends FieldDefBase<F>, TitleMixins {\n  /**\n   * The encoded field's type of measurement (`\"quantitative\"`, `\"temporal\"`, `\"ordinal\"`, or `\"nominal\"`).\n   * It can also be a `\"geojson\"` type for encoding ['geoshape'](geoshape.html).\n   */\n  // * or an initial character of the type name (`\"Q\"`, `\"T\"`, `\"O\"`, `\"N\"`).\n  // * This property is case-insensitive.\n  type: Type;\n}\n\nexport interface ScaleFieldDef<F> extends FieldDef<F> {\n  /**\n   * An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.\n   *\n   * If `null`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).\n   *\n   * __Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.\n   */\n  scale?: Scale | null;\n\n  /**\n   * Sort order for the encoded field.\n   * Supported `sort` values include `\"ascending\"`, `\"descending\"`, `null` (no sorting), or an array specifying the preferred order of values.\n   * For fields with discrete domains, `sort` can also be a [sort field definition object](https://vega.github.io/vega-lite/docs/sort.html#sort-field).\n   * For `sort` as an [array specifying the preferred order of values](https://vega.github.io/vega-lite/docs/sort.html#sort-array), the sort order will obey the values in the array, followed by any unspecified values in their original order.\n   *\n   * __Default value:__ `\"ascending\"`\n   */\n  sort?: string[] | SortOrder | SortField<F> | null;\n}\n\nexport interface PositionFieldDef<F> extends ScaleFieldDef<F> {\n  /**\n   * An object defining properties of axis's gridlines, ticks and labels.\n   * If `null`, the axis for the encoding channel will be removed.\n   *\n   * __Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n   */\n  axis?: Axis | null;\n\n  /**\n   * Type of stacking offset if the field should be stacked.\n   * `stack` is only applicable for `x` and `y` channels with continuous domains.\n   * For example, `stack` of `y` can be used to customize stacking for a vertical bar chart.\n   *\n   * `stack` can be one of the following values:\n   * - `\"zero\"`: stacking with baseline offset at zero value of the scale (for creating typical stacked [bar](https://vega.github.io/vega-lite/docs/stack.html#bar) and [area](https://vega.github.io/vega-lite/docs/stack.html#area) chart).\n   * - `\"normalize\"` - stacking with normalized domain (for creating [normalized stacked bar and area charts](https://vega.github.io/vega-lite/docs/stack.html#normalized). <br/>\n   * -`\"center\"` - stacking with center baseline (for [streamgraph](https://vega.github.io/vega-lite/docs/stack.html#streamgraph)).\n   * - `null` - No-stacking. This will produce layered [bar](https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart) and area chart.\n   *\n   * __Default value:__ `zero` for plots with all of the following conditions are true:\n   * (1) the mark is `bar` or `area`;\n   * (2) the stacked measure channel (x or y) has a linear scale;\n   * (3) At least one of non-position channels mapped to an unaggregated field that is different from x and y.  Otherwise, `null` by default.\n   */\n  stack?: StackOffset | null;\n}\n\n/**\n * Field definition of a mark property, which can contain a legend.\n */\nexport interface MarkPropFieldDef<F> extends ScaleFieldDef<F> {\n   /**\n    * An object defining properties of the legend.\n    * If `null`, the legend for the encoding channel will be removed.\n    *\n    * __Default value:__ If undefined, default [legend properties](https://vega.github.io/vega-lite/docs/legend.html) are applied.\n    */\n  legend?: Legend | null;\n}\n\n// Detail\n\n// Order Path have no scale\n\nexport interface OrderFieldDef<F> extends FieldDef<F> {\n  /**\n   * The sort order. One of `\"ascending\"` (default) or `\"descending\"`.\n   */\n  sort?: SortOrder;\n}\n\nexport interface TextFieldDef<F> extends FieldDef<F> {\n  /**\n   * The [formatting pattern](https://vega.github.io/vega-lite/docs/format.html) for a text field. If not defined, this will be determined automatically.\n   */\n  format?: string;\n}\n\nexport type ChannelDef<F> = ChannelDefWithCondition<FieldDef<F>>;\n\nexport function isConditionalDef<F>(channelDef: ChannelDef<F>): channelDef is ChannelDefWithCondition<FieldDef<F>> {\n  return !!channelDef && !!channelDef.condition;\n}\n\n/**\n * Return if a channelDef is a ConditionalValueDef with ConditionFieldDef\n */\nexport function hasConditionalFieldDef<F>(channelDef: ChannelDef<F>): channelDef is (ValueDef & {condition: Conditional<FieldDef<F>>}) {\n  return !!channelDef && !!channelDef.condition && !isArray(channelDef.condition) && isFieldDef(channelDef.condition);\n}\n\nexport function hasConditionalValueDef<F>(channelDef: ChannelDef<F>): channelDef is (ValueDef & {condition: Conditional<ValueDef> | Conditional<ValueDef>[]}) {\n  return !!channelDef && !!channelDef.condition && (\n    isArray(channelDef.condition) || isValueDef(channelDef.condition)\n  );\n}\n\nexport function isFieldDef<F>(channelDef: ChannelDef<F>): channelDef is FieldDef<F> | PositionFieldDef<F> | ScaleFieldDef<F> | MarkPropFieldDef<F> | OrderFieldDef<F> | TextFieldDef<F> {\n  return !!channelDef && (!!channelDef['field'] || channelDef['aggregate'] === 'count');\n}\n\nexport function isStringFieldDef(fieldDef: ChannelDef<string|RepeatRef>): fieldDef is FieldDef<string> {\n  return isFieldDef(fieldDef) && isString(fieldDef.field);\n}\n\nexport function isValueDef<F>(channelDef: ChannelDef<F>): channelDef is ValueDef {\n  return channelDef && 'value' in channelDef && channelDef['value'] !== undefined;\n}\n\nexport function isScaleFieldDef(channelDef: ChannelDef<any>): channelDef is ScaleFieldDef<any> {\n  return !!channelDef && (!!channelDef['scale'] || !!channelDef['sort']);\n}\n\nexport interface FieldRefOption {\n  /** exclude bin, aggregate, timeUnit */\n  nofn?: boolean;\n  /** Wrap the field with datum or parent (e.g., datum['...'] for Vega Expression */\n  expr?: 'datum' | 'parent';\n  /** prepend fn with custom function prefix */\n  prefix?: string;\n  /** append suffix to the field ref for bin (default='start') */\n  binSuffix?: 'end' | 'range' | 'mid';\n  /** append suffix to the field ref (general) */\n  suffix?: string;\n  /** Overrride which aggregate to use. Needed for unaggregated domain. */\n  aggregate?: AggregateOp;\n}\n\nexport function vgField(fieldDef: FieldDefBase<string>, opt: FieldRefOption = {}): string {\n  let field = fieldDef.field;\n  const prefix = opt.prefix;\n  let suffix = opt.suffix;\n\n  if (isCount(fieldDef)) {\n    field = 'count_*';\n  } else {\n    let fn: string = undefined;\n\n    if (!opt.nofn) {\n      if (fieldDef.bin) {\n        fn = binToString(fieldDef.bin);\n        suffix = opt.binSuffix || '';\n      } else if (fieldDef.aggregate) {\n        fn = String(opt.aggregate || fieldDef.aggregate);\n      } else if (fieldDef.timeUnit) {\n        fn = String(fieldDef.timeUnit);\n      }\n    }\n\n    if (fn) {\n      field = `${fn}_${field}`;\n    }\n  }\n\n  if (suffix) {\n    field = `${field}_${suffix}`;\n  }\n\n  if (prefix) {\n    field = `${prefix}_${field}`;\n  }\n\n  if (opt.expr) {\n    field = `${opt.expr}${accessPath(field)}`;\n  }\n\n  return field;\n}\n\nexport function isDiscrete(fieldDef: FieldDef<Field>) {\n  switch (fieldDef.type) {\n    case 'nominal':\n    case 'ordinal':\n    case 'geojson':\n      return true;\n    case 'quantitative':\n      return !!fieldDef.bin;\n    case 'latitude':\n    case 'longitude':\n    case 'temporal':\n      return false;\n  }\n  throw new Error(log.message.invalidFieldType(fieldDef.type));\n}\n\nexport function isContinuous(fieldDef: FieldDef<Field>) {\n  return !isDiscrete(fieldDef);\n}\n\nexport function isCount(fieldDef: FieldDefBase<Field>) {\n  return fieldDef.aggregate === 'count';\n}\n\nexport type FieldTitleFormatter = (fieldDef: FieldDefBase<string>, config: Config) => string;\n\nexport function verbalTitleFormatter(fieldDef: FieldDefBase<string>, config: Config) {\n  const {field: field, bin, timeUnit, aggregate} = fieldDef;\n  if (aggregate === 'count') {\n    return config.countTitle;\n  } else if (bin) {\n    return `${field} (binned)`;\n  } else if (timeUnit) {\n    const units = getTimeUnitParts(timeUnit).join('-');\n    return `${field} (${units})`;\n  } else if (aggregate) {\n    return `${titlecase(aggregate)} of ${field}`;\n  }\n  return field;\n}\n\nexport function functionalTitleFormatter(fieldDef: FieldDefBase<string>, config: Config) {\n  const fn = fieldDef.aggregate || fieldDef.timeUnit || (fieldDef.bin && 'bin');\n  if (fn) {\n    return fn.toUpperCase() + '(' + fieldDef.field + ')';\n  } else {\n    return fieldDef.field;\n  }\n}\n\nexport const defaultTitleFormatter: FieldTitleFormatter = (fieldDef: FieldDefBase<string>, config: Config) => {\n  switch (config.fieldTitle) {\n    case 'plain':\n      return fieldDef.field;\n    case 'functional':\n      return functionalTitleFormatter(fieldDef, config);\n    default:\n      return verbalTitleFormatter(fieldDef, config);\n  }\n};\n\nlet titleFormatter = defaultTitleFormatter;\n\nexport function setTitleFormatter(formatter: FieldTitleFormatter) {\n  titleFormatter = formatter;\n}\n\nexport function resetTitleFormatter() {\n  setTitleFormatter(defaultTitleFormatter);\n}\n\nexport function title(fieldDef: FieldDefBase<string>, config: Config) {\n  return titleFormatter(fieldDef, config);\n}\n\nexport function defaultType(fieldDef: FieldDef<Field>, channel: Channel): Type {\n  if (fieldDef.timeUnit) {\n    return 'temporal';\n  }\n  if (fieldDef.bin) {\n    return 'quantitative';\n  }\n  switch (rangeType(channel)) {\n    case 'continuous':\n      return 'quantitative';\n    case 'discrete':\n      return 'nominal';\n    case 'flexible': // color\n      return 'nominal';\n    default:\n      return 'quantitative';\n  }\n}\n\n/**\n * Returns the fieldDef -- either from the outer channelDef or from the condition of channelDef.\n * @param channelDef\n */\nexport function getFieldDef<F>(channelDef: ChannelDef<F>): FieldDef<F> {\n  if (isFieldDef(channelDef)) {\n    return channelDef;\n  } else if (hasConditionalFieldDef(channelDef)) {\n    return channelDef.condition;\n  }\n  return undefined;\n}\n\n/**\n * Convert type to full, lowercase type, or augment the fieldDef with a default type if missing.\n */\nexport function normalize(channelDef: ChannelDef<string>, channel: Channel): ChannelDef<any> {\n  if (isString(channelDef) || isNumber(channelDef) || isBoolean(channelDef)) {\n    const primitiveType = isString(channelDef) ? 'string' :\n      isNumber(channelDef) ? 'number' : 'boolean';\n    log.warn(log.message.primitiveChannelDef(channel, primitiveType, channelDef));\n    return {value: channelDef};\n  }\n\n  // If a fieldDef contains a field, we need type.\n  if (isFieldDef(channelDef)) {\n    return normalizeFieldDef(channelDef, channel);\n  } else if (hasConditionalFieldDef(channelDef)) {\n    return {\n      ...channelDef,\n      // Need to cast as normalizeFieldDef normally return FieldDef, but here we know that it is definitely Condition<FieldDef>\n      condition: normalizeFieldDef(channelDef.condition, channel) as Conditional<FieldDef<string>>\n    };\n  }\n  return channelDef;\n}\nexport function normalizeFieldDef(fieldDef: FieldDef<string>, channel: Channel) {\n  // Drop invalid aggregate\n  if (fieldDef.aggregate && !isAggregateOp(fieldDef.aggregate)) {\n    const {aggregate, ...fieldDefWithoutAggregate} = fieldDef;\n    log.warn(log.message.invalidAggregate(fieldDef.aggregate));\n    fieldDef = fieldDefWithoutAggregate;\n  }\n\n  // Normalize Time Unit\n  if (fieldDef.timeUnit) {\n    fieldDef = {\n      ...fieldDef,\n      timeUnit: normalizeTimeUnit(fieldDef.timeUnit)\n    };\n  }\n\n  // Normalize bin\n  if (fieldDef.bin) {\n    fieldDef = {\n      ...fieldDef,\n      bin: normalizeBin(fieldDef.bin, channel)\n    };\n  }\n\n  // Normalize Type\n  if (fieldDef.type) {\n    const fullType = getFullName(fieldDef.type);\n    if (fieldDef.type !== fullType) {\n      // convert short type to full type\n      fieldDef = {\n        ...fieldDef,\n        type: fullType\n      };\n    }\n    if (fieldDef.type !== 'quantitative') {\n      if (isCountingAggregateOp(fieldDef.aggregate)) {\n        log.warn(log.message.invalidFieldTypeForCountAggregate(fieldDef.type, fieldDef.aggregate));\n        fieldDef = {\n          ...fieldDef,\n          type: 'quantitative'\n        };\n      }\n    }\n  } else {\n    // If type is empty / invalid, then augment with default type\n    const newType = defaultType(fieldDef, channel);\n    log.warn(log.message.emptyOrInvalidFieldType(fieldDef.type, channel, newType));\n    fieldDef = {\n        ...fieldDef,\n      type: newType\n    };\n  }\n\n  const {compatible, warning} = channelCompatibility(fieldDef, channel);\n  if (!compatible) {\n    log.warn(warning);\n  }\n  return fieldDef;\n}\n\nexport function normalizeBin(bin: BinParams|boolean, channel: Channel) {\n  if (isBoolean(bin)) {\n    return {maxbins: autoMaxBins(channel)};\n  } else if (!bin.maxbins && !bin.step) {\n    return {...bin, maxbins: autoMaxBins(channel)};\n  } else {\n    return bin;\n  }\n}\n\nconst COMPATIBLE = {compatible: true};\nexport function channelCompatibility(fieldDef: FieldDef<Field>, channel: Channel): {compatible: boolean; warning?: string;} {\n  switch (channel) {\n    case 'row':\n    case 'column':\n      if (isContinuous(fieldDef) && !fieldDef.timeUnit) {\n        // TODO:(https://github.com/vega/vega-lite/issues/2011):\n        // with timeUnit it's not always strictly continuous\n        return {\n          compatible: false,\n          warning: log.message.facetChannelShouldBeDiscrete(channel)\n        };\n      }\n      return COMPATIBLE;\n\n    case 'x':\n    case 'y':\n    case 'color':\n    case 'fill':\n    case 'stroke':\n    case 'text':\n    case 'detail':\n    case 'key':\n    case 'tooltip':\n    case 'href':\n      return COMPATIBLE;\n\n    case 'longitude':\n    case 'longitude2':\n    case 'latitude':\n    case 'latitude2':\n      if (fieldDef.type !== QUANTITATIVE) {\n        return {\n          compatible: false,\n          warning: `Channel ${channel} should not be used with ${fieldDef.type} field.`\n        };\n      }\n      return COMPATIBLE;\n\n    case 'opacity':\n    case 'size':\n    case 'x2':\n    case 'y2':\n      if (isDiscrete(fieldDef) && !fieldDef.bin) {\n        return {\n          compatible: false,\n          warning: `Channel ${channel} should not be used with discrete field.`\n        };\n      }\n      return COMPATIBLE;\n\n    case 'shape':\n      if (fieldDef.type !== 'nominal' && fieldDef.type !== 'geojson') {\n        return {\n          compatible: false,\n          warning: 'Shape channel should be used with nominal data or geojson only'\n        };\n      }\n      return COMPATIBLE;\n\n    case 'order':\n      if (fieldDef.type === 'nominal') {\n        return {\n          compatible: false,\n          warning: `Channel order is inappropriate for nominal field, which has no inherent order.`\n        };\n      }\n      return COMPATIBLE;\n  }\n  throw new Error('channelCompatability not implemented for channel ' + channel);\n}\n\nexport function isNumberFieldDef(fieldDef: FieldDef<any>) {\n  return fieldDef.type === 'quantitative' || !!fieldDef.bin;\n}\n\nexport function isTimeFieldDef(fieldDef: FieldDef<any>) {\n  return fieldDef.type === 'temporal' || !!fieldDef.timeUnit;\n}\n","import {AggregateOp} from 'vega';\nimport {toSet} from 'vega-util';\nimport {contains, Flag, flagKeys} from './util';\n\nconst AGGREGATE_OP_INDEX: Flag<AggregateOp> = {\n  argmax: 1,\n  argmin: 1,\n  average: 1,\n  count: 1,\n  distinct: 1,\n  max: 1,\n  mean: 1,\n  median: 1,\n  min: 1,\n  missing: 1,\n  q1: 1,\n  q3: 1,\n  ci0: 1,\n  ci1: 1,\n  stderr: 1,\n  stdev: 1,\n  stdevp: 1,\n  sum: 1,\n  valid: 1,\n  values: 1,\n  variance: 1,\n  variancep: 1,\n};\n\nexport const AGGREGATE_OPS = flagKeys(AGGREGATE_OP_INDEX);\n\nexport function isAggregateOp(a: string): a is AggregateOp {\n  return !!AGGREGATE_OP_INDEX[a];\n}\n\nexport const COUNTING_OPS: AggregateOp[] = ['count', 'valid', 'missing', 'distinct'];\n\nexport function isCountingAggregateOp(aggregate: string): boolean {\n  return aggregate && contains(COUNTING_OPS, aggregate);\n}\n\n/** Additive-based aggregation operations.  These can be applied to stack. */\nexport const SUM_OPS: AggregateOp[] = [\n    'count',\n    'sum',\n    'distinct',\n    'valid',\n    'missing'\n];\n\n/**\n * Aggregation operators that always produce values within the range [domainMin, domainMax].\n */\nexport const SHARED_DOMAIN_OPS: AggregateOp[] = [\n    'mean',\n    'average',\n    'median',\n    'q1',\n    'q3',\n    'min',\n    'max',\n];\n\nexport const SHARED_DOMAIN_OP_INDEX = toSet(SHARED_DOMAIN_OPS);\n","import {isBoolean} from 'vega-util';\nimport {Channel, COLOR, COLUMN, FILL, OPACITY, ROW, SHAPE, SIZE, STROKE} from './channel';\nimport {keys, varName} from './util';\n\n\nexport interface BaseBin {\n  /**\n   * The number base to use for automatic bin determination (default is base 10).\n   *\n   * __Default value:__ `10`\n   *\n   */\n  base?: number;\n  /**\n   * An exact step size to use between bins.\n   *\n   * __Note:__ If provided, options such as maxbins will be ignored.\n   */\n  step?: number;\n  /**\n   * An array of allowable step sizes to choose from.\n   * @minItems 1\n   */\n  steps?: number[];\n  /**\n   * A minimum allowable step size (particularly useful for integer values).\n   */\n  minstep?: number;\n  /**\n   * Scale factors indicating allowable subdivisions. The default value is [5, 2], which indicates that for base 10 numbers (the default base), the method may consider dividing bin sizes by 5 and/or 2. For example, for an initial step size of 10, the method can check if bin sizes of 2 (= 10/5), 5 (= 10/2), or 1 (= 10/(5*2)) might also satisfy the given constraints.\n   *\n   * __Default value:__ `[5, 2]`\n   *\n   * @minItems 1\n   */\n  divide?: number[];\n  /**\n   * Maximum number of bins.\n   *\n   * __Default value:__ `6` for `row`, `column` and `shape` channels; `10` for other channels\n   *\n   * @minimum 2\n   */\n  maxbins?: number;\n  /**\n   * If true (the default), attempts to make the bin boundaries use human-friendly boundaries, such as multiples of ten.\n   */\n  nice?: boolean;\n}\n\n\n/**\n * Binning properties or boolean flag for determining whether to bin data or not.\n */\nexport interface BinParams extends BaseBin {\n  /**\n   * A two-element (`[min, max]`) array indicating the range of desired bin values.\n   * @minItems 2\n   * @maxItems 2\n   */\n  extent?: number[];  // VgBinTransform uses a different extent so we need to pull this out.\n}\n\nexport function binToString(bin: BinParams | boolean) {\n  if (isBoolean(bin)) {\n    return 'bin';\n  }\n  return 'bin' + keys(bin).map(p => varName(`_${p}_${bin[p]}`)).join('');\n}\n\nexport function autoMaxBins(channel: Channel): number {\n  switch (channel) {\n    case ROW:\n    case COLUMN:\n    case SIZE:\n    case COLOR:\n    case FILL:\n    case STROKE:\n    case OPACITY:\n      // Facets and Size shouldn't have too many bins\n      // We choose 6 like shape to simplify the rule\n    case SHAPE:\n      return 6; // Vega's \"shape\" has 6 distinct values\n    default:\n      return 10;\n  }\n}\n","/**\n * Vega-Lite's singleton logger utility.\n */\n\nimport {AggregateOp} from 'vega';\nimport {logger, LoggerInterface, Warn} from 'vega-util';\nimport {Channel, GeoPositionChannel} from './channel';\nimport {CompositeMark} from './compositemark';\nimport {DateTime, DateTimeExpr} from './datetime';\nimport {FieldDef} from './fielddef';\nimport {Mark} from './mark';\nimport {Projection} from './projection';\nimport {ScaleType} from './scale';\nimport {Type} from './type';\nimport {stringify} from './util';\nimport {VgSortField} from './vega.schema';\n\n\nexport {LoggerInterface} from 'vega-util';\n\n/**\n * Main (default) Vega Logger instance for Vega-Lite\n */\nconst main = logger(Warn);\nlet current: LoggerInterface = main;\n\n/**\n * Logger tool for checking if the code throws correct warning\n */\nexport class LocalLogger implements LoggerInterface {\n  public warns: any[] = [];\n  public infos: any[] = [];\n  public debugs: any[] = [];\n\n  public level() {\n    return this;\n  }\n\n  public warn(...args: any[]) {\n    this.warns.push(...args);\n    return this;\n  }\n\n  public info(...args: any[]) {\n    this.infos.push(...args);\n    return this;\n  }\n\n  public debug(...args: any[]) {\n    this.debugs.push(...args);\n    return this;\n  }\n}\n\nexport function wrap(f: (logger: LocalLogger) => void) {\n  return () => {\n    current = new LocalLogger();\n    f(current as LocalLogger);\n    reset();\n  };\n}\n\n/**\n * Set the singleton logger to be a custom logger\n */\nexport function set(newLogger: LoggerInterface) {\n  current = newLogger;\n  return current;\n}\n\n/**\n * Reset the main logger to use the default Vega Logger\n */\nexport function reset() {\n  current = main;\n  return current;\n}\n\nexport function warn(..._: any[]) {\n  current.warn.apply(current, arguments);\n}\n\nexport function info(..._: any[]) {\n  current.info.apply(current, arguments);\n}\n\nexport function debug(..._: any[]) {\n  current.debug.apply(current, arguments);\n}\n\n/**\n * Collection of all Vega-Lite Error Messages\n */\nexport namespace message {\n  export const INVALID_SPEC = 'Invalid spec';\n\n  // FIT\n  export const FIT_NON_SINGLE = 'Autosize \"fit\" only works for single views and layered views.';\n\n  export const CANNOT_FIX_RANGE_STEP_WITH_FIT = 'Cannot use a fixed value of \"rangeStep\" when \"autosize\" is \"fit\".';\n\n  // SELECTION\n  export function cannotProjectOnChannelWithoutField(channel: Channel) {\n    return `Cannot project a selection on encoding channel \"${channel}\", which has no field.`;\n  }\n\n  export function nearestNotSupportForContinuous(mark: string) {\n    return `The \"nearest\" transform is not supported for ${mark} marks.`;\n  }\n\n  export function selectionNotFound(name: string) {\n    return `Cannot find a selection named \"${name}\"`;\n  }\n\n  export const SCALE_BINDINGS_CONTINUOUS = 'Scale bindings are currently only supported for scales with unbinned, continuous domains.';\n\n  // REPEAT\n  export function noSuchRepeatedValue(field: string) {\n    return `Unknown repeated value \"${field}\".`;\n  }\n\n  // CONCAT\n  export const CONCAT_CANNOT_SHARE_AXIS = 'Axes cannot be shared in concatenated views.';\n\n  // REPEAT\n  export const REPEAT_CANNOT_SHARE_AXIS = 'Axes cannot be shared in repeated views.';\n\n  // TITLE\n  export function cannotSetTitleAnchor(type: string) {\n    return `Cannot set title \"anchor\" for a ${type} spec`;\n  }\n\n  // DATA\n  export function unrecognizedParse(p: string) {\n    return `Unrecognized parse \"${p}\".`;\n  }\n\n  export function differentParse(field: string, local: string, ancestor: string) {\n    return `An ancestor parsed field \"${field}\" as ${ancestor} but a child wants to parse the field as ${local}.`;\n  }\n\n  // TRANSFORMS\n  export function invalidTransformIgnored(transform: any) {\n    return `Ignoring an invalid transform: ${stringify(transform)}.`;\n  }\n\n  export const NO_FIELDS_NEEDS_AS = 'If \"from.fields\" is not specified, \"as\" has to be a string that specifies the key to be used for the data from the secondary source.';\n\n  // ENCODING & FACET\n\n  export function encodingOverridden(channels: Channel[]) {\n    return `Layer's shared ${channels.join(',')} channel ${channels.length === 1 ? 'is' : 'are'} overriden`;\n  }\n  export function projectionOverridden(opt: {parentProjection: Projection, projection: Projection}) {\n    const {parentProjection, projection} = opt;\n    return `Layer's shared projection ${stringify(parentProjection)} is overridden by a child projection ${stringify(projection)}.`;\n  }\n\n  export function primitiveChannelDef(channel: Channel, type: 'string' | 'number' | 'boolean', value: string | number | boolean) {\n    return `Channel ${channel} is a ${type}. Converted to {value: ${stringify(value)}}.`;\n  }\n\n  export function invalidFieldType(type: Type) {\n    return `Invalid field type \"${type}\"`;\n  }\n\n  export function nonZeroScaleUsedWithLengthMark(\n    mark: 'bar' | 'area', channel: Channel,\n    opt: {scaleType?: ScaleType, zeroFalse?: boolean}\n  ) {\n    const scaleText = opt.scaleType ? `${opt.scaleType} scale` :\n      opt.zeroFalse ? 'scale with zero=false' :\n      'scale with custom domain that excludes zero';\n\n    return `A ${scaleText} is used with ${mark} mark. This can be misleading as the ${channel === 'x' ? 'width' : 'height'} of the ${mark} can be arbitrary based on the scale domain. You may want to use point mark instead.`;\n  }\n\n  export function invalidFieldTypeForCountAggregate(type: Type, aggregate: string) {\n    return `Invalid field type \"${type}\" for aggregate: \"${aggregate}\", using \"quantitative\" instead.`;\n  }\n\n  export function invalidAggregate(aggregate: AggregateOp | string) {\n    return `Invalid aggregation operator \"${aggregate}\"`;\n  }\n\n  export function emptyOrInvalidFieldType(type: Type | string, channel: Channel, newType: Type) {\n    return `Invalid field type \"${type}\" for channel \"${channel}\", using \"${newType}\" instead.`;\n  }\n  export function droppingColor(type: 'encoding' | 'property', opt: {fill?: boolean, stroke?: boolean}) {\n    const {fill, stroke} = opt;\n    return `Dropping color ${type} as the plot also has ` + (\n      fill && stroke ? 'fill and stroke' : fill ? 'fill' : 'stroke'\n    );\n  }\n\n  export function emptyFieldDef(fieldDef: FieldDef<string>, channel: Channel) {\n    return `Dropping ${stringify(fieldDef)} from channel \"${channel}\" since it does not contain data field or value.`;\n  }\n  export function latLongDeprecated(channel: Channel, type: Type, newChannel: GeoPositionChannel) {\n    return `${channel}-encoding with type ${type} is deprecated. Replacing with ${newChannel}-encoding.`;\n  }\n\n  export const LINE_WITH_VARYING_SIZE = 'Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.';\n\n  export function incompatibleChannel(channel: Channel, markOrFacet: Mark | 'facet' | CompositeMark, when?: string) {\n    return `${channel} dropped as it is incompatible with \"${markOrFacet}\"${when ? ` when ${when}` : ''}.`;\n  }\n\n  export function invalidEncodingChannel(channel: string) {\n    return `${channel}-encoding is dropped as ${channel} is not a valid encoding channel.`;\n  }\n\n  export function facetChannelShouldBeDiscrete(channel: string) {\n    return `${channel} encoding should be discrete (ordinal / nominal / binned).`;\n  }\n\n  export function discreteChannelCannotEncode(channel: Channel, type: Type) {\n    return `Using discrete channel \"${channel}\" to encode \"${type}\" field can be misleading as it does not encode ${type === 'ordinal' ? 'order' : 'magnitude'}.`;\n  }\n\n  // Mark\n  export const BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL = 'Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.';\n\n  export function lineWithRange(hasX2: boolean, hasY2: boolean) {\n    const channels = hasX2 && hasY2 ? 'x2 and y2' : hasX2 ? 'x2' : 'y2';\n    return `Line mark is for continuous lines and thus cannot be used with ${channels}. We will use the rule mark (line segments) instead.`;\n  }\n\n  export function unclearOrientContinuous(mark: Mark) {\n    return `Cannot clearly determine orientation for \"${mark}\" since both x and y channel encode continuous fields. In this case, we use vertical by default`;\n  }\n\n  export function unclearOrientDiscreteOrEmpty(mark: Mark) {\n    return `Cannot clearly determine orientation for \"${mark}\" since both x and y channel encode discrete or empty fields.`;\n  }\n\n  export function orientOverridden(original: string, actual: string) {\n    return `Specified orient \"${original}\" overridden with \"${actual}\"`;\n  }\n\n  // SCALE\n  export const CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN = 'custom domain scale cannot be unioned with default field-based domain';\n\n  export function cannotUseScalePropertyWithNonColor(prop: string) {\n    return `Cannot use the scale property \"${prop}\" with non-color channel.`;\n  }\n\n  export function unaggregateDomainHasNoEffectForRawField(fieldDef: FieldDef<string>) {\n    return `Using unaggregated domain with raw field has no effect (${stringify(fieldDef)}).`;\n  }\n\n  export function unaggregateDomainWithNonSharedDomainOp(aggregate: string) {\n    return `Unaggregated domain not applicable for \"${aggregate}\" since it produces values outside the origin domain of the source data.`;\n  }\n\n  export function unaggregatedDomainWithLogScale(fieldDef: FieldDef<string>) {\n    return `Unaggregated domain is currently unsupported for log scale (${stringify(fieldDef)}).`;\n  }\n\n  export function cannotUseSizeFieldWithBandSize(positionChannel: 'x'|'y') {\n    return `Using size field when ${positionChannel}-channel has a band scale is not supported.`;\n  }\n\n  export function cannotApplySizeToNonOrientedMark(mark: Mark) {\n    return `Cannot apply size to non-oriented mark \"${mark}\".`;\n  }\n\n  export function rangeStepDropped(channel: Channel) {\n    return `rangeStep for \"${channel}\" is dropped as top-level ${\n      channel === 'x' ? 'width' : 'height'} is provided.`;\n  }\n\n  export function scaleTypeNotWorkWithChannel(channel: Channel, scaleType: ScaleType, defaultScaleType: ScaleType) {\n    return `Channel \"${channel}\" does not work with \"${scaleType}\" scale. We are using \"${defaultScaleType}\" scale instead.`;\n  }\n\n  export function scaleTypeNotWorkWithFieldDef(scaleType: ScaleType, defaultScaleType: ScaleType) {\n    return `FieldDef does not work with \"${scaleType}\" scale. We are using \"${defaultScaleType}\" scale instead.`;\n  }\n\n  export function scalePropertyNotWorkWithScaleType(scaleType: ScaleType, propName: string, channel: Channel) {\n    return `${channel}-scale's \"${propName}\" is dropped as it does not work with ${scaleType} scale.`;\n  }\n\n  export function scaleTypeNotWorkWithMark(mark: Mark, scaleType: ScaleType) {\n    return `Scale type \"${scaleType}\" does not work with mark \"${mark}\".`;\n  }\n\n  export function mergeConflictingProperty<T>(property: string, propertyOf: string, v1: T, v2: T) {\n    return `Conflicting ${propertyOf} property \"${property}\" (${stringify(v1)} and ${stringify(v2)}).  Using ${stringify(v1)}.`;\n  }\n\n  export function independentScaleMeansIndependentGuide(channel: Channel) {\n    return `Setting the scale to be independent for \"${channel}\" means we also have to set the guide (axis or legend) to be independent.`;\n  }\n\n  export function conflictedDomain(channel: Channel) {\n    return `Cannot set ${channel}-scale's \"domain\" as it is binned. Please use \"bin\"'s \"extent\" instead.`;\n  }\n\n  export function domainSortDropped(sort: VgSortField) {\n    return `Dropping sort property ${stringify(sort)} as unioned domains only support boolean or op 'count'.`;\n  }\n\n  export const UNABLE_TO_MERGE_DOMAINS = 'Unable to merge domains';\n\n  export const MORE_THAN_ONE_SORT = 'Domains that should be unioned has conflicting sort properties. Sort will be set to true.';\n\n  // AXIS\n  export const INVALID_CHANNEL_FOR_AXIS = 'Invalid channel for axis.';\n\n  // STACK\n  export function cannotStackRangedMark(channel: Channel) {\n    return `Cannot stack \"${channel}\" if there is already \"${channel}2\"`;\n  }\n\n  export function cannotStackNonLinearScale(scaleType: ScaleType) {\n    return `Cannot stack non-linear scale (${scaleType})`;\n  }\n\n  export function stackNonSummativeAggregate(aggregate: string) {\n    return `Stacking is applied even though the aggregate function is non-summative (\"${aggregate}\")`;\n  }\n\n  // TIMEUNIT\n  export function invalidTimeUnit(unitName: string, value: string | number) {\n    return `Invalid ${unitName}: ${stringify(value)}`;\n  }\n\n  export function dayReplacedWithDate(fullTimeUnit: string) {\n    return `Time unit \"${fullTimeUnit}\" is not supported. We are replacing it with ${\n      fullTimeUnit.replace('day', 'date')}.`;\n  }\n\n  export function droppedDay(d: DateTime | DateTimeExpr) {\n    return `Dropping day from datetime ${stringify(d)} as day cannot be combined with other units.`;\n  }\n}\n\n","import {DateTimeExpr, dateTimeExpr} from './datetime';\nimport * as log from './log';\nimport {accessPath, Flag, flagKeys} from './util';\n\nexport namespace TimeUnit {\n  export const YEAR: 'year' = 'year';\n  export const MONTH: 'month' = 'month';\n  export const DAY: 'day' = 'day';\n  export const DATE: 'date' = 'date';\n  export const HOURS: 'hours' = 'hours';\n  export const MINUTES: 'minutes' = 'minutes';\n  export const SECONDS: 'seconds' = 'seconds';\n  export const MILLISECONDS: 'milliseconds' = 'milliseconds';\n  export const YEARMONTH: 'yearmonth' = 'yearmonth';\n  export const YEARMONTHDATE: 'yearmonthdate' = 'yearmonthdate';\n  export const YEARMONTHDATEHOURS: 'yearmonthdatehours' = 'yearmonthdatehours';\n  export const YEARMONTHDATEHOURSMINUTES: 'yearmonthdatehoursminutes' = 'yearmonthdatehoursminutes';\n  export const YEARMONTHDATEHOURSMINUTESSECONDS: 'yearmonthdatehoursminutesseconds' = 'yearmonthdatehoursminutesseconds';\n\n  // MONTHDATE always include 29 February since we use year 0th (which is a leap year);\n  export const MONTHDATE: 'monthdate' = 'monthdate';\n  export const HOURSMINUTES: 'hoursminutes' = 'hoursminutes';\n  export const HOURSMINUTESSECONDS: 'hoursminutesseconds' = 'hoursminutesseconds';\n  export const MINUTESSECONDS: 'minutesseconds' = 'minutesseconds';\n  export const SECONDSMILLISECONDS: 'secondsmilliseconds' = 'secondsmilliseconds';\n  export const QUARTER: 'quarter' = 'quarter';\n  export const YEARQUARTER: 'yearquarter' = 'yearquarter';\n  export const QUARTERMONTH: 'quartermonth' = 'quartermonth';\n  export const YEARQUARTERMONTH: 'yearquartermonth' = 'yearquartermonth';\n  export const UTCYEAR: 'utcyear' = 'utcyear';\n  export const UTCMONTH: 'utcmonth' = 'utcmonth';\n  export const UTCDAY: 'utcday' = 'utcday';\n  export const UTCDATE: 'utcdate' = 'utcdate';\n  export const UTCHOURS: 'utchours' = 'utchours';\n  export const UTCMINUTES: 'utcminutes' = 'utcminutes';\n  export const UTCSECONDS: 'utcseconds' = 'utcseconds';\n  export const UTCMILLISECONDS: 'utcmilliseconds' = 'utcmilliseconds';\n  export const UTCYEARMONTH: 'utcyearmonth' = 'utcyearmonth';\n  export const UTCYEARMONTHDATE: 'utcyearmonthdate' = 'utcyearmonthdate';\n  export const UTCYEARMONTHDATEHOURS: 'utcyearmonthdatehours' = 'utcyearmonthdatehours';\n  export const UTCYEARMONTHDATEHOURSMINUTES: 'utcyearmonthdatehoursminutes' = 'utcyearmonthdatehoursminutes';\n  export const UTCYEARMONTHDATEHOURSMINUTESSECONDS: 'utcyearmonthdatehoursminutesseconds' = 'utcyearmonthdatehoursminutesseconds';\n\n  // MONTHDATE always include 29 February since we use year 0th (which is a leap year);\n  export const UTCMONTHDATE: 'utcmonthdate' = 'utcmonthdate';\n  export const UTCHOURSMINUTES: 'utchoursminutes' = 'utchoursminutes';\n  export const UTCHOURSMINUTESSECONDS: 'utchoursminutesseconds' = 'utchoursminutesseconds';\n  export const UTCMINUTESSECONDS: 'utcminutesseconds' = 'utcminutesseconds';\n  export const UTCSECONDSMILLISECONDS: 'utcsecondsmilliseconds' = 'utcsecondsmilliseconds';\n  export const UTCQUARTER: 'utcquarter' = 'utcquarter';\n  export const UTCYEARQUARTER: 'utcyearquarter' = 'utcyearquarter';\n  export const UTCQUARTERMONTH: 'utcquartermonth' = 'utcquartermonth';\n  export const UTCYEARQUARTERMONTH: 'utcyearquartermonth' = 'utcyearquartermonth';\n}\n\nexport type LocalSingleTimeUnit =\n  typeof TimeUnit.YEAR |\n  typeof TimeUnit.QUARTER |\n  typeof TimeUnit.MONTH |\n  typeof TimeUnit.DAY |\n  typeof TimeUnit.DATE |\n  typeof TimeUnit.HOURS |\n  typeof TimeUnit.MINUTES |\n  typeof TimeUnit.SECONDS |\n  typeof TimeUnit.MILLISECONDS;\n\n/** Time Unit that only corresponds to only one part of Date objects. */\nconst LOCAL_SINGLE_TIMEUNIT_INDEX: Flag<LocalSingleTimeUnit> = {\n  year: 1,\n  quarter: 1,\n  month: 1,\n  day: 1,\n  date: 1,\n  hours: 1,\n  minutes: 1,\n  seconds: 1,\n  milliseconds: 1\n};\n\nexport const TIMEUNIT_PARTS = flagKeys(LOCAL_SINGLE_TIMEUNIT_INDEX);\n\nexport function isLocalSingleTimeUnit(timeUnit: string): timeUnit is LocalSingleTimeUnit {\n  return !!LOCAL_SINGLE_TIMEUNIT_INDEX[timeUnit];\n}\n\nexport type UtcSingleTimeUnit =\n  typeof TimeUnit.UTCYEAR |\n  typeof TimeUnit.UTCQUARTER |\n  typeof TimeUnit.UTCMONTH |\n  typeof TimeUnit.UTCDAY |\n  typeof TimeUnit.UTCDATE |\n  typeof TimeUnit.UTCHOURS |\n  typeof TimeUnit.UTCMINUTES |\n  typeof TimeUnit.UTCSECONDS |\n  typeof TimeUnit.UTCMILLISECONDS;\n\nconst UTC_SINGLE_TIMEUNIT_INDEX: Flag<UtcSingleTimeUnit> = {\n  utcyear: 1,\n  utcquarter: 1,\n  utcmonth: 1,\n  utcday: 1,\n  utcdate: 1,\n  utchours: 1,\n  utcminutes: 1,\n  utcseconds: 1,\n  utcmilliseconds: 1\n};\n\nexport function isUtcSingleTimeUnit(timeUnit: string): timeUnit is UtcSingleTimeUnit {\n  return !!UTC_SINGLE_TIMEUNIT_INDEX[timeUnit];\n}\n\nexport type SingleTimeUnit = LocalSingleTimeUnit | UtcSingleTimeUnit;\n\nexport type LocalMultiTimeUnit =\n  // Local Time\n  typeof TimeUnit.YEARQUARTER | typeof TimeUnit.YEARQUARTERMONTH |\n  typeof TimeUnit.YEARMONTH | typeof TimeUnit.YEARMONTHDATE | typeof TimeUnit.YEARMONTHDATEHOURS | typeof TimeUnit.YEARMONTHDATEHOURSMINUTES| typeof TimeUnit.YEARMONTHDATEHOURSMINUTESSECONDS |\n  typeof TimeUnit.QUARTERMONTH |\n  typeof TimeUnit.MONTHDATE |\n  typeof TimeUnit.HOURSMINUTES | typeof TimeUnit.HOURSMINUTESSECONDS |\n  typeof TimeUnit.MINUTESSECONDS |\n  typeof TimeUnit.SECONDSMILLISECONDS;\n\nconst LOCAL_MULTI_TIMEUNIT_INDEX: Flag<LocalMultiTimeUnit> = {\n  yearquarter: 1,\n  yearquartermonth: 1,\n\n  yearmonth: 1,\n  yearmonthdate: 1,\n  yearmonthdatehours: 1,\n  yearmonthdatehoursminutes: 1,\n  yearmonthdatehoursminutesseconds: 1,\n\n  quartermonth: 1,\n\n  monthdate: 1,\n\n  hoursminutes: 1,\n  hoursminutesseconds: 1,\n\n  minutesseconds: 1,\n\n  secondsmilliseconds: 1\n};\n\nexport type UtcMultiTimeUnit =\n  typeof TimeUnit.UTCYEARQUARTER | typeof TimeUnit.UTCYEARQUARTERMONTH |\n  typeof TimeUnit.UTCYEARMONTH | typeof TimeUnit.UTCYEARMONTHDATE | typeof TimeUnit.UTCYEARMONTHDATEHOURS | typeof TimeUnit.UTCYEARMONTHDATEHOURSMINUTES| typeof TimeUnit.UTCYEARMONTHDATEHOURSMINUTESSECONDS |\n  typeof TimeUnit.UTCQUARTERMONTH |\n  typeof TimeUnit.UTCMONTHDATE |\n  typeof TimeUnit.UTCHOURSMINUTES | typeof TimeUnit.UTCHOURSMINUTESSECONDS |\n  typeof TimeUnit.UTCMINUTESSECONDS |\n  typeof TimeUnit.UTCSECONDSMILLISECONDS;\n\nconst UTC_MULTI_TIMEUNIT_INDEX: Flag<UtcMultiTimeUnit> = {\n  utcyearquarter: 1,\n  utcyearquartermonth: 1,\n\n  utcyearmonth: 1,\n  utcyearmonthdate: 1,\n  utcyearmonthdatehours: 1,\n  utcyearmonthdatehoursminutes: 1,\n  utcyearmonthdatehoursminutesseconds: 1,\n\n  utcquartermonth: 1,\n\n  utcmonthdate: 1,\n\n  utchoursminutes: 1,\n  utchoursminutesseconds: 1,\n\n  utcminutesseconds: 1,\n\n  utcsecondsmilliseconds: 1\n};\n\nexport type MultiTimeUnit = LocalMultiTimeUnit | UtcMultiTimeUnit;\n\n\nexport type LocalTimeUnit = LocalSingleTimeUnit | LocalMultiTimeUnit;\nexport type UtcTimeUnit = UtcSingleTimeUnit | UtcMultiTimeUnit;\n\nconst UTC_TIMEUNIT_INDEX: Flag<UtcTimeUnit> = {\n  ...UTC_SINGLE_TIMEUNIT_INDEX,\n  ...UTC_MULTI_TIMEUNIT_INDEX\n};\n\nexport function isUTCTimeUnit(t: string): t is UtcTimeUnit {\n  return !!UTC_TIMEUNIT_INDEX[t];\n}\n\nexport function getLocalTimeUnit(t: UtcTimeUnit): LocalTimeUnit {\n  return t.substr(3) as LocalTimeUnit;\n}\n\nexport type TimeUnit = SingleTimeUnit | MultiTimeUnit;\n\nconst TIMEUNIT_INDEX: Flag<TimeUnit> = {\n  ...LOCAL_SINGLE_TIMEUNIT_INDEX,\n  ...UTC_SINGLE_TIMEUNIT_INDEX,\n  ...LOCAL_MULTI_TIMEUNIT_INDEX,\n  ...UTC_MULTI_TIMEUNIT_INDEX\n};\n\nexport const TIMEUNITS = flagKeys(TIMEUNIT_INDEX);\n\nexport function isTimeUnit(t: string): t is TimeUnit {\n  return !!TIMEUNIT_INDEX[t];\n}\n\ntype DateMethodName = keyof Date;\n\nconst SET_DATE_METHOD: Record<LocalSingleTimeUnit, DateMethodName> = {\n  year: 'setFullYear',\n  month: 'setMonth',\n  date: 'setDate',\n  hours: 'setHours',\n  minutes: 'setMinutes',\n  seconds: 'setSeconds',\n  milliseconds: 'setMilliseconds',\n  // Day and quarter have their own special cases\n  quarter: null,\n  day: null,\n};\n\n/**\n * Converts a date to only have the measurements relevant to the specified unit\n * i.e. ('yearmonth', '2000-12-04 07:58:14') -> '2000-12-01 00:00:00'\n * Note: the base date is Jan 01 1900 00:00:00\n */\nexport function convert(unit: TimeUnit, date: Date): Date {\n  const isUTC = isUTCTimeUnit(unit);\n  const result: Date = isUTC ?\n    // start with uniform date\n    new Date(Date.UTC(0, 0, 1, 0, 0, 0, 0)) :\n    new Date(0, 0, 1, 0, 0, 0, 0);\n    for (const timeUnitPart of TIMEUNIT_PARTS) {\n    if (containsTimeUnit(unit, timeUnitPart)) {\n      switch (timeUnitPart) {\n        case TimeUnit.DAY:\n          throw new Error('Cannot convert to TimeUnits containing \\'day\\'');\n        case TimeUnit.QUARTER: {\n          const {getDateMethod, setDateMethod} = dateMethods('month', isUTC);\n          // indicate quarter by setting month to be the first of the quarter i.e. may (4) -> april (3)\n          result[setDateMethod]((Math.floor(date[getDateMethod]() / 3)) * 3);\n          break;\n        }\n        default:\n          const {getDateMethod, setDateMethod} = dateMethods(timeUnitPart, isUTC);\n          result[setDateMethod](date[getDateMethod]());\n      }\n    }\n  }\n  return result;\n}\n\nfunction dateMethods(singleUnit: SingleTimeUnit, isUtc: boolean) {\n  const rawSetDateMethod = SET_DATE_METHOD[singleUnit];\n  const setDateMethod = isUtc ? 'setUTC' + rawSetDateMethod.substr(3) : rawSetDateMethod;\n  const getDateMethod = 'get' + (isUtc ? 'UTC' : '') + rawSetDateMethod.substr(3);\n  return {setDateMethod, getDateMethod};\n}\n\nexport function getTimeUnitParts(timeUnit: TimeUnit) {\n  return TIMEUNIT_PARTS.reduce((parts, part) => {\n    if (containsTimeUnit(timeUnit, part)) {\n      return parts.concat(part);\n    }\n    return parts;\n  }, []);\n}\n\n/** Returns true if fullTimeUnit contains the timeUnit, false otherwise. */\nexport function containsTimeUnit(fullTimeUnit: TimeUnit, timeUnit: TimeUnit) {\n  const index = fullTimeUnit.indexOf(timeUnit);\n  return index > -1 &&\n    (\n      timeUnit !== TimeUnit.SECONDS ||\n      index === 0 ||\n      fullTimeUnit.charAt(index-1) !== 'i' // exclude milliseconds\n    );\n}\n\n/**\n * Returns Vega expresssion for a given timeUnit and fieldRef\n */\nexport function fieldExpr(fullTimeUnit: TimeUnit, field: string): string {\n  const fieldRef = `datum${accessPath(field)}`;\n\n  const utc = isUTCTimeUnit(fullTimeUnit) ? 'utc' : '';\n  function func(timeUnit: TimeUnit) {\n    if (timeUnit === TimeUnit.QUARTER) {\n      // quarter starting at 0 (0,3,6,9).\n      return `(${utc}quarter(${fieldRef})-1)`;\n    } else {\n      return `${utc}${timeUnit}(${fieldRef})`;\n    }\n  }\n\n  const d = TIMEUNIT_PARTS.reduce((dateExpr: DateTimeExpr, tu: TimeUnit) => {\n    if (containsTimeUnit(fullTimeUnit, tu)) {\n      dateExpr[tu] = func(tu);\n    }\n    return dateExpr;\n  }, {} as {[key in SingleTimeUnit]: string});\n\n  return dateTimeExpr(d);\n}\n\n/**\n * returns the signal expression used for axis labels for a time unit\n */\nexport function formatExpression(timeUnit: TimeUnit, field: string, shortTimeLabels: boolean, isUTCScale: boolean): string {\n  if (!timeUnit) {\n    return undefined;\n  }\n\n  const dateComponents: string[] = [];\n  let expression = '';\n  const hasYear = containsTimeUnit(timeUnit, TimeUnit.YEAR);\n\n  if (containsTimeUnit(timeUnit, TimeUnit.QUARTER)) {\n   // special expression for quarter as prefix\n    expression = `'Q' + quarter(${field})`;\n  }\n\n  if (containsTimeUnit(timeUnit, TimeUnit.MONTH)) {\n    // By default use short month name\n    dateComponents.push(shortTimeLabels !== false ? '%b' : '%B');\n  }\n\n  if (containsTimeUnit(timeUnit, TimeUnit.DAY)) {\n    dateComponents.push(shortTimeLabels ? '%a' : '%A');\n  } else if (containsTimeUnit(timeUnit, TimeUnit.DATE)) {\n    dateComponents.push('%d' + (hasYear ? ',' : '')); // add comma if there is year\n  }\n\n  if (hasYear) {\n    dateComponents.push(shortTimeLabels ? '%y' : '%Y');\n  }\n\n  const timeComponents: string[] = [];\n\n  if (containsTimeUnit(timeUnit, TimeUnit.HOURS)) {\n    timeComponents.push('%H');\n  }\n  if (containsTimeUnit(timeUnit, TimeUnit.MINUTES)) {\n    timeComponents.push('%M');\n  }\n  if (containsTimeUnit(timeUnit, TimeUnit.SECONDS)) {\n    timeComponents.push('%S');\n  }\n  if (containsTimeUnit(timeUnit, TimeUnit.MILLISECONDS)) {\n    timeComponents.push('%L');\n  }\n\n  const dateTimeComponents: string[] = [];\n  if (dateComponents.length > 0) {\n    dateTimeComponents.push(dateComponents.join(' '));\n  }\n  if (timeComponents.length > 0) {\n    dateTimeComponents.push(timeComponents.join(':'));\n  }\n\n  if (dateTimeComponents.length > 0) {\n    if (expression) {\n      // Add space between quarter and main time format\n      expression += ` + ' ' + `;\n    }\n\n    // We only use utcFormat for utc scale\n    // For utc time units, the data is already converted as a part of timeUnit transform.\n    // Thus, utc time units should use timeFormat to avoid shifting the time twice.\n    if (isUTCScale) {\n      expression += `utcFormat(${field}, '${dateTimeComponents.join(' ')}')`;\n    } else {\n      expression += `timeFormat(${field}, '${dateTimeComponents.join(' ')}')`;\n    }\n  }\n\n  // If expression is still an empty string, return undefined instead.\n  return expression || undefined;\n}\n\nexport function normalizeTimeUnit(timeUnit: TimeUnit): TimeUnit {\n  if (timeUnit !== 'day' && timeUnit.indexOf('day') >= 0) {\n    log.warn(log.message.dayReplacedWithDate(timeUnit));\n    return timeUnit.replace('day', 'date') as TimeUnit;\n  }\n  return timeUnit;\n}\n","// DateTime definition object\n\nimport {isNumber} from 'vega-util';\nimport * as log from './log';\nimport {duplicate, keys} from './util';\n\n\n/*\n * A designated year that starts on Sunday.\n */\nconst SUNDAY_YEAR = 2006;\n\n/**\n * @minimum 1\n * @maximum 12\n * @TJS-type integer\n */\nexport type Month = number;\n\n/**\n * @minimum 1\n * @maximum 7\n */\nexport type Day = number;\n\n/**\n * Object for defining datetime in Vega-Lite Filter.\n * If both month and quarter are provided, month has higher precedence.\n * `day` cannot be combined with other date.\n * We accept string for month and day names.\n */\nexport interface DateTime {\n  /**\n   * Integer value representing the year.\n   * @TJS-type integer\n   */\n  year?: number;\n\n  /**\n   * Integer value representing the quarter of the year (from 1-4).\n   * @minimum 1\n   * @maximum 4\n   * @TJS-type integer\n   */\n  quarter?: number;\n\n  /** One of: (1) integer value representing the month from `1`-`12`. `1` represents January;  (2) case-insensitive month name (e.g., `\"January\"`);  (3) case-insensitive, 3-character short month name (e.g., `\"Jan\"`). */\n  month?: Month | string;\n\n  /**\n   * Integer value representing the date from 1-31.\n   * @minimum 1\n   * @maximum 31\n   * @TJS-type integer\n   */\n  date?: number;\n\n  /**\n   * Value representing the day of a week.  This can be one of: (1) integer value -- `1` represents Monday; (2) case-insensitive day name (e.g., `\"Monday\"`);  (3) case-insensitive, 3-character short day name (e.g., `\"Mon\"`).   <br/> **Warning:** A DateTime definition object with `day`** should not be combined with `year`, `quarter`, `month`, or `date`.\n   */\n  day?: Day | string;\n\n  /**\n   * Integer value representing the hour of a day from 0-23.\n   * @minimum 0\n   * @maximum 23\n   * @TJS-type integer\n   */\n  hours?: number;\n\n  /**\n   * Integer value representing the minute segment of time from 0-59.\n   * @minimum 0\n   * @maximum 59\n   * @TJS-type integer\n   */\n  minutes?: number;\n\n  /**\n   * Integer value representing the second segment (0-59) of a time value\n   * @minimum 0\n   * @maximum 59\n   * @TJS-type integer\n   */\n  seconds?: number;\n\n  /**\n   * Integer value representing the millisecond segment of time.\n   * @minimum 0\n   * @maximum 999\n   * @TJS-type integer\n   */\n  milliseconds?: number;\n\n  /**\n   * A boolean flag indicating if date time is in utc time. If false, the date time is in local time\n   */\n  utc?: boolean;\n}\n\n\n/**\n * Internal Object for defining datetime expressions.\n * This is an expression version of DateTime.\n * If both month and quarter are provided, month has higher precedence.\n * `day` cannot be combined with other date.\n */\nexport interface DateTimeExpr {\n  year?: string;\n  quarter?: string;\n  month?: string;\n  date?: string;\n  day?: string;\n  hours?: string;\n  minutes?: string;\n  seconds?: string;\n  milliseconds?: string;\n  utc?: boolean;\n}\n\nexport function isDateTime(o: any): o is DateTime {\n  return !!o && (!!o.year || !!o.quarter || !!o.month || !!o.date || !!o.day ||\n    !!o.hours || !!o.minutes || !!o.seconds || !!o.milliseconds);\n}\n\nexport const MONTHS = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\nexport const SHORT_MONTHS = MONTHS.map((m) => m.substr(0, 3));\n\nexport const DAYS = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\nexport const SHORT_DAYS = DAYS.map((d) => d.substr(0,3));\n\nfunction normalizeQuarter(q: number | string) {\n  if (isNumber(q)) {\n    if (q > 4) {\n      log.warn(log.message.invalidTimeUnit('quarter', q));\n    }\n    // We accept 1-based quarter, so need to readjust to 0-based quarter\n    return (q - 1) + '';\n  } else {\n    // Invalid quarter\n    throw new Error(log.message.invalidTimeUnit('quarter', q));\n  }\n}\n\nfunction normalizeMonth(m: string | number) {\n  if (isNumber(m)) {\n    // We accept 1-based month, so need to readjust to 0-based month\n    return (m - 1) + '';\n  } else {\n    const lowerM = m.toLowerCase();\n    const monthIndex = MONTHS.indexOf(lowerM);\n    if (monthIndex !== -1) {\n      return monthIndex + ''; // 0 for january, ...\n    }\n    const shortM = lowerM.substr(0, 3);\n    const shortMonthIndex = SHORT_MONTHS.indexOf(shortM);\n    if (shortMonthIndex !== -1) {\n      return shortMonthIndex + '';\n    }\n    // Invalid month\n    throw new Error(log.message.invalidTimeUnit('month', m));\n  }\n}\n\nfunction normalizeDay(d: string | number) {\n  if (isNumber(d)) {\n    // mod so that this can be both 0-based where 0 = sunday\n    // and 1-based where 7=sunday\n    return (d % 7) + '';\n  } else {\n    const lowerD = d.toLowerCase();\n    const dayIndex = DAYS.indexOf(lowerD);\n    if (dayIndex !== -1) {\n      return dayIndex + ''; // 0 for january, ...\n    }\n    const shortD = lowerD.substr(0, 3);\n    const shortDayIndex = SHORT_DAYS.indexOf(shortD);\n    if (shortDayIndex !== -1) {\n      return shortDayIndex + '';\n    }\n    // Invalid day\n    throw new Error(log.message.invalidTimeUnit('day', d));\n  }\n}\n\n/**\n * Return Vega Expression for a particular date time.\n * @param d\n * @param normalize whether to normalize quarter, month, day.\n */\nexport function dateTimeExpr(d: DateTime | DateTimeExpr, normalize = false) {\n  const units: (string | number)[] = [];\n\n  if (normalize && d.day !== undefined) {\n    if (keys(d).length > 1) {\n      log.warn(log.message.droppedDay(d));\n      d = duplicate(d);\n      delete d.day;\n    }\n  }\n\n  if (d.year !== undefined) {\n    units.push(d.year);\n  } else if (d.day !== undefined) {\n    // Set year to 2006 for working with day since January 1 2006 is a Sunday\n    units.push(SUNDAY_YEAR);\n  } else {\n    units.push(0);\n  }\n\n  if (d.month !== undefined) {\n    const month = normalize ? normalizeMonth(d.month) : d.month;\n    units.push(month);\n  } else if (d.quarter !== undefined) {\n    const quarter = normalize ? normalizeQuarter(d.quarter) : d.quarter;\n    units.push(quarter + '*3');\n  } else {\n    units.push(0); // months start at zero in JS\n  }\n\n  if (d.date !== undefined) {\n    units.push(d.date);\n  } else if (d.day !== undefined) {\n    // HACK: Day only works as a standalone unit\n    // This is only correct because we always set year to 2006 for day\n    const day = normalize ? normalizeDay(d.day) : d.day;\n    units.push(day + '+1');\n  } else {\n    units.push(1); // Date starts at 1 in JS\n  }\n\n  // Note: can't use TimeUnit enum here as importing it will create\n  // circular dependency problem!\n  for (const timeUnit of ['hours', 'minutes', 'seconds', 'milliseconds']) {\n    if (d[timeUnit] !== undefined) {\n      units.push(d[timeUnit]);\n    } else {\n      units.push(0);\n    }\n  }\n\n  if (d.utc) {\n    return `utc(${units.join(', ')})`;\n  } else {\n    return `datetime(${units.join(', ')})`;\n  }\n}\n","import {Flag} from './util';\n/** Constants and utilities for data type */\n/** Data type based on level of measurement */\n\nexport namespace Type {\n  export const QUANTITATIVE: 'quantitative' = 'quantitative';\n  export const ORDINAL: 'ordinal' = 'ordinal';\n  export const TEMPORAL: 'temporal' = 'temporal';\n  export const NOMINAL: 'nominal' = 'nominal';\n\n  export const LATITUDE: 'latitude' = 'latitude';\n  export const LONGITUDE: 'longitude' = 'longitude';\n  export const GEOJSON: 'geojson' = 'geojson';\n}\nexport type BasicType = typeof Type.QUANTITATIVE | typeof Type.ORDINAL | typeof Type.TEMPORAL | typeof Type.NOMINAL;\nexport type GeoType = typeof Type.LATITUDE | typeof Type.LONGITUDE | typeof Type.GEOJSON;\n\nexport type Type = BasicType | GeoType;\n\nconst TYPE_INDEX: Flag<Type> = {\n  quantitative: 1,\n  ordinal: 1,\n  temporal: 1,\n  nominal: 1,\n  latitude: 1,\n  longitude: 1,\n  geojson: 1\n};\n\nexport function isType(t: any): t is Type {\n  return !!TYPE_INDEX[t];\n}\n\nexport const QUANTITATIVE = Type.QUANTITATIVE;\nexport const ORDINAL = Type.ORDINAL;\nexport const TEMPORAL = Type.TEMPORAL;\nexport const NOMINAL = Type.NOMINAL;\n\nexport const GEOJSON = Type.GEOJSON;\n\n/**\n * Get full, lowercase type name for a given type.\n * @param  type\n * @return Full type name.\n */\nexport function getFullName(type: Type|string): Type {\n  if (type) {\n    type = type.toLowerCase();\n    switch (type) {\n      case 'q':\n      case QUANTITATIVE:\n        return 'quantitative';\n      case 't':\n      case TEMPORAL:\n        return 'temporal';\n      case 'o':\n      case ORDINAL:\n        return 'ordinal';\n      case 'n':\n      case NOMINAL:\n        return 'nominal';\n      case Type.LATITUDE:\n        return 'latitude';\n      case Type.LONGITUDE:\n        return 'longitude';\n      case GEOJSON:\n        return 'geojson';\n    }\n  }\n  // If we get invalid input, return undefined type.\n  return undefined;\n}\n","import {NonPositionChannel} from '../channel';\nimport {MarkConfig} from '../mark';\n\nexport function getMarkSpecificConfigMixins(markSpecificConfig: MarkConfig, channel: NonPositionChannel) {\n  const value = markSpecificConfig[channel];\n  return value !== undefined ? {[channel]: {value}} : {};\n}\n","import {Field} from '../fielddef';\nimport {Encoding} from './../encoding';\nimport {GenericUnitSpec, NormalizedLayerSpec} from './../spec';\n\n\nexport const ERRORBAR: 'error-bar' = 'error-bar';\nexport type ERRORBAR = typeof ERRORBAR;\n\nexport function normalizeErrorBar(spec: GenericUnitSpec<Encoding<Field>, ERRORBAR>): NormalizedLayerSpec {\n  // TODO: use selection\n  const {mark: _m, selection: _sel, projection: _p, encoding, ...outerSpec} = spec;\n  const {size: _s, ...encodingWithoutSize} = encoding;\n  const {x2: _x2, y2: _y2, ...encodingWithoutX2Y2} = encoding;\n  const {x: _x, y: _y, ...encodingWithoutX_X2_Y_Y2} = encodingWithoutX2Y2;\n\n  if (!encoding.x2 && !encoding.y2) {\n    throw new Error('Neither x2 or y2 provided');\n  }\n\n  return {\n    ...outerSpec,\n    layer: [\n      {\n        mark: 'rule',\n        encoding: encodingWithoutSize\n      },{ // Lower tick\n        mark: 'tick',\n        encoding: encodingWithoutX2Y2\n      }, { // Upper tick\n        mark: 'tick',\n        encoding: encoding.x2 ? {\n          x: encoding.x2,\n          y: encoding.y,\n          ...encodingWithoutX_X2_Y_Y2\n        } : {\n          x: encoding.x,\n          y: encoding.y2,\n          ...encodingWithoutX_X2_Y_Y2\n        }\n      }\n    ]\n  };\n}\n","import {isArray} from 'vega-util';\nimport {SUM_OPS} from './aggregate';\nimport {NONPOSITION_CHANNELS, NonPositionChannel, X, X2, Y2} from './channel';\nimport {channelHasField, Encoding} from './encoding';\nimport {Field, FieldDef, getFieldDef, isFieldDef, isStringFieldDef, PositionFieldDef, vgField} from './fielddef';\nimport * as log from './log';\nimport {AREA, BAR, CIRCLE, isMarkDef, isPathMark, LINE, Mark, MarkDef, POINT, RULE, SQUARE, TEXT, TICK} from './mark';\nimport {ScaleType} from './scale';\nimport {contains, Flag} from './util';\n\n\nexport type StackOffset = 'zero' | 'center' | 'normalize';\n\nconst STACK_OFFSET_INDEX: Flag<StackOffset> = {\n  zero: 1,\n  center: 1,\n  normalize: 1\n};\n\nexport function isStackOffset(s: string): s is StackOffset {\n  return !!STACK_OFFSET_INDEX[s];\n}\n\nexport interface StackProperties {\n  /** Dimension axis of the stack. */\n  groupbyChannel: 'x' | 'y';\n\n  /** Measure axis of the stack. */\n  fieldChannel: 'x' | 'y';\n\n  /** Stack-by fields e.g., color, detail */\n  stackBy: {\n    fieldDef: FieldDef<string>,\n    channel: NonPositionChannel\n  }[];\n\n  /**\n   * See `\"stack\"` property of Position Field Def.\n   */\n  offset: StackOffset;\n\n  /**\n   * Whether this stack will produce impute transform\n   */\n  impute: boolean;\n}\n\nexport const STACKABLE_MARKS = [BAR, AREA, RULE, POINT, CIRCLE, SQUARE, LINE, TEXT, TICK];\nexport const STACK_BY_DEFAULT_MARKS = [BAR, AREA];\n\n\nfunction potentialStackedChannel(encoding: Encoding<Field>): 'x' | 'y' | undefined {\n  const xDef = encoding.x;\n  const yDef = encoding.y;\n\n  if (isFieldDef(xDef) && isFieldDef(yDef)) {\n    if (xDef.type === 'quantitative' && yDef.type === 'quantitative') {\n      if (xDef.stack) {\n        return 'x';\n      } else if (yDef.stack) {\n        return 'y';\n      }\n      // if there is no explicit stacking, only apply stack if there is only one aggregate for x or y\n      if ((!!xDef.aggregate) !== (!!yDef.aggregate)) {\n        return xDef.aggregate ? 'x' : 'y';\n      }\n    } else if (xDef.type === 'quantitative') {\n      return 'x';\n    } else if (yDef.type === 'quantitative') {\n      return 'y';\n    }\n  } else if (isFieldDef(xDef) && xDef.type === 'quantitative') {\n    return 'x';\n  } else if (isFieldDef(yDef) && yDef.type === 'quantitative') {\n    return 'y';\n  }\n  return undefined;\n}\n\n// Note: CompassQL uses this method and only pass in required properties of each argument object.\n// If required properties change, make sure to update CompassQL.\nexport function stack(m: Mark | MarkDef, encoding: Encoding<Field>, stackConfig: StackOffset): StackProperties {\n  const mark = isMarkDef(m) ? m.type : m;\n  // Should have stackable mark\n  if (!contains(STACKABLE_MARKS, mark)) {\n    return null;\n  }\n\n  const fieldChannel = potentialStackedChannel(encoding);\n  if (!fieldChannel) {\n    return null;\n  }\n\n  const stackedFieldDef = encoding[fieldChannel] as PositionFieldDef<string>;\n  const stackedField = isStringFieldDef(stackedFieldDef) ? vgField(stackedFieldDef, {}) : undefined;\n\n  const dimensionChannel = fieldChannel === 'x' ? 'y' : 'x';\n  const dimensionDef = encoding[dimensionChannel];\n  const dimensionField = isStringFieldDef(dimensionDef) ? vgField(dimensionDef, {}) : undefined;\n\n  // Should have grouping level of detail that is different from the dimension field\n  const stackBy = NONPOSITION_CHANNELS.reduce((sc, channel) => {\n    if (channelHasField(encoding, channel)) {\n      const channelDef = encoding[channel];\n      (isArray(channelDef) ? channelDef : [channelDef]).forEach((cDef) => {\n        const fieldDef = getFieldDef(cDef);\n        if (fieldDef.aggregate) {\n          return;\n        }\n\n        // Check whether the channel's field is identical to x/y's field or if the channel is a repeat\n        const f = isStringFieldDef(fieldDef) ? vgField(fieldDef, {}) : undefined;\n        if (\n          // if fielddef is a repeat, just include it in the stack by\n          !f ||\n          // otherwise, the field must be different from x and y fields.\n          (f !== dimensionField && f !== stackedField)\n        ) {\n          sc.push({channel, fieldDef});\n        }\n      });\n    }\n    return sc;\n  }, []);\n\n  if (stackBy.length === 0) {\n    return null;\n  }\n\n  // Automatically determine offset\n  let offset: StackOffset = undefined;\n  if (stackedFieldDef.stack !== undefined) {\n    offset = stackedFieldDef.stack;\n  } else if (contains(STACK_BY_DEFAULT_MARKS, mark)) {\n    // Bar and Area with sum ops are automatically stacked by default\n    offset = stackConfig === undefined ? 'zero' : stackConfig;\n  } else {\n    offset = stackConfig;\n  }\n\n  if (!offset || !isStackOffset(offset)) {\n    return null;\n  }\n\n  // If stacked, check scale type if it is linear\n  if (stackedFieldDef.scale && stackedFieldDef.scale.type && stackedFieldDef.scale.type !== ScaleType.LINEAR) {\n    log.warn(log.message.cannotStackNonLinearScale(stackedFieldDef.scale.type));\n    return null;\n  }\n\n  // Check if it is a ranged mark\n  if (channelHasField(encoding, fieldChannel === X ? X2 : Y2)) {\n    log.warn(log.message.cannotStackRangedMark(fieldChannel));\n    return null;\n  }\n\n  // Warn if stacking summative aggregate\n  if (stackedFieldDef.aggregate && !contains(SUM_OPS, stackedFieldDef.aggregate)) {\n    log.warn(log.message.stackNonSummativeAggregate(stackedFieldDef.aggregate));\n  }\n\n  return {\n    groupbyChannel: dimensionDef ? dimensionChannel : undefined,\n    fieldChannel,\n    impute: isPathMark(mark),\n    stackBy,\n    offset\n  };\n}\n","import {toSet} from 'vega-util';\nimport {Channel, isColorChannel} from './channel';\nimport {DateTime} from './datetime';\nimport * as log from './log';\nimport {contains, Flag, flagKeys, keys} from './util';\nimport {ScaleInterpolate, ScaleInterpolateParams} from './vega.schema';\n\nexport namespace ScaleType {\n  // Continuous - Quantitative\n  export const LINEAR: 'linear' = 'linear';\n  export const BIN_LINEAR: 'bin-linear' = 'bin-linear';\n  export const LOG: 'log' = 'log';\n  export const POW: 'pow' = 'pow';\n  export const SQRT: 'sqrt' = 'sqrt';\n  // Continuous - Time\n  export const TIME: 'time' = 'time';\n  export const UTC: 'utc' = 'utc';\n  // sequential\n  export const SEQUENTIAL: 'sequential' = 'sequential';\n\n  // Quantile, Quantize, threshold\n  export const QUANTILE: 'quantile' = 'quantile';\n  export const QUANTIZE: 'quantize' = 'quantize';\n  export const THRESHOLD: 'threshold' = 'threshold';\n\n  export const ORDINAL: 'ordinal' = 'ordinal';\n  export const BIN_ORDINAL: 'bin-ordinal' = 'bin-ordinal';\n  export const POINT: 'point' = 'point';\n  export const BAND: 'band' = 'band';\n}\n\nexport type ScaleType = typeof ScaleType.LINEAR | typeof ScaleType.BIN_LINEAR |\n  typeof ScaleType.LOG | typeof ScaleType.POW | typeof ScaleType.SQRT |\n  typeof ScaleType.TIME | typeof ScaleType.UTC |\n  // TODO: add 'quantize', 'quantile', 'threshold' back when we really support them\n  typeof ScaleType.SEQUENTIAL | // typeof ScaleType.QUANTILE | typeof ScaleType.QUANTIZE | typeof ScaleType.THRESHOLD |\n  typeof ScaleType.ORDINAL | typeof ScaleType.BIN_ORDINAL | typeof ScaleType.POINT | typeof ScaleType.BAND;\n\n\n/**\n * Index for scale categories -- only scale of the same categories can be merged together.\n * Current implementation is trying to be conservative and avoid merging scale type that might not work together\n */\nconst SCALE_CATEGORY_INDEX: {\n  // Using Mapped Type to declare type (https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types)\n  [k in ScaleType]: ScaleType | 'numeric' | 'ordinal-position'\n} = {\n  linear: 'numeric',\n  log: 'numeric',\n  pow: 'numeric',\n  sqrt: 'numeric',\n  'bin-linear': 'bin-linear', // TODO: should bin-linear support merging with other\n  time: 'time',\n  utc: 'time',\n  sequential: 'sequential',\n  ordinal: 'ordinal',\n  'bin-ordinal': 'bin-ordinal', // TODO: should bin-ordinal support merging with other\n  point: 'ordinal-position',\n  band: 'ordinal-position'\n};\n\nexport const SCALE_TYPES = keys(SCALE_CATEGORY_INDEX) as ScaleType[];\n\n/**\n * Whether the two given scale types can be merged together.\n */\nexport function scaleCompatible(scaleType1: ScaleType, scaleType2: ScaleType) {\n  const scaleCategory1 = SCALE_CATEGORY_INDEX[scaleType1];\n  const scaleCategory2 = SCALE_CATEGORY_INDEX[scaleType2];\n  return scaleCategory1 === scaleCategory2 ||\n    (scaleCategory1 === 'ordinal-position' && scaleCategory2 === 'time') ||\n    (scaleCategory2 === 'ordinal-position' && scaleCategory1 === 'time');\n}\n\n/**\n * Index for scale precedence -- high score = higher priority for merging.\n */\nconst SCALE_PRECEDENCE_INDEX: {\n  // Using Mapped Type to declare type (https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types)\n  [k in ScaleType]: number\n} = {\n  // numeric\n  linear: 0,\n  log: 1,\n  pow: 1,\n  sqrt: 1,\n  // time\n  time: 0,\n  utc: 0,\n  // ordinal-position -- these have higher precedence than continuous scales as they support more types of data\n  point: 10,\n  band: 11, // band has higher precedence as it is better for interaction\n  // non grouped types\n  'bin-linear': 0,\n  sequential: 0,\n  ordinal: 0,\n  'bin-ordinal': 0,\n};\n\n/**\n * Return scale categories -- only scale of the same categories can be merged together.\n */\nexport function scaleTypePrecedence(scaleType: ScaleType): number {\n  return SCALE_PRECEDENCE_INDEX[scaleType];\n}\n\nexport const CONTINUOUS_TO_CONTINUOUS_SCALES: ScaleType[] = ['linear', 'bin-linear', 'log', 'pow', 'sqrt', 'time', 'utc'];\nconst CONTINUOUS_TO_CONTINUOUS_INDEX = toSet(CONTINUOUS_TO_CONTINUOUS_SCALES);\n\nexport const CONTINUOUS_DOMAIN_SCALES: ScaleType[] = CONTINUOUS_TO_CONTINUOUS_SCALES.concat(['sequential' /* TODO add 'quantile', 'quantize', 'threshold'*/]);\nconst CONTINUOUS_DOMAIN_INDEX = toSet(CONTINUOUS_DOMAIN_SCALES);\n\nexport const DISCRETE_DOMAIN_SCALES: ScaleType[] = ['ordinal', 'bin-ordinal', 'point', 'band'];\nconst DISCRETE_DOMAIN_INDEX = toSet(DISCRETE_DOMAIN_SCALES);\n\nconst BIN_SCALES_INDEX = toSet(['bin-linear', 'bin-ordinal']);\n\nexport const TIME_SCALE_TYPES: ScaleType[] = ['time', 'utc'];\n\nexport function hasDiscreteDomain(type: ScaleType): type is 'ordinal' | 'bin-ordinal' | 'point' | 'band' {\n  return type in DISCRETE_DOMAIN_INDEX;\n}\n\nexport function isBinScale(type: ScaleType): type is 'bin-linear' | 'bin-ordinal' {\n  return type in BIN_SCALES_INDEX;\n}\n\nexport function hasContinuousDomain(type: ScaleType):\n  type is 'linear' | 'log' | 'pow' | 'sqrt' | 'time' | 'utc'|\n          'sequential' /* TODO add | 'quantile' | 'quantize' | 'threshold' */ {\n  return type in CONTINUOUS_DOMAIN_INDEX;\n}\n\nexport function isContinuousToContinuous(type: ScaleType): type is 'linear' | 'bin-linear' | 'log' | 'pow' | 'sqrt' | 'time' | 'utc' {\n  return type in CONTINUOUS_TO_CONTINUOUS_INDEX;\n}\n\nexport type NiceTime = 'second' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'year';\n\nexport interface ScaleConfig {\n  /**\n   * If true, rounds numeric output values to integers.\n   * This can be helpful for snapping to the pixel grid.\n   * (Only available for `x`, `y`, and `size` scales.)\n   */\n  round?: boolean;\n\n  /**\n   * If true, values that exceed the data domain are clamped to either the minimum or maximum range value\n   */\n  clamp?: boolean;\n  /**\n   *  Default range step for `x` band and point scales of text marks.\n   *\n   * __Default value:__ `90`\n   *\n   *  @minimum 0\n   */\n  textXRangeStep?: number; // FIXME: consider if we will rename this \"tableColumnWidth\"\n\n  /**\n   * Default range step for band and point scales of (1) the `y` channel\n   * and (2) the `x` channel when the mark is not `text`.\n   *\n   * __Default value:__ `21`\n   *\n   * @minimum 0\n   */\n  rangeStep?: number | null;\n\n  /**\n   * Default inner padding for `x` and `y` band-ordinal scales.\n   *\n   * __Default value:__ `0.1`\n   *\n   * @minimum 0\n   * @maximum 1\n   */\n  bandPaddingInner?: number;\n\n  /**\n   * Default outer padding for `x` and `y` band-ordinal scales.\n   * If not specified, by default, band scale's paddingOuter is paddingInner/2.\n   * @minimum 0\n   * @maximum 1\n   */\n  bandPaddingOuter?: number;\n\n  /**\n   * Default padding for continuous scales.\n   *\n   * __Default:__ `5` for continuous x-scale of a vertical bar and continuous y-scale of a horizontal bar.; `0` otherwise.\n   *\n   * @minimum 0\n   */\n  continuousPadding?: number;\n\n  /**\n   * Default outer padding for `x` and `y` point-ordinal scales.\n   *\n   * __Default value:__ `0.5`\n   *\n   * @minimum 0\n   * @maximum 1\n   */\n  pointPadding?: number;\n\n  /**\n   * Use the source data range before aggregation as scale domain instead of aggregated data for aggregate axis.\n   *\n   * This is equivalent to setting `domain` to `\"unaggregate\"` for aggregated _quantitative_ fields by default.\n   *\n   * This property only works with aggregate functions that produce values within the raw data domain (`\"mean\"`, `\"average\"`, `\"median\"`, `\"q1\"`, `\"q3\"`, `\"min\"`, `\"max\"`). For other aggregations that produce values outside of the raw data domain (e.g. `\"count\"`, `\"sum\"`), this property is ignored.\n   *\n   * __Default value:__ `false`\n   */\n  useUnaggregatedDomain?: boolean;\n\n  // nice should depends on type (quantitative or temporal), so\n  // let's not make a config.\n\n  // Configs for Range\n\n  /**\n   * The default max value for mapping quantitative fields to bar's size/bandSize.\n   *\n   * If undefined (default), we will use the scale's `rangeStep` - 1.\n   * @minimum 0\n   */\n  maxBandSize?: number;\n\n  /**\n   * The default min value for mapping quantitative fields to bar and tick's size/bandSize scale with zero=false.\n   *\n   * __Default value:__ `2`\n   *\n   * @minimum 0\n   */\n  minBandSize?: number;\n\n  /**\n   * The default max value for mapping quantitative fields to text's size/fontSize.\n   *\n   * __Default value:__ `40`\n   *\n   * @minimum 0\n   */\n  maxFontSize?: number;\n\n  /**\n   * The default min value for mapping quantitative fields to tick's size/fontSize scale with zero=false\n   *\n   * __Default value:__ `8`\n   *\n   * @minimum 0\n   */\n  minFontSize?: number;\n\n  /**\n   * Default minimum opacity for mapping a field to opacity.\n   *\n   * __Default value:__ `0.3`\n   *\n   * @minimum 0\n   * @maximum 1\n   */\n  minOpacity?: number;\n\n  /**\n   * Default max opacity for mapping a field to opacity.\n   *\n   * __Default value:__ `0.8`\n   *\n   * @minimum 0\n   * @maximum 1\n   */\n  maxOpacity?: number;\n\n\n  /**\n   * Default minimum value for point size scale with zero=false.\n   *\n   * __Default value:__ `9`\n   *\n   * @minimum 0\n   */\n  minSize?: number;\n\n  /**\n   * Default max value for point size scale.\n   * @minimum 0\n   */\n  maxSize?: number;\n\n  /**\n   * Default minimum strokeWidth for the scale of strokeWidth for rule and line marks and of size for trail marks with zero=false.\n   *\n   * __Default value:__ `1`\n   *\n   * @minimum 0\n   */\n  minStrokeWidth?: number;\n\n  /**\n   * Default max strokeWidth for the scale of strokeWidth for rule and line marks and of size for trail marks.\n   *\n   * __Default value:__ `4`\n   *\n   * @minimum 0\n   */\n  maxStrokeWidth?: number;\n}\n\nexport const defaultScaleConfig = {\n  textXRangeStep: 90,\n  rangeStep: 21,\n  pointPadding: 0.5,\n  bandPaddingInner: 0.1,\n  facetSpacing: 16,\n\n  minBandSize: 2,\n\n  minFontSize: 8,\n  maxFontSize: 40,\n\n  minOpacity: 0.3,\n  maxOpacity: 0.8,\n\n  // FIXME: revise if these *can* become ratios of rangeStep\n  minSize: 9, // Point size is area. For square point, 9 = 3 pixel ^ 2, not too small!\n\n  minStrokeWidth: 1,\n  maxStrokeWidth: 4\n};\n\nexport interface SchemeParams {\n  /**\n   * A color scheme name for sequential/ordinal scales (e.g., `\"category10\"` or `\"viridis\"`).\n   *\n   * For the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.\n   */\n  name: string;\n\n  /**\n   * For sequential and diverging schemes only, determines the extent of the color range to use. For example `[0.2, 1]` will rescale the color scheme such that color values in the range _[0, 0.2)_ are excluded from the scheme.\n   */\n  extent?: number[];\n\n  /**\n   * The number of colors to use in the scheme. This can be useful for scale types such as `\"quantize\"`, which use the length of the scale range to determine the number of discrete bins for the scale domain.\n   *\n   * @hide\n   */\n  count?: number;\n}\n\nexport type SelectionDomain = {\n  /**\n   * The name of a selection.\n   */\n  selection: string,\n  /**\n   * The field name to extract selected values for, when a selection is [projected](project.html)\n   * over multiple fields or encodings.\n   */\n  field?: string\n} | {\n  /**\n   * The name of a selection.\n   */\n  selection: string,\n  /**\n   * The encoding channel to extract selected values for, when a selection is [projected](project.html)\n   * over multiple fields or encodings.\n   */\n  encoding?: string\n};\n\nexport type Domain = number[] | string[] | boolean[] | DateTime[] | 'unaggregated' | SelectionDomain;\nexport type Scheme = string | SchemeParams;\n\nexport type Range = number[] | string[] | string;\n\nexport function isExtendedScheme(scheme: string | SchemeParams): scheme is SchemeParams {\n  return scheme && !!scheme['name'];\n}\n\nexport function isSelectionDomain(domain: Domain): domain is SelectionDomain {\n  return domain && domain['selection'];\n}\n\nexport interface Scale {\n  /**\n   * The type of scale.  Vega-Lite supports the following categories of scale types:\n   *\n   * 1) [**Continuous Scales**](scale.html#continuous) -- mapping continuous domains to continuous output ranges ([`\"linear\"`](scale.html#linear), [`\"pow\"`](scale.html#pow), [`\"sqrt\"`](scale.html#sqrt), [`\"log\"`](scale.html#log), [`\"time\"`](scale.html#time), [`\"utc\"`](scale.html#utc), [`\"sequential\"`](scale.html#sequential)).\n   *\n   * 2) [**Discrete Scales**](scale.html#discrete) -- mapping discrete domains to discrete ([`\"ordinal\"`](scale.html#ordinal)) or continuous ([`\"band\"`](scale.html#band) and [`\"point\"`](scale.html#point)) output ranges.\n   *\n   * 3) [**Discretizing Scales**](scale.html#discretizing) -- mapping continuous domains to discrete output ranges ([`\"bin-linear\"`](scale.html#bin-linear) and [`\"bin-ordinal\"`](scale.html#bin-ordinal)).\n   *\n   * __Default value:__ please see the [scale type table](scale.html#type).\n   */\n  type?: ScaleType;\n\n  /**\n   * Customized domain values.\n   *\n   * For _quantitative_ fields, `domain` can take the form of a two-element array with minimum and maximum values.  [Piecewise scales](scale.html#piecewise) can be created by providing a `domain` with more than two entries.\n   * If the input field is aggregated, `domain` can also be a string value `\"unaggregated\"`, indicating that the domain should include the raw data values prior to the aggregation.\n   *\n   * For _temporal_ fields, `domain` can be a two-element array minimum and maximum values, in the form of either timestamps or the [DateTime definition objects](types.html#datetime).\n   *\n   * For _ordinal_ and _nominal_ fields, `domain` can be an array that lists valid input values.\n   *\n   * The `selection` property can be used to [interactively determine](selection.html#scale-domains) the scale domain.\n   */\n  domain?: number[] | string[] | boolean[] | DateTime[] | 'unaggregated' | SelectionDomain;\n\n\n  // Hide because we might not really need this.\n  /**\n   * If true, reverses the order of the scale range.\n   * __Default value:__ `false`.\n   *\n   * @hide\n   */\n  reverse?: boolean;\n\n  /**\n   * The range of the scale. One of:\n   *\n   * - A string indicating a [pre-defined named scale range](scale.html#range-config) (e.g., example, `\"symbol\"`, or `\"diverging\"`).\n   *\n   * - For [continuous scales](scale.html#continuous), two-element array indicating  minimum and maximum values, or an array with more than two entries for specifying a [piecewise scale](scale.html#piecewise).\n   *\n   * - For [discrete](scale.html#discrete) and [discretizing](scale.html#discretizing) scales, an array of desired output values.\n   *\n   * __Notes:__\n   *\n   * 1) For [sequential](scale.html#sequential), [ordinal](scale.html#ordinal), and discretizing color scales, you can also specify a color [`scheme`](scale.html#scheme) instead of `range`.\n   *\n   * 2) Any directly specified `range` for `x` and `y` channels will be ignored. Range can be customized via the view's corresponding [size](size.html) (`width` and `height`) or via [range steps and paddings properties](#range-step) for [band](#band) and [point](#point) scales.\n   */\n  range?: number[] | string[] | string;\n\n  // ordinal\n  /**\n   * The distance between the starts of adjacent bands or points in [band](scale.html#band) and [point](scale.html#point) scales.\n   *\n   * If `rangeStep` is `null` or if the view contains the scale's corresponding [size](size.html) (`width` for `x` scales and `height` for `y` scales), `rangeStep` will be automatically determined to fit the size of the view.\n   *\n   * __Default value:__  derived the [scale config](config.html#scale-config)'s `textXRangeStep` (`90` by default) for x-scales of `text` marks and `rangeStep` (`21` by default) for x-scales of other marks and y-scales.\n   *\n   * __Warning__: If `rangeStep` is `null` and the cardinality of the scale's domain is higher than `width` or `height`, the rangeStep might become less than one pixel and the mark might not appear correctly.\n   *\n   * @minimum 0\n   */\n  rangeStep?: number | null;\n\n  /**\n   * A string indicating a color [scheme](scale.html#scheme) name (e.g., `\"category10\"` or `\"viridis\"`) or a [scheme parameter object](scale.html#scheme-params).\n   *\n   * Discrete color schemes may be used with [discrete](scale.html#discrete) or [discretizing](scale.html#discretizing) scales. Continuous color schemes are intended for use with [sequential](scales.html#sequential) scales.\n   *\n   * For the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.\n   */\n  scheme?: string | SchemeParams;\n\n  /**\n   * If `true`, rounds numeric output values to integers. This can be helpful for snapping to the pixel grid.\n   *\n   * __Default value:__ `false`.\n   */\n  round?: boolean;\n\n  /**\n   * For _[continuous](scale.html#continuous)_ scales, expands the scale domain to accommodate the specified number of pixels on each of the scale range. The scale range must represent pixels for this parameter to function as intended. Padding adjustment is performedpriorto all other adjustments, including the effects of thezero,nice,domainMin, anddomainMaxproperties.\n   *\n   * For _[band](scale.html#band)_ scales, shortcut for setting `paddingInner` and `paddingOuter` to the same value.\n   *\n   * For _[point](scale.html#point)_ scales, alias for `paddingOuter`.\n   *\n   * __Default value:__ For _continuous_ scales, derived from the [scale config](scale.html#config)'s `continuousPadding`.\n   * For _band and point_ scales, see `paddingInner` and `paddingOuter`.\n   *\n   * @minimum 0\n   */\n  padding?: number;\n\n  /**\n   * The inner padding (spacing) within each band step of band scales, as a fraction of the step size. This value must lie in the range [0,1].\n   *\n   * For point scale, this property is invalid as point scales do not have internal band widths (only step sizes between bands).\n   *\n   * __Default value:__ derived from the [scale config](scale.html#config)'s `bandPaddingInner`.\n   *\n   * @minimum 0\n   * @maximum 1\n   */\n  paddingInner?: number;\n\n  /**\n   * The outer padding (spacing) at the ends of the range of band and point scales,\n   * as a fraction of the step size. This value must lie in the range [0,1].\n   *\n   * __Default value:__ derived from the [scale config](scale.html#config)'s `bandPaddingOuter` for band scales and `pointPadding` for point scales.\n   *\n   * @minimum 0\n   * @maximum 1\n   */\n  paddingOuter?: number;\n\n  // typical\n  /**\n   * If `true`, values that exceed the data domain are clamped to either the minimum or maximum range value\n   *\n   * __Default value:__ derived from the [scale config](config.html#scale-config)'s `clamp` (`true` by default).\n   */\n  clamp?: boolean;\n\n  /**\n   * Extending the domain so that it starts and ends on nice round values. This method typically modifies the scales domain, and may only extend the bounds to the nearest round value. Nicing is useful if the domain is computed from data and may be irregular. For example, for a domain of _[0.201479, 0.996679]_, a nice domain might be _[0.2, 1.0]_.\n   *\n   * For quantitative scales such as linear, `nice` can be either a boolean flag or a number. If `nice` is a number, it will represent a desired tick count. This allows greater control over the step size used to extend the bounds, guaranteeing that the returned ticks will exactly cover the domain.\n   *\n   * For temporal fields with time and utc scales, the `nice` value can be a string indicating the desired time interval. Legal values are `\"millisecond\"`, `\"second\"`, `\"minute\"`, `\"hour\"`, `\"day\"`, `\"week\"`, `\"month\"`, and `\"year\"`. Alternatively, `time` and `utc` scales can accept an object-valued interval specifier of the form `{\"interval\": \"month\", \"step\": 3}`, which includes a desired number of interval steps. Here, the domain would snap to quarter (Jan, Apr, Jul, Oct) boundaries.\n   *\n   * __Default value:__ `true` for unbinned _quantitative_ fields; `false` otherwise.\n   *\n   */\n  nice?: boolean | number | NiceTime | {interval: string, step: number};\n\n  /**\n   * The logarithm base of the `log` scale (default `10`).\n   */\n  base?: number;\n\n  /**\n   * The exponent of the `pow` scale.\n   */\n  exponent?: number;\n\n  /**\n   * If `true`, ensures that a zero baseline value is included in the scale domain.\n   *\n   * __Default value:__ `true` for x and y channels if the quantitative field is not binned and no custom `domain` is provided; `false` otherwise.\n   *\n   * __Note:__ Log, time, and utc scales do not support `zero`.\n   */\n  zero?: boolean;\n\n  /**\n   * The interpolation method for range values. By default, a general interpolator for numbers, dates, strings and colors (in RGB space) is used. For color ranges, this property allows interpolation in alternative color spaces. Legal values include `rgb`, `hsl`, `hsl-long`, `lab`, `hcl`, `hcl-long`, `cubehelix` and `cubehelix-long` ('-long' variants use longer paths in polar coordinate spaces). If object-valued, this property accepts an object with a string-valued _type_ property and an optional numeric _gamma_ property applicable to rgb and cubehelix interpolators. For more, see the [d3-interpolate documentation](https://github.com/d3/d3-interpolate).\n   *\n   * __Note:__ Sequential scales do not support `interpolate` as they have a fixed interpolator.  Since Vega-Lite uses sequential scales for quantitative fields by default, you have to set the scale `type` to other quantitative scale type such as `\"linear\"` to customize `interpolate`.\n   */\n  interpolate?: ScaleInterpolate | ScaleInterpolateParams;\n}\n\nconst SCALE_PROPERTY_INDEX: Flag<keyof Scale> = {\n  type: 1,\n  domain: 1,\n  range: 1,\n  rangeStep: 1,\n  scheme: 1,\n  // Other properties\n  reverse: 1,\n  round: 1,\n  // quantitative / time\n  clamp: 1,\n  nice: 1,\n  // quantitative\n  base: 1,\n  exponent: 1,\n  interpolate: 1,\n  zero: 1, // zero depends on domain\n  // band/point\n  padding: 1,\n  paddingInner: 1,\n  paddingOuter: 1\n};\n\nexport const SCALE_PROPERTIES = flagKeys(SCALE_PROPERTY_INDEX);\n\nconst {type, domain, range, rangeStep, scheme, ...NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX} = SCALE_PROPERTY_INDEX;\n\nexport const NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES = flagKeys(NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX);\n\nexport function scaleTypeSupportProperty(scaleType: ScaleType, propName: keyof Scale) {\n  switch (propName) {\n    case 'type':\n    case 'domain':\n    case 'reverse':\n    case 'range':\n      return true;\n    case 'scheme':\n      return contains(['sequential', 'ordinal', 'bin-ordinal', 'quantile', 'quantize'], scaleType);\n    case 'interpolate':\n      // FIXME(https://github.com/vega/vega-lite/issues/2902) how about ordinal?\n      return contains(['linear', 'bin-linear', 'pow', 'log', 'sqrt', 'utc', 'time'], scaleType);\n    case 'round':\n      return isContinuousToContinuous(scaleType) || scaleType === 'band' || scaleType === 'point';\n    case 'padding':\n      return isContinuousToContinuous(scaleType) || contains(['point', 'band'], scaleType);\n    case 'paddingOuter':\n    case 'rangeStep':\n      return contains(['point', 'band'], scaleType);\n    case 'paddingInner':\n      return scaleType === 'band';\n    case 'clamp':\n      return isContinuousToContinuous(scaleType) || scaleType === 'sequential';\n    case 'nice':\n      return isContinuousToContinuous(scaleType) || scaleType === 'sequential' || scaleType as any === 'quantize';\n    case 'exponent':\n      return scaleType === 'pow';\n    case 'base':\n      return scaleType === 'log';\n    case 'zero':\n      return hasContinuousDomain(scaleType) && !contains([\n        'log',  // log scale cannot have zero value\n        'time', 'utc', // zero is not meaningful for time\n        'bin-linear', // binning should not automatically add zero\n        'threshold', // threshold requires custom domain so zero does not matter\n        'quantile' // quantile depends on distribution so zero does not matter\n      ], scaleType);\n  }\n  /* istanbul ignore next: should never reach here*/\n  throw new Error(`Invalid scale property ${propName}.`);\n}\n\n/**\n * Returns undefined if the input channel supports the input scale property name\n */\nexport function channelScalePropertyIncompatability(channel: Channel, propName: keyof Scale): string {\n  switch (propName) {\n    case 'interpolate':\n    case 'scheme':\n      if (!isColorChannel(channel)) {\n        return log.message.cannotUseScalePropertyWithNonColor(channel);\n      }\n      return undefined;\n    case 'type':\n    case 'domain':\n    case 'range':\n    case 'base':\n    case 'exponent':\n    case 'nice':\n    case 'padding':\n    case 'paddingInner':\n    case 'paddingOuter':\n    case 'rangeStep':\n    case 'reverse':\n    case 'round':\n    case 'clamp':\n    case 'zero':\n      return undefined; // GOOD!\n  }\n  /* istanbul ignore next: it should never reach here */\n  throw new Error(`Invalid scale property \"${propName}\".`);\n}\n\nexport function channelSupportScaleType(channel: Channel, scaleType: ScaleType): boolean {\n  switch (channel) {\n    case Channel.X:\n    case Channel.Y:\n    case Channel.SIZE: // TODO: size and opacity can support ordinal with more modification\n    case Channel.OPACITY:\n      // Although it generally doesn't make sense to use band with size and opacity,\n      // it can also work since we use band: 0.5 to get midpoint.\n      return isContinuousToContinuous(scaleType) || contains(['band', 'point'], scaleType);\n\n    case Channel.COLOR:\n    case Channel.FILL:\n    case Channel.STROKE:\n      return scaleType !== 'band';    // band does not make sense with color\n\n    case Channel.SHAPE:\n      return scaleType === 'ordinal'; // shape = lookup only\n  }\n  /* istanbul ignore next: it should never reach here */\n  return false;\n}\n","import {BookmarkAction} from './bookmark';\r\nimport {ConfigAction} from './config';\r\nimport {CustomWildcardAction} from './custom-wildcard-field';\r\nimport {DatasetAction} from './dataset';\r\nimport {LogAction} from './log';\r\nimport {RelatedViewsAction} from './related-views';\r\nimport {ResetAction} from './reset';\r\nimport {ResultAction} from './result';\r\nimport {ShelfAction} from './shelf';\r\nimport {ShelfPreviewAction} from './shelf-preview';\r\nimport {SPEC_ACTION_TYPE_INDEX} from './shelf/spec';\r\nimport {ApplicationStateAction} from './state';\r\nimport {TAB_ACTION_TYPE_INDEX, TabAction} from './tab';\r\nimport {UndoableAction} from './undo-redo';\r\n\r\nexport * from './bookmark';\r\nexport * from './custom-wildcard-field';\r\nexport * from './config';\r\nexport * from './dataset';\r\nexport * from './log';\r\nexport * from './redux-action';\r\nexport * from './related-views';\r\nexport * from './reset';\r\nexport * from './result';\r\nexport * from './shelf';\r\nexport * from './state';\r\nexport * from './tab';\r\nexport * from './undo-redo';\r\nexport * from './shelf-preview';\r\n\r\n/**\r\n * Union type of all actions in our application.\r\n */\r\nexport type Action = (\r\n  ApplicationStateAction |\r\n  BookmarkAction |\r\n  ConfigAction |\r\n  CustomWildcardAction |\r\n  DatasetAction |\r\n  LogAction |\r\n  RelatedViewsAction |\r\n  ResetAction |\r\n  ResultAction |\r\n  ShelfAction |\r\n  ShelfPreviewAction |\r\n  TabAction |\r\n  UndoableAction\r\n);\r\n\r\nexport type ActionType = Action['type'];\r\n\r\n// Use type to enforce that ACTION_TYPE_INDEX contains all action types.\r\nexport const ACTION_TYPE_INDEX: {[k in ActionType]: 1} = {\r\n  BOOKMARK_ADD_PLOT: 1,\r\n  BOOKMARK_CLEAR_ALL: 1,\r\n  BOOKMARK_MODIFY_NOTE: 1,\r\n  BOOKMARK_REMOVE_PLOT: 1,\r\n\r\n  CUSTOM_WILDCARD_ADD: 1,\r\n  CUSTOM_WILDCARD_ADD_FIELD: 1,\r\n  CUSTOM_WILDCARD_MODIFY_DESCRIPTION: 1,\r\n  CUSTOM_WILDCARD_REMOVE: 1,\r\n  CUSTOM_WILDCARD_REMOVE_FIELD: 1,\r\n\r\n  DATASET_SCHEMA_CHANGE_FIELD_TYPE: 1,\r\n  DATASET_SCHEMA_CHANGE_ORDINAL_DOMAIN: 1,\r\n\r\n  DATASET_REQUEST: 1,\r\n  DATASET_RECEIVE: 1,\r\n\r\n  FILTER_ADD: 1,\r\n  FILTER_CLEAR: 1,\r\n  FILTER_MODIFY_EXTENT: 1,\r\n  FILTER_MODIFY_MAX_BOUND: 1,\r\n  FILTER_MODIFY_MIN_BOUND: 1,\r\n  FILTER_MODIFY_TIME_UNIT: 1,\r\n  FILTER_MODIFY_ONE_OF: 1,\r\n  FILTER_REMOVE: 1,\r\n  FILTER_TOGGLE: 1,\r\n\r\n  LOG_ERRORS_ADD: 1,\r\n  LOG_ERRORS_CLEAR: 1,\r\n  LOG_WARNINGS_ADD: 1,\r\n  LOG_WARNINGS_CLEAR: 1,\r\n\r\n  RELATED_VIEWS_HIDE_TOGGLE: 1,\r\n\r\n  RESULT_RECEIVE: 1,\r\n  RESULT_REQUEST: 1,\r\n  RESULT_LIMIT_INCREASE: 1,\r\n  RESULT_MODIFY_FIELD_PROP: 1,\r\n  RESULT_MODIFY_NESTED_FIELD_PROP: 1,\r\n\r\n  RESET: 1,\r\n\r\n  SET_CONFIG: 1,\r\n\r\n  SHELF_AUTO_ADD_COUNT_CHANGE: 1,\r\n  SHELF_LOAD_QUERY: 1,\r\n  SHELF_GROUP_BY_CHANGE: 1,\r\n\r\n  SHELF_PREVIEW_SPEC: 1,\r\n  SHELF_PREVIEW_QUERY: 1,\r\n  SHELF_PREVIEW_DISABLE: 1,\r\n\r\n  ...SPEC_ACTION_TYPE_INDEX,\r\n\r\n  ...TAB_ACTION_TYPE_INDEX,\r\n\r\n  UNDO: 1,\r\n  REDO: 1,\r\n\r\n  SET_APPLICATION_STATE: 1,\r\n};\r\n\r\n/** An array of all possible action types. */\r\nexport const ACTION_TYPES = Object.keys(ACTION_TYPE_INDEX) as ActionType[];\r\n\r\nexport function isVoyagerAction(action: {type: any}): action is Action {\r\n  return ACTION_TYPE_INDEX[action.type];\r\n}\r\n","\r\nimport {TopLevelFacetedUnitSpec} from 'vega-lite/build/src/spec';\r\nimport {ShelfFieldDef, ShelfFunction, ShelfId, ShelfMark} from '../../models';\r\nimport {ShelfValueDef} from '../../models/shelf/spec';\r\nimport {Action} from '../index';\r\nimport {PlainReduxAction, ReduxAction} from '../redux-action';\r\n\r\nexport type SpecAction =\r\n  SpecClear |\r\n  SpecMarkChangeType |\r\n  SpecEncodingAction;\r\n\r\nexport type SpecEncodingAction = SpecFieldAdd | SpecFieldAutoAdd |\r\n  SpecFieldRemove | SpecFieldMove |\r\n  SpecFieldPropChange<any> | SpecFieldNestedPropChange<any, any> |\r\n  SpecFunctionChange |\r\n  SpecFunctionAddWildcard | SpecFunctionRemoveWildcard |\r\n  SpecFunctionDisableWildcard | SpecFunctionEnableWildcard |\r\n  SpecLoad | SpecValueChange;\r\n\r\nexport const SPEC_CLEAR = 'SPEC_CLEAR';\r\nexport type SpecClear = PlainReduxAction<typeof SPEC_CLEAR>;\r\n\r\nexport const SPEC_MARK_CHANGE_TYPE = 'SPEC_MARK_CHANGE_TYPE';\r\nexport type SpecMarkChangeType = ReduxAction<typeof SPEC_MARK_CHANGE_TYPE, ShelfMark>;\r\n\r\n// Field\r\n\r\nexport const SPEC_FIELD_ADD = 'SPEC_FIELD_ADD';\r\nexport type SpecFieldAdd = ReduxAction<typeof SPEC_FIELD_ADD, {\r\n  shelfId: ShelfId;\r\n  fieldDef: ShelfFieldDef;\r\n  replace: boolean;\r\n}>;\r\n\r\nexport const SPEC_FIELD_AUTO_ADD = 'SPEC_FIELD_AUTO_ADD';\r\nexport type SpecFieldAutoAdd = ReduxAction<typeof SPEC_FIELD_AUTO_ADD, {\r\n  fieldDef: ShelfFieldDef;\r\n}>;\r\n\r\nexport const SPEC_FIELD_REMOVE = 'SPEC_FIELD_REMOVE';\r\nexport type SpecFieldRemove = ReduxAction<typeof SPEC_FIELD_REMOVE, ShelfId>;\r\n\r\n\r\nexport const SPEC_FIELD_MOVE = 'SPEC_FIELD_MOVE';\r\nexport type SpecFieldMove = ReduxAction<typeof SPEC_FIELD_MOVE, {\r\n  from: ShelfId,\r\n  to: ShelfId\r\n}>;\r\n\r\n/**\r\n * Change a property of a FieldDef to a specific value.\r\n */\r\nexport const SPEC_FIELD_PROP_CHANGE = 'SPEC_FIELD_PROP_CHANGE';\r\nexport type SpecFieldPropChange<\r\n  P extends 'sort' // TODO: 'stack' | 'format'\r\n> = ReduxAction<typeof SPEC_FIELD_PROP_CHANGE, {\r\n  shelfId: ShelfId;\r\n  prop: P;\r\n  value: ShelfFieldDef[P];\r\n}>;\r\n\r\n/**\r\n * Change nested property of a FieldDef to a specific value.\r\n */\r\nexport const SPEC_FIELD_NESTED_PROP_CHANGE = 'SPEC_FIELD_NESTED_PROP_CHANGE';\r\nexport type SpecFieldNestedPropChange<\r\n  P extends 'scale' | 'axis' | 'legend',\r\n  N extends (keyof ShelfFieldDef[P])\r\n> = ReduxAction<typeof SPEC_FIELD_NESTED_PROP_CHANGE, {\r\n  shelfId: ShelfId,\r\n  prop: P,\r\n  nestedProp: N,\r\n  value: ShelfFieldDef[P][N]\r\n}>;\r\n\r\n/**\r\n * Change Function of a FieldDef to a specific value.\r\n */\r\nexport const SPEC_FUNCTION_CHANGE = 'SPEC_FUNCTION_CHANGE';\r\nexport type SpecFunctionChange = ReduxAction<typeof SPEC_FUNCTION_CHANGE, {\r\n  shelfId: ShelfId,\r\n  fn: ShelfFunction;\r\n}>;\r\n\r\nexport const SPEC_FUNCTION_ADD_WILDCARD = 'SPEC_FUNCTION_ADD_WILDCARD';\r\nexport type SpecFunctionAddWildcard = ReduxAction<typeof SPEC_FUNCTION_ADD_WILDCARD, {\r\n  shelfId: ShelfId,\r\n  fn: ShelfFunction\r\n}>;\r\n\r\nexport const SPEC_FUNCTION_DISABLE_WILDCARD = 'SPEC_FUNCTION_DISABLE_WILDCARD';\r\nexport type SpecFunctionDisableWildcard = ReduxAction<typeof SPEC_FUNCTION_DISABLE_WILDCARD, {\r\n  shelfId: ShelfId\r\n}>;\r\n\r\nexport const SPEC_FUNCTION_ENABLE_WILDCARD = 'SPEC_FUNCTION_ENABLE_WILDCARD';\r\nexport type SpecFunctionEnableWildcard = ReduxAction<typeof SPEC_FUNCTION_ENABLE_WILDCARD, {\r\n  shelfId: ShelfId\r\n}>;\r\n\r\nexport const SPEC_FUNCTION_REMOVE_WILDCARD = 'SPEC_FUNCTION_REMOVE_WILDCARD';\r\nexport type SpecFunctionRemoveWildcard = ReduxAction<typeof SPEC_FUNCTION_REMOVE_WILDCARD, {\r\n  shelfId: ShelfId,\r\n  fn: ShelfFunction\r\n}>;\r\n\r\nexport const SPEC_VALUE_CHANGE = 'SPEC_VALUE_CHANGE';\r\nexport type SpecValueChange = ReduxAction<typeof SPEC_VALUE_CHANGE, {\r\n  shelfId: ShelfId,\r\n  valueDef: ShelfValueDef\r\n}>;\r\n\r\nexport const SPEC_LOAD = 'SPEC_LOAD';\r\nexport type SpecLoad = ReduxAction<typeof SPEC_LOAD, {\r\n  spec: TopLevelFacetedUnitSpec,\r\n  keepWildcardMark: boolean\r\n}>;\r\n\r\nexport const SPEC_ACTION_TYPE_INDEX: {[k in SpecAction['type']]: 1} = {\r\n  SPEC_CLEAR: 1,\r\n  SPEC_LOAD: 1,\r\n  SPEC_MARK_CHANGE_TYPE: 1,\r\n\r\n  SPEC_FIELD_ADD: 1,\r\n  SPEC_FIELD_AUTO_ADD: 1,\r\n  SPEC_FIELD_MOVE: 1,\r\n  SPEC_FIELD_PROP_CHANGE: 1,\r\n  SPEC_FIELD_NESTED_PROP_CHANGE: 1,\r\n  SPEC_FIELD_REMOVE: 1,\r\n\r\n  SPEC_FUNCTION_CHANGE: 1,\r\n  SPEC_FUNCTION_ADD_WILDCARD: 1,\r\n  SPEC_FUNCTION_DISABLE_WILDCARD: 1,\r\n  SPEC_FUNCTION_ENABLE_WILDCARD: 1,\r\n  SPEC_FUNCTION_REMOVE_WILDCARD: 1,\r\n\r\n  SPEC_VALUE_CHANGE: 1\r\n};\r\n\r\nexport function isSpecAction(a: Action): a is SpecAction {\r\n  return SPEC_ACTION_TYPE_INDEX[a.type];\r\n}\r\n","import {Action} from './index';\r\nimport {PlainReduxAction, ReduxAction} from './redux-action';\r\n\r\nexport type TabAction = (\r\n  TabAdd |\r\n  TabRemove |\r\n  TabSwitch |\r\n  TabTitleUpdate\r\n);\r\n\r\nexport type TabActionType = TabAction['type'];\r\n\r\nexport const TAB_ACTION_TYPE_INDEX: {[k in TabActionType]: 1} = {\r\n  TAB_ADD: 1,\r\n  TAB_REMOVE: 1,\r\n  TAB_SWITCH: 1,\r\n  TAB_TITLE_UPDATE: 1\r\n};\r\n\r\nexport function isTabAction(action: Action): action is TabAction {\r\n  return TAB_ACTION_TYPE_INDEX[action.type];\r\n}\r\n\r\nexport const TAB_ADD = 'TAB_ADD';\r\nexport type TabAdd = PlainReduxAction<typeof TAB_ADD>;\r\n\r\nexport const TAB_REMOVE = 'TAB_REMOVE';\r\nexport type TabRemove = PlainReduxAction<typeof TAB_REMOVE>;\r\n\r\nexport const TAB_SWITCH = 'TAB_SWITCH';\r\nexport type TabSwitch = ReduxAction<typeof TAB_SWITCH, {\r\n  tabID: number;\r\n}>;\r\n\r\nexport const TAB_TITLE_UPDATE = 'TAB_TITLE_UPDATE';\r\nexport type TabTitleUpdate = ReduxAction<typeof TAB_TITLE_UPDATE, {\r\n  title: string;\r\n}>;\r\n","import {FacetedCompositeUnitSpec} from 'vega-lite/build/src/spec';\r\nimport {ResultPlot} from '../models/result';\r\nimport {PlainReduxAction, ReduxAction} from './redux-action';\r\n\r\nexport type BookmarkAction = BookmarkAddPlot | BookmarkClearAll | BookmarkRemovePlot | BookmarkModifyNote;\r\n\r\nexport const BOOKMARK_ADD_PLOT = 'BOOKMARK_ADD_PLOT';\r\nexport type BookmarkAddPlot = ReduxAction<typeof BOOKMARK_ADD_PLOT, {\r\n  plot: ResultPlot\r\n}>;\r\n\r\nexport const BOOKMARK_REMOVE_PLOT = 'BOOKMARK_REMOVE_PLOT';\r\nexport type BookmarkRemovePlot = ReduxAction<typeof BOOKMARK_REMOVE_PLOT, {\r\n  spec: FacetedCompositeUnitSpec\r\n}>;\r\n\r\nexport const BOOKMARK_MODIFY_NOTE = 'BOOKMARK_MODIFY_NOTE';\r\nexport type BookmarkModifyNote = ReduxAction<typeof BOOKMARK_MODIFY_NOTE, {\r\n  note: string,\r\n  spec: FacetedCompositeUnitSpec\r\n}>;\r\n\r\nexport const BOOKMARK_CLEAR_ALL = 'BOOKMARK_CLEAR_ALL';\r\nexport type BookmarkClearAll = PlainReduxAction<typeof BOOKMARK_CLEAR_ALL>;\r\n","import {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport {ReduxAction} from './redux-action';\r\n\r\nexport type CustomWildcardAction = CustomWildcardAdd | CustomWildcardAddField |\r\n                                   CustomWildcardRemove | CustomWildcardRemoveField |\r\n                                   CustomWildcardModifyDescription;\r\n\r\nexport const CUSTOM_WILDCARD_ADD = 'CUSTOM_WILDCARD_ADD';\r\nexport type CustomWildcardAdd = ReduxAction<typeof CUSTOM_WILDCARD_ADD, {\r\n  fields: string[];\r\n  type: ExpandedType\r\n  index?: number;\r\n}>;\r\n\r\nexport const CUSTOM_WILDCARD_REMOVE = 'CUSTOM_WILDCARD_REMOVE';\r\nexport type CustomWildcardRemove = ReduxAction<typeof CUSTOM_WILDCARD_REMOVE, {\r\n  index: number;\r\n}>;\r\n\r\nexport const CUSTOM_WILDCARD_ADD_FIELD = 'CUSTOM_WILDCARD_ADD_FIELD';\r\nexport type CustomWildcardAddField = ReduxAction<typeof CUSTOM_WILDCARD_ADD_FIELD, {\r\n  fields: string[];\r\n  index: number;\r\n}>;\r\n\r\nexport const CUSTOM_WILDCARD_REMOVE_FIELD = 'CUSTOM_WILDCARD_REMOVE_FIELD';\r\nexport type CustomWildcardRemoveField = ReduxAction<typeof CUSTOM_WILDCARD_REMOVE_FIELD, {\r\n  field: string;\r\n  index: number;\r\n}>;\r\n\r\nexport const CUSTOM_WILDCARD_MODIFY_DESCRIPTION = 'CUSTOM_WILDCARD_MODIFY_DESCRIPTION';\r\nexport type CustomWildcardModifyDescription = ReduxAction<typeof CUSTOM_WILDCARD_MODIFY_DESCRIPTION, {\r\n  description: string;\r\n  index: number;\r\n}>;\r\n","import {VoyagerConfig} from '../models/config';\r\nimport {ReduxAction} from './redux-action';\r\n\r\nexport type ConfigAction = SetConfig;\r\n\r\nexport const SET_CONFIG = 'SET_CONFIG';\r\nexport type SetConfig = ReduxAction<typeof SET_CONFIG, {\r\n  config: VoyagerConfig\r\n}>;\r\n","import {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport {Schema} from 'compassql/build/src/schema';\r\nimport * as fetch from 'isomorphic-fetch';\r\nimport {Dispatch} from 'redux';\r\nimport {ThunkAction} from 'redux-thunk';\r\nimport {ActionCreators} from 'redux-undo';\r\nimport {Data, InlineData, isInlineData, isUrlData} from 'vega-lite/build/src/data';\r\nimport {isArray} from 'vega-util';\r\nimport {fetchCompassQLBuildSchema} from '../api/api';\r\nimport {VoyagerConfig} from '../models/config';\r\nimport {State} from '../models/index';\r\nimport {selectConfig} from '../selectors';\r\nimport {Action} from './index';\r\nimport {ReduxAction} from './redux-action';\r\nimport {RESET} from './reset';\r\n\r\nexport const DATASET_SCHEMA_CHANGE_FIELD_TYPE = 'DATASET_SCHEMA_CHANGE_FIELD_TYPE';\r\nexport type DatasetSchemaChangeFieldType = ReduxAction<typeof DATASET_SCHEMA_CHANGE_FIELD_TYPE, {\r\n  field: string,\r\n  type: ExpandedType\r\n}>;\r\n\r\nexport const DATASET_SCHEMA_CHANGE_ORDINAL_DOMAIN = 'DATASET_SCHEMA_CHANGE_ORDINAL_DOMAIN';\r\nexport type DatasetSchemaChangeOrdinalDomain = ReduxAction<typeof DATASET_SCHEMA_CHANGE_ORDINAL_DOMAIN, {\r\n  field: string,\r\n  domain: string[]\r\n}>;\r\n\r\nexport type DatasetAction = DatasetSchemaChangeFieldType | DatasetSchemaChangeOrdinalDomain |\r\n            DatasetRequest | DatasetReceive;\r\nexport type DatasetAsyncAction = DatasetLoad;\r\n\r\nexport const DATASET_REQUEST = 'DATASET_REQUEST';\r\nexport type DatasetRequest = ReduxAction<typeof DATASET_REQUEST, {\r\n  name: string,\r\n  url: string\r\n}>;\r\n\r\nexport const DATASET_RECEIVE = 'DATASET_RECEIVE';\r\nexport type DatasetReceive = ReduxAction<typeof DATASET_RECEIVE, {\r\n  name: string,\r\n  data: InlineData,\r\n  schema: Schema,\r\n}>;\r\n\r\n\r\nexport type DatasetLoad = ThunkAction<void , State, undefined>;\r\nexport function datasetLoad(name: string, data: Data): DatasetLoad {\r\n  return (dispatch: Dispatch<Action>, getState) => {\r\n\r\n    const config = selectConfig(getState());\r\n\r\n    dispatch({type: RESET});\r\n    dispatch({\r\n      type: DATASET_REQUEST,\r\n      payload: {name}\r\n    });\r\n\r\n    // // Get the new dataset\r\n    // if (isUrlData(data)) {\r\n    //   return fetch(data.url)\r\n    //     .then(response => response.json())\r\n    //     .catch(errorCatch)\r\n    //     .then((values: any) => {\r\n    //       console.log('values xx', values);\r\n    //       return buildSchemaAndDispatchDataReceive({values}, config, dispatch, name);\r\n    //     });\r\n    // } else if (isInlineData(data)) {\r\n    //   return buildSchemaAndDispatchDataReceive(data, config, dispatch, name);\r\n    // } else {\r\n    //   throw new Error('dataset load error: dataset type not detected');\r\n    // }\r\n    // const data: any = {\r\n    //   \"values\": [\r\n    //     {\"fieldA\": \"A\", \"fieldB\": 28}, {\"fieldA\": \"B\", \"fieldB\": 55}, {\"fieldA\": \"C\", \"fieldB\": 43},\r\n    //     {\"fieldA\": \"D\", \"fieldB\": 91}, {\"fieldA\": \"E\", \"fieldB\": 81}, {\"fieldA\": \"F\", \"fieldB\": 53},\r\n    //     {\"fieldA\": \"G\", \"fieldB\": 19}, {\"fieldA\": \"H\", \"fieldB\": 87}, {\"fieldA\": \"I\", \"fieldB\": 52}\r\n    //   ]\r\n    // };\r\n    console.log('data', data);\r\n    return buildSchemaAndDispatchDataReceive({values: data}, config, dispatch, null);\r\n  };\r\n};\r\n\r\nfunction buildSchemaAndDispatchDataReceive(\r\n  data: InlineData, config: VoyagerConfig, dispatch: Dispatch<Action>, name: string\r\n) {\r\n  if (!isArray(data.values)) {\r\n    throw new Error('Voyager only supports array values');\r\n  }\r\n  return fetchCompassQLBuildSchema(data.values, config)\r\n  .catch(errorCatch)\r\n  .then(schema => {\r\n    console.log('schema', schema);\r\n    dispatch({\r\n      type: DATASET_RECEIVE,\r\n      payload: {name, schema, data}\r\n    });\r\n\r\n    dispatch(ActionCreators.clearHistory());\r\n  });\r\n}\r\n\r\nfunction errorCatch(err: Error) {\r\n  window.alert(err.message);\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__126__;","/**\r\n * This file stores API for making request to CompassQL (either within the browser or via the server).\r\n */\r\n\r\nimport {Query} from 'compassql/build/src/query/query';\r\nimport {recommend} from 'compassql/build/src/recommend';\r\nimport {build as buildSchema, Schema} from 'compassql/build/src/schema';\r\nimport 'isomorphic-fetch';\r\nimport {Data, InlineData} from 'vega-lite/build/src/data';\r\nimport {VoyagerConfig} from '../models/config';\r\nimport {fromSpecQueryModelGroup, ResultPlotWithKey} from '../models/result';\r\nexport {Query, Schema, Data};\r\n\r\n/**\r\n * Submit recommendation query request from CompassQL\r\n */\r\nexport function fetchCompassQLRecommend(query: Query, schema: Schema, data: InlineData, config?: VoyagerConfig):\r\n  Promise<ResultPlotWithKey[]> {\r\n\r\n  if (config && config.serverUrl) {\r\n    const endpoint = \"recommend\";\r\n\r\n    return fetch(`${config.serverUrl}/${endpoint}` , {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      credentials: \"same-origin\",\r\n      body: JSON.stringify({\r\n        query,\r\n        // fieldSchemas are just JSON\r\n        schema: schema.fieldSchemas,\r\n        data\r\n      })\r\n    }).then(\r\n      response => {\r\n        return response.json();\r\n      }\r\n    );\r\n  } else {\r\n    return new Promise(resolve => {\r\n      const modelGroup = recommend(query, schema).result;\r\n\r\n      // TODO:\r\n      // - replace this with different cached data source's unique names\r\n      // once we have multiple cached data source from Leilani's optimizer engine\r\n      resolve(fromSpecQueryModelGroup(modelGroup, {name: 'source'}));\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Submit schema building request from CompassQL\r\n */\r\nexport function fetchCompassQLBuildSchema(data: Object[], config?: VoyagerConfig):\r\n  Promise<Schema> {\r\n\r\n  if (config && config.serverUrl) {\r\n    const endpoint = \"build\";\r\n\r\n    return fetch(`${config.serverUrl}/${endpoint}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      credentials: \"same-origin\",\r\n      body: JSON.stringify({\r\n        data\r\n      })\r\n    }).then(\r\n      response => {\r\n        return response.json();\r\n      }\r\n    ).then(\r\n      fields => {\r\n        return new Schema({fields: fields.fields});\r\n      }\r\n    );\r\n\r\n  } else {\r\n    return new Promise(resolve => {\r\n      resolve(buildSchema(data));\r\n    });\r\n  }\r\n\r\n}\r\n","import {DEFAULT_QUERY_CONFIG, QueryConfig} from './config';\nimport {generate} from './generate';\nimport {SpecQueryModelGroup} from './model';\nimport {nest} from './nest';\nimport {normalize} from './query/normalize';\nimport {Query} from './query/query';\nimport {rank} from './ranking/ranking';\nimport {Schema} from './schema';\n\nexport function recommend(q: Query, schema: Schema, config?: QueryConfig): {query: Query, result: SpecQueryModelGroup} {\n  // 1. Normalize non-nested `groupBy` to always have `groupBy` inside `nest`\n  //    and merge config with the following precedence\n  //    query.config > config > DEFAULT_QUERY_CONFIG\n  q = {\n    ...normalize(q),\n    config: {\n      ...DEFAULT_QUERY_CONFIG,\n      ...config,\n      ...q.config\n    }\n  };\n  // 2. Generate\n  const answerSet = generate(q.spec, schema, q.config);\n  const nestedAnswerSet = nest(answerSet, q.nest);\n  const result = rank(nestedAnswerSet, q, schema, 0);\n\n  return {\n    query: q,\n    result: result\n  };\n}\n","import {Channel} from 'vega-lite/build/src/channel';\nimport {Config} from 'vega-lite/build/src/config';\n\nimport {toKey, DEFAULT_PROP_PRECEDENCE} from './property';\nimport {DEFAULT_ENUM_INDEX, EnumIndex} from './wildcard';\n\n// We name this QueryConfig to avoid confusion with Vega-Lite's Config\nexport interface QueryConfig {\n  verbose?: boolean;\n\n  defaultSpecConfig?: Config;\n\n  propertyPrecedence?: string[];\n\n  enum?: Partial<EnumIndex>;\n\n  /** Default ratio for number fields to be considered ordinal */\n  numberNominalProportion?: number;\n\n  /** Default cutoff for not applying the numberOrdinalProportion inference */\n  numberNominalLimit?: number;\n\n  // SPECIAL MODE\n  /**\n   * Allow automatically adding a special count (autoCount) field for plots\n   * that contain only discrete fields. In such cases, adding count make the\n   * output plots way more meaningful.\n   */\n  autoAddCount?: boolean;\n\n  // CONSTRAINTS\n  constraintManuallySpecifiedValue?: boolean;\n  // Spec Constraints\n\n  hasAppropriateGraphicTypeForMark?: boolean;\n  omitAggregate?: boolean;\n  omitAggregatePlotWithDimensionOnlyOnFacet?: boolean;\n  omitAggregatePlotWithoutDimension?: boolean;\n  omitBarLineAreaWithOcclusion?: boolean;\n  omitBarTickWithSize?: boolean;\n  omitMultipleNonPositionalChannels?: boolean;\n  omitRaw?: boolean;\n  omitRawContinuousFieldForAggregatePlot?: boolean;\n  omitRawWithXYBothOrdinalScaleOrBin?: boolean;\n  omitRepeatedField?: boolean;\n  omitNonPositionalOrFacetOverPositionalChannels?: boolean;\n  omitTableWithOcclusionIfAutoAddCount?: boolean;\n  omitVerticalDotPlot?: boolean;\n  omitInvalidStackSpec?: boolean;\n  omitNonSumStack?: boolean;\n\n  preferredBinAxis?: Channel;\n  preferredTemporalAxis?: Channel;\n  preferredOrdinalAxis?: Channel;\n  preferredNominalAxis?: Channel;\n  preferredFacet?: Channel;\n\n  // Field Encoding Constraints\n  minCardinalityForBin?: number;\n  maxCardinalityForCategoricalColor?: number;\n  maxCardinalityForFacet?: number;\n  maxCardinalityForShape?: number;\n  timeUnitShouldHaveVariation?: boolean;\n  typeMatchesSchemaType?: boolean;\n\n  // STYLIZE\n  stylize?: boolean;\n  smallRangeStepForHighCardinalityOrFacet?: {maxCardinality: number, rangeStep: number};\n  nominalColorScaleForHighCardinality?: {maxCardinality: number, palette: string};\n  xAxisOnTopForHighYCardinalityWithoutColumn?: {maxCardinality: number};\n\n  // EFFECTIVENESS PREFERENCE\n  maxGoodCardinalityForColor?: number; // FIXME: revise\n  maxGoodCardinalityForFacet?: number; // FIXME: revise\n  // HIGH CARDINALITY STRINGS\n  minPercentUniqueForKey?: number;\n  minCardinalityForKey?: number;\n}\n\nexport const DEFAULT_QUERY_CONFIG: QueryConfig = {\n  verbose: false,\n  defaultSpecConfig: {\n    line: {point: true},\n    scale: {useUnaggregatedDomain: true}\n  },\n  propertyPrecedence: DEFAULT_PROP_PRECEDENCE.map(toKey),\n  enum: DEFAULT_ENUM_INDEX,\n\n  numberNominalProportion: 0.05,\n  numberNominalLimit: 40,\n\n  // CONSTRAINTS\n  constraintManuallySpecifiedValue: false,\n  // Spec Constraints -- See description inside src/constraints/spec.ts\n  autoAddCount: false,\n\n  hasAppropriateGraphicTypeForMark: true,\n  omitAggregate: false,\n  omitAggregatePlotWithDimensionOnlyOnFacet: true,\n  omitAggregatePlotWithoutDimension: false,\n  omitBarLineAreaWithOcclusion: true,\n  omitBarTickWithSize: true,\n  omitMultipleNonPositionalChannels: true,\n  omitRaw: false,\n  omitRawContinuousFieldForAggregatePlot: true,\n  omitRepeatedField: true,\n  omitNonPositionalOrFacetOverPositionalChannels: true,\n  omitTableWithOcclusionIfAutoAddCount: true,\n  omitVerticalDotPlot: false,\n  omitInvalidStackSpec: true,\n  omitNonSumStack: true,\n\n  preferredBinAxis: Channel.X,\n  preferredTemporalAxis: Channel.X,\n  preferredOrdinalAxis: Channel.Y, // ordinal on y makes it easier to read.\n  preferredNominalAxis: Channel.Y, // nominal on y makes it easier to read.\n  preferredFacet: Channel.ROW, // row make it easier to scroll than column\n\n  // Field Encoding Constraints -- See description inside src/constraint/field.ts\n  minCardinalityForBin: 15,\n  maxCardinalityForCategoricalColor: 20,\n  maxCardinalityForFacet: 20,\n  maxCardinalityForShape: 6,\n  timeUnitShouldHaveVariation: true,\n  typeMatchesSchemaType: true,\n\n  // STYLIZE\n  stylize: true,\n  smallRangeStepForHighCardinalityOrFacet: {maxCardinality: 10, rangeStep: 12},\n  nominalColorScaleForHighCardinality: {maxCardinality: 10, palette: 'category20'},\n  xAxisOnTopForHighYCardinalityWithoutColumn: {maxCardinality: 30},\n\n  // RANKING PREFERENCE\n  maxGoodCardinalityForFacet: 5, // FIXME: revise\n  maxGoodCardinalityForColor: 7, // FIXME: revise\n\n  // HIGH CARDINALITY STRINGS\n  minPercentUniqueForKey: .8,\n  minCardinalityForKey: 50,\n};\n\nexport function extendConfig(opt: QueryConfig) {\n  return {\n    ...DEFAULT_QUERY_CONFIG,\n    ...opt,\n    enum: extendEnumIndex(opt.enum)\n  };\n}\n\nfunction extendEnumIndex(enumIndex: Partial<EnumIndex>) {\n  const enumOpt: EnumIndex = {\n    ...DEFAULT_ENUM_INDEX,\n    ...enumIndex,\n    binProps: extendNestedEnumIndex(enumIndex, 'bin'),\n    scaleProps: extendNestedEnumIndex(enumIndex, 'scale'),\n    axisProps: extendNestedEnumIndex(enumIndex, 'axis'),\n    legendProps: extendNestedEnumIndex(enumIndex, 'legend')\n  };\n  return enumOpt;\n}\n\nfunction extendNestedEnumIndex(enumIndex: Partial<EnumIndex>, prop: 'bin' | 'scale' | 'axis' | 'legend') {\n  return {\n    ...DEFAULT_ENUM_INDEX[prop + 'Props'],\n    ...enumIndex[prop + 'Props']\n  };\n}\n","import {Axis, AXIS_PROPERTIES} from 'vega-lite/build/src/axis';\nimport {BinParams} from 'vega-lite/build/src/bin';\nimport {Scale, SCALE_PROPERTIES} from 'vega-lite/build/src/scale';\nimport {Legend, LEGEND_PROPERTIES} from 'vega-lite/build/src/legend';\nimport {SortField} from 'vega-lite/build/src/sort';\nimport {Flag, flagKeys} from 'vega-lite/build/src/util';\nimport {FieldQuery, ValueQuery, AutoCountQuery} from './query/encoding';\nimport {TransformQuery} from './query/transform';\nimport {Diff} from './util';\n\n\n/**\n * There are two types of `Property`'s.\n * One is just flat property names.\n * (Try to hover `FlatProp` to see all of them.)\n * Another is an object that describes a parent property (e.g., `scale`) and the child property (e.g., `type`)\n */\nexport type Property = FlatProp | EncodingNestedProp;\nexport type FlatProp = MarkProp | TransformProp | ViewProp | EncodingTopLevelProp;\n\nexport type MarkProp = 'mark' | 'stack'; // FIXME: determine how 'stack' works;\nexport type TransformProp = keyof TransformQuery;\nexport type ViewProp = 'width' | 'height' | 'background' | 'padding' | 'title';\nexport type EncodingTopLevelProp = Diff<keyof (FieldQuery & ValueQuery & AutoCountQuery), 'description'>; // Do not include description since description is simply a metadata\n\nexport type EncodingNestedProp = BinProp | SortProp | ScaleProp | AxisProp | LegendProp;\n\nexport type EncodingNestedChildProp = keyof BinParams | keyof SortField<string> | keyof Scale | keyof Axis | keyof Legend;\n\n/**\n * An object that describes a parent property (e.g., `scale`) and the child property (e.g., `type`)\n */\nexport type BaseEncodingNestedProp<P, T> = {\n  parent: P,\n  child: keyof T\n};\n\nexport type BinProp = BaseEncodingNestedProp<'bin', BinParams>;\nexport type SortProp = BaseEncodingNestedProp<'sort', SortField<string>>;\nexport type ScaleProp = BaseEncodingNestedProp<'scale', Scale>;\nexport type AxisProp = BaseEncodingNestedProp<'axis', Axis>;\nexport type LegendProp = BaseEncodingNestedProp<'legend', Legend>;\n\nexport function isEncodingNestedProp(p: Property): p is EncodingNestedProp {\n  return !!p['parent'];\n}\n\nconst ENCODING_TOPLEVEL_PROP_INDEX: Flag<EncodingTopLevelProp> = {\n  channel: 1,\n  aggregate: 1, autoCount: 1, bin: 1, timeUnit: 1, hasFn: 1,\n  sort: 1, stack: 1,\n  field: 1, type: 1,\n  format: 1, scale: 1, axis: 1, legend: 1,\n  value: 1\n};\n\nexport const ENCODING_TOPLEVEL_PROPS = flagKeys(ENCODING_TOPLEVEL_PROP_INDEX);\n\nexport function isEncodingTopLevelProperty(p: Property): p is EncodingTopLevelProp {\n  return p in ENCODING_TOPLEVEL_PROP_INDEX;\n}\n\nexport type EncodingNestedPropParent = 'bin' | 'scale' | 'sort' | 'axis' | 'legend';\n\nconst ENCODING_NESTED_PROP_PARENT_INDEX: Flag<EncodingNestedPropParent> = {\n  bin: 1,\n  scale: 1,\n  sort: 1,\n  axis: 1,\n  legend: 1\n};\n\nexport function isEncodingNestedParent(prop: string): prop is EncodingNestedPropParent {\n  return ENCODING_NESTED_PROP_PARENT_INDEX[prop as string];\n}\n\n// FIXME -- we should not have to manually specify these\nexport const BIN_CHILD_PROPS: (keyof BinParams)[] = ['maxbins', 'divide', 'extent', 'base', 'step', 'steps', 'minstep'];\nexport const SORT_CHILD_PROPS: (keyof SortField<string>)[] = ['field', 'op', 'order'];\n\nconst BIN_PROPS = BIN_CHILD_PROPS.map((c): BinProp => {\n  return {parent: 'bin', child: c};\n});\n\nexport const SORT_PROPS = SORT_CHILD_PROPS.map((c): SortProp => {\n  return {parent: 'sort', child: c};\n});\n\nexport const SCALE_PROPS = SCALE_PROPERTIES.map((c): ScaleProp => {\n  return {parent: 'scale', child: c};\n});\n\nconst AXIS_PROPS = AXIS_PROPERTIES.map((c): AxisProp => {\n  return {parent: 'axis', child: c};\n});\n\nconst LEGEND_PROPS = LEGEND_PROPERTIES.map((c): LegendProp => {\n  return {parent: 'legend', child: c};\n});\n\nexport const ENCODING_NESTED_PROPS = ([] as EncodingNestedProp[]).concat(\n  BIN_PROPS, SORT_PROPS, SCALE_PROPS, AXIS_PROPS, LEGEND_PROPS\n);\n\nexport const VIEW_PROPS: Property[] = ['width', 'height', 'background', 'padding', 'title'] as Property[];\n\nconst PROP_KEY_DELIMITER = '.';\n\nexport function toKey(p: Property): string {\n  if (isEncodingNestedProp(p)) {\n    return p.parent + PROP_KEY_DELIMITER + p.child;\n  }\n  return p;\n}\n\nexport function fromKey(k: string): Property {\n  const split = k.split(PROP_KEY_DELIMITER);\n  /* istanbul ignore else */\n  if (split.length === 1) {\n    return k as Property;\n  } else if (split.length === 2) {\n    return {\n      parent: split[0],\n      child: split[1]\n    } as EncodingNestedProp;\n  } else {\n    throw 'Invalid property key with ' + split.length + ' dots: ' + k;\n  }\n}\n\nconst ENCODING_NESTED_PROP_INDEX = ENCODING_NESTED_PROPS.reduce((i, prop: EncodingNestedProp) => {\n  i[prop.parent] = i[prop.parent] || [];\n  i[prop.parent][prop.child] = prop;\n  return i;\n}, {});\n\n// FIXME consider using a more general method\nexport function getEncodingNestedProp(parent: EncodingTopLevelProp, child: EncodingNestedChildProp) {\n  return (ENCODING_NESTED_PROP_INDEX[parent] || {})[child];\n}\n\nexport function isEncodingProperty(p: Property): p is EncodingTopLevelProp | EncodingNestedProp {\n  return isEncodingTopLevelProperty(p) || isEncodingNestedProp(p);\n}\n\nexport const ALL_ENCODING_PROPS = ([] as Property[]).concat(\n  ENCODING_TOPLEVEL_PROPS,\n  ENCODING_NESTED_PROPS\n);\n\nexport const DEFAULT_PROP_PRECEDENCE: Property[] =\n([\n  'type', // type is a constraint for field\n  'field',\n\n  // Field Transform\n  'bin', 'timeUnit', 'aggregate', 'autoCount',\n\n  // Encoding\n  'channel',\n\n  // Mark\n  'mark', 'stack',\n\n  'scale', 'sort',\n  'axis', 'legend',\n] as Property[]).concat(\n  BIN_PROPS, SCALE_PROPS, AXIS_PROPS, LEGEND_PROPS, SORT_PROPS\n);\n\nexport namespace Property {\n  export const MARK: 'mark' = 'mark';\n\n  export const TRANSFORM: 'transform' = 'transform';\n  // Layout\n  export const STACK: 'stack' = 'stack';\n\n  export const FORMAT: 'format' = 'format';\n\n  // TODO: sub parts of stack\n\n  // Encoding Properties\n  export const CHANNEL: 'channel' = 'channel';\n  export const AGGREGATE: 'aggregate' = 'aggregate';\n  export const AUTOCOUNT: 'autoCount' = 'autoCount';\n  export const BIN: 'bin' = 'bin';\n\n  export const HAS_FN: 'hasFn' = 'hasFn';\n  export const TIMEUNIT: 'timeUnit' = 'timeUnit';\n  export const FIELD: 'field' = 'field';\n  export const TYPE: 'type' = 'type';\n\n  export const SORT: 'sort' = 'sort';\n\n  export const SCALE: 'scale' = 'scale';\n  export const AXIS: 'axis' = 'axis';\n\n  export const LEGEND: 'legend' = 'legend';\n\n  export const WIDTH: 'width' = 'width';\n  export const HEIGHT: 'height' = 'height';\n  export const BACKGROUND: 'background' = 'background';\n  export const PADDING: 'padding' = 'padding';\n  export const TITLE: 'title' = 'title';\n}\n","import {DateTime} from './datetime';\nimport {Guide, GuideEncodingEntry, VlOnlyGuideConfig} from './guide';\nimport {Flag, flagKeys} from './util';\nimport {AxisOrient, VgAxis, VgAxisBase, VgAxisConfig} from './vega.schema';\n\n\n\nexport interface AxisConfig extends VgAxisConfig, VlOnlyGuideConfig {}\n\nexport interface Axis extends VgAxisBase, Guide {\n  /**\n   * The orientation of the axis. One of `\"top\"`, `\"bottom\"`, `\"left\"` or `\"right\"`. The orientation can be used to further specialize the axis type (e.g., a y axis oriented for the right edge of the chart).\n   *\n   * __Default value:__ `\"bottom\"` for x-axes and `\"left\"` for y-axes.\n   */\n  orient?: AxisOrient;\n\n  /**\n   * The offset, in pixels, by which to displace the axis from the edge of the enclosing group or data rectangle.\n   *\n   * __Default value:__ derived from the [axis config](config.html#facet-scale-config)'s `offset` (`0` by default)\n   */\n  offset?: number;\n\n  /**\n   * The anchor position of the axis in pixels. For x-axis with top or bottom orientation, this sets the axis group x coordinate. For y-axis with left or right orientation, this sets the axis group y coordinate.\n   *\n   * __Default value__: `0`\n   */\n  position?: number;\n\n\n  /**\n   * The rotation angle of the axis labels.\n   *\n   * __Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.\n   *\n   * @minimum -360\n   * @maximum 360\n   */\n  labelAngle?: number;\n\n  /**\n   * A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are \"nice\" (multiples of 2, 5, 10) and lie within the underlying scale's range.\n   * @minimum 0\n   *\n   * __Default value__: Determine using a formula `ceil(width/40)` for x and `ceil(height/40)` for y.\n   */\n  tickCount?: number;\n\n  /**\n   * Explicitly set the visible axis tick values.\n   */\n  values?: number[] | DateTime[];\n\n  /**\n   * A non-positive integer indicating z-index of the axis.\n   * If zindex is 0, axes should be drawn behind all chart elements.\n   * To put them in front, use `\"zindex = 1\"`.\n   *\n   * __Default value:__ `1` (in front of the marks) for actual axis and `0` (behind the marks) for grids.\n   *\n   * @TJS-type integer\n   * @minimum 0\n   */\n  zindex?: number;\n\n  /**\n   * Mark definitions for custom axis encoding.\n   *\n   * @hide\n   */\n  encoding?: AxisEncoding;\n}\n\n\nexport type AxisPart = keyof AxisEncoding;\nexport const AXIS_PARTS: AxisPart[] = ['domain', 'grid', 'labels', 'ticks', 'title'];\n\n\n\n/**\n * A dictionary listing whether a certain axis property is applicable for only main axes or only grid axes.\n * (Properties not listed are applicable for both)\n */\nexport const AXIS_PROPERTY_TYPE: {\n  // Using Mapped Type to declare type (https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types)\n  [k in keyof VgAxis]: 'main' | 'grid' | 'both'\n} = {\n  grid: 'grid',\n  gridScale: 'grid',\n\n  domain: 'main',\n  labels: 'main',\n  labelFlush: 'main',\n  labelOverlap: 'main',\n  minExtent: 'main',\n  maxExtent: 'main',\n  offset: 'main',\n  ticks: 'main',\n  title: 'main',\n  values: 'both',\n\n  scale: 'both',\n  zindex: 'both' // this is actually set afterward, so it doesn't matter\n};\n\nexport interface AxisEncoding {\n  /**\n   * Custom encoding for the axis container.\n   */\n  axis?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for the axis domain rule mark.\n   */\n  domain?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for axis gridline rule marks.\n   */\n  grid?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for axis label text marks.\n   */\n  labels?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for axis tick rule marks.\n   */\n  ticks?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for the axis title text mark.\n   */\n  title?: GuideEncodingEntry;\n}\n\nconst COMMON_AXIS_PROPERTIES_INDEX: Flag<keyof (VgAxis | Axis)> = {\n  orient: 1, // other things can depend on orient\n\n  domain: 1,\n  format: 1,\n  grid: 1,\n  labelBound: 1,\n  labelFlush: 1,\n  labelPadding: 1,\n  labels: 1,\n  labelOverlap: 1,\n  maxExtent: 1,\n  minExtent: 1,\n  offset: 1,\n  position: 1,\n  tickCount: 1,\n  ticks: 1,\n  tickSize: 1,\n  title: 1,\n  titlePadding: 1,\n  values: 1,\n  zindex: 1,\n};\n\nconst AXIS_PROPERTIES_INDEX: Flag<keyof Axis> = {\n  ...COMMON_AXIS_PROPERTIES_INDEX,\n  encoding: 1,\n  labelAngle: 1,\n  titleMaxLength: 1\n};\n\nconst VG_AXIS_PROPERTIES_INDEX: Flag<keyof VgAxis> = {\n  scale: 1,\n  ...COMMON_AXIS_PROPERTIES_INDEX,\n  gridScale: 1,\n  encode: 1\n};\n\nexport function isAxisProperty(prop: string): prop is keyof Axis {\n  return !!AXIS_PROPERTIES_INDEX[prop];\n}\n\nexport const VG_AXIS_PROPERTIES = flagKeys(VG_AXIS_PROPERTIES_INDEX);\n\n// Export for dependent projects\nexport const AXIS_PROPERTIES = flagKeys(AXIS_PROPERTIES_INDEX);\n\nexport interface AxisConfigMixins {\n  /**\n   * Axis configuration, which determines default properties for all `x` and `y` [axes](axis.html). For a full list of axis configuration options, please see the [corresponding section of the axis documentation](axis.html#config).\n   */\n  axis?: AxisConfig;\n\n  /**\n   * X-axis specific config.\n   */\n  axisX?: VgAxisConfig;\n\n  /**\n   * Y-axis specific config.\n   */\n  axisY?: VgAxisConfig;\n\n  /**\n   * Specific axis config for y-axis along the left edge of the chart.\n   */\n  axisLeft?: VgAxisConfig;\n\n  /**\n   * Specific axis config for y-axis along the right edge of the chart.\n   */\n  axisRight?: VgAxisConfig;\n\n  /**\n   * Specific axis config for x-axis along the top edge of the chart.\n   */\n  axisTop?: VgAxisConfig;\n\n  /**\n   * Specific axis config for x-axis along the bottom edge of the chart.\n   */\n  axisBottom?: VgAxisConfig;\n\n  /**\n   * Specific axis config for axes with \"band\" scales.\n   */\n  axisBand?: VgAxisConfig;\n}\n","import {DateTime} from './datetime';\nimport {Guide, GuideEncodingEntry, VlOnlyGuideConfig} from './guide';\nimport {Flag, flagKeys} from './util';\nimport {VgLegend, VgLegendBase, VgLegendConfig} from './vega.schema';\n\n\nexport interface LegendConfig extends VgLegendConfig, VlOnlyGuideConfig {}\n\n/**\n * Properties of a legend or boolean flag for determining whether to show it.\n */\nexport interface Legend extends VgLegendBase, Guide {\n  /**\n   * Mark definitions for custom legend encoding.\n   *\n   * @hide\n   */\n  encoding?: LegendEncoding;\n\n  /**\n   * The desired number of tick values for quantitative legends.\n   */\n  tickCount?: number;\n\n  /**\n   * Explicitly set the visible legend values.\n   */\n  values?: number[] | string[] | DateTime[];\n\n  /**\n   * The type of the legend. Use `\"symbol\"` to create a discrete legend and `\"gradient\"` for a continuous color gradient.\n   *\n   * __Default value:__ `\"gradient\"` for non-binned quantitative fields and temporal fields; `\"symbol\"` otherwise.\n   */\n  type?: 'symbol' | 'gradient';\n\n  /**\n   * A non-positive integer indicating z-index of the legend.\n   * If zindex is 0, legend should be drawn behind all chart elements.\n   * To put them in front, use zindex = 1.\n   * @TJS-type integer\n   * @minimum 0\n   */\n  zindex?: number;\n}\n\nexport type LegendEncoding = {\n  /**\n   * Custom encoding for the legend container.\n   * This can be useful for creating legend with custom x, y position.\n   */\n  legend?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for the legend title text mark.\n   */\n  title?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for legend label text marks.\n   */\n  labels?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for legend symbol marks.\n   */\n  symbols?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for legend gradient filled rect marks.\n   */\n  gradient?: GuideEncodingEntry;\n};\n\nexport const defaultLegendConfig: LegendConfig = {};\n\nconst COMMON_LEGEND_PROPERTY_INDEX: Flag<keyof (VgLegend | Legend)> = {\n  entryPadding: 1,\n  format: 1,\n  offset: 1,\n  orient: 1,\n  padding: 1,\n  tickCount: 1,\n  title: 1,\n  type: 1,\n  values: 1,\n  zindex: 1\n};\n\nconst VG_LEGEND_PROPERTY_INDEX: Flag<keyof VgLegend> = {\n  ...COMMON_LEGEND_PROPERTY_INDEX,\n  // channel scales\n  opacity: 1,\n  shape: 1,\n  stroke: 1,\n  fill: 1,\n  size: 1,\n  // encode\n  encode: 1\n};\n\nexport const LEGEND_PROPERTIES = flagKeys(COMMON_LEGEND_PROPERTY_INDEX);\n\nexport const VG_LEGEND_PROPERTIES = flagKeys(VG_LEGEND_PROPERTY_INDEX);\n","import { QueryConfig } from './config';\nimport {Property, isEncodingNestedProp} from './property';\nimport { Schema } from './schema';\nimport { extend, isArray } from './util';\n\nimport {Axis, AXIS_PROPERTIES} from 'vega-lite/build/src/axis';\nimport {BinParams} from 'vega-lite/build/src/bin';\nimport {Channel, X, Y, ROW, COLUMN, SIZE, COLOR} from 'vega-lite/build/src/channel';\nimport {FieldDef} from 'vega-lite/build/src/fielddef';\nimport {Mark} from 'vega-lite/build/src/mark';\nimport {Scale, ScaleType, SCALE_PROPERTIES} from 'vega-lite/build/src/scale';\nimport {Legend, LEGEND_PROPERTIES} from 'vega-lite/build/src/legend';\nimport {SortField, SortOrder} from 'vega-lite/build/src/sort';\nimport {StackOffset} from 'vega-lite/build/src/stack';\nimport {TimeUnit} from 'vega-lite/build/src/timeunit';\nimport {Type} from 'vega-lite/build/src/type';\n\nexport const SHORT_WILDCARD: SHORT_WILDCARD = '?';\nexport type SHORT_WILDCARD = '?';\n\nexport interface Wildcard<T> {\n  name?: string;\n\n  /**\n   * List of values to enumerate\n   */\n  enum?: T[];\n}\n\nexport type WildcardProperty<T> = T | Wildcard<T> | SHORT_WILDCARD;\n\nexport interface ExtendedWildcard<T> extends Wildcard<T> {\n  [prop: string]: any;\n}\n\nexport function isWildcard(prop: any): prop is Wildcard<any> | SHORT_WILDCARD  {\n  return isShortWildcard(prop) || isWildcardDef(prop);\n}\n\nexport function isShortWildcard(prop: any): prop is SHORT_WILDCARD {\n  return prop === SHORT_WILDCARD;\n}\n\nexport function isWildcardDef(prop: any): prop is Wildcard<any> {\n  return prop !== undefined && prop != null && (!!prop.enum || !!prop.name) && !isArray(prop);\n}\n\nexport function initWildcard(\n  prop: SHORT_WILDCARD | ExtendedWildcard<any>,\n  defaultName: string,\n  defaultEnumValues: any[]\n): ExtendedWildcard<any> {\n  return extend({}, {\n      name: defaultName,\n      enum: defaultEnumValues\n    }, prop === SHORT_WILDCARD ? {} : prop);\n}\n\n/**\n * Initial short names from list of full camelCaseNames.\n * For each camelCaseNames, return unique short names based on initial (e.g., `ccn`)\n */\nfunction initNestedPropName(fullNames: string[]) {\n  let index = {};\n  let has = {};\n  for (const fullName of fullNames) {\n    const initialIndices = [0];\n    for (let i = 0; i < fullName.length ; i++) {\n      if (fullName.charAt(i).toUpperCase() === fullName.charAt(i)) {\n        initialIndices.push(i);\n      }\n    }\n    let shortName = initialIndices.map(i => fullName.charAt(i)).join('').toLowerCase();\n    if (!has[shortName]) {\n      index[fullName] = shortName;\n      has[shortName] = true;\n      continue;\n    }\n    // If duplicate, add last character and try again!\n    if (initialIndices[initialIndices.length - 1] !== fullName.length - 1) {\n      shortName = initialIndices.concat([fullName.length - 1]).map(i => fullName.charAt(i)).join('').toLowerCase();\n      if (!has[shortName]) {\n        index[fullName] = shortName;\n        has[shortName] = true;\n        continue;\n      }\n    }\n    for (let i = 1; !index[fullName]; i++) {\n      let shortNameWithNo = shortName + '_' + i;\n      if (!has[shortNameWithNo]) {\n        index[fullName] = shortNameWithNo;\n        has[shortNameWithNo] = true;\n        break;\n      }\n    }\n  }\n  return index;\n}\n\nexport const DEFAULT_NAME = {\n  mark: 'm',\n  channel: 'c',\n  aggregate: 'a',\n  autoCount: '#',\n  hasFn: 'h',\n  bin: 'b',\n  sort: 'so',\n  stack: 'st',\n  scale: 's',\n  format: 'f',\n  axis: 'ax',\n  legend: 'l',\n  value: 'v',\n\n  timeUnit: 'tu',\n  field: 'f',\n  type: 't',\n\n  binProps: {\n    maxbins: 'mb',\n    min: 'mi',\n    max: 'ma',\n    base: 'b',\n    step: 's',\n    steps: 'ss',\n    minstep: 'ms',\n    divide: 'd'\n  },\n  sortProps: {\n    field: 'f',\n    op: 'o',\n    order: 'or'\n  },\n  scaleProps: initNestedPropName(SCALE_PROPERTIES),\n  axisProps: initNestedPropName(AXIS_PROPERTIES),\n  legendProps: initNestedPropName(LEGEND_PROPERTIES)\n};\n\nexport function getDefaultName(prop: Property) {\n  if (isEncodingNestedProp(prop)) {\n    return DEFAULT_NAME[prop.parent] + '-' + DEFAULT_NAME[prop.parent + 'Props'][prop.child];\n  }\n  if (DEFAULT_NAME[prop]) {\n    return DEFAULT_NAME[prop];\n  }\n  /* istanbul ignore next */\n  throw new Error('Default name undefined for ' + prop);\n}\n\n/**\n * Generic index for default enum (values to enumerate) of a particular definition type.\n */\nexport type DefEnumIndex<T> = { [P in keyof T]: T[P][]};\n\nconst DEFAULT_BOOLEAN_ENUM = [false, true];\n\nexport type EnumIndex =\n  {\n    mark: Mark[];\n    channel: Channel[],\n    autoCount: boolean[],\n    hasFn: boolean[],\n  } &\n  DefEnumIndex<FieldDef<string>> &\n  {\n    sort: (SortField<string> | SortOrder)[],\n    stack: StackOffset[],\n    format: string[],\n    scale: boolean[],\n    axis: boolean[],\n    legend: boolean[],\n    value: any[],\n\n    binProps: Partial<DefEnumIndex<BinParams>>,\n    sortProps: Partial<DefEnumIndex<SortField<string>>>,\n    scaleProps: Partial<DefEnumIndex<Scale>>,\n    axisProps: Partial<DefEnumIndex<Axis>>,\n    legendProps: Partial<DefEnumIndex<Legend>>\n  };\n\n\nconst DEFAULT_BIN_PROPS_ENUM: DefEnumIndex<BinParams> = {\n  maxbins: [5, 10, 20],\n  extent: [undefined],\n  base: [10],\n  step: [undefined],\n  steps: [undefined],\n  minstep: [undefined],\n  divide: [[5, 2]]\n};\n\nconst DEFAULT_SORT_PROPS: DefEnumIndex<SortField<string>> = {\n  field: [undefined], // This should be never call and instead read from the schema\n  op: ['min', 'mean'],\n  order: ['ascending', 'descending']\n};\n\nconst DEFAULT_SCALE_PROPS_ENUM: DefEnumIndex<Scale> = {\n  type: [undefined, ScaleType.LOG],\n  domain: [undefined],\n  base: [undefined],\n  exponent: [1, 2],\n\n  clamp: DEFAULT_BOOLEAN_ENUM,\n  nice: DEFAULT_BOOLEAN_ENUM,\n  reverse: DEFAULT_BOOLEAN_ENUM,\n  round: DEFAULT_BOOLEAN_ENUM,\n  zero: DEFAULT_BOOLEAN_ENUM,\n\n  padding: [undefined],\n  paddingInner: [undefined],\n  paddingOuter: [undefined],\n\n  interpolate: [undefined],\n\n  range: [undefined],\n  rangeStep: [17, 21],\n  scheme: [undefined],\n};\n\n\nconst DEFAULT_AXIS_PROPS_ENUM: DefEnumIndex<Axis> = {\n  zindex: [1, 0],\n  offset: [undefined],\n  orient: [undefined],\n  values: [undefined],\n\n  encoding: [undefined],\n\n  domain: DEFAULT_BOOLEAN_ENUM,\n\n  grid: DEFAULT_BOOLEAN_ENUM,\n\n  format: [undefined],\n  labels: DEFAULT_BOOLEAN_ENUM,\n  labelAngle: [undefined],\n  labelOverlap: [undefined],\n  labelPadding: [undefined],\n  labelBound: [undefined],\n  labelFlush: [undefined],\n\n  maxExtent: [undefined],\n  minExtent: [undefined],\n  position: [undefined],\n\n  ticks: DEFAULT_BOOLEAN_ENUM,\n  tickCount: [undefined],\n  tickSize: [undefined],\n\n  title: [undefined],\n  titleMaxLength: [undefined],\n  titlePadding: [undefined]\n};\n\nconst DEFAULT_LEGEND_PROPS_ENUM: DefEnumIndex<Legend> = {\n  entryPadding: [undefined],\n  orient: ['left', 'right'],\n  offset: [undefined],\n  padding: [undefined],\n  format: [undefined],\n  values: [undefined],\n\n  tickCount: [undefined],\n  title: [undefined],\n  type: [undefined],\n  zindex: [undefined]\n};\n\n// Use FullEnumIndex to make sure we have all properties specified here!\nexport const DEFAULT_ENUM_INDEX: EnumIndex = {\n  mark: [Mark.POINT, Mark.BAR, Mark.LINE, Mark.AREA, Mark.RECT, Mark.TICK, Mark.TEXT],\n  channel: [X, Y, ROW, COLUMN, SIZE, COLOR], // TODO: TEXT\n\n  aggregate: [undefined, 'mean'],\n  autoCount: DEFAULT_BOOLEAN_ENUM,\n  bin: DEFAULT_BOOLEAN_ENUM,\n  hasFn: DEFAULT_BOOLEAN_ENUM,\n  timeUnit: [undefined, TimeUnit.YEAR, TimeUnit.MONTH, TimeUnit.MINUTES, TimeUnit.SECONDS],\n\n  field: [undefined], // This is not used as field should be read from schema\n  type: [Type.NOMINAL, Type.ORDINAL, Type.QUANTITATIVE, Type.TEMPORAL],\n\n  sort: ['ascending', 'descending'],\n  stack: ['zero', 'normalize', 'center', null],\n  value: [undefined],\n\n  format: [undefined],\n  scale: [true],\n  axis: DEFAULT_BOOLEAN_ENUM,\n  legend: DEFAULT_BOOLEAN_ENUM,\n\n  binProps: DEFAULT_BIN_PROPS_ENUM,\n  sortProps: DEFAULT_SORT_PROPS,\n  scaleProps: DEFAULT_SCALE_PROPS_ENUM,\n  axisProps: DEFAULT_AXIS_PROPS_ENUM,\n  legendProps: DEFAULT_LEGEND_PROPS_ENUM\n};\n\n\n// TODO: rename this to getDefaultEnum\nexport function getDefaultEnumValues(prop: Property, schema: Schema, opt: QueryConfig): any[] {\n  if (prop === 'field' || (isEncodingNestedProp(prop) && prop.parent === 'sort' && prop.child === 'field')) {\n    // For field, by default enumerate all fields\n    return schema.fieldNames();\n  }\n\n  let val;\n  if (isEncodingNestedProp(prop)) {\n    val = opt.enum[prop.parent + 'Props'][prop.child];\n  } else {\n    val = opt.enum[prop];\n  }\n\n  if (val !== undefined) {\n    return val;\n  }\n\n  /* istanbul ignore next */\n  throw new Error('No default enumValues for ' + JSON.stringify(prop));\n}\n","import {isArray} from 'datalib/src/util';\n\nexport {cmp, keys, duplicate, extend, isObject, isBoolean, toMap} from 'datalib/src/util';\n\nexport {isArray};\n\nexport interface Dict<T> {\n  [key: string]: T;\n}\n\nexport function contains(array: any[], item: any) {\n  return array.indexOf(item) !== -1;\n};\n\nexport function every<T>(arr: T[], f: (item: T, key: number) => boolean) {\n  for (let i = 0; i < arr.length; i++) {\n    if (!f(arr[i], i)) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport function forEach(obj: any, f: (item: any, key: number|string, i: number)=>void, thisArg?: any) {\n  if (obj.forEach) {\n    obj.forEach.call(thisArg, f);\n  } else {\n    for (let k in obj) {\n      f.call(thisArg, obj[k], k, obj);\n    }\n  }\n};\n\nexport function some<T>(arr: T[], f: (item: T, key: number|string, i: number)=>boolean) {\n  let i = 0, k;\n  for (k in arr) {\n    if (f(arr[k], k, i++)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport function nestedMap(array: any[], f: (item: any)=>any): any[] {\n  return array.map((a) => {\n    if (isArray(a)) {\n      return nestedMap(a, f);\n    }\n    return f(a);\n  });\n}\n\n/** Returns the array without the elements in item */\nexport function without<T>(array: Array<T>, excludedItems: Array<T>) {\n  return array.filter(function(item) {\n    return !contains(excludedItems, item);\n  });\n}\n\nexport type Diff<T extends string, U extends string> = ({ [P in T]: P } & { [P in U]: never } & { [x: string]: never })[T];\n","var u = module.exports;\n\n// utility functions\n\nvar FNAME = '__name__';\n\nu.namedfunc = function(name, f) { return (f[FNAME] = name, f); };\n\nu.name = function(f) { return f==null ? null : f[FNAME]; };\n\nu.identity = function(x) { return x; };\n\nu.true = u.namedfunc('true', function() { return true; });\n\nu.false = u.namedfunc('false', function() { return false; });\n\nu.duplicate = function(obj) {\n  return JSON.parse(JSON.stringify(obj));\n};\n\nu.equal = function(a, b) {\n  return JSON.stringify(a) === JSON.stringify(b);\n};\n\nu.extend = function(obj) {\n  for (var x, name, i=1, len=arguments.length; i<len; ++i) {\n    x = arguments[i];\n    for (name in x) { obj[name] = x[name]; }\n  }\n  return obj;\n};\n\nu.length = function(x) {\n  return x != null && x.length != null ? x.length : null;\n};\n\nu.keys = function(x) {\n  var keys = [], k;\n  for (k in x) keys.push(k);\n  return keys;\n};\n\nu.vals = function(x) {\n  var vals = [], k;\n  for (k in x) vals.push(x[k]);\n  return vals;\n};\n\nu.toMap = function(list, f) {\n  return (f = u.$(f)) ?\n    list.reduce(function(obj, x) { return (obj[f(x)] = 1, obj); }, {}) :\n    list.reduce(function(obj, x) { return (obj[x] = 1, obj); }, {});\n};\n\nu.keystr = function(values) {\n  // use to ensure consistent key generation across modules\n  var n = values.length;\n  if (!n) return '';\n  for (var s=String(values[0]), i=1; i<n; ++i) {\n    s += '|' + String(values[i]);\n  }\n  return s;\n};\n\n// type checking functions\n\nvar toString = Object.prototype.toString;\n\nu.isObject = function(obj) {\n  return obj === Object(obj);\n};\n\nu.isFunction = function(obj) {\n  return toString.call(obj) === '[object Function]';\n};\n\nu.isString = function(obj) {\n  return typeof value === 'string' || toString.call(obj) === '[object String]';\n};\n\nu.isArray = Array.isArray || function(obj) {\n  return toString.call(obj) === '[object Array]';\n};\n\nu.isNumber = function(obj) {\n  return typeof obj === 'number' || toString.call(obj) === '[object Number]';\n};\n\nu.isBoolean = function(obj) {\n  return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n};\n\nu.isDate = function(obj) {\n  return toString.call(obj) === '[object Date]';\n};\n\nu.isValid = function(obj) {\n  return obj != null && obj === obj;\n};\n\nu.isBuffer = (typeof Buffer === 'function' && Buffer.isBuffer) || u.false;\n\n// type coercion functions\n\nu.number = function(s) {\n  return s == null || s === '' ? null : +s;\n};\n\nu.boolean = function(s) {\n  return s == null || s === '' ? null : s==='false' ? false : !!s;\n};\n\n// parse a date with optional d3.time-format format\nu.date = function(s, format) {\n  var d = format ? format : Date;\n  return s == null || s === '' ? null : d.parse(s);\n};\n\nu.array = function(x) {\n  return x != null ? (u.isArray(x) ? x : [x]) : [];\n};\n\nu.str = function(x) {\n  return u.isArray(x) ? '[' + x.map(u.str) + ']'\n    : u.isObject(x) || u.isString(x) ?\n      // Output valid JSON and JS source strings.\n      // See http://timelessrepo.com/json-isnt-a-javascript-subset\n      JSON.stringify(x).replace('\\u2028','\\\\u2028').replace('\\u2029', '\\\\u2029')\n    : x;\n};\n\n// data access functions\n\nvar field_re = /\\[(.*?)\\]|[^.\\[]+/g;\n\nu.field = function(f) {\n  return String(f).match(field_re).map(function(d) {\n    return d[0] !== '[' ? d :\n      d[1] !== \"'\" && d[1] !== '\"' ? d.slice(1, -1) :\n      d.slice(2, -2).replace(/\\\\([\"'])/g, '$1');\n  });\n};\n\nu.accessor = function(f) {\n  /* jshint evil: true */\n  return f==null || u.isFunction(f) ? f :\n    u.namedfunc(f, Function('x', 'return x[' + u.field(f).map(u.str).join('][') + '];'));\n};\n\n// short-cut for accessor\nu.$ = u.accessor;\n\nu.mutator = function(f) {\n  var s;\n  return u.isString(f) && (s=u.field(f)).length > 1 ?\n    function(x, v) {\n      for (var i=0; i<s.length-1; ++i) x = x[s[i]];\n      x[s[i]] = v;\n    } :\n    function(x, v) { x[f] = v; };\n};\n\n\nu.$func = function(name, op) {\n  return function(f) {\n    f = u.$(f) || u.identity;\n    var n = name + (u.name(f) ? '_'+u.name(f) : '');\n    return u.namedfunc(n, function(d) { return op(f(d)); });\n  };\n};\n\nu.$valid  = u.$func('valid', u.isValid);\nu.$length = u.$func('length', u.length);\n\nu.$in = function(f, values) {\n  f = u.$(f);\n  var map = u.isArray(values) ? u.toMap(values) : values;\n  return function(d) { return !!map[f(d)]; };\n};\n\n// comparison / sorting functions\n\nu.comparator = function(sort) {\n  var sign = [];\n  if (sort === undefined) sort = [];\n  sort = u.array(sort).map(function(f) {\n    var s = 1;\n    if      (f[0] === '-') { s = -1; f = f.slice(1); }\n    else if (f[0] === '+') { s = +1; f = f.slice(1); }\n    sign.push(s);\n    return u.accessor(f);\n  });\n  return function(a, b) {\n    var i, n, f, c;\n    for (i=0, n=sort.length; i<n; ++i) {\n      f = sort[i];\n      c = u.cmp(f(a), f(b));\n      if (c) return c * sign[i];\n    }\n    return 0;\n  };\n};\n\nu.cmp = function(a, b) {\n  return (a < b || a == null) && b != null ? -1 :\n    (a > b || b == null) && a != null ? 1 :\n    ((b = b instanceof Date ? +b : b),\n     (a = a instanceof Date ? +a : a)) !== a && b === b ? -1 :\n    b !== b && a === a ? 1 : 0;\n};\n\nu.numcmp = function(a, b) { return a - b; };\n\nu.stablesort = function(array, sortBy, keyFn) {\n  var indices = array.reduce(function(idx, v, i) {\n    return (idx[keyFn(v)] = i, idx);\n  }, {});\n\n  array.sort(function(a, b) {\n    var sa = sortBy(a),\n        sb = sortBy(b);\n    return sa < sb ? -1 : sa > sb ? 1\n         : (indices[keyFn(a)] - indices[keyFn(b)]);\n  });\n\n  return array;\n};\n\n// permutes an array using a Knuth shuffle\nu.permute = function(a) {\n  var m = a.length,\n      swap,\n      i;\n\n  while (m) {\n    i = Math.floor(Math.random() * m--);\n    swap = a[m];\n    a[m] = a[i];\n    a[i] = swap;\n  }\n};\n\n// string functions\n\nu.pad = function(s, length, pos, padchar) {\n  padchar = padchar || \" \";\n  var d = length - s.length;\n  if (d <= 0) return s;\n  switch (pos) {\n    case 'left':\n      return strrep(d, padchar) + s;\n    case 'middle':\n    case 'center':\n      return strrep(Math.floor(d/2), padchar) +\n         s + strrep(Math.ceil(d/2), padchar);\n    default:\n      return s + strrep(d, padchar);\n  }\n};\n\nfunction strrep(n, str) {\n  var s = \"\", i;\n  for (i=0; i<n; ++i) s += str;\n  return s;\n}\n\nu.truncate = function(s, length, pos, word, ellipsis) {\n  var len = s.length;\n  if (len <= length) return s;\n  ellipsis = ellipsis !== undefined ? String(ellipsis) : '\\u2026';\n  var l = Math.max(0, length - ellipsis.length);\n\n  switch (pos) {\n    case 'left':\n      return ellipsis + (word ? truncateOnWord(s,l,1) : s.slice(len-l));\n    case 'middle':\n    case 'center':\n      var l1 = Math.ceil(l/2), l2 = Math.floor(l/2);\n      return (word ? truncateOnWord(s,l1) : s.slice(0,l1)) +\n        ellipsis + (word ? truncateOnWord(s,l2,1) : s.slice(len-l2));\n    default:\n      return (word ? truncateOnWord(s,l) : s.slice(0,l)) + ellipsis;\n  }\n};\n\nfunction truncateOnWord(s, len, rev) {\n  var cnt = 0, tok = s.split(truncate_word_re);\n  if (rev) {\n    s = (tok = tok.reverse())\n      .filter(function(w) { cnt += w.length; return cnt <= len; })\n      .reverse();\n  } else {\n    s = tok.filter(function(w) { cnt += w.length; return cnt <= len; });\n  }\n  return s.length ? s.join('').trim() : tok[0].slice(0, len);\n}\n\nvar truncate_word_re = /([\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u2028\\u2029\\u3000\\uFEFF])/;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return b64.length * 3 / 4 - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nimport {QueryConfig, DEFAULT_QUERY_CONFIG} from './config';\nimport {getEnumerator} from './enumerator';\nimport {SpecQueryModel} from './model';\nimport {fromKey} from'./property';\nimport {SpecQuery} from './query/spec';\nimport {Schema} from './schema';\nimport {stylize} from './stylize';\n\nexport function generate(specQ: SpecQuery, schema: Schema, opt: QueryConfig = DEFAULT_QUERY_CONFIG) {\n  // 1. Build a SpecQueryModel, which also contains wildcardIndex\n  const specM = SpecQueryModel.build(specQ, schema, opt);\n  const wildcardIndex = specM.wildcardIndex;\n\n  // 2. Enumerate each of the properties based on propPrecedence.\n\n  let answerSet = [specM]; // Initialize Answer Set with only the input spec query.\n  opt.propertyPrecedence.forEach((propKey) => {\n    const prop = fromKey(propKey);\n    // If the original specQuery contains wildcard for this prop\n    if (wildcardIndex.hasProperty(prop)) {\n      // update answerset\n      const enumerator = getEnumerator(prop);\n      const reducer = enumerator(wildcardIndex, schema, opt);\n      answerSet = answerSet.reduce(reducer, []);\n    }\n  });\n\n  if (opt.stylize) {\n    if ((opt.nominalColorScaleForHighCardinality !== null) ||\n        (opt.smallRangeStepForHighCardinalityOrFacet !== null) ||\n        (opt.xAxisOnTopForHighYCardinalityWithoutColumn !== null)) {\n      return stylize(answerSet, schema, opt);\n    }\n  }\n\n  return answerSet;\n}\n","import {Mark} from 'vega-lite/build/src/mark';\n\nimport {QueryConfig} from './config';\nimport {checkEncoding} from './constraint/encoding';\nimport {checkSpec} from './constraint/spec';\nimport {WildcardIndex} from './wildcardindex';\nimport {SpecQueryModel} from './model';\nimport {Property, ENCODING_TOPLEVEL_PROPS, ENCODING_NESTED_PROPS} from './property';\nimport {PropIndex} from './propindex';\nimport {Wildcard} from './wildcard';\nimport {Schema} from './schema';\nimport {isValueQuery, isDisabledAutoCountQuery} from './query/encoding';\n\nconst ENUMERATOR_INDEX = new PropIndex<EnumeratorFactory>();\n\nexport interface Enumerator {\n  (answerSets: SpecQueryModel[], specM: SpecQueryModel): SpecQueryModel[];\n}\n\nexport function getEnumerator(prop: Property) {\n  return ENUMERATOR_INDEX.get(prop);\n}\n\nexport interface EnumeratorFactory {\n  (wildcardIndex: WildcardIndex, schema: Schema, opt: QueryConfig): Enumerator;\n}\n\nENUMERATOR_INDEX.set('mark', (wildcardIndex: WildcardIndex, schema: Schema, opt: QueryConfig): Enumerator => {\n  return (answerSet, specM: SpecQueryModel) => {\n    const markWildcard = specM.getMark() as Wildcard<Mark>;\n\n    // enumerate the value\n    markWildcard.enum.forEach((mark) => {\n      specM.setMark(mark);\n      // Check spec constraint\n      const violatedSpecConstraint = checkSpec('mark', wildcardIndex.mark, specM, schema, opt);\n      if (!violatedSpecConstraint) {\n        // emit\n        answerSet.push(specM.duplicate());\n      }\n    });\n\n    // Reset to avoid side effect\n    specM.resetMark();\n\n    return answerSet;\n  };\n});\n\nENCODING_TOPLEVEL_PROPS.forEach((prop) => {\n  ENUMERATOR_INDEX.set(prop, EncodingPropertyGeneratorFactory(prop));\n});\n\nENCODING_NESTED_PROPS.forEach((nestedProp) => {\n  ENUMERATOR_INDEX.set(nestedProp, EncodingPropertyGeneratorFactory(nestedProp));\n});\n\n/**\n * @param prop property type.\n * @return an answer set reducer factory for the given prop.\n */\nexport function EncodingPropertyGeneratorFactory(prop: Property): EnumeratorFactory {\n  /**\n   * @return as reducer that takes a specQueryModel as input and output an answer set array.\n   */\n  return (wildcardIndex: WildcardIndex, schema: Schema, opt: QueryConfig): Enumerator => {\n\n    return (answerSet: SpecQueryModel[], specM: SpecQueryModel) => {\n      // index of encoding mappings that require enumeration\n      const indices = wildcardIndex.encodingIndicesByProperty.get(prop);\n\n      function enumerate(jobIndex: number) {\n        if (jobIndex === indices.length) {\n          // emit and terminate\n          answerSet.push(specM.duplicate());\n          return;\n        }\n        const index = indices[jobIndex];\n        const wildcard: Wildcard<any> = wildcardIndex.encodings[index].get(prop);\n        const encQ = specM.getEncodingQueryByIndex(index);\n        const propWildcard = specM.getEncodingProperty(index, prop);\n\n        if (isValueQuery(encQ) || (\n              // TODO: encQ.exclude\n              // If this encoding query is an excluded autoCount, there is no point enumerating other properties\n              // for this encoding query because they will be excluded anyway.\n              // Thus, we can just move on to the next encoding to enumerate.\n              (isDisabledAutoCountQuery(encQ)) ||\n              // nested encoding property might have its parent set to false\n              // therefore, we no longer have to enumerate them\n              !propWildcard\n            )\n          ) { // TODO: encQ.excluded\n          enumerate(jobIndex + 1);\n        } else {\n          wildcard.enum.forEach((propVal) => {\n            if (propVal === null) {\n              // our duplicate() method use JSON.stringify, parse and thus can accidentally\n              // convert undefined in an array into null\n              propVal = undefined;\n            }\n            specM.setEncodingProperty(index, prop, propVal, wildcard);\n\n            // Check encoding constraint\n            const violatedEncodingConstraint = checkEncoding(prop, wildcard, index, specM, schema, opt);\n            if (violatedEncodingConstraint) {\n              return; // do not keep searching\n            }\n            // Check spec constraint\n            const violatedSpecConstraint = checkSpec(prop, wildcard, specM, schema, opt);\n            if (violatedSpecConstraint) {\n              return; // do not keep searching\n            }\n            // If qualify all of the constraints, keep enumerating\n            enumerate(jobIndex + 1);\n          });\n\n          // Reset to avoid side effect\n          specM.resetEncodingProperty(index, prop, wildcard);\n        }\n      }\n\n      // start enumerating from 0\n      enumerate(0);\n\n      return answerSet;\n    };\n  };\n}\n","import {QueryConfig} from '../config';\nimport {SpecQueryModel} from '../model';\nimport {Property} from '../property';\nimport {Wildcard} from '../wildcard';\nimport {Schema} from '../schema';\n\nimport {isValueQuery} from '../query/encoding';\nimport {FIELD_CONSTRAINTS_BY_PROPERTY} from './field';\nimport {VALUE_CONSTRAINTS_BY_PROPERTY} from './value';\n\n/**\n * Check all encoding constraints for a particular property and index tuple\n */\nexport function checkEncoding(prop: Property, wildcard: Wildcard<any>, index: number,\n  specM: SpecQueryModel, schema: Schema, opt: QueryConfig): string {\n\n  // Check encoding constraint\n  const encodingConstraints = FIELD_CONSTRAINTS_BY_PROPERTY.get(prop) || [];\n  const encQ = specM.getEncodingQueryByIndex(index);\n\n  for (const c of encodingConstraints) {\n    // Check if the constraint is enabled\n    if (c.strict() || !!opt[c.name()]) {\n      // For strict constraint, or enabled non-strict, check the constraints\n\n      const satisfy = c.satisfy(encQ, schema, specM.wildcardIndex.encodings[index], opt);\n      if (!satisfy) {\n        let violatedConstraint = '(enc) ' + c.name();\n        /* istanbul ignore if */\n        if (opt.verbose) {\n          console.log(violatedConstraint + ' failed with ' + specM.toShorthand() + ' for ' + wildcard.name);\n        }\n        return violatedConstraint;\n      }\n    }\n  }\n\n  const valueContraints = VALUE_CONSTRAINTS_BY_PROPERTY.get(prop) || [];\n\n  for (const c of valueContraints) {\n    // Check if the constraint is enabled\n    if ((c.strict() || !!opt[c.name()]) && isValueQuery(encQ)) {\n      // For strict constraint, or enabled non-strict, check the constraints\n      const satisfy = c.satisfy(encQ, schema, specM.wildcardIndex.encodings[index], opt);\n      if (!satisfy) {\n        let violatedConstraint = '(enc) ' + c.name();\n        /* istanbul ignore if */\n        if (opt.verbose) {\n          console.log(violatedConstraint + ' failed with ' + specM.toShorthand() + ' for ' + wildcard.name);\n        }\n        return violatedConstraint;\n      }\n    }\n  }\n  return null;\n}\n","import {Axis} from 'vega-lite/build/src/axis';\nimport {BinParams} from 'vega-lite/build/src/bin';\nimport {Channel} from 'vega-lite/build/src/channel';\nimport * as vlFieldDef from 'vega-lite/build/src/fielddef';\nimport {FieldDef, ValueDef} from 'vega-lite/build/src/fielddef';\nimport {Mark} from 'vega-lite/build/src/mark';\nimport {Scale} from 'vega-lite/build/src/scale';\nimport {StackOffset} from 'vega-lite/build/src/stack';\nimport {Legend} from 'vega-lite/build/src/legend';\nimport {SortOrder, SortField} from 'vega-lite/build/src/sort';\nimport {TimeUnit} from 'vega-lite/build/src/timeunit';\nimport {Type as VLType, Type} from 'vega-lite/build/src/type';\nimport {ExpandedType} from './expandedtype';\nimport {scaleType as compileScaleType} from 'vega-lite/build/src/compile/scale/type';\nimport {Wildcard, isWildcard, SHORT_WILDCARD, WildcardProperty} from '../wildcard';\nimport {Schema} from '../schema';\nimport {Encoding} from 'vega-lite/build/src/encoding';\nimport {Property, isEncodingNestedParent, FlatProp} from '../property';\nimport {PROPERTY_SUPPORTED_CHANNELS} from './shorthand';\nimport {isObject} from 'datalib/src/util';\nimport {AggregateOp} from 'vega';\n\nexport type EncodingQuery = FieldQuery | ValueQuery | AutoCountQuery;\n\nexport interface EncodingQueryBase {\n  channel: WildcardProperty<Channel>;\n\n  description?: string;\n}\n\nexport interface ValueQuery extends EncodingQueryBase {\n  value: WildcardProperty<boolean | number | string>;\n}\n\nexport function isValueQuery(encQ: EncodingQuery): encQ is ValueQuery {\n  return encQ !== null && encQ !== undefined && encQ['value'];\n}\n\nexport function isFieldQuery(encQ: EncodingQuery): encQ is FieldQuery {\n  return encQ !== null && encQ !== undefined && (encQ['field'] || encQ['aggregate'] === 'count');\n}\n\nexport function isAutoCountQuery(encQ: EncodingQuery): encQ is AutoCountQuery {\n  return encQ !== null && encQ !== undefined && 'autoCount' in encQ;\n}\n\nexport function isDisabledAutoCountQuery(encQ: EncodingQuery) {\n  return isAutoCountQuery(encQ) && encQ.autoCount === false;\n}\n\nexport function isEnabledAutoCountQuery(encQ: EncodingQuery) {\n  return isAutoCountQuery(encQ) && encQ.autoCount === true;\n}\n\n/**\n * A special encoding query that gets added internally if the `config.autoCount` flag is on. See SpecQueryModel.build for its generation.\n *\n * __Note:__ this type of query should not be specified by users.\n */\nexport interface AutoCountQuery extends EncodingQueryBase {\n  /**\n   * A count function that gets added internally if the config.autoCount flag in on.\n   * This allows us to add one extra encoding mapping if needed when the query produces\n   * plot that only have discrete fields.\n   * In such cases, adding count make the output plots way more meaningful.\n   */\n  autoCount: WildcardProperty<boolean>;\n  type: 'quantitative';\n}\n\nexport interface FieldQueryBase {\n  // FieldDef\n  aggregate?: WildcardProperty<AggregateOp>;\n  timeUnit?: WildcardProperty<TimeUnit>;\n\n  /**\n   * Special flag for enforcing that the field should have a fuction (one of timeUnit, bin, or aggregate).\n   *\n   * For example, if you enumerate both bin and aggregate then you need `undefined` for both.\n   *\n   * ```\n   * {aggregate: {enum: [undefined, 'mean', 'sum']}, bin: {enum: [false, true]}}\n   * ```\n   *\n   * This would enumerate a fieldDef with \"mean\", \"sum\", bin:true, and no function at all.\n   * If you want only \"mean\", \"sum\", bin:true, then use `hasFn: true`\n   *\n   * ```\n   * {aggregate: {enum: [undefined, 'mean', 'sum']}, bin: {enum: [false, true]}, hasFn: true}\n   * ```\n   */\n  hasFn?: boolean;\n\n  bin?: boolean | BinQuery | SHORT_WILDCARD;\n  scale?: boolean | ScaleQuery | SHORT_WILDCARD;\n\n  sort?: SortOrder | SortField<string>;\n  stack?: StackOffset | SHORT_WILDCARD;\n\n  field?: WildcardProperty<string>;\n  type?: WildcardProperty<ExpandedType>;\n\n  axis?: boolean | AxisQuery | SHORT_WILDCARD;\n  legend?: boolean | LegendQuery | SHORT_WILDCARD;\n\n  format?: string;\n}\n\nexport type FieldQuery = EncodingQueryBase & FieldQueryBase;\n\n// Using Mapped Type from TS2.1 to declare query for an object without nested property\n// https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-1.html#mapped-types\nexport type FlatQuery<T> = {\n  [P in keyof T]: WildcardProperty<T[P]>\n};\n\nexport type FlatQueryWithEnableFlag<T> = (Wildcard<boolean> | {}) & FlatQuery<T>;\n\nexport type BinQuery = FlatQueryWithEnableFlag<BinParams>;\nexport type ScaleQuery =  FlatQueryWithEnableFlag<Scale>;\nexport type AxisQuery =  FlatQueryWithEnableFlag<Axis>;\nexport type LegendQuery = FlatQueryWithEnableFlag<Legend>;\n\nconst DEFAULT_PROPS = [Property.AGGREGATE, Property.BIN, Property.TIMEUNIT, Property.FIELD, Property.TYPE, Property.SCALE, Property.SORT, Property.AXIS, Property.LEGEND, Property.STACK, Property.FORMAT];\n\nexport interface ConversionParams {\n  schema?: Schema;\n  props?: FlatProp[];\n  wildcardMode?: 'skip' | 'null';\n}\n\nexport function toEncoding(encQs: EncodingQuery[], params: ConversionParams): Encoding<string> {\n  const {wildcardMode = 'skip'} = params;\n  let encoding: Encoding<string> = {};\n\n  for (const encQ of encQs) {\n    if (isDisabledAutoCountQuery(encQ)) {\n      continue; // Do not include this in the output.\n    }\n\n    const {channel} = encQ;\n\n    // if channel is a wildcard, return null\n    if (isWildcard(channel)) {\n      throw new Error('Cannot convert wildcard channel to a fixed channel');\n    }\n    const channelDef = isValueQuery(encQ) ? toValueDef(encQ) : toFieldDef(encQ, params);\n\n    if (channelDef === null) {\n      if (params.wildcardMode === 'null') {\n        // contains invalid property (e.g., wildcard, thus cannot return a proper spec.)\n        return null;\n      }\n      continue;\n    }\n    // Otherwise, we can set the channelDef\n    encoding[channel] = channelDef;\n  }\n  return encoding;\n}\n\nexport function toValueDef(valueQ: ValueQuery): ValueDef {\n  const {value} = valueQ;\n  if (isWildcard(value)) {\n    return null;\n  }\n  return {value};\n}\n\nexport function toFieldDef(\n  encQ: FieldQuery | AutoCountQuery,\n  params: ConversionParams = {}\n): FieldDef<string> {\n\n  const {props = DEFAULT_PROPS, schema, wildcardMode = 'skip'} = params;\n\n  if (isFieldQuery(encQ)) {\n    const fieldDef = {} as FieldDef<string>;\n    for (const prop of props) {\n      let encodingProperty = encQ[prop];\n      if (isWildcard(encodingProperty)) {\n        if (wildcardMode === 'skip') continue;\n        return null;\n      }\n\n      if (encodingProperty !== undefined) {\n        // if the channel supports this prop\n        const isSupportedByChannel = (!PROPERTY_SUPPORTED_CHANNELS[prop] || PROPERTY_SUPPORTED_CHANNELS[prop][encQ.channel as Channel]);\n        if (!isSupportedByChannel) {\n          continue;\n        }\n\n        if (isEncodingNestedParent(prop) && isObject(encodingProperty)) {\n          encodingProperty = {...encodingProperty}; // Make a shallow copy first\n          for (const childProp in encodingProperty) {\n            // ensure nested properties are not wildcard before assigning to field def\n            if (isWildcard(encodingProperty[childProp])) {\n              if (wildcardMode === 'null') {\n                return null;\n              }\n              delete encodingProperty[childProp]; // skip\n            }\n          }\n        }\n\n        if (prop === 'bin' && encodingProperty === false) {\n          continue;\n        } else if (prop === 'type' && encodingProperty === 'key') {\n          fieldDef.type = 'nominal';\n        } else {\n          fieldDef[prop] = encodingProperty;\n        }\n      }\n\n      if (prop === Property.SCALE && schema && encQ.type === Type.ORDINAL) {\n        const scale = encQ.scale;\n        const {ordinalDomain} = schema.fieldSchema(encQ.field as string);\n\n        if (scale !== null && ordinalDomain) {\n          fieldDef[Property.SCALE] = {\n            domain: ordinalDomain,\n            // explicitly specfied domain property should override ordinalDomain\n            ...(isObject(scale) ? scale : {})\n          };\n        }\n      }\n    }\n    return fieldDef;\n  } else {\n    if (encQ.autoCount === false) {\n      throw new Error(`Cannot convert {autoCount: false} into a field def`);\n    } else {\n      return {\n        aggregate: 'count',\n        field: '*',\n        type: 'quantitative'\n      };\n    }\n  }\n}\n\n/**\n * Is a field query continuous field?\n * This method is applicable only for fieldQuery without wildcard\n */\nexport function isContinuous(encQ: EncodingQuery) {\n  if (isFieldQuery(encQ)) {\n    return vlFieldDef.isContinuous(toFieldDef(encQ, {props: ['bin', 'timeUnit', 'field', 'type']}));\n  }\n  return isAutoCountQuery(encQ);\n}\n\nexport function isMeasure(encQ: EncodingQuery) {\n  if (isFieldQuery(encQ)) {\n    return !isDimension(encQ) && encQ.type !== 'temporal';\n  }\n  return isAutoCountQuery(encQ);\n}\n\n/**\n * Is a field query discrete field?\n * This method is applicable only for fieldQuery without wildcard\n */\nexport function isDimension(encQ: EncodingQuery) {\n  if (isFieldQuery(encQ)) {\n    const fieldDef = toFieldDef(encQ, {props: ['bin', 'timeUnit', 'type']});\n    return vlFieldDef.isDiscrete(fieldDef) || !!fieldDef.timeUnit;\n  }\n  return false;\n}\n\n/**\n *  Returns the true scale type of an encoding.\n *  @returns {ScaleType} If the scale type was not specified, it is inferred from the encoding's Type.\n *  @returns {undefined} If the scale type was not specified and Type (or TimeUnit if applicable) is a Wildcard, there is no clear scale type\n */\n\nexport function scaleType(fieldQ: FieldQuery) {\n  const scale: ScaleQuery = fieldQ.scale === true || fieldQ.scale === SHORT_WILDCARD ? {} : fieldQ.scale || {};\n\n  const {type, channel, timeUnit, bin} = fieldQ;\n\n  // HACK: All of markType, and scaleConfig only affect\n  // sub-type of ordinal to quantitative scales (point or band)\n  // Currently, most of scaleType usage in CompassQL doesn't care about this subtle difference.\n  // Thus, instead of making this method requiring the global mark,\n  // we will just call it with mark = undefined .\n  // Thus, currently, we will always get a point scale unless a CompassQuery specifies band.\n  const markType: Mark = undefined;\n  const scaleConfig = {};\n\n  if (isWildcard(scale.type) || isWildcard(type) || isWildcard(channel) || isWildcard(bin)) {\n    return undefined;\n  }\n\n  // If scale type is specified, then use scale.type\n  if (scale.type) {\n    return scale.type;\n  }\n\n  // if type is fixed and it's not temporal, we can ignore time unit.\n  if (type === 'temporal' && isWildcard(timeUnit)) {\n    return undefined;\n  }\n\n  // if type is fixed and it's not quantitative, we can ignore bin\n  if (type === 'quantitative' && isWildcard(bin)) {\n    return undefined;\n  }\n\n  let vegaLiteType: VLType = type === ExpandedType.KEY ? 'nominal': type;\n\n  const fieldDef = {type: vegaLiteType, timeUnit: timeUnit as TimeUnit, bin: bin as BinParams};\n  return compileScaleType(scale.type, channel, fieldDef, markType, scaleConfig);\n}\n","import {Type} from 'vega-lite/build/src/type';\nexport namespace ExpandedType {\n  export const QUANTITATIVE = Type.QUANTITATIVE;\n  export const ORDINAL = Type.ORDINAL;\n  export const TEMPORAL = Type.TEMPORAL;\n  export const NOMINAL = Type.NOMINAL;\n  export const KEY: 'key' = 'key';\n}\n\nexport type ExpandedType = Type | typeof ExpandedType.KEY;\n\nexport function isDiscrete(fieldType: any) {\n  return fieldType === Type.ORDINAL || fieldType === Type.NOMINAL || fieldType === ExpandedType.KEY;\n}\n","import {Channel, isColorChannel, isScaleChannel, rangeType} from '../../channel';\nimport {FieldDef} from '../../fielddef';\nimport * as log from '../../log';\nimport {Mark} from '../../mark';\nimport {channelSupportScaleType, ScaleConfig, ScaleType} from '../../scale';\nimport {hasDiscreteDomain} from '../../scale';\nimport {Type} from '../../type';\nimport * as util from '../../util';\nimport {contains} from '../../util';\n\n\nexport type RangeType = 'continuous' | 'discrete' | 'flexible' | undefined;\n\n/**\n * Determine if there is a specified scale type and if it is appropriate,\n * or determine default type if type is unspecified or inappropriate.\n */\n// NOTE: CompassQL uses this method.\nexport function scaleType(\n  specifiedType: ScaleType, channel: Channel, fieldDef: FieldDef<string>,\n  mark: Mark, scaleConfig: ScaleConfig\n): ScaleType {\n\n  const defaultScaleType = defaultType(channel, fieldDef, mark, scaleConfig);\n\n  if (!isScaleChannel(channel)) {\n    // There is no scale for these channels\n    return null;\n  }\n  if (specifiedType !== undefined) {\n    // Check if explicitly specified scale type is supported by the channel\n    if (!channelSupportScaleType(channel, specifiedType)) {\n      log.warn(log.message.scaleTypeNotWorkWithChannel(channel, specifiedType, defaultScaleType));\n      return defaultScaleType;\n    }\n\n    // Check if explicitly specified scale type is supported by the data type\n    if (!fieldDefMatchScaleType(specifiedType, fieldDef)) {\n      log.warn(log.message.scaleTypeNotWorkWithFieldDef(specifiedType, defaultScaleType));\n      return defaultScaleType;\n    }\n\n    return specifiedType;\n  }\n\n  return defaultScaleType;\n}\n\n/**\n * Determine appropriate default scale type.\n */\n// NOTE: Voyager uses this method.\nfunction defaultType(\n  channel: Channel, fieldDef: FieldDef<string>, mark: Mark, scaleConfig: ScaleConfig\n): ScaleType {\n  switch (fieldDef.type) {\n    case 'nominal':\n    case 'ordinal':\n      if (isColorChannel(channel)|| rangeType(channel) === 'discrete') {\n        if (channel === 'shape' && fieldDef.type === 'ordinal') {\n          log.warn(log.message.discreteChannelCannotEncode(channel, 'ordinal'));\n        }\n        return 'ordinal';\n      }\n\n      if (util.contains(['x', 'y'], channel)) {\n        if (util.contains(['rect', 'bar', 'rule'], mark)) {\n          // The rect/bar mark should fit into a band.\n          // For rule, using band scale to make rule align with axis ticks better https://github.com/vega/vega-lite/issues/3429\n          return 'band';\n        }\n        if (mark === 'bar') {\n          return 'band';\n        }\n      }\n      // Otherwise, use ordinal point scale so we can easily get center positions of the marks.\n      return 'point';\n\n    case 'temporal':\n      if (isColorChannel(channel)) {\n        return 'sequential';\n      } else if (rangeType(channel) === 'discrete') {\n        log.warn(log.message.discreteChannelCannotEncode(channel, 'temporal'));\n        // TODO: consider using quantize (equivalent to binning) once we have it\n        return 'ordinal';\n      }\n      return 'time';\n\n    case 'quantitative':\n      if (isColorChannel(channel)) {\n        if (fieldDef.bin) {\n          return 'bin-ordinal';\n        }\n        // Use `sequential` as the default color scale for continuous data\n        // since it supports both array range and scheme range.\n        return 'sequential';\n      } else if (rangeType(channel) === 'discrete') {\n        log.warn(log.message.discreteChannelCannotEncode(channel, 'quantitative'));\n        // TODO: consider using quantize (equivalent to binning) once we have it\n        return 'ordinal';\n      }\n\n      // x and y use a linear scale because selections don't work with bin scales.\n      // Binned scales apply discretization but pan/zoom apply transformations to a [min, max] extent domain.\n      if (fieldDef.bin && channel !== 'x' && channel !== 'y') {\n        return 'bin-linear';\n      }\n      return 'linear';\n\n    case 'latitude':\n    case 'longitude':\n    case 'geojson':\n      return undefined;\n  }\n\n  /* istanbul ignore next: should never reach this */\n  throw new Error(log.message.invalidFieldType(fieldDef.type));\n}\n\nexport function fieldDefMatchScaleType(specifiedType: ScaleType, fieldDef: FieldDef<string>):boolean {\n  const type: Type = fieldDef.type;\n  if (contains([Type.ORDINAL, Type.NOMINAL], type)) {\n    return specifiedType === undefined || hasDiscreteDomain(specifiedType);\n  } else if (type === Type.TEMPORAL) {\n    return contains([ScaleType.TIME, ScaleType.UTC, ScaleType.SEQUENTIAL, undefined], specifiedType);\n  } else if (type === Type.QUANTITATIVE) {\n    if (fieldDef.bin) {\n      return contains([ScaleType.BIN_LINEAR, ScaleType.BIN_ORDINAL, ScaleType.LINEAR], specifiedType);\n    }\n    return contains([ScaleType.LOG, ScaleType.POW, ScaleType.SQRT, ScaleType.QUANTILE, ScaleType.QUANTIZE, ScaleType.LINEAR, ScaleType.SEQUENTIAL, undefined], specifiedType);\n  }\n\n  return true;\n}\n","import {isAggregateOp} from 'vega-lite/build/src/aggregate';\nimport {Channel, isChannel} from 'vega-lite/build/src/channel';\nimport {Mark} from 'vega-lite/build/src/mark';\nimport {FacetedCompositeUnitSpec} from 'vega-lite/build/src/spec';\nimport {isTimeUnit} from 'vega-lite/build/src/timeunit';\nimport {Type, getFullName} from 'vega-lite/build/src/type';\nimport {StackProperties} from 'vega-lite/build/src/stack';\nimport {isString} from 'datalib/src/util';\nimport {EncodingQuery, isFieldQuery, FieldQuery, isValueQuery, isDisabledAutoCountQuery, isEnabledAutoCountQuery, isAutoCountQuery, FieldQueryBase} from './encoding';\nimport {SpecQuery, fromSpec, getVlStack} from './spec';\nimport {isWildcard, isShortWildcard, SHORT_WILDCARD} from '../wildcard';\nimport {getEncodingNestedProp, Property, isEncodingNestedParent, DEFAULT_PROP_PRECEDENCE, VIEW_PROPS, SORT_PROPS, EncodingNestedChildProp} from '../property';\nimport {PropIndex} from '../propindex';\nimport {Dict, keys, isArray, isBoolean} from '../util';\n\nexport type Replacer = (s: string) => string;\n\nexport function getReplacerIndex(replaceIndex: PropIndex<Dict<string>>): PropIndex<Replacer> {\n  return replaceIndex.map(r => getReplacer(r));\n}\n\nexport function getReplacer(replace: Dict<string>): Replacer {\n  return (s: string) => {\n    if (replace[s] !== undefined) {\n      return replace[s];\n    }\n    return s;\n  };\n}\n\nexport function value(v: any, replacer: Replacer): any {\n  if (isWildcard(v)) {\n    // Return the enum array if it's a full wildcard, or just return SHORT_WILDCARD for short ones.\n    if (!isShortWildcard(v) && v.enum) {\n      return SHORT_WILDCARD + JSON.stringify(v.enum);\n    } else {\n      return SHORT_WILDCARD;\n    }\n  }\n  if (replacer) {\n    return replacer(v);\n  }\n  return v;\n}\n\nexport function replace(v: any, replacer: Replacer): any {\n  if (replacer) {\n    return replacer(v);\n  }\n  return v;\n}\n\nexport const REPLACE_NONE = new PropIndex<Replacer>();\n\nexport const INCLUDE_ALL: PropIndex<boolean> =\n  // FIXME: remove manual TRANSFORM concat once we really support enumerating transform.\n  [].concat(\n    DEFAULT_PROP_PRECEDENCE,\n    SORT_PROPS,\n    [Property.TRANSFORM, Property.STACK],\n    VIEW_PROPS\n  )\n  .reduce((pi, prop: Property) => pi.set(prop, true), new PropIndex<boolean>());\n\n\nexport function vlSpec(vlspec: FacetedCompositeUnitSpec,\n    include: PropIndex<boolean> = INCLUDE_ALL,\n    replace: PropIndex<Replacer> = REPLACE_NONE) {\n  const specQ = fromSpec(vlspec);\n  return spec(specQ, include, replace);\n}\n\nexport const PROPERTY_SUPPORTED_CHANNELS = {\n  axis: {x: true, y: true, row: true, column: true},\n  legend: {color: true, opacity: true, size: true, shape: true},\n  scale: {x: true, y: true, color: true, opacity: true, row: true, column: true, size: true, shape: true},\n  sort: {x: true, y: true, path: true, order: true},\n  stack: {x: true, y: true},\n};\n\n/**\n * Returns a shorthand for a spec query\n * @param specQ a spec query\n * @param include Dict Set listing property types (key) to be included in the shorthand\n * @param replace Dictionary of replace function for values of a particular property type (key)\n */\nexport function spec(specQ: SpecQuery,\n    include: PropIndex<boolean> = INCLUDE_ALL,\n    replace: PropIndex<Replacer> = REPLACE_NONE\n    ): string {\n  const parts: string[] = [];\n\n  if (include.get(Property.MARK)) {\n    parts.push(value(specQ.mark, replace.get(Property.MARK)));\n  }\n\n  if (specQ.transform && specQ.transform.length > 0) {\n    parts.push('transform:' + JSON.stringify(specQ.transform));\n  }\n\n  let stack: StackProperties;\n  if (include.get(Property.STACK)) {\n    stack = getVlStack(specQ);\n  }\n\n  if (specQ.encodings) {\n    const encodings = specQ.encodings.reduce((encQs, encQ) => {\n        // Exclude encoding mapping with autoCount=false as they are basically disabled.\n        if (!isDisabledAutoCountQuery(encQ)) {\n          let str;\n          if (!!stack && encQ.channel === stack.fieldChannel) {\n            str = encoding({...encQ, stack: stack.offset}, include, replace);\n          } else {\n            str = encoding(encQ, include, replace);\n          }\n          if (str) { // only add if the shorthand isn't an empty string.\n            encQs.push(str);\n          }\n        }\n        return encQs;\n      }, [])\n      .sort() // sort at the end to ignore order\n      .join('|');\n\n    if (encodings) {\n      parts.push(encodings);\n    }\n  }\n\n  for (let viewProp of VIEW_PROPS) {\n    const propString = viewProp.toString();\n    if (include.get(viewProp) && !!specQ[propString]) {\n      const value = specQ[propString];\n      parts.push(`${propString}=${JSON.stringify(value)}`);\n    }\n  }\n\n  return parts.join('|');\n}\n\n\n/**\n * Returns a shorthand for an encoding query\n * @param encQ an encoding query\n * @param include Dict Set listing property types (key) to be included in the shorthand\n * @param replace Dictionary of replace function for values of a particular property type (key)\n */\nexport function encoding(encQ: EncodingQuery,\n    include: PropIndex<boolean> = INCLUDE_ALL,\n    replace: PropIndex<Replacer> = REPLACE_NONE\n    ): string {\n\n  const parts = [];\n  if (include.get(Property.CHANNEL)) {\n    parts.push(value(encQ.channel, replace.get(Property.CHANNEL)));\n  }\n\n  if (isFieldQuery(encQ)) {\n    const fieldDefStr = fieldDef(encQ, include, replace);\n\n    if (fieldDefStr) {\n      parts.push(fieldDefStr);\n    }\n  } else if (isValueQuery(encQ)) {\n    parts.push(encQ.value);\n  } else if (isAutoCountQuery(encQ)) {\n    parts.push('autocount()');\n  }\n\n  return parts.join(':');\n}\n\n/**\n * Returns a field definition shorthand for an encoding query\n * @param encQ an encoding query\n * @param include Dict Set listing property types (key) to be included in the shorthand\n * @param replace Dictionary of replace function for values of a particular property type (key)\n */\nexport function fieldDef(encQ: EncodingQuery,\n    include: PropIndex<boolean> = INCLUDE_ALL,\n    replacer: PropIndex<Replacer> = REPLACE_NONE): string {\n\n  if (include.get(Property.AGGREGATE) && isDisabledAutoCountQuery(encQ)) {\n    return '-';\n  }\n\n  const fn = func(encQ, include, replacer);\n  const props = fieldDefProps(encQ, include, replacer);\n\n  let fieldAndParams;\n  if (isFieldQuery(encQ)) {\n    // field\n    fieldAndParams = include.get('field') ? value(encQ.field, replacer.get('field')) : '...';\n    // type\n    if (include.get(Property.TYPE)) {\n      if (isWildcard(encQ.type)) {\n        fieldAndParams += ',' + value(encQ.type, replacer.get(Property.TYPE));\n      } else {\n        const typeShort = ((encQ.type || Type.QUANTITATIVE)+'').substr(0,1);\n        fieldAndParams += ',' + value(typeShort, replacer.get(Property.TYPE));\n      }\n    }\n    // encoding properties\n    fieldAndParams += props.map((p) => {\n      let val = p.value instanceof Array ? '[' + p.value + ']' : p.value;\n      return ',' + p.key + '=' + val;\n    }).join('');\n  } else if (isAutoCountQuery(encQ)) {\n    fieldAndParams = '*,q';\n  }\n\n  if (!fieldAndParams) {\n    return null;\n  }\n  if (fn) {\n    let fnPrefix = isString(fn) ? fn : SHORT_WILDCARD +\n      (keys(fn).length > 0 ? JSON.stringify(fn) : '');\n\n    return fnPrefix + '(' + fieldAndParams + ')';\n  }\n  return fieldAndParams;\n}\n\n\n/**\n * Return function part of\n */\nfunction func(fieldQ: FieldQuery, include: PropIndex<boolean>, replacer: PropIndex<Replacer>): string | Object {\n  if (include.get(Property.AGGREGATE) && fieldQ.aggregate && !isWildcard(fieldQ.aggregate)) {\n    return replace(fieldQ.aggregate, replacer.get(Property.AGGREGATE));\n  } else if (include.get(Property.AGGREGATE) && isEnabledAutoCountQuery(fieldQ)) {\n    // autoCount is considered a part of aggregate\n    return replace('count', replacer.get(Property.AGGREGATE));;\n  } else if (include.get(Property.TIMEUNIT) && fieldQ.timeUnit && !isWildcard(fieldQ.timeUnit)) {\n    return replace(fieldQ.timeUnit, replacer.get(Property.TIMEUNIT));\n  } else if (include.get(Property.BIN) && fieldQ.bin && !isWildcard(fieldQ.bin)) {\n    return 'bin';\n  } else {\n    let fn: any = null;\n    for (const prop of [Property.AGGREGATE, Property.AUTOCOUNT, Property.TIMEUNIT, Property.BIN]) {\n      const val = fieldQ[prop];\n      if (include.get(prop) && fieldQ[prop] && isWildcard(val)) {\n\n        // assign fnEnumIndex[prop] = array of enum values or just \"?\" if it is SHORT_WILDCARD\n        fn = fn || {};\n        fn[prop] = isShortWildcard(val) ? val : val.enum;\n      }\n    }\n    if (fn && fieldQ.hasFn) {\n      fn.hasFn = true;\n    }\n    return fn;\n  }\n}\n\n/**\n * Return key-value of parameters of field defs\n */\nfunction fieldDefProps(fieldQ: FieldQuery, include: PropIndex<boolean>, replacer: PropIndex<Replacer>) {\n\n  /** Encoding properties e.g., Scale, Axis, Legend */\n  const props: {key: string, value: boolean | Object}[] = [];\n\n  // Parameters of function such as bin will be just top-level properties\n  if (!isBoolean(fieldQ.bin) && !isShortWildcard(fieldQ.bin)) {\n    const bin = fieldQ.bin;\n    for (const child in bin) {\n      const prop = getEncodingNestedProp('bin', child as EncodingNestedChildProp);\n      if (prop && include.get(prop) && bin[child] !== undefined) {\n        props.push({\n          key: child,\n          value: value(bin[child], replacer.get(prop))\n        });\n      }\n    }\n    // Sort to make sure that parameter are ordered consistently\n    props.sort((a, b) => a.key.localeCompare(b.key));\n  }\n\n  for (const parent of [Property.SCALE, Property.SORT, Property.STACK, Property.AXIS, Property.LEGEND]) {\n    if (!isWildcard(fieldQ.channel) && !PROPERTY_SUPPORTED_CHANNELS[parent][fieldQ.channel as Channel]) {\n      continue;\n    }\n\n    if (include.get(parent) && fieldQ[parent] !== undefined) {\n      const parentValue = fieldQ[parent];\n      if (isBoolean(parentValue) || parentValue === null) {\n        // `scale`, `axis`, `legend` can be false/null.\n        props.push({\n          key: parent + '',\n          value: parentValue || false // return true or false (false if null)\n        });\n      } else if (isString(parentValue)) {\n\n        // `sort` can be a string (ascending/descending).\n        props.push({\n          key: parent + '',\n          value: replace(JSON.stringify(parentValue), replacer.get(parent))\n        });\n      } else {\n        let nestedPropChildren = [];\n        for (const child in parentValue) {\n          const nestedProp = getEncodingNestedProp(parent, child as EncodingNestedChildProp);\n          if (nestedProp && include.get(nestedProp) && parentValue[child] !== undefined) {\n            nestedPropChildren.push({\n              key: child,\n              value: value(parentValue[child], replacer.get(nestedProp))\n            });\n          }\n        }\n\n        if(nestedPropChildren.length > 0) {\n          const nestedPropObject = nestedPropChildren.sort((a, b) => a.key.localeCompare(b.key))\n            .reduce((o, item) => {\n              o[item.key] = item.value;\n              return o;\n            }, {});\n\n          // Sort to make sure that parameter are ordered consistently\n          props.push({\n            key: parent + '',\n            value: JSON.stringify(nestedPropObject)\n          });\n        }\n      }\n    }\n  }\n  return props;\n}\n\nexport function parse(shorthand: string): SpecQuery {\n  // TODO(https://github.com/uwdata/compassql/issues/259):\n  // Do not split directly, but use an upgraded version of `getClosingBraceIndex()`\n  let splitShorthand = shorthand.split('|');\n\n  let specQ: SpecQuery = {\n    mark: splitShorthand[0] as Mark,\n    encodings: [] as EncodingQuery[]\n  };\n\n  for (let i = 1; i < splitShorthand.length; i++) {\n    let part = splitShorthand[i];\n    const splitPart = splitWithTail(part, ':', 1);\n    const splitPartKey = splitPart[0];\n    const splitPartValue = splitPart[1];\n\n    if (isChannel(splitPartKey) || splitPartKey === '?') {\n      const encQ = shorthandParser.encoding(splitPartKey, splitPartValue);\n      specQ.encodings.push(encQ);\n      continue;\n    }\n\n    if (splitPartKey === 'transform') {\n      specQ.transform = JSON.parse(splitPartValue);\n      continue;\n    }\n  }\n\n  return specQ;\n}\n\n/**\n * Split a string n times into substrings with the specified delimiter and return them as an array.\n * @param str The string to be split\n * @param delim The delimiter string used to separate the string\n * @param number The value used to determine how many times the string is split\n */\nexport function splitWithTail(str: string, delim: string, count: number): string[] {\n  let result = [];\n  let lastIndex = 0;\n\n  for (let i = 0; i < count; i++) {\n    let indexOfDelim = str.indexOf(delim, lastIndex);\n\n    if (indexOfDelim !== -1) {\n      result.push(str.substring(lastIndex, indexOfDelim));\n      lastIndex = indexOfDelim + 1;\n    } else {\n      break;\n    }\n  }\n\n  result.push(str.substr(lastIndex));\n\n  // If the specified count is greater than the number of delimiters that exist in the string,\n  // an empty string will be pushed count minus number of delimiter occurence times.\n  if (result.length !== count + 1) {\n    while (result.length !== count + 1) {\n      result.push('');\n    }\n  }\n\n  return result;\n}\n\nexport namespace shorthandParser {\n  export function encoding(channel: Channel | SHORT_WILDCARD, fieldDefShorthand: string): EncodingQuery {\n    let encQMixins = fieldDefShorthand.indexOf('(') !== -1 ?\n      fn(fieldDefShorthand) :\n      rawFieldDef(splitWithTail(fieldDefShorthand, ',', 2));\n    return {\n      channel,\n      ...encQMixins\n    };\n  }\n\n  export function rawFieldDef(fieldDefPart: string[]): FieldQueryBase {\n    const fieldQ: FieldQueryBase = {};\n    fieldQ.field = fieldDefPart[0];\n    fieldQ.type = getFullName(fieldDefPart[1].toUpperCase()) || '?';\n\n    let partParams = fieldDefPart[2];\n    let closingBraceIndex = 0;\n    let i = 0;\n\n    while (i < partParams.length) {\n      let propEqualSignIndex = partParams.indexOf('=', i);\n      let parsedValue;\n      if (propEqualSignIndex !== -1) {\n        let prop = partParams.substring(i, propEqualSignIndex);\n        if (partParams[i + prop.length + 1] === '{') {\n          let openingBraceIndex = i + prop.length + 1;\n          closingBraceIndex = getClosingIndex(openingBraceIndex, partParams, '}');\n          const value = partParams.substring(openingBraceIndex, closingBraceIndex + 1);\n          parsedValue = JSON.parse(value);\n\n          // index after next comma\n          i = closingBraceIndex + 2;\n        } else if (partParams[i + prop.length + 1] === '[') {\n          // find closing square bracket\n          let openingBracketIndex = i + prop.length + 1;\n          let closingBracketIndex = getClosingIndex(openingBracketIndex, partParams, ']');\n          const value = partParams.substring(openingBracketIndex, closingBracketIndex + 1);\n          parsedValue = JSON.parse(value);\n\n          // index after next comma\n          i = closingBracketIndex + 2;\n        } else {\n          let propIndex = i;\n          // Substring until the next comma (or end of the string)\n          let nextCommaIndex = partParams.indexOf(',', i + prop.length);\n          if (nextCommaIndex === -1) {\n            nextCommaIndex = partParams.length;\n          }\n          // index after next comma\n          i = nextCommaIndex + 1;\n\n          parsedValue = JSON.parse(\n            partParams.substring(\n              propIndex + prop.length + 1,\n              nextCommaIndex\n            )\n          );\n        }\n\n        if (isEncodingNestedParent(prop)) {\n          fieldQ[prop] = parsedValue;\n        } else {\n          // prop is a property of the aggregation function such as bin\n          fieldQ.bin = fieldQ.bin || {};\n          fieldQ.bin[prop] = parsedValue;\n        }\n      } else {\n        // something is wrong with the format of the partParams\n        // exits loop if don't have then infintie loop\n        break;\n      }\n    }\n    return fieldQ;\n  }\n\n\n  export function getClosingIndex(openingBraceIndex: number, str: string, closingChar: string): number {\n    for (let i = openingBraceIndex; i < str.length; i++) {\n      if (str[i] === closingChar) {\n        return i;\n      }\n    }\n  }\n\n  export function fn(fieldDefShorthand: string): FieldQueryBase {\n    const fieldQ: FieldQueryBase = {};\n    // Aggregate, Bin, TimeUnit as wildcard case\n    if (fieldDefShorthand[0] === '?') {\n      let closingBraceIndex = getClosingIndex(1, fieldDefShorthand, '}');\n\n      let fnEnumIndex = JSON.parse(fieldDefShorthand.substring(1, closingBraceIndex + 1));\n\n      for (let encodingProperty in fnEnumIndex) {\n        if (isArray(fnEnumIndex[encodingProperty])) {\n          fieldQ[encodingProperty] = {enum: fnEnumIndex[encodingProperty]};\n        } else { // Definitely a `SHORT_WILDCARD`\n          fieldQ[encodingProperty] = fnEnumIndex[encodingProperty];\n        }\n      }\n\n      return {\n        ...fieldQ,\n        ...rawFieldDef(\n          splitWithTail(fieldDefShorthand.substring(closingBraceIndex + 2, fieldDefShorthand.length - 1), ',', 2)\n        )\n      };\n    } else {\n      let func = fieldDefShorthand.substring(0, fieldDefShorthand.indexOf('('));\n      let insideFn = fieldDefShorthand.substring(func.length + 1, fieldDefShorthand.length - 1);\n      let insideFnParts = splitWithTail(insideFn, ',', 2);\n\n      if (isAggregateOp(func)) {\n        return {\n          aggregate: func,\n          ...rawFieldDef(insideFnParts)\n        };\n      } else if (isTimeUnit(func)) {\n        return {\n          timeUnit: func,\n          ...rawFieldDef(insideFnParts)\n        };\n      } else if (func === 'bin') {\n        return {\n          bin: {},\n          ...rawFieldDef(insideFnParts)\n        };\n      }\n    }\n  }\n}\n","import {Channel} from 'vega-lite/build/src/channel';\nimport {Config} from 'vega-lite/build/src/config';\nimport {Data} from 'vega-lite/build/src/data';\nimport {Mark} from 'vega-lite/build/src/mark';\nimport {TitleParams} from 'vega-lite/build/src/title';\nimport {stack, StackOffset, StackProperties} from 'vega-lite/build/src/stack';\n\nimport {isWildcard, WildcardProperty} from '../wildcard';\nimport {ALL_ENCODING_PROPS, isEncodingTopLevelProperty, getEncodingNestedProp, Property, toKey} from '../property';\nimport {contains, extend, keys, some, isObject, without} from '../util';\n\nimport {TransformQuery} from './transform';\nimport {EncodingQuery, isFieldQuery, isEnabledAutoCountQuery, isDisabledAutoCountQuery, toEncoding} from './encoding';\nimport {TopLevel, FacetedCompositeUnitSpec} from 'vega-lite/build/src/spec';\nimport {toMap} from 'datalib/src/util';\n\n\n/**\n * A \"query\" version of a [Vega-Lite](https://github.com/vega/vega-lite)'s `UnitSpec` (single view specification).\n * This interface and most of  its children have `Query` suffixes to hint that their instanced are queries that\n * can contain wildcards to describe a collection of specifications.\n */\nexport interface SpecQuery {\n  data?: Data;\n\n  // TODO: support mark definition object\n  mark: WildcardProperty<Mark>;\n  transform?: TransformQuery[];\n\n  /**\n   * Array of encoding query mappings.\n   * Note: Vega-Lite's `encoding` is an object whose keys are unique encoding channels.\n   * However, for CompassQL, the `channel` property of encoding query mappings can be wildcards.\n   * Thus the `encoding` object in Vega-Lite is flatten as the `encodings` array in CompassQL.\n   */\n  encodings: EncodingQuery[];\n\n  /**\n   * The width of the resulting encodings.\n   * __NOTE:__ Does not support wildcards.\n   */\n  width?: number;\n\n  /**\n   * The height of the resulting encodings.\n   * __NOTE:__ Does not support wildcards.\n   */\n  height?: number;\n\n  /**\n   * CSS color property to use as the background of visualization.\n   * __NOTE:__ Does not support wildcards.\n   */\n  background?: string;\n\n  /**\n   * The default visualization padding, in pixels, from the edge of the\n   * visualization canvas to the data rectangle. If a number, specifies\n   * padding for all sides. If an object, the value should have the\n   * format {\"left\": 5, \"top\": 5, \"right\": 5, \"bottom\": 5}\n   * to specify padding for each side of the visualization.\n   *\n   * __NOTE:__ Does not support wildcards.\n   */\n  padding?: number | Object;\n\n  /**\n   * Title for the plot.\n   * __NOTE:__ Does not support wildcards.\n   */\n  title?: string | TitleParams;\n\n  // TODO: make config query (not important at all, only for the sake of completeness.)\n  /**\n   * Vega-Lite Configuration\n   */\n  config?: Config;\n}\n\n/**\n * Convert a Vega-Lite's ExtendedUnitSpec into a CompassQL's SpecQuery\n * @param {ExtendedUnitSpec} spec\n * @returns\n */\nexport function fromSpec(spec: TopLevel<FacetedCompositeUnitSpec>): SpecQuery {\n  return extend(\n    spec.data ? { data: spec.data} : {},\n    spec.transform ? { transform: spec.transform } : {},\n    spec.width ? { width: spec.width } : {},\n    spec.height ? { height: spec.height } : {},\n    spec.background ? { background: spec.background } : {},\n    spec.padding ? { padding: spec.padding } : {},\n    spec.title ? { title: spec.title } : {},\n    {\n      mark: spec.mark,\n      encodings: keys(spec.encoding).map((channel: Channel) => {\n          let encQ: EncodingQuery = { channel: channel };\n          let channelDef = spec.encoding[channel];\n\n          for (const prop in channelDef) {\n            if (isEncodingTopLevelProperty(prop as Property) && channelDef[prop] !== undefined) {\n              // Currently bin, scale, axis, legend only support boolean, but not null.\n              // Therefore convert null to false.\n              if (contains(['bin', 'scale', 'axis', 'legend'], prop) && channelDef[prop] === null) {\n                encQ[prop] = false;\n              } else {\n                encQ[prop] = channelDef[prop];\n              }\n            }\n          }\n\n          if (isFieldQuery(encQ) && encQ.aggregate === 'count' && !encQ.field) {\n            encQ.field = '*';\n          }\n\n          return encQ;\n        }\n      )\n    },\n    spec.config ? { config: spec.config } : {}\n  );\n}\n\nexport function isAggregate(specQ: SpecQuery) {\n  return some(specQ.encodings, (encQ: EncodingQuery) => {\n    return (isFieldQuery(encQ) && !isWildcard(encQ.aggregate) && !!encQ.aggregate) || isEnabledAutoCountQuery(encQ);\n  });\n}\n\n/**\n * @return The Vega-Lite `StackProperties` object that describes the stack\n * configuration of `specQ`. Returns `null` if this is not stackable.\n */\nexport function getVlStack(specQ: SpecQuery): StackProperties {\n  if (!hasRequiredStackProperties(specQ)) {\n    return null;\n  }\n\n  const encoding = toEncoding(specQ.encodings, {schema: null, wildcardMode: 'null'});\n  const mark = specQ.mark as Mark;\n\n  return stack(mark, encoding, getStackOffset(specQ));\n}\n\n/**\n * @return The `StackOffset` specified in `specQ`, `undefined` if none\n * is specified.\n */\nexport function getStackOffset(specQ: SpecQuery): StackOffset {\n  for (const encQ of specQ.encodings) {\n    if (encQ[Property.STACK] !== undefined && !isWildcard(encQ[Property.STACK])) {\n      return encQ[Property.STACK];\n    }\n  }\n  return undefined;\n}\n\n/**\n * @return The `Channel` in which `stack` is specified in `specQ`, or\n * `null` if none is specified.\n */\nexport function getStackChannel(specQ: SpecQuery): Channel {\n  for (const encQ of specQ.encodings) {\n    if (encQ[Property.STACK] !== undefined && !isWildcard(encQ.channel)) {\n      return encQ.channel;\n    }\n  }\n  return null;\n}\n\n/**\n * Returns true iff the given SpecQuery has the properties defined\n * to be a potential Stack spec.\n * @param specQ The SpecQuery in question.\n */\nexport function hasRequiredStackProperties(specQ: SpecQuery) {\n  // TODO(haldenl): make this leaner, a lot of encQ properties aren't required for stack.\n  // TODO(haldenl): check mark, then encodings\n  if (isWildcard(specQ.mark)) {\n    return false;\n  }\n\n  const requiredEncodingProps = [Property.STACK, Property.CHANNEL,\n      Property.MARK, Property.FIELD, Property.AGGREGATE, Property.AUTOCOUNT, Property.SCALE,\n      getEncodingNestedProp('scale', 'type'), Property.TYPE];\n  const exclude = toMap(without(ALL_ENCODING_PROPS, requiredEncodingProps));\n\n  const encodings = specQ.encodings.filter(encQ => !isDisabledAutoCountQuery(encQ));\n  for (const encQ of encodings) {\n    if (objectContainsWildcard(encQ, {exclude: exclude})) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Returns true iff the given object does not contain a nested wildcard.\n * @param obj The object in question.\n * @param opt With optional `exclude` property, which defines properties to\n * ignore when testing for wildcards.\n */\n// TODO(haldenl): rename to objectHasWildcard, rename prop to obj\nfunction objectContainsWildcard(obj: any, opt: {exclude?: {[key: string]: 1}} = {}) {\n  if (!isObject(obj)) {\n    return false;\n  }\n\n  for (const childProp in obj) {\n    if (obj.hasOwnProperty(childProp)) {\n      const wildcard = isWildcard(obj[childProp]);\n      if ((wildcard && (!opt.exclude || !opt.exclude[childProp])) ||\n          objectContainsWildcard(obj[childProp], opt)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * Returns true iff the given `specQ` contains a wildcard.\n * @param specQ The `SpecQuery` in question.\n * @param opt With optional `exclude` property, which defines properties to\n * ignore when testing for wildcards.\n */\nexport function hasWildcard(specQ: SpecQuery, opt: {exclude?: Property[]} = {}) {\n  const exclude = opt.exclude ? toMap(opt.exclude.map(toKey)) : {};\n  if (isWildcard(specQ.mark) && !exclude['mark']) {\n    return true;\n  }\n\n  for (const encQ of specQ.encodings) {\n    if (objectContainsWildcard(encQ, exclude)) {\n      return true;\n    }\n  }\n  return false;\n}\n","import { Dict, keys } from './util';\nimport {\n  Property, toKey,\n} from './property';\n\nexport interface PropIndexReader<T> {\n  has(p: Property): boolean;\n  get(p: Property): T;\n}\n\n/**\n * Dictionary that takes property as a key.\n */\nexport class PropIndex<T> implements PropIndexReader<T> {\n  private index: Dict<T>;\n\n  constructor(i: Dict<T> = null) {\n    this.index = i ? { ...i } : {};\n  }\n\n  public has(p: Property) {\n    return toKey(p) in this.index;\n  }\n\n  public get(p: Property) {\n    return this.index[toKey(p)];\n  }\n\n  public set(p: Property, value: T) {\n    this.index[toKey(p)] = value;\n    return this;\n  }\n\n  public setByKey(key: string, value: T) {\n    this.index[key] = value;\n  }\n\n  public map<U>(f: (t: T) => U): PropIndex<U> {\n    const i = new PropIndex<U>();\n    for (const k in this.index) {\n      i.index[k] = f(this.index[k]);\n    }\n    return i;\n  }\n\n  public size() {\n    return keys(this.index).length;\n  }\n\n  public duplicate(): PropIndex<T> {\n    return new PropIndex<T>(this.index);\n  }\n}\n","import {Channel} from 'vega-lite/build/src/channel';\nimport {channelCompatibility, FieldDef} from 'vega-lite/build/src/fielddef';\nimport {ScaleType, scaleTypeSupportProperty, hasDiscreteDomain, channelScalePropertyIncompatability, Scale} from 'vega-lite/build/src/scale';\nimport {Type} from 'vega-lite/build/src/type';\nimport {ExpandedType, isDiscrete} from '../query/expandedtype';\n\nimport {QueryConfig} from '../config';\nimport {getEncodingNestedProp, Property, SCALE_PROPS} from '../property';\nimport {PropIndex} from '../propindex';\nimport {isWildcard, Wildcard} from '../wildcard';\nimport {PrimitiveType, Schema} from '../schema';\nimport {contains} from '../util';\n\nimport {scaleType, FieldQuery, ScaleQuery, toFieldDef, AutoCountQuery, isFieldQuery} from '../query/encoding';\nimport {EncodingConstraintModel, EncodingConstraint} from './base';\n\nexport const FIELD_CONSTRAINTS: EncodingConstraintModel<FieldQuery>[] = [\n  {\n    name: 'aggregateOpSupportedByType',\n    description: 'Aggregate function should be supported by data type.',\n    properties: [Property.TYPE, Property.AGGREGATE],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (fieldQ.aggregate) {\n        return !isDiscrete(fieldQ.type);\n      }\n      // TODO: some aggregate function are actually supported by ordinal\n      return true; // no aggregate is okay with any type.\n    }\n  },{\n    name: 'asteriskFieldWithCountOnly',\n    description: 'Field=\"*\" should be disallowed except aggregate=\"count\"',\n    properties: [Property.FIELD, Property.AGGREGATE],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      return (fieldQ.field === '*') === (fieldQ.aggregate === 'count');\n    }\n  },{\n    name: 'minCardinalityForBin',\n    description: 'binned quantitative field should not have too low cardinality',\n    properties: [Property.BIN, Property.FIELD, Property.TYPE],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, schema: Schema, _: PropIndex<Wildcard<any>>, opt: QueryConfig) => {\n      if (fieldQ.bin && fieldQ.type === Type.QUANTITATIVE) {\n        // We remove bin so schema can infer the raw unbinned cardinality.\n        let fieldQwithoutBin: FieldQuery = {channel: fieldQ.channel, field: fieldQ.field, type: fieldQ.type};\n        return schema.cardinality(fieldQwithoutBin) >= opt.minCardinalityForBin;\n      }\n      return true;\n    }\n  },{\n    name: 'binAppliedForQuantitative',\n    description: 'bin should be applied to quantitative field only.',\n    properties: [Property.TYPE, Property.BIN],\n    allowWildcardForProperties: false,\n    strict: true, // FIXME VL2.0 actually support ordinal type for bin\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (fieldQ.bin) {\n        // If binned, the type must be quantitative\n        return fieldQ.type === Type.QUANTITATIVE;\n      }\n      return true;\n    }\n  },{\n    name: 'channelFieldCompatible',\n    description: `encoding channel's range type be compatible with channel type.`,\n    properties: [Property.CHANNEL, Property.TYPE, Property.BIN, Property.TIMEUNIT],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, schema: Schema, encWildcardIndex: PropIndex<Wildcard<any>>, opt: QueryConfig) => {\n      const fieldDef: FieldDef<string> = {\n        field: 'f', // actual field doesn't really matter here\n        ... toFieldDef(fieldQ, {schema, props:['bin', 'timeUnit', 'type']})\n      };\n      return channelCompatibility(fieldDef, fieldQ.channel as Channel).compatible;\n    }\n  },{\n    name: 'hasFn',\n    description: 'A field with as hasFn flag should have one of aggregate, timeUnit, or bin.',\n    properties: [Property.AGGREGATE, Property.BIN, Property.TIMEUNIT],\n    allowWildcardForProperties: true,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (fieldQ.hasFn) {\n        return !!fieldQ.aggregate || !!fieldQ.bin || !!fieldQ.timeUnit;\n      }\n      return true;\n    }\n  },{\n    name: 'omitScaleZeroWithBinnedField',\n    description: 'Do not use scale zero with binned field',\n    properties: [Property.SCALE, getEncodingNestedProp('scale', 'zero'), Property.BIN],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (fieldQ.bin && fieldQ.scale) {\n        if ((fieldQ.scale as ScaleQuery).zero === true) {\n          return false;\n        }\n      }\n      return true;\n    }\n  },{\n    name: 'onlyOneTypeOfFunction',\n    description: 'Only of of aggregate, autoCount, timeUnit, or bin should be applied at the same time.',\n    properties: [Property.AGGREGATE, Property.AUTOCOUNT, Property.TIMEUNIT, Property.BIN],\n    allowWildcardForProperties: true,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery | AutoCountQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (isFieldQuery(fieldQ))  {\n        const numFn = (!isWildcard(fieldQ.aggregate) && !!fieldQ.aggregate ? 1 : 0) +\n          (!isWildcard(fieldQ.bin) && !!fieldQ.bin ? 1 : 0) +\n          (!isWildcard(fieldQ.timeUnit) && !!fieldQ.timeUnit ? 1 : 0);\n        return numFn <= 1;\n      }\n      // For autoCount there is always only one type of function\n      return true;\n    }\n  },{\n    name: 'timeUnitAppliedForTemporal',\n    description: 'Time unit should be applied to temporal field only.',\n    properties: [Property.TYPE, Property.TIMEUNIT],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (fieldQ.timeUnit && fieldQ.type !== Type.TEMPORAL) {\n        return false;\n      }\n      return true;\n    }\n  },{\n    name: 'timeUnitShouldHaveVariation',\n    description: 'A particular time unit should be applied only if they produce unique values.',\n    properties: [Property.TIMEUNIT, Property.TYPE],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (fieldQ: FieldQuery, schema: Schema, encWildcardIndex: PropIndex<Wildcard<any>>, opt: QueryConfig) => {\n      if (fieldQ.timeUnit && fieldQ.type === Type.TEMPORAL) {\n        if (!encWildcardIndex.has('timeUnit') && !opt.constraintManuallySpecifiedValue) {\n          // Do not have to check this as this is manually specified by users.\n          return true;\n        }\n        return schema.timeUnitHasVariation(fieldQ);\n      }\n      return true;\n    }\n  },{\n    name: 'scalePropertiesSupportedByScaleType',\n    description: 'Scale properties must be supported by correct scale type',\n    properties: [].concat(SCALE_PROPS, [Property.SCALE, Property.TYPE]),\n    allowWildcardForProperties: true,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (fieldQ.scale) {\n        const scale: ScaleQuery = fieldQ.scale as ScaleQuery;\n\n         //  If fieldQ.type is an Wildcard and scale.type is undefined, it is equivalent\n         //  to scale type is Wildcard. If scale type is an Wildcard, we do not yet know\n         //  what the scale type is, and thus can ignore the constraint.\n\n        const sType = scaleType(fieldQ);\n\n        if (sType === undefined || sType === null) {\n          // If still ambiguous, doesn't check the constraint\n          return true;\n        }\n\n        for (let scaleProp in scale) {\n          if (scaleProp === 'type' || scaleProp === 'name' || scaleProp === 'enum') {\n            // ignore type and properties of wildcards\n            continue;\n          }\n          const sProp = scaleProp as (keyof Scale);\n          if (sType === 'point') {\n            // HACK: our current implementation of scaleType() can return point\n            // when the scaleType is a band since we didn't pass all parameter to Vega-Lite's scale type method.\n            if (!scaleTypeSupportProperty('point', sProp) && !scaleTypeSupportProperty('band', sProp)) {\n              return false;\n            }\n          } else if (!scaleTypeSupportProperty(sType, sProp)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n  },{\n    name: 'scalePropertiesSupportedByChannel',\n    description: 'Not all scale properties are supported by all encoding channels',\n    properties: [].concat(SCALE_PROPS, [Property.SCALE, Property.CHANNEL]),\n    allowWildcardForProperties: true,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (fieldQ) {\n        let channel: Channel = fieldQ.channel as Channel;\n        let scale: ScaleQuery = fieldQ.scale as ScaleQuery;\n        if (channel && !isWildcard(channel) && scale) {\n          if (channel === 'row' || channel === 'column') {\n            // row / column do not have scale\n            return false;\n          }\n          for (let scaleProp in scale) {\n            if (!scale.hasOwnProperty(scaleProp)) continue;\n            if (scaleProp === 'type' || scaleProp === 'name' || scaleProp === 'enum') {\n              // ignore type and properties of wildcards\n              continue;\n            }\n            let isSupported = channelScalePropertyIncompatability(channel, scaleProp as keyof Scale) === undefined;\n            if (!isSupported) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    }\n  },{\n    name: 'typeMatchesPrimitiveType',\n    description: 'Data type should be supported by field\\'s primitive type.',\n    properties: [Property.FIELD, Property.TYPE],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, schema: Schema, encWildcardIndex: PropIndex<Wildcard<any>>, opt: QueryConfig) => {\n      if (fieldQ.field === '*') {\n        return true;\n      }\n\n      const primitiveType = schema.primitiveType(fieldQ.field as string);\n      const type = fieldQ.type;\n\n      if (!encWildcardIndex.has('field') && !encWildcardIndex.has('type') && !opt.constraintManuallySpecifiedValue) {\n        // Do not have to check this as this is manually specified by users.\n        return true;\n      }\n\n      switch (primitiveType) {\n        case PrimitiveType.BOOLEAN:\n        case PrimitiveType.STRING:\n          return type !== Type.QUANTITATIVE && type !== Type.TEMPORAL;\n        case PrimitiveType.NUMBER:\n        case PrimitiveType.INTEGER:\n          return type !== Type.TEMPORAL;\n        case PrimitiveType.DATETIME:\n          // TODO: add NOMINAL, ORDINAL support after we support this in Vega-Lite\n          return type === Type.TEMPORAL;\n        case null:\n          // field does not exist in the schema\n          return false;\n      }\n      throw new Error('Not implemented');\n    }\n  },\n  {\n    name: 'typeMatchesSchemaType',\n    description: 'Enumerated data type of a field should match the field\\'s type in the schema.',\n    properties: [Property.FIELD, Property.TYPE],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (fieldQ: FieldQuery, schema: Schema, encWildcardIndex: PropIndex<Wildcard<any>>, opt: QueryConfig) => {\n      if (!encWildcardIndex.has('field') && !encWildcardIndex.has('type') && !opt.constraintManuallySpecifiedValue) {\n        // Do not have to check this as this is manually specified by users.\n        return true;\n      }\n\n      if (fieldQ.field === '*') {\n        return fieldQ.type === Type.QUANTITATIVE;\n      }\n\n      return schema.vlType(fieldQ.field as string) === fieldQ.type;\n    }\n  },{\n   name: 'maxCardinalityForCategoricalColor',\n    description: 'Categorical channel should not have too high cardinality',\n    properties: [Property.CHANNEL, Property.FIELD],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (fieldQ: FieldQuery, schema: Schema, _: PropIndex<Wildcard<any>>, opt: QueryConfig) => {\n      // TODO: missing case where ordinal / temporal use categorical color\n      // (once we do so, need to add Property.BIN, Property.TIMEUNIT)\n      if (fieldQ.channel === Channel.COLOR && (fieldQ.type === Type.NOMINAL || fieldQ.type === ExpandedType.KEY)) {\n        return schema.cardinality(fieldQ) <= opt.maxCardinalityForCategoricalColor;\n      }\n      return true; // other channel is irrelevant to this constraint\n    }\n  },{\n    name: 'maxCardinalityForFacet',\n    description: 'Row/column channel should not have too high cardinality',\n    properties: [Property.CHANNEL, Property.FIELD, Property.BIN, Property.TIMEUNIT],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (fieldQ: FieldQuery, schema: Schema, _: PropIndex<Wildcard<any>>, opt: QueryConfig) => {\n      if (fieldQ.channel === Channel.ROW || fieldQ.channel === Channel.COLUMN) {\n        return schema.cardinality(fieldQ) <= opt.maxCardinalityForFacet;\n      }\n      return true; // other channel is irrelevant to this constraint\n    }\n  },{\n    name: 'maxCardinalityForShape',\n    description: 'Shape channel should not have too high cardinality',\n    properties: [Property.CHANNEL, Property.FIELD, Property.BIN, Property.TIMEUNIT],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (fieldQ: FieldQuery, schema: Schema, _: PropIndex<Wildcard<any>>, opt: QueryConfig) => {\n      if (fieldQ.channel === Channel.SHAPE) {\n        return schema.cardinality(fieldQ) <= opt.maxCardinalityForShape;\n      }\n      return true; // other channel is irrelevant to this constraint\n    }\n  },\n  {\n    name: 'dataTypeAndFunctionMatchScaleType',\n    description: 'Scale type must match data type',\n    properties: [Property.TYPE, Property.SCALE, getEncodingNestedProp('scale', 'type'), Property.TIMEUNIT, Property.BIN],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (fieldQ.scale) {\n        const type = fieldQ.type;\n        const sType = scaleType(fieldQ);\n\n        if (isDiscrete(type)) {\n            return sType === undefined || hasDiscreteDomain(sType);\n        } else if (type === Type.TEMPORAL) {\n          if(!fieldQ.timeUnit) {\n            return contains([ScaleType.TIME, ScaleType.UTC, undefined], sType);\n          } else {\n            return contains([ScaleType.TIME, ScaleType.UTC, undefined], sType) || hasDiscreteDomain(sType);\n          }\n        } else if (type === Type.QUANTITATIVE) {\n          if (fieldQ.bin) {\n            return contains([ScaleType.LINEAR, undefined], sType);\n          } else {\n            return contains([ScaleType.LOG, ScaleType.POW, ScaleType.SQRT, ScaleType.QUANTILE, ScaleType.QUANTIZE, ScaleType.LINEAR, undefined], sType);\n          }\n        }\n      }\n      return true;\n    }\n  },\n  {\n    name: 'stackIsOnlyUsedWithXY',\n    description: 'stack should only be allowed for x and y channels',\n    properties: [Property.STACK, Property.CHANNEL],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (fieldQ: FieldQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n      if (!!fieldQ.stack) {\n        return fieldQ.channel === Channel.X || fieldQ.channel === Channel.Y;\n      }\n      return true;\n    }\n  }\n].map((ec: EncodingConstraint<FieldQuery>) => new EncodingConstraintModel<FieldQuery>(ec));\n\nexport const FIELD_CONSTRAINT_INDEX: {[name: string]: EncodingConstraintModel<FieldQuery | AutoCountQuery>} =\n  FIELD_CONSTRAINTS.reduce((m, ec: EncodingConstraintModel<FieldQuery | AutoCountQuery>) => {\n    m[ec.name()] = ec;\n    return m;\n  }, {});\n\nexport const FIELD_CONSTRAINTS_BY_PROPERTY =\n  FIELD_CONSTRAINTS.reduce((index, c) => {\n    for (const prop of c.properties()) {\n      // Initialize array and use it\n      index.set(prop, index.get(prop) || []);\n      index.get(prop).push(c);\n    }\n    return index;\n  }, new PropIndex<EncodingConstraintModel<FieldQuery>[]>());\n","import {Type as VLType} from 'vega-lite/build/src/type';\nimport {Channel} from 'vega-lite/build/src/channel';\nimport {autoMaxBins} from 'vega-lite/build/src/bin';\nimport {TimeUnit, containsTimeUnit, convert, TIMEUNIT_PARTS} from 'vega-lite/build/src/timeunit';\nimport {summary} from 'datalib/src/stats';\nimport {inferAll} from 'datalib/src/import/type';\nimport * as dlBin_ from 'datalib/src/bins/bins';\nimport {BinQuery, EncodingQuery, FieldQuery, isAutoCountQuery} from './query/encoding';\nimport { ExpandedType } from './query/expandedtype';\nimport {QueryConfig, DEFAULT_QUERY_CONFIG} from './config';\nimport {cmp, duplicate, extend, keys} from './util';\n\nconst dlBin = dlBin_;\n\n/**\n * Table Schema Field Descriptor interface\n * see: https://specs.frictionlessdata.io/table-schema/\n */\nexport interface TableSchemaFieldDescriptor {\n  /* name of field **/\n  name: string;\n\n  /* A nicer human readable label or title for the field **/\n  title?: string;\n\n  /* number, integer, string, datetime  */\n  type: PrimitiveType;\n\n  /* A string specifying a format */\n  format?: string;\n\n  /* A description for the field */\n  description?: string;\n\n}\n\n/**\n * Field Schema\n */\nexport interface FieldSchema extends TableSchemaFieldDescriptor {\n  vlType?: ExpandedType;\n\n  index?: number;\n  // Need to keep original index for re-exporting TableSchema\n  originalIndex?: number;\n\n  stats: DLFieldProfile;\n  binStats?: {[maxbins: string]: DLFieldProfile};\n  timeStats?: {[timeUnit: string]: DLFieldProfile};\n\n  // array of valid input values (fields)\n  ordinalDomain?: string[];\n}\n\n/**\n * Table Schema\n * see: https://specs.frictionlessdata.io/table-schema/\n */\nexport interface TableSchema<F extends TableSchemaFieldDescriptor> {\n  fields: F[];\n  missingValues?: string[];\n  primaryKey?: string | string[];\n  foreignKeys?: object[];\n}\n\n/**\n * Build a Schema object.\n *\n * @param data - a set of raw data in the same format that Vega-Lite / Vega takes\n * Basically, it's an array in the form of:\n *\n * [\n *   {a: 1, b:2},\n *   {a: 2, b:3},\n *   ...\n * ]\n *\n * @return a Schema object\n */\nexport function build(data: any, opt: QueryConfig = {}, tableSchema: TableSchema<TableSchemaFieldDescriptor> = {fields:[]}): Schema {\n  opt = extend({}, DEFAULT_QUERY_CONFIG, opt);\n\n  // create profiles for each variable\n  let summaries: DLFieldProfile[] = summary(data);\n  let types = inferAll(data); // inferAll does stronger type inference than summary\n\n  let tableSchemaFieldIndex = tableSchema.fields.reduce((m, field: TableSchemaFieldDescriptor) => {\n    m[field.name] = field;\n    return m;\n  }, {});\n\n  let fieldSchemas: FieldSchema[] = summaries.map(function(fieldProfile, index) {\n\n    const name: string = fieldProfile.field;\n    // In Table schema, 'date' doesn't include time so use 'datetime'\n    const type: PrimitiveType = types[name] === 'date' ? PrimitiveType.DATETIME :  (types[name] as any);\n    let distinct: number = fieldProfile.distinct;\n    let vlType: ExpandedType;\n\n    if (type === PrimitiveType.NUMBER) {\n      vlType = VLType.QUANTITATIVE;\n    } else if (type === PrimitiveType.INTEGER) {\n      // use ordinal or nominal when cardinality of integer type is relatively low and the distinct values are less than an amount specified in options\n      if ((distinct < opt.numberNominalLimit) && (distinct / fieldProfile.count < opt.numberNominalProportion)) {\n        vlType = VLType.NOMINAL;\n      } else {\n        vlType = VLType.QUANTITATIVE;\n      }\n    } else if (type === PrimitiveType.DATETIME) {\n      vlType = VLType.TEMPORAL;\n      // need to get correct min/max of date data because datalib's summary method does not\n      // calculate this correctly for date types.\n      fieldProfile.min = new Date(data[0][name]);\n      fieldProfile.max = new Date(data[0][name]);\n      for (const dataEntry of data) {\n        const time = new Date(dataEntry[name]).getTime();\n        if (time < (fieldProfile.min as Date).getTime()) {\n          fieldProfile.min = new Date(time);\n        }\n        if (time > (fieldProfile.max as Date).getTime()) {\n          fieldProfile.max = new Date(time);\n        }\n      }\n    } else {\n      vlType = VLType.NOMINAL;\n    }\n\n    if (vlType === VLType.NOMINAL\n      && distinct / fieldProfile.count > opt.minPercentUniqueForKey\n      && fieldProfile.count > opt.minCardinalityForKey) {\n      vlType = ExpandedType.KEY;\n    }\n\n    let fieldSchema = {\n      name: name,\n      // Need to keep original index for re-exporting TableSchema\n      originalIndex: index,\n      vlType: vlType,\n      type: type,\n      stats: fieldProfile,\n      timeStats: {} as {[timeUnit: string]: DLFieldProfile},\n      binStats: {} as {[key: string]: DLFieldProfile}\n    };\n\n    // extend field schema with table schema field - if present\n    const orgFieldSchema = tableSchemaFieldIndex[fieldSchema.name];\n    fieldSchema = extend(fieldSchema, orgFieldSchema);\n\n    return fieldSchema;\n  });\n\n  // calculate preset bins for quantitative and temporal data\n  for (let fieldSchema of fieldSchemas) {\n    if (fieldSchema.vlType === VLType.QUANTITATIVE) {\n      for (let maxbins of opt.enum.binProps.maxbins) {\n        fieldSchema.binStats[maxbins] = binSummary(maxbins, fieldSchema.stats);\n      }\n    } else if (fieldSchema.vlType === VLType.TEMPORAL) {\n      for (let unit of opt.enum.timeUnit) {\n        if (unit !== undefined) {\n          fieldSchema.timeStats[unit] = timeSummary(unit, fieldSchema.stats);\n        }\n      }\n    }\n  }\n\n  const derivedTableSchema: TableSchema<FieldSchema> = {\n    ...tableSchema,\n    fields: fieldSchemas,\n  };\n\n  return new Schema(derivedTableSchema);\n}\n\n  // order the field schema when we construct a new Schema\n  // this orders the fields in the UI\n  const order = {\n    'nominal': 0,\n    'key': 1,\n    'ordinal': 2,\n    'temporal': 3,\n    'quantitative': 4\n  };\n\nexport class Schema {\n  private _tableSchema: TableSchema<FieldSchema>;\n  private _fieldSchemaIndex: {[field: string]: FieldSchema};\n\n  constructor(tableSchema: TableSchema<FieldSchema>) {\n    this._tableSchema = tableSchema;\n\n\n    tableSchema.fields.sort(function(a: FieldSchema, b: FieldSchema) {\n      // first order by vlType: nominal < temporal < quantitative < ordinal\n      if (order[a.vlType] < order[b.vlType]) {\n        return -1;\n      } else if (order[a.vlType] > order[b.vlType]) {\n        return 1;\n      } else {\n        // then order by field (alphabetically)\n        return a.name.localeCompare(b.name);\n      }\n    });\n\n    // Add index for sorting\n    tableSchema.fields.forEach((fieldSchema, index) => fieldSchema.index = index);\n\n    this._fieldSchemaIndex = tableSchema.fields.reduce((m, fieldSchema: FieldSchema) => {\n      m[fieldSchema.name] = fieldSchema;\n      return m;\n    }, {});\n  }\n\n  /** @return a list of the field names (for enumerating). */\n  public fieldNames() {\n    return this._tableSchema.fields.map((fieldSchema) => fieldSchema.name);\n  }\n\n  /** @return a list of FieldSchemas */\n  public get fieldSchemas() {\n    return this._tableSchema.fields;\n  }\n\n  public fieldSchema(fieldName: string) {\n    return this._fieldSchemaIndex[fieldName];\n  }\n\n  public tableSchema() {\n    // the fieldschemas are re-arranged\n    // but this is not allowed in table schema.\n    // so we will re-order based on original index.\n    const tableSchema = duplicate(this._tableSchema);\n    tableSchema.fields.sort((a, b) => a.originalIndex - b.originalIndex);\n    return tableSchema;\n  }\n\n  /**\n   * @return primitive type of the field if exist, otherwise return null\n   */\n  public primitiveType(fieldName: string) {\n    return this._fieldSchemaIndex[fieldName] ? this._fieldSchemaIndex[fieldName].type : null;\n  }\n\n  /**\n   * @return vlType of measturement of the field if exist, otherwise return null\n   */\n  public vlType(fieldName: string) {\n    return this._fieldSchemaIndex[fieldName] ? this._fieldSchemaIndex[fieldName].vlType : null;\n  }\n\n  /** @return cardinality of the field associated with encQ, null if it doesn't exist.\n   *  @param augmentTimeUnitDomain - TimeUnit field domains will not be augmented if explicitly set to false.\n   */\n  public cardinality(fieldQ: FieldQuery, augmentTimeUnitDomain: boolean = true, excludeInvalid: boolean = false) {\n    const fieldSchema = this._fieldSchemaIndex[fieldQ.field as string];\n    if (fieldQ.aggregate || (isAutoCountQuery(fieldQ) && fieldQ.autoCount)) {\n      return 1;\n    } else if (fieldQ.bin) {\n      // encQ.bin will either be a boolean or a BinQuery\n      let bin: BinQuery;\n      if (typeof fieldQ.bin === 'boolean') {\n        // autoMaxBins defaults to 10 if channel is Wildcard\n        bin = {\n          maxbins: autoMaxBins(fieldQ.channel as Channel)\n        };\n      } else if (fieldQ.bin === '?') {\n        bin = {\n          enum: [true, false]\n        };\n      } else {\n        bin = fieldQ.bin;\n      }\n      const maxbins: any = bin.maxbins;\n      if (!fieldSchema.binStats[maxbins]) {\n        // need to calculate\n        fieldSchema.binStats[maxbins] = binSummary(maxbins, fieldSchema.stats);\n      }\n      // don't need to worry about excludeInvalid here because invalid values don't affect linearly binned field's cardinality\n      return fieldSchema.binStats[maxbins].distinct;\n    } else if (fieldQ.timeUnit) {\n      if (augmentTimeUnitDomain) {\n        switch (fieldQ.timeUnit) {\n          // TODO: this should not always be the case once Vega-Lite supports turning off domain augmenting (VL issue #1385)\n          case TimeUnit.SECONDS: return 60;\n          case TimeUnit.MINUTES: return 60;\n          case TimeUnit.HOURS: return 24;\n          case TimeUnit.DAY: return 7;\n          case TimeUnit.DATE: return 31;\n          case TimeUnit.MONTH: return 12;\n          case TimeUnit.QUARTER: return 4;\n          case TimeUnit.MILLISECONDS: return 1000;\n        }\n      }\n      let unit = fieldQ.timeUnit as string;\n      let timeStats = fieldSchema.timeStats;\n      // if the cardinality for the timeUnit is not cached, calculate it\n      if (!timeStats || !timeStats[unit]) {\n        timeStats = {\n          ...timeStats,\n          [unit]: timeSummary(fieldQ.timeUnit as TimeUnit, fieldSchema.stats)\n        };\n      }\n\n      if (excludeInvalid) {\n        return timeStats[unit].distinct - invalidCount(timeStats[unit].unique, ['Invalid Date', null]);\n      } else {\n        return timeStats[unit].distinct;\n      }\n    } else {\n      if (fieldSchema) {\n        if (excludeInvalid) {\n          return fieldSchema.stats.distinct - invalidCount(fieldSchema.stats.unique, [NaN, null]);\n        } else {\n          return fieldSchema.stats.distinct;\n        }\n      } else {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Given an EncodingQuery with a timeUnit, returns true if the date field\n   * has multiple distinct values for all parts of the timeUnit. Returns undefined\n   * if the timeUnit is undefined.\n   * i.e.\n   * ('yearmonth', [Jan 1 2000, Feb 2 2000] returns false)\n   * ('yearmonth', [Jan 1 2000, Feb 2 2001] returns true)\n   */\n  public timeUnitHasVariation(fieldQ: FieldQuery): boolean {\n    if (!fieldQ.timeUnit) {\n      return;\n    }\n\n    // if there is no variation in `date`, there should not be variation in `day`\n    if (fieldQ.timeUnit === TimeUnit.DAY) {\n      const dateEncQ: EncodingQuery = extend({}, fieldQ, {timeUnit: TimeUnit.DATE});\n      if (this.cardinality(dateEncQ, false, true) <= 1) {\n        return false;\n      }\n    }\n\n    let fullTimeUnit = fieldQ.timeUnit;\n    for (let timeUnitPart of TIMEUNIT_PARTS) {\n      if (containsTimeUnit(fullTimeUnit as TimeUnit, timeUnitPart)) {\n        // Create a clone of encQ, but with singleTimeUnit\n        const singleUnitEncQ = extend({}, fieldQ, {timeUnit: timeUnitPart});\n        if (this.cardinality(singleUnitEncQ, false, true) <= 1) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  public domain(fieldQueryParts: {field: string}): any[] {\n    // TODO: differentiate for field with bin / timeUnit\n    const fieldSchema = this._fieldSchemaIndex[fieldQueryParts.field as string];\n    let domain: any[] = keys(fieldSchema.stats.unique);\n    if (fieldSchema.vlType === VLType.QUANTITATIVE) {\n      // return [min, max], coerced into number types\n      return [+fieldSchema.stats.min, +fieldSchema.stats.max];\n    } else if (fieldSchema.type === PrimitiveType.DATETIME) {\n      // return [min, max] dates\n      return [fieldSchema.stats.min, fieldSchema.stats.max];\n    } else if (fieldSchema.type === PrimitiveType.INTEGER ||\n        fieldSchema.type === PrimitiveType.NUMBER) {\n      // coerce non-quantitative numerical data into number type\n      domain = domain.map(x => +x);\n      return domain.sort(cmp);\n    } else if ((fieldSchema.vlType === VLType.ORDINAL) && fieldSchema.ordinalDomain) {\n      return fieldSchema.ordinalDomain;\n    }\n\n    return domain.map((x) => {\n      // Convert 'null' to null as it is encoded similarly in datalib.\n      // This is wrong when it is a string 'null' but that rarely happens.\n      return x==='null' ? null : x;\n    }).sort(cmp);\n  }\n\n  /**\n   * @return a Summary corresponding to the field of the given EncodingQuery\n   */\n  public stats(fieldQ: FieldQuery) {\n    // TODO: differentiate for field with bin / timeUnit vs without\n    const fieldSchema = this._fieldSchemaIndex[fieldQ.field as string];\n    return fieldSchema ? fieldSchema.stats : null;\n  }\n}\n\n/**\n * @return a summary of the binning scheme determined from the given max number of bins\n */\nfunction binSummary(maxbins: number, summary: DLFieldProfile): DLFieldProfile {\n  const bin = dlBin({\n    min: summary.min,\n    max: summary.max,\n    maxbins: maxbins\n  });\n\n  // start with summary, pre-binning\n  const result = extend({}, summary);\n  result.unique = binUnique(bin, summary.unique);\n  result.distinct = (bin.stop - bin.start) / bin.step;\n  result.min = bin.start;\n  result.max = bin.stop;\n\n  return result;\n}\n\n/** @return a modified version of the passed summary with unique and distinct set according to the timeunit.\n *  Maps 'null' (string) keys to the null value and invalid dates to 'Invalid Date' in the unique dictionary.\n */\nfunction timeSummary(timeunit: TimeUnit, summary: DLFieldProfile): DLFieldProfile {\n  const result = extend({}, summary);\n\n  let unique: {[value: string]: number} = {};\n  keys(summary.unique).forEach(function(dateString) {\n    // don't convert null value because the Date constructor will actually convert it to a date\n    let date: Date = (dateString === 'null') ? null : new Date(dateString);\n    // at this point, `date` is either the null value, a valid Date object, or \"Invalid Date\" which is a Date\n    let key: string;\n    if (date === null) {\n      key = null;\n    } else if (isNaN(date.getTime())) {\n      key = 'Invalid Date';\n    } else {\n      key = ((timeunit === TimeUnit.DAY) ? date.getDay() : convert(timeunit, date)).toString();\n    }\n    unique[key] = (unique[key] || 0) + summary.unique[dateString];\n  });\n\n  result.unique = unique;\n  result.distinct = keys(unique).length;\n\n  return result;\n}\n\n/**\n * @return a new unique object based off of the old unique count and a binning scheme\n */\nfunction binUnique(bin: any, oldUnique: any) {\n  const newUnique = {};\n  for (let value in oldUnique) {\n    let bucket: number;\n    if (value === null) {\n      bucket = null;\n    } else if (isNaN(Number(value))) {\n      bucket = NaN;\n    } else {\n      bucket = bin.value(Number(value)) as number;\n    }\n    newUnique[bucket] = (newUnique[bucket] || 0) + oldUnique[value];\n  }\n  return newUnique;\n}\n\n/** @return the number of items in list that occur as keys of unique */\nfunction invalidCount(unique: {}, list: any[]) {\n  return list.reduce(function(prev, cur) {\n    return unique[cur] ? prev + 1 : prev;\n  }, 0);\n}\n\nexport enum PrimitiveType {\n  STRING = 'string' as any,\n  NUMBER = 'number' as any,\n  INTEGER = 'integer' as any,\n  BOOLEAN = 'boolean' as any,\n  DATETIME = 'datetime' as any\n}\n","var util = require('./util');\nvar type = require('./import/type');\nvar gen = require('./generate');\n\nvar stats = module.exports;\n\n// Collect unique values.\n// Output: an array of unique values, in first-observed order\nstats.unique = function(values, f, results) {\n  f = util.$(f);\n  results = results || [];\n  var u = {}, v, i, n;\n  for (i=0, n=values.length; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (v in u) continue;\n    u[v] = 1;\n    results.push(v);\n  }\n  return results;\n};\n\n// Return the length of the input array.\nstats.count = function(values) {\n  return values && values.length || 0;\n};\n\n// Count the number of non-null, non-undefined, non-NaN values.\nstats.count.valid = function(values, f) {\n  f = util.$(f);\n  var v, i, n, valid = 0;\n  for (i=0, n=values.length; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) valid += 1;\n  }\n  return valid;\n};\n\n// Count the number of null or undefined values.\nstats.count.missing = function(values, f) {\n  f = util.$(f);\n  var v, i, n, count = 0;\n  for (i=0, n=values.length; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (v == null) count += 1;\n  }\n  return count;\n};\n\n// Count the number of distinct values.\n// Null, undefined and NaN are each considered distinct values.\nstats.count.distinct = function(values, f) {\n  f = util.$(f);\n  var u = {}, v, i, n, count = 0;\n  for (i=0, n=values.length; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (v in u) continue;\n    u[v] = 1;\n    count += 1;\n  }\n  return count;\n};\n\n// Construct a map from distinct values to occurrence counts.\nstats.count.map = function(values, f) {\n  f = util.$(f);\n  var map = {}, v, i, n;\n  for (i=0, n=values.length; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    map[v] = (v in map) ? map[v] + 1 : 1;\n  }\n  return map;\n};\n\n// Compute the median of an array of numbers.\nstats.median = function(values, f) {\n  if (f) values = values.map(util.$(f));\n  values = values.filter(util.isValid).sort(util.cmp);\n  return stats.quantile(values, 0.5);\n};\n\n// Computes the quartile boundaries of an array of numbers.\nstats.quartile = function(values, f) {\n  if (f) values = values.map(util.$(f));\n  values = values.filter(util.isValid).sort(util.cmp);\n  var q = stats.quantile;\n  return [q(values, 0.25), q(values, 0.50), q(values, 0.75)];\n};\n\n// Compute the quantile of a sorted array of numbers.\n// Adapted from the D3.js implementation.\nstats.quantile = function(values, f, p) {\n  if (p === undefined) { p = f; f = util.identity; }\n  f = util.$(f);\n  var H = (values.length - 1) * p + 1,\n      h = Math.floor(H),\n      v = +f(values[h - 1]),\n      e = H - h;\n  return e ? v + e * (f(values[h]) - v) : v;\n};\n\n// Compute the sum of an array of numbers.\nstats.sum = function(values, f) {\n  f = util.$(f);\n  for (var sum=0, i=0, n=values.length, v; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) sum += v;\n  }\n  return sum;\n};\n\n// Compute the mean (average) of an array of numbers.\nstats.mean = function(values, f) {\n  f = util.$(f);\n  var mean = 0, delta, i, n, c, v;\n  for (i=0, c=0, n=values.length; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) {\n      delta = v - mean;\n      mean = mean + delta / (++c);\n    }\n  }\n  return mean;\n};\n\n// Compute the geometric mean of an array of numbers.\nstats.mean.geometric = function(values, f) {\n  f = util.$(f);\n  var mean = 1, c, n, v, i;\n  for (i=0, c=0, n=values.length; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) {\n      if (v <= 0) {\n        throw Error(\"Geometric mean only defined for positive values.\");\n      }\n      mean *= v;\n      ++c;\n    }\n  }\n  mean = c > 0 ? Math.pow(mean, 1/c) : 0;\n  return mean;\n};\n\n// Compute the harmonic mean of an array of numbers.\nstats.mean.harmonic = function(values, f) {\n  f = util.$(f);\n  var mean = 0, c, n, v, i;\n  for (i=0, c=0, n=values.length; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) {\n      mean += 1/v;\n      ++c;\n    }\n  }\n  return c / mean;\n};\n\n// Compute the sample variance of an array of numbers.\nstats.variance = function(values, f) {\n  f = util.$(f);\n  if (!util.isArray(values) || values.length < 2) return 0;\n  var mean = 0, M2 = 0, delta, i, c, v;\n  for (i=0, c=0; i<values.length; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) {\n      delta = v - mean;\n      mean = mean + delta / (++c);\n      M2 = M2 + delta * (v - mean);\n    }\n  }\n  M2 = M2 / (c - 1);\n  return M2;\n};\n\n// Compute the sample standard deviation of an array of numbers.\nstats.stdev = function(values, f) {\n  return Math.sqrt(stats.variance(values, f));\n};\n\n// Compute the Pearson mode skewness ((median-mean)/stdev) of an array of numbers.\nstats.modeskew = function(values, f) {\n  var avg = stats.mean(values, f),\n      med = stats.median(values, f),\n      std = stats.stdev(values, f);\n  return std === 0 ? 0 : (avg - med) / std;\n};\n\n// Find the minimum value in an array.\nstats.min = function(values, f) {\n  return stats.extent(values, f)[0];\n};\n\n// Find the maximum value in an array.\nstats.max = function(values, f) {\n  return stats.extent(values, f)[1];\n};\n\n// Find the minimum and maximum of an array of values.\nstats.extent = function(values, f) {\n  f = util.$(f);\n  var a, b, v, i, n = values.length;\n  for (i=0; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) { a = b = v; break; }\n  }\n  for (; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) {\n      if (v < a) a = v;\n      if (v > b) b = v;\n    }\n  }\n  return [a, b];\n};\n\n// Find the integer indices of the minimum and maximum values.\nstats.extent.index = function(values, f) {\n  f = util.$(f);\n  var x = -1, y = -1, a, b, v, i, n = values.length;\n  for (i=0; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) { a = b = v; x = y = i; break; }\n  }\n  for (; i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n    if (util.isValid(v)) {\n      if (v < a) { a = v; x = i; }\n      if (v > b) { b = v; y = i; }\n    }\n  }\n  return [x, y];\n};\n\n// Compute the dot product of two arrays of numbers.\nstats.dot = function(values, a, b) {\n  var sum = 0, i, v;\n  if (!b) {\n    if (values.length !== a.length) {\n      throw Error('Array lengths must match.');\n    }\n    for (i=0; i<values.length; ++i) {\n      v = values[i] * a[i];\n      if (v === v) sum += v;\n    }\n  } else {\n    a = util.$(a);\n    b = util.$(b);\n    for (i=0; i<values.length; ++i) {\n      v = a(values[i]) * b(values[i]);\n      if (v === v) sum += v;\n    }\n  }\n  return sum;\n};\n\n// Compute the vector distance between two arrays of numbers.\n// Default is Euclidean (exp=2) distance, configurable via exp argument.\nstats.dist = function(values, a, b, exp) {\n  var f = util.isFunction(b) || util.isString(b),\n      X = values,\n      Y = f ? values : a,\n      e = f ? exp : b,\n      L2 = e === 2 || e == null,\n      n = values.length, s = 0, d, i;\n  if (f) {\n    a = util.$(a);\n    b = util.$(b);\n  }\n  for (i=0; i<n; ++i) {\n    d = f ? (a(X[i])-b(Y[i])) : (X[i]-Y[i]);\n    s += L2 ? d*d : Math.pow(Math.abs(d), e);\n  }\n  return L2 ? Math.sqrt(s) : Math.pow(s, 1/e);\n};\n\n// Compute the Cohen's d effect size between two arrays of numbers.\nstats.cohensd = function(values, a, b) {\n  var X = b ? values.map(util.$(a)) : values,\n      Y = b ? values.map(util.$(b)) : a,\n      x1 = stats.mean(X),\n      x2 = stats.mean(Y),\n      n1 = stats.count.valid(X),\n      n2 = stats.count.valid(Y);\n\n  if ((n1+n2-2) <= 0) {\n    // if both arrays are size 1, or one is empty, there's no effect size\n    return 0;\n  }\n  // pool standard deviation\n  var s1 = stats.variance(X),\n      s2 = stats.variance(Y),\n      s = Math.sqrt((((n1-1)*s1) + ((n2-1)*s2)) / (n1+n2-2));\n  // if there is no variance, there's no effect size\n  return s===0 ? 0 : (x1 - x2) / s;\n};\n\n// Computes the covariance between two arrays of numbers\nstats.covariance = function(values, a, b) {\n  var X = b ? values.map(util.$(a)) : values,\n      Y = b ? values.map(util.$(b)) : a,\n      n = X.length,\n      xm = stats.mean(X),\n      ym = stats.mean(Y),\n      sum = 0, c = 0, i, x, y, vx, vy;\n\n  if (n !== Y.length) {\n    throw Error('Input lengths must match.');\n  }\n\n  for (i=0; i<n; ++i) {\n    x = X[i]; vx = util.isValid(x);\n    y = Y[i]; vy = util.isValid(y);\n    if (vx && vy) {\n      sum += (x-xm) * (y-ym);\n      ++c;\n    } else if (vx || vy) {\n      throw Error('Valid values must align.');\n    }\n  }\n  return sum / (c-1);\n};\n\n// Compute ascending rank scores for an array of values.\n// Ties are assigned their collective mean rank.\nstats.rank = function(values, f) {\n  f = util.$(f) || util.identity;\n  var a = values.map(function(v, i) {\n      return {idx: i, val: f(v)};\n    })\n    .sort(util.comparator('val'));\n\n  var n = values.length,\n      r = Array(n),\n      tie = -1, p = {}, i, v, mu;\n\n  for (i=0; i<n; ++i) {\n    v = a[i].val;\n    if (tie < 0 && p === v) {\n      tie = i - 1;\n    } else if (tie > -1 && p !== v) {\n      mu = 1 + (i-1 + tie) / 2;\n      for (; tie<i; ++tie) r[a[tie].idx] = mu;\n      tie = -1;\n    }\n    r[a[i].idx] = i + 1;\n    p = v;\n  }\n\n  if (tie > -1) {\n    mu = 1 + (n-1 + tie) / 2;\n    for (; tie<n; ++tie) r[a[tie].idx] = mu;\n  }\n\n  return r;\n};\n\n// Compute the sample Pearson product-moment correlation of two arrays of numbers.\nstats.cor = function(values, a, b) {\n  var fn = b;\n  b = fn ? values.map(util.$(b)) : a;\n  a = fn ? values.map(util.$(a)) : values;\n\n  var dot = stats.dot(a, b),\n      mua = stats.mean(a),\n      mub = stats.mean(b),\n      sda = stats.stdev(a),\n      sdb = stats.stdev(b),\n      n = values.length;\n\n  return (dot - n*mua*mub) / ((n-1) * sda * sdb);\n};\n\n// Compute the Spearman rank correlation of two arrays of values.\nstats.cor.rank = function(values, a, b) {\n  var ra = b ? stats.rank(values, a) : stats.rank(values),\n      rb = b ? stats.rank(values, b) : stats.rank(a),\n      n = values.length, i, s, d;\n\n  for (i=0, s=0; i<n; ++i) {\n    d = ra[i] - rb[i];\n    s += d * d;\n  }\n\n  return 1 - 6*s / (n * (n*n-1));\n};\n\n// Compute the distance correlation of two arrays of numbers.\n// http://en.wikipedia.org/wiki/Distance_correlation\nstats.cor.dist = function(values, a, b) {\n  var X = b ? values.map(util.$(a)) : values,\n      Y = b ? values.map(util.$(b)) : a;\n\n  var A = stats.dist.mat(X),\n      B = stats.dist.mat(Y),\n      n = A.length,\n      i, aa, bb, ab;\n\n  for (i=0, aa=0, bb=0, ab=0; i<n; ++i) {\n    aa += A[i]*A[i];\n    bb += B[i]*B[i];\n    ab += A[i]*B[i];\n  }\n\n  return Math.sqrt(ab / Math.sqrt(aa*bb));\n};\n\n// Simple linear regression.\n// Returns a \"fit\" object with slope (m), intercept (b),\n// r value (R), and sum-squared residual error (rss).\nstats.linearRegression = function(values, a, b) {\n  var X = b ? values.map(util.$(a)) : values,\n      Y = b ? values.map(util.$(b)) : a,\n      n = X.length,\n      xy = stats.covariance(X, Y), // will throw err if valid vals don't align\n      sx = stats.stdev(X),\n      sy = stats.stdev(Y),\n      slope = xy / (sx*sx),\n      icept = stats.mean(Y) - slope * stats.mean(X),\n      fit = {slope: slope, intercept: icept, R: xy / (sx*sy), rss: 0},\n      res, i;\n\n  for (i=0; i<n; ++i) {\n    if (util.isValid(X[i]) && util.isValid(Y[i])) {\n      res = (slope*X[i] + icept) - Y[i];\n      fit.rss += res * res;\n    }\n  }\n\n  return fit;\n};\n\n// Namespace for bootstrap\nstats.bootstrap = {};\n\n// Construct a bootstrapped confidence interval at a given percentile level\n// Arguments are an array, an optional n (defaults to 1000),\n//  an optional alpha (defaults to 0.05), and an optional smoothing parameter\nstats.bootstrap.ci = function(values, a, b, c, d) {\n  var X, N, alpha, smooth, bs, means, i;\n  if (util.isFunction(a) || util.isString(a)) {\n    X = values.map(util.$(a));\n    N = b;\n    alpha = c;\n    smooth = d;\n  } else {\n    X = values;\n    N = a;\n    alpha = b;\n    smooth = c;\n  }\n  N = N ? +N : 1000;\n  alpha = alpha || 0.05;\n\n  bs = gen.random.bootstrap(X, smooth);\n  for (i=0, means = Array(N); i<N; ++i) {\n    means[i] = stats.mean(bs.samples(X.length));\n  }\n  means.sort(util.numcmp);\n  return [\n    stats.quantile(means, alpha/2),\n    stats.quantile(means, 1-(alpha/2))\n  ];\n};\n\n// Namespace for z-tests\nstats.z = {};\n\n// Construct a z-confidence interval at a given significance level\n// Arguments are an array and an optional alpha (defaults to 0.05).\nstats.z.ci = function(values, a, b) {\n  var X = values, alpha = a;\n  if (util.isFunction(a) || util.isString(a)) {\n    X = values.map(util.$(a));\n    alpha = b;\n  }\n  alpha = alpha || 0.05;\n\n  var z = alpha===0.05 ? 1.96 : gen.random.normal(0, 1).icdf(1-(alpha/2)),\n      mu = stats.mean(X),\n      SE = stats.stdev(X) / Math.sqrt(stats.count.valid(X));\n  return [mu - (z*SE), mu + (z*SE)];\n};\n\n// Perform a z-test of means. Returns the p-value.\n// If a single array is provided, performs a one-sample location test.\n// If two arrays or a table and two accessors are provided, performs\n// a two-sample location test. A paired test is performed if specified\n// by the options hash.\n// The options hash format is: {paired: boolean, nullh: number}.\n// http://en.wikipedia.org/wiki/Z-test\n// http://en.wikipedia.org/wiki/Paired_difference_test\nstats.z.test = function(values, a, b, opt) {\n  if (util.isFunction(b) || util.isString(b)) { // table and accessors\n    return (opt && opt.paired ? ztestP : ztest2)(opt, values, a, b);\n  } else if (util.isArray(a)) { // two arrays\n    return (b && b.paired ? ztestP : ztest2)(b, values, a);\n  } else if (util.isFunction(a) || util.isString(a)) {\n    return ztest1(b, values, a); // table and accessor\n  } else {\n    return ztest1(a, values); // one array\n  }\n};\n\n// Perform a z-test of means. Returns the p-value.\n// Assuming we have a list of values, and a null hypothesis. If no null\n// hypothesis, assume our null hypothesis is mu=0.\nfunction ztest1(opt, X, f) {\n  var nullH = opt && opt.nullh || 0,\n      gaussian = gen.random.normal(0, 1),\n      mu = stats.mean(X,f),\n      SE = stats.stdev(X,f) / Math.sqrt(stats.count.valid(X,f));\n\n  if (SE===0) {\n    // Test not well defined when standard error is 0.\n    return (mu - nullH) === 0 ? 1 : 0;\n  }\n  // Two-sided, so twice the one-sided cdf.\n  var z = (mu - nullH) / SE;\n  return 2 * gaussian.cdf(-Math.abs(z));\n}\n\n// Perform a two sample paired z-test of means. Returns the p-value.\nfunction ztestP(opt, values, a, b) {\n  var X = b ? values.map(util.$(a)) : values,\n      Y = b ? values.map(util.$(b)) : a,\n      n1 = stats.count(X),\n      n2 = stats.count(Y),\n      diffs = Array(), i;\n\n  if (n1 !== n2) {\n    throw Error('Array lengths must match.');\n  }\n  for (i=0; i<n1; ++i) {\n    // Only valid differences should contribute to the test statistic\n    if (util.isValid(X[i]) && util.isValid(Y[i])) {\n      diffs.push(X[i] - Y[i]);\n    }\n  }\n  return stats.z.test(diffs, opt && opt.nullh || 0);\n}\n\n// Perform a two sample z-test of means. Returns the p-value.\nfunction ztest2(opt, values, a, b) {\n  var X = b ? values.map(util.$(a)) : values,\n      Y = b ? values.map(util.$(b)) : a,\n      n1 = stats.count.valid(X),\n      n2 = stats.count.valid(Y),\n      gaussian = gen.random.normal(0, 1),\n      meanDiff = stats.mean(X) - stats.mean(Y) - (opt && opt.nullh || 0),\n      SE = Math.sqrt(stats.variance(X)/n1 + stats.variance(Y)/n2);\n\n  if (SE===0) {\n    // Not well defined when pooled standard error is 0.\n    return meanDiff===0 ? 1 : 0;\n  }\n  // Two-tailed, so twice the one-sided cdf.\n  var z = meanDiff / SE;\n  return 2 * gaussian.cdf(-Math.abs(z));\n}\n\n// Construct a mean-centered distance matrix for an array of numbers.\nstats.dist.mat = function(X) {\n  var n = X.length,\n      m = n*n,\n      A = Array(m),\n      R = gen.zeros(n),\n      M = 0, v, i, j;\n\n  for (i=0; i<n; ++i) {\n    A[i*n+i] = 0;\n    for (j=i+1; j<n; ++j) {\n      A[i*n+j] = (v = Math.abs(X[i] - X[j]));\n      A[j*n+i] = v;\n      R[i] += v;\n      R[j] += v;\n    }\n  }\n\n  for (i=0; i<n; ++i) {\n    M += R[i];\n    R[i] /= n;\n  }\n  M /= m;\n\n  for (i=0; i<n; ++i) {\n    for (j=i; j<n; ++j) {\n      A[i*n+j] += M - R[i] - R[j];\n      A[j*n+i] = A[i*n+j];\n    }\n  }\n\n  return A;\n};\n\n// Compute the Shannon entropy (log base 2) of an array of counts.\nstats.entropy = function(counts, f) {\n  f = util.$(f);\n  var i, p, s = 0, H = 0, n = counts.length;\n  for (i=0; i<n; ++i) {\n    s += (f ? f(counts[i]) : counts[i]);\n  }\n  if (s === 0) return 0;\n  for (i=0; i<n; ++i) {\n    p = (f ? f(counts[i]) : counts[i]) / s;\n    if (p) H += p * Math.log(p);\n  }\n  return -H / Math.LN2;\n};\n\n// Compute the mutual information between two discrete variables.\n// Returns an array of the form [MI, MI_distance]\n// MI_distance is defined as 1 - I(a,b) / H(a,b).\n// http://en.wikipedia.org/wiki/Mutual_information\nstats.mutual = function(values, a, b, counts) {\n  var x = counts ? values.map(util.$(a)) : values,\n      y = counts ? values.map(util.$(b)) : a,\n      z = counts ? values.map(util.$(counts)) : b;\n\n  var px = {},\n      py = {},\n      n = z.length,\n      s = 0, I = 0, H = 0, p, t, i;\n\n  for (i=0; i<n; ++i) {\n    px[x[i]] = 0;\n    py[y[i]] = 0;\n  }\n\n  for (i=0; i<n; ++i) {\n    px[x[i]] += z[i];\n    py[y[i]] += z[i];\n    s += z[i];\n  }\n\n  t = 1 / (s * Math.LN2);\n  for (i=0; i<n; ++i) {\n    if (z[i] === 0) continue;\n    p = (s * z[i]) / (px[x[i]] * py[y[i]]);\n    I += z[i] * t * Math.log(p);\n    H += z[i] * t * Math.log(z[i]/s);\n  }\n\n  return [I, 1 + I/H];\n};\n\n// Compute the mutual information between two discrete variables.\nstats.mutual.info = function(values, a, b, counts) {\n  return stats.mutual(values, a, b, counts)[0];\n};\n\n// Compute the mutual information distance between two discrete variables.\n// MI_distance is defined as 1 - I(a,b) / H(a,b).\nstats.mutual.dist = function(values, a, b, counts) {\n  return stats.mutual(values, a, b, counts)[1];\n};\n\n// Compute a profile of summary statistics for a variable.\nstats.profile = function(values, f) {\n  var mean = 0,\n      valid = 0,\n      missing = 0,\n      distinct = 0,\n      min = null,\n      max = null,\n      M2 = 0,\n      vals = [],\n      u = {}, delta, sd, i, v, x;\n\n  // compute summary stats\n  for (i=0; i<values.length; ++i) {\n    v = f ? f(values[i]) : values[i];\n\n    // update unique values\n    u[v] = (v in u) ? u[v] + 1 : (distinct += 1, 1);\n\n    if (v == null) {\n      ++missing;\n    } else if (util.isValid(v)) {\n      // update stats\n      x = (typeof v === 'string') ? v.length : v;\n      if (min===null || x < min) min = x;\n      if (max===null || x > max) max = x;\n      delta = x - mean;\n      mean = mean + delta / (++valid);\n      M2 = M2 + delta * (x - mean);\n      vals.push(x);\n    }\n  }\n  M2 = M2 / (valid - 1);\n  sd = Math.sqrt(M2);\n\n  // sort values for median and iqr\n  vals.sort(util.cmp);\n\n  return {\n    type:     type(values, f),\n    unique:   u,\n    count:    values.length,\n    valid:    valid,\n    missing:  missing,\n    distinct: distinct,\n    min:      min,\n    max:      max,\n    mean:     mean,\n    stdev:    sd,\n    median:   (v = stats.quantile(vals, 0.5)),\n    q1:       stats.quantile(vals, 0.25),\n    q3:       stats.quantile(vals, 0.75),\n    modeskew: sd === 0 ? 0 : (mean - v) / sd\n  };\n};\n\n// Compute profiles for all variables in a data set.\nstats.summary = function(data, fields) {\n  fields = fields || util.keys(data[0]);\n  var s = fields.map(function(f) {\n    var p = stats.profile(data, util.$(f));\n    return (p.field = f, p);\n  });\n  return (s.__summary__ = true, s);\n};\n","var util = require('../util');\n\nvar TYPES = '__types__';\n\nvar PARSERS = {\n  boolean: util.boolean,\n  integer: util.number,\n  number:  util.number,\n  date:    util.date,\n  string:  function(x) { return x == null || x === '' ? null : x + ''; }\n};\n\nvar TESTS = {\n  boolean: function(x) { return x==='true' || x==='false' || util.isBoolean(x); },\n  integer: function(x) { return TESTS.number(x) && (x=+x) === ~~x; },\n  number: function(x) { return !isNaN(+x) && !util.isDate(x); },\n  date: function(x) { return !isNaN(Date.parse(x)); }\n};\n\nfunction annotation(data, types) {\n  if (!types) return data && data[TYPES] || null;\n  data[TYPES] = types;\n}\n\nfunction fieldNames(datum) {\n  return util.keys(datum);\n}\n\nfunction bracket(fieldName) {\n  return '[' + fieldName + ']';\n}\n\nfunction type(values, f) {\n  values = util.array(values);\n  f = util.$(f);\n  var v, i, n;\n\n  // if data array has type annotations, use them\n  if (values[TYPES]) {\n    v = f(values[TYPES]);\n    if (util.isString(v)) return v;\n  }\n\n  for (i=0, n=values.length; !util.isValid(v) && i<n; ++i) {\n    v = f ? f(values[i]) : values[i];\n  }\n\n  return util.isDate(v) ? 'date' :\n    util.isNumber(v)    ? 'number' :\n    util.isBoolean(v)   ? 'boolean' :\n    util.isString(v)    ? 'string' : null;\n}\n\nfunction typeAll(data, fields) {\n  if (!data.length) return;\n  var get = fields ? util.identity : (fields = fieldNames(data[0]), bracket);\n  return fields.reduce(function(types, f) {\n    return (types[f] = type(data, get(f)), types);\n  }, {});\n}\n\nfunction infer(values, f) {\n  values = util.array(values);\n  f = util.$(f);\n  var i, j, v;\n\n  // types to test for, in precedence order\n  var types = ['boolean', 'integer', 'number', 'date'];\n\n  for (i=0; i<values.length; ++i) {\n    // get next value to test\n    v = f ? f(values[i]) : values[i];\n    // test value against remaining types\n    for (j=0; j<types.length; ++j) {\n      if (util.isValid(v) && !TESTS[types[j]](v)) {\n        types.splice(j, 1);\n        j -= 1;\n      }\n    }\n    // if no types left, return 'string'\n    if (types.length === 0) return 'string';\n  }\n\n  return types[0];\n}\n\nfunction inferAll(data, fields) {\n  var get = fields ? util.identity : (fields = fieldNames(data[0]), bracket);\n  return fields.reduce(function(types, f) {\n    types[f] = infer(data, get(f));\n    return types;\n  }, {});\n}\n\ntype.annotation = annotation;\ntype.all = typeAll;\ntype.infer = infer;\ntype.inferAll = inferAll;\ntype.parsers = PARSERS;\nmodule.exports = type;\n","var util = require('./util'),\n    gen = module.exports;\n\ngen.repeat = function(val, n) {\n  var a = Array(n), i;\n  for (i=0; i<n; ++i) a[i] = val;\n  return a;\n};\n\ngen.zeros = function(n) {\n  return gen.repeat(0, n);\n};\n\ngen.range = function(start, stop, step) {\n  if (arguments.length < 3) {\n    step = 1;\n    if (arguments.length < 2) {\n      stop = start;\n      start = 0;\n    }\n  }\n  if ((stop - start) / step == Infinity) throw new Error('Infinite range');\n  var range = [], i = -1, j;\n  if (step < 0) while ((j = start + step * ++i) > stop) range.push(j);\n  else while ((j = start + step * ++i) < stop) range.push(j);\n  return range;\n};\n\ngen.random = {};\n\ngen.random.uniform = function(min, max) {\n  if (max === undefined) {\n    max = min === undefined ? 1 : min;\n    min = 0;\n  }\n  var d = max - min;\n  var f = function() {\n    return min + d * Math.random();\n  };\n  f.samples = function(n) {\n    return gen.zeros(n).map(f);\n  };\n  f.pdf = function(x) {\n    return (x >= min && x <= max) ? 1/d : 0;\n  };\n  f.cdf = function(x) {\n    return x < min ? 0 : x > max ? 1 : (x - min) / d;\n  };\n  f.icdf = function(p) {\n    return (p >= 0 && p <= 1) ? min + p*d : NaN;\n  };\n  return f;\n};\n\ngen.random.integer = function(a, b) {\n  if (b === undefined) {\n    b = a;\n    a = 0;\n  }\n  var d = b - a;\n  var f = function() {\n    return a + Math.floor(d * Math.random());\n  };\n  f.samples = function(n) {\n    return gen.zeros(n).map(f);\n  };\n  f.pdf = function(x) {\n    return (x === Math.floor(x) && x >= a && x < b) ? 1/d : 0;\n  };\n  f.cdf = function(x) {\n    var v = Math.floor(x);\n    return v < a ? 0 : v >= b ? 1 : (v - a + 1) / d;\n  };\n  f.icdf = function(p) {\n    return (p >= 0 && p <= 1) ? a - 1 + Math.floor(p*d) : NaN;\n  };\n  return f;\n};\n\ngen.random.normal = function(mean, stdev) {\n  mean = mean || 0;\n  stdev = stdev || 1;\n  var next;\n  var f = function() {\n    var x = 0, y = 0, rds, c;\n    if (next !== undefined) {\n      x = next;\n      next = undefined;\n      return x;\n    }\n    do {\n      x = Math.random()*2-1;\n      y = Math.random()*2-1;\n      rds = x*x + y*y;\n    } while (rds === 0 || rds > 1);\n    c = Math.sqrt(-2*Math.log(rds)/rds); // Box-Muller transform\n    next = mean + y*c*stdev;\n    return mean + x*c*stdev;\n  };\n  f.samples = function(n) {\n    return gen.zeros(n).map(f);\n  };\n  f.pdf = function(x) {\n    var exp = Math.exp(Math.pow(x-mean, 2) / (-2 * Math.pow(stdev, 2)));\n    return (1 / (stdev * Math.sqrt(2*Math.PI))) * exp;\n  };\n  f.cdf = function(x) {\n    // Approximation from West (2009)\n    // Better Approximations to Cumulative Normal Functions\n    var cd,\n        z = (x - mean) / stdev,\n        Z = Math.abs(z);\n    if (Z > 37) {\n      cd = 0;\n    } else {\n      var sum, exp = Math.exp(-Z*Z/2);\n      if (Z < 7.07106781186547) {\n        sum = 3.52624965998911e-02 * Z + 0.700383064443688;\n        sum = sum * Z + 6.37396220353165;\n        sum = sum * Z + 33.912866078383;\n        sum = sum * Z + 112.079291497871;\n        sum = sum * Z + 221.213596169931;\n        sum = sum * Z + 220.206867912376;\n        cd = exp * sum;\n        sum = 8.83883476483184e-02 * Z + 1.75566716318264;\n        sum = sum * Z + 16.064177579207;\n        sum = sum * Z + 86.7807322029461;\n        sum = sum * Z + 296.564248779674;\n        sum = sum * Z + 637.333633378831;\n        sum = sum * Z + 793.826512519948;\n        sum = sum * Z + 440.413735824752;\n        cd = cd / sum;\n      } else {\n        sum = Z + 0.65;\n        sum = Z + 4 / sum;\n        sum = Z + 3 / sum;\n        sum = Z + 2 / sum;\n        sum = Z + 1 / sum;\n        cd = exp / sum / 2.506628274631;\n      }\n    }\n    return z > 0 ? 1 - cd : cd;\n  };\n  f.icdf = function(p) {\n    // Approximation of Probit function using inverse error function.\n    if (p <= 0 || p >= 1) return NaN;\n    var x = 2*p - 1,\n        v = (8 * (Math.PI - 3)) / (3 * Math.PI * (4-Math.PI)),\n        a = (2 / (Math.PI*v)) + (Math.log(1 - Math.pow(x,2)) / 2),\n        b = Math.log(1 - (x*x)) / v,\n        s = (x > 0 ? 1 : -1) * Math.sqrt(Math.sqrt((a*a) - b) - a);\n    return mean + stdev * Math.SQRT2 * s;\n  };\n  return f;\n};\n\ngen.random.bootstrap = function(domain, smooth) {\n  // Generates a bootstrap sample from a set of observations.\n  // Smooth bootstrapping adds random zero-centered noise to the samples.\n  var val = domain.filter(util.isValid),\n      len = val.length,\n      err = smooth ? gen.random.normal(0, smooth) : null;\n  var f = function() {\n    return val[~~(Math.random()*len)] + (err ? err() : 0);\n  };\n  f.samples = function(n) {\n    return gen.zeros(n).map(f);\n  };\n  return f;\n};","var util = require('../util'),\n    time = require('../time'),\n    EPSILON = 1e-15;\n\nfunction bins(opt) {\n  if (!opt) { throw Error(\"Missing binning options.\"); }\n\n  // determine range\n  var maxb = opt.maxbins || 15,\n      base = opt.base || 10,\n      logb = Math.log(base),\n      div = opt.div || [5, 2],\n      min = opt.min,\n      max = opt.max,\n      span = max - min,\n      step, level, minstep, precision, v, i, eps;\n\n  if (opt.step) {\n    // if step size is explicitly given, use that\n    step = opt.step;\n  } else if (opt.steps) {\n    // if provided, limit choice to acceptable step sizes\n    step = opt.steps[Math.min(\n      opt.steps.length - 1,\n      bisect(opt.steps, span/maxb, 0, opt.steps.length)\n    )];\n  } else {\n    // else use span to determine step size\n    level = Math.ceil(Math.log(maxb) / logb);\n    minstep = opt.minstep || 0;\n    step = Math.max(\n      minstep,\n      Math.pow(base, Math.round(Math.log(span) / logb) - level)\n    );\n\n    // increase step size if too many bins\n    while (Math.ceil(span/step) > maxb) { step *= base; }\n\n    // decrease step size if allowed\n    for (i=0; i<div.length; ++i) {\n      v = step / div[i];\n      if (v >= minstep && span / v <= maxb) step = v;\n    }\n  }\n\n  // update precision, min and max\n  v = Math.log(step);\n  precision = v >= 0 ? 0 : ~~(-v / logb) + 1;\n  eps = Math.pow(base, -precision - 1);\n  min = Math.min(min, Math.floor(min / step + eps) * step);\n  max = Math.ceil(max / step) * step;\n\n  return {\n    start: min,\n    stop:  max,\n    step:  step,\n    unit:  {precision: precision},\n    value: value,\n    index: index\n  };\n}\n\nfunction bisect(a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (util.cmp(a[mid], x) < 0) { lo = mid + 1; }\n    else { hi = mid; }\n  }\n  return lo;\n}\n\nfunction value(v) {\n  return this.step * Math.floor(v / this.step + EPSILON);\n}\n\nfunction index(v) {\n  return Math.floor((v - this.start) / this.step + EPSILON);\n}\n\nfunction date_value(v) {\n  return this.unit.date(value.call(this, v));\n}\n\nfunction date_index(v) {\n  return index.call(this, this.unit.unit(v));\n}\n\nbins.date = function(opt) {\n  if (!opt) { throw Error(\"Missing date binning options.\"); }\n\n  // find time step, then bin\n  var units = opt.utc ? time.utc : time,\n      dmin = opt.min,\n      dmax = opt.max,\n      maxb = opt.maxbins || 20,\n      minb = opt.minbins || 4,\n      span = (+dmax) - (+dmin),\n      unit = opt.unit ? units[opt.unit] : units.find(span, minb, maxb),\n      spec = bins({\n        min:     unit.min != null ? unit.min : unit.unit(dmin),\n        max:     unit.max != null ? unit.max : unit.unit(dmax),\n        maxbins: maxb,\n        minstep: unit.minstep,\n        steps:   unit.step\n      });\n\n  spec.unit = unit;\n  spec.index = date_index;\n  if (!opt.raw) spec.value = date_value;\n  return spec;\n};\n\nmodule.exports = bins;\n","var d3_time = require('d3-time');\n\nvar tempDate = new Date(),\n    baseDate = new Date(0, 0, 1).setFullYear(0), // Jan 1, 0 AD\n    utcBaseDate = new Date(Date.UTC(0, 0, 1)).setUTCFullYear(0);\n\nfunction date(d) {\n  return (tempDate.setTime(+d), tempDate);\n}\n\n// create a time unit entry\nfunction entry(type, date, unit, step, min, max) {\n  var e = {\n    type: type,\n    date: date,\n    unit: unit\n  };\n  if (step) {\n    e.step = step;\n  } else {\n    e.minstep = 1;\n  }\n  if (min != null) e.min = min;\n  if (max != null) e.max = max;\n  return e;\n}\n\nfunction create(type, unit, base, step, min, max) {\n  return entry(type,\n    function(d) { return unit.offset(base, d); },\n    function(d) { return unit.count(base, d); },\n    step, min, max);\n}\n\nvar locale = [\n  create('second', d3_time.second, baseDate),\n  create('minute', d3_time.minute, baseDate),\n  create('hour',   d3_time.hour,   baseDate),\n  create('day',    d3_time.day,    baseDate, [1, 7]),\n  create('month',  d3_time.month,  baseDate, [1, 3, 6]),\n  create('year',   d3_time.year,   baseDate),\n\n  // periodic units\n  entry('seconds',\n    function(d) { return new Date(1970, 0, 1, 0, 0, d); },\n    function(d) { return date(d).getSeconds(); },\n    null, 0, 59\n  ),\n  entry('minutes',\n    function(d) { return new Date(1970, 0, 1, 0, d); },\n    function(d) { return date(d).getMinutes(); },\n    null, 0, 59\n  ),\n  entry('hours',\n    function(d) { return new Date(1970, 0, 1, d); },\n    function(d) { return date(d).getHours(); },\n    null, 0, 23\n  ),\n  entry('weekdays',\n    function(d) { return new Date(1970, 0, 4+d); },\n    function(d) { return date(d).getDay(); },\n    [1], 0, 6\n  ),\n  entry('dates',\n    function(d) { return new Date(1970, 0, d); },\n    function(d) { return date(d).getDate(); },\n    [1], 1, 31\n  ),\n  entry('months',\n    function(d) { return new Date(1970, d % 12, 1); },\n    function(d) { return date(d).getMonth(); },\n    [1], 0, 11\n  )\n];\n\nvar utc = [\n  create('second', d3_time.utcSecond, utcBaseDate),\n  create('minute', d3_time.utcMinute, utcBaseDate),\n  create('hour',   d3_time.utcHour,   utcBaseDate),\n  create('day',    d3_time.utcDay,    utcBaseDate, [1, 7]),\n  create('month',  d3_time.utcMonth,  utcBaseDate, [1, 3, 6]),\n  create('year',   d3_time.utcYear,   utcBaseDate),\n\n  // periodic units\n  entry('seconds',\n    function(d) { return new Date(Date.UTC(1970, 0, 1, 0, 0, d)); },\n    function(d) { return date(d).getUTCSeconds(); },\n    null, 0, 59\n  ),\n  entry('minutes',\n    function(d) { return new Date(Date.UTC(1970, 0, 1, 0, d)); },\n    function(d) { return date(d).getUTCMinutes(); },\n    null, 0, 59\n  ),\n  entry('hours',\n    function(d) { return new Date(Date.UTC(1970, 0, 1, d)); },\n    function(d) { return date(d).getUTCHours(); },\n    null, 0, 23\n  ),\n  entry('weekdays',\n    function(d) { return new Date(Date.UTC(1970, 0, 4+d)); },\n    function(d) { return date(d).getUTCDay(); },\n    [1], 0, 6\n  ),\n  entry('dates',\n    function(d) { return new Date(Date.UTC(1970, 0, d)); },\n    function(d) { return date(d).getUTCDate(); },\n    [1], 1, 31\n  ),\n  entry('months',\n    function(d) { return new Date(Date.UTC(1970, d % 12, 1)); },\n    function(d) { return date(d).getUTCMonth(); },\n    [1], 0, 11\n  )\n];\n\nvar STEPS = [\n  [31536e6, 5],  // 1-year\n  [7776e6, 4],   // 3-month\n  [2592e6, 4],   // 1-month\n  [12096e5, 3],  // 2-week\n  [6048e5, 3],   // 1-week\n  [1728e5, 3],   // 2-day\n  [864e5, 3],    // 1-day\n  [432e5, 2],    // 12-hour\n  [216e5, 2],    // 6-hour\n  [108e5, 2],    // 3-hour\n  [36e5, 2],     // 1-hour\n  [18e5, 1],     // 30-minute\n  [9e5, 1],      // 15-minute\n  [3e5, 1],      // 5-minute\n  [6e4, 1],      // 1-minute\n  [3e4, 0],      // 30-second\n  [15e3, 0],     // 15-second\n  [5e3, 0],      // 5-second\n  [1e3, 0]       // 1-second\n];\n\nfunction find(units, span, minb, maxb) {\n  var step = STEPS[0], i, n, bins;\n\n  for (i=1, n=STEPS.length; i<n; ++i) {\n    step = STEPS[i];\n    if (span > step[0]) {\n      bins = span / step[0];\n      if (bins > maxb) {\n        return units[STEPS[i-1][1]];\n      }\n      if (bins >= minb) {\n        return units[step[1]];\n      }\n    }\n  }\n  return units[STEPS[n-1][1]];\n}\n\nfunction toUnitMap(units) {\n  var map = {}, i, n;\n  for (i=0, n=units.length; i<n; ++i) {\n    map[units[i].type] = units[i];\n  }\n  map.find = function(span, minb, maxb) {\n    return find(units, span, minb, maxb);\n  };\n  return map;\n}\n\nmodule.exports = toUnitMap(locale);\nmodule.exports.utc = toUnitMap(utc);","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define('d3-time', ['exports'], factory) :\n  factory((global.d3_time = {}));\n}(this, function (exports) { 'use strict';\n\n  var t0 = new Date;\n  var t1 = new Date;\n  function newInterval(floori, offseti, count, field) {\n\n    function interval(date) {\n      return floori(date = new Date(+date)), date;\n    }\n\n    interval.floor = interval;\n\n    interval.round = function(date) {\n      var d0 = new Date(+date),\n          d1 = new Date(date - 1);\n      floori(d0), floori(d1), offseti(d1, 1);\n      return date - d0 < d1 - date ? d0 : d1;\n    };\n\n    interval.ceil = function(date) {\n      return floori(date = new Date(date - 1)), offseti(date, 1), date;\n    };\n\n    interval.offset = function(date, step) {\n      return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n    };\n\n    interval.range = function(start, stop, step) {\n      var range = [];\n      start = new Date(start - 1);\n      stop = new Date(+stop);\n      step = step == null ? 1 : Math.floor(step);\n      if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n      offseti(start, 1), floori(start);\n      if (start < stop) range.push(new Date(+start));\n      while (offseti(start, step), floori(start), start < stop) range.push(new Date(+start));\n      return range;\n    };\n\n    interval.filter = function(test) {\n      return newInterval(function(date) {\n        while (floori(date), !test(date)) date.setTime(date - 1);\n      }, function(date, step) {\n        while (--step >= 0) while (offseti(date, 1), !test(date));\n      });\n    };\n\n    if (count) {\n      interval.count = function(start, end) {\n        t0.setTime(+start), t1.setTime(+end);\n        floori(t0), floori(t1);\n        return Math.floor(count(t0, t1));\n      };\n\n      interval.every = function(step) {\n        step = Math.floor(step);\n        return !isFinite(step) || !(step > 0) ? null\n            : !(step > 1) ? interval\n            : interval.filter(field\n                ? function(d) { return field(d) % step === 0; }\n                : function(d) { return interval.count(0, d) % step === 0; });\n      };\n    }\n\n    return interval;\n  };\n\n  var millisecond = newInterval(function() {\n    // noop\n  }, function(date, step) {\n    date.setTime(+date + step);\n  }, function(start, end) {\n    return end - start;\n  });\n\n  // An optimized implementation for this simple case.\n  millisecond.every = function(k) {\n    k = Math.floor(k);\n    if (!isFinite(k) || !(k > 0)) return null;\n    if (!(k > 1)) return millisecond;\n    return newInterval(function(date) {\n      date.setTime(Math.floor(date / k) * k);\n    }, function(date, step) {\n      date.setTime(+date + step * k);\n    }, function(start, end) {\n      return (end - start) / k;\n    });\n  };\n\n  var second = newInterval(function(date) {\n    date.setMilliseconds(0);\n  }, function(date, step) {\n    date.setTime(+date + step * 1e3);\n  }, function(start, end) {\n    return (end - start) / 1e3;\n  }, function(date) {\n    return date.getSeconds();\n  });\n\n  var minute = newInterval(function(date) {\n    date.setSeconds(0, 0);\n  }, function(date, step) {\n    date.setTime(+date + step * 6e4);\n  }, function(start, end) {\n    return (end - start) / 6e4;\n  }, function(date) {\n    return date.getMinutes();\n  });\n\n  var hour = newInterval(function(date) {\n    date.setMinutes(0, 0, 0);\n  }, function(date, step) {\n    date.setTime(+date + step * 36e5);\n  }, function(start, end) {\n    return (end - start) / 36e5;\n  }, function(date) {\n    return date.getHours();\n  });\n\n  var day = newInterval(function(date) {\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * 6e4) / 864e5;\n  }, function(date) {\n    return date.getDate() - 1;\n  });\n\n  function weekday(i) {\n    return newInterval(function(date) {\n      date.setHours(0, 0, 0, 0);\n      date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    }, function(date, step) {\n      date.setDate(date.getDate() + step * 7);\n    }, function(start, end) {\n      return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * 6e4) / 6048e5;\n    });\n  }\n\n  var sunday = weekday(0);\n  var monday = weekday(1);\n  var tuesday = weekday(2);\n  var wednesday = weekday(3);\n  var thursday = weekday(4);\n  var friday = weekday(5);\n  var saturday = weekday(6);\n\n  var month = newInterval(function(date) {\n    date.setHours(0, 0, 0, 0);\n    date.setDate(1);\n  }, function(date, step) {\n    date.setMonth(date.getMonth() + step);\n  }, function(start, end) {\n    return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n  }, function(date) {\n    return date.getMonth();\n  });\n\n  var year = newInterval(function(date) {\n    date.setHours(0, 0, 0, 0);\n    date.setMonth(0, 1);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step);\n  }, function(start, end) {\n    return end.getFullYear() - start.getFullYear();\n  }, function(date) {\n    return date.getFullYear();\n  });\n\n  var utcSecond = newInterval(function(date) {\n    date.setUTCMilliseconds(0);\n  }, function(date, step) {\n    date.setTime(+date + step * 1e3);\n  }, function(start, end) {\n    return (end - start) / 1e3;\n  }, function(date) {\n    return date.getUTCSeconds();\n  });\n\n  var utcMinute = newInterval(function(date) {\n    date.setUTCSeconds(0, 0);\n  }, function(date, step) {\n    date.setTime(+date + step * 6e4);\n  }, function(start, end) {\n    return (end - start) / 6e4;\n  }, function(date) {\n    return date.getUTCMinutes();\n  });\n\n  var utcHour = newInterval(function(date) {\n    date.setUTCMinutes(0, 0, 0);\n  }, function(date, step) {\n    date.setTime(+date + step * 36e5);\n  }, function(start, end) {\n    return (end - start) / 36e5;\n  }, function(date) {\n    return date.getUTCHours();\n  });\n\n  var utcDay = newInterval(function(date) {\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step);\n  }, function(start, end) {\n    return (end - start) / 864e5;\n  }, function(date) {\n    return date.getUTCDate() - 1;\n  });\n\n  function utcWeekday(i) {\n    return newInterval(function(date) {\n      date.setUTCHours(0, 0, 0, 0);\n      date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    }, function(date, step) {\n      date.setUTCDate(date.getUTCDate() + step * 7);\n    }, function(start, end) {\n      return (end - start) / 6048e5;\n    });\n  }\n\n  var utcSunday = utcWeekday(0);\n  var utcMonday = utcWeekday(1);\n  var utcTuesday = utcWeekday(2);\n  var utcWednesday = utcWeekday(3);\n  var utcThursday = utcWeekday(4);\n  var utcFriday = utcWeekday(5);\n  var utcSaturday = utcWeekday(6);\n\n  var utcMonth = newInterval(function(date) {\n    date.setUTCHours(0, 0, 0, 0);\n    date.setUTCDate(1);\n  }, function(date, step) {\n    date.setUTCMonth(date.getUTCMonth() + step);\n  }, function(start, end) {\n    return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n  }, function(date) {\n    return date.getUTCMonth();\n  });\n\n  var utcYear = newInterval(function(date) {\n    date.setUTCHours(0, 0, 0, 0);\n    date.setUTCMonth(0, 1);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step);\n  }, function(start, end) {\n    return end.getUTCFullYear() - start.getUTCFullYear();\n  }, function(date) {\n    return date.getUTCFullYear();\n  });\n\n  var milliseconds = millisecond.range;\n  var seconds = second.range;\n  var minutes = minute.range;\n  var hours = hour.range;\n  var days = day.range;\n  var sundays = sunday.range;\n  var mondays = monday.range;\n  var tuesdays = tuesday.range;\n  var wednesdays = wednesday.range;\n  var thursdays = thursday.range;\n  var fridays = friday.range;\n  var saturdays = saturday.range;\n  var weeks = sunday.range;\n  var months = month.range;\n  var years = year.range;\n\n  var utcMillisecond = millisecond;\n  var utcMilliseconds = milliseconds;\n  var utcSeconds = utcSecond.range;\n  var utcMinutes = utcMinute.range;\n  var utcHours = utcHour.range;\n  var utcDays = utcDay.range;\n  var utcSundays = utcSunday.range;\n  var utcMondays = utcMonday.range;\n  var utcTuesdays = utcTuesday.range;\n  var utcWednesdays = utcWednesday.range;\n  var utcThursdays = utcThursday.range;\n  var utcFridays = utcFriday.range;\n  var utcSaturdays = utcSaturday.range;\n  var utcWeeks = utcSunday.range;\n  var utcMonths = utcMonth.range;\n  var utcYears = utcYear.range;\n\n  var version = \"0.1.1\";\n\n  exports.version = version;\n  exports.milliseconds = milliseconds;\n  exports.seconds = seconds;\n  exports.minutes = minutes;\n  exports.hours = hours;\n  exports.days = days;\n  exports.sundays = sundays;\n  exports.mondays = mondays;\n  exports.tuesdays = tuesdays;\n  exports.wednesdays = wednesdays;\n  exports.thursdays = thursdays;\n  exports.fridays = fridays;\n  exports.saturdays = saturdays;\n  exports.weeks = weeks;\n  exports.months = months;\n  exports.years = years;\n  exports.utcMillisecond = utcMillisecond;\n  exports.utcMilliseconds = utcMilliseconds;\n  exports.utcSeconds = utcSeconds;\n  exports.utcMinutes = utcMinutes;\n  exports.utcHours = utcHours;\n  exports.utcDays = utcDays;\n  exports.utcSundays = utcSundays;\n  exports.utcMondays = utcMondays;\n  exports.utcTuesdays = utcTuesdays;\n  exports.utcWednesdays = utcWednesdays;\n  exports.utcThursdays = utcThursdays;\n  exports.utcFridays = utcFridays;\n  exports.utcSaturdays = utcSaturdays;\n  exports.utcWeeks = utcWeeks;\n  exports.utcMonths = utcMonths;\n  exports.utcYears = utcYears;\n  exports.millisecond = millisecond;\n  exports.second = second;\n  exports.minute = minute;\n  exports.hour = hour;\n  exports.day = day;\n  exports.sunday = sunday;\n  exports.monday = monday;\n  exports.tuesday = tuesday;\n  exports.wednesday = wednesday;\n  exports.thursday = thursday;\n  exports.friday = friday;\n  exports.saturday = saturday;\n  exports.week = sunday;\n  exports.month = month;\n  exports.year = year;\n  exports.utcSecond = utcSecond;\n  exports.utcMinute = utcMinute;\n  exports.utcHour = utcHour;\n  exports.utcDay = utcDay;\n  exports.utcSunday = utcSunday;\n  exports.utcMonday = utcMonday;\n  exports.utcTuesday = utcTuesday;\n  exports.utcWednesday = utcWednesday;\n  exports.utcThursday = utcThursday;\n  exports.utcFriday = utcFriday;\n  exports.utcSaturday = utcSaturday;\n  exports.utcWeek = utcSunday;\n  exports.utcMonth = utcMonth;\n  exports.utcYear = utcYear;\n  exports.interval = newInterval;\n\n}));","import {QueryConfig} from '../config';\nimport {isEncodingNestedProp, Property} from '../property';\nimport {PropIndex} from '../propindex';\nimport {isWildcard, Wildcard} from '../wildcard';\nimport {Schema} from '../schema';\nimport { every} from '../util';\n\nimport {EncodingQueryBase} from '../query/encoding';\n\n/**\n * Abstract interface for a constraint.\n */\nexport interface AbstractConstraint {\n  name: string;\n  description: string;\n  properties: Property[];\n\n  /**\n   * Whether this constraint requires all specified properties types to be specific\n   * in order to call satisfy function.\n   */\n  allowWildcardForProperties: boolean;\n\n  /**\n   * Whether this constraint is strict (not optional).\n   */\n  strict: boolean;\n}\n\n/**\n * Abstract model for a constraint.\n */\nexport class AbstractConstraintModel {\n  protected constraint: AbstractConstraint;\n\n  constructor(constraint: AbstractConstraint) {\n    this.constraint = constraint;\n  }\n\n  public name(): string {\n    return this.constraint.name;\n  }\n\n  public description(): string {\n    return this.constraint.description;\n  }\n\n  public properties(): Property[] {\n    return this.constraint.properties;\n  }\n\n  public strict(): boolean {\n    return this.constraint.strict;\n  }\n}\n\n/**\n * Collection of constraints for a single encoding mapping.\n */\n\n/** A method for satisfying whether the provided encoding query satisfy the constraint. */\nexport interface EncodingConstraintChecker<E extends EncodingQueryBase> {\n  (encQ: E, schema: Schema, encWildcardIndex: PropIndex<Wildcard<any>>, opt: QueryConfig): boolean;\n}\n\nexport class EncodingConstraintModel<E extends EncodingQueryBase> extends AbstractConstraintModel {\n  constructor(constraint: EncodingConstraint<E>) {\n    super(constraint);\n  }\n\n  public hasAllRequiredPropertiesSpecific(encQ: E): boolean {\n    return every(this.constraint.properties, (prop: Property) => {\n\n      if (isEncodingNestedProp(prop)) {\n        let parent = prop.parent;\n        let child = prop.child;\n\n        if (!encQ[parent]) {\n          return true;\n        }\n\n        return !isWildcard(encQ[parent][child]);\n      }\n\n      if (!encQ[prop]) {\n        return true;\n      }\n\n      return !isWildcard(encQ[prop]);\n    });\n  }\n\n  public satisfy(encQ: E, schema: Schema, encWildcardIndex: PropIndex<Wildcard<any>>, opt: QueryConfig): boolean {\n    // TODO: Re-order logic to optimize the \"allowWildcardForProperties\" check\n    if (!this.constraint.allowWildcardForProperties) {\n      // TODO: extract as a method and do unit test\n\n      if (!this.hasAllRequiredPropertiesSpecific(encQ)) {\n        return true;\n      }\n    }\n    return (this.constraint as EncodingConstraint<E>).satisfy(encQ, schema, encWildcardIndex, opt);\n  }\n}\n\n/** Constraint for a single encoding mapping */\nexport interface EncodingConstraint<E extends EncodingQueryBase> extends AbstractConstraint {\n  /** Method for checking if the encoding query satisfies this constraint. */\n  satisfy: EncodingConstraintChecker<E>;\n}\n","import {QueryConfig} from '../config';\nimport {Property} from '../property';\nimport {PropIndex} from '../propindex';\nimport {Wildcard} from '../wildcard';\nimport {Schema} from '../schema';\nimport {contains} from '../util';\n\nimport {ValueQuery} from '../query/encoding';\nimport {EncodingConstraintModel, EncodingConstraint} from './base';\n\nexport const VALUE_CONSTRAINTS: EncodingConstraintModel<ValueQuery>[] = [\n  {\n    name: 'doesNotSupportConstantValue',\n    description: 'row, column, x, y, order, and detail should not work with constant values.',\n    properties: [Property.TYPE, Property.AGGREGATE],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (valueQ: ValueQuery, _: Schema, __: PropIndex<Wildcard<any>>, ___: QueryConfig) => {\n\n     return !(contains(['row', 'column', 'x', 'y', 'detail', 'order'], valueQ.channel));\n    }\n  }\n].map((ec: EncodingConstraint<ValueQuery>) => new EncodingConstraintModel<ValueQuery>(ec));\n\nexport const VALUE_CONSTRAINT_INDEX: {[name: string]: EncodingConstraintModel<ValueQuery>} =\n  VALUE_CONSTRAINTS.reduce((m, ec: EncodingConstraintModel<ValueQuery>) => {\n    m[ec.name()] = ec;\n    return m;\n  }, {});\n\nexport const VALUE_CONSTRAINTS_BY_PROPERTY =\n  VALUE_CONSTRAINTS.reduce((index, c) => {\n    for (const prop of c.properties()) {\n      index.set(prop, index.get(prop) || []);\n      index.get(prop).push(c);\n    }\n\n    return index;\n  }, new PropIndex<EncodingConstraintModel<ValueQuery>[]>());\n","import {SUM_OPS} from 'vega-lite/build/src/aggregate';\nimport {Channel, NONPOSITION_CHANNELS, supportMark} from 'vega-lite/build/src/channel';\nimport {Mark} from 'vega-lite/build/src/mark';\nimport {ScaleType} from 'vega-lite/build/src/scale';\nimport {Type} from 'vega-lite/build/src/type';\nimport {ExpandedType} from '../query/expandedtype';\nimport {AbstractConstraint, AbstractConstraintModel} from './base';\nimport {QueryConfig} from '../config';\nimport {isWildcard, Wildcard} from '../wildcard';\nimport {SpecQueryModel} from '../model';\nimport {isEncodingNestedProp, getEncodingNestedProp, Property, isEncodingProperty} from '../property';\nimport {PropIndex} from '../propindex';\nimport {Schema} from '../schema';\nimport {contains, every, some} from '../util';\nimport {scaleType, EncodingQuery, isDimension, isMeasure, ScaleQuery, isFieldQuery, FieldQuery, isValueQuery, isAutoCountQuery, isDisabledAutoCountQuery, isEnabledAutoCountQuery} from '../query/encoding';\n\nconst NONPOSITION_CHANNELS_INDEX = NONPOSITION_CHANNELS.reduce((m, channel) => {\n  m[channel] = true;\n  return m;\n}, {});\n\nexport interface SpecConstraintChecker {\n  (specM: SpecQueryModel, schema: Schema, opt: QueryConfig): boolean;\n}\n\nexport class SpecConstraintModel extends AbstractConstraintModel {\n  constructor(specConstraint: SpecConstraint) {\n    super(specConstraint);\n  }\n\n    public hasAllRequiredPropertiesSpecific(specM: SpecQueryModel): boolean {\n      return every(this.constraint.properties, (prop) => {\n        if (prop === Property.MARK) {\n          return !isWildcard(specM.getMark());\n        }\n\n        // TODO: transform\n\n        if (isEncodingNestedProp(prop)) {\n          let parent = prop.parent;\n          let child = prop.child;\n\n          return every(specM.getEncodings(), (encQ) => {\n            if (!encQ[parent]) {\n              return true;\n            }\n\n            return !isWildcard(encQ[parent][child]);\n          });\n        }\n\n        if (!isEncodingProperty(prop)) {\n          throw new Error('UNIMPLEMENTED');\n        }\n\n        return every(specM.getEncodings(), (encQ) => {\n          if (!encQ[prop]) {\n            return true;\n          }\n          return !isWildcard(encQ[prop]);\n        });\n      });\n    }\n\n  public satisfy(specM: SpecQueryModel, schema: Schema, opt: QueryConfig) {\n    // TODO: Re-order logic to optimize the \"allowWildcardForProperties\" check\n    if (!this.constraint.allowWildcardForProperties) {\n      if (!this.hasAllRequiredPropertiesSpecific(specM)) {\n        return true;\n      }\n    }\n\n    return (this.constraint as SpecConstraint).satisfy(specM, schema, opt);\n  }\n}\n\nexport interface SpecConstraint extends AbstractConstraint {\n  /** Method for checking if the spec query satisfies this constraint. */\n  satisfy: SpecConstraintChecker;\n}\n\nexport const SPEC_CONSTRAINTS: SpecConstraintModel[] = [\n  {\n    name: 'noRepeatedChannel',\n    description: 'Each encoding channel should only be used once.',\n    properties: [Property.CHANNEL],\n    allowWildcardForProperties: true,\n    strict: true,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      let usedChannel = {};\n\n      // channel for all encodings should be valid\n      return every(specM.getEncodings(), (encQ) => {\n        if (!isWildcard(encQ.channel)) {\n          // If channel is specified, it should no be used already\n          if (usedChannel[encQ.channel]) {\n            return false;\n          }\n          usedChannel[encQ.channel] = true;\n          return true;\n        }\n        return true; // unspecified channel is valid\n      });\n    }\n  },\n  {\n    name: 'alwaysIncludeZeroInScaleWithBarMark',\n    description: 'Do not recommend bar mark if scale does not start at zero',\n    properties: [Property.MARK, Property.SCALE, getEncodingNestedProp('scale', 'zero'), Property.CHANNEL, Property.TYPE],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      const mark = specM.getMark();\n      const encodings = specM.getEncodings();\n\n      if (mark === Mark.BAR) {\n        for (let encQ of encodings) {\n          if (isFieldQuery(encQ) &&\n            (encQ.channel === Channel.X || encQ.channel === Channel.Y) &&\n               (encQ.type === Type.QUANTITATIVE) &&\n               (encQ.scale && (encQ.scale as ScaleQuery).zero === false)) {\n            // TODO: zero shouldn't be manually specified\n            return false;\n          }\n        }\n      }\n\n      return true;\n    }\n  },\n  {\n    name: 'autoAddCount',\n    description: 'Automatically adding count only for plots with only ordinal, binned quantitative, or temporal with timeunit fields.',\n    properties: [Property.BIN, Property.TIMEUNIT, Property.TYPE, Property.AUTOCOUNT],\n    allowWildcardForProperties: true,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      const hasAutoCount =  some(specM.getEncodings(), (encQ: EncodingQuery) => isEnabledAutoCountQuery(encQ));\n\n      if (hasAutoCount) {\n        // Auto count should only be applied if all fields are nominal, ordinal, temporal with timeUnit, binned quantitative, or autoCount\n        return every(specM.getEncodings(), (encQ: EncodingQuery) => {\n          if (isValueQuery(encQ)) {\n            return false;\n          }\n\n          if (isAutoCountQuery(encQ)) {\n            return true;\n          }\n\n          switch (encQ.type) {\n            case Type.QUANTITATIVE:\n              return !!encQ.bin;\n            case Type.TEMPORAL:\n              return !!encQ.timeUnit;\n            case Type.ORDINAL:\n            case ExpandedType.KEY:\n            case Type.NOMINAL:\n              return true;\n          }\n          /* istanbul ignore next */\n          throw new Error('Unsupported Type');\n        });\n      } else {\n        const autoCountEncIndex = specM.wildcardIndex.encodingIndicesByProperty.get('autoCount') || [];\n        const neverHaveAutoCount = every(autoCountEncIndex, (index: number) => {\n          let encQ = specM.getEncodingQueryByIndex(index);\n          return isAutoCountQuery(encQ) && !isWildcard(encQ.autoCount);\n        });\n        if (neverHaveAutoCount) {\n          // If the query surely does not have autoCount\n          // then one of the field should be\n          // (1) unbinned quantitative\n          // (2) temporal without time unit\n          // (3) nominal or ordinal field\n          // or at least have potential to be (still ambiguous).\n          return some(specM.getEncodings(), (encQ: EncodingQuery) => {\n            if ((isFieldQuery(encQ) || isAutoCountQuery(encQ)) && encQ.type === Type.QUANTITATIVE) {\n\n              if (isDisabledAutoCountQuery(encQ)) {\n                return false;\n              } else {\n                return isFieldQuery(encQ) && (!encQ.bin || isWildcard(encQ.bin));\n              }\n            } else if (isFieldQuery(encQ) && encQ.type === Type.TEMPORAL) {\n              return !encQ.timeUnit || isWildcard(encQ.timeUnit);\n            }\n            return false; // nominal or ordinal\n          });\n        }\n      }\n\n      return true; // no auto count, no constraint\n    }\n  },\n  {\n    name: 'channelPermittedByMarkType',\n    description: 'Each encoding channel should be supported by the mark type',\n    properties: [Property.CHANNEL, Property.MARK],\n    allowWildcardForProperties: true, // only require mark\n    strict: true,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      const mark = specM.getMark();\n\n      // if mark is unspecified, no need to check\n      if (isWildcard(mark)) return true;\n\n      // TODO: can optimize this to detect only what's the changed property if needed.\n      return every(specM.getEncodings(), (encQ) => {\n        // channel unspecified, no need to check\n        if (isWildcard(encQ.channel)) return true;\n\n        return supportMark(encQ.channel, mark as Mark);\n      });\n    }\n  },\n  {\n    name: 'hasAllRequiredChannelsForMark',\n    description: 'All required channels for the specified mark should be specified',\n    properties: [Property.CHANNEL, Property.MARK],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      const mark = specM.getMark();\n\n      switch (mark) {\n        case Mark.AREA:\n        case Mark.LINE:\n          return specM.channelUsed(Channel.X) && specM.channelUsed(Channel.Y);\n        case Mark.TEXT:\n          return specM.channelUsed(Channel.TEXT);\n        case Mark.BAR:\n        case Mark.CIRCLE:\n        case Mark.SQUARE:\n        case Mark.TICK:\n        case Mark.RULE:\n        case Mark.RECT:\n          return specM.channelUsed(Channel.X) || specM.channelUsed(Channel.Y);\n        case Mark.POINT:\n          // This allows generating a point plot if channel was not a wildcard.\n          return !specM.wildcardIndex.hasProperty(Property.CHANNEL) ||\n                 specM.channelUsed(Channel.X) || specM.channelUsed(Channel.Y);\n      }\n      /* istanbul ignore next */\n      throw new Error('hasAllRequiredChannelsForMark not implemented for mark' + JSON.stringify(mark));\n    }\n  },\n  {\n    name: 'omitAggregate',\n    description: 'Omit aggregate plots.',\n    properties: [Property.AGGREGATE, Property.AUTOCOUNT],\n    allowWildcardForProperties: true,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      if (specM.isAggregate()) {\n        return false;\n      }\n      return true;\n    }\n  },\n  {\n    name: 'omitAggregatePlotWithDimensionOnlyOnFacet',\n    description: 'Omit aggregate plots with dimensions only on facets as that leads to inefficient use of space.',\n    properties: [Property.CHANNEL, Property.AGGREGATE, Property.AUTOCOUNT],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, opt: QueryConfig) => {\n      if (specM.isAggregate()) {\n        let hasNonFacetDim = false, hasDim = false, hasEnumeratedFacetDim = false;\n        specM.specQuery.encodings.forEach((encQ, index) => {\n          if (isValueQuery(encQ) || (isDisabledAutoCountQuery(encQ))) return; // skip unused field\n\n          // FieldQuery & !encQ.aggregate\n          if (isFieldQuery(encQ) && !encQ.aggregate) { // isDimension\n            hasDim = true;\n            if (contains([Channel.ROW, Channel.COLUMN], encQ.channel)) {\n              if (specM.wildcardIndex.hasEncodingProperty(index, Property.CHANNEL)) {\n                hasEnumeratedFacetDim = true;\n              }\n            } else {\n              hasNonFacetDim = true;\n            }\n          }\n        });\n        if (hasDim && !hasNonFacetDim) {\n          if (hasEnumeratedFacetDim || opt.constraintManuallySpecifiedValue) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n  },\n  {\n    name: 'omitAggregatePlotWithoutDimension',\n    description: 'Aggregate plots without dimension should be omitted',\n    properties: [Property.AGGREGATE, Property.AUTOCOUNT, Property.BIN, Property.TIMEUNIT, Property.TYPE],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      if (specM.isAggregate()) {\n        // TODO relax\n        return some(specM.getEncodings(), (encQ: EncodingQuery) => {\n          if (isDimension(encQ) || (isFieldQuery(encQ) && (encQ.type === 'temporal'))) {\n            return true;\n          }\n          return false;\n        });\n      }\n      return true;\n    }\n  },\n  {\n    // TODO: we can be smarter and check if bar has occlusion based on profiling statistics\n    name: 'omitBarLineAreaWithOcclusion',\n    description: 'Don\\'t use bar, line or area to visualize raw plot as they often lead to occlusion.',\n    properties: [Property.MARK, Property.AGGREGATE, Property.AUTOCOUNT],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      if (contains([Mark.BAR, Mark.LINE, Mark.AREA], specM.getMark())) {\n        return specM.isAggregate();\n      }\n      return true;\n    }\n  },\n  {\n    name: 'omitBarTickWithSize',\n    description: 'Do not map field to size channel with bar and tick mark',\n    properties: [Property.CHANNEL, Property.MARK],\n    allowWildcardForProperties: true,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, opt: QueryConfig) => {\n      const mark = specM.getMark();\n      if (contains([Mark.TICK, Mark.BAR], mark)) {\n        if (specM.channelUsed(Channel.SIZE)) {\n          if (opt.constraintManuallySpecifiedValue) {\n            // If size is used and we constraintManuallySpecifiedValue,\n            // then the spec violates this constraint.\n            return false;\n          } else {\n            // Otherwise have to search for the size channel and check if it is enumerated\n            const encodings = specM.specQuery.encodings;\n            for (let i = 0; i < encodings.length ; i++) {\n              const encQ = encodings[i];\n              if (encQ.channel === Channel.SIZE) {\n                if (specM.wildcardIndex.hasEncodingProperty(i, Property.CHANNEL)) {\n                  // If enumerated, then this is bad\n                  return false;\n                } else {\n                  // If it's manually specified, no need to continue searching, just return.\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      }\n      return true; // skip\n    }\n  },\n  {\n    name: 'omitBarAreaForLogScale',\n    description: 'Do not use bar and area mark for x and y\\'s log scale',\n    properties: [Property.MARK, Property.CHANNEL, Property.SCALE, getEncodingNestedProp('scale', 'type'), Property.TYPE],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      const mark = specM.getMark();\n      const encodings = specM.getEncodings();\n\n      // TODO: mark or scale type should be enumerated\n      if (mark === Mark.AREA || mark === Mark.BAR) {\n        for (let encQ of encodings) {\n          if(isFieldQuery(encQ) && ((encQ.channel === Channel.X || encQ.channel === Channel.Y) && encQ.scale)) {\n\n            let sType = scaleType(encQ);\n\n            if (sType === ScaleType.LOG) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    }\n  },\n  {\n    name: 'omitMultipleNonPositionalChannels',\n    description: 'Unless manually specified, do not use multiple non-positional encoding channel to avoid over-encoding.',\n    properties: [Property.CHANNEL],\n    allowWildcardForProperties: true,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, opt: QueryConfig) => {\n      // have to use specM.specQuery.encodings insetad of specM.getEncodings()\n      // since specM.getEncodings() remove encQ with autoCount===false from the array\n      // and thus might shift the index\n      const encodings = specM.specQuery.encodings;\n      let nonPositionChannelCount = 0;\n      let hasEnumeratedNonPositionChannel = false;\n\n      for (let i = 0; i < encodings.length; i++) {\n        const encQ = encodings[i];\n        if (isValueQuery(encQ) || (isDisabledAutoCountQuery(encQ)))  {\n          continue; // ignore skipped encoding\n        }\n\n        const channel = encQ.channel;\n        if (!isWildcard(channel)) {\n          if (NONPOSITION_CHANNELS_INDEX[channel + '']) {\n            nonPositionChannelCount += 1;\n            if (specM.wildcardIndex.hasEncodingProperty(i, Property.CHANNEL)) {\n              hasEnumeratedNonPositionChannel = true;\n            }\n            if ( nonPositionChannelCount > 1 &&\n                (hasEnumeratedNonPositionChannel || opt.constraintManuallySpecifiedValue)\n              ) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    }\n  },\n  {\n    name: 'omitNonPositionalOrFacetOverPositionalChannels',\n    description: 'Do not use non-positional channels unless all positional channels are used',\n    properties: [Property.CHANNEL],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, opt: QueryConfig) => {\n      const encodings = specM.specQuery.encodings;\n      let hasNonPositionalChannelOrFacet = false;\n      let hasEnumeratedNonPositionOrFacetChannel = false;\n      let hasX = false, hasY = false;\n      for (let i = 0; i < encodings.length; i++) {\n        const encQ = encodings[i];\n        if (isValueQuery(encQ) || (isDisabledAutoCountQuery(encQ))) {\n          continue; // ignore skipped encoding\n        }\n\n        const channel = encQ.channel;\n        if (channel === Channel.X) {\n          hasX = true;\n        } else if (channel === Channel.Y) {\n          hasY = true;\n        } else if (!isWildcard(channel)) {\n          // All non positional channel / Facet\n          hasNonPositionalChannelOrFacet = true;\n          if (specM.wildcardIndex.hasEncodingProperty(i, Property.CHANNEL)) {\n            hasEnumeratedNonPositionOrFacetChannel = true;\n          }\n        }\n      }\n\n      if ( hasEnumeratedNonPositionOrFacetChannel ||\n          (opt.constraintManuallySpecifiedValue && hasNonPositionalChannelOrFacet)\n        ) {\n        return hasX && hasY;\n      }\n      return true;\n    }\n  },\n  {\n    name: 'omitRaw',\n    description: 'Omit raw plots.',\n    properties: [Property.AGGREGATE, Property.AUTOCOUNT],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      if (!specM.isAggregate()) {\n        return false;\n      }\n      return true;\n    }\n  },\n  {\n    name: 'omitRawContinuousFieldForAggregatePlot',\n    description: 'Aggregate plot should not use raw continuous field as group by values. ' +\n      '(Quantitative should be binned. Temporal should have time unit.)',\n    properties: [Property.AGGREGATE, Property.AUTOCOUNT, Property.TIMEUNIT, Property.BIN, Property.TYPE],\n    allowWildcardForProperties: true,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, opt: QueryConfig) => {\n       if (specM.isAggregate()) {\n         const encodings = specM.specQuery.encodings;\n         for (let i = 0; i < encodings.length; i++) {\n           const encQ = encodings[i];\n           if (isValueQuery(encQ) || (isDisabledAutoCountQuery(encQ))) continue; // skip unused encoding\n\n           // TODO: aggregate for ordinal and temporal\n\n           if (isFieldQuery(encQ) && encQ.type === Type.TEMPORAL) {\n             // Temporal fields should have timeUnit or is still a wildcard\n             if (!encQ.timeUnit && (\n                  specM.wildcardIndex.hasEncodingProperty(i, Property.TIMEUNIT) ||\n                  opt.constraintManuallySpecifiedValue\n                )) {\n               return false;\n             }\n           }\n           if (encQ.type === Type.QUANTITATIVE) {\n             if (isFieldQuery(encQ) && !encQ.bin && !encQ.aggregate) {\n               // If Raw Q\n               if (specM.wildcardIndex.hasEncodingProperty(i, Property.BIN) ||\n                  specM.wildcardIndex.hasEncodingProperty(i, Property.AGGREGATE) ||\n                  specM.wildcardIndex.hasEncodingProperty(i, Property.AUTOCOUNT)\n                  ) {\n                 // and it's raw from enumeration\n                 return false;\n               }\n               if (opt.constraintManuallySpecifiedValue) {\n                 // or if we constraintManuallySpecifiedValue\n                 return false;\n               }\n             }\n           }\n         }\n       }\n       return true;\n    }\n  },\n  {\n    name: 'omitRawDetail',\n    description: 'Do not use detail channel with raw plot.',\n    properties: [Property.CHANNEL, Property.AGGREGATE, Property.AUTOCOUNT],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (specM: SpecQueryModel, _: Schema, opt: QueryConfig) => {\n      if (specM.isAggregate()) {\n        return true;\n      }\n      return every(specM.specQuery.encodings, (encQ, index) => {\n        if (isValueQuery(encQ) || (isDisabledAutoCountQuery(encQ))) return true; // ignore autoCount field\n\n        if (encQ.channel === Channel.DETAIL) {\n          // Detail channel for raw plot is not good, except when its enumerated\n          // or when it's manually specified but we constraintManuallySpecifiedValue.\n          if (specM.wildcardIndex.hasEncodingProperty(index, Property.CHANNEL) ||\n              opt.constraintManuallySpecifiedValue) {\n            return false;\n          }\n        }\n        return true;\n      });\n    }\n  },\n  {\n    name: 'omitRepeatedField',\n    description: 'Each field should be mapped to only one channel',\n    properties: [Property.FIELD],\n    allowWildcardForProperties: true,\n    strict: false, // over-encoding is sometimes good, but let's turn it off by default\n    satisfy: (specM: SpecQueryModel, _: Schema, opt: QueryConfig) => {\n      let fieldUsed = {};\n      let fieldEnumerated = {};\n\n      const encodings = specM.specQuery.encodings;\n      for (let i = 0; i < encodings.length ; i++) {\n        const encQ = encodings[i];\n\n        if (isValueQuery(encQ) || isAutoCountQuery(encQ)) continue;\n\n        let field;\n        if (encQ.field && !isWildcard(encQ.field)) {\n          field = encQ.field as string;\n        }\n        if (isAutoCountQuery(encQ) && !isWildcard(encQ.autoCount)) {\n          field = 'count_*';\n        }\n\n        if (field) {\n          if (specM.wildcardIndex.hasEncodingProperty(i, Property.FIELD)) {\n            fieldEnumerated[field] = true;\n          }\n          // When the field is specified previously,\n          // if it is enumerated (either previously or in this encQ)\n          // or if the opt.constraintManuallySpecifiedValue is true,\n          // then it violates the constraint.\n\n          if (fieldUsed[field]) {\n            if (fieldEnumerated[field] || opt.constraintManuallySpecifiedValue) {\n              return false;\n            }\n          }\n\n          fieldUsed[field] = true;\n        }\n      }\n      return true;\n    }\n  },\n  // TODO: omitShapeWithBin\n  {\n    name: 'omitVerticalDotPlot',\n    description: 'Do not output vertical dot plot.',\n    properties: [Property.CHANNEL],\n    allowWildcardForProperties: true,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      const encodings = specM.getEncodings();\n      if (encodings.length === 1 && encodings[0].channel === Channel.Y) {\n        return false;\n      }\n      return true;\n    }\n  },\n  // EXPENSIVE CONSTRAINTS -- check them later!\n  {\n    name: 'hasAppropriateGraphicTypeForMark',\n    description: 'Has appropriate graphic type for mark',\n    properties: [Property.CHANNEL, Property.MARK, Property.TYPE, Property.TIMEUNIT, Property.BIN, Property.AGGREGATE, Property.AUTOCOUNT],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      const mark = specM.getMark();\n\n      switch (mark) {\n        case Mark.AREA:\n        case Mark.LINE:\n          if (specM.isAggregate()) { // TODO: refactor based on profiling statistics\n            const xEncQ = specM.getEncodingQueryByChannel(Channel.X);\n            const yEncQ = specM.getEncodingQueryByChannel(Channel.Y);\n            const xIsMeasure = isMeasure(xEncQ);\n            const yIsMeasure = isMeasure(yEncQ);\n\n            // for aggregate line / area, we need at least one group-by axis and one measure axis.\n            return xEncQ && yEncQ && (xIsMeasure !== yIsMeasure) &&\n              // and the dimension axis should not be nominal\n              // TODO: make this clause optional\n\n              !(isFieldQuery(xEncQ) && !xIsMeasure && contains(['nominal', 'key'], xEncQ.type)) &&\n              !(isFieldQuery(yEncQ) && !yIsMeasure && contains(['nominal', 'key'], yEncQ.type));\n            // TODO: allow connected scatterplot\n          }\n          return true;\n        case Mark.TEXT:\n          // FIXME correctly when we add text\n          return true;\n        case Mark.BAR:\n        case Mark.TICK:\n          // Bar and tick should not use size.\n          if (specM.channelUsed(Channel.SIZE)) {\n            return false;\n          } else {\n            // Tick and Bar should have one and only one measure\n            const xEncQ = specM.getEncodingQueryByChannel(Channel.X);\n            const yEncQ = specM.getEncodingQueryByChannel(Channel.Y);\n            const xIsMeasure = isMeasure(xEncQ);\n            const yIsMeasure = isMeasure(yEncQ);\n            if (xIsMeasure !== yIsMeasure) {\n              return true;\n            }\n            return false;\n          }\n        case Mark.RECT:\n          // Until CompassQL supports layering, it only makes sense for\n          // rect to encode DxD or 1xD (otherwise just use bar).\n          // Furthermore, color should only be used in a 'heatmap' fashion\n          // (with a measure field).\n          const xEncQ = specM.getEncodingQueryByChannel(Channel.X);\n          const yEncQ = specM.getEncodingQueryByChannel(Channel.Y);\n          const xIsDimension = isDimension(xEncQ);\n          const yIsDimension = isDimension(yEncQ);\n\n          const colorEncQ = specM.getEncodingQueryByChannel(Channel.COLOR);\n          const colorIsQuantitative = isMeasure(colorEncQ);\n          const colorIsOrdinal = isFieldQuery(colorEncQ) ?\n              colorEncQ.type === Type.ORDINAL : false;\n\n          const correctChannels = (xIsDimension && yIsDimension) ||\n              (xIsDimension && !specM.channelUsed(Channel.Y)) ||\n              (yIsDimension && !specM.channelUsed(Channel.X));\n\n          const correctColor = !colorEncQ ||\n              (colorEncQ && (colorIsQuantitative || colorIsOrdinal));\n\n          return correctChannels && correctColor;\n        case Mark.CIRCLE:\n        case Mark.POINT:\n        case Mark.SQUARE:\n        case Mark.RULE:\n          return true;\n      }\n      /* istanbul ignore next */\n      throw new Error('hasAllRequiredChannelsForMark not implemented for mark' + mark);\n    }\n  },\n  {\n    name: 'omitInvalidStackSpec',\n    description: 'If stack is specified, must follow Vega-Lite stack rules',\n    properties: [Property.STACK, Property.FIELD, Property.CHANNEL, Property.MARK, Property.AGGREGATE, Property.AUTOCOUNT, Property.SCALE, getEncodingNestedProp('scale', 'type'), Property.TYPE],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      if (!specM.wildcardIndex.hasProperty(Property.STACK)) {\n        return true;\n      }\n      const stackProps = specM.getVlStack();\n      if (stackProps === null && specM.getStackOffset() !== null) {\n        return false;\n      }\n\n      if (stackProps.fieldChannel !== specM.getStackChannel()) {\n        return false;\n      }\n\n      return true;\n    }\n  },\n  {\n    name: 'omitNonSumStack',\n    description: 'Stack specifications that use non-summative aggregates should be omitted (even implicit ones)',\n    properties: [Property.CHANNEL, Property.MARK, Property.AGGREGATE, Property.AUTOCOUNT, Property.SCALE, getEncodingNestedProp('scale', 'type'), Property.TYPE],\n    allowWildcardForProperties: false,\n    strict: true,\n    satisfy: (specM: SpecQueryModel, _: Schema, __: QueryConfig) => {\n      const specStack = specM.getVlStack();\n      if (specStack != null) {\n        const stackParentEncQ = specM.getEncodingQueryByChannel(specStack.fieldChannel) as FieldQuery;\n        if (!contains(SUM_OPS, stackParentEncQ.aggregate)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  },\n  {\n    name: 'omitTableWithOcclusionIfAutoAddCount',\n    description: 'Plots without aggregation or autocount where x and y are both discrete should be omitted if autoAddCount is enabled as they often lead to occlusion',\n    properties: [Property.CHANNEL, Property.TYPE, Property.TIMEUNIT, Property.BIN, Property.AGGREGATE, Property.AUTOCOUNT],\n    allowWildcardForProperties: false,\n    strict: false,\n    satisfy: (specM: SpecQueryModel, _: Schema, opt: QueryConfig) => {\n      if(opt.autoAddCount) {\n        const xEncQ = specM.getEncodingQueryByChannel('x');\n        const yEncQ = specM.getEncodingQueryByChannel('y');\n\n        if ((!isFieldQuery(xEncQ) || isDimension(xEncQ)) &&\n            (!isFieldQuery(yEncQ) || isDimension(yEncQ))) {\n          if (!specM.isAggregate()) {\n            return false;\n          } else {\n            return every(specM.getEncodings(), (encQ) => {\n              let channel = encQ.channel;\n\n              if (channel !== Channel.X && channel !== Channel.Y &&\n                  channel !== Channel.ROW && channel !== Channel.COLUMN) {\n                // Non-position fields should not be unaggreated fields\n                if (isFieldQuery(encQ) && !encQ.aggregate) {\n                  return false;\n                }\n              }\n              return true;\n            });\n          }\n        }\n      }\n      return true;\n    }\n  }\n].map((sc) => new SpecConstraintModel(sc));\n\n// For testing\nexport const SPEC_CONSTRAINT_INDEX: {[name: string]: SpecConstraintModel} =\n  SPEC_CONSTRAINTS.reduce((m: any, c: SpecConstraintModel) => {\n    m[c.name()] = c;\n    return m;\n  }, {});\n\nconst SPEC_CONSTRAINTS_BY_PROPERTY =\n  SPEC_CONSTRAINTS.reduce((index, c) => {\n    for (const prop of c.properties()) {\n      // Initialize array and use it\n      index.set(prop, index.get(prop) || []);\n      index.get(prop).push(c);\n    }\n    return index;\n  }, new PropIndex<SpecConstraintModel[]>());\n\n/**\n * Check all encoding constraints for a particular property and index tuple\n */\nexport function checkSpec(prop: Property, wildcard: Wildcard<any>,\n  specM: SpecQueryModel, schema: Schema, opt: QueryConfig): string {\n\n  // Check encoding constraint\n  const specConstraints = SPEC_CONSTRAINTS_BY_PROPERTY.get(prop) || [];\n\n  for (const c of specConstraints) {\n    // Check if the constraint is enabled\n    if (c.strict() || !!opt[c.name()]) {\n      // For strict constraint, or enabled non-strict, check the constraints\n\n      const satisfy = c.satisfy(specM, schema, opt);\n      if (!satisfy) {\n        let violatedConstraint = '(spec) ' + c.name();\n        /* istanbul ignore if */\n        if (opt.verbose) {\n          console.log(violatedConstraint + ' failed with ' + specM.toShorthand() + ' for ' + wildcard.name);\n        }\n        return violatedConstraint;\n      }\n    }\n  }\n  return null;\n}\n","import {Channel} from 'vega-lite/build/src/channel';\nimport {Data} from 'vega-lite/build/src/data';\nimport {Mark} from 'vega-lite/build/src/mark';\nimport {Type} from 'vega-lite/build/src/type';\nimport {TopLevel, FacetedCompositeUnitSpec} from 'vega-lite/build/src/spec';\nimport {StackOffset, StackProperties} from 'vega-lite/build/src/stack';\nimport {QueryConfig} from './config';\nimport {Property, ENCODING_TOPLEVEL_PROPS, ENCODING_NESTED_PROPS, isEncodingNestedProp, isEncodingNestedParent} from './property';\nimport {Wildcard, SHORT_WILDCARD, initWildcard, isWildcard, getDefaultName, getDefaultEnumValues} from './wildcard';\nimport {WildcardIndex} from './wildcardindex';\nimport {SpecQuery, isAggregate, getVlStack, getStackOffset, getStackChannel} from './query/spec';\nimport {AutoCountQuery, isFieldQuery, isAutoCountQuery, isDisabledAutoCountQuery, EncodingQuery, toEncoding} from './query/encoding';\nimport {ExtendedGroupBy, parseGroupBy} from './query/groupby';\nimport {spec as specShorthand} from './query/shorthand';\nimport {RankingScore} from './ranking/ranking';\nimport {Schema} from './schema';\nimport {Dict, duplicate, extend} from './util';\nimport {isString} from 'datalib/src/util';\nimport {getGroupByKey} from './nest';\nimport {ResultTree} from './result';\n\n/**\n * Internal class for specQuery that provides helper for the enumeration process.\n */\nexport class SpecQueryModel {\n  private _spec: SpecQuery;\n\n  /** channel => EncodingQuery */\n  private _channelFieldCount: Dict<number>;\n  private _wildcardIndex: WildcardIndex;\n  private _assignedWildcardIndex: Dict<any>;\n  private _schema: Schema;\n  private _opt: QueryConfig;\n\n  private _rankingScore: Dict<RankingScore> = {};\n\n\n  /**\n   * Build a WildcardIndex by detecting wildcards\n   * in the input specQuery and replacing short wildcards (\"?\")\n   * with full ones (objects with `name` and `enum` values).\n   *\n   * @return a SpecQueryModel that wraps the specQuery and the WildcardIndex.\n   */\n  public static build(specQ: SpecQuery, schema: Schema, opt: QueryConfig): SpecQueryModel {\n    let wildcardIndex: WildcardIndex = new WildcardIndex();\n    // mark\n    if (isWildcard(specQ.mark)) {\n      const name = getDefaultName(Property.MARK);\n      specQ.mark = initWildcard(specQ.mark, name, opt.enum.mark);\n      wildcardIndex.setMark(specQ.mark);\n    }\n\n    // TODO: transform\n\n    // encodings\n    specQ.encodings.forEach((encQ, index) => {\n      if (isAutoCountQuery(encQ)) {\n        // This is only for testing purpose\n        console.warn('A field with autoCount should not be included as autoCount meant to be an internal object.');\n\n        encQ.type = Type.QUANTITATIVE; // autoCount is always quantitative\n      }\n\n      if (isFieldQuery(encQ) && encQ.type === undefined) {\n        // type is optional -- we automatically augment wildcard if not specified\n        encQ.type = SHORT_WILDCARD;\n      }\n\n      // For each property of the encodingQuery, enumerate\n      ENCODING_TOPLEVEL_PROPS.forEach((prop) => {\n        if(isWildcard(encQ[prop])) {\n          // Assign default wildcard name and enum values.\n          const defaultWildcardName = getDefaultName(prop) + index;\n          const defaultEnumValues = getDefaultEnumValues(prop, schema, opt);\n          const wildcard = encQ[prop] = initWildcard(encQ[prop], defaultWildcardName, defaultEnumValues);\n\n          // Add index of the encoding mapping to the property's wildcard index.\n          wildcardIndex.setEncodingProperty(index, prop, wildcard);\n        }\n      });\n\n      // For each nested property of the encoding query  (e.g., encQ.bin.maxbins)\n      ENCODING_NESTED_PROPS.forEach((prop) => {\n        const propObj = encQ[prop.parent]; // the property object e.g., encQ.bin\n        if (propObj) {\n          const child = prop.child;\n          if (isWildcard(propObj[child])) {\n\n            // Assign default wildcard name and enum values.\n            const defaultWildcardName = getDefaultName(prop) + index;\n            const defaultEnumValues = getDefaultEnumValues(prop, schema, opt);\n            const wildcard = propObj[child] = initWildcard(propObj[child], defaultWildcardName, defaultEnumValues);\n\n            // Add index of the encoding mapping to the property's wildcard index.\n            wildcardIndex.setEncodingProperty(index, prop, wildcard);\n          }\n        }\n      });\n    });\n\n    // AUTO COUNT\n    // Add Auto Count Field\n    if (opt.autoAddCount) {\n      const channel: Wildcard<Channel> = {\n        name: getDefaultName(Property.CHANNEL) + specQ.encodings.length,\n        enum: getDefaultEnumValues(Property.CHANNEL, schema, opt)\n      };\n      const autoCount: Wildcard<boolean> = {\n        name: getDefaultName(Property.AUTOCOUNT) + specQ.encodings.length,\n        enum: [false, true]\n      };\n      const countEncQ: AutoCountQuery = {\n        channel,\n        autoCount,\n        type: Type.QUANTITATIVE\n      };\n      specQ.encodings.push(countEncQ);\n\n      const index = specQ.encodings.length - 1;\n\n      // Add index of the encoding mapping to the property's wildcard index.\n      wildcardIndex.setEncodingProperty(index, Property.CHANNEL, channel);\n      wildcardIndex.setEncodingProperty(index, Property.AUTOCOUNT, autoCount);\n    }\n\n    return new SpecQueryModel(specQ, wildcardIndex, schema, opt, {});\n  }\n\n  constructor(spec: SpecQuery, wildcardIndex: WildcardIndex, schema: Schema, opt: QueryConfig, wildcardAssignment: Dict<any>) {\n    this._spec = spec;\n    this._channelFieldCount = spec.encodings.reduce((m, encQ) => {\n      if (!isWildcard(encQ.channel) && (!isAutoCountQuery(encQ) || encQ.autoCount !== false)) {\n        m[encQ.channel + ''] = 1;\n      }\n      return m;\n    }, {} as Dict<number>);\n\n    this._wildcardIndex = wildcardIndex;\n    this._assignedWildcardIndex = wildcardAssignment;\n    this._opt = opt;\n    this._schema = schema;\n  }\n\n  public get wildcardIndex() {\n    return this._wildcardIndex;\n  }\n\n  public get schema() {\n    return this._schema;\n  }\n\n  public get specQuery() {\n    return this._spec;\n  }\n\n  public duplicate(): SpecQueryModel {\n    return new SpecQueryModel(duplicate(this._spec), this._wildcardIndex, this._schema, this._opt, duplicate(this._assignedWildcardIndex));\n  }\n\n  public setMark(mark: Mark) {\n    const name = this._wildcardIndex.mark.name;\n    this._assignedWildcardIndex[name] = this._spec.mark = mark;\n  }\n\n  public resetMark() {\n    const wildcard = this._spec.mark = this._wildcardIndex.mark;\n    delete this._assignedWildcardIndex[wildcard.name];\n  }\n\n  public getMark() {\n    return this._spec.mark;\n  }\n\n  public getEncodingProperty(index: number, prop: Property) {\n    const encQ = this._spec.encodings[index];\n    if (isEncodingNestedProp(prop)) { // nested encoding property\n      return encQ[prop.parent][prop.child];\n    }\n    return encQ[prop]; // encoding property (non-nested)\n  }\n\n  public setEncodingProperty(index: number, prop: Property, value: any, wildcard: Wildcard<any>) {\n    const encQ = this._spec.encodings[index];\n\n    if (prop === Property.CHANNEL && encQ.channel && !isWildcard(encQ.channel)) {\n      // If there is an old channel\n      this._channelFieldCount[encQ.channel as Channel]--;\n    }\n\n\n    if (isEncodingNestedProp(prop)) { // nested encoding property\n      encQ[prop.parent][prop.child] = value;\n    } else if (isEncodingNestedParent(prop) && value === true) {\n      encQ[prop] = extend({},\n        encQ[prop], // copy all existing properties\n        {enum: undefined, name: undefined} // except name and values to it no longer an wildcard\n      );\n    } else { // encoding property (non-nested)\n      encQ[prop] = value;\n    }\n\n    this._assignedWildcardIndex[wildcard.name] = value;\n\n    if (prop === Property.CHANNEL) {\n      // If there is a new channel, make sure it exists and add it to the count.\n      this._channelFieldCount[value] = (this._channelFieldCount[value] || 0) + 1;\n    }\n  }\n\n  public resetEncodingProperty(index: number, prop: Property, wildcard: Wildcard<any>) {\n    const encQ = this._spec.encodings[index];\n    if (prop === Property.CHANNEL) {\n      this._channelFieldCount[encQ.channel as Channel]--;\n    }\n\n    // reset it to wildcard\n    if (isEncodingNestedProp(prop)) { // nested encoding property\n      encQ[prop.parent][prop.child] = wildcard;\n    } else { // encoding property (non-nested)\n      encQ[prop] = wildcard;\n    }\n\n    // add remove value that is reset from the assignment map\n    delete this._assignedWildcardIndex[wildcard.name];\n  }\n\n  public channelUsed(channel: Channel) {\n    // do not include encoding that has autoCount = false because it is not a part of the output spec.\n    return this._channelFieldCount[channel] > 0;\n  }\n\n  public getEncodings(): EncodingQuery[] {\n    // do not include encoding that has autoCount = false because it is not a part of the output spec.\n    return this._spec.encodings.filter(encQ => !isDisabledAutoCountQuery(encQ));\n  }\n\n  public getEncodingQueryByChannel(channel: Channel) {\n    for (let specEncoding of this._spec.encodings) {\n      if (specEncoding.channel === channel) {\n        return specEncoding;\n      }\n    }\n    return undefined;\n  }\n\n  public getEncodingQueryByIndex(i: number) {\n    return this._spec.encodings[i];\n  }\n\n  public isAggregate() {\n    return isAggregate(this._spec);\n  }\n\n  /**\n   * @return The Vega-Lite `StackProperties` object that describes the stack\n   * configuration of `this`. Returns `null` if this is not stackable.\n   */\n  public getVlStack(): StackProperties {\n    return getVlStack(this._spec);\n  }\n\n  /**\n   * @return The `StackOffset` specified in `this`, `undefined` if none\n   * is specified.\n   */\n  public getStackOffset(): StackOffset {\n    return getStackOffset(this._spec);\n  }\n\n  /**\n   * @return The `Channel` in which `stack` is specified in `this`, or\n   * `null` if none is specified.\n   */\n  public getStackChannel(): Channel {\n    return getStackChannel(this._spec);\n  }\n\n  public toShorthand(groupBy?: string | (string | ExtendedGroupBy)[]): string {\n    if (groupBy) {\n      if (isString(groupBy)) {\n        return getGroupByKey(this.specQuery, groupBy);\n      }\n      const parsedGroupBy = parseGroupBy(groupBy);\n      return specShorthand(this._spec, parsedGroupBy.include, parsedGroupBy.replacer);\n    }\n    return specShorthand(this._spec);\n  }\n\n  /**\n   * Convert a query to a Vega-Lite spec if it is completed.\n   * @return a Vega-Lite spec if completed, null otherwise.\n   */\n  public toSpec(data?: Data): TopLevel<FacetedCompositeUnitSpec> {\n    if (isWildcard(this._spec.mark)) return null;\n\n    let spec: any = {};\n    data = data || this._spec.data;\n    if (data) {\n      spec.data = data;\n    }\n\n    if (this._spec.transform) {\n      spec.transform = this._spec.transform;\n    }\n\n    spec.mark = this._spec.mark as Mark;\n    spec.encoding = toEncoding(this.specQuery.encodings, {schema: this._schema, wildcardMode: 'null'});\n\n    if (this._spec.width) {\n      spec.width = this._spec.width;\n    }\n    if (this._spec.height) {\n      spec.height = this._spec.height;\n    }\n    if (this._spec.background) {\n      spec.background = this._spec.background;\n    }\n    if (this._spec.padding) {\n      spec.padding = this._spec.padding;\n    }\n    if(this._spec.title) {\n      spec.title = this._spec.title;\n    }\n\n    if (spec.encoding === null) {\n      return null;\n    }\n    if (this._spec.config || this._opt.defaultSpecConfig)\n    spec.config = extend({}, this._opt.defaultSpecConfig, this._spec.config);\n\n    return spec;\n  }\n\n  public getRankingScore(rankingName: string) {\n    return this._rankingScore[rankingName];\n  }\n\n  public setRankingScore(rankingName: string, score: RankingScore) {\n    this._rankingScore[rankingName] = score;\n  }\n}\nexport type SpecQueryModelGroup = ResultTree<SpecQueryModel>;\n","import {Mark} from 'vega-lite/build/src/mark';\n\nimport {Wildcard} from './wildcard';\nimport {Property, isEncodingProperty} from './property';\nimport {PropIndex} from './propindex';\n\n\nexport interface EncodingsWildcardIndex {\n  [index: number]: PropIndex<Wildcard<any>>;\n}\n\nexport class WildcardIndex {\n  private _mark: Wildcard<Mark>;\n  // TODO: transform\n\n  /**\n   * Dictionary mapping encoding index to an encoding wildcard index.\n   */\n\n  private _encodings: EncodingsWildcardIndex;\n  private _encodingIndicesByProperty: PropIndex<number[]>;\n\n  constructor() {\n    this._mark = undefined;\n    this._encodings = {};\n    this._encodingIndicesByProperty = new PropIndex<number[]>();\n  }\n\n  public setEncodingProperty(index: number, prop: Property, wildcard: Wildcard<any>) {\n    const encodingsIndex = this._encodings;\n\n    // Init encoding index and set prop\n    const encIndex = encodingsIndex[index] = encodingsIndex[index] || new PropIndex<Wildcard<any>>();\n    encIndex.set(prop, wildcard);\n\n    // Initialize indicesByProperty[prop] and add index\n    const indicesByProp = this._encodingIndicesByProperty;\n    indicesByProp.set(prop, (indicesByProp.get(prop) || []));\n    indicesByProp.get(prop).push(index);\n\n    return this;\n  }\n\n  public hasEncodingProperty(index: number, prop: Property) {\n    return !!this._encodings[index] && this._encodings[index].has(prop);\n  }\n\n  public hasProperty(prop: Property) {\n    if (isEncodingProperty(prop)) {\n      return this.encodingIndicesByProperty.has(prop);\n    } else if (prop === 'mark') {\n      return !!this.mark;\n    }\n    /* istanbul ignore next */\n    throw new Error('Unimplemented for property ' + prop);\n  }\n\n  public isEmpty() {\n    return !this.mark && this.encodingIndicesByProperty.size() === 0;\n  }\n\n  public setMark(mark: Wildcard<Mark>) {\n    this._mark = mark;\n    return this;\n  }\n\n  public get mark() {\n    return this._mark;\n  }\n\n  public get encodings() {\n    return this._encodings;\n  }\n\n  public get encodingIndicesByProperty() {\n    return this._encodingIndicesByProperty;\n  }\n}\n","import {isArray, isObject} from 'datalib/src/util';\n\nimport {getReplacerIndex} from './shorthand';\nimport {Property} from '../property';\nimport {PropIndex} from '../propindex';\nimport {Dict,keys} from '../util';\n\n\nexport interface ExtendedGroupBy {\n  property: string;\n  replace?: Dict<string>;\n}\n\nexport const REPLACE_BLANK_FIELDS: Dict<string> = {'*': ''};\nexport const REPLACE_XY_CHANNELS: Dict<string> = {x: 'xy', y: 'xy'};\nexport const REPLACE_FACET_CHANNELS: Dict<string> = {row: 'facet', column: 'facet'};\nexport const REPLACE_MARK_STYLE_CHANNELS: Dict<string> = {color: 'style', opacity: 'style', shape: 'style', size: 'style'};\n\nexport function isExtendedGroupBy(g: string | ExtendedGroupBy): g is ExtendedGroupBy {\n  return isObject(g) && !!g['property'];\n}\n\nexport type GroupBy = string | Array<string | ExtendedGroupBy>;\n\nexport interface Nest {\n  groupBy: GroupBy;\n  orderGroupBy?: string | string[];\n}\n\n\nexport function parseGroupBy(groupBy: Array<string | ExtendedGroupBy>,\n    include?: PropIndex<boolean>,\n    replaceIndex?: PropIndex<Dict<string>>\n  ) {\n\n  include = include || new PropIndex<boolean>();\n  replaceIndex = replaceIndex || new PropIndex<Dict<string>>();\n\n  groupBy.forEach((grpBy: string | ExtendedGroupBy) => {\n    if (isExtendedGroupBy(grpBy)) {\n      include.setByKey(grpBy.property, true);\n      replaceIndex.setByKey(grpBy.property, grpBy.replace);\n    } else {\n      include.setByKey(grpBy, true);\n    }\n  });\n\n  return {\n    include: include,\n    replaceIndex: replaceIndex,\n    replacer: getReplacerIndex(replaceIndex)\n  };\n}\n\nexport function toString(groupBy: GroupBy): string {\n  if (isArray(groupBy)) {\n    return groupBy.map((g: string | ExtendedGroupBy) => {\n      if (isExtendedGroupBy(g)) {\n        if (g.replace) {\n          let replaceIndex = keys(g.replace).reduce((index, valFrom) => {\n          const valTo = g.replace[valFrom];\n            (index[valTo] = index[valTo] || []).push(valFrom);\n            return index;\n          }, {});\n\n          return g.property + '[' + keys(replaceIndex).map((valTo) => {\n            const valsFrom = replaceIndex[valTo].sort();\n            return valsFrom.join(',') + '=>' + valTo;\n          }).join(';') + ']';\n        }\n        return g.property;\n      }\n      return g;\n    }).join(',');\n  } else {\n    return groupBy;\n  }\n}\n\nexport const GROUP_BY_FIELD_TRANSFORM = [\n  Property.FIELD, Property.TYPE,\n  Property.AGGREGATE, Property.BIN, Property.TIMEUNIT, Property.STACK\n];\n\nexport const GROUP_BY_ENCODING = (GROUP_BY_FIELD_TRANSFORM as Array<string | ExtendedGroupBy>).concat([\n  {\n    property: Property.CHANNEL,\n    replace: {\n      'x': 'xy', 'y': 'xy',\n      'color': 'style', 'size': 'style', 'shape': 'style', 'opacity': 'style',\n      'row': 'facet', 'column': 'facet'\n    }\n  }\n]);\n\n","\nimport {isArray} from 'datalib/src/util';\n\nimport { SpecQueryModel, SpecQueryModelGroup } from './model';\nimport {Property} from './property';\nimport {PropIndex} from './propindex';\nimport {Dict} from './util';\n\nimport {parseGroupBy, GROUP_BY_FIELD_TRANSFORM, GROUP_BY_ENCODING} from './query/groupby';\nimport {spec as specShorthand, Replacer} from './query/shorthand';\nimport {SpecQuery} from './query/spec';\nimport {Nest} from './query/groupby';\n\n\n/**\n * Registry for all possible grouping key functions.\n */\nlet groupRegistry: Dict<(specM: SpecQuery) => string> = {};\n\n/**\n * Add a grouping function to the registry.\n */\nexport function registerKeyFn(name: string, keyFn: (specM: SpecQuery) => string) {\n  groupRegistry[name] = keyFn;\n}\n\nexport const FIELD = 'field';\nexport const FIELD_TRANSFORM = 'fieldTransform';\nexport const ENCODING = 'encoding';\nexport const SPEC = 'spec';\n\n/**\n * Group the input spec query model by a key function registered in the group registry\n * @return\n */\nexport function nest(specModels: SpecQueryModel[], queryNest: Nest[]): SpecQueryModelGroup {\n  if (queryNest) {\n    const rootGroup: SpecQueryModelGroup = {\n      name: '',\n      path: '',\n      items: [],\n    };\n    let groupIndex: Dict<SpecQueryModelGroup> = {};\n\n    // global `includes` and `replaces` will get augmented by each level's groupBy.\n    // Upper level's `groupBy` will get cascaded to lower-level groupBy.\n    // `replace` can be overriden in a lower-level to support different grouping.\n    let includes: Array<PropIndex<boolean>> = [];\n    let replaces: Array<PropIndex<Dict<string>>> = [];\n    let replacers: Array<PropIndex<Replacer>> = [];\n\n    for (let l = 0 ; l < queryNest.length; l++) {\n      includes.push(l > 0 ? includes[l-1].duplicate() : new PropIndex<boolean>());\n      replaces.push(l > 0 ? replaces[l-1].duplicate() : new PropIndex<Dict<string>>());\n\n      const groupBy = queryNest[l].groupBy;\n      if (isArray(groupBy)) {\n        // If group is array, it's an array of extended group by that need to be parsed\n        let parsedGroupBy = parseGroupBy(groupBy, includes[l], replaces[l]);\n        replacers.push(parsedGroupBy.replacer);\n      }\n    }\n\n    // With includes and replacers, now we can construct the nesting tree\n\n    specModels.forEach((specM) => {\n      let path = '';\n      let group: SpecQueryModelGroup = rootGroup;\n      for (let l = 0 ; l < queryNest.length; l++) {\n        const groupBy = group.groupBy = queryNest[l].groupBy;\n        group.orderGroupBy = queryNest[l].orderGroupBy;\n\n        const key = isArray(groupBy) ?\n          specShorthand(specM.specQuery, includes[l], replacers[l]) :\n          groupRegistry[groupBy](specM.specQuery);\n\n        path += '/' + key;\n        if (!groupIndex[path]) { // this item already exists on the path\n          groupIndex[path] = {\n            name: key,\n            path: path,\n            items: [],\n          };\n\n          group.items.push(groupIndex[path]);\n        }\n        group = groupIndex[path];\n      }\n      group.items.push(specM);\n    });\n    return rootGroup;\n  } else {\n    // no nesting, just return a flat group\n    return {\n      name: '',\n      path: '',\n      items: specModels,\n    };\n  }\n}\n\n// TODO: move this to groupBy, rename properly, and export\nconst GROUP_BY_FIELD = [Property.FIELD];\nconst PARSED_GROUP_BY_FIELD = parseGroupBy(GROUP_BY_FIELD);\n\nexport function getGroupByKey(specM: SpecQuery, groupBy: string) {\n  return groupRegistry[groupBy](specM);\n}\n\nregisterKeyFn(FIELD, (specQ: SpecQuery) => {\n  return specShorthand(specQ,\n    PARSED_GROUP_BY_FIELD.include,\n    PARSED_GROUP_BY_FIELD.replacer\n  );\n});\n\nexport const PARSED_GROUP_BY_FIELD_TRANSFORM = parseGroupBy(GROUP_BY_FIELD_TRANSFORM);\n\nregisterKeyFn(FIELD_TRANSFORM, (specQ: SpecQuery) => {\n  return specShorthand(specQ,\n    PARSED_GROUP_BY_FIELD_TRANSFORM.include,\n    PARSED_GROUP_BY_FIELD_TRANSFORM.replacer\n  );\n});\n\n\nexport const PARSED_GROUP_BY_ENCODING = parseGroupBy(GROUP_BY_ENCODING);\n\nregisterKeyFn(ENCODING, (specQ: SpecQuery) => {\n  return specShorthand(specQ,\n    PARSED_GROUP_BY_ENCODING.include,\n    PARSED_GROUP_BY_ENCODING.replacer\n  );\n});\n\nregisterKeyFn(SPEC, (specQ: SpecQuery) => JSON.stringify(specQ));\n","import {Channel} from 'vega-lite/build/src/channel';\nimport {hasDiscreteDomain} from 'vega-lite/build/src/scale';\nimport {Type} from 'vega-lite/build/src/type';\n\nimport {QueryConfig} from './config';\nimport {SpecQueryModel} from './model';\nimport {AxisQuery, EncodingQuery, ScaleQuery, scaleType, isFieldQuery} from './query/encoding';\nimport {ExpandedType} from './query/expandedtype';\nimport {Schema} from './schema';\nimport {Dict} from './util';\n\nexport function stylize(answerSet: SpecQueryModel[], schema: Schema, opt: QueryConfig): SpecQueryModel[] {\n  let encQIndex: Dict<EncodingQuery> = {};\n  answerSet = answerSet.map(function(specM) {\n    if (opt.smallRangeStepForHighCardinalityOrFacet) {\n      specM = smallRangeStepForHighCardinalityOrFacet(specM, schema, encQIndex, opt);\n     }\n\n    if (opt.nominalColorScaleForHighCardinality) {\n      specM = nominalColorScaleForHighCardinality(specM, schema, encQIndex, opt);\n    }\n\n    if (opt.xAxisOnTopForHighYCardinalityWithoutColumn) {\n      specM = xAxisOnTopForHighYCardinalityWithoutColumn(specM, schema, encQIndex, opt);\n    }\n    return specM;\n  });\n\n  return answerSet;\n}\n\nexport function smallRangeStepForHighCardinalityOrFacet(specM: SpecQueryModel, schema: Schema, encQIndex: Dict<EncodingQuery>, opt: QueryConfig): SpecQueryModel {\n  [Channel.ROW, Channel.Y, Channel.COLUMN, Channel.X].forEach((channel) => {\n    encQIndex[channel] = specM.getEncodingQueryByChannel(channel);\n  });\n\n  const yEncQ = encQIndex[Channel.Y];\n  if (yEncQ !== undefined && isFieldQuery(yEncQ)) {\n    if (encQIndex[Channel.ROW] ||\n        schema.cardinality(yEncQ) > opt.smallRangeStepForHighCardinalityOrFacet.maxCardinality) {\n\n      // We check for undefined rather than\n      // yEncQ.scale = yEncQ.scale || {} to cover the case where\n      // yEncQ.scale has been set to false/null.\n      // This prevents us from incorrectly overriding scale and\n      // assigning a rangeStep when scale is set to false.\n      if (yEncQ.scale === undefined) {\n        yEncQ.scale = {};\n      }\n\n      // We do not want to assign a rangeStep if scale is set to false\n      // and we only apply this if the scale is (or can be) an ordinal scale.\n      const yScaleType = scaleType(yEncQ);\n      if (yEncQ.scale && (yScaleType === undefined || hasDiscreteDomain(yScaleType))) {\n        if (!(yEncQ.scale as ScaleQuery).rangeStep) {\n          (yEncQ.scale as ScaleQuery).rangeStep = 12;\n        }\n      }\n    }\n  }\n\n  const xEncQ = encQIndex[Channel.X];\n  if (isFieldQuery(xEncQ)) {\n    if (encQIndex[Channel.COLUMN] ||\n        schema.cardinality(xEncQ) > opt.smallRangeStepForHighCardinalityOrFacet.maxCardinality) {\n\n      // Just like y, we don't want to do this if scale is null/false\n      if (xEncQ.scale === undefined) {\n        xEncQ.scale = {};\n      }\n\n      // We do not want to assign a rangeStep if scale is set to false\n      // and we only apply this if the scale is (or can be) an ordinal scale.\n      const xScaleType = scaleType(xEncQ);\n      if (xEncQ.scale && (xScaleType === undefined || hasDiscreteDomain(xScaleType))) {\n        if (!(xEncQ.scale as ScaleQuery).rangeStep) {\n          (xEncQ.scale as ScaleQuery).rangeStep = 12;\n        }\n      }\n    }\n  }\n\n  return specM;\n}\n\nexport function nominalColorScaleForHighCardinality(specM: SpecQueryModel, schema: Schema, encQIndex: Dict<EncodingQuery>, opt: QueryConfig): SpecQueryModel {\n  encQIndex[Channel.COLOR] = specM.getEncodingQueryByChannel(Channel.COLOR);\n\n  const colorEncQ = encQIndex[Channel.COLOR];\n  if (isFieldQuery(colorEncQ) && (colorEncQ !== undefined) && (colorEncQ.type === Type.NOMINAL || colorEncQ.type === ExpandedType.KEY) &&\n      (schema.cardinality(colorEncQ) > opt.nominalColorScaleForHighCardinality.maxCardinality)) {\n\n    if (colorEncQ.scale === undefined) {\n      colorEncQ.scale = {};\n    }\n\n    if (colorEncQ.scale) {\n      if (!(colorEncQ.scale as ScaleQuery).range) {\n        (colorEncQ.scale as ScaleQuery).scheme = opt.nominalColorScaleForHighCardinality.palette;\n      }\n    }\n  }\n\n  return specM;\n}\n\nexport function xAxisOnTopForHighYCardinalityWithoutColumn(specM: SpecQueryModel, schema: Schema, encQIndex: Dict<EncodingQuery>, opt: QueryConfig): SpecQueryModel {\n  [Channel.COLUMN, Channel.X, Channel.Y].forEach((channel) => {\n    encQIndex[channel] = specM.getEncodingQueryByChannel(channel);\n  });\n\n  if (encQIndex[Channel.COLUMN] === undefined) {\n    const xEncQ = encQIndex[Channel.X];\n    const yEncQ = encQIndex[Channel.Y];\n    if (isFieldQuery(xEncQ) && isFieldQuery(yEncQ) && yEncQ !== undefined && yEncQ.field && hasDiscreteDomain(scaleType(yEncQ))) {\n      if (xEncQ !== undefined) {\n        if (schema.cardinality(yEncQ) > opt.xAxisOnTopForHighYCardinalityWithoutColumn.maxCardinality) {\n\n          if (xEncQ.axis === undefined) {\n            xEncQ.axis = {};\n          }\n\n          if (xEncQ.axis && !(xEncQ.axis as AxisQuery).orient) {\n            (xEncQ.axis as AxisQuery).orient = 'top';\n          }\n        }\n      }\n    }\n  }\n\n  return specM;\n}\n","import {Query} from './query';\nimport {Nest} from './groupby';\nimport {duplicate} from '../util';\n\n/**\n * Normalize the non-nested version of the query\n * (basically when you have a `groupBy`)\n * to a standardize nested.\n */\nexport function normalize(q: Query): Query {\n  if (q.groupBy) {\n    let nest: Nest = {\n      groupBy: q.groupBy\n    };\n\n    if (q.orderBy) {\n      nest.orderGroupBy = q.orderBy;\n    }\n\n    let normalizedQ: Query = {\n      spec: duplicate(q.spec), // We will cause side effect to q.spec in SpecQueryModel.build\n      nest: [nest],\n    };\n\n    if (q.chooseBy) {\n      normalizedQ.chooseBy = q.chooseBy;\n    }\n\n    if (q.config) {\n      normalizedQ.config = q.config;\n    }\n\n    return normalizedQ;\n  }\n  return duplicate(q); // We will cause side effect to q.spec in SpecQueryModel.build\n}\n","import {QueryConfig} from '../config';\nimport {SpecQueryModel, SpecQueryModelGroup} from '../model';\nimport {getTopResultTreeItem} from '../result';\nimport {Query} from '../query/query';\nimport {Dict} from '../util';\nimport {Schema} from '../schema';\nimport {effectiveness} from './effectiveness';\n\nexport * from './effectiveness';\nimport * as aggregation from './aggregation';\nimport * as fieldOrder from './fieldorder';\n\nexport {aggregation, fieldOrder};\n\nexport interface RankingScore {\n  score: number;\n  features: FeatureScore[];\n}\n\nexport interface FeatureScore {\n  score: number;\n  type: string;\n  feature: string;\n}\n\nexport interface FeatureInitializer {\n  (): Dict<number>;\n}\n\nexport interface Featurizer {\n  (specM: SpecQueryModel, schema: Schema, opt: QueryConfig): FeatureScore[];\n}\n\nexport interface FeatureFactory {\n  type: string;\n  init: FeatureInitializer;\n  getScore: Featurizer;\n}\n\nexport interface RankingFunction {\n  (specM: SpecQueryModel, schema: Schema, opt: QueryConfig): RankingScore;\n}\n\n/**\n * Registry for all encoding ranking functions\n */\nlet rankingRegistry: Dict<RankingFunction>  = {};\n\n/**\n * Add an ordering function to the registry.\n */\nexport function register(name: string, keyFn: RankingFunction) {\n  rankingRegistry[name] = keyFn;\n}\n\nexport function get(name: string) {\n  return rankingRegistry[name];\n}\n\nexport function rank(group: SpecQueryModelGroup, query: Query, schema: Schema, level: number): SpecQueryModelGroup {\n  if (!query.nest || level === query.nest.length) {\n    if (query.orderBy || query.chooseBy) {\n      group.items.sort(comparatorFactory(query.orderBy || query.chooseBy, schema, query.config));\n      if (query.chooseBy) {\n        if (group.items.length > 0) {\n          // for chooseBy -- only keep the top-item\n          group.items.splice(1);\n        }\n      }\n    }\n  } else {\n    // sort lower-level nodes first because our ranking takes top-item in the subgroup\n    group.items.forEach((subgroup) => {\n      rank(subgroup as SpecQueryModelGroup, query, schema, level + 1);\n    });\n    if (query.nest[level].orderGroupBy) {\n      group.items.sort(groupComparatorFactory(query.nest[level].orderGroupBy, schema, query.config));\n    }\n  }\n  return group;\n}\n\nexport function comparatorFactory(name: string | string[], schema: Schema, opt: QueryConfig) {\n  return (m1: SpecQueryModel, m2: SpecQueryModel) => {\n    if (name instanceof Array) {\n      return getScoreDifference(name, m1, m2, schema, opt);\n    } else {\n      return getScoreDifference([name], m1, m2, schema, opt);\n    }\n  };\n}\n\nexport function groupComparatorFactory(name: string | string[], schema: Schema, opt: QueryConfig): (g1: SpecQueryModelGroup, g2: SpecQueryModelGroup) => number {\n  return (g1: SpecQueryModelGroup, g2: SpecQueryModelGroup): number => {\n    const m1 = getTopResultTreeItem(g1);\n    const m2 = getTopResultTreeItem(g2);\n    if (name instanceof Array) {\n      return getScoreDifference(name, m1, m2, schema, opt);\n    } else {\n      return getScoreDifference([name], m1, m2, schema, opt);\n    }\n  };\n}\n\nfunction getScoreDifference(name: string[], m1: SpecQueryModel, m2: SpecQueryModel, schema: Schema, opt: QueryConfig): number {\n  for (let rankingName of name) {\n    let scoreDifference = getScore(m2, rankingName, schema, opt).score - getScore(m1, rankingName, schema, opt).score;\n    if (scoreDifference !== 0) {\n      return scoreDifference;\n    }\n  }\n  return 0;\n}\n\nexport function getScore(model: SpecQueryModel, rankingName: string, schema: Schema, opt: QueryConfig) {\n  if (model.getRankingScore(rankingName) !== undefined) {\n    return model.getRankingScore(rankingName);\n  }\n  const fn = get(rankingName);\n  const score = fn(model, schema, opt);\n  model.setRankingScore(rankingName, score);\n  return score;\n}\n\nexport const EFFECTIVENESS = 'effectiveness';\nregister(EFFECTIVENESS, effectiveness);\n\nregister(aggregation.name, aggregation.score);\nregister(fieldOrder.name, fieldOrder.score);\n","import {GroupBy} from './query/groupby';\n\n/**\n * An ordered tree structure for storing query results.\n */\nexport interface ResultTree<T> {\n  name: string;\n  path: string;\n  items: (ResultTree<T> | T)[];\n  groupBy?: GroupBy;\n  orderGroupBy?: string | string[];\n}\n\nexport function isResultTree<T>(item: ResultTree<T> | T): item is ResultTree<T> {\n  return (<ResultTree<T>>item).items !== undefined;\n}\n\nexport function getTopResultTreeItem<T>(specQuery: ResultTree<T>): T {\n  let topItem = specQuery.items[0];\n  while (topItem && isResultTree(topItem)) {\n    topItem = topItem.items[0];\n  }\n  return <T>topItem;\n}\n\nexport function mapLeaves<T, U>(group: ResultTree<T>, f: (item: T) => U): ResultTree<U> {\n  return {\n    ...group,\n    items: group.items.map(item => (isResultTree(item) ? mapLeaves(item, f) : f(item)))\n  };\n}\n","import {SpecQueryModel} from '../../model';\nimport {Schema} from '../../schema';\nimport {QueryConfig} from '../../config';\nimport {RankingScore, FeatureScore} from '../ranking';\nimport {AxisScorer} from './axis';\nimport {DimensionScorer} from './dimension';\nimport {FacetScorer} from './facet';\nimport {SizeChannelScorer} from './sizechannel';\nimport {TypeChannelScorer} from './typechannel';\nimport {MarkScorer} from './mark';\n\nconst SCORERS = [\n  new AxisScorer(),\n  new DimensionScorer(),\n  new FacetScorer(),\n  new MarkScorer(),\n  new SizeChannelScorer(),\n  new TypeChannelScorer()\n];\n\n// TODO: x/y, row/column preference\n// TODO: stacking\n// TODO: Channel, Cardinality\n// TODO: Penalize over encoding\nexport function effectiveness(specM: SpecQueryModel, schema: Schema, opt: QueryConfig): RankingScore {\n  const features = SCORERS.reduce((f, scorer) => {\n    const scores = scorer.getScore(specM, schema, opt);\n    return f.concat(scores);\n  }, [] as FeatureScore[]);\n\n  return {\n    score: features.reduce((s, f) => {\n      return s + f.score;\n    }, 0),\n    features: features\n  };\n}\n","/**\n * Field Type (with Bin and TimeUnit) and Channel Score (Cleveland / Mackinlay based)\n */\n\nimport {Channel} from 'vega-lite/build/src/channel';\n\nimport {QueryConfig, DEFAULT_QUERY_CONFIG} from '../../config';\nimport {SpecQueryModel} from '../../model';\nimport {EncodingQuery} from '../../query/encoding';\nimport {Dict} from '../../util';\n\nimport {Schema} from '../../schema';\nimport {FeatureScore} from '../ranking';\nimport {BIN_Q, TIMEUNIT_T, TIMEUNIT_O, N, O, T, ExtendedType, getExtendedType} from './type';\n\n\nimport {Scorer} from './base';\n\n\n/**\n * Effectiveness Score for preferred axis.\n */\nexport class AxisScorer extends Scorer {\n  constructor() {\n    super('Axis');\n  }\n  protected initScore(opt: QueryConfig = {}) {\n    opt = {...DEFAULT_QUERY_CONFIG, ...opt};\n    let score: Dict<number> = {};\n\n    const preferredAxes = [{\n      feature: BIN_Q,\n      opt: 'preferredBinAxis'\n    },{\n      feature: T,\n      opt: 'preferredTemporalAxis'\n    },{\n      feature: TIMEUNIT_T,\n      opt: 'preferredTemporalAxis'\n    },{\n      feature: TIMEUNIT_O,\n      opt: 'preferredTemporalAxis'\n    },{\n      feature: O,\n      opt: 'preferredOrdinalAxis'\n    },{\n      feature: N,\n      opt: 'preferredNominalAxis'\n    }];\n\n    preferredAxes.forEach((pAxis) => {\n      if (opt[pAxis.opt] === Channel.X) {\n        // penalize the other axis\n        score[pAxis.feature + '_' + Channel.Y] = -0.01;\n      } else if (opt[pAxis.opt] === Channel.Y) {\n        // penalize the other axis\n        score[pAxis.feature + '_' + Channel.X] = -0.01;\n      }\n    });\n\n    return score;\n  }\n\n  public featurize(type: ExtendedType, channel: Channel) {\n    return type + '_' + channel;\n  }\n\n  public getScore(specM: SpecQueryModel, _: Schema, __: QueryConfig): FeatureScore[] {\n    return specM.getEncodings().reduce((features, encQ: EncodingQuery) => {\n      const type = getExtendedType(encQ);\n      const feature = this.featurize(type, encQ.channel as Channel);\n      const featureScore = this.getFeatureScore(feature);\n\n      if (featureScore) {\n        features.push(featureScore);\n      }\n      return features;\n    }, []);\n  }\n}\n\n\n","import {hasDiscreteDomain} from 'vega-lite/build/src/scale';\nimport {Type} from 'vega-lite/build/src/type';\n\nimport {FieldQuery, scaleType} from '../../query/encoding';\nimport {ExpandedType} from '../../query/expandedtype';\n/**\n * Finer grained data types that takes binning and timeUnit into account.\n */\nexport enum ExtendedType {\n  Q = Type.QUANTITATIVE as any,\n  BIN_Q = 'bin_' + Type.QUANTITATIVE as any,\n  T = Type.TEMPORAL as any,\n\n  /**\n   * Time Unit Temporal Field with time scale.\n   */\n  TIMEUNIT_T = 'timeUnit_time' as any,\n  /**\n   * Time Unit Temporal Field with ordinal scale.\n   */\n  TIMEUNIT_O = 'timeUnit_' + Type.ORDINAL as any,\n  O = Type.ORDINAL as any,\n  N = Type.NOMINAL as any,\n  K = ExpandedType.KEY as any,\n  NONE = '-' as any\n}\n\nexport const Q = ExtendedType.Q;\nexport const BIN_Q = ExtendedType.BIN_Q;\nexport const T = ExtendedType.T;\nexport const TIMEUNIT_T = ExtendedType.TIMEUNIT_T;\nexport const TIMEUNIT_O = ExtendedType.TIMEUNIT_O;\nexport const O = ExtendedType.O;\nexport const N = ExtendedType.N;\nexport const K = ExtendedType.K;\nexport const NONE = ExtendedType.NONE;\n\nexport function getExtendedType(fieldQ: FieldQuery): ExtendedType {\n  if (fieldQ.bin) {\n    return ExtendedType.BIN_Q;\n  } else if (fieldQ.timeUnit) {\n    const sType = scaleType(fieldQ);\n    return hasDiscreteDomain(sType) ? ExtendedType.TIMEUNIT_O : ExtendedType.TIMEUNIT_T;\n  }\n  return fieldQ.type as ExtendedType;\n}\n","import {SpecQueryModel} from '../../model';\nimport {Schema} from '../../schema';\nimport {QueryConfig} from '../../config';\nimport {FeatureScore} from '../ranking';\nimport {Dict} from '../../util';\n\n\nexport abstract class Scorer {\n  public readonly type: string;\n  public readonly scoreIndex: Dict<number>;\n  constructor(type: string) {\n    this.type = type;\n    this.scoreIndex = this.initScore();\n  }\n\n  protected abstract initScore(): Dict<number>;\n\n  protected getFeatureScore(feature: string): FeatureScore {\n    const type = this.type;\n    const score = this.scoreIndex[feature];\n    if (score !== undefined) {\n      return {type, feature, score};\n    }\n    return undefined;\n  }\n\n  public abstract getScore(specM: SpecQueryModel, schema: Schema, opt: QueryConfig): FeatureScore[];\n}\n","import {Dict} from '../../util';\nimport {Scorer} from './base';\nimport {SpecQueryModel} from '../../model';\nimport {Schema} from '../../schema';\nimport {QueryConfig} from '../../config';\nimport {FeatureScore} from '../ranking';\nimport {EncodingQuery, isFieldQuery} from '../../query/encoding';\n\n/**\n * Penalize if facet channels are the only dimensions\n */\nexport class DimensionScorer extends Scorer {\n  constructor() {\n    super('Dimension');\n  }\n\n  protected initScore() {\n    return {\n      row: -2,\n      column: -2,\n      color: 0,\n      opacity: 0,\n      size: 0,\n      shape: 0\n    } as Dict<number>;\n  }\n\n  public getScore(specM: SpecQueryModel, _: Schema, __: QueryConfig): FeatureScore[] {\n    if (specM.isAggregate()) {\n      specM.getEncodings().reduce((maxFScore, encQ: EncodingQuery) => {\n        if (isFieldQuery(encQ) && !encQ.aggregate) { // isDimension\n          const featureScore = this.getFeatureScore(encQ.channel + '');\n          if (featureScore && featureScore.score > maxFScore.score) {\n            return featureScore;\n          }\n        }\n        return maxFScore;\n      }, {type: 'Dimension', feature: 'No Dimension', score: -5});\n    }\n    return [];\n  }\n}\n","import {Scorer} from './base';\nimport {SpecQueryModel} from '../../model';\nimport {Schema} from '../../schema';\nimport {QueryConfig, DEFAULT_QUERY_CONFIG} from '../../config';\nimport {FeatureScore} from '../ranking';\nimport {EncodingQuery} from '../../query/encoding';\nimport {Channel} from 'vega-lite/build/src/channel';\nimport {Dict} from '../../util';\n\n/**\n * Effective Score for preferred facet\n */\nexport class FacetScorer extends Scorer {\n  constructor() {\n    super('Facet');\n  }\n  protected initScore(opt?: QueryConfig) {\n    opt = {...DEFAULT_QUERY_CONFIG, ...opt};\n    let score: Dict<number> = {};\n\n    if (opt.preferredFacet === Channel.ROW) {\n      // penalize the other axis\n      score[Channel.COLUMN] = -0.01;\n    } else if (opt.preferredFacet === Channel.COLUMN) {\n      // penalize the other axis\n      score[Channel.ROW] = -0.01;\n    }\n\n    return score;\n  }\n  public getScore(specM: SpecQueryModel, _: Schema, __: QueryConfig): FeatureScore[] {\n    return specM.getEncodings().reduce((features, encQ: EncodingQuery) => {\n      const featureScore = this.getFeatureScore(encQ.channel as string);\n      if (featureScore) {\n        features.push(featureScore);\n      }\n      return features;\n    }, []);\n  }\n};\n","import {Dict} from '../../util';\nimport {Scorer} from './base';\nimport {SpecQueryModel} from '../../model';\nimport {Schema} from '../../schema';\nimport {QueryConfig} from '../../config';\nimport {FeatureScore} from '../ranking';\n\n/**\n * Effectivenss score that penalize size for bar and tick\n */\nexport class SizeChannelScorer extends Scorer {\n  constructor() {\n    super('SizeChannel');\n  }\n\n  protected initScore() {\n    return {\n      bar_size: -2,\n      tick_size: -2\n    } as Dict<number>;\n  }\n\n  public getScore(specM: SpecQueryModel, _: Schema, __: QueryConfig): FeatureScore[] {\n    const mark = specM.getMark();\n    return specM.getEncodings().reduce((featureScores, encQ) => {\n      const feature = mark + '_' + encQ.channel;\n      const featureScore = this.getFeatureScore(feature);\n      if (featureScore) {\n        featureScores.push(featureScore);\n      }\n      return featureScores;\n    }, []);\n  }\n}\n","\n\nimport {Channel} from 'vega-lite/build/src/channel';\n\nimport {QueryConfig} from '../../config';\nimport {SpecQueryModel} from '../../model';\nimport {fieldDef as fieldDefShorthand} from '../../query/shorthand';\nimport {EncodingQuery} from '../../query/encoding';\nimport {Dict, extend, forEach, keys, contains} from '../../util';\n\nimport {Schema} from '../../schema';\nimport {FeatureScore} from '../ranking';\nimport {BIN_Q, TIMEUNIT_T, TIMEUNIT_O, Q, N, O, T, ExtendedType, getExtendedType, K} from './type';\n\n\nimport {Scorer} from './base';\n\n\nexport const TERRIBLE = -10;\n\n/**\n * Effectiveness score for relationship between\n * Field Type (with Bin and TimeUnit) and Channel Score (Cleveland / Mackinlay based)\n */\nexport class TypeChannelScorer extends Scorer {\n  constructor() {\n    super('TypeChannel');\n  }\n  protected initScore() {\n    let SCORE = {} as Dict<number>;\n\n    // Continuous Quantitative / Temporal Fields\n    const CONTINUOUS_TYPE_CHANNEL_SCORE = {\n      x: 0,\n      y: 0,\n      size: -0.575,\n      color: -0.725,  // Middle between -0.7 and -0.75\n      text: -2,\n      opacity: -3,\n\n      shape: TERRIBLE,\n      row: TERRIBLE,\n      column: TERRIBLE,\n      detail: 2 * TERRIBLE\n    };\n\n    [Q, T, TIMEUNIT_T].forEach((type) => {\n      keys(CONTINUOUS_TYPE_CHANNEL_SCORE).forEach((channel: Channel) => {\n        SCORE[this.featurize(type, channel)] = CONTINUOUS_TYPE_CHANNEL_SCORE[channel];\n      });\n    });\n\n    // Discretized Quantitative / Temporal Fields / Ordinal\n\n    const ORDERED_TYPE_CHANNEL_SCORE = extend({}, CONTINUOUS_TYPE_CHANNEL_SCORE, {\n      row: -0.75,\n      column: -0.75,\n\n      shape: -3.1,\n      text: -3.2,\n      detail: -4\n    });\n\n    [BIN_Q, TIMEUNIT_O, O].forEach((type) => {\n      keys(ORDERED_TYPE_CHANNEL_SCORE).forEach((channel: Channel) => {\n        SCORE[this.featurize(type, channel)] = ORDERED_TYPE_CHANNEL_SCORE[channel];\n      });\n    });\n\n    const NOMINAL_TYPE_CHANNEL_SCORE = {\n      x: 0,\n      y: 0,\n      color: -0.6, // TODO: make it adjustable based on preference (shape is better for black and white)\n      shape: -0.65,\n      row: -0.7,\n      column: -0.7,\n      text: -0.8,\n\n      detail: -2,\n      size: -3,\n      opacity: -3.1,\n    };\n\n    keys(NOMINAL_TYPE_CHANNEL_SCORE).forEach((channel: Channel) => {\n      SCORE[this.featurize(N, channel)] = NOMINAL_TYPE_CHANNEL_SCORE[channel];\n      SCORE[this.featurize(K, channel)] =\n        // Putting key on position or detail isn't terrible\n        contains(['x', 'y', 'detail'], channel) ? -1 :\n        NOMINAL_TYPE_CHANNEL_SCORE[channel] - 2;\n    });\n\n    return SCORE;\n  }\n\n  public featurize(type: ExtendedType, channel: Channel) {\n    return type + '_' + channel;\n  }\n\n  public getScore(specM: SpecQueryModel, schema: Schema, opt: QueryConfig): FeatureScore[] {\n    const encodingQueryByField = specM.getEncodings().reduce((m, encQ) => {\n      const fieldKey = fieldDefShorthand(encQ);\n      (m[fieldKey] = m[fieldKey] || []).push(encQ);\n      return m;\n    }, {});\n\n    const features: FeatureScore[] = [];\n\n    forEach(encodingQueryByField, (encQs: EncodingQuery[]) => {\n      const bestFieldFeature = encQs.reduce((best: FeatureScore, encQ) => {\n        const type = getExtendedType(encQ);\n        const feature = this.featurize(type, encQ.channel as Channel);\n        const featureScore = this.getFeatureScore(feature);\n\n        if (best === null || featureScore.score > best.score) {\n          return featureScore;\n        }\n        return best;\n      }, null);\n\n      features.push(bestFieldFeature);\n\n      // TODO: add plus for over-encoding of one field\n    });\n    return features;\n  }\n}\n","import {Channel} from 'vega-lite/build/src/channel';\nimport {Mark} from 'vega-lite/build/src/mark';\n\nimport {QueryConfig} from '../../config';\nimport {SpecQueryModel} from '../../model';\nimport {Dict, forEach} from '../../util';\nimport {Schema} from '../../schema';\n\nimport {FeatureScore} from '../ranking';\nimport {BIN_Q, TIMEUNIT_T, TIMEUNIT_O, Q, N, O, T, NONE, ExtendedType, getExtendedType, K} from './type';\nimport {Scorer} from './base';\n\n\nexport class MarkScorer extends Scorer {\n  constructor() {\n    super('Mark');\n  }\n\n  protected initScore() {\n    return init();\n  }\n\n  public getScore(specM: SpecQueryModel, _: Schema, __: QueryConfig): FeatureScore[] {\n    let mark = specM.getMark() as Mark;\n    if (mark === Mark.CIRCLE || mark === Mark.SQUARE) {\n      mark = Mark.POINT;\n    }\n    const xEncQ = specM.getEncodingQueryByChannel(Channel.X);\n    const xType = xEncQ ? getExtendedType(xEncQ) : NONE;\n\n    const yEncQ = specM.getEncodingQueryByChannel(Channel.Y);\n    const yType = yEncQ ? getExtendedType(yEncQ) : NONE;\n\n    const isOccluded = !specM.isAggregate(); // FIXME\n\n    const feature = xType + '_' + yType + '_' + isOccluded + '_' + mark;\n    const featureScore = this.getFeatureScore(feature);\n    return [featureScore];\n  }\n}\n\nexport function featurize(xType: ExtendedType, yType: ExtendedType, hasOcclusion: boolean, mark: Mark) {\n  return xType + '_' + yType + '_' + hasOcclusion + '_' + mark;\n}\n\n\nfunction init() {\n  const MEASURES = [Q, T];\n  const DISCRETE = [BIN_Q, TIMEUNIT_O, O, N, K];\n  const DISCRETE_OR_NONE = DISCRETE.concat([NONE]);\n\n  let SCORE = {} as Dict<number>;\n  // QxQ\n  MEASURES.forEach((xType) => {\n    MEASURES.forEach((yType) => {\n      // has occlusion\n      const occludedQQMark = {\n        point: 0,\n        text: -0.2,\n        tick: -0.5,\n        rect: -1,\n        bar: -2,\n        line: -2,\n        area: -2,\n        rule: -2.5\n      };\n      forEach(occludedQQMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, true, mark);\n        SCORE[feature] = score;\n      });\n\n      // no occlusion\n      // TODO: possible to use connected scatter plot\n      const noOccludedQQMark = {\n        point: 0,\n        text: -0.2,\n        tick: -0.5,\n        bar: -2,\n        line: -2,\n        area: -2,\n        rule: -2.5\n      };\n      forEach(noOccludedQQMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, false, mark);\n        SCORE[feature] = score;\n      });\n    });\n  });\n\n  // DxQ, QxD\n  MEASURES.forEach((xType) => {\n\n    // HAS OCCLUSION\n    DISCRETE_OR_NONE.forEach((yType) => {\n      const occludedDimensionMeasureMark = {\n        tick: 0,\n        point: -0.2,\n        text: -0.5,\n        bar: -2,\n        line: -2,\n        area: -2,\n        rule: -2.5\n      };\n      forEach(occludedDimensionMeasureMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, true, mark);\n        SCORE[feature] = score;\n        // also do the inverse\n        const feature2 = featurize(yType, xType, true, mark);\n        SCORE[feature2] = score;\n      });\n    });\n\n    [TIMEUNIT_T].forEach((yType) => {\n      const occludedDimensionMeasureMark = {\n        // For Time Dimension with time scale, tick is not good\n        point: 0,\n        text: -0.5,\n        tick: -1,\n        bar: -2,\n        line: -2,\n        area: -2,\n        rule: -2.5\n      };\n      forEach(occludedDimensionMeasureMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, true, mark);\n        SCORE[feature] = score;\n        // also do the inverse\n        const feature2 = featurize(yType, xType, true, mark);\n        SCORE[feature2] = score;\n      });\n    });\n\n    // NO OCCLUSION\n    [NONE, N, O, K].forEach((yType) => {\n      const noOccludedQxN = {\n        bar: 0,\n        point: -0.2,\n        tick: -0.25,\n        text: -0.3,\n        // Line / Area can mislead trend for N\n        line: -2, // FIXME line vs area?\n        area: -2,\n        // Non-sense to use rule here\n        rule: -2.5\n      };\n      forEach(noOccludedQxN, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, false, mark);\n        SCORE[feature] = score;\n\n        // also do the inverse\n        const feature2 = featurize(yType, xType, false, mark);\n        SCORE[feature2] = score;\n      });\n    });\n\n    [BIN_Q].forEach((yType) => {\n      const noOccludedQxBinQ = {\n        bar: 0,\n        point: -0.2,\n        tick: -0.25,\n        text: -0.3,\n        // Line / Area isn't the best fit for bin\n        line: -0.5,// FIXME line vs area?\n        area: -0.5,\n        // Non-sense to use rule here\n        rule: -2.5\n      };\n      forEach(noOccludedQxBinQ, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, false, mark);\n        SCORE[feature] = score;\n\n        // also do the inverse\n        const feature2 = featurize(yType, xType, false, mark);\n        SCORE[feature2] = score;\n      });\n    });\n\n    [TIMEUNIT_T, TIMEUNIT_O].forEach((yType) => {\n      // For aggregate / surely no occlusion plot, Temporal with time or ordinal\n      // are not that different.\n      const noOccludedQxBinQ = {\n        line: 0,\n        area: -0.1,\n        bar: -0.2,\n        point: -0.3,\n        tick: -0.35,\n        text: -0.4,\n        // Non-sense to use rule here\n        rule: -2.5\n      };\n      forEach(noOccludedQxBinQ, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, false, mark);\n        SCORE[feature] = score;\n\n        // also do the inverse\n        const feature2 = featurize(yType, xType, false, mark);\n        SCORE[feature2] = score;\n      });\n    });\n  });\n\n  [TIMEUNIT_T].forEach((xType) => {\n    [TIMEUNIT_T].forEach((yType) => {\n      // has occlusion\n      const ttMark = {\n        point: 0,\n        rect: -0.1, // assuming rect will be small\n        text: -0.5,\n        tick: -1,\n        bar: -2,\n        line: -2,\n        area: -2,\n        rule: -2.5\n      };\n      // No difference between has occlusion and no occlusion\n      // as most of the time, it will be the occluded case.\n      forEach(ttMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, true, mark);\n        SCORE[feature] = score;\n      });\n      forEach(ttMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, false, mark);\n        SCORE[feature] = score;\n      });\n    });\n\n    DISCRETE_OR_NONE.forEach((yType) => {\n      // has occlusion\n      const tdMark = {\n        tick: 0,\n        point: -0.2,\n        text: -0.5,\n        rect: -1,\n        bar: -2,\n        line: -2,\n        area: -2,\n        rule: -2.5\n      };\n      // No difference between has occlusion and no occlusion\n      // as most of the time, it will be the occluded case.\n      forEach(tdMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, true, mark);\n        SCORE[feature] = score;\n      });\n      forEach(tdMark, (score, mark: Mark) => {\n        const feature = featurize(yType, xType, true, mark);\n        SCORE[feature] = score;\n      });\n      forEach(tdMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, false, mark);\n        SCORE[feature] = score;\n      });\n      forEach(tdMark, (score, mark: Mark) => {\n        const feature = featurize(yType, xType, false, mark);\n        SCORE[feature] = score;\n      });\n    });\n  });\n\n  // DxD\n  DISCRETE_OR_NONE.forEach((xType) => {\n    DISCRETE_OR_NONE.forEach((yType) => {\n      // has occlusion\n      const ddMark = {\n        point: 0,\n        rect: 0,\n        text: -0.1,\n        tick: -1,\n        bar: -2,\n        line: -2,\n        area: -2,\n        rule: -2.5\n      };\n\n      forEach(ddMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, true, mark);\n        SCORE[feature] = score;\n      });\n\n      // same for no occlusion.\n      forEach(ddMark, (score, mark: Mark) => {\n        const feature = featurize(xType, yType, false, mark);\n        SCORE[feature] = score;\n      });\n    });\n  });\n  return SCORE;\n}\n\n","\nimport {Type} from 'vega-lite/build/src/type';\nimport {QueryConfig} from '../config';\nimport {SpecQueryModel} from '../model';\nimport {Schema} from '../schema';\nimport {some} from '../util';\n\nimport {RankingScore, FeatureScore} from './ranking';\n\nimport {EncodingQuery, isFieldQuery, isDimension, isEnabledAutoCountQuery} from '../query/encoding';\n\nexport const name = 'aggregationQuality';\n\nexport function score(specM: SpecQueryModel, schema: Schema, opt: QueryConfig): RankingScore {\n  const feature = aggregationQualityFeature(specM, schema, opt);\n  return {\n    score: feature.score,\n    features: [feature]\n  };\n}\n\nfunction aggregationQualityFeature(specM: SpecQueryModel, _: Schema, __: QueryConfig): FeatureScore {\n  const encodings = specM.getEncodings();\n  if (specM.isAggregate()) {\n    const isRawContinuous = (encQ: EncodingQuery) => {\n      return isFieldQuery(encQ) && (\n        (encQ.type === Type.QUANTITATIVE && !encQ.bin && !encQ.aggregate) ||\n        (encQ.type === Type.TEMPORAL && !encQ.timeUnit)\n      );\n    };\n\n    if (some(encodings, isRawContinuous)) {\n      // These are plots that pollute continuous fields as dimension.\n      // They are often intermediate visualizations rather than what users actually want.\n      return {\n        type: name,\n        score: 0.1,\n        feature: 'Aggregate with raw continuous'\n      };\n    }\n\n    if (some(encodings, (encQ) => isFieldQuery(encQ) && isDimension(encQ))) {\n      let hasCount = some(encodings, (encQ: EncodingQuery) => {\n        return (isFieldQuery(encQ) && encQ.aggregate === 'count') || isEnabledAutoCountQuery(encQ);\n      });\n      let hasBin = some(encodings, (encQ: EncodingQuery) => {\n        return isFieldQuery(encQ) && !!encQ.bin;\n      });\n\n      if (hasCount) {\n        // If there is count, we might add additional count field, making it a little less simple\n        // then when we just apply aggregate to Q field\n        return {\n          type: name,\n          score: 0.8,\n          feature: 'Aggregate with count'\n        };\n      } else if (hasBin) {\n        // This is not as good as binning all the Q and show heatmap\n        return {\n          type: name,\n          score: 0.7,\n          feature: 'Aggregate with bin but without count'\n        };\n      } else {\n        return {\n          type: name,\n          score: 0.9,\n          feature: 'Aggregate without count and without bin'\n        };\n      }\n    }\n    // no dimension -- often not very useful\n    return {\n      type: name,\n      score: 0.3,\n      feature: 'Aggregate without dimension'\n    };\n  } else {\n    if (some(encodings, (encQ) => isFieldQuery(encQ) && !isDimension(encQ))) {\n       // raw plots with measure -- simplest of all!\n      return {\n        type: name,\n        score: 1,\n        feature: 'Raw with measure'\n      };\n    }\n    // raw plots with no measure -- often a lot of occlusion\n    return {\n      type: name,\n      score: 0.2,\n      feature: 'Raw without measure'\n    };\n  }\n}\n","import {QueryConfig} from '../config';\nimport {SpecQueryModel} from '../model';\nimport {Schema} from '../schema';\nimport {isFieldQuery} from '../query/encoding';\n\nimport {RankingScore, FeatureScore} from './ranking';\n\nexport const name = 'fieldOrder';\n\n/**\n * Return ranking score based on indices of encoded fields in the schema.\n * If there are multiple fields, prioritize field on the lower indices of encodings.\n *\n * For example, to compare two specs with two encodings each,\n * first we compare the field on the 0-th index\n * and only compare the field on the 1-th index only if the fields on the 0-th index are the same.\n */\nexport function score(specM: SpecQueryModel, schema: Schema, _: QueryConfig): RankingScore {\n  const fieldWildcardIndices = specM.wildcardIndex.encodingIndicesByProperty.get('field');\n  if (!fieldWildcardIndices) {\n    return {\n      score: 0,\n      features: []\n    };\n  }\n\n  const encodings = specM.specQuery.encodings;\n  const numFields = schema.fieldSchemas.length;\n\n  const features: FeatureScore[] = [];\n  let totalScore = 0, base = 1;\n\n  for (let i = fieldWildcardIndices.length - 1; i >= 0; i--) {\n    const index = fieldWildcardIndices[i];\n    const encoding = encodings[index];\n\n    // Skip ValueQuery as we only care about order of fields.\n    let field;\n\n    if (isFieldQuery(encoding)) {\n      field = encoding.field as string;\n    } else { // ignore ValueQuery / AutoCountQuery\n      continue;\n    }\n\n    const fieldWildcard = specM.wildcardIndex.encodings[index].get('field');\n    const fieldIndex = schema.fieldSchema(field).index;\n     // reverse order field with lower index should get higher score and come first\n    const score = - fieldIndex * base;\n    totalScore += score;\n\n    features.push({\n      score: score,\n      type: 'fieldOrder',\n      feature: `field ${fieldWildcard.name} is ${field} (#${fieldIndex} in the schema)`\n    });\n\n    base *= numFields;\n  }\n\n  return {\n    score: totalScore,\n    features: features\n  };\n}\n","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","var global =\n  (typeof globalThis !== 'undefined' && globalThis) ||\n  (typeof self !== 'undefined' && self) ||\n  (typeof global !== 'undefined' && global)\n\nvar support = {\n  searchParams: 'URLSearchParams' in global,\n  iterable: 'Symbol' in global && 'iterator' in Symbol,\n  blob:\n    'FileReader' in global &&\n    'Blob' in global &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in global,\n  arrayBuffer: 'ArrayBuffer' in global\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    /*\n      fetch-mock wraps the Response object in an ES6 Proxy to\n      provide useful test harness features such as flush. However, on\n      ES5 browsers without fetch or Proxy support pollyfills must be used;\n      the proxy-pollyfill is unable to proxy an attribute unless it exists\n      on the object before the Proxy is created. This change ensures\n      Response.bodyUsed exists on the instance, while maintaining the\n      semantic of setting Request.bodyUsed in the constructor before\n      _initBody is called.\n    */\n    this.bodyUsed = this.bodyUsed\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        var isConsumed = consumed(this)\n        if (isConsumed) {\n          return isConsumed\n        }\n        if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n          return Promise.resolve(\n            this._bodyArrayBuffer.buffer.slice(\n              this._bodyArrayBuffer.byteOffset,\n              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n            )\n          )\n        } else {\n          return Promise.resolve(this._bodyArrayBuffer)\n        }\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  if (!(this instanceof Request)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n\n  if (this.method === 'GET' || this.method === 'HEAD') {\n    if (options.cache === 'no-store' || options.cache === 'no-cache') {\n      // Search for a '_' parameter in the query string\n      var reParamSearch = /([?&])_=[^&]*/\n      if (reParamSearch.test(this.url)) {\n        // If it already exists then set the value with the current time\n        this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime())\n      } else {\n        // Otherwise add a new '_' parameter to the end with the current time\n        var reQueryString = /\\?/\n        this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime()\n      }\n    }\n  }\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n  // https://github.com/github/fetch/issues/748\n  // https://github.com/zloirock/core-js/issues/751\n  preProcessedHeaders\n    .split('\\r')\n    .map(function(header) {\n      return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n    })\n    .forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!(this instanceof Response)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = options.statusText === undefined ? '' : '' + options.statusText\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = global.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      setTimeout(function() {\n        resolve(new Response(body, options))\n      }, 0)\n    }\n\n    xhr.onerror = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'))\n      }, 0)\n    }\n\n    xhr.ontimeout = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'))\n      }, 0)\n    }\n\n    xhr.onabort = function() {\n      setTimeout(function() {\n        reject(new DOMException('Aborted', 'AbortError'))\n      }, 0)\n    }\n\n    function fixUrl(url) {\n      try {\n        return url === '' && global.location.href ? global.location.href : url\n      } catch (e) {\n        return url\n      }\n    }\n\n    xhr.open(request.method, fixUrl(request.url), true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr) {\n      if (support.blob) {\n        xhr.responseType = 'blob'\n      } else if (\n        support.arrayBuffer &&\n        request.headers.get('Content-Type') &&\n        request.headers.get('Content-Type').indexOf('application/octet-stream') !== -1\n      ) {\n        xhr.responseType = 'arraybuffer'\n      }\n    }\n\n    if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers)) {\n      Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n        xhr.setRequestHeader(name, normalizeValue(init.headers[name]))\n      })\n    } else {\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n    }\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!global.fetch) {\n  global.fetch = fetch\n  global.Headers = Headers\n  global.Request = Request\n  global.Response = Response\n}\n","/*\n * Constants and utilities for data.\n */\nimport {VgData} from './vega.schema';\n\nexport interface DataFormatBase {\n  /**\n   * If set to auto (the default), perform automatic type inference to determine the desired data types.\n   * Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `\"number\"`, `\"boolean\"` or `\"date\"`).\n   * For example, `\"parse\": {\"modified_on\": \"date\"}` parses the `modified_on` field in each input record a Date value.\n   *\n   * For `\"date\"`, we parse data based using Javascript's [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse).\n   * For Specific date formats can be provided (e.g., `{foo: 'date:\"%m%d%Y\"'}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: 'utc:\"%m%d%Y\"'}`). See more about [UTC time](timeunit.html#utc)\n   */\n  parse?: 'auto' | object;\n}\n\nexport interface CsvDataFormat extends DataFormatBase {\n  /**\n   * Type of input data: `\"json\"`, `\"csv\"`, `\"tsv\"`.\n   * The default format type is determined by the extension of the file URL.\n   * If no extension is detected, `\"json\"` will be used by default.\n   */\n  type?: 'csv' | 'tsv';\n}\n\nexport interface JsonDataFormat extends DataFormatBase {\n  /**\n   * Type of input data: `\"json\"`, `\"csv\"`, `\"tsv\"`.\n   * The default format type is determined by the extension of the file URL.\n   * If no extension is detected, `\"json\"` will be used by default.\n   */\n  type?: 'json';\n  /**\n   * The JSON property containing the desired data.\n   * This parameter can be used when the loaded JSON file may have surrounding structure or meta-data.\n   * For example `\"property\": \"values.features\"` is equivalent to retrieving `json.values.features`\n   * from the loaded JSON object.\n   */\n  property?: string;\n}\n\nexport interface TopoDataFormat extends DataFormatBase {\n  /**\n   * Type of input data: `\"json\"`, `\"csv\"`, `\"tsv\"`.\n   * The default format type is determined by the extension of the file URL.\n   * If no extension is detected, `\"json\"` will be used by default.\n   */\n  type?: 'topojson';\n  /**\n   * The name of the TopoJSON object set to convert to a GeoJSON feature collection.\n   * For example, in a map of the world, there may be an object set named `\"countries\"`.\n   * Using the feature property, we can extract this set and generate a GeoJSON feature object for each country.\n   */\n  feature?: string;\n  /**\n   * The name of the TopoJSON object set to convert to mesh.\n   * Similar to the `feature` option, `mesh` extracts a named TopoJSON object set.\n   *  Unlike the `feature` option, the corresponding geo data is returned as a single, unified mesh instance, not as individual GeoJSON features.\n   * Extracting a mesh is useful for more efficiently drawing borders or other geographic elements that you do not need to associate with specific regions such as individual countries, states or counties.\n   */\n  mesh?: string;\n}\n\nexport type DataFormat = CsvDataFormat | JsonDataFormat | TopoDataFormat;\n\nexport type DataFormatType = 'json' | 'csv' | 'tsv' | 'topojson';\n\nexport type Data = UrlData | InlineData | NamedData;\n\nexport type InlineDataset = number[] | string[] | boolean[] | object[] | string | object;\n\nexport interface UrlData {\n  /**\n   * An object that specifies the format for parsing the data file.\n   */\n  format?: DataFormat;\n\n  /**\n   * An URL from which to load the data set. Use the `format.type` property\n   * to ensure the loaded data is correctly parsed.\n   */\n  url: string;\n}\n\nexport interface InlineData {\n  /**\n   * An object that specifies the format for parsing the data values.\n   */\n  format?: DataFormat;\n  /**\n   * The full data set, included inline. This can be an array of objects or primitive values or a string.\n   * Arrays of primitive values are ingested as objects with a `data` property. Strings are parsed according to the specified format type.\n   */\n  values: InlineDataset;\n}\n\nexport interface NamedData {\n  /**\n   * An object that specifies the format for parsing the data.\n   */\n  format?: DataFormat;\n  /**\n   * Provide a placeholder name and bind data at runtime.\n   */\n  name: string;\n}\n\nexport function isUrlData(data: Partial<Data> | Partial<VgData>): data is UrlData {\n  return !!data['url'];\n}\n\nexport function isInlineData(data: Partial<Data> | Partial<VgData>): data is InlineData {\n  return !!data['values'];\n}\n\nexport function isNamedData(data: Partial<Data>): data is NamedData {\n  return !!data['name'];\n}\n\nexport type DataSourceType = 'raw' | 'main' | 'row' | 'column' | 'lookup';\n\nexport const MAIN: 'main' = 'main';\nexport const RAW: 'raw' = 'raw';\n","\r\nimport {Query} from 'compassql/build/src/query/query';\r\nimport {ResultPlot} from './plot';\r\n\r\nexport * from './plot';\r\n\r\nexport interface Result {\r\n  isLoading: boolean;\r\n\r\n  plots: ResultPlot[] | null;\r\n\r\n  query: Query;\r\n\r\n  limit: number;\r\n}\r\n\r\nexport interface ResultIndex {\r\n  // This is the result of the query from the shelf\r\n  main: Result;\r\n\r\n  addCategoricalField: Result;\r\n  addQuantitativeField: Result;\r\n  addTemporalField: Result;\r\n  alternativeEncodings: Result;\r\n  histograms: Result;\r\n  summaries: Result;\r\n}\r\n\r\nexport const DEFAULT_RESULT: Result = {\r\n  isLoading: false,\r\n  plots: null,\r\n  query: null,\r\n  limit: 8\r\n};\r\n\r\nexport const DEFAULT_RESULT_INDEX: ResultIndex = {\r\n  main: DEFAULT_RESULT,\r\n  addCategoricalField: DEFAULT_RESULT,\r\n  addQuantitativeField: DEFAULT_RESULT,\r\n  addTemporalField: DEFAULT_RESULT,\r\n  alternativeEncodings: DEFAULT_RESULT,\r\n  histograms: DEFAULT_RESULT,\r\n  summaries: DEFAULT_RESULT\r\n};\r\n\r\nexport type ResultType = keyof ResultIndex;\r\n\r\nexport const RESULT_TYPES: ResultType[] =\r\n  // Need to cast as keys return string[] by default\r\n  Object.keys(DEFAULT_RESULT_INDEX) as ResultType[];\r\n\r\n","import {\r\n  SpecQueryModel,\r\n  SpecQueryModelGroup,\r\n} from 'compassql/build/src/model';\r\nimport {FieldQuery, isFieldQuery} from 'compassql/build/src/query/encoding';\r\nimport {ExtendedGroupBy} from 'compassql/build/src/query/groupby';\r\nimport {getTopResultTreeItem, isResultTree} from 'compassql/build/src/result';\r\nimport {toMap} from 'compassql/build/src/util';\r\nimport {NamedData} from 'vega-lite/build/src/data';\r\nimport {TopLevelFacetedUnitSpec} from 'vega-lite/build/src/spec';\r\nimport {fromFieldQuery, ShelfFieldDef} from '../shelf';\r\n\r\nexport interface PlotFieldInfo {\r\n  fieldDef: ShelfFieldDef;\r\n  isEnumeratedWildcardField: boolean;\r\n}\r\n\r\nexport interface ResultPlot {\r\n  fieldInfos: PlotFieldInfo[];\r\n\r\n  spec: TopLevelFacetedUnitSpec;\r\n}\r\n\r\nexport interface ResultPlotWithKey {\r\n  plot: ResultPlot;\r\n  groupByKey: string;\r\n}\r\n\r\nexport function fromSpecQueryModelGroup(\r\n  modelGroup: SpecQueryModelGroup,\r\n  data: NamedData\r\n): ResultPlotWithKey[] {\r\n  return modelGroup.items.map(item => {\r\n    if (isResultTree<SpecQueryModel>(item)) {\r\n      return plotWithKey(data, getTopResultTreeItem(item), modelGroup.groupBy);\r\n    }\r\n    return plotWithKey(data, item as SpecQueryModel, modelGroup.groupBy);\r\n  });\r\n}\r\n\r\nfunction plotWithKey(\r\n  data: NamedData,\r\n  specQ: SpecQueryModel,\r\n  groupBy: string | Array<string|ExtendedGroupBy>\r\n): ResultPlotWithKey {\r\n\r\n  const wildcardFieldIndex = toMap(specQ.wildcardIndex.encodingIndicesByProperty.get('field') || []);\r\n\r\n  const fieldInfos: PlotFieldInfo[] = specQ.getEncodings()\r\n    .filter(isFieldQuery)\r\n    .map((fieldQ: FieldQuery, index): PlotFieldInfo => {\r\n      return {\r\n        fieldDef: fromFieldQuery(fieldQ),\r\n        isEnumeratedWildcardField: index in wildcardFieldIndex\r\n      };\r\n    });\r\n\r\n  // FIXME: Hack to convert FacetedUnitSpec to ToplevelFactedUnitSpec\r\n  const spec: TopLevelFacetedUnitSpec = {\r\n    data,\r\n    ...specQ.toSpec() as TopLevelFacetedUnitSpec\r\n  };\r\n\r\n  const groupByKey = specQ.toShorthand(groupBy);\r\n\r\n  return {plot: {fieldInfos, spec}, groupByKey};\r\n}\r\n","import {Query} from 'compassql/build/src/query/query';\r\nimport {isString} from 'vega-util';\r\nimport {ShelfFilter} from './filter';\r\nimport {ShelfFieldDef, toFieldQuery} from './spec';\r\nimport {DEFAULT_SHELF_UNIT_SPEC, hasWildcards, ShelfUnitSpec, toSpecQuery} from './spec';\r\n\r\nexport * from './spec';\r\nexport * from './filter';\r\n\r\nexport const DEFAULT_SHELF: Readonly<Shelf> = {\r\n  spec: DEFAULT_SHELF_UNIT_SPEC,\r\n  filters: [],\r\n  groupBy: 'auto',\r\n  autoAddCount: true\r\n};\r\n\r\nexport type ShelfGroupBy = 'auto' | 'field' | 'fieldTransform' | 'encoding';\r\n\r\nconst SHELF_GROUP_BY_INDEX: {[K in ShelfGroupBy]: 1} = {\r\n  auto: 1,\r\n  field: 1,\r\n  fieldTransform: 1,\r\n  encoding: 1\r\n};\r\n\r\nexport const SHELF_GROUP_BYS = Object.keys(SHELF_GROUP_BY_INDEX) as ShelfGroupBy[];\r\n\r\nexport function isShelfGroupBy(s: any): s is ShelfGroupBy {\r\n  return isString(s) && SHELF_GROUP_BY_INDEX[s];\r\n}\r\n\r\nexport interface Shelf {\r\n  spec: ShelfUnitSpec; // TODO: support other type of specs.\r\n\r\n  filters: ShelfFilter[];\r\n\r\n  // TODO: support orderBy\r\n\r\n  groupBy: ShelfGroupBy;\r\n\r\n  autoAddCount: boolean;\r\n}\r\n\r\nexport const DEFAULT_ORDER_BY = ['fieldOrder', 'aggregationQuality', 'effectiveness'];\r\nexport const DEFAULT_CHOOSE_BY = ['aggregationQuality', 'effectiveness'];\r\n\r\nexport function toQuery(params: {spec: ShelfUnitSpec, autoAddCount: boolean, groupBy: ShelfGroupBy}): Query {\r\n  const {spec, autoAddCount} = params;\r\n  const specQ = toSpecQuery(spec);\r\n  const {hasAnyWildcard, hasWildcardFn, hasWildcardField} = hasWildcards(specQ);\r\n\r\n  const groupBy = params.groupBy !== 'auto' ? params.groupBy :\r\n    getDefaultGroupBy({hasWildcardFn, hasWildcardField});\r\n\r\n  return {\r\n    spec: specQ,\r\n    groupBy,\r\n    orderBy: DEFAULT_ORDER_BY,\r\n    chooseBy: DEFAULT_CHOOSE_BY,\r\n    ...(hasAnyWildcard ? {config: {autoAddCount}} : {})\r\n  };\r\n}\r\n\r\nexport function getDefaultGroupBy(args: {hasWildcardField: boolean, hasWildcardFn: boolean}) {\r\n  const {hasWildcardFn, hasWildcardField} = args;\r\n\r\n  return hasWildcardFn ? 'fieldTransform' :\r\n    hasWildcardField ? 'field' :\r\n    'encoding';\r\n}\r\n\r\nexport function autoAddFieldQuery(shelf: ShelfUnitSpec, fieldDef: ShelfFieldDef): Query {\r\n  const spec = toSpecQuery(shelf);\r\n\r\n  spec.encodings.push(toFieldQuery(fieldDef, '?'));\r\n  return {\r\n    spec,\r\n    chooseBy: 'effectiveness'\r\n    // TODO: customizable config\r\n  };\r\n}\r\n","import {EncodingQuery, isAutoCountQuery, isValueQuery} from 'compassql/build/src/query/encoding';\r\nimport {SpecQuery} from 'compassql/build/src/query/spec';\r\nimport {isWildcard, isWildcardDef, SHORT_WILDCARD} from 'compassql/build/src/wildcard';\r\nimport {Config} from 'vega-lite';\r\nimport {Channel} from 'vega-lite/build/src/channel';\r\nimport {\r\n  fromEncodingQueries,\r\n  ShelfAnyEncodingDef,\r\n  ShelfMark,\r\n  SpecificEncoding,\r\n  toEncodingQuery,\r\n  toFieldQuery\r\n} from './encoding';\r\n\r\nexport * from './encoding';\r\nexport * from './function';\r\n\r\n/**\r\n * A model state for the shelf of a unit specification.\r\n * This interface provides a hybrid structure that resembles\r\n * FacetedCompositeUnitSpec in Vega-Lite and SpecQuery in CompassQL,\r\n * but provide structure that better serves as internal structure of shelf in Voyager.\r\n */\r\nexport interface ShelfUnitSpec {\r\n  mark: ShelfMark;\r\n\r\n  /**\r\n   * Mapping between specific encoding channels and encoding definitions.\r\n   */\r\n  encoding: SpecificEncoding;\r\n\r\n  /**\r\n   * List of encodingDef for wildcard channels\r\n   */\r\n  anyEncodings: ShelfAnyEncodingDef[];\r\n\r\n  config: Config;\r\n}\r\n\r\nexport function toSpecQuery(spec: ShelfUnitSpec): SpecQuery {\r\n  const config: Config = spec.config;\r\n  const encodings: EncodingQuery[] = specificEncodingsToEncodingQueries(spec.encoding).concat(spec.anyEncodings.map(\r\n    fd => toEncodingQuery(fd, '?'))) ;\r\n  const mark: ShelfMark = spec.mark;\r\n\r\n  return {\r\n    mark,\r\n    encodings,\r\n    config\r\n  };\r\n}\r\n\r\nexport function fromSpecQuery(spec: SpecQuery, oldConfig?: Config): ShelfUnitSpec {\r\n  const {mark, encodings, config, transform} = spec;\r\n  if (isWildcardDef(mark)) {\r\n    throw new Error('Voyager 2 does not support custom wildcard mark yet');\r\n  }\r\n\r\n  if (transform && transform.length > 0) {\r\n    throw new Error('fromSpecQuery should not contain transform');\r\n  }\r\n\r\n  return {\r\n    mark,\r\n    ...fromEncodingQueries(encodings),\r\n    config: config || oldConfig\r\n  };\r\n}\r\n\r\nexport interface HasWildcard {\r\n  hasAnyWildcard: boolean;\r\n  hasWildcardField: boolean;\r\n  hasWildcardFn: boolean;\r\n  hasWildcardChannel: boolean;\r\n}\r\n\r\n// FIXME: remove this method and rely on CompassQL's method.\r\nexport function hasWildcards(spec: SpecQuery): HasWildcard {\r\n  let hasWildcardField = false, hasWildcardFn = false, hasWildcardChannel = false;\r\n  for (const encQ of spec.encodings) {\r\n    if (isValueQuery(encQ)) {\r\n      continue;\r\n    } else if (isAutoCountQuery(encQ)) {\r\n      if (isWildcard(encQ.autoCount)) {\r\n        hasWildcardFn = true;\r\n      }\r\n    } else { // encQ is FieldQuery\r\n      if (isWildcard(encQ.field)) {\r\n        hasWildcardField = true;\r\n      }\r\n\r\n      if (isWildcard(encQ.aggregate) ||\r\n          isWildcard(encQ.bin) ||\r\n          isWildcard(encQ.timeUnit)) {\r\n        hasWildcardFn = true;\r\n      }\r\n\r\n      if (isWildcard(encQ.channel)) {\r\n        hasWildcardChannel = true;\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    hasAnyWildcard: hasWildcardChannel || hasWildcardField || hasWildcardFn,\r\n    hasWildcardField,\r\n    hasWildcardFn,\r\n    hasWildcardChannel\r\n  };\r\n}\r\n\r\nfunction specificEncodingsToEncodingQueries(encoding: SpecificEncoding): EncodingQuery[] {\r\n  // Assemble definition of encodings with specific channels first\r\n  return Object.keys(encoding).map((channel: Channel) => {\r\n    return toFieldQuery(encoding[channel], channel);\r\n  });\r\n}\r\n\r\n\r\nexport const DEFAULT_SHELF_UNIT_SPEC: Readonly<ShelfUnitSpec> = {\r\n  mark: SHORT_WILDCARD,\r\n  encoding: {},\r\n  anyEncodings: [],\r\n  config: {}\r\n};\r\n","import {EncodingQuery, isAutoCountQuery, isFieldQuery, ValueQuery} from 'compassql/build/src/query/encoding';\r\nimport {FieldQuery} from 'compassql/build/src/query/encoding';\r\nimport {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport {isWildcard, SHORT_WILDCARD, Wildcard, WildcardProperty} from 'compassql/build/src/wildcard';\r\nimport {Axis} from 'vega-lite/build/src/axis';\r\nimport {Channel, NonPositionScaleChannel, PositionScaleChannel} from 'vega-lite/build/src/channel';\r\nimport {ValueDef} from 'vega-lite/build/src/fielddef';\r\nimport {Legend} from 'vega-lite/build/src/legend';\r\nimport {Mark as VLMark} from 'vega-lite/build/src/mark';\r\nimport {Scale} from 'vega-lite/build/src/scale';\r\nimport {SortField, SortOrder} from 'vega-lite/build/src/sort';\r\nimport {StackOffset} from 'vega-lite/build/src/stack';\r\nimport {isBoolean} from 'vega-lite/build/src/util';\r\nimport {fromFieldQueryFunctionMixins, ShelfFunction, toFieldQueryFunctionMixins} from './function';\r\n\r\nexport * from './function';\r\n\r\n/**\r\n * Identifier of shelf -- either a channel name for non-wildcard channel or\r\n * index number for wildcard channel.\r\n */\r\nexport type ShelfId = ShelfChannelId | ShelfWildcardChannelId;\r\n\r\nexport interface ShelfChannelId {\r\n  channel: Channel;\r\n};\r\n\r\nexport interface ShelfWildcardChannelId {\r\n  channel: SHORT_WILDCARD | Wildcard<Channel>;\r\n  index: number;\r\n};\r\n\r\nexport function isWildcardChannelId(shelfId: ShelfId): shelfId is ShelfWildcardChannelId {\r\n  return isWildcard(shelfId.channel);\r\n}\r\n\r\nexport type ShelfMark = VLMark | SHORT_WILDCARD;\r\n\r\nexport type ShelfValueDef = ValueDef;\r\nexport type ShelfEncodingDef = ShelfFieldDef | ShelfValueDef;\r\n\r\nexport interface ShelfFieldDef {\r\n  field: WildcardProperty<string>;\r\n\r\n  fn?: ShelfFunction | Wildcard<ShelfFunction>;\r\n\r\n  scale?: Scale;\r\n  axis?: Axis;\r\n  stack?: StackOffset;\r\n  legend?: Legend;\r\n\r\n  sort?: SortOrder | SortField<string>;\r\n  type?: ExpandedType;\r\n\r\n  /**\r\n   * Description of a wildcard.\r\n   * This maps directly to the generic \"description\" property of an EncodingQuery in CompassQL,\r\n   * but in Voyager we only use this property to describe a wildcard.\r\n   */\r\n  description?: string;\r\n}\r\n\r\nexport interface ShelfAnyEncodingDef extends ShelfFieldDef {\r\n  channel: SHORT_WILDCARD;\r\n}\r\n\r\nexport type SpecificEncoding = {\r\n  [P in PositionScaleChannel]?: ShelfFieldDef;\r\n} & {\r\n  [P in NonPositionScaleChannel]?: ShelfEncodingDef\r\n} & {\r\n  text?: ShelfEncodingDef, detail?: ShelfFieldDef,\r\n  order?: ShelfFieldDef,\r\n  row?: ShelfFieldDef,\r\n  column?: ShelfFieldDef\r\n  // TODO: tooltip?: ShelfFieldDef | ShelfValueDef\r\n};\r\n\r\nexport function fromEncodingQueries(encodings: EncodingQuery[]): {\r\n  encoding: SpecificEncoding, anyEncodings: ShelfAnyEncodingDef[]\r\n} {\r\n  return encodings.reduce((encodingMixins, encQ) => {\r\n    if (isWildcard(encQ.channel)) {\r\n      encodingMixins.anyEncodings.push({\r\n        channel: encQ.channel,\r\n        ...fromEncodingQuery(encQ)\r\n      });\r\n    } else {\r\n      encodingMixins.encoding[encQ.channel] = fromEncodingQuery(encQ);\r\n    }\r\n\r\n    return encodingMixins;\r\n  }, {encoding: {}, anyEncodings: []});\r\n}\r\n\r\n\r\nexport function fromEncodingQuery(encQ: EncodingQuery): ShelfEncodingDef {\r\n  if (isFieldQuery(encQ)) {\r\n    return fromFieldQuery(encQ);\r\n  } else if (isAutoCountQuery(encQ)) {\r\n    throw Error('AutoCount Query not yet supported');\r\n  } else {\r\n    return fromValueQuery(encQ);\r\n  }\r\n}\r\n\r\nexport function toEncodingQuery(encDef: ShelfEncodingDef, channel: Channel | SHORT_WILDCARD):\r\n  EncodingQuery {\r\n  if (isShelfFieldDef(encDef)) {\r\n    return toFieldQuery(encDef, channel);\r\n  }\r\n  return toValueQuery(encDef, channel);\r\n}\r\n\r\nexport function toFieldQuery(fieldDef: ShelfFieldDef, channel: Channel | SHORT_WILDCARD): FieldQuery {\r\n  const {fn, ...fieldDefWithoutFn} = fieldDef;\r\n\r\n  return {\r\n    channel,\r\n    ...toFieldQueryFunctionMixins(fn),\r\n    ...fieldDefWithoutFn\r\n  };\r\n}\r\n\r\nexport function fromFieldQuery(fieldQ: FieldQuery): ShelfFieldDef {\r\n  const {aggregate, bin, hasFn, timeUnit, field, scale, axis, legend, sort, description} = fieldQ;\r\n  let {type} = fieldQ;\r\n\r\n  if (isWildcard(type)) {\r\n    throw Error('Voyager does not support wildcard type');\r\n  } else if (type === 'ordinal') {\r\n    console.warn('Voyager does not support ordinal type yet, converting to nominal');\r\n    type = 'nominal';\r\n  }\r\n\r\n  const fn = fromFieldQueryFunctionMixins({aggregate, bin, timeUnit, hasFn});\r\n\r\n  return {\r\n    ...(fn ? {fn} : {}),\r\n    field,\r\n    // Need to cast as TS2.3 isn't smart about this.\r\n    // Upgrading to TS2.4 would solve this issue but creates other issues instead.\r\n    type: type as ExpandedType,\r\n    ...(sort ? {sort} : {}),\r\n    ...(scale ? {scale: fromFieldQueryNestedProp(fieldQ, 'scale')} : {}),\r\n    ...(axis ? {axis: fromFieldQueryNestedProp(fieldQ, 'axis')} : {}),\r\n    ...(legend ? {legend: fromFieldQueryNestedProp(fieldQ, 'legend')} : {}),\r\n    ...(description ? {description} : {})\r\n  };\r\n}\r\n\r\nexport function fromFieldQueryNestedProp<P extends 'scale' | 'axis' | 'legend'>(\r\n  fieldQ: FieldQuery, prop: P\r\n): ShelfFieldDef[P] {\r\n  const propQ = fieldQ[prop];\r\n  if (!propQ) {\r\n    return undefined;\r\n  } else if (isWildcard(propQ)) {\r\n    throw Error(`Voyager does not support wildcard ${prop}`);\r\n  } else if (isBoolean(propQ)) {\r\n    throw Error(`Voyager does not support boolean ${prop}`);\r\n  } else {\r\n    Object.keys(propQ).forEach(nestedProp => {\r\n      if (isWildcard(propQ[nestedProp])) {\r\n        throw Error(`Voyager does not support wildcard ${prop} ${nestedProp}`);\r\n      }\r\n    });\r\n  }\r\n  // We already catch all the unsupported types above so here we can just cast\r\n  return propQ as ShelfFieldDef[P];\r\n}\r\n\r\nexport function fromValueQuery(encQ: ValueQuery): ShelfValueDef {\r\n  if (isWildcard(encQ.value)) {\r\n    throw new Error('Voyager does not support wildcard value');\r\n  }\r\n\r\n  return {\r\n    value: encQ.value ? encQ.value : undefined // TODO: read vega-lite defaults when value is undefined\r\n  };\r\n}\r\n\r\nexport function isShelfFieldDef(encDef: any): encDef is ShelfFieldDef {\r\n  return !!encDef.field;\r\n}\r\n\r\nexport function isShelfValueDef(encDef: any): encDef is ShelfValueDef {\r\n  return !!encDef.value;\r\n}\r\n\r\n\r\nexport function toValueQuery(valueDef: ShelfValueDef, channel: Channel | SHORT_WILDCARD): ValueQuery {\r\n  return {\r\n    channel,\r\n    value: valueDef.value ? valueDef.value : undefined\r\n  };\r\n}\r\n","import {DEFAULT_QUERY_CONFIG} from 'compassql/build/src/config';\r\nimport {FieldQuery} from 'compassql/build/src/query/encoding';\r\nimport {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport {isShortWildcard, isWildcard, Wildcard} from 'compassql/build/src/wildcard';\r\nimport {isAggregateOp} from 'vega-lite/build/src/aggregate';\r\nimport {isTimeUnit, TimeUnit} from 'vega-lite/build/src/timeunit';\r\nimport {contains} from 'vega-lite/build/src/util';\r\nimport {AggregateOp} from 'vega-typings';\r\n\r\nexport type ShelfFunction = AggregateOp | 'bin' | TimeUnit | undefined;\r\n\r\nconst QUANTITATIVE_FUNCTIONS: ShelfFunction[] = [\r\n  undefined, 'bin',\r\n  'min', 'max',\r\n  'mean', 'median',\r\n  'sum'\r\n];\r\n\r\nconst TEMPORAL_FUNCTIONS = [\r\n  undefined,\r\n  'yearmonthdate',\r\n  'year', 'month', // hide 'quarter' for user study because it's buggy\r\n  'date', 'day',\r\n  'hours', 'minutes',\r\n  'seconds', 'milliseconds'\r\n];\r\n\r\nconst FUNCTIONS_INDEX: {\r\n  [K in ShelfFunction]? : number;\r\n} = {\r\n  ...QUANTITATIVE_FUNCTIONS.reduce((index, fn, i) => {\r\n    index[fn] = i;\r\n    return index;\r\n  }, {}),\r\n\r\n  ...TEMPORAL_FUNCTIONS.reduce((index, fn, i) => {\r\n    index[fn] = i;\r\n    return index;\r\n  }, {})\r\n};\r\n\r\nexport function getSupportedFunction(type: ExpandedType) {\r\n  switch (type) {\r\n    case 'quantitative':\r\n      return QUANTITATIVE_FUNCTIONS;\r\n\r\n    case 'temporal':\r\n      return TEMPORAL_FUNCTIONS;\r\n  }\r\n  return [];\r\n}\r\n\r\nexport function isShelfFunction(fn: string): fn is ShelfFunction {\r\n  return fn === 'bin' ||\r\n    fn === undefined || fn === null || // check null for duplicate\r\n    isAggregateOp(fn) || isTimeUnit(fn);\r\n}\r\n\r\nexport type FieldQueryFunctionMixins = Pick<FieldQuery, 'aggregate' | 'timeUnit' | 'bin' | 'hasFn'>;\r\n\r\nexport function toFieldQueryFunctionMixins(fn: ShelfFunction | Wildcard<ShelfFunction>):\r\n  FieldQueryFunctionMixins {\r\n\r\n  if (isWildcard(fn)) {\r\n    const fns = sortFunctions(fn.enum); // sort a new copy of the array\r\n\r\n    const aggregates: AggregateOp[] = [];\r\n    const timeUnits: TimeUnit[] = [];\r\n    let hasBin: boolean = false;\r\n    let hasNoFn: boolean = false;\r\n\r\n    for (const f of fns) {\r\n      if (isAggregateOp(f)) {\r\n        aggregates.push(f);\r\n      } else if (isTimeUnit(f)) {\r\n        timeUnits.push(f);\r\n      } else if (f === 'bin') {\r\n        hasBin = true;\r\n      } else if (f === undefined || f === null) {\r\n        // Check for null just in case things get copied\r\n        hasNoFn = true;\r\n      } else {\r\n        throw new Error('Invalid function ' + f);\r\n      }\r\n    }\r\n\r\n    const functionTypeCount = (aggregates.length > 0 ? 1 : 0) +\r\n      (timeUnits.length > 0 ? 1 : 0) +\r\n      (hasBin ? 1 : 0);\r\n\r\n    const enumerateUndefined = functionTypeCount > 1 || hasNoFn;\r\n    const baseEnum: Array<undefined> = enumerateUndefined ? [undefined] : [];\r\n    const hasFn = !hasNoFn;\r\n\r\n    const mixins: FieldQueryFunctionMixins = {\r\n      ...(aggregates.length > 0 ? {\r\n        aggregate: {enum: [].concat(baseEnum, aggregates)}\r\n      } : {}),\r\n\r\n      ...(timeUnits.length > 0 ? {\r\n        timeUnit: {enum: [].concat(baseEnum, timeUnits)}\r\n      } : {}),\r\n\r\n      ...(hasBin ? {\r\n        bin: {\r\n          enum: (enumerateUndefined ? [false] : []).concat([true])\r\n          // TODO: deal with bin params\r\n        }\r\n      } : {}),\r\n      ...(hasFn ? {hasFn} : {})\r\n    };\r\n\r\n    if (!mixins.aggregate && !mixins.timeUnit && !mixins.bin) {\r\n      // For enum: [undefined], return this special mixins\r\n      return {\r\n        bin: {\r\n          enum: [false]\r\n        },\r\n        timeUnit: {\r\n          enum: [undefined]\r\n        },\r\n        aggregate: {\r\n          enum: [undefined]\r\n        }\r\n      };\r\n    }\r\n\r\n    return mixins;\r\n  } else if (isAggregateOp(fn)) {\r\n    return {aggregate: fn};\r\n  } else if (fn === 'bin') {\r\n    return {bin: true};\r\n  } else if (isTimeUnit(fn)) {\r\n    return {timeUnit: fn};\r\n  }\r\n  return {};\r\n}\r\n\r\nfunction excludeUndefined(fn: string) {\r\n  if (!isShelfFunction) {\r\n    console.warn(`Invalid function ${fn} dropped`);\r\n    return false;\r\n  }\r\n  return fn !== undefined && fn !== null;\r\n}\r\n\r\nexport function fromFieldQueryFunctionMixins(\r\n  fieldQParts: FieldQueryFunctionMixins\r\n): ShelfFunction | Wildcard<ShelfFunction> {\r\n\r\n  // FIXME make this a parameter\r\n  const config = DEFAULT_QUERY_CONFIG;\r\n\r\n  const {aggregate, bin, hasFn, timeUnit} = fieldQParts;\r\n\r\n  let fns: ShelfFunction[] = [];\r\n  let fn: ShelfFunction;\r\n  let hasUndefinedInEnum = false;\r\n\r\n  if (bin) {\r\n    if (isWildcard(bin)) {\r\n      const bins = isShortWildcard(bin) ? [true, false] : bin.enum;\r\n      fns = fns.concat(contains(bins, true) ? ['bin'] : []);\r\n      hasUndefinedInEnum = hasUndefinedInEnum || contains(bins, false);\r\n    } else if (bin) {\r\n      fn = 'bin';\r\n    }\r\n  }\r\n\r\n  if (aggregate) {\r\n    if (isWildcard(aggregate)) {\r\n      const aggregates = isShortWildcard(aggregate) ? config.enum.aggregate : aggregate.enum;\r\n      fns = fns.concat(\r\n        // We already filter composite aggregate function so it is fine to cast here\r\n        // as the only thing left would be AggregateOp (but TS would not know that)\r\n        aggregates.filter(excludeUndefined) as AggregateOp[]\r\n      );\r\n      hasUndefinedInEnum = hasUndefinedInEnum || contains(aggregates, undefined);\r\n    } else if (!fn) {\r\n      fn = aggregate;\r\n    } else {\r\n      throw Error(`Invalid field with function ${fn} and ${aggregate}`);\r\n    }\r\n  }\r\n\r\n  if (timeUnit) {\r\n    if (isWildcard(timeUnit)) {\r\n      const timeUnits = isShortWildcard(timeUnit) ? config.enum.timeUnit : timeUnit.enum;\r\n      fns = fns.concat(timeUnits.filter(excludeUndefined));\r\n      hasUndefinedInEnum = hasUndefinedInEnum || contains(timeUnits, undefined);\r\n    } else if (!fn) {\r\n      fn = timeUnit;\r\n    } else {\r\n      throw Error(`Invalid field with function ${fn} and ${timeUnit}`);\r\n    }\r\n  }\r\n\r\n  if (fn) {\r\n    return fn;\r\n  }\r\n\r\n  if (hasUndefinedInEnum && !hasFn) {\r\n    // prepend undefined\r\n    fns.unshift(undefined);\r\n  }\r\n\r\n  if (fns.length > 0) {\r\n    return {enum: sortFunctions(fns)};\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport function sortFunctions(fns: ShelfFunction[]): ShelfFunction[] {\r\n  // Javascript array.sort() always put undefined value at the end.\r\n  // So we have to convert them to null first and convert them back after sorting.\r\n\r\n  // Convert undefined so they don't get pushed to the end\r\n  return fns.map(f => f || null)\r\n    // sort\r\n    .sort((a, b) => {\r\n      if (a == null) {\r\n        a = undefined;\r\n      }\r\n\r\n      if (b == null) {\r\n        b = undefined;\r\n      }\r\n      return FUNCTIONS_INDEX[a] - FUNCTIONS_INDEX[b];\r\n    })\r\n    // convert all nulls back to undefined\r\n    .map(f => f || undefined);\r\n}\r\n","import {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport {isWildcard} from 'compassql/build/src/wildcard';\r\nimport * as vegaExpression from 'vega-expression';\r\nimport {DateTime} from 'vega-lite/build/src/datetime';\r\nimport {\r\n  fieldFilterExpression,\r\n  FieldOneOfPredicate,\r\n  FieldRangePredicate,\r\n  isFieldOneOfPredicate,\r\n  isFieldRangePredicate\r\n} from 'vega-lite/build/src/predicate';\r\nimport {convert, isTimeUnit, TimeUnit} from 'vega-lite/build/src/timeunit';\r\nimport {isFilter, Transform} from 'vega-lite/build/src/transform';\r\nimport {ShelfFieldDef} from './spec';\r\n\r\nexport type ShelfFilter = FieldRangePredicate | FieldOneOfPredicate;\r\n\r\nexport function fromTransforms(transforms: Transform[]): ShelfFilter[] {\r\n  if (!transforms) {\r\n    return [];\r\n  } else {\r\n    return transforms.map(transform => {\r\n      if (!isFilter(transform)) {\r\n        throw new Error('Voyager does not support transforms other than FilterTransform');\r\n      } else if (!isFieldRangePredicate(transform.filter) && !isFieldOneOfPredicate(transform.filter)) {\r\n        throw new Error('Voyager does not support filters other than RangeFilter and OneOfFilter');\r\n      }\r\n      return transform.filter;\r\n    });\r\n  }\r\n}\r\n\r\nexport function toTransforms(filters: Array<FieldRangePredicate|FieldOneOfPredicate>) {\r\n  return filters.map(filter => ({filter}));\r\n}\r\n\r\n/**\r\n * Return a dataflow expression function for a given array of filter.\r\n * Following example code from https://github.com/uwdata/dataflow-api/blob/master/test/filter-test.js\r\n */\r\nexport function toPredicateFunction(filters: ShelfFilter[]) {\r\n  const expr = '(' +\r\n    filters.map(f => {\r\n      return fieldFilterExpression(f, false); // Do not use inrange as it is not included in the main Vega Expression\r\n    }).join(')&&(') +\r\n  ')';\r\n  const ast = vegaExpression.parse(expr);\r\n  const codegen = vegaExpression.codegen({\r\n    whitelist: ['datum'],\r\n    globalvar: 'global'\r\n  });\r\n  const value = codegen(ast);\r\n\r\n  return new Function('datum', `return ${value.code};`) as (d: object) => boolean;\r\n}\r\n\r\nexport function createDefaultFilter(fieldDef: ShelfFieldDef, domain: any[]): FieldRangePredicate | FieldOneOfPredicate {\r\n  const {field, type, fn} = fieldDef;\r\n  if (isWildcard(field)) {\r\n    return;\r\n  }\r\n  switch (type) {\r\n    case ExpandedType.QUANTITATIVE:\r\n      return {field, range: domain};\r\n    case ExpandedType.TEMPORAL:\r\n      // TODO: consider if we want to change default time unit?\r\n      const timeUnit = !isWildcard(fn) && isTimeUnit(fn) ? fn : 'year';\r\n      return {\r\n        timeUnit,\r\n        field,\r\n        range: getDefaultTimeRange(domain, timeUnit)\r\n      };\r\n    case ExpandedType.NOMINAL:\r\n    case ExpandedType.ORDINAL:\r\n    case ExpandedType.KEY:\r\n      return {field, oneOf: domain};\r\n    default:\r\n      throw new Error('Unsupported type ' + fieldDef.type);\r\n  }\r\n}\r\n\r\nexport function getAllTimeUnits() {\r\n  return [\r\n    TimeUnit.YEARMONTHDATE,\r\n    TimeUnit.YEAR,\r\n    TimeUnit.MONTH,\r\n    TimeUnit.QUARTER,\r\n    TimeUnit.DATE,\r\n    TimeUnit.DAY,\r\n    TimeUnit.HOURS,\r\n    TimeUnit.MINUTES,\r\n    TimeUnit.SECONDS,\r\n    TimeUnit.MILLISECONDS\r\n  ];\r\n}\r\n\r\nexport function getDefaultTimeRange(domain: number[], timeUnit: TimeUnit): number[] | DateTime[] {\r\n  switch (timeUnit) {\r\n    case TimeUnit.YEARMONTHDATE:\r\n      return [convertToDateTimeObject(Number(convert(timeUnit, new Date(domain[0])))),\r\n        convertToDateTimeObject(Number(convert(timeUnit, new Date(domain[1]))))];\r\n    case TimeUnit.YEAR:\r\n      return [convert(timeUnit, new Date(domain[0])).getFullYear(),\r\n        convert(timeUnit, new Date(domain[1])).getFullYear()];\r\n    case TimeUnit.QUARTER:\r\n      return [1, 4];\r\n    case TimeUnit.DATE:\r\n      return [1, 31];\r\n    case TimeUnit.HOURS:\r\n      return [0, 23];\r\n    case TimeUnit.MINUTES:\r\n      return [0, 59];\r\n    case TimeUnit.SECONDS:\r\n      return [0, 59];\r\n    case TimeUnit.MILLISECONDS:\r\n      return [0, 999];\r\n    case undefined:\r\n      return [convertToDateTimeObject(Number(domain[0])), convertToDateTimeObject(Number(domain[1]))];\r\n  }\r\n  throw new Error ('Cannot determine range for unsupported time unit ' + timeUnit);\r\n}\r\n\r\nexport function getDefaultList(timeUnit: TimeUnit): string[] {\r\n  switch (timeUnit) {\r\n    case TimeUnit.MONTH:\r\n      return ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August',\r\n        'September', 'October', 'November', 'December'];\r\n    case TimeUnit.DAY:\r\n      return ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\r\n    default:\r\n      throw new Error ('Invalid time unit ' + timeUnit);\r\n  }\r\n}\r\n\r\nexport function convertToDateTimeObject(timeStamp: number): DateTime {\r\n  const date = new Date(timeStamp);\r\n  return {\r\n    year: date.getFullYear(),\r\n    quarter: Math.floor((date.getMonth() + 3) / 3),\r\n    month: date.getMonth() + 1, // 1-indexing\r\n    date: date.getDate(),\r\n    hours: date.getHours(),\r\n    minutes: date.getMinutes(),\r\n    seconds: date.getSeconds(),\r\n    milliseconds: date.getMilliseconds(),\r\n    utc: date.getTimezoneOffset() === 0\r\n  };\r\n}\r\n\r\nexport function convertToTimestamp(dateTime: DateTime): number {\r\n  const date = new Date(\r\n    dateTime.year,\r\n    Number(dateTime.month) - 1, // 0-indexing\r\n    dateTime.date,\r\n    dateTime.hours,\r\n    dateTime.minutes,\r\n    dateTime.seconds,\r\n    dateTime.milliseconds\r\n  );\r\n  return Number(date);\r\n}\r\n\r\nexport function filterIndexOf(filters: Array<FieldRangePredicate | FieldOneOfPredicate>, field: string) {\r\n  for (let i = 0; i < filters.length; i++) {\r\n    const filter = filters[i];\r\n    if (filter.field === field) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\nexport function filterHasField(filters: Array<FieldRangePredicate | FieldOneOfPredicate>, field: string) {\r\n  return filterIndexOf(filters, field) >= 0;\r\n}\r\n","export { default as ASTNode } from './src/ast';\nexport { default as parse} from './src/parser';\nexport { default as codegen } from './src/codegen';\nexport { default as functions } from './src/functions';\nexport { default as constants } from './src/constants';\n","export default function ASTNode(type) {\n  this.type = type;\n}\n\nASTNode.prototype.visit = function(visitor) {\n  var node = this, c, i, n;\n\n  if (visitor(node)) return 1;\n\n  for (c=children(node), i=0, n=c.length; i<n; ++i) {\n    if (c[i].visit(visitor)) return 1;\n  }\n};\n\nfunction children(node) {\n  switch (node.type) {\n    case 'ArrayExpression':\n      return node.elements;\n    case 'BinaryExpression':\n    case 'LogicalExpression':\n      return [node.left, node.right];\n    case 'CallExpression':\n      var args = node.arguments.slice();\n      args.unshift(node.callee);\n      return args;\n    case 'ConditionalExpression':\n      return [node.test, node.consequent, node.alternate];\n    case 'MemberExpression':\n      return [node.object, node.property];\n    case 'ObjectExpression':\n      return node.properties;\n    case 'Property':\n      return [node.key, node.value];\n    case 'UnaryExpression':\n      return [node.argument];\n    case 'Identifier':\n    case 'Literal':\n    case 'RawCode':\n    default:\n      return [];\n  }\n}\n","/*\n  The following expression parser is based on Esprima (http://esprima.org/).\n  Original header comment and license for Esprima is included here:\n\n  Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>\n  Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>\n  Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>\n  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>\n  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>\n  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>\n  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>\n  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>\n  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>\n  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>\n\n  Redistribution and use in source and binary forms, with or without\n  modification, are permitted provided that the following conditions are met:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n    * Redistributions in binary form must reproduce the above copyright\n      notice, this list of conditions and the following disclaimer in the\n      documentation and/or other materials provided with the distribution.\n\n  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY\n  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\nimport ASTNode from './ast';\n\nvar TokenName,\n    source,\n    index,\n    length,\n    lookahead;\n\nvar TokenBooleanLiteral = 1,\n    TokenEOF = 2,\n    TokenIdentifier = 3,\n    TokenKeyword = 4,\n    TokenNullLiteral = 5,\n    TokenNumericLiteral = 6,\n    TokenPunctuator = 7,\n    TokenStringLiteral = 8,\n    TokenRegularExpression = 9;\n\nTokenName = {};\nTokenName[TokenBooleanLiteral] = 'Boolean';\nTokenName[TokenEOF] = '<end>';\nTokenName[TokenIdentifier] = 'Identifier';\nTokenName[TokenKeyword] = 'Keyword';\nTokenName[TokenNullLiteral] = 'Null';\nTokenName[TokenNumericLiteral] = 'Numeric';\nTokenName[TokenPunctuator] = 'Punctuator';\nTokenName[TokenStringLiteral] = 'String';\nTokenName[TokenRegularExpression] = 'RegularExpression';\n\nvar SyntaxArrayExpression = 'ArrayExpression',\n    SyntaxBinaryExpression = 'BinaryExpression',\n    SyntaxCallExpression = 'CallExpression',\n    SyntaxConditionalExpression = 'ConditionalExpression',\n    SyntaxIdentifier = 'Identifier',\n    SyntaxLiteral = 'Literal',\n    SyntaxLogicalExpression = 'LogicalExpression',\n    SyntaxMemberExpression = 'MemberExpression',\n    SyntaxObjectExpression = 'ObjectExpression',\n    SyntaxProperty = 'Property',\n    SyntaxUnaryExpression = 'UnaryExpression';\n\n// Error messages should be identical to V8.\nvar MessageUnexpectedToken = 'Unexpected token %0',\n    MessageUnexpectedNumber = 'Unexpected number',\n    MessageUnexpectedString = 'Unexpected string',\n    MessageUnexpectedIdentifier = 'Unexpected identifier',\n    MessageUnexpectedReserved = 'Unexpected reserved word',\n    MessageUnexpectedEOS = 'Unexpected end of input',\n    MessageInvalidRegExp = 'Invalid regular expression',\n    MessageUnterminatedRegExp = 'Invalid regular expression: missing /',\n    MessageStrictOctalLiteral = 'Octal literals are not allowed in strict mode.',\n    MessageStrictDuplicateProperty = 'Duplicate data property in object literal not allowed in strict mode';\n\nvar ILLEGAL = 'ILLEGAL',\n    DISABLED = 'Disabled.';\n\n// See also tools/generate-unicode-regex.py.\nvar RegexNonAsciiIdentifierStart = new RegExp('[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]'),\n    RegexNonAsciiIdentifierPart = new RegExp('[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]');\n\n// Ensure the condition is true, otherwise throw an error.\n// This is only to have a better contract semantic, i.e. another safety net\n// to catch a logic error. The condition shall be fulfilled in normal case.\n// Do NOT use this to enforce a certain condition on any user input.\n\nfunction assert(condition, message) {\n  /* istanbul ignore next */\n  if (!condition) {\n    throw new Error('ASSERT: ' + message);\n  }\n}\n\nfunction isDecimalDigit(ch) {\n  return (ch >= 0x30 && ch <= 0x39); // 0..9\n}\n\nfunction isHexDigit(ch) {\n  return '0123456789abcdefABCDEF'.indexOf(ch) >= 0;\n}\n\nfunction isOctalDigit(ch) {\n  return '01234567'.indexOf(ch) >= 0;\n}\n\n// 7.2 White Space\n\nfunction isWhiteSpace(ch) {\n  return (ch === 0x20) || (ch === 0x09) || (ch === 0x0B) || (ch === 0x0C) || (ch === 0xA0) ||\n    (ch >= 0x1680 && [0x1680, 0x180E, 0x2000, 0x2001, 0x2002, 0x2003, 0x2004, 0x2005, 0x2006, 0x2007, 0x2008, 0x2009, 0x200A, 0x202F, 0x205F, 0x3000, 0xFEFF].indexOf(ch) >= 0);\n}\n\n// 7.3 Line Terminators\n\nfunction isLineTerminator(ch) {\n  return (ch === 0x0A) || (ch === 0x0D) || (ch === 0x2028) || (ch === 0x2029);\n}\n\n// 7.6 Identifier Names and Identifiers\n\nfunction isIdentifierStart(ch) {\n  return (ch === 0x24) || (ch === 0x5F) || // $ (dollar) and _ (underscore)\n    (ch >= 0x41 && ch <= 0x5A) || // A..Z\n    (ch >= 0x61 && ch <= 0x7A) || // a..z\n    (ch === 0x5C) || // \\ (backslash)\n    ((ch >= 0x80) && RegexNonAsciiIdentifierStart.test(String.fromCharCode(ch)));\n}\n\nfunction isIdentifierPart(ch) {\n  return (ch === 0x24) || (ch === 0x5F) || // $ (dollar) and _ (underscore)\n    (ch >= 0x41 && ch <= 0x5A) || // A..Z\n    (ch >= 0x61 && ch <= 0x7A) || // a..z\n    (ch >= 0x30 && ch <= 0x39) || // 0..9\n    (ch === 0x5C) || // \\ (backslash)\n    ((ch >= 0x80) && RegexNonAsciiIdentifierPart.test(String.fromCharCode(ch)));\n}\n\n// 7.6.1.1 Keywords\n\nvar keywords = {\n  'if':1, 'in':1, 'do':1,\n  'var':1, 'for':1, 'new':1, 'try':1, 'let':1,\n  'this':1, 'else':1, 'case':1, 'void':1, 'with':1, 'enum':1,\n  'while':1, 'break':1, 'catch':1, 'throw':1, 'const':1, 'yield':1, 'class':1, 'super':1,\n  'return':1, 'typeof':1, 'delete':1, 'switch':1, 'export':1, 'import':1, 'public':1, 'static':1,\n  'default':1, 'finally':1, 'extends':1, 'package':1, 'private':1,\n  'function':1, 'continue':1, 'debugger':1,\n  'interface':1, 'protected':1,\n  'instanceof':1, 'implements':1\n};\n\nfunction skipComment() {\n  var ch;\n\n  while (index < length) {\n    ch = source.charCodeAt(index);\n\n    if (isWhiteSpace(ch) || isLineTerminator(ch)) {\n      ++index;\n    } else {\n      break;\n    }\n  }\n}\n\nfunction scanHexEscape(prefix) {\n  var i, len, ch, code = 0;\n\n  len = (prefix === 'u') ? 4 : 2;\n  for (i = 0; i < len; ++i) {\n    if (index < length && isHexDigit(source[index])) {\n      ch = source[index++];\n      code = code * 16 + '0123456789abcdef'.indexOf(ch.toLowerCase());\n    } else {\n      throwError({}, MessageUnexpectedToken, ILLEGAL);\n    }\n  }\n  return String.fromCharCode(code);\n}\n\nfunction scanUnicodeCodePointEscape() {\n  var ch, code, cu1, cu2;\n\n  ch = source[index];\n  code = 0;\n\n  // At least, one hex digit is required.\n  if (ch === '}') {\n    throwError({}, MessageUnexpectedToken, ILLEGAL);\n  }\n\n  while (index < length) {\n    ch = source[index++];\n    if (!isHexDigit(ch)) {\n      break;\n    }\n    code = code * 16 + '0123456789abcdef'.indexOf(ch.toLowerCase());\n  }\n\n  if (code > 0x10FFFF || ch !== '}') {\n    throwError({}, MessageUnexpectedToken, ILLEGAL);\n  }\n\n  // UTF-16 Encoding\n  if (code <= 0xFFFF) {\n    return String.fromCharCode(code);\n  }\n  cu1 = ((code - 0x10000) >> 10) + 0xD800;\n  cu2 = ((code - 0x10000) & 1023) + 0xDC00;\n  return String.fromCharCode(cu1, cu2);\n}\n\nfunction getEscapedIdentifier() {\n  var ch, id;\n\n  ch = source.charCodeAt(index++);\n  id = String.fromCharCode(ch);\n\n  // '\\u' (U+005C, U+0075) denotes an escaped character.\n  if (ch === 0x5C) {\n    if (source.charCodeAt(index) !== 0x75) {\n      throwError({}, MessageUnexpectedToken, ILLEGAL);\n    }\n    ++index;\n    ch = scanHexEscape('u');\n    if (!ch || ch === '\\\\' || !isIdentifierStart(ch.charCodeAt(0))) {\n      throwError({}, MessageUnexpectedToken, ILLEGAL);\n    }\n    id = ch;\n  }\n\n  while (index < length) {\n    ch = source.charCodeAt(index);\n    if (!isIdentifierPart(ch)) {\n      break;\n    }\n    ++index;\n    id += String.fromCharCode(ch);\n\n    // '\\u' (U+005C, U+0075) denotes an escaped character.\n    if (ch === 0x5C) {\n      id = id.substr(0, id.length - 1);\n      if (source.charCodeAt(index) !== 0x75) {\n        throwError({}, MessageUnexpectedToken, ILLEGAL);\n      }\n      ++index;\n      ch = scanHexEscape('u');\n      if (!ch || ch === '\\\\' || !isIdentifierPart(ch.charCodeAt(0))) {\n        throwError({}, MessageUnexpectedToken, ILLEGAL);\n      }\n      id += ch;\n    }\n  }\n\n  return id;\n}\n\nfunction getIdentifier() {\n  var start, ch;\n\n  start = index++;\n  while (index < length) {\n    ch = source.charCodeAt(index);\n    if (ch === 0x5C) {\n      // Blackslash (U+005C) marks Unicode escape sequence.\n      index = start;\n      return getEscapedIdentifier();\n    }\n    if (isIdentifierPart(ch)) {\n      ++index;\n    } else {\n      break;\n    }\n  }\n\n  return source.slice(start, index);\n}\n\nfunction scanIdentifier() {\n  var start, id, type;\n\n  start = index;\n\n  // Backslash (U+005C) starts an escaped character.\n  id = (source.charCodeAt(index) === 0x5C) ? getEscapedIdentifier() : getIdentifier();\n\n  // There is no keyword or literal with only one character.\n  // Thus, it must be an identifier.\n  if (id.length === 1) {\n    type = TokenIdentifier;\n  } else if (keywords.hasOwnProperty(id)) {\n    type = TokenKeyword;\n  } else if (id === 'null') {\n    type = TokenNullLiteral;\n  } else if (id === 'true' || id === 'false') {\n    type = TokenBooleanLiteral;\n  } else {\n    type = TokenIdentifier;\n  }\n\n  return {\n    type: type,\n    value: id,\n    start: start,\n    end: index\n  };\n}\n\n// 7.7 Punctuators\n\nfunction scanPunctuator() {\n  var start = index,\n    code = source.charCodeAt(index),\n    code2,\n    ch1 = source[index],\n    ch2,\n    ch3,\n    ch4;\n\n  switch (code) {\n\n    // Check for most common single-character punctuators.\n    case 0x2E: // . dot\n    case 0x28: // ( open bracket\n    case 0x29: // ) close bracket\n    case 0x3B: // ; semicolon\n    case 0x2C: // , comma\n    case 0x7B: // { open curly brace\n    case 0x7D: // } close curly brace\n    case 0x5B: // [\n    case 0x5D: // ]\n    case 0x3A: // :\n    case 0x3F: // ?\n    case 0x7E: // ~\n      ++index;\n      return {\n        type: TokenPunctuator,\n        value: String.fromCharCode(code),\n        start: start,\n        end: index\n      };\n\n    default:\n      code2 = source.charCodeAt(index + 1);\n\n      // '=' (U+003D) marks an assignment or comparison operator.\n      if (code2 === 0x3D) {\n        switch (code) {\n          case 0x2B: // +\n          case 0x2D: // -\n          case 0x2F: // /\n          case 0x3C: // <\n          case 0x3E: // >\n          case 0x5E: // ^\n          case 0x7C: // |\n          case 0x25: // %\n          case 0x26: // &\n          case 0x2A: // *\n            index += 2;\n            return {\n              type: TokenPunctuator,\n              value: String.fromCharCode(code) + String.fromCharCode(code2),\n              start: start,\n              end: index\n            };\n\n          case 0x21: // !\n          case 0x3D: // =\n            index += 2;\n\n            // !== and ===\n            if (source.charCodeAt(index) === 0x3D) {\n              ++index;\n            }\n            return {\n              type: TokenPunctuator,\n              value: source.slice(start, index),\n              start: start,\n              end: index\n            };\n        }\n      }\n  }\n\n  // 4-character punctuator: >>>=\n\n  ch4 = source.substr(index, 4);\n\n  if (ch4 === '>>>=') {\n    index += 4;\n    return {\n      type: TokenPunctuator,\n      value: ch4,\n      start: start,\n      end: index\n    };\n  }\n\n  // 3-character punctuators: === !== >>> <<= >>=\n\n  ch3 = ch4.substr(0, 3);\n\n  if (ch3 === '>>>' || ch3 === '<<=' || ch3 === '>>=') {\n    index += 3;\n    return {\n      type: TokenPunctuator,\n      value: ch3,\n      start: start,\n      end: index\n    };\n  }\n\n  // Other 2-character punctuators: ++ -- << >> && ||\n  ch2 = ch3.substr(0, 2);\n\n  if ((ch1 === ch2[1] && ('+-<>&|'.indexOf(ch1) >= 0)) || ch2 === '=>') {\n    index += 2;\n    return {\n      type: TokenPunctuator,\n      value: ch2,\n      start: start,\n      end: index\n    };\n  }\n\n  // 1-character punctuators: < > = ! + - * % & | ^ /\n\n  if ('<>=!+-*%&|^/'.indexOf(ch1) >= 0) {\n    ++index;\n    return {\n      type: TokenPunctuator,\n      value: ch1,\n      start: start,\n      end: index\n    };\n  }\n\n  throwError({}, MessageUnexpectedToken, ILLEGAL);\n}\n\n// 7.8.3 Numeric Literals\n\nfunction scanHexLiteral(start) {\n  var number = '';\n\n  while (index < length) {\n    if (!isHexDigit(source[index])) {\n      break;\n    }\n    number += source[index++];\n  }\n\n  if (number.length === 0) {\n    throwError({}, MessageUnexpectedToken, ILLEGAL);\n  }\n\n  if (isIdentifierStart(source.charCodeAt(index))) {\n    throwError({}, MessageUnexpectedToken, ILLEGAL);\n  }\n\n  return {\n    type: TokenNumericLiteral,\n    value: parseInt('0x' + number, 16),\n    start: start,\n    end: index\n  };\n}\n\nfunction scanOctalLiteral(start) {\n  var number = '0' + source[index++];\n  while (index < length) {\n    if (!isOctalDigit(source[index])) {\n      break;\n    }\n    number += source[index++];\n  }\n\n  if (isIdentifierStart(source.charCodeAt(index)) || isDecimalDigit(source.charCodeAt(index))) {\n    throwError({}, MessageUnexpectedToken, ILLEGAL);\n  }\n\n  return {\n    type: TokenNumericLiteral,\n    value: parseInt(number, 8),\n    octal: true,\n    start: start,\n    end: index\n  };\n}\n\nfunction scanNumericLiteral() {\n  var number, start, ch;\n\n  ch = source[index];\n  assert(isDecimalDigit(ch.charCodeAt(0)) || (ch === '.'),\n    'Numeric literal must start with a decimal digit or a decimal point');\n\n  start = index;\n  number = '';\n  if (ch !== '.') {\n    number = source[index++];\n    ch = source[index];\n\n    // Hex number starts with '0x'.\n    // Octal number starts with '0'.\n    if (number === '0') {\n      if (ch === 'x' || ch === 'X') {\n        ++index;\n        return scanHexLiteral(start);\n      }\n      if (isOctalDigit(ch)) {\n        return scanOctalLiteral(start);\n      }\n\n      // decimal number starts with '0' such as '09' is illegal.\n      if (ch && isDecimalDigit(ch.charCodeAt(0))) {\n        throwError({}, MessageUnexpectedToken, ILLEGAL);\n      }\n    }\n\n    while (isDecimalDigit(source.charCodeAt(index))) {\n      number += source[index++];\n    }\n    ch = source[index];\n  }\n\n  if (ch === '.') {\n    number += source[index++];\n    while (isDecimalDigit(source.charCodeAt(index))) {\n      number += source[index++];\n    }\n    ch = source[index];\n  }\n\n  if (ch === 'e' || ch === 'E') {\n    number += source[index++];\n\n    ch = source[index];\n    if (ch === '+' || ch === '-') {\n      number += source[index++];\n    }\n    if (isDecimalDigit(source.charCodeAt(index))) {\n      while (isDecimalDigit(source.charCodeAt(index))) {\n        number += source[index++];\n      }\n    } else {\n      throwError({}, MessageUnexpectedToken, ILLEGAL);\n    }\n  }\n\n  if (isIdentifierStart(source.charCodeAt(index))) {\n    throwError({}, MessageUnexpectedToken, ILLEGAL);\n  }\n\n  return {\n    type: TokenNumericLiteral,\n    value: parseFloat(number),\n    start: start,\n    end: index\n  };\n}\n\n// 7.8.4 String Literals\n\nfunction scanStringLiteral() {\n  var str = '',\n    quote, start, ch, code, octal = false;\n\n  quote = source[index];\n  assert((quote === '\\'' || quote === '\"'),\n    'String literal must starts with a quote');\n\n  start = index;\n  ++index;\n\n  while (index < length) {\n    ch = source[index++];\n\n    if (ch === quote) {\n      quote = '';\n      break;\n    } else if (ch === '\\\\') {\n      ch = source[index++];\n      if (!ch || !isLineTerminator(ch.charCodeAt(0))) {\n        switch (ch) {\n          case 'u':\n          case 'x':\n            if (source[index] === '{') {\n              ++index;\n              str += scanUnicodeCodePointEscape();\n            } else {\n              str += scanHexEscape(ch);\n            }\n            break;\n          case 'n':\n            str += '\\n';\n            break;\n          case 'r':\n            str += '\\r';\n            break;\n          case 't':\n            str += '\\t';\n            break;\n          case 'b':\n            str += '\\b';\n            break;\n          case 'f':\n            str += '\\f';\n            break;\n          case 'v':\n            str += '\\x0B';\n            break;\n\n          default:\n            if (isOctalDigit(ch)) {\n              code = '01234567'.indexOf(ch);\n\n              // \\0 is not octal escape sequence\n              if (code !== 0) {\n                octal = true;\n              }\n\n              if (index < length && isOctalDigit(source[index])) {\n                octal = true;\n                code = code * 8 + '01234567'.indexOf(source[index++]);\n\n                // 3 digits are only allowed when string starts\n                // with 0, 1, 2, 3\n                if ('0123'.indexOf(ch) >= 0 &&\n                  index < length &&\n                  isOctalDigit(source[index])) {\n                  code = code * 8 + '01234567'.indexOf(source[index++]);\n                }\n              }\n              str += String.fromCharCode(code);\n            } else {\n              str += ch;\n            }\n            break;\n        }\n      } else {\n        if (ch === '\\r' && source[index] === '\\n') {\n          ++index;\n        }\n      }\n    } else if (isLineTerminator(ch.charCodeAt(0))) {\n      break;\n    } else {\n      str += ch;\n    }\n  }\n\n  if (quote !== '') {\n    throwError({}, MessageUnexpectedToken, ILLEGAL);\n  }\n\n  return {\n    type: TokenStringLiteral,\n    value: str,\n    octal: octal,\n    start: start,\n    end: index\n  };\n}\n\nfunction testRegExp(pattern, flags) {\n  var tmp = pattern;\n\n  if (flags.indexOf('u') >= 0) {\n    // Replace each astral symbol and every Unicode code point\n    // escape sequence with a single ASCII symbol to avoid throwing on\n    // regular expressions that are only valid in combination with the\n    // `/u` flag.\n    // Note: replacing with the ASCII symbol `x` might cause false\n    // negatives in unlikely scenarios. For example, `[\\u{61}-b]` is a\n    // perfectly valid pattern that is equivalent to `[a-b]`, but it\n    // would be replaced by `[x-b]` which throws an error.\n    tmp = tmp\n      .replace(/\\\\u\\{([0-9a-fA-F]+)\\}/g, function($0, $1) {\n        if (parseInt($1, 16) <= 0x10FFFF) {\n          return 'x';\n        }\n        throwError({}, MessageInvalidRegExp);\n      })\n      .replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, 'x');\n  }\n\n  // First, detect invalid regular expressions.\n  try {\n    new RegExp(tmp);\n  } catch (e) {\n    throwError({}, MessageInvalidRegExp);\n  }\n\n  // Return a regular expression object for this pattern-flag pair, or\n  // `null` in case the current environment doesn't support the flags it\n  // uses.\n  try {\n    return new RegExp(pattern, flags);\n  } catch (exception) {\n    return null;\n  }\n}\n\nfunction scanRegExpBody() {\n  var ch, str, classMarker, terminated, body;\n\n  ch = source[index];\n  assert(ch === '/', 'Regular expression literal must start with a slash');\n  str = source[index++];\n\n  classMarker = false;\n  terminated = false;\n  while (index < length) {\n    ch = source[index++];\n    str += ch;\n    if (ch === '\\\\') {\n      ch = source[index++];\n      // ECMA-262 7.8.5\n      if (isLineTerminator(ch.charCodeAt(0))) {\n        throwError({}, MessageUnterminatedRegExp);\n      }\n      str += ch;\n    } else if (isLineTerminator(ch.charCodeAt(0))) {\n      throwError({}, MessageUnterminatedRegExp);\n    } else if (classMarker) {\n      if (ch === ']') {\n        classMarker = false;\n      }\n    } else {\n      if (ch === '/') {\n        terminated = true;\n        break;\n      } else if (ch === '[') {\n        classMarker = true;\n      }\n    }\n  }\n\n  if (!terminated) {\n    throwError({}, MessageUnterminatedRegExp);\n  }\n\n  // Exclude leading and trailing slash.\n  body = str.substr(1, str.length - 2);\n  return {\n    value: body,\n    literal: str\n  };\n}\n\nfunction scanRegExpFlags() {\n  var ch, str, flags;\n\n  str = '';\n  flags = '';\n  while (index < length) {\n    ch = source[index];\n    if (!isIdentifierPart(ch.charCodeAt(0))) {\n      break;\n    }\n\n    ++index;\n    if (ch === '\\\\' && index < length) {\n      throwError({}, MessageUnexpectedToken, ILLEGAL);\n    } else {\n      flags += ch;\n      str += ch;\n    }\n  }\n\n  if (flags.search(/[^gimuy]/g) >= 0) {\n    throwError({}, MessageInvalidRegExp, flags);\n  }\n\n  return {\n    value: flags,\n    literal: str\n  };\n}\n\nfunction scanRegExp() {\n  var start, body, flags, value;\n\n  lookahead = null;\n  skipComment();\n  start = index;\n\n  body = scanRegExpBody();\n  flags = scanRegExpFlags();\n  value = testRegExp(body.value, flags.value);\n\n  return {\n    literal: body.literal + flags.literal,\n    value: value,\n    regex: {\n      pattern: body.value,\n      flags: flags.value\n    },\n    start: start,\n    end: index\n  };\n}\n\nfunction isIdentifierName(token) {\n  return token.type === TokenIdentifier ||\n    token.type === TokenKeyword ||\n    token.type === TokenBooleanLiteral ||\n    token.type === TokenNullLiteral;\n}\n\nfunction advance() {\n  var ch;\n\n  skipComment();\n\n  if (index >= length) {\n    return {\n      type: TokenEOF,\n      start: index,\n      end: index\n    };\n  }\n\n  ch = source.charCodeAt(index);\n\n  if (isIdentifierStart(ch)) {\n    return scanIdentifier();\n  }\n\n  // Very common: ( and ) and ;\n  if (ch === 0x28 || ch === 0x29 || ch === 0x3B) {\n    return scanPunctuator();\n  }\n\n  // String literal starts with single quote (U+0027) or double quote (U+0022).\n  if (ch === 0x27 || ch === 0x22) {\n    return scanStringLiteral();\n  }\n\n\n  // Dot (.) U+002E can also start a floating-point number, hence the need\n  // to check the next character.\n  if (ch === 0x2E) {\n    if (isDecimalDigit(source.charCodeAt(index + 1))) {\n      return scanNumericLiteral();\n    }\n    return scanPunctuator();\n  }\n\n  if (isDecimalDigit(ch)) {\n    return scanNumericLiteral();\n  }\n\n  return scanPunctuator();\n}\n\nfunction lex() {\n  var token;\n\n  token = lookahead;\n  index = token.end;\n\n  lookahead = advance();\n\n  index = token.end;\n\n  return token;\n}\n\nfunction peek() {\n  var pos;\n\n  pos = index;\n\n  lookahead = advance();\n  index = pos;\n}\n\nfunction finishArrayExpression(elements) {\n  var node = new ASTNode(SyntaxArrayExpression);\n  node.elements = elements;\n  return node;\n}\n\nfunction finishBinaryExpression(operator, left, right) {\n  var node = new ASTNode((operator === '||' || operator === '&&') ? SyntaxLogicalExpression : SyntaxBinaryExpression);\n  node.operator = operator;\n  node.left = left;\n  node.right = right;\n  return node;\n}\n\nfunction finishCallExpression(callee, args) {\n  var node = new ASTNode(SyntaxCallExpression);\n  node.callee = callee;\n  node.arguments = args;\n  return node;\n}\n\nfunction finishConditionalExpression(test, consequent, alternate) {\n  var node = new ASTNode(SyntaxConditionalExpression);\n  node.test = test;\n  node.consequent = consequent;\n  node.alternate = alternate;\n  return node;\n}\n\nfunction finishIdentifier(name) {\n  var node = new ASTNode(SyntaxIdentifier);\n  node.name = name;\n  return node;\n}\n\nfunction finishLiteral(token) {\n  var node = new ASTNode(SyntaxLiteral);\n  node.value = token.value;\n  node.raw = source.slice(token.start, token.end);\n  if (token.regex) {\n    if (node.raw === '//') {\n      node.raw = '/(?:)/';\n    }\n    node.regex = token.regex;\n  }\n  return node;\n}\n\nfunction finishMemberExpression(accessor, object, property) {\n  var node = new ASTNode(SyntaxMemberExpression);\n  node.computed = accessor === '[';\n  node.object = object;\n  node.property = property;\n  if (!node.computed) property.member = true;\n  return node;\n}\n\nfunction finishObjectExpression(properties) {\n  var node = new ASTNode(SyntaxObjectExpression);\n  node.properties = properties;\n  return node;\n}\n\nfunction finishProperty(kind, key, value) {\n  var node = new ASTNode(SyntaxProperty);\n  node.key = key;\n  node.value = value;\n  node.kind = kind;\n  return node;\n}\n\nfunction finishUnaryExpression(operator, argument) {\n  var node = new ASTNode(SyntaxUnaryExpression);\n  node.operator = operator;\n  node.argument = argument;\n  node.prefix = true;\n  return node;\n}\n\n// Throw an exception\n\nfunction throwError(token, messageFormat) {\n  var error,\n    args = Array.prototype.slice.call(arguments, 2),\n    msg = messageFormat.replace(\n      /%(\\d)/g,\n      function(whole, index) {\n        assert(index < args.length, 'Message reference must be in range');\n        return args[index];\n      }\n    );\n\n\n  error = new Error(msg);\n  error.index = index;\n  error.description = msg;\n  throw error;\n}\n\n// Throw an exception because of the token.\n\nfunction throwUnexpected(token) {\n  if (token.type === TokenEOF) {\n    throwError(token, MessageUnexpectedEOS);\n  }\n\n  if (token.type === TokenNumericLiteral) {\n    throwError(token, MessageUnexpectedNumber);\n  }\n\n  if (token.type === TokenStringLiteral) {\n    throwError(token, MessageUnexpectedString);\n  }\n\n  if (token.type === TokenIdentifier) {\n    throwError(token, MessageUnexpectedIdentifier);\n  }\n\n  if (token.type === TokenKeyword) {\n    throwError(token, MessageUnexpectedReserved);\n  }\n\n  // BooleanLiteral, NullLiteral, or Punctuator.\n  throwError(token, MessageUnexpectedToken, token.value);\n}\n\n// Expect the next token to match the specified punctuator.\n// If not, an exception will be thrown.\n\nfunction expect(value) {\n  var token = lex();\n  if (token.type !== TokenPunctuator || token.value !== value) {\n    throwUnexpected(token);\n  }\n}\n\n// Return true if the next token matches the specified punctuator.\n\nfunction match(value) {\n  return lookahead.type === TokenPunctuator && lookahead.value === value;\n}\n\n// Return true if the next token matches the specified keyword\n\nfunction matchKeyword(keyword) {\n  return lookahead.type === TokenKeyword && lookahead.value === keyword;\n}\n\n// 11.1.4 Array Initialiser\n\nfunction parseArrayInitialiser() {\n  var elements = [];\n\n  index = lookahead.start;\n  expect('[');\n\n  while (!match(']')) {\n    if (match(',')) {\n      lex();\n      elements.push(null);\n    } else {\n      elements.push(parseConditionalExpression());\n\n      if (!match(']')) {\n        expect(',');\n      }\n    }\n  }\n\n  lex();\n\n  return finishArrayExpression(elements);\n}\n\n// 11.1.5 Object Initialiser\n\nfunction parseObjectPropertyKey() {\n  var token;\n\n  index = lookahead.start;\n  token = lex();\n\n  // Note: This function is called only from parseObjectProperty(), where\n  // EOF and Punctuator tokens are already filtered out.\n\n  if (token.type === TokenStringLiteral || token.type === TokenNumericLiteral) {\n    if (token.octal) {\n      throwError(token, MessageStrictOctalLiteral);\n    }\n    return finishLiteral(token);\n  }\n\n  return finishIdentifier(token.value);\n}\n\nfunction parseObjectProperty() {\n  var token, key, id, value;\n\n  index = lookahead.start;\n  token = lookahead;\n\n  if (token.type === TokenIdentifier) {\n    id = parseObjectPropertyKey();\n    expect(':');\n    value = parseConditionalExpression();\n    return finishProperty('init', id, value);\n  }\n  if (token.type === TokenEOF || token.type === TokenPunctuator) {\n    throwUnexpected(token);\n  } else {\n    key = parseObjectPropertyKey();\n    expect(':');\n    value = parseConditionalExpression();\n    return finishProperty('init', key, value);\n  }\n}\n\nfunction parseObjectInitialiser() {\n  var properties = [],\n    property, name, key, map = {},\n    toString = String;\n\n  index = lookahead.start;\n  expect('{');\n\n  while (!match('}')) {\n    property = parseObjectProperty();\n\n    if (property.key.type === SyntaxIdentifier) {\n      name = property.key.name;\n    } else {\n      name = toString(property.key.value);\n    }\n\n    key = '$' + name;\n    if (Object.prototype.hasOwnProperty.call(map, key)) {\n      throwError({}, MessageStrictDuplicateProperty);\n    } else {\n      map[key] = true;\n    }\n\n    properties.push(property);\n\n    if (!match('}')) {\n      expect(',');\n    }\n  }\n\n  expect('}');\n\n  return finishObjectExpression(properties);\n}\n\n// 11.1.6 The Grouping Operator\n\nfunction parseGroupExpression() {\n  var expr;\n\n  expect('(');\n\n  expr = parseExpression();\n\n  expect(')');\n\n  return expr;\n}\n\n\n// 11.1 Primary Expressions\n\nvar legalKeywords = {\n  \"if\": 1,\n  \"this\": 1\n};\n\nfunction parsePrimaryExpression() {\n  var type, token, expr;\n\n  if (match('(')) {\n    return parseGroupExpression();\n  }\n\n  if (match('[')) {\n    return parseArrayInitialiser();\n  }\n\n  if (match('{')) {\n    return parseObjectInitialiser();\n  }\n\n  type = lookahead.type;\n  index = lookahead.start;\n\n\n  if (type === TokenIdentifier || legalKeywords[lookahead.value]) {\n    expr = finishIdentifier(lex().value);\n  } else if (type === TokenStringLiteral || type === TokenNumericLiteral) {\n    if (lookahead.octal) {\n      throwError(lookahead, MessageStrictOctalLiteral);\n    }\n    expr = finishLiteral(lex());\n  } else if (type === TokenKeyword) {\n    throw new Error(DISABLED);\n  } else if (type === TokenBooleanLiteral) {\n    token = lex();\n    token.value = (token.value === 'true');\n    expr = finishLiteral(token);\n  } else if (type === TokenNullLiteral) {\n    token = lex();\n    token.value = null;\n    expr = finishLiteral(token);\n  } else if (match('/') || match('/=')) {\n    expr = finishLiteral(scanRegExp());\n    peek();\n  } else {\n    throwUnexpected(lex());\n  }\n\n  return expr;\n}\n\n// 11.2 Left-Hand-Side Expressions\n\nfunction parseArguments() {\n  var args = [];\n\n  expect('(');\n\n  if (!match(')')) {\n    while (index < length) {\n      args.push(parseConditionalExpression());\n      if (match(')')) {\n        break;\n      }\n      expect(',');\n    }\n  }\n\n  expect(')');\n\n  return args;\n}\n\nfunction parseNonComputedProperty() {\n  var token;\n  index = lookahead.start;\n  token = lex();\n\n  if (!isIdentifierName(token)) {\n    throwUnexpected(token);\n  }\n\n  return finishIdentifier(token.value);\n}\n\nfunction parseNonComputedMember() {\n  expect('.');\n\n  return parseNonComputedProperty();\n}\n\nfunction parseComputedMember() {\n  var expr;\n\n  expect('[');\n\n  expr = parseExpression();\n\n  expect(']');\n\n  return expr;\n}\n\nfunction parseLeftHandSideExpressionAllowCall() {\n  var expr, args, property;\n\n  expr = parsePrimaryExpression();\n\n  for (;;) {\n    if (match('.')) {\n      property = parseNonComputedMember();\n      expr = finishMemberExpression('.', expr, property);\n    } else if (match('(')) {\n      args = parseArguments();\n      expr = finishCallExpression(expr, args);\n    } else if (match('[')) {\n      property = parseComputedMember();\n      expr = finishMemberExpression('[', expr, property);\n    } else {\n      break;\n    }\n  }\n\n  return expr;\n}\n\n// 11.3 Postfix Expressions\n\nfunction parsePostfixExpression() {\n  var expr = parseLeftHandSideExpressionAllowCall();\n\n  if (lookahead.type === TokenPunctuator) {\n    if ((match('++') || match('--'))) {\n      throw new Error(DISABLED);\n    }\n  }\n\n  return expr;\n}\n\n// 11.4 Unary Operators\n\nfunction parseUnaryExpression() {\n  var token, expr;\n\n  if (lookahead.type !== TokenPunctuator && lookahead.type !== TokenKeyword) {\n    expr = parsePostfixExpression();\n  } else if (match('++') || match('--')) {\n    throw new Error(DISABLED);\n  } else if (match('+') || match('-') || match('~') || match('!')) {\n    token = lex();\n    expr = parseUnaryExpression();\n    expr = finishUnaryExpression(token.value, expr);\n  } else if (matchKeyword('delete') || matchKeyword('void') || matchKeyword('typeof')) {\n    throw new Error(DISABLED);\n  } else {\n    expr = parsePostfixExpression();\n  }\n\n  return expr;\n}\n\nfunction binaryPrecedence(token) {\n  var prec = 0;\n\n  if (token.type !== TokenPunctuator && token.type !== TokenKeyword) {\n    return 0;\n  }\n\n  switch (token.value) {\n    case '||':\n      prec = 1;\n      break;\n\n    case '&&':\n      prec = 2;\n      break;\n\n    case '|':\n      prec = 3;\n      break;\n\n    case '^':\n      prec = 4;\n      break;\n\n    case '&':\n      prec = 5;\n      break;\n\n    case '==':\n    case '!=':\n    case '===':\n    case '!==':\n      prec = 6;\n      break;\n\n    case '<':\n    case '>':\n    case '<=':\n    case '>=':\n    case 'instanceof':\n    case 'in':\n      prec = 7;\n      break;\n\n    case '<<':\n    case '>>':\n    case '>>>':\n      prec = 8;\n      break;\n\n    case '+':\n    case '-':\n      prec = 9;\n      break;\n\n    case '*':\n    case '/':\n    case '%':\n      prec = 11;\n      break;\n\n    default:\n      break;\n  }\n\n  return prec;\n}\n\n// 11.5 Multiplicative Operators\n// 11.6 Additive Operators\n// 11.7 Bitwise Shift Operators\n// 11.8 Relational Operators\n// 11.9 Equality Operators\n// 11.10 Binary Bitwise Operators\n// 11.11 Binary Logical Operators\n\nfunction parseBinaryExpression() {\n  var marker, markers, expr, token, prec, stack, right, operator, left, i;\n\n  marker = lookahead;\n  left = parseUnaryExpression();\n\n  token = lookahead;\n  prec = binaryPrecedence(token);\n  if (prec === 0) {\n    return left;\n  }\n  token.prec = prec;\n  lex();\n\n  markers = [marker, lookahead];\n  right = parseUnaryExpression();\n\n  stack = [left, token, right];\n\n  while ((prec = binaryPrecedence(lookahead)) > 0) {\n\n    // Reduce: make a binary expression from the three topmost entries.\n    while ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\n      right = stack.pop();\n      operator = stack.pop().value;\n      left = stack.pop();\n      markers.pop();\n      expr = finishBinaryExpression(operator, left, right);\n      stack.push(expr);\n    }\n\n    // Shift.\n    token = lex();\n    token.prec = prec;\n    stack.push(token);\n    markers.push(lookahead);\n    expr = parseUnaryExpression();\n    stack.push(expr);\n  }\n\n  // Final reduce to clean-up the stack.\n  i = stack.length - 1;\n  expr = stack[i];\n  markers.pop();\n  while (i > 1) {\n    markers.pop()\n    expr = finishBinaryExpression(stack[i - 1].value, stack[i - 2], expr);\n    i -= 2;\n  }\n\n  return expr;\n}\n\n// 11.12 Conditional Operator\n\nfunction parseConditionalExpression() {\n  var expr, consequent, alternate;\n\n  expr = parseBinaryExpression();\n\n  if (match('?')) {\n    lex();\n    consequent = parseConditionalExpression();\n    expect(':');\n    alternate = parseConditionalExpression();\n\n    expr = finishConditionalExpression(expr, consequent, alternate);\n  }\n\n  return expr;\n}\n\n// 11.14 Comma Operator\n\nfunction parseExpression() {\n  var expr = parseConditionalExpression();\n\n  if (match(',')) {\n    throw new Error(DISABLED); // no sequence expressions\n  }\n\n  return expr;\n}\n\nexport default function(code) {\n  source = code;\n  index = 0;\n  length = source.length;\n  lookahead = null;\n\n  peek();\n\n  var expr = parseExpression();\n\n  if (lookahead.type !== TokenEOF) {\n    throw new Error(\"Unexpect token after expression.\");\n  }\n  return expr;\n}\n","import Constants from './constants';\nimport Functions from './functions';\nimport {error, isFunction, isString, toSet} from 'vega-util';\n\nexport default function(opt) {\n  opt = opt || {};\n\n  var whitelist = opt.whitelist ? toSet(opt.whitelist) : {},\n      blacklist = opt.blacklist ? toSet(opt.blacklist) : {},\n      constants = opt.constants || Constants,\n      functions = (opt.functions || Functions)(visit),\n      globalvar = opt.globalvar,\n      fieldvar = opt.fieldvar,\n      globals = {},\n      fields = {},\n      memberDepth = 0;\n\n  var outputGlobal = isFunction(globalvar)\n    ? globalvar\n    : function (id) { return globalvar + '[\"' + id + '\"]'; };\n\n  function visit(ast) {\n    if (isString(ast)) return ast;\n    var generator = Generators[ast.type];\n    if (generator == null) error('Unsupported type: ' + ast.type);\n    return generator(ast);\n  }\n\n  var Generators = {\n    Literal: function(n) {\n        return n.raw;\n      },\n\n    Identifier: function(n) {\n      var id = n.name;\n      if (memberDepth > 0) {\n        return id;\n      } else if (blacklist.hasOwnProperty(id)) {\n        return error('Illegal identifier: ' + id);\n      } else if (constants.hasOwnProperty(id)) {\n        return constants[id];\n      } else if (whitelist.hasOwnProperty(id)) {\n        return id;\n      } else {\n        globals[id] = 1;\n        return outputGlobal(id);\n      }\n    },\n\n    MemberExpression: function(n) {\n        var d = !n.computed;\n        var o = visit(n.object);\n        if (d) memberDepth += 1;\n        var p = visit(n.property);\n        if (o === fieldvar) { fields[p] = 1; } // HACKish...\n        if (d) memberDepth -= 1;\n        return o + (d ? '.'+p : '['+p+']');\n      },\n\n    CallExpression: function(n) {\n        if (n.callee.type !== 'Identifier') {\n          error('Illegal callee type: ' + n.callee.type);\n        }\n        var callee = n.callee.name;\n        var args = n.arguments;\n        var fn = functions.hasOwnProperty(callee) && functions[callee];\n        if (!fn) error('Unrecognized function: ' + callee);\n        return isFunction(fn)\n          ? fn(args)\n          : fn + '(' + args.map(visit).join(',') + ')';\n      },\n\n    ArrayExpression: function(n) {\n        return '[' + n.elements.map(visit).join(',') + ']';\n      },\n\n    BinaryExpression: function(n) {\n        return '(' + visit(n.left) + n.operator + visit(n.right) + ')';\n      },\n\n    UnaryExpression: function(n) {\n        return '(' + n.operator + visit(n.argument) + ')';\n      },\n\n    ConditionalExpression: function(n) {\n        return '(' + visit(n.test) +\n          '?' + visit(n.consequent) +\n          ':' + visit(n.alternate) +\n          ')';\n      },\n\n    LogicalExpression: function(n) {\n        return '(' + visit(n.left) + n.operator + visit(n.right) + ')';\n      },\n\n    ObjectExpression: function(n) {\n        return '{' + n.properties.map(visit).join(',') + '}';\n      },\n\n    Property: function(n) {\n        memberDepth += 1;\n        var k = visit(n.key);\n        memberDepth -= 1;\n        return k + ':' + visit(n.value);\n      }\n  };\n\n  function codegen(ast) {\n    var result = {\n      code:    visit(ast),\n      globals: Object.keys(globals),\n      fields:  Object.keys(fields)\n    };\n    globals = {};\n    fields = {};\n    return result;\n  }\n\n  codegen.functions = functions;\n  codegen.constants = constants;\n\n  return codegen;\n}\n","export default {\n  NaN:       'NaN',\n  E:         'Math.E',\n  LN2:       'Math.LN2',\n  LN10:      'Math.LN10',\n  LOG2E:     'Math.LOG2E',\n  LOG10E:    'Math.LOG10E',\n  PI:        'Math.PI',\n  SQRT1_2:   'Math.SQRT1_2',\n  SQRT2:     'Math.SQRT2',\n  MIN_VALUE: 'Number.MIN_VALUE',\n  MAX_VALUE: 'Number.MAX_VALUE'\n};\n","import {error} from 'vega-util';\n\nexport default function(codegen) {\n\n  function fncall(name, args, cast, type) {\n    var obj = codegen(args[0]);\n    if (cast) {\n      obj = cast + '(' + obj + ')';\n      if (cast.lastIndexOf('new ', 0) === 0) obj = '(' + obj + ')';\n    }\n    return obj + '.' + name + (type < 0 ? '' : type === 0 ?\n      '()' :\n      '(' + args.slice(1).map(codegen).join(',') + ')');\n  }\n\n  function fn(name, cast, type) {\n    return function(args) {\n      return fncall(name, args, cast, type);\n    };\n  }\n\n  var DATE = 'new Date',\n      STRING = 'String',\n      REGEXP = 'RegExp';\n\n  return {\n    // MATH functions\n    isNaN:    'isNaN',\n    isFinite: 'isFinite',\n    abs:      'Math.abs',\n    acos:     'Math.acos',\n    asin:     'Math.asin',\n    atan:     'Math.atan',\n    atan2:    'Math.atan2',\n    ceil:     'Math.ceil',\n    cos:      'Math.cos',\n    exp:      'Math.exp',\n    floor:    'Math.floor',\n    log:      'Math.log',\n    max:      'Math.max',\n    min:      'Math.min',\n    pow:      'Math.pow',\n    random:   'Math.random',\n    round:    'Math.round',\n    sin:      'Math.sin',\n    sqrt:     'Math.sqrt',\n    tan:      'Math.tan',\n\n    clamp: function(args) {\n      if (args.length < 3) error('Missing arguments to clamp function.');\n      if (args.length > 3) error('Too many arguments to clamp function.');\n      var a = args.map(codegen);\n      return 'Math.max('+a[1]+', Math.min('+a[2]+','+a[0]+'))';\n    },\n\n    // DATE functions\n    now:             'Date.now',\n    utc:             'Date.UTC',\n    datetime:        DATE,\n    date:            fn('getDate', DATE, 0),\n    day:             fn('getDay', DATE, 0),\n    year:            fn('getFullYear', DATE, 0),\n    month:           fn('getMonth', DATE, 0),\n    hours:           fn('getHours', DATE, 0),\n    minutes:         fn('getMinutes', DATE, 0),\n    seconds:         fn('getSeconds', DATE, 0),\n    milliseconds:    fn('getMilliseconds', DATE, 0),\n    time:            fn('getTime', DATE, 0),\n    timezoneoffset:  fn('getTimezoneOffset', DATE, 0),\n    utcdate:         fn('getUTCDate', DATE, 0),\n    utcday:          fn('getUTCDay', DATE, 0),\n    utcyear:         fn('getUTCFullYear', DATE, 0),\n    utcmonth:        fn('getUTCMonth', DATE, 0),\n    utchours:        fn('getUTCHours', DATE, 0),\n    utcminutes:      fn('getUTCMinutes', DATE, 0),\n    utcseconds:      fn('getUTCSeconds', DATE, 0),\n    utcmilliseconds: fn('getUTCMilliseconds', DATE, 0),\n\n    // shared sequence functions\n    length:      fn('length', null, -1),\n    indexof:     fn('indexOf', null),\n    lastindexof: fn('lastIndexOf', null),\n    slice:       fn('slice', null),\n\n    // STRING functions\n    parseFloat:  'parseFloat',\n    parseInt:    'parseInt',\n    upper:       fn('toUpperCase', STRING, 0),\n    lower:       fn('toLowerCase', STRING, 0),\n    substring:   fn('substring', STRING),\n    replace:     fn('replace', STRING),\n\n    // REGEXP functions\n    regexp:  REGEXP,\n    test:    fn('test', REGEXP),\n\n    // Control Flow functions\n    if: function(args) {\n        if (args.length < 3) error('Missing arguments to if function.');\n        if (args.length > 3) error('Too many arguments to if function.');\n        var a = args.map(codegen);\n        return '('+a[0]+'?'+a[1]+':'+a[2]+')';\n      }\n  };\n}\n","export {\n  default as accessor,\n  accessorName,\n  accessorFields\n} from './src/accessor';\n\nexport {\n  id,\n  identity,\n  zero,\n  one,\n  truthy,\n  falsy\n} from './src/accessors';\n\nexport {\n  default as logger,\n  None,\n  Warn,\n  Info,\n  Debug\n} from './src/logger';\n\nexport {default as array} from './src/array';\nexport {default as compare} from './src/compare';\nexport {default as constant} from './src/constant';\nexport {default as debounce} from './src/debounce';\nexport {default as error} from './src/error';\nexport {default as extend} from './src/extend';\nexport {default as extentIndex} from './src/extentIndex';\nexport {default as fastmap} from './src/fastmap';\nexport {default as field} from './src/field';\nexport {default as inherits} from './src/inherits';\nexport {default as isArray} from './src/isArray';\nexport {default as isBoolean} from './src/isBoolean';\nexport {default as isDate} from './src/isDate';\nexport {default as isFunction} from './src/isFunction';\nexport {default as isNumber} from './src/isNumber';\nexport {default as isObject} from './src/isObject';\nexport {default as isRegExp} from './src/isRegExp';\nexport {default as isString} from './src/isString';\nexport {default as key} from './src/key';\nexport {default as merge} from './src/merge';\nexport {default as pad} from './src/pad';\nexport {default as peek} from './src/peek';\nexport {default as repeat} from './src/repeat';\nexport {default as splitAccessPath} from './src/splitAccessPath';\nexport {default as stringValue} from './src/stringValue';\nexport {default as toBoolean} from './src/toBoolean';\nexport {default as toDate} from './src/toDate';\nexport {default as toNumber} from './src/toNumber';\nexport {default as toString} from './src/toString';\nexport {default as toSet} from './src/toSet';\nexport {default as truncate} from './src/truncate';\nexport {default as visitArray} from './src/visitArray';\n","export default function(fn, fields, name) {\n  return (\n    fn.fields = fields || [],\n    fn.fname = name,\n    fn\n  );\n}\n\nexport function accessorName(fn) {\n  return fn == null ? null : fn.fname;\n}\n\nexport function accessorFields(fn) {\n  return fn == null ? null : fn.fields;\n}\n","import accessor from './accessor';\nimport field from './field';\n\nvar empty = [];\n\nexport var id = field('id');\n\nexport var identity = accessor(function(_) { return _; }, empty, 'identity');\n\nexport var zero = accessor(function() { return 0; }, empty, 'zero');\n\nexport var one = accessor(function() { return 1; }, empty, 'one');\n\nexport var truthy = accessor(function() { return true; }, empty, 'true');\n\nexport var falsy = accessor(function() { return false; }, empty, 'false');\n","import accessor from './accessor';\nimport splitAccessPath from './splitAccessPath';\nimport stringValue from './stringValue';\n\nexport default function(field, name) {\n  var path = splitAccessPath(field),\n      code = 'return _[' + path.map(stringValue).join('][') + '];';\n\n  return accessor(\n    Function('_', code),\n    [(field = path.length===1 ? path[0] : field)],\n    name || field\n  );\n}\n","import error from './error';\n\nexport default function(p) {\n  var path = [],\n      q = null,\n      b = 0,\n      n = p.length,\n      s = '',\n      i, j, c;\n\n  p = p + '';\n\n  function push() {\n    path.push(s + p.substring(i, j));\n    s = '';\n    i = j + 1;\n  }\n\n  for (i=j=0; j<n; ++j) {\n    c = p[j];\n    if (c === '\\\\') s += p.substring(i, j), i = ++j;\n    else if (c === q) push(), q = null, b = -1;\n    else if (q) continue;\n    else if (i === b && c === '\"') i = j + 1, q = c;\n    else if (i === b && c === \"'\") i = j + 1, q = c;\n    else if (c === '.' && !b) (j > i) ? push() : (i = j + 1);\n    else if (c === '[') {\n      if (j > i) push();\n      b = i = j + 1;\n    }\n    else if (c === ']') {\n      if (!b) error('Access path missing open bracket: ' + p);\n      if (b > 0) push();\n      b = 0;\n      i = j + 1;\n    }\n  }\n\n  if (b) error('Access path missing closing bracket: ' + p);\n  if (q) error('Access path missing closing quote: ' + p);\n  if (j > i) ++j, push();\n  return path;\n}\n","export default function(message) {\n  throw Error(message);\n}\n","import isArray from './isArray';\nimport isObject from './isObject';\nimport isString from './isString';\n\nexport default function $(x) {\n  return isArray(x) ? '[' + x.map($) + ']'\n    : isObject(x) || isString(x) ?\n      // Output valid JSON and JS source strings.\n      // See http://timelessrepo.com/json-isnt-a-javascript-subset\n      JSON.stringify(x).replace('\\u2028','\\\\u2028').replace('\\u2029', '\\\\u2029')\n    : x;\n}\n","export default Array.isArray;\n","export default function(_) {\n  return _ === Object(_);\n}\n","export default function(_) {\n  return typeof _ === 'string';\n}\n","function log(method, level, input) {\n  var args = [level].concat([].slice.call(input));\n  console[method].apply(console, args); // eslint-disable-line no-console\n}\n\nexport var None  = 0;\nexport var Warn  = 1;\nexport var Info  = 2;\nexport var Debug = 3;\n\nexport default function(_) {\n  var level = _ || None;\n  return {\n    level: function(_) {\n      return arguments.length ? (level = +_, this) : level;\n    },\n    warn: function() {\n      if (level >= Warn) log('warn', 'WARN', arguments);\n      return this;\n    },\n    info: function() {\n      if (level >= Info) log('log', 'INFO', arguments);\n      return this;\n    },\n    debug: function() {\n      if (level >= Debug) log('log', 'DEBUG', arguments);\n      return this;\n    }\n  }\n}\n","import isArray from './isArray';\n\nexport default function(_) {\n  return _ != null ? (isArray(_) ? _ : [_]) : [];\n}\n","import accessor from './accessor';\nimport array from './array';\nimport splitAccessPath from './splitAccessPath';\nimport stringValue from './stringValue';\n\nexport default function(fields, orders) {\n  var idx = [],\n      cmp = (fields = array(fields)).map(function(f, i) {\n        return f == null ? null\n          : (idx.push(i), splitAccessPath(f).map(stringValue).join(']['));\n      }),\n      n = idx.length - 1,\n      ord = array(orders),\n      code = 'var u,v;return ',\n      i, j, f, u, v, d, lt, gt;\n\n  if (n < 0) return null;\n\n  for (j=0; j<=n; ++j) {\n    i = idx[j];\n    f = cmp[i];\n    u = '(u=a['+f+'])';\n    v = '(v=b['+f+'])';\n    d = '((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))';\n    lt = ord[i] !== 'descending' ? (gt=1, -1) : (gt=-1, 1);\n    code += '(' + u+'<'+v+'||u==null)&&v!=null?' + lt\n      + ':(u>v||v==null)&&u!=null?' + gt\n      + ':'+d+'!==u&&v===v?' + lt\n      + ':v!==v&&u===u?' + gt\n      + (i < n ? ':' : ':0');\n  }\n\n  return accessor(\n    Function('a', 'b', code + ';'),\n    fields.filter(function(_) { return _ != null; })\n  );\n}","import isFunction from './isFunction';\n\nexport default function(_) {\n  return isFunction(_) ? _ : function() { return _; };\n}\n","export default function(_) {\n  return typeof _ === 'function';\n}\n","export default function(delay, handler) {\n  var tid, evt;\n\n  function callback() {\n    handler(evt);\n    tid = evt = null;\n  }\n\n  return function(e) {\n    evt = e;\n    if (tid) clearTimeout(tid);\n    tid = setTimeout(callback, delay);\n  };\n}\n","export default function(_) {\n  for (var x, k, i=1, len=arguments.length; i<len; ++i) {\n    x = arguments[i];\n    for (k in x) { _[k] = x[k]; }\n  }\n  return _;\n}\n","export default function(array, f) {\n  var i = -1,\n      n = array.length,\n      a, b, c, u, v;\n\n  if (f == null) {\n    while (++i < n) if ((b = array[i]) != null && b >= b) { a = c = b; break; }\n    u = v = i;\n    while (++i < n) if ((b = array[i]) != null) {\n      if (a > b) a = b, u = i;\n      if (c < b) c = b, v = i;\n    }\n  } else {\n    while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = c = b; break; }\n    u = v = i;\n    while (++i < n) if ((b = f(array[i], i, array)) != null) {\n      if (a > b) a = b, u = i;\n      if (c < b) c = b, v = i;\n    }\n  }\n\n  return [u, v];\n}\n","var NULL = {};\n\nexport default function(input) {\n  var obj = {},\n      map,\n      test;\n\n  function has(key) {\n    return obj.hasOwnProperty(key) && obj[key] !== NULL;\n  }\n\n  map = {\n    size: 0,\n    empty: 0,\n    object: obj,\n    has: has,\n    get: function(key) {\n      return has(key) ? obj[key] : undefined;\n    },\n    set: function(key, value) {\n      if (!has(key)) {\n        ++map.size;\n        if (obj[key] === NULL) --map.empty;\n      }\n      obj[key] = value;\n      return this;\n    },\n    delete: function(key) {\n      if (has(key)) {\n        --map.size;\n        ++map.empty;\n        obj[key] = NULL;\n      }\n      return this;\n    },\n    clear: function() {\n      map.size = map.empty = 0;\n      map.object = obj = {};\n    },\n    test: function(_) {\n      return arguments.length ? (test = _, map) : test;\n    },\n    clean: function() {\n      var next = {},\n          size = 0,\n          key, value;\n      for (key in obj) {\n        value = obj[key];\n        if (value !== NULL && (!test || !test(value))) {\n          next[key] = value;\n          ++size;\n        }\n      }\n      map.size = size;\n      map.empty = 0;\n      map.object = (obj = next);\n    }\n  };\n\n  if (input) Object.keys(input).forEach(function(key) {\n    map.set(key, input[key]);\n  });\n\n  return map;\n}\n","export default function(child, parent) {\n  var proto = (child.prototype = Object.create(parent.prototype));\n  proto.constructor = child;\n  return proto;\n}\n","export default function(_) {\n  return typeof _ === 'boolean';\n}\n","export default function(_) {\n  return Object.prototype.toString.call(_) === '[object Date]';\n}\n","export default function(_) {\n  return typeof _ === 'number';\n}\n","export default function(_) {\n  return Object.prototype.toString.call(_) === '[object RegExp]';\n}\n","import accessor from './accessor';\nimport array from './array';\nimport splitAccessPath from './splitAccessPath';\nimport stringValue from './stringValue';\n\nexport default function(fields) {\n  fields = fields ? array(fields) : fields;\n  var fn = !(fields && fields.length)\n    ? function() { return ''; }\n    : Function('_', 'return \\'\\'+' +\n        fields.map(function(f) {\n          return '_[' + splitAccessPath(f).map(stringValue).join('][') + ']';\n        }).join('+\\'|\\'+') + ';');\n  return accessor(fn, fields, 'key');\n}\n","export default function(compare, array0, array1, output) {\n  var n0 = array0.length,\n      n1 = array1.length;\n\n  if (!n1) return array0;\n  if (!n0) return array1;\n\n  var merged = output || new array0.constructor(n0 + n1),\n      i0 = 0, i1 = 0, i = 0;\n\n  for (; i0<n0 && i1<n1; ++i) {\n    merged[i] = compare(array0[i0], array1[i1]) > 0\n       ? array1[i1++]\n       : array0[i0++];\n  }\n\n  for (; i0<n0; ++i0, ++i) {\n    merged[i] = array0[i0];\n  }\n\n  for (; i1<n1; ++i1, ++i) {\n    merged[i] = array1[i1];\n  }\n\n  return merged;\n}\n","import repeat from './repeat';\n\nexport default function(str, length, padchar, align) {\n  var c = padchar || ' ',\n      s = str + '',\n      n = length - s.length;\n\n  return n <= 0 ? s\n    : align === 'left' ? repeat(c, n) + s\n    : align === 'center' ? repeat(c, ~~(n/2)) + s + repeat(c, Math.ceil(n/2))\n    : s + repeat(c, n);\n}\n","export default function(str, reps) {\n  var s = '';\n  while (--reps >= 0) s += str;\n  return s;\n}\n","export default function(array) {\n  return array[array.length - 1];\n}\n","export default function(_) {\n  return _ == null || _ === '' ? null : !_ || _ === 'false' || _ === '0' ? false : !!_;\n}\n","import isDate from './isDate';\nimport isNumber from './isNumber';\n\nfunction defaultParser(_) {\n  return isNumber(_) ? _ : isDate(_) ? _ : Date.parse(_);\n}\n\nexport default function(_, parser) {\n  parser = parser || defaultParser;\n  return _ == null || _ === '' ? null : parser(_);\n}\n","export default function(_) {\n  return _ == null || _ === '' ? null : +_;\n}\n","export default function(_) {\n  return _ == null || _ === '' ? null : _ + '';\n}\n","export default function(_) {\n  for (var s={}, i=0, n=_.length; i<n; ++i) s[_[i]] = 1;\n  return s;\n}\n","export default function(str, length, align, ellipsis) {\n  var e = ellipsis != null ? ellipsis : '\\u2026',\n      s = str + '',\n      n = s.length,\n      l = Math.max(0, length - e.length);\n\n  return n <= length ? s\n    : align === 'left' ? e + s.slice(n - l)\n    : align === 'center' ? s.slice(0, Math.ceil(l/2)) + e + s.slice(n - ~~(l/2))\n    : s.slice(0, l) + e;\n}\n","export default function(array, filter, visitor) {\n  if (array) {\n    var i = 0, n = array.length, t;\n    if (filter) {\n      for (; i<n; ++i) {\n        if (t = filter(array[i])) visitor(t, i, array);\n      }\n    } else {\n      array.forEach(visitor);\n    }\n  }\n}\n","import {isArray, isString} from 'vega-util';\nimport {DataFlowNode} from './compile/data/dataflow';\nimport {Model} from './compile/model';\nimport {selectionPredicate} from './compile/selection/selection';\nimport {DateTime, dateTimeExpr, isDateTime} from './datetime';\nimport {vgField} from './fielddef';\nimport {LogicalOperand} from './logical';\nimport {fieldExpr as timeUnitFieldExpr, getLocalTimeUnit, isLocalSingleTimeUnit, isUtcSingleTimeUnit, normalizeTimeUnit, TimeUnit} from './timeunit';\nimport {logicalExpr} from './util';\n\nexport type Predicate =\n  // a) FieldPrecidate (but we don't type FieldFilter here so the schema has no nesting\n  // and thus the documentation shows all of the types clearly)\n  FieldEqualPredicate | FieldRangePredicate | FieldOneOfPredicate |\n  // b) Selection Predicate\n  SelectionPredicate |\n  // c) Vega Expression string\n  string;\n\n\n\nexport type FieldPredicate = FieldEqualPredicate | FieldRangePredicate | FieldOneOfPredicate;\n\nexport interface SelectionPredicate {\n  /**\n   * Filter using a selection name.\n   */\n  selection: LogicalOperand<string>;\n}\n\nexport function isSelectionPredicate(predicate: LogicalOperand<Predicate>): predicate is SelectionPredicate {\n  return predicate && predicate['selection'];\n}\n\nexport interface FieldEqualPredicate {\n  // TODO: support aggregate\n\n  /**\n   * Time unit for the field to be filtered.\n   */\n  timeUnit?: TimeUnit;\n\n  /**\n   * Field to be filtered.\n   */\n  field: string;\n\n  /**\n   * The value that the field should be equal to.\n   */\n  equal: string | number | boolean | DateTime;\n\n}\n\nexport function isFieldEqualPredicate(predicate: any): predicate is FieldEqualPredicate {\n  return predicate && !!predicate.field && predicate.equal !== undefined;\n}\n\nexport interface FieldRangePredicate {\n  // TODO: support aggregate\n\n  /**\n   * time unit for the field to be filtered.\n   */\n  timeUnit?: TimeUnit;\n\n  /**\n   * Field to be filtered\n   */\n  field: string;\n\n  /**\n   * An array of inclusive minimum and maximum values\n   * for a field value of a data item to be included in the filtered data.\n   * @maxItems 2\n   * @minItems 2\n   */\n  range: (number|DateTime|null)[];\n\n}\n\nexport function isFieldRangePredicate(predicate: any): predicate is FieldRangePredicate {\n  if (predicate && predicate.field) {\n    if (isArray(predicate.range) && predicate.range.length === 2) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport interface FieldOneOfPredicate {\n  // TODO: support aggregate\n\n  /**\n   * time unit for the field to be filtered.\n   */\n  timeUnit?: TimeUnit;\n\n  /**\n   * Field to be filtered\n   */\n  field: string;\n\n  /**\n   * A set of values that the `field`'s value should be a member of,\n   * for a data item included in the filtered data.\n   */\n  oneOf: string[] | number[] | boolean[] | DateTime[];\n\n}\n\nexport function isFieldOneOfPredicate(predicate: any): predicate is FieldOneOfPredicate {\n  return predicate && !!predicate.field && (\n    isArray(predicate.oneOf) ||\n    isArray(predicate.in) // backward compatibility\n  );\n}\n\nexport function isFieldPredicate(predicate: Predicate): predicate is FieldOneOfPredicate | FieldEqualPredicate | FieldRangePredicate {\n  return isFieldOneOfPredicate(predicate) || isFieldEqualPredicate(predicate) || isFieldRangePredicate(predicate);\n}\n\n/**\n * Converts a predicate into an expression.\n */\n// model is only used for selection filters.\nexport function expression(model: Model, filterOp: LogicalOperand<Predicate>, node?: DataFlowNode): string {\n  return logicalExpr(filterOp, (predicate: Predicate) => {\n    if (isString(predicate)) {\n      return predicate;\n    } else if (isSelectionPredicate(predicate)) {\n      return selectionPredicate(model, predicate.selection, node);\n    } else { // Filter Object\n      return fieldFilterExpression(predicate);\n    }\n  });\n}\n\n// This method is used by Voyager.  Do not change its behavior without changing Voyager.\nexport function fieldFilterExpression(predicate: FieldPredicate, useInRange=true) {\n  const fieldExpr = predicate.timeUnit ?\n    // For timeUnit, cast into integer with time() so we can use ===, inrange, indexOf to compare values directly.\n      // TODO: We calculate timeUnit on the fly here. Consider if we would like to consolidate this with timeUnit pipeline\n      // TODO: support utc\n    ('time(' + timeUnitFieldExpr(predicate.timeUnit, predicate.field) + ')') :\n    vgField(predicate, {expr: 'datum'});\n\n  if (isFieldEqualPredicate(predicate)) {\n    return fieldExpr + '===' + valueExpr(predicate.equal, predicate.timeUnit);\n  } else if (isFieldOneOfPredicate(predicate)) {\n    // \"oneOf\" was formerly \"in\" -- so we need to add backward compatibility\n    const oneOf: FieldOneOfPredicate[] = predicate.oneOf || predicate['in'];\n    return 'indexof([' +\n      oneOf.map((v) => valueExpr(v, predicate.timeUnit)).join(',') +\n      '], ' + fieldExpr + ') !== -1';\n  } else if (isFieldRangePredicate(predicate)) {\n    const lower = predicate.range[0];\n    const upper = predicate.range[1];\n\n    if (lower !== null && upper !== null && useInRange) {\n      return 'inrange(' + fieldExpr + ', [' +\n        valueExpr(lower, predicate.timeUnit) + ', ' +\n        valueExpr(upper, predicate.timeUnit) + '])';\n    }\n\n    const exprs = [];\n    if (lower !== null) {\n      exprs.push(`${fieldExpr} >= ${valueExpr(lower, predicate.timeUnit)}`);\n    }\n    if (upper !== null) {\n      exprs.push(`${fieldExpr} <= ${valueExpr(upper, predicate.timeUnit)}`);\n    }\n\n    return exprs.length > 0 ? exprs.join(' && ') : 'true';\n  }\n\n  /* istanbul ignore next: it should never reach here */\n  throw new Error(`Invalid field predicate: ${JSON.stringify(predicate)}`);\n}\n\nfunction valueExpr(v: any, timeUnit: TimeUnit): string {\n  if (isDateTime(v)) {\n    const expr = dateTimeExpr(v, true);\n    return 'time(' + expr + ')';\n  }\n  if (isLocalSingleTimeUnit(timeUnit)) {\n    const datetime: DateTime = {};\n    datetime[timeUnit] = v;\n    const expr = dateTimeExpr(datetime, true);\n    return 'time(' + expr + ')';\n  } else if (isUtcSingleTimeUnit(timeUnit)) {\n    return valueExpr(v, getLocalTimeUnit(timeUnit));\n  }\n  return JSON.stringify(v);\n}\n\nexport function normalizePredicate(f: Predicate): Predicate {\n  if (isFieldPredicate(f) && f.timeUnit) {\n    return {\n      ...f,\n      timeUnit: normalizeTimeUnit(f.timeUnit)\n    };\n  }\n  return f;\n}\n","/// <reference path=\"../../../typings/vega-event-selector.d.ts\" />\n\nimport {selector as parseSelector} from 'vega-event-selector';\nimport {isString, stringValue} from 'vega-util';\nimport {Channel, ScaleChannel, X, Y} from '../../channel';\nimport {warn} from '../../log';\nimport {LogicalOperand} from '../../logical';\nimport {BrushConfig, SELECTION_ID, SelectionDef, SelectionResolution, SelectionType} from '../../selection';\nimport {accessPath, Dict, logicalExpr, varName} from '../../util';\nimport {VgBinding, VgData, VgEventStream, VgSignalRef} from '../../vega.schema';\nimport {DataFlowNode} from '../data/dataflow';\nimport {TimeUnitNode} from '../data/timeunit';\nimport {FacetModel} from '../facet';\nimport {LayerModel} from '../layer';\nimport {isFacetModel, isUnitModel, Model} from '../model';\nimport {UnitModel} from '../unit';\nimport intervalCompiler from './interval';\nimport multiCompiler from './multi';\nimport {SelectionComponent} from './selection';\nimport singleCompiler from './single';\nimport {forEachTransform} from './transforms/transforms';\n\n\nexport const STORE = '_store';\nexport const TUPLE = '_tuple';\nexport const MODIFY = '_modify';\nexport const SELECTION_DOMAIN = '_selection_domain_';\n\nexport interface SelectionComponent {\n  name: string;\n  type: SelectionType;\n  events: VgEventStream;\n  // predicate?: string;\n  bind?: 'scales' | VgBinding | {[key: string]: VgBinding};\n  resolve: SelectionResolution;\n  empty: 'all' | 'none';\n  mark?: BrushConfig;\n\n  _signalNames: {};\n\n  // Transforms\n  project?: ProjectComponent[];\n  fields?: any;\n  timeUnit?: TimeUnitNode;\n  scales?: Channel[];\n  toggle?: any;\n  translate?: any;\n  zoom?: any;\n  nearest?: any;\n}\n\nexport interface ProjectComponent {\n  field?: string;\n  channel?: ScaleChannel;\n}\n\nexport interface SelectionCompiler {\n  signals: (model: UnitModel, selCmpt: SelectionComponent) => any[];\n  topLevelSignals?: (model: Model, selCmpt: SelectionComponent, signals: any[]) => any[];\n  modifyExpr: (model: UnitModel, selCmpt: SelectionComponent) => string;\n  marks?: (model: UnitModel, selCmpt:SelectionComponent, marks: any[]) => any[];\n  predicate: string;  // Vega expr string to determine inclusion in selection.\n  scaleDomain: string;  // Vega expr string to materialize a scale domain.\n}\n\nexport function parseUnitSelection(model: UnitModel, selDefs: Dict<SelectionDef>) {\n  const selCmpts: Dict<SelectionComponent> = {};\n  const selectionConfig = model.config.selection;\n\n  for (let name in selDefs) {\n    if (!selDefs.hasOwnProperty(name)) {\n      continue;\n    }\n\n    const selDef = selDefs[name];\n    const cfg = selectionConfig[selDef.type];\n\n    // Set default values from config if a property hasn't been specified,\n    // or if it is true. E.g., \"translate\": true should use the default\n    // event handlers for translate. However, true may be a valid value for\n    // a property (e.g., \"nearest\": true).\n    for (const key in cfg) {\n      // A selection should contain either `encodings` or `fields`, only use\n      // default values for these two values if neither of them is specified.\n      if ((key === 'encodings' && selDef.fields) || (key === 'fields' && selDef.encodings)) {\n        continue;\n      }\n\n      if (key === 'mark') {\n        selDef[key] = {...cfg[key], ...selDef[key]};\n      }\n\n      if (selDef[key] === undefined || selDef[key] === true) {\n        selDef[key] = cfg[key] || selDef[key];\n      }\n    }\n\n    name = varName(name);\n    const selCmpt = selCmpts[name] = {\n      ...selDef,\n      name: name,\n      events: isString(selDef.on) ? parseSelector(selDef.on, 'scope') : selDef.on,\n    } as SelectionComponent;\n\n    forEachTransform(selCmpt, txCompiler => {\n      if (txCompiler.parse) {\n        txCompiler.parse(model, selDef, selCmpt);\n      }\n    });\n  }\n\n  return selCmpts;\n}\n\nexport function assembleUnitSelectionSignals(model: UnitModel, signals: any[]) {\n  forEachSelection(model, (selCmpt, selCompiler) => {\n    const name = selCmpt.name;\n    let modifyExpr = selCompiler.modifyExpr(model, selCmpt);\n\n    signals.push.apply(signals, selCompiler.signals(model, selCmpt));\n\n    forEachTransform(selCmpt, txCompiler => {\n      if (txCompiler.signals) {\n        signals = txCompiler.signals(model, selCmpt, signals);\n      }\n      if (txCompiler.modifyExpr) {\n        modifyExpr = txCompiler.modifyExpr(model, selCmpt, modifyExpr);\n      }\n    });\n\n    signals.push({\n      name: name + MODIFY,\n      on: [{\n        events: {signal: name + TUPLE},\n        update: `modify(${stringValue(selCmpt.name + STORE)}, ${modifyExpr})`\n      }]\n    });\n  });\n\n  const facetModel = getFacetModel(model);\n  if (signals.length && facetModel) {\n    const name = stringValue(facetModel.getName('cell'));\n    signals.unshift({\n      name: 'facet',\n      value: {},\n      on: [{\n        events: parseSelector('mousemove', 'scope'),\n        update: `isTuple(facet) ? facet : group(${name}).datum`\n      }]\n    });\n  }\n\n  return signals;\n}\n\nexport function assembleTopLevelSignals(model: UnitModel, signals: any[]) {\n  let needsUnit = false;\n  forEachSelection(model, (selCmpt, selCompiler) => {\n    if (selCompiler.topLevelSignals) {\n      signals = selCompiler.topLevelSignals(model, selCmpt, signals);\n    }\n\n    forEachTransform(selCmpt, txCompiler => {\n      if (txCompiler.topLevelSignals) {\n        signals = txCompiler.topLevelSignals(model, selCmpt, signals);\n      }\n    });\n\n    needsUnit = true;\n  });\n\n  if (needsUnit) {\n    const hasUnit = signals.filter((s) => s.name === 'unit');\n    if (!(hasUnit.length)) {\n      signals.unshift({\n        name: 'unit',\n        value: {},\n        on: [{events: 'mousemove', update: 'isTuple(group()) ? group() : unit'}]\n      });\n    }\n  }\n\n  return signals;\n}\n\nexport function assembleUnitSelectionData(model: UnitModel, data: VgData[]): VgData[] {\n  forEachSelection(model, selCmpt => {\n    const contains = data.filter((d) => d.name === selCmpt.name + STORE);\n    if (!contains.length) {\n      data.push({name: selCmpt.name + STORE});\n    }\n  });\n\n  return data;\n}\n\nexport function assembleUnitSelectionMarks(model: UnitModel, marks: any[]): any[] {\n  forEachSelection(model, (selCmpt, selCompiler) => {\n    marks = selCompiler.marks ? selCompiler.marks(model, selCmpt, marks) : marks;\n    forEachTransform(selCmpt, (txCompiler) => {\n      if (txCompiler.marks) {\n        marks = txCompiler.marks(model, selCmpt, marks);\n      }\n    });\n  });\n\n  return marks;\n}\n\nexport function assembleLayerSelectionMarks(model: LayerModel, marks: any[]): any[] {\n  model.children.forEach(child => {\n    if (isUnitModel(child)) {\n      marks = assembleUnitSelectionMarks(child, marks);\n    }\n  });\n\n  return marks;\n}\n\nexport function selectionPredicate(model: Model, selections: LogicalOperand<string>, dfnode?: DataFlowNode): string {\n  const stores: string[] = [];\n  function expr(name: string): string {\n    const vname = varName(name);\n    const selCmpt = model.getSelectionComponent(vname, name);\n    const store = stringValue(vname + STORE);\n\n    if (selCmpt.timeUnit) {\n      const child = dfnode || model.component.data.raw;\n      const tunode = selCmpt.timeUnit.clone();\n      if (child.parent) {\n        tunode.insertAsParentOf(child);\n      } else {\n        child.parent = tunode;\n      }\n    }\n\n    if (selCmpt.empty !== 'none') {\n      stores.push(store);\n    }\n\n    return compiler(selCmpt.type).predicate + `(${store}, datum` +\n      (selCmpt.resolve === 'global' ? ')' : `, ${stringValue(selCmpt.resolve)})`);\n  }\n\n  const predicateStr = logicalExpr(selections, expr);\n  return (stores.length\n    ? '!(' + stores.map((s) => `length(data(${s}))`).join(' || ') + ') || '\n    : ''\n  ) + `(${predicateStr})`;\n}\n\n// Selections are parsed _after_ scales. If a scale domain is set to\n// use a selection, the SELECTION_DOMAIN constant is used as the\n// domainRaw.signal during scale.parse and then replaced with the necessary\n// selection expression function during scale.assemble. To not pollute the\n// type signatures to account for this setup, the selection domain definition\n// is coerced to a string and appended to SELECTION_DOMAIN.\nexport function isRawSelectionDomain(domainRaw: VgSignalRef) {\n  return domainRaw.signal.indexOf(SELECTION_DOMAIN) >= 0;\n}\nexport function selectionScaleDomain(model: Model, domainRaw: VgSignalRef): VgSignalRef {\n  const selDomain = JSON.parse(domainRaw.signal.replace(SELECTION_DOMAIN, ''));\n  const name = varName(selDomain.selection);\n\n  let selCmpt = model.component.selection && model.component.selection[name];\n  if (selCmpt) {\n    warn('Use \"bind\": \"scales\" to setup a binding for scales and selections within the same view.');\n  } else {\n    selCmpt = model.getSelectionComponent(name, selDomain.selection);\n    if (!selDomain.encoding && !selDomain.field) {\n      selDomain.field = selCmpt.project[0].field;\n      if (selCmpt.project.length > 1) {\n        warn('A \"field\" or \"encoding\" must be specified when using a selection as a scale domain. ' +\n        `Using \"field\": ${stringValue(selDomain.field)}.`);\n      }\n    }\n    return {\n      signal: compiler(selCmpt.type).scaleDomain +\n        `(${stringValue(name + STORE)}, ${stringValue(selDomain.encoding || null)}, ` +\n          stringValue(selDomain.field || null) +\n          (selCmpt.resolve === 'global' ? ')' : `, ${stringValue(selCmpt.resolve)})`)\n    };\n  }\n\n  return {signal: 'null'};\n}\n\n// Utility functions\n\nfunction forEachSelection(model: Model, cb: (selCmpt: SelectionComponent, selCompiler: SelectionCompiler) => void) {\n  const selections = model.component.selection;\n  for (const name in selections) {\n    if (selections.hasOwnProperty(name)) {\n      const sel = selections[name];\n      cb(sel, compiler(sel.type));\n    }\n  }\n}\n\nfunction compiler(type: SelectionType): SelectionCompiler {\n  switch (type) {\n    case 'single':\n      return singleCompiler;\n    case 'multi':\n      return multiCompiler;\n    case 'interval':\n      return intervalCompiler;\n  }\n  return null;\n}\n\nfunction getFacetModel(model: Model): FacetModel {\n  let parent = model.parent;\n  while (parent) {\n    if (isFacetModel(parent)) {\n      break;\n    }\n    parent = parent.parent;\n  }\n\n  return parent as FacetModel;\n}\n\nexport function unitName(model: Model) {\n  let name = stringValue(model.name);\n  const facet = getFacetModel(model);\n  if (facet) {\n    name += (facet.facet.row ? ` + '_' + facet${accessPath(facet.vgField('row'))}` : '')\n      + (facet.facet.column ? ` + '_' + facet${accessPath(facet.vgField('column'))}` : '');\n  }\n  return name;\n}\n\nexport function requiresSelectionId(model: Model) {\n  let identifier = false;\n  forEachSelection(model, (selCmpt) => {\n    identifier = identifier || selCmpt.project.some((proj) => proj.field === SELECTION_ID);\n  });\n  return identifier;\n}\n\nexport function channelSignalName(selCmpt: SelectionComponent, channel: Channel, range: 'visual' | 'data') {\n  const sgNames = selCmpt._signalNames || (selCmpt._signalNames = {});\n  if (sgNames[channel] && sgNames[channel][range]) {\n    return sgNames[channel][range];\n  }\n\n  sgNames[channel] = sgNames[channel] || {};\n  const basename = varName(selCmpt.name + '_' + (range === 'visual' ? channel : selCmpt.fields[channel]));\n  let name = basename;\n  let counter = 1;\n  while (sgNames[name]) {\n    name = `${basename}_${counter++}`;\n  }\n\n  return (sgNames[name] = sgNames[channel][range] = name);\n}\n\nexport function positionalProjections(selCmpt: SelectionComponent) {\n  let x:ProjectComponent = null;\n  let xi:number = null;\n  let y:ProjectComponent = null;\n  let yi: number = null;\n\n  selCmpt.project.forEach((p, i) => {\n    if (p.channel === X) {\n      x = p;\n      xi = i;\n    } else if (p.channel === Y) {\n      y = p;\n      yi = i;\n    }\n  });\n  return {x, xi, y, yi};\n}\n","export {default as selector} from './src/event-selector';\n","/**\n * Parse an event selector string.\n * Returns an array of event stream definitions.\n */\nexport default function(selector, source, marks) {\n  DEFAULT_SOURCE = source || VIEW;\n  MARKS = marks || DEFAULT_MARKS;\n  return parseMerge(selector.trim()).map(parseSelector);\n}\n\nvar VIEW    = 'view',\n    LBRACK  = '[',\n    RBRACK  = ']',\n    LBRACE  = '{',\n    RBRACE  = '}',\n    COLON   = ':',\n    COMMA   = ',',\n    NAME    = '@',\n    GT      = '>',\n    ILLEGAL = /[[\\]{}]/,\n    DEFAULT_SOURCE,\n    MARKS,\n    DEFAULT_MARKS = {\n      '*': 1,\n      arc: 1,\n      area: 1,\n      group: 1,\n      image: 1,\n      line: 1,\n      path: 1,\n      rect: 1,\n      rule: 1,\n      shape: 1,\n      symbol: 1,\n      text: 1,\n      trail: 1\n    };\n\nfunction isMarkType(type) {\n  return MARKS.hasOwnProperty(type);\n}\n\nfunction find(s, i, endChar, pushChar, popChar) {\n  var count = 0,\n      n = s.length,\n      c;\n  for (; i<n; ++i) {\n    c = s[i];\n    if (!count && c === endChar) return i;\n    else if (popChar && popChar.indexOf(c) >= 0) --count;\n    else if (pushChar && pushChar.indexOf(c) >= 0) ++count;\n  }\n  return i;\n}\n\nfunction parseMerge(s) {\n  var output = [],\n      start = 0,\n      n = s.length,\n      i = 0;\n\n  while (i < n) {\n    i = find(s, i, COMMA, LBRACK + LBRACE, RBRACK + RBRACE);\n    output.push(s.substring(start, i).trim());\n    start = ++i;\n  }\n\n  if (output.length === 0) {\n    throw 'Empty event selector: ' + s;\n  }\n  return output;\n}\n\nfunction parseSelector(s) {\n  return s[0] === '['\n    ? parseBetween(s)\n    : parseStream(s);\n}\n\nfunction parseBetween(s) {\n  var n = s.length,\n      i = 1,\n      b, stream;\n\n  i = find(s, i, RBRACK, LBRACK, RBRACK);\n  if (i === n) {\n    throw 'Empty between selector: ' + s;\n  }\n\n  b = parseMerge(s.substring(1, i));\n  if (b.length !== 2) {\n    throw 'Between selector must have two elements: ' + s;\n  }\n\n  s = s.slice(i + 1).trim();\n  if (s[0] !== GT) {\n    throw 'Expected \\'>\\' after between selector: ' + s;\n  }\n\n  b = b.map(parseSelector);\n\n  stream = parseSelector(s.slice(1).trim());\n  if (stream.between) {\n    return {\n      between: b,\n      stream: stream\n    };\n  } else {\n    stream.between = b;\n  }\n\n  return stream;\n}\n\nfunction parseStream(s) {\n  var stream = {source: DEFAULT_SOURCE},\n      source = [],\n      throttle = [0, 0],\n      markname = 0,\n      start = 0,\n      n = s.length,\n      i = 0, j,\n      filter;\n\n  // extract throttle from end\n  if (s[n-1] === RBRACE) {\n    i = s.lastIndexOf(LBRACE);\n    if (i >= 0) {\n      try {\n        throttle = parseThrottle(s.substring(i+1, n-1));\n      } catch (e) {\n        throw 'Invalid throttle specification: ' + s;\n      }\n      s = s.slice(0, i).trim();\n      n = s.length;\n    } else throw 'Unmatched right brace: ' + s;\n    i = 0;\n  }\n\n  if (!n) throw s;\n\n  // set name flag based on first char\n  if (s[0] === NAME) markname = ++i;\n\n  // extract first part of multi-part stream selector\n  j = find(s, i, COLON);\n  if (j < n) {\n    source.push(s.substring(start, j).trim());\n    start = i = ++j;\n  }\n\n  // extract remaining part of stream selector\n  i = find(s, i, LBRACK);\n  if (i === n) {\n    source.push(s.substring(start, n).trim());\n  } else {\n    source.push(s.substring(start, i).trim());\n    filter = [];\n    start = ++i;\n    if (start === n) throw 'Unmatched left bracket: ' + s;\n  }\n\n  // extract filters\n  while (i < n) {\n    i = find(s, i, RBRACK);\n    if (i === n) throw 'Unmatched left bracket: ' + s;\n    filter.push(s.substring(start, i).trim());\n    if (i < n-1 && s[++i] !== LBRACK) throw 'Expected left bracket: ' + s;\n    start = ++i;\n  }\n\n  // marshall event stream specification\n  if (!(n = source.length) || ILLEGAL.test(source[n-1])) {\n    throw 'Invalid event selector: ' + s;\n  }\n\n  if (n > 1) {\n    stream.type = source[1];\n    if (markname) {\n      stream.markname = source[0].slice(1);\n    } else if (isMarkType(source[0])) {\n      stream.marktype = source[0];\n    } else {\n      stream.source = source[0];\n    }\n  } else {\n    stream.type = source[0];\n  }\n  if (stream.type.slice(-1) === '!') {\n    stream.consume = true;\n    stream.type = stream.type.slice(0, -1)\n  }\n  if (filter != null) stream.filter = filter;\n  if (throttle[0]) stream.throttle = throttle[0];\n  if (throttle[1]) stream.debounce = throttle[1];\n\n  return stream;\n}\n\nfunction parseThrottle(s) {\n  var a = s.split(COMMA);\n  if (!s.length || a.length > 2) throw s;\n  return a.map(function(_) {\n    var x = +_;\n    if (x !== x) throw s;\n    return x;\n  });\n}\n","import {SingleDefChannel} from './channel';\nimport {VgBinding, VgEventStream} from './vega.schema';\n\nexport const SELECTION_ID = '_vgsid_';\nexport type SelectionType = 'single' | 'multi' | 'interval';\nexport type SelectionResolution = 'global' | 'union' | 'intersect';\n\nexport interface BaseSelectionDef {\n  /**\n   * A [Vega event stream](https://vega.github.io/vega/docs/event-streams/) (object or selector) that triggers the selection.\n   * For interval selections, the event stream must specify a [start and end](https://vega.github.io/vega/docs/event-streams/#between-filters).\n   */\n  on?: VgEventStream;\n  /**\n   * With layered and multi-view displays, a strategy that determines how\n   * selections' data queries are resolved when applied in a filter transform,\n   * conditional encoding rule, or scale domain.\n   *\n   */\n  resolve?: SelectionResolution;\n\n  // TODO(https://github.com/vega/vega-lite/issues/2596).\n  // predicate?: string;\n  // domain?: SelectionDomain;\n\n  // Transforms\n\n  /**\n   * An array of encoding channels. The corresponding data field values\n   * must match for a data tuple to fall within the selection.\n   */\n  encodings?: SingleDefChannel[];\n\n  /**\n   * An array of field names whose values must match for a data tuple to\n   * fall within the selection.\n   */\n  fields?: string[];\n\n  /**\n   * By default, all data values are considered to lie within an empty selection.\n   * When set to `none`, empty selections contain no data values.\n   */\n  empty?: 'all' | 'none';\n}\n\nexport interface SingleSelectionConfig extends BaseSelectionDef {\n  /**\n   * Establish a two-way binding between a single selection and input elements\n   * (also known as dynamic query widgets). A binding takes the form of\n   * Vega's [input element binding definition](https://vega.github.io/vega/docs/signals/#bind)\n   * or can be a mapping between projected field/encodings and binding definitions.\n   *\n   * See the [bind transform](bind.html) documentation for more information.\n   */\n  bind?: VgBinding | {[key: string]: VgBinding};\n\n  /**\n   * When true, an invisible voronoi diagram is computed to accelerate discrete\n   * selection. The data value _nearest_ the mouse cursor is added to the selection.\n   *\n   * See the [nearest transform](nearest.html) documentation for more information.\n   */\n  nearest?: boolean;\n}\n\nexport interface MultiSelectionConfig extends BaseSelectionDef {\n  /**\n   * Controls whether data values should be toggled or only ever inserted into\n   * multi selections. Can be `true`, `false` (for insertion only), or a\n   * [Vega expression](https://vega.github.io/vega/docs/expressions/).\n   *\n   * __Default value:__ `true`, which corresponds to `event.shiftKey` (i.e.,\n   * data values are toggled when a user interacts with the shift-key pressed).\n   *\n   * See the [toggle transform](toggle.html) documentation for more information.\n   */\n  toggle?: string | boolean;\n\n  /**\n   * When true, an invisible voronoi diagram is computed to accelerate discrete\n   * selection. The data value _nearest_ the mouse cursor is added to the selection.\n   *\n   * See the [nearest transform](nearest.html) documentation for more information.\n   */\n  nearest?: boolean;\n}\n\nexport interface BrushConfig {\n  /**\n   * The fill color of the interval mark.\n   *\n   * __Default value:__ `#333333`\n   *\n   */\n  fill?: string;\n  /**\n   * The fill opacity of the interval mark (a value between 0 and 1).\n   *\n   * __Default value:__ `0.125`\n   */\n  fillOpacity?: number;\n  /**\n   * The stroke color of the interval mark.\n   *\n   * __Default value:__ `#ffffff`\n   */\n  stroke?: string;\n  /**\n   * The stroke opacity of the interval mark (a value between 0 and 1).\n   */\n  strokeOpacity?: number;\n  /**\n   * The stroke width of the interval mark.\n   */\n  strokeWidth?: number;\n  /**\n   * An array of alternating stroke and space lengths,\n   * for creating dashed or dotted lines.\n   */\n  strokeDash?: number[];\n  /**\n   * The offset (in pixels) with which to begin drawing the stroke dash array.\n   */\n  strokeDashOffset?: number;\n}\n\nexport interface IntervalSelectionConfig extends BaseSelectionDef {\n  /**\n   * When truthy, allows a user to interactively move an interval selection\n   * back-and-forth. Can be `true`, `false` (to disable panning), or a\n   * [Vega event stream definition](https://vega.github.io/vega/docs/event-streams/)\n   * which must include a start and end event to trigger continuous panning.\n   *\n   * __Default value:__ `true`, which corresponds to\n   * `[mousedown, window:mouseup] > window:mousemove!` which corresponds to\n   * clicks and dragging within an interval selection to reposition it.\n   */\n  translate?: string | boolean;\n\n  /**\n   * When truthy, allows a user to interactively resize an interval selection.\n   * Can be `true`, `false` (to disable zooming), or a [Vega event stream\n   * definition](https://vega.github.io/vega/docs/event-streams/). Currently,\n   * only `wheel` events are supported.\n   *\n   *\n   * __Default value:__ `true`, which corresponds to `wheel!`.\n   */\n  zoom?: string | boolean;\n\n  /**\n   * Establishes a two-way binding between the interval selection and the scales\n   * used within the same view. This allows a user to interactively pan and\n   * zoom the view.\n   */\n  bind?: 'scales';\n\n  /**\n   * An interval selection also adds a rectangle mark to depict the\n   * extents of the interval. The `mark` property can be used to customize the\n   * appearance of the mark.\n   */\n  mark?: BrushConfig;\n}\n\nexport interface SingleSelection extends SingleSelectionConfig {\n  type: 'single';\n}\n\nexport interface MultiSelection extends MultiSelectionConfig {\n  type: 'multi';\n}\n\nexport interface IntervalSelection extends IntervalSelectionConfig {\n  type: 'interval';\n}\n\nexport type SelectionDef = SingleSelection | MultiSelection | IntervalSelection;\n\nexport interface SelectionConfig {\n  /**\n   * The default definition for a [`single`](selection.html#type) selection. All properties and transformations\n   *  for a single selection definition (except `type`) may be specified here.\n   *\n   * For instance, setting `single` to `{\"on\": \"dblclick\"}` populates single selections on double-click by default.\n   */\n  single?: SingleSelectionConfig;\n  /**\n   * The default definition for a [`multi`](selection.html#type) selection. All properties and transformations\n   * for a multi selection definition (except `type`) may be specified here.\n   *\n   * For instance, setting `multi` to `{\"toggle\": \"event.altKey\"}` adds additional values to\n   * multi selections when clicking with the alt-key pressed by default.\n   */\n  multi?: MultiSelectionConfig;\n  /**\n   * The default definition for an [`interval`](selection.html#type) selection. All properties and transformations\n   * for an interval selection definition (except `type`) may be specified here.\n   *\n   * For instance, setting `interval` to `{\"translate\": false}` disables the ability to move\n   * interval selections by default.\n   */\n  interval?: IntervalSelectionConfig;\n}\n\nexport const defaultConfig:SelectionConfig = {\n  single: {\n    on: 'click',\n    fields: [SELECTION_ID],\n    resolve: 'global',\n    empty: 'all'\n  },\n  multi: {\n    on: 'click',\n    fields: [SELECTION_ID],\n    toggle: 'event.shiftKey',\n    resolve: 'global',\n    empty: 'all'\n  },\n  interval: {\n    on: '[mousedown, window:mouseup] > window:mousemove!',\n    encodings: ['x', 'y'],\n    translate: '[mousedown, window:mouseup] > window:mousemove!',\n    zoom: 'wheel!',\n    mark: {fill: '#333', fillOpacity: 0.125, stroke: 'white'},\n    resolve: 'global'\n  }\n};\n","import {isString} from 'vega-util';\n\nimport {Channel, isChannel, isScaleChannel, ScaleChannel, SingleDefChannel} from '../channel';\nimport {Config} from '../config';\nimport {Data, DataSourceType} from '../data';\nimport {forEach, reduce} from '../encoding';\nimport {ChannelDef, FieldDef, FieldRefOption, getFieldDef, vgField} from '../fielddef';\nimport * as log from '../log';\nimport {Resolve} from '../resolve';\nimport {hasDiscreteDomain} from '../scale';\nimport {BaseSpec, isFacetSpec} from '../spec';\nimport {extractTitleConfig, TitleParams} from '../title';\nimport {normalizeTransform, Transform} from '../transform';\nimport {contains, Dict, keys, varName} from '../util';\nimport {\n  isVgRangeStep,\n  VgAxis,\n  VgData,\n  VgEncodeEntry,\n  VgLayout,\n  VgLegend,\n  VgMarkGroup,\n  VgSignal,\n  VgSignalRef,\n  VgTitle,\n} from '../vega.schema';\nimport {VgProjection} from '../vega.schema';\nimport {assembleAxes} from './axis/assemble';\nimport {AxisComponentIndex} from './axis/component';\nimport {ConcatModel} from './concat';\nimport {DataComponent} from './data';\nimport {FacetModel} from './facet';\nimport {LayerModel} from './layer';\nimport {getHeaderGroups, getTitleGroup, HEADER_CHANNELS, LayoutHeaderComponent} from './layout/header';\nimport {sizeExpr} from './layoutsize/assemble';\nimport {LayoutSizeComponent, LayoutSizeIndex} from './layoutsize/component';\nimport {assembleLegends} from './legend/assemble';\nimport {LegendComponentIndex} from './legend/component';\nimport {parseLegend} from './legend/parse';\nimport {assembleProjections} from './projection/assemble';\nimport {ProjectionComponent} from './projection/component';\nimport {parseProjection} from './projection/parse';\nimport {RepeatModel} from './repeat';\nimport {RepeaterValue} from './repeater';\nimport {assembleScales} from './scale/assemble';\nimport {ScaleComponent, ScaleComponentIndex} from './scale/component';\nimport {assembleDomain, getFieldFromDomain} from './scale/domain';\nimport {parseScale} from './scale/parse';\nimport {SelectionComponent} from './selection/selection';\nimport {Split} from './split';\nimport {UnitModel} from './unit';\n\n\n/**\n * Composable Components that are intermediate results of the parsing phase of the\n * compilations.  The components represents parts of the specification in a form that\n * can be easily merged (during parsing for composite specs).\n * In addition, these components are easily transformed into Vega specifications\n * during the \"assemble\" phase, which is the last phase of the compilation step.\n */\nexport interface Component {\n  data: DataComponent;\n\n  layoutSize: LayoutSizeComponent;\n\n  layoutHeaders: {\n    row?: LayoutHeaderComponent,\n    column?: LayoutHeaderComponent\n  };\n\n  mark: VgMarkGroup[];\n  scales: ScaleComponentIndex;\n  projection: ProjectionComponent;\n  selection: Dict<SelectionComponent>;\n\n  /** Dictionary mapping channel to VgAxis definition */\n  axes: AxisComponentIndex;\n\n  /** Dictionary mapping channel to VgLegend definition */\n  legends: LegendComponentIndex;\n\n  resolve: Resolve;\n}\n\nexport interface NameMapInterface {\n  rename(oldname: string, newName: string): void;\n  has(name: string): boolean;\n  get(name: string): string;\n}\n\nexport class NameMap implements NameMapInterface {\n  private nameMap: Dict<string>;\n\n  constructor() {\n    this.nameMap = {};\n  }\n\n  public rename(oldName: string, newName: string) {\n    this.nameMap[oldName] = newName;\n  }\n\n\n  public has(name: string): boolean {\n    return this.nameMap[name] !== undefined;\n  }\n\n  public get(name: string): string {\n    // If the name appears in the _nameMap, we need to read its new name.\n    // We have to loop over the dict just in case the new name also gets renamed.\n    while (this.nameMap[name] && name !== this.nameMap[name]) {\n      name = this.nameMap[name];\n    }\n\n    return name;\n  }\n}\n\n/*\n  We use type guards instead of `instanceof` as `instanceof` makes\n  different parts of the compiler depend on the actual implementation of\n  the model classes, which in turn depend on different parts of the compiler.\n  Thus, `instanceof` leads to circular dependency problems.\n\n  On the other hand, type guards only make different parts of the compiler\n  depend on the type of the model classes, but not the actual implementation.\n*/\n\nexport function isUnitModel(model: Model): model is UnitModel {\n  return model && model.type === 'unit';\n}\n\nexport function isFacetModel(model: Model): model is FacetModel {\n  return model && model.type === 'facet';\n}\n\nexport function isRepeatModel(model: Model): model is RepeatModel {\n  return model && model.type === 'repeat';\n}\n\nexport function isConcatModel(model: Model): model is ConcatModel {\n  return model && model.type === 'concat';\n}\n\nexport function isLayerModel(model: Model): model is LayerModel {\n  return model && model.type === 'layer';\n}\n\nexport abstract class Model {\n\n  public abstract readonly type: 'unit' | 'facet' | 'layer' | 'concat' | 'repeat';\n  public readonly parent: Model;\n  public readonly name: string;\n\n  public readonly title: TitleParams;\n  public readonly description: string;\n\n  public readonly data: Data;\n  public readonly transforms: Transform[];\n\n  /** Name map for scales, which can be renamed by a model's parent. */\n  protected scaleNameMap: NameMapInterface;\n\n  /** Name map for projections, which can be renamed by a model's parent. */\n  protected projectionNameMap: NameMapInterface;\n\n  /** Name map for size, which can be renamed by a model's parent. */\n  protected layoutSizeNameMap: NameMapInterface;\n\n  public readonly repeater: RepeaterValue;\n\n  public readonly config: Config;\n\n  public readonly component: Component;\n\n  public abstract readonly children: Model[] = [];\n\n  constructor(spec: BaseSpec, parent: Model, parentGivenName: string, config: Config, repeater: RepeaterValue, resolve: Resolve) {\n    this.parent = parent;\n    this.config = config;\n    this.repeater = repeater;\n\n    // If name is not provided, always use parent's givenName to avoid name conflicts.\n    this.name = spec.name || parentGivenName;\n    this.title = isString(spec.title) ? {text: spec.title} : spec.title;\n\n    // Shared name maps\n    this.scaleNameMap = parent ? parent.scaleNameMap : new NameMap();\n    this.projectionNameMap = parent ? parent.projectionNameMap : new NameMap();\n    this.layoutSizeNameMap = parent ? parent.layoutSizeNameMap : new NameMap();\n\n    this.data = spec.data;\n\n    this.description = spec.description;\n    this.transforms = normalizeTransform(spec.transform || []);\n\n    this.component = {\n      data: {\n        sources: parent ? parent.component.data.sources : {},\n        outputNodes: parent ? parent.component.data.outputNodes : {},\n        outputNodeRefCounts: parent ? parent.component.data.outputNodeRefCounts : {},\n        ancestorParse: parent ? {...parent.component.data.ancestorParse} : {},\n        // data is faceted if the spec is a facet spec or the parent has faceted data and no data is defined\n        isFaceted: isFacetSpec(spec) || (parent && parent.component.data.isFaceted && !spec.data)\n      },\n      layoutSize: new Split<LayoutSizeIndex>(),\n      layoutHeaders:{row: {}, column: {}},\n      mark: null,\n      resolve: {\n        scale: {}, axis: {}, legend: {},\n        ...(resolve || {})\n      },\n      selection: null,\n      scales: null,\n      projection: null,\n      axes: {},\n      legends: {},\n    };\n  }\n\n  public get width(): VgSignalRef {\n    return this.getSizeSignalRef('width');\n  }\n\n\n  public get height(): VgSignalRef {\n    return this.getSizeSignalRef('height');\n  }\n\n  protected initSize(size: LayoutSizeIndex) {\n    const {width, height} = size;\n    if (width) {\n      this.component.layoutSize.set('width', width, true);\n    }\n\n    if (height) {\n      this.component.layoutSize.set('height', height, true);\n    }\n  }\n\n  public parse() {\n    this.parseScale();\n\n    this.parseLayoutSize(); // depends on scale\n    this.renameTopLevelLayoutSize();\n\n    this.parseSelection();\n    this.parseProjection();\n    this.parseData(); // (pathorder) depends on markDef; selection filters depend on parsed selections; depends on projection because some transforms require the finalized projection name.\n    this.parseAxisAndHeader(); // depends on scale and layout size\n    this.parseLegend(); // depends on scale, markDef\n    this.parseMarkGroup(); // depends on data name, scale, layout size, axisGroup, and children's scale, axis, legend and mark.\n  }\n\n  public abstract parseData(): void;\n\n  public abstract parseSelection(): void;\n\n\n  public parseScale() {\n    parseScale(this);\n  }\n\n  public parseProjection() {\n    parseProjection(this);\n  }\n\n  public abstract parseLayoutSize(): void;\n\n  /**\n   * Rename top-level spec's size to be just width / height, ignoring model name.\n   * This essentially merges the top-level spec's width/height signals with the width/height signals\n   * to help us reduce redundant signals declaration.\n   */\n  private renameTopLevelLayoutSize() {\n    if (this.getName('width') !== 'width') {\n      this.renameLayoutSize(this.getName('width'), 'width');\n    }\n    if (this.getName('height') !== 'height') {\n      this.renameLayoutSize(this.getName('height'), 'height');\n    }\n  }\n\n  public abstract parseMarkGroup(): void;\n\n  public abstract parseAxisAndHeader(): void;\n\n  public parseLegend() {\n    parseLegend(this);\n  }\n\n  public abstract assembleSelectionTopLevelSignals(signals: any[]): any[];\n  public abstract assembleSelectionSignals(): any[];\n\n  public abstract assembleSelectionData(data: VgData[]): VgData[];\n\n  public assembleGroupStyle(): string {\n    if (this.type === 'unit' || this.type === 'layer') {\n      return 'cell';\n    }\n    return undefined;\n  }\n\n  public assembleLayoutSize(): VgEncodeEntry {\n    if (this.type === 'unit' || this.type === 'layer') {\n      return {\n        width: this.getSizeSignalRef('width'),\n        height: this.getSizeSignalRef('height')\n      };\n    }\n    return undefined;\n  }\n\n  public abstract assembleLayout(): VgLayout;\n\n  public abstract assembleLayoutSignals(): VgSignal[];\n\n  public assembleHeaderMarks(): VgMarkGroup[] {\n    const {layoutHeaders} = this.component;\n    let headerMarks = [];\n\n    for (const channel of HEADER_CHANNELS) {\n      if (layoutHeaders[channel].title) {\n        headerMarks.push(getTitleGroup(this, channel));\n      }\n    }\n\n    for (const channel of HEADER_CHANNELS) {\n      headerMarks = headerMarks.concat(getHeaderGroups(this, channel));\n    }\n    return headerMarks;\n  }\n\n  public abstract assembleMarks(): VgMarkGroup[]; // TODO: VgMarkGroup[]\n\n  public assembleAxes(): VgAxis[] {\n    return assembleAxes(this.component.axes, this.config);\n  }\n\n  public assembleLegends(): VgLegend[] {\n    return assembleLegends(this);\n  }\n\n  public assembleProjections(): VgProjection[] {\n    return assembleProjections(this);\n  }\n\n  public assembleTitle(): VgTitle {\n    const title: VgTitle = {\n      ...extractTitleConfig(this.config.title).nonMark,\n      ...this.title\n    };\n\n    if (title.text) {\n      if (!contains(['unit', 'layer'], this.type)) {\n        // As described in https://github.com/vega/vega-lite/issues/2875:\n        // Due to vega/vega#960 (comment), we only support title's anchor for unit and layered spec for now.\n\n        if (title.anchor && title.anchor !== 'start') {\n          log.warn(log.message.cannotSetTitleAnchor(this.type));\n        }\n        title.anchor = 'start';\n      }\n\n      return keys(title).length > 0 ? title : undefined;\n    }\n    return undefined;\n  }\n\n  /**\n   * Assemble the mark group for this model.  We accept optional `signals` so that we can include concat top-level signals with the top-level model's local signals.\n   */\n  public assembleGroup(signals: VgSignal[] = []) {\n    const group: VgMarkGroup = {};\n\n    signals = signals.concat(this.assembleSelectionSignals());\n\n    if (signals.length > 0) {\n      group.signals = signals;\n    }\n\n    const layout = this.assembleLayout();\n    if (layout) {\n      group.layout = layout;\n    }\n\n    group.marks = [].concat(\n      this.assembleHeaderMarks(),\n      this.assembleMarks()\n    );\n\n    // Only include scales if this spec is top-level or if parent is facet.\n    // (Otherwise, it will be merged with upper-level's scope.)\n    const scales = (!this.parent || isFacetModel(this.parent)) ? assembleScales(this) : [];\n    if (scales.length > 0) {\n      group.scales = scales;\n    }\n\n    const axes = this.assembleAxes();\n    if (axes.length > 0) {\n      group.axes = axes;\n    }\n\n    const legends = this.assembleLegends();\n    if (legends.length > 0) {\n      group.legends = legends;\n    }\n\n    return group;\n  }\n\n  public hasDescendantWithFieldOnChannel(channel: Channel) {\n    for (const child of this.children) {\n      if (isUnitModel(child)) {\n        if (child.channelHasField(channel)) {\n          return true;\n        }\n      } else {\n        if (child.hasDescendantWithFieldOnChannel(channel)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  public getName(text: string) {\n    return varName((this.name ? this.name + '_' : '') + text);\n  }\n\n  /**\n   * Request a data source name for the given data source type and mark that data source as required. This method should be called in parse, so that all used data source can be correctly instantiated in assembleData().\n   */\n  public requestDataName(name: DataSourceType) {\n    const fullName = this.getName(name);\n\n    // Increase ref count. This is critical because otherwise we won't create a data source.\n    // We also increase the ref counts on OutputNode.getSource() calls.\n    const refCounts = this.component.data.outputNodeRefCounts;\n    refCounts[fullName] = (refCounts[fullName] || 0) + 1;\n\n    return fullName;\n  }\n\n  public getSizeSignalRef(sizeType: 'width' | 'height'): VgSignalRef {\n    if (isFacetModel(this.parent)) {\n      const channel = sizeType === 'width' ? 'x' : 'y';\n      const scaleComponent = this.component.scales[channel];\n\n      if (scaleComponent && !scaleComponent.merged) { // independent scale\n        const type = scaleComponent.get('type');\n        const range = scaleComponent.get('range');\n\n        if (hasDiscreteDomain(type) && isVgRangeStep(range)) {\n          const scaleName = scaleComponent.get('name');\n          const domain = assembleDomain(this, channel);\n          const field = getFieldFromDomain(domain);\n          if (field) {\n            const fieldRef = vgField({aggregate: 'distinct', field}, {expr: 'datum'});\n            return {\n              signal: sizeExpr(scaleName, scaleComponent, fieldRef)\n            };\n          } else {\n            log.warn('Unknown field for ${channel}.  Cannot calculate view size.');\n            return null;\n          }\n\n        }\n      }\n    }\n\n    return {\n      signal: this.layoutSizeNameMap.get(this.getName(sizeType))\n    };\n  }\n\n  /**\n   * Lookup the name of the datasource for an output node. You probably want to call this in assemble.\n   */\n  public lookupDataSource(name: string) {\n    const node = this.component.data.outputNodes[name];\n\n    if (!node) {\n      // Name not found in map so let's just return what we got.\n      // This can happen if we already have the correct name.\n      return name;\n    }\n\n    return node.getSource();\n  }\n\n  public getSizeName(oldSizeName: string): string {\n     return this.layoutSizeNameMap.get(oldSizeName);\n  }\n\n  public renameLayoutSize(oldName: string, newName: string) {\n    this.layoutSizeNameMap.rename(oldName, newName);\n  }\n\n  public renameScale(oldName: string, newName: string) {\n    this.scaleNameMap.rename(oldName, newName);\n  }\n\n  public renameProjection(oldName: string, newName: string) {\n    this.projectionNameMap.rename(oldName, newName);\n  }\n\n  /**\n   * @return scale name for a given channel after the scale has been parsed and named.\n   */\n  public scaleName(originalScaleName: Channel | string, parse?: boolean): string {\n    if (parse) {\n      // During the parse phase always return a value\n      // No need to refer to rename map because a scale can't be renamed\n      // before it has the original name.\n      return this.getName(originalScaleName);\n    }\n\n    // If there is a scale for the channel, it should either\n    // be in the scale component or exist in the name map\n    if (\n        // If there is a scale for the channel, there should be a local scale component for it\n        (isChannel(originalScaleName) && isScaleChannel(originalScaleName) && this.component.scales[originalScaleName]) ||\n        // in the scale name map (the scale get merged by its parent)\n        this.scaleNameMap.has(this.getName(originalScaleName))\n      ) {\n      return this.scaleNameMap.get(this.getName(originalScaleName));\n    }\n    return undefined;\n  }\n\n  /**\n   * @return projection name after the projection has been parsed and named.\n   */\n  public projectionName(parse?: boolean): string {\n    if (parse) {\n      // During the parse phase always return a value\n      // No need to refer to rename map because a projection can't be renamed\n      // before it has the original name.\n      return this.getName('projection');\n    }\n\n    if ((this.component.projection && !this.component.projection.merged) || this.projectionNameMap.has(this.getName('projection'))) {\n      return this.projectionNameMap.get(this.getName('projection'));\n    }\n    return undefined;\n  }\n\n  /**\n   * Corrects the data references in marks after assemble.\n   */\n  public correctDataNames = (mark: VgMarkGroup) => {\n    // TODO: make this correct\n\n    // for normal data references\n    if (mark.from && mark.from.data) {\n      mark.from.data = this.lookupDataSource(mark.from.data);\n    }\n\n    // for access to facet data\n    if (mark.from && mark.from.facet && mark.from.facet.data) {\n      mark.from.facet.data = this.lookupDataSource(mark.from.facet.data);\n    }\n\n    return mark;\n  }\n\n  /**\n   * Traverse a model's hierarchy to get the scale component for a particular channel.\n   */\n  public getScaleComponent(channel: ScaleChannel): ScaleComponent {\n    /* istanbul ignore next: This is warning for debugging test */\n    if (!this.component.scales) {\n      throw new Error('getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().');\n    }\n\n    const localScaleComponent = this.component.scales[channel];\n    if (localScaleComponent && !localScaleComponent.merged) {\n      return localScaleComponent;\n    }\n    return (this.parent ? this.parent.getScaleComponent(channel) : undefined);\n  }\n\n  /**\n   * Traverse a model's hierarchy to get a particular selection component.\n   */\n  public getSelectionComponent(variableName: string, origName: string): SelectionComponent {\n    let sel = this.component.selection[variableName];\n    if (!sel && this.parent) {\n      sel = this.parent.getSelectionComponent(variableName, origName);\n    }\n    if (!sel) {\n      throw new Error(log.message.selectionNotFound(origName));\n    }\n    return sel;\n  }\n}\n\n/** Abstract class for UnitModel and FacetModel.  Both of which can contain fieldDefs as a part of its own specification. */\nexport abstract class ModelWithField extends Model {\n  public abstract fieldDef(channel: SingleDefChannel): FieldDef<string>;\n\n  /** Get \"field\" reference for vega */\n  public vgField(channel: SingleDefChannel, opt: FieldRefOption = {}) {\n    const fieldDef = this.fieldDef(channel);\n\n    if (!fieldDef) {\n      return undefined;\n    }\n\n    return vgField(fieldDef, opt);\n  }\n\n  protected abstract getMapping(): {[key in Channel]?: any};\n\n  public reduceFieldDef<T, U>(f: (acc: U, fd: FieldDef<string>, c: Channel) => U, init: T, t?: any) {\n    return reduce(this.getMapping(), (acc:U , cd: ChannelDef<string>, c: Channel) => {\n      const fieldDef = getFieldDef(cd);\n      if (fieldDef) {\n        return f(acc, fieldDef, c);\n      }\n      return acc;\n    }, init, t);\n  }\n\n  public forEachFieldDef(f: (fd: FieldDef<string>, c: Channel) => void, t?: any) {\n    forEach(this.getMapping(), (cd: ChannelDef<string>, c: Channel) => {\n      const fieldDef = getFieldDef(cd);\n      if (fieldDef) {\n        f(fieldDef, c);\n      }\n    }, t);\n  }\n  public abstract channelHasField(channel: Channel): boolean;\n}\n","import {Anchor, TitleOrient, VgMarkConfig, VgTitleConfig} from './vega.schema';\n\nexport interface TitleBase {\n  /**\n   * The orientation of the title relative to the chart. One of `\"top\"` (the default), `\"bottom\"`, `\"left\"`, or `\"right\"`.\n   */\n  orient?: TitleOrient;\n\n  /**\n   * The anchor position for placing the title. One of `\"start\"`, `\"middle\"`, or `\"end\"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.\n   *\n   * __Default value:__ `\"middle\"` for [single](spec.html) and [layered](layer.html) views.\n   * `\"start\"` for other composite views.\n   *\n   * __Note:__ [For now](https://github.com/vega/vega-lite/issues/2875), `anchor` is only customizable only for [single](spec.html) and [layered](layer.html) views.  For other composite views, `anchor` is always `\"start\"`.\n   */\n  anchor?: Anchor;\n\n  /**\n   * The orthogonal offset in pixels by which to displace the title from its position along the edge of the chart.\n   */\n  offset?: number;\n\n  /**\n   * A [mark style property](config.html#style) to apply to the title text mark.\n   *\n   * __Default value:__ `\"group-title\"`.\n   */\n  style?: string | string[];\n\n  // TODO: name, encode, interactive, zindex\n}\n\nexport interface TitleParams extends TitleBase {\n  /**\n   * The title text.\n   */\n  text: string;\n}\n\nexport function extractTitleConfig(titleConfig: VgTitleConfig): {\n  mark: VgMarkConfig,\n  nonMark: TitleBase\n} {\n  const {\n    // These are non-mark title config that need to be hardcoded\n    anchor, offset, orient,\n    // color needs to be redirect to fill\n    color,\n    // The rest are mark config.\n    ...titleMarkConfig\n  } = titleConfig;\n\n  const mark: VgMarkConfig = {\n    ...titleMarkConfig,\n    ...color ? {fill: color} : {}\n  };\n\n  const nonMark: TitleBase = {\n    ...anchor ? {anchor} : {},\n    ...offset ? {offset} : {},\n    ...orient ? {orient} : {}\n  };\n\n  return {mark, nonMark};\n}\n","import {AggregateOp} from 'vega';\n\nimport {BinParams} from './bin';\nimport {Data} from './data';\nimport {LogicalOperand, normalizeLogicalOperand} from './logical';\nimport {normalizePredicate, Predicate} from './predicate';\nimport {TimeUnit} from './timeunit';\nimport {VgComparatorOrder} from './vega.schema';\n\nexport interface FilterTransform {\n  /**\n   * The `filter` property must be one of the predicate definitions:\n   * (1) an [expression](https://vega.github.io/vega-lite/docs/types.html#expression) string,\n   * where `datum` can be used to refer to the current data object;\n   * (2) one of the field predicates: [equal predicate](https://vega.github.io/vega-lite/docs/filter.html#equal-predicate);\n   * [range predicate](filter.html#range-predicate), [one-of predicate](https://vega.github.io/vega-lite/docs/filter.html#one-of-predicate);\n   * (3) a [selection predicate](https://vega.github.io/vega-lite/docs/filter.html#selection-predicate);\n   * or (4) a logical operand that combines (1), (2), or (3).\n   */\n  // TODO: https://github.com/vega/vega-lite/issues/2901\n  filter: LogicalOperand<Predicate>;\n}\n\nexport function isFilter(t: Transform): t is FilterTransform {\n  return t['filter'] !== undefined;\n}\n\nexport interface CalculateTransform {\n  /**\n   * A [expression](https://vega.github.io/vega-lite/docs/types.html#expression) string. Use the variable `datum` to refer to the current data object.\n   */\n  calculate: string;\n\n  /**\n   * The field for storing the computed formula value.\n   */\n  as: string;\n}\n\nexport interface BinTransform {\n  /**\n   * An object indicating bin properties, or simply `true` for using default bin parameters.\n   */\n  bin: boolean | BinParams;\n\n  /**\n   * The data field to bin.\n   */\n  field: string;\n\n  /**\n   * The output fields at which to write the start and end bin values.\n   */\n  as: string;\n}\n\nexport interface TimeUnitTransform {\n  /**\n   * The timeUnit.\n   */\n  timeUnit: TimeUnit;\n\n  /**\n   * The data field to apply time unit.\n   */\n  field: string;\n\n  /**\n   * The output field to write the timeUnit value.\n   */\n  as: string;\n}\n\nexport interface AggregateTransform {\n  /**\n   * Array of objects that define fields to aggregate.\n   */\n  aggregate: AggregatedFieldDef[];\n\n  /**\n   * The data fields to group by. If not specified, a single group containing all data objects will be used.\n   */\n  groupby?: string[];\n}\n\nexport interface AggregatedFieldDef {\n  /**\n   * The aggregation operations to apply to the fields, such as sum, average or count.\n   * See the [full list of supported aggregation operations](https://vega.github.io/vega-lite/docs/aggregate.html#ops)\n   * for more information.\n   */\n  op: AggregateOp;\n\n  /**\n   * The data field for which to compute aggregate function. This is required for all aggregation operations except `\"count\"`.\n   */\n  field?: string;\n\n  /**\n   * The output field names to use for each aggregated field.\n   */\n  as: string;\n}\n\n\nexport type WindowOnlyOp =\n  'row_number' |\n   'rank' |\n   'dense_rank' |\n   'percent_rank' |\n   'cume_dist' |\n   'ntile' |\n   'lag' |\n   'lead' |\n   'first_value' |\n   'last_value' |\n   'nth_value';\n\nexport interface WindowFieldDef {\n  /**\n   * The window or aggregation operations to apply within a window, including `rank`, `lead`, `sum`, `average` or `count`. See the list of all supported operations [here](https://vega.github.io/vega-lite/docs/window.html#ops).\n   */\n  op: AggregateOp | WindowOnlyOp;\n\n  /**\n   * Parameter values for the window functions. Parameter values can be omitted for operations that do not accept a parameter.\n   *\n   * See the list of all supported operations and their parameters [here](https://vega.github.io/vega-lite/docs/transforms/window.html).\n   */\n  param?: number;\n\n  /**\n   * The data field for which to compute the aggregate or window function. This can be omitted for window functions that do not operate over a field such as `count`, `rank`, `dense_rank`.\n   */\n  field?: string;\n\n  /**\n   * The output name for the window operation.\n   */\n  as: string;\n}\n\nexport interface WindowTransform {\n  /**\n   * The definition of the fields in the window, and what calculations to use.\n   */\n  window: WindowFieldDef[];\n\n  /**\n   * A frame specification as a two-element array indicating how the sliding window should proceed. The array entries should either be a number indicating the offset from the current data object, or null to indicate unbounded rows preceding or following the current data object. The default value is `[null, 0]`, indicating that the sliding window includes the current object and all preceding objects. The value `[-5, 5]` indicates that the window should include five objects preceding and five objects following the current object. Finally, `[null, null]` indicates that the window frame should always include all data objects. The only operators affected are the aggregation operations and the `first_value`, `last_value`, and `nth_value` window operations. The other window operations are not affected by this.\n   *\n   * __Default value:__:  `[null, 0]` (includes the current object and all preceding objects)\n   */\n  frame?: (null | number)[];\n\n  /**\n   * Indicates if the sliding window frame should ignore peer values. (Peer values are those considered identical by the sort criteria). The default is false, causing the window frame to expand to include all peer values. If set to true, the window frame will be defined by offset values only. This setting only affects those operations that depend on the window frame, namely aggregation operations and the first_value, last_value, and nth_value window operations.\n   *\n   * __Default value:__ `false`\n   */\n  ignorePeers?: boolean;\n\n  /**\n   * The data fields for partitioning the data objects into separate windows. If unspecified, all data points will be a single group.\n   */\n  groupby?: string[];\n\n  /**\n   * A comparator definition for sorting data objects within a window. If two data objects are considered equal by the comparator, they are considered peer values of equal rank. If sort is not specified, the order is undefined: data objects are processed in the order they are observed and none are considered peers (the ignorePeers parameter is ignored and treated as if set to `true`).\n   */\n  sort?: WindowSortField[];\n}\n\nexport interface LookupData {\n  /**\n   * Secondary data source to lookup in.\n   */\n  data: Data;\n  /**\n   * Key in data to lookup.\n   */\n  key: string;\n  /**\n   * Fields in foreign data to lookup.\n   * If not specified, the entire object is queried.\n   */\n  fields?: string[];\n}\n\nexport interface LookupTransform {\n  /**\n   * Key in primary data source.\n   */\n  lookup: string;\n\n  /**\n   * Secondary data reference.\n   */\n  from: LookupData;\n\n  /**\n   * The field or fields for storing the computed formula value.\n   * If `from.fields` is specified, the transform will use the same names for `as`.\n   * If `from.fields` is not specified, `as` has to be a string and we put the whole object into the data under the specified name.\n   */\n  as?: string | string[];\n\n  /**\n   * The default value to use if lookup fails.\n   *\n   * __Default value:__ `null`\n   */\n  default?: string;\n}\n\n\n/**\n * A compartor for fields within the window transform\n */\nexport interface WindowSortField {\n  /**\n   * The name of the field to sort.\n   */\n  field: string;\n\n  /**\n   * Whether to sort the field in ascending or descending order.\n   */\n  order?: VgComparatorOrder;\n}\n\nexport function isLookup(t: Transform): t is LookupTransform {\n  return t['lookup'] !== undefined;\n}\n\nexport function isWindow(t: Transform): t is WindowTransform {\n  return t['window'] !== undefined;\n}\n\nexport function isCalculate(t: Transform): t is CalculateTransform {\n  return t['calculate'] !== undefined;\n}\n\nexport function isBin(t: Transform): t is BinTransform {\n  return !!t['bin'];\n}\n\nexport function isTimeUnit(t: Transform): t is TimeUnitTransform {\n  return t['timeUnit'] !== undefined;\n}\n\nexport function isAggregate(t: Transform): t is AggregateTransform {\n  return t['aggregate'] !== undefined;\n}\n\nexport type Transform = FilterTransform | CalculateTransform | LookupTransform | BinTransform | TimeUnitTransform | AggregateTransform | WindowTransform;\n\nexport function normalizeTransform(transform: Transform[]) {\n  return transform.map(t => {\n    if (isFilter(t)) {\n      return {\n        filter: normalizeLogicalOperand(t.filter, normalizePredicate)\n      };\n    }\n    return t;\n  });\n}\n","import {AggregateOp} from 'vega';\nimport {isArray} from 'vega-util';\nimport {BaseBin} from './bin';\nimport {NiceTime, ScaleType} from './scale';\nimport {SortOrder} from './sort';\nimport {StackOffset} from './stack';\nimport {WindowOnlyOp} from './transform';\nimport {Flag, flagKeys} from './util';\n\nexport interface VgData {\n  name: string;\n  source?: string;\n  values?: any;\n  format?: {\n    type?: string;\n    parse?: string | object;\n    property?: string;\n    feature?: string;\n    mesh?: string;\n  };\n  url?: string;\n  transform?: VgTransform[];\n}\n\n\nexport interface VgParentRef {\n  parent: string;\n}\n\nexport type VgFieldRef = string | VgParentRef | VgParentRef[];\n\nexport type VgSortField = true | {\n  field?: VgFieldRef,\n  op: AggregateOp,\n  order?: SortOrder\n};\n\n/**\n * Unioned domains can only be sorted by count aggregate.\n */\nexport type VgUnionSortField = true | {\n  op: 'count'\n  order?: SortOrder\n};\n\nexport interface VgDataRef {\n  data: string;\n  field: VgFieldRef;\n  sort?: VgSortField;\n}\n\nexport interface VgSignalRef {\n  signal: string;\n}\n\nexport function isVgSignalRef(o: any): o is VgSignalRef {\n  return !!o['signal'];\n}\n\nexport type VgEventStream = any;\n\n// TODO: add type of value (Make it VgValueRef<T> {value?:T ...})\nexport interface VgValueRef {\n  value?: number | string | boolean;\n  field?: string | {\n    datum?: string,\n    group?: string,\n    parent?: string\n  };\n  signal?: string;\n  scale?: string; // TODO: object\n  mult?: number;\n  offset?: number | VgValueRef;\n  band?: boolean | number | VgValueRef;\n}\n\n// TODO: add vg prefix\nexport interface DataRefUnionDomain {\n  fields: (any[] | VgDataRef | VgSignalRef)[];\n  sort?: VgUnionSortField;\n}\n\nexport interface VgFieldRefUnionDomain {\n  data: string;\n  fields: VgFieldRef[];\n  sort?: VgUnionSortField;\n}\n\nexport type VgScheme = {scheme: string, extent?: number[], count?: number};\nexport type VgRange = string | VgDataRef | (number|string|VgDataRef|VgSignalRef)[] | VgScheme | VgRangeStep;\n\nexport type VgRangeStep = {step: number | VgSignalRef};\nexport function isVgRangeStep(range: VgRange): range is VgRangeStep {\n  return !!range['step'];\n}\n\n// Domains that are not a union of domains\nexport type VgNonUnionDomain = any[] | VgDataRef | VgSignalRef;\nexport type VgDomain = VgNonUnionDomain | DataRefUnionDomain | VgFieldRefUnionDomain;\n\nexport type VgMarkGroup = any;\n\nexport type VgProjectionType = 'albers' | 'albersUsa' | 'azimuthalEqualArea' | 'azimuthalEquidistant' | 'conicConformal' | 'conicEqualArea' | 'conicEquidistant' | 'equirectangular' | 'gnomonic' | 'mercator' | 'orthographic' | 'stereographic' | 'transverseMercator';\n\n\nexport type VgProjection = {\n  /*\n   * The name of the projection.\n   */\n  name: string;\n  /*\n   * The type of the projection.\n   */\n  type?: VgProjectionType;\n  /*\n   * The clip angle of the projection.\n   */\n  clipAngle?: number;\n  /*\n   * Sets the projections viewport clip extent to the specified bounds in pixels\n   */\n  clipExtent?: number[][];\n  /*\n   * Sets the projections scale factor to the specified value\n   */\n  scale?: number;\n  /*\n   * The translation of the projection.\n   */\n  translate?: number[];\n  /*\n   * The center of the projection.\n   */\n  center?: number[];\n  /**\n   * The rotation of the projection.\n   */\n  rotate?: number[];\n  /*\n   * The desired precision of the projection.\n   */\n  precision?: String;\n  /*\n   * GeoJSON data to which the projection should attempt to automatically fit the translate and scale parameters..\n   */\n  fit?: VgSignalRef | Object | any[];\n  /*\n   * Used in conjunction with fit, provides the pixel area to which the projection should be automatically fit.\n   */\n  extent?: VgSignalRef | number[][];\n  /*\n   * Used in conjunction with fit, provides the width and height in pixels of the area to which the projection should be automatically fit.\n   */\n  size?: VgSignalRef | (number | VgSignalRef)[];\n\n  /* The following properties are all supported for specific types of projections. Consult the d3-geo-projection library for more information: https://github.com/d3/d3-geo-projection */\n  coefficient?: number;\n  distance?: number;\n  fraction?: number;\n  lobes?: number;\n  parallel?: number;\n  radius?: number;\n  ratio?: number;\n  spacing?: number;\n  tilt?: number;\n};\n\nexport interface VgScale {\n  name: string;\n  type: ScaleType;\n  domain: VgDomain;\n  domainRaw?: VgSignalRef;\n  range: VgRange;\n\n  clamp?: boolean;\n  base?: number;\n  exponent?: number;\n  interpolate?: ScaleInterpolate | ScaleInterpolateParams;\n  nice?: boolean | number | NiceTime | {interval: string, step: number};\n  padding?: number;\n  paddingInner?: number;\n  paddingOuter?: number;\n  reverse?: boolean;\n  round?: boolean;\n  zero?: boolean;\n}\n\nexport type ScaleInterpolate = 'rgb'| 'lab' | 'hcl' | 'hsl' | 'hsl-long' | 'hcl-long' | 'cubehelix' | 'cubehelix-long';\n\nexport interface ScaleInterpolateParams {\n  type: 'rgb' | 'cubehelix' | 'cubehelix-long';\n  gamma?: number;\n}\n\nexport type VgLayoutAlign = 'none' | 'each' | 'all';\n\nexport type RowCol<T> = {\n  row?: T,\n  column?: T\n};\n\nexport interface VgLayout {\n  padding: number | RowCol<number>;\n  headerBand?: number | RowCol<number>;\n  footerBand?: number | RowCol<number>;\n  offset: number | {\n    rowHeader: number,\n    rowFooter: number,\n    rowTitle: number,\n    columnHeader: number,\n    columnFooter: number,\n    columnTitle: number\n  };\n  bounds: 'full' | 'flush';\n  columns?: number | {signal: string};\n  align?: VgLayoutAlign | {\n    row: VgLayoutAlign,\n    column: VgLayoutAlign\n  };\n}\n\nexport function isDataRefUnionedDomain(domain: VgDomain): domain is DataRefUnionDomain {\n  if (!isArray(domain)) {\n    return 'fields' in domain && !('data' in domain);\n  }\n  return false;\n}\n\nexport function isFieldRefUnionDomain(domain: VgDomain): domain is VgFieldRefUnionDomain {\n  if (!isArray(domain)) {\n    return 'fields' in domain && 'data' in domain;\n  }\n  return false;\n}\n\nexport function isDataRefDomain(domain: VgDomain): domain is VgDataRef {\n  if (!isArray(domain)) {\n     return 'field' in domain && 'data' in domain;\n  }\n  return false;\n}\n\nexport function isSignalRefDomain(domain: VgDomain): domain is VgSignalRef {\n  if (!isArray(domain)) {\n    return 'signal' in domain;\n  }\n  return false;\n}\n\nexport interface VgEventHandler {\n  events: string[] | VgSignalRef;\n  update?: string;\n  encode?: string;\n  force?: boolean;\n  between?: any[];\n}\n\nexport interface VgSignal {\n  name: string;\n  bind?: string;\n  description?: string;\n  on?: VgEventHandler[];\n  update?: string;\n  react?: boolean;\n  value?: string | number | boolean | {} | VgSignalRef;\n  // only for nested signals\n  push?: string;\n}\n\nexport type VgEncodeChannel = 'x'|'x2'|'xc'|'width'|'y'|'y2'|'yc'|'height'|'opacity'|'fill'|'fillOpacity'|'stroke'|'strokeWidth'|'strokeCap'|'strokeOpacity'|'strokeDash'|'strokeDashOffset'|'cursor'|'clip'|'size'|'shape'|'path'|'innerRadius'|'outerRadius'|'startAngle'|'endAngle'|'interpolate'|'tension'|'orient'|'url'|'align'|'baseline'|'text'|'dir'|'ellipsis'|'limit'|'dx'|'dy'|'radius'|'theta'|'angle'|'font'|'fontSize'|'fontWeight'|'fontStyle'|'tooltip'|'href'|'cursor'|'defined';\nexport type VgEncodeEntry = {\n  [k in VgEncodeChannel]?: VgValueRef | (VgValueRef & {test?: string})[];\n};\n\n\n// TODO: make export interface VgEncodeEntry {\n//   x?: VgValueRef<number>\n//   y?: VgValueRef<number>\n//  ...\n//   color?: VgValueRef<string>\n//  ...\n// }\n\nexport type AxisOrient = 'top' | 'right' | 'left' | 'bottom';\n\nexport interface VgAxis {\n  scale: string;\n  domain?: boolean;\n  format?: string;\n  grid?: boolean;\n  gridScale?: string;\n\n  labels?: boolean;\n\n  labelBound?: boolean | number;\n  labelFlush?: boolean | number;\n  labelPadding?: number;\n  labelOverlap?: boolean | 'parity' | 'greedy';\n  maxExtent?: number;\n  minExtent?: number;\n  offset?: number;\n  orient?: AxisOrient;\n  position?: number;\n\n  ticks?: boolean;\n  tickCount?: number;\n  tickSize?: number;\n\n  title?: string;\n  titlePadding?: number;\n\n  values?: any[] | VgSignalRef;\n  zindex?: number;\n\n  encode?: VgAxisEncode;\n}\n\nexport type LegendType = 'symbol' | 'gradient';\n\nexport interface VgLegend {\n  fill?: string;\n  stroke?: string;\n  size?: string;\n  shape?: string;\n  opacity?: string;\n\n  entryPadding?: number;\n  format?: string;\n\n  offset?: number;\n  orient?: LegendOrient;\n  padding?: number;\n\n  tickCount?: number;\n  title?: string;\n  type?: LegendType;\n  values?: any[] | VgSignalRef;\n  zindex?: number;\n\n  encode?: VgLegendEncode;\n}\n\nexport interface VgBinTransform extends BaseBin {\n  type: 'bin';\n  extent?: number[] | {signal: string};\n  field: string;\n  as: string[];\n  signal?: string;\n}\n\nexport interface VgExtentTransform {\n  type: 'extent';\n  field: string;\n  signal: string;\n}\n\nexport interface VgFormulaTransform {\n  type: 'formula';\n  as: string;\n  expr: string;\n}\n\nexport interface VgFilterTransform {\n  type: 'filter';\n  expr: string;\n}\n\nexport interface VgAggregateTransform {\n  type: 'aggregate';\n  groupby?: VgFieldRef[];\n  fields?: VgFieldRef[];\n  ops?: AggregateOp[];\n  as?: string[];\n  cross?: boolean;\n  drop?: boolean;\n}\n\nexport interface VgCollectTransform {\n  type: 'collect';\n  sort: VgSort;\n}\n\nexport interface VgLookupTransform {\n  type: 'lookup';\n  from: string;\n  key: string;\n  fields: string[];\n  values?: string[];\n  as?: string[];\n  default?: string;\n}\n\nexport interface VgStackTransform {\n  type: 'stack';\n  offset?: StackOffset;\n  groupby: string[];\n  field: string;\n  sort: VgSort;\n  as: string[];\n}\n\nexport interface VgIdentifierTransform {\n  type: 'identifier';\n  as: string;\n}\n\nexport type VgTransform = VgBinTransform | VgExtentTransform | VgFormulaTransform | VgAggregateTransform | VgFilterTransform | VgImputeTransform | VgStackTransform | VgCollectTransform | VgLookupTransform | VgIdentifierTransform | VgGeoPointTransform | VgGeoJSONTransform | VgGeoJSONTransform | VgWindowTransform;\n\nexport interface VgGeoPointTransform {\n  type: 'geopoint';\n  projection: string; // projection name\n  fields: VgFieldRef[];\n  as?: string[];\n}\n\nexport interface VgGeoShapeTransform {\n  type: 'geoshape';\n  projection: string; // projection name\n  field?: VgFieldRef;\n  as?: string;\n}\n\nexport interface VgGeoJSONTransform {\n  type: 'geojson';\n  fields?: VgFieldRef[];\n  geojson?: VgFieldRef;\n  signal: string;\n}\n\nexport type VgPostEncodingTransform = VgGeoShapeTransform;\n\nexport interface VgAxisEncode {\n  ticks?: VgGuideEncode;\n  labels?: VgGuideEncode;\n  title?: VgGuideEncode;\n  grid?: VgGuideEncode;\n  domain?: VgGuideEncode;\n}\n\nexport interface VgLegendEncode {\n  title?: VgGuideEncode;\n  labels?: VgGuideEncode;\n  legend?: VgGuideEncode;\n  symbols?: VgGuideEncode;\n  gradient?: VgGuideEncode;\n}\n\nexport type VgGuideEncode = any; // TODO: replace this (See guideEncode in Vega Schema)\n\nexport type VgSort = {\n  field: string;\n  order?: VgComparatorOrder;\n} | {\n  field: string[];\n  order?: (VgComparatorOrder)[];\n};\n\nexport interface VgImputeTransform {\n  type: 'impute';\n  groupby?: string[];\n  field: string;\n  key: string;\n  keyvals?: string[];\n  method?: 'value' | 'median' | 'max' | 'min' | 'mean';\n  value?: any;\n}\n\nexport type VgCheckboxBinding = {\n  input: 'checkbox';\n  element?: string;\n};\n\nexport type VgRadioBinding = {\n  input: 'radio';\n  options: string[];\n  element?: string;\n};\n\nexport type VgSelectBinding = {\n  input: 'select';\n  options: string[];\n  element?: string;\n};\n\nexport type VgRangeBinding = {\n  input: 'range';\n  min?: number;\n  max?: number;\n  step?: number;\n  element?: string;\n};\n\nexport type VgGenericBinding = {\n  input: string;\n  element?: string;\n};\n\nexport type VgBinding = VgCheckboxBinding | VgRadioBinding |\n  VgSelectBinding | VgRangeBinding | VgGenericBinding;\n\n\n/**\n * Base object for Vega's Axis and Axis Config.\n * All of these properties are both properties of Vega's Axis and Axis Config.\n */\nexport interface VgAxisBase {\n  /**\n   * A boolean flag indicating if the domain (the axis baseline) should be included as part of the axis.\n   *\n   * __Default value:__ `true`\n   */\n  domain?: boolean;\n\n  /**\n   * A boolean flag indicating if grid lines should be included as part of the axis\n   *\n   * __Default value:__ `true` for [continuous scales](scale.html#continuous) that are not binned; otherwise, `false`.\n   */\n  grid?: boolean;\n\n  /**\n   * A boolean flag indicating if labels should be included as part of the axis.\n   *\n   * __Default value:__  `true`.\n   */\n  labels?: boolean;\n\n  /**\n   * Indicates if labels should be hidden if they exceed the axis range. If`false`(the default) no bounds overlap analysis is performed. If`true`, labels will be hidden if they exceed the axis range by more than 1 pixel. If this property is a number, it specifies the pixel tolerance: the maximum amount by which a label bounding box may exceed the axis range.\n   *\n   * __Default value:__ `false`.\n   */\n  labelBound?: boolean | number;\n\n  /**\n   * Indicates if the first and last axis labels should be aligned flush with the scale range. Flush alignment for a horizontal axis will left-align the first label and right-align the last label. For vertical axes, bottom and top text baselines are applied instead. If this property is a number, it also indicates the number of pixels by which to offset the first and last labels; for example, a value of 2 will flush-align the first and last labels and also push them 2 pixels outward from the center of the axis. The additional adjustment can sometimes help the labels better visually group with corresponding axis ticks.\n   *\n   * __Default value:__ `true` for axis of a continuous x-scale. Otherwise, `false`.\n   */\n  labelFlush?: boolean | number;\n\n  /**\n   * The strategy to use for resolving overlap of axis labels. If `false` (the default), no overlap reduction is attempted. If set to `true` or `\"parity\"`, a strategy of removing every other label is used (this works well for standard linear axes). If set to `\"greedy\"`, a linear scan of the labels is performed, removing any labels that overlaps with the last visible label (this often works better for log-scaled axes).\n   *\n   * __Default value:__ `true` for non-nominal fields with non-log scales; `\"greedy\"` for log scales; otherwise `false`.\n   */\n  labelOverlap?: boolean | 'parity' | 'greedy';\n\n  /**\n   * The padding, in pixels, between axis and text labels.\n   */\n  labelPadding?: number;\n\n  /**\n   * Boolean value that determines whether the axis should include ticks.\n   */\n  ticks?: boolean;\n\n  /**\n   * The size in pixels of axis ticks.\n   *\n   * @minimum 0\n   */\n  tickSize?: number;\n\n  /**\n   * Max length for axis title if the title is automatically generated from the field's description.\n   *\n   * @minimum 0\n   * __Default value:__ `undefined`.\n   */\n  titleMaxLength?: number;\n\n  /**\n   * The padding, in pixels, between title and axis.\n   */\n  titlePadding?: number;\n\n  /**\n   * The minimum extent in pixels that axis ticks and labels should use. This determines a minimum offset value for axis titles.\n   *\n   * __Default value:__ `30` for y-axis; `undefined` for x-axis.\n   */\n  minExtent?: number;\n\n  /**\n   * The maximum extent in pixels that axis ticks and labels should use. This determines a maximum offset value for axis titles.\n   *\n   * __Default value:__ `undefined`.\n   */\n  maxExtent?: number;\n}\n\nexport interface VgAxisConfig extends VgAxisBase {\n  /**\n   * An interpolation fraction indicating where, for `band` scales, axis ticks should be positioned. A value of `0` places ticks at the left edge of their bands. A value of `0.5` places ticks in the middle of their bands.\n   */\n  bandPosition?: number;\n  /**\n   * Stroke width of axis domain line\n   *\n   * __Default value:__  (none, using Vega default).\n   */\n  domainWidth?: number;\n\n  /**\n   * Color of axis domain line.\n   *\n   * __Default value:__  (none, using Vega default).\n   */\n  domainColor?: string;\n\n  // ---------- Grid ----------\n  /**\n   * Color of gridlines.\n   */\n  gridColor?: string;\n\n  /**\n   * The offset (in pixels) into which to begin drawing with the grid dash array.\n   */\n  gridDash?: number[];\n\n  /**\n   * The stroke opacity of grid (value between [0,1])\n   *\n   * __Default value:__ (`1` by default)\n   * @minimum 0\n   * @maximum 1\n   */\n  gridOpacity?: number;\n\n  /**\n   * The grid width, in pixels.\n   * @minimum 0\n   */\n  gridWidth?: number;\n\n  // ---------- Ticks ----------\n  /**\n   * The color of the axis's tick.\n   */\n  tickColor?: string;\n\n\n  /**\n   * The rotation angle of the axis labels.\n   *\n   * __Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.\n   *\n   * @minimum -360\n   * @maximum 360\n   */\n  labelAngle?: number;\n\n  /**\n   * The color of the tick label, can be in hex color code or regular color name.\n   */\n  labelColor?: string;\n\n  /**\n   * The font of the tick label.\n   */\n  labelFont?: string;\n\n  /**\n   * The font size of the label, in pixels.\n   *\n   * @minimum 0\n   */\n  labelFontSize?: number;\n\n  /**\n   * Maximum allowed pixel width of axis tick labels.\n   */\n  labelLimit?: number;\n\n  /**\n   * Boolean flag indicating if pixel position values should be rounded to the nearest integer.\n   */\n  tickRound?: boolean;\n\n  /**\n   * The width, in pixels, of ticks.\n   *\n   * @minimum 0\n   */\n  tickWidth?: number;\n\n  // ---------- Title ----------\n\n  /**\n   * Horizontal text alignment of axis titles.\n   */\n  titleAlign?: string;\n\n  /**\n   * Angle in degrees of axis titles.\n   */\n  titleAngle?: number;\n  /**\n   * Vertical text baseline for axis titles.\n   */\n  titleBaseline?: string;\n  /**\n   * Color of the title, can be in hex color code or regular color name.\n   */\n  titleColor?: string;\n\n  /**\n   * Font of the title. (e.g., `\"Helvetica Neue\"`).\n   */\n  titleFont?: string;\n\n  /**\n   * Font size of the title.\n   *\n   * @minimum 0\n   */\n  titleFontSize?: number;\n\n  /**\n   * Font weight of the title.\n   * This can be either a string (e.g `\"bold\"`, `\"normal\"`) or a number (`100`, `200`, `300`, ..., `900` where `\"normal\"` = `400` and `\"bold\"` = `700`).\n   */\n  titleFontWeight?: FontWeight;\n\n  /**\n   * Maximum allowed pixel width of axis titles.\n   */\n  titleLimit?: number;\n\n  /**\n   * X-coordinate of the axis title relative to the axis group.\n   */\n  titleX?: number;\n\n  /**\n   * Y-coordinate of the axis title relative to the axis group.\n   */\n  titleY?: number;\n}\n\nexport type LegendOrient = 'left' | 'right' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right' | 'none';\n\nexport interface VgLegendBase {\n  /**\n   * Padding (in pixels) between legend entries in a symbol legend.\n   */\n  entryPadding?: number;\n\n\n  /**\n   * The orientation of the legend, which determines how the legend is positioned within the scene. One of \"left\", \"right\", \"top-left\", \"top-right\", \"bottom-left\", \"bottom-right\", \"none\".\n   *\n   * __Default value:__ `\"right\"`\n   */\n  orient?: LegendOrient;\n\n  /**\n   * The offset, in pixels, by which to displace the legend from the edge of the enclosing group or data rectangle.\n   *\n   * __Default value:__  `0`\n   */\n  offset?: number;\n\n  /**\n   * The padding, in pixels, between the legend and axis.\n   */\n  padding?: number;\n}\n\nexport interface VgLegendConfig extends VgLegendBase {\n\n  /**\n   * Corner radius for the full legend.\n   */\n  cornerRadius?: number;\n\n  /**\n   * Background fill color for the full legend.\n   */\n  fillColor?: string;\n\n  /**\n   * Border stroke color for the full legend.\n   */\n  strokeColor?: string;\n\n  /**\n   * Border stroke dash pattern for the full legend.\n   */\n  strokeDash?: number[];\n\n  /**\n   * Border stroke width for the full legend.\n   */\n  strokeWidth?: number;\n  // ---------- Gradient ----------\n  /**\n   * The color of the gradient stroke, can be in hex color code or regular color name.\n   */\n  gradientStrokeColor?: string;\n\n  /**\n   * The width of the gradient stroke, in pixels.\n   * @minimum 0\n   */\n  gradientStrokeWidth?: number;\n\n  /**\n   * The height of the gradient, in pixels.\n   * @minimum 0\n   */\n  gradientHeight?: number;\n\n  /**\n   * Text baseline for color ramp gradient labels.\n   */\n  gradientLabelBaseline?: string;\n\n  /**\n   * The maximum allowed length in pixels of color ramp gradient labels.\n   */\n  gradientLabelLimit?: number;\n\n  /**\n   * Vertical offset in pixels for color ramp gradient labels.\n   */\n  gradientLabelOffset?: number;\n\n  /**\n   * The width of the gradient, in pixels.\n   * @minimum 0\n   */\n  gradientWidth?: number;\n\n  // ---------- Label ----------\n  /**\n   * The alignment of the legend label, can be left, middle or right.\n   */\n  labelAlign?: string;\n\n  /**\n   * The position of the baseline of legend label, can be top, middle or bottom.\n   */\n  labelBaseline?: string;\n\n  /**\n   * The color of the legend label, can be in hex color code or regular color name.\n   */\n  labelColor?: string;\n\n  /**\n   * The font of the legend label.\n   */\n  labelFont?: string;\n\n  /**\n   * The font size of legend label.\n   *\n   * __Default value:__ `10`.\n   *\n   * @minimum 0\n   */\n  labelFontSize?: number;\n\n  /**\n   * Maximum allowed pixel width of axis tick labels.\n   */\n  labelLimit?: number;\n\n  /**\n   * The offset of the legend label.\n   * @minimum 0\n   */\n  labelOffset?: number;\n\n  // ---------- Symbols ----------\n  /**\n   * The color of the legend symbol,\n   */\n  symbolColor?: string;\n\n  /**\n   * Default shape type (such as \"circle\") for legend symbols.\n   */\n  symbolType?: string;\n\n  /**\n   * The size of the legend symbol, in pixels.\n   * @minimum 0\n   */\n  symbolSize?: number;\n\n  /**\n   * The width of the symbol's stroke.\n   * @minimum 0\n   */\n  symbolStrokeWidth?: number;\n\n  // ---------- Title ----------\n  /**\n   * Horizontal text alignment for legend titles.\n   */\n  titleAlign?: string;\n\n   /**\n    * Vertical text baseline for legend titles.\n    */\n  titleBaseline?: string;\n  /**\n   * The color of the legend title, can be in hex color code or regular color name.\n   */\n  titleColor?: string;\n\n  /**\n   * The font of the legend title.\n   */\n  titleFont?: string;\n\n  /**\n   * The font size of the legend title.\n   */\n  titleFontSize?: number;\n\n  /**\n   * The font weight of the legend title.\n   * This can be either a string (e.g `\"bold\"`, `\"normal\"`) or a number (`100`, `200`, `300`, ..., `900` where `\"normal\"` = `400` and `\"bold\"` = `700`).\n   */\n  titleFontWeight?: FontWeight;\n\n  /**\n   * Maximum allowed pixel width of axis titles.\n   */\n  titleLimit?: number;\n\n  /**\n   * The padding, in pixels, between title and legend.\n   */\n  titlePadding?: number;\n}\n\nexport type FontStyle = 'normal' | 'italic';\n\nexport type FontWeightString = 'normal' | 'bold';\n/**\n * @TJS-type integer\n * @minimum 100\n * @maximum 900\n */\nexport type FontWeightNumber = number;\nexport type FontWeight = FontWeightString | FontWeightNumber;\nexport type HorizontalAlign = 'left' | 'right' | 'center';\nexport type Interpolate = 'linear' | 'linear-closed' |\n  'step' | 'step-before' | 'step-after' |\n  'basis' | 'basis-open' | 'basis-closed' |\n  'cardinal' | 'cardinal-open' | 'cardinal-closed' |\n  'bundle' | 'monotone';\nexport type Orient = 'horizontal' | 'vertical';\nexport type VerticalAlign = 'top' | 'middle' | 'bottom';\n\nexport interface VgMarkConfig {\n\n  /**\n   * Default Fill Color.  This has higher precedence than `config.color`\n   *\n   * __Default value:__ (None)\n   *\n   */\n  fill?: string;\n\n  /**\n   * Default Stroke Color.  This has higher precedence than `config.color`\n   *\n   * __Default value:__ (None)\n   *\n   */\n  stroke?: string;\n\n  // ---------- Opacity ----------\n  /**\n   * The overall opacity (value between [0,1]).\n   *\n   * __Default value:__ `0.7` for non-aggregate plots with `point`, `tick`, `circle`, or `square` marks or layered `bar` charts and `1` otherwise.\n   *\n   * @minimum 0\n   * @maximum 1\n   */\n  opacity?: number;\n\n\n  /**\n   * The fill opacity (value between [0,1]).\n   *\n   * __Default value:__ `1`\n   *\n   * @minimum 0\n   * @maximum 1\n   */\n  fillOpacity?: number;\n\n  /**\n   * The stroke opacity (value between [0,1]).\n   *\n   * __Default value:__ `1`\n   *\n   * @minimum 0\n   * @maximum 1\n   */\n  strokeOpacity?: number;\n\n  // ---------- Stroke Style ----------\n  /**\n   * The stroke width, in pixels.\n   *\n   * @minimum 0\n   */\n  strokeWidth?: number;\n\n  /**\n   * The stroke cap for line ending style. One of `\"butt\"`, `\"round\"`, or `\"square\"`.\n   *\n   * __Default value:__ `\"square\"`\n   */\n  strokeCap?: 'butt' | 'round' | 'square';\n\n  /**\n   * An array of alternating stroke, space lengths for creating dashed or dotted lines.\n   */\n  strokeDash?: number[];\n\n  /**\n   * The offset (in pixels) into which to begin drawing with the stroke dash array.\n   */\n  strokeDashOffset?: number;\n\n  // ---------- Orientation: Bar, Tick, Line, Area ----------\n  /**\n   * The orientation of a non-stacked bar, tick, area, and line charts.\n   * The value is either horizontal (default) or vertical.\n   * - For bar, rule and tick, this determines whether the size of the bar and tick\n   * should be applied to x or y dimension.\n   * - For area, this property determines the orient property of the Vega output.\n   * - For line and trail marks, this property determines the sort order of the points in the line\n   * if `config.sortLineBy` is not specified.\n   * For stacked charts, this is always determined by the orientation of the stack;\n   * therefore explicitly specified value will be ignored.\n   */\n  orient?: Orient;\n\n  // ---------- Interpolation: Line / area ----------\n  /**\n   * The line interpolation method to use for line and area marks. One of the following:\n   * - `\"linear\"`: piecewise linear segments, as in a polyline.\n   * - `\"linear-closed\"`: close the linear segments to form a polygon.\n   * - `\"step\"`: alternate between horizontal and vertical segments, as in a step function.\n   * - `\"step-before\"`: alternate between vertical and horizontal segments, as in a step function.\n   * - `\"step-after\"`: alternate between horizontal and vertical segments, as in a step function.\n   * - `\"basis\"`: a B-spline, with control point duplication on the ends.\n   * - `\"basis-open\"`: an open B-spline; may not intersect the start or end.\n   * - `\"basis-closed\"`: a closed B-spline, as in a loop.\n   * - `\"cardinal\"`: a Cardinal spline, with control point duplication on the ends.\n   * - `\"cardinal-open\"`: an open Cardinal spline; may not intersect the start or end, but will intersect other control points.\n   * - `\"cardinal-closed\"`: a closed Cardinal spline, as in a loop.\n   * - `\"bundle\"`: equivalent to basis, except the tension parameter is used to straighten the spline.\n   * - `\"monotone\"`: cubic interpolation that preserves monotonicity in y.\n   */\n  interpolate?: Interpolate;\n  /**\n   * Depending on the interpolation type, sets the tension parameter (for line and area marks).\n   * @minimum 0\n   * @maximum 1\n   */\n  tension?: number;\n\n  /**\n   * The default symbol shape to use. One of: `\"circle\"` (default), `\"square\"`, `\"cross\"`, `\"diamond\"`, `\"triangle-up\"`, or `\"triangle-down\"`, or a custom SVG path.\n   *\n   * __Default value:__ `\"circle\"`\n   *\n   */\n  shape?: string;\n\n  /**\n   * The pixel area each the point/circle/square.\n   * For example: in the case of circles, the radius is determined in part by the square root of the size value.\n   *\n   * __Default value:__ `30`\n   *\n   * @minimum 0\n   */\n  size?: number;\n\n  // Text / Label Mark Config\n\n  /**\n   * The horizontal alignment of the text. One of `\"left\"`, `\"right\"`, `\"center\"`.\n   */\n  align?: HorizontalAlign;\n\n  /**\n   * The rotation angle of the text, in degrees.\n   * @minimum 0\n   * @maximum 360\n   */\n  angle?: number;\n\n  /**\n   * The vertical alignment of the text. One of `\"top\"`, `\"middle\"`, `\"bottom\"`.\n   *\n   * __Default value:__ `\"middle\"`\n   *\n   */\n  baseline?: VerticalAlign;\n\n  /**\n   * The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.\n   */\n  dx?: number;\n\n  /**\n   * The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the _angle_ property.\n   */\n  dy?: number;\n\n  /**\n   * Polar coordinate radial offset, in pixels, of the text label from the origin determined by the `x` and `y` properties.\n   * @minimum 0\n   */\n  radius?: number;\n\n  /**\n   * The maximum length of the text mark in pixels (default 0, indicating no limit). The text value will be automatically truncated if the rendered size exceeds the limit.\n   */\n  limit?: number;\n\n  /**\n   * Polar coordinate angle, in radians, of the text label from the origin determined by the `x` and `y` properties. Values for `theta` follow the same convention of `arc` mark `startAngle` and `endAngle` properties: angles are measured in radians, with `0` indicating \"north\".\n   */\n  theta?: number;\n\n  /**\n   * The typeface to set the text in (e.g., `\"Helvetica Neue\"`).\n   */\n  font?: string;\n\n  /**\n   * The font size, in pixels.\n   * @minimum 0\n   */\n  fontSize?: number;\n\n  /**\n   * The font style (e.g., `\"italic\"`).\n   */\n  fontStyle?: FontStyle;\n  /**\n   * The font weight.\n   * This can be either a string (e.g `\"bold\"`, `\"normal\"`) or a number (`100`, `200`, `300`, ..., `900` where `\"normal\"` = `400` and `\"bold\"` = `700`).\n   */\n  fontWeight?: FontWeight;\n\n  /**\n   * Placeholder text if the `text` channel is not specified\n   */\n  text?: string;\n\n  /**\n   * A URL to load upon mouse click. If defined, the mark acts as a hyperlink.\n   *\n   * @format uri\n   */\n  href?: string;\n\n  /**\n   * The mouse cursor used over the mark. Any valid [CSS cursor type](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor#Values) can be used.\n   */\n  cursor?: 'auto' | 'default' | 'none' | 'context-menu' | 'help' | 'pointer' | 'progress' | 'wait' | 'cell' | 'crosshair' | 'text' | 'vertical-text' | 'alias' | 'copy' | 'move' | 'no-drop' | 'not-allowed' | 'e-resize' | 'n-resize' | 'ne-resize' | 'nw-resize' | 's-resize' | 'se-resize' | 'sw-resize' | 'w-resize' | 'ew-resize' | 'ns-resize' | 'nesw-resize' | 'nwse-resize' | 'col-resize' | 'row-resize' | 'all-scroll' | 'zoom-in' | 'zoom-out' | 'grab' | 'grabbing';\n}\n\nconst VG_MARK_CONFIG_INDEX: Flag<keyof VgMarkConfig> = {\n  opacity: 1,\n  fill: 1,\n  fillOpacity: 1,\n  stroke: 1,\n  strokeCap: 1,\n  strokeWidth: 1,\n  strokeOpacity: 1,\n  strokeDash: 1,\n  strokeDashOffset: 1,\n  size: 1,\n  shape: 1,\n  interpolate: 1,\n  tension: 1,\n  orient: 1,\n  align: 1,\n  baseline: 1,\n  text: 1,\n  limit: 1,\n  dx: 1,\n  dy: 1,\n  radius: 1,\n  theta: 1,\n  angle: 1,\n  font: 1,\n  fontSize: 1,\n  fontWeight: 1,\n  fontStyle: 1,\n  cursor: 1,\n  href: 1,\n  // commented below are vg channel that do not have mark config.\n  // 'x'|'x2'|'xc'|'width'|'y'|'y2'|'yc'|'height'\n  // clip: 1,\n  // dir: 1,\n  // ellipsis: 1,\n  // endAngle: 1,\n  // innerRadius: 1,\n  // outerRadius: 1,\n  // path: 1,\n  // startAngle: 1,\n  // url: 1,\n};\n\nexport const VG_MARK_CONFIGS = flagKeys(VG_MARK_CONFIG_INDEX);\n\nexport type Anchor = 'start' | 'middle' | 'end';\n\nexport interface VgTitle {\n  /**\n   * The title text.\n   */\n  text: string;\n\n  /**\n   * The orientation of the title relative to the chart. One of `\"top\"` (the default), `\"bottom\"`, `\"left\"`, or `\"right\"`.\n   */\n  orient?: TitleOrient;\n\n  /**\n   * The anchor position for placing the title. One of `\"start\"`, `\"middle\"` (the default), or `\"end\"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.\n   */\n  anchor?: Anchor;\n\n  /**\n   * The orthogonal offset in pixels by which to displace the title from its position along the edge of the chart.\n   */\n  offset?: number;\n\n  style?: string | string[];\n\n  // TODO: name, encode, interactive, zindex\n}\n\nexport type TitleOrient = 'top' | 'bottom' | 'left' | 'right';\n\nexport interface VgTitleConfig {\n  /**\n   * The anchor position for placing the title. One of `\"start\"`, `\"middle\"`, or `\"end\"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.\n   *\n   * __Default value:__ `\"middle\"` for [single](spec.html) and [layered](layer.html) views.\n   * `\"start\"` for other composite views.\n   *\n   * __Note:__ [For now](https://github.com/vega/vega-lite/issues/2875), `anchor` is only customizable only for [single](spec.html) and [layered](layer.html) views.  For other composite views, `anchor` is always `\"start\"`.\n   */\n  anchor?: Anchor;\n  /**\n   * Angle in degrees of title text.\n   */\n  angle?:\tnumber;\n  /**\n   * Vertical text baseline for title text.\n   */\n  baseline?: VerticalAlign;\n  /**\n   * Text color for title text.\n   */\n  color?:\tstring;\n  /**\n   * Font name for title text.\n   */\n  font?:\tstring;\n  /**\n   * Font size in pixels for title text.\n   *\n   * __Default value:__ `10`.\n   *\n   * @minimum 0\n   */\n  fontSize?:\tnumber;\n  /**\n   * Font weight for title text.\n   * This can be either a string (e.g `\"bold\"`, `\"normal\"`) or a number (`100`, `200`, `300`, ..., `900` where `\"normal\"` = `400` and `\"bold\"` = `700`).\n   */\n  fontWeight?: FontWeight;\n  /**\n   * The maximum allowed length in pixels of legend labels.\n   *\n   * @minimum 0\n   */\n  limit?:\tnumber;\n  /**\n   * Offset in pixels of the title from the chart body and axes.\n   */\n  offset?:\tnumber;\n  /**\n   * Default title orientation (\"top\", \"bottom\", \"left\", or \"right\")\n   */\n  orient?: TitleOrient;\n}\n\nexport type VgComparatorOrder = 'ascending' | 'descending';\n\nexport interface VgComparator {\n  field?: string | string[];\n  order?: VgComparatorOrder | VgComparatorOrder[];\n}\n\nexport interface VgWindowTransform {\n  type: 'window';\n  params?: Number[];\n  as?: string[];\n  ops?: (AggregateOp | WindowOnlyOp)[];\n  fields?: string[];\n  frame?: Number[];\n  ignorePeers?: Boolean;\n  groupby?: string[];\n  sort?: VgComparator;\n}\n","import {isArray} from 'vega-util';\n\nimport {AXIS_PARTS, AXIS_PROPERTY_TYPE} from '../../axis';\nimport {Config} from '../../config';\nimport {FieldDefBase, title as fieldDefTitle} from '../../fielddef';\nimport {keys} from '../../util';\nimport {VgAxis} from '../../vega.schema';\nimport {AxisComponent, AxisComponentIndex} from './component';\n\nfunction assembleTitle(title: string | FieldDefBase<string>[], config: Config) {\n  if (isArray(title)) {\n    return title.map(fieldDef => fieldDefTitle(fieldDef, config)).join(', ');\n  }\n  return title;\n}\n\nexport function assembleAxis(\n  axisCmpt: AxisComponent,\n  kind: 'main' | 'grid',\n  config: Config,\n  opt: {\n    header: boolean // whether this is called via a header\n  } = {header: false}\n): VgAxis {\n  const {orient, scale, title, zindex, ...axis} = axisCmpt.combine();\n\n  // Remove properties that are not valid for this kind of axis\n  keys(axis).forEach((key) => {\n    const propType = AXIS_PROPERTY_TYPE[key];\n    if (propType && propType !== kind && propType !== 'both') {\n      delete axis[key];\n    }\n  });\n\n  if (kind === 'grid') {\n    if (!axis.grid) {\n      return undefined;\n    }\n\n    // Remove unnecessary encode block\n    if (axis.encode) {\n      // Only need to keep encode block for grid\n      const {grid} = axis.encode;\n      axis.encode = {\n        ...(grid ? {grid} : {})\n      };\n\n      if (keys(axis.encode).length === 0) {\n        delete axis.encode;\n      }\n    }\n\n    return {\n      scale,\n      orient,\n      ...axis,\n      domain: false,\n      labels: false,\n\n      // Always set min/maxExtent to 0 to ensure that `config.axis*.minExtent` and `config.axis*.maxExtent`\n      // would not affect gridAxis\n      maxExtent: 0,\n      minExtent: 0,\n      ticks: false,\n      zindex: zindex !== undefined ? zindex : 0 // put grid behind marks by default\n    };\n  } else { // kind === 'main'\n\n    if (!opt.header && axisCmpt.mainExtracted) {\n      // if mainExtracted has been extracted to a separate facet\n      return undefined;\n    }\n\n    // Remove unnecessary encode block\n    if (axis.encode) {\n      for (const part of AXIS_PARTS) {\n        if (\n          !axisCmpt.hasAxisPart(part)\n        ) {\n          delete axis.encode[part];\n        }\n      }\n      if (keys(axis.encode).length === 0) {\n        delete axis.encode;\n      }\n    }\n\n    const titleString = assembleTitle(title, config);\n\n    return {\n      scale,\n      orient,\n      ...(titleString ? {title: titleString} : {}),\n      ...axis,\n      zindex: zindex !== undefined ? zindex : 1 // put axis line above marks by default\n    };\n  }\n}\n\nexport function assembleAxes(axisComponents: AxisComponentIndex, config: Config): VgAxis[] {\n  const {x=[], y=[]} = axisComponents;\n  return [\n    ...x.map(a => assembleAxis(a, 'main', config)),\n    ...x.map(a => assembleAxis(a, 'grid', config)),\n    ...y.map(a => assembleAxis(a, 'main', config)),\n    ...y.map(a => assembleAxis(a, 'grid', config))\n  ].filter(a => a); // filter undefined\n}\n","/**\n * Utility for generating row / column headers\n */\nimport {FacetFieldDef} from '../../facet';\nimport {vgField} from '../../fielddef';\nimport {keys} from '../../util';\nimport {AxisOrient, VgAxis, VgMarkGroup} from '../../vega.schema';\nimport {formatSignalRef} from '../common';\nimport {Model} from '../model';\n\nexport type HeaderChannel = 'row' | 'column';\nexport const HEADER_CHANNELS: HeaderChannel[] = ['row', 'column'];\n\nexport type HeaderType = 'header' | 'footer';\nexport const HEADER_TYPES: HeaderType[] = ['header', 'footer'];\n\n/**\n * A component that represents all header, footers and title of a Vega group with layout directive.\n */\nexport interface LayoutHeaderComponent {\n  title?: string;\n\n  // TODO: repeat and concat can have multiple header / footer.\n  // Need to redesign this part a bit.\n\n  facetFieldDef?: FacetFieldDef<string>;\n\n  /**\n   * An array of header components for headers.\n   * For facet, there should be only one header component, which is data-driven.\n   * For repeat and concat, there can be multiple header components that explicitly list different axes.\n   */\n  header?: HeaderComponent[];\n\n  /**\n   * An array of header components for footers.\n   * For facet, there should be only one header component, which is data-driven.\n   * For repeat and concat, there can be multiple header components that explicitly list different axes.\n   */\n  footer?: HeaderComponent[];\n}\n\n/**\n * A component that represents one group of row/column-header/footer.\n */\nexport interface HeaderComponent {\n\n  labels: boolean;\n\n  sizeSignal: {signal: string};\n\n  axes: VgAxis[];\n}\n\nexport function getHeaderType(orient: AxisOrient) {\n  if (orient === 'top' || orient === 'left') {\n    return 'header';\n  }\n  return 'footer';\n}\n\nexport function getTitleGroup(model: Model, channel: HeaderChannel) {\n  const title = model.component.layoutHeaders[channel].title;\n  const textOrient = channel === 'row' ? 'vertical' : undefined;\n\n  const update = {\n    align: {value: 'center'},\n    text: {value: title},\n    ...(textOrient === 'vertical' ? {angle: {value: 270}}: {}),\n    // TODO*https://github.com/vega/vega-lite/issues/2446): add title* properties (e.g., titleAlign)\n    // also make sure that guide-title config override these Vega-lite default\n  };\n\n  return {\n    name:  model.getName(`${channel}_title`),\n    role: `${channel}-title`,\n    type: 'group',\n    marks: [{\n      type: 'text',\n      role: `${channel}-title-text`,\n      style: 'guide-title',\n      ...(keys(update).length > 0 ? {encode: {update}} : {})\n    }]\n  };\n}\n\nexport function getHeaderGroups(model: Model, channel: HeaderChannel): VgMarkGroup[] {\n  const layoutHeader = model.component.layoutHeaders[channel];\n  const groups = [];\n  for (const headerType of HEADER_TYPES) {\n    if (layoutHeader[headerType]) {\n      for (const headerCmpt of layoutHeader[headerType]) {\n        groups.push(getHeaderGroup(model, channel, headerType, layoutHeader, headerCmpt));\n      }\n    }\n  }\n  return groups;\n}\n\n// 0, (0,90), 90, (90, 180), 180, (180, 270), 270, (270, 0)\n\nexport function labelAlign(angle: number) {\n  // to keep angle in [0, 360)\n  angle = ((angle % 360) + 360) % 360;\n  if ((angle + 90) % 180 === 0) {  // for 90 and 270\n    return {}; // default center\n  } else if (angle < 90 || 270 < angle) {\n    return {align: {value: 'right'}};\n  } else if (135 <= angle && angle < 225) {\n    return {align: {value: 'left'}};\n  }\n  return {};\n}\n\nexport function labelBaseline(angle: number) {\n  // to keep angle in [0, 360)\n  angle = ((angle % 360) + 360) % 360;\n  if (45 <= angle && angle <= 135) {\n    return {baseline: {value: 'top'}};\n  }\n  return {};\n}\n\nfunction getHeaderGroup(model: Model, channel: HeaderChannel, headerType: HeaderType, layoutHeader: LayoutHeaderComponent, headerCmpt: HeaderComponent) {\n  if (headerCmpt) {\n    let title = null;\n    const {facetFieldDef} = layoutHeader;\n    if (facetFieldDef && headerCmpt.labels) {\n      const {header = {}} = facetFieldDef;\n      const {format, labelAngle} = header;\n\n      const update = {\n        ...(\n          labelAngle !== undefined ? {angle: {value: labelAngle}} : {}\n        ),\n        ...labelAlign(labelAngle),\n        ...labelBaseline(labelAngle)\n\n      };\n\n      title = {\n        text: formatSignalRef(facetFieldDef, format, 'parent', model.config),\n        offset: 10,\n        orient: channel === 'row' ? 'left' : 'top',\n        style: 'guide-label',\n        ...(keys(update).length > 0 ? {encode: {update}} : {})\n      };\n    }\n\n    const axes = headerCmpt.axes;\n\n    const hasAxes = axes && axes.length > 0;\n    if (title || hasAxes) {\n      const sizeChannel = channel === 'row' ? 'height' : 'width';\n\n      return {\n        name: model.getName(`${channel}_${headerType}`),\n        type: 'group',\n        role: `${channel}-${headerType}`,\n        ...(layoutHeader.facetFieldDef ? {\n          from: {data: model.getName(channel + '_domain')},\n          sort: {\n            field: vgField(facetFieldDef, {expr: 'datum'}),\n            order: facetFieldDef.sort || 'ascending'\n          }\n        } : {}),\n        ...(title ? {title} : {}),\n        ...(headerCmpt.sizeSignal ? {\n          encode: {\n            update: {\n              [sizeChannel]: headerCmpt.sizeSignal\n            }\n          }\n        }: {}),\n        ...(hasAxes ? {axes} : {})\n      };\n    }\n  }\n  return null;\n}\n","import {isArray} from 'vega-util';\nimport {Channel, isScaleChannel} from '../channel';\nimport {Config, ViewConfig} from '../config';\nimport {FieldDef, FieldDefBase, FieldRefOption, isScaleFieldDef, isTimeFieldDef, OrderFieldDef, vgField} from '../fielddef';\nimport {MarkConfig, MarkDef, TextConfig} from '../mark';\nimport {ScaleType} from '../scale';\nimport {TimeUnit} from '../timeunit';\nimport {formatExpression} from '../timeunit';\nimport {QUANTITATIVE} from '../type';\nimport {contains, stringify} from '../util';\nimport {VgEncodeEntry, VgMarkConfig, VgSort} from '../vega.schema';\nimport {AxisComponentProps} from './axis/component';\nimport {Explicit} from './split';\nimport {UnitModel} from './unit';\n\n\nexport function applyConfig(e: VgEncodeEntry,\n    config: ViewConfig | MarkConfig | TextConfig, // TODO(#1842): consolidate MarkConfig | TextConfig?\n    propsList: string[]) {\n  for (const property of propsList) {\n    const value = config[property];\n    if (value !== undefined) {\n      e[property] = {value: value};\n    }\n  }\n  return e;\n}\n\nexport function applyMarkConfig(e: VgEncodeEntry, model: UnitModel, propsList: (keyof MarkConfig)[]) {\n  for (const property of propsList) {\n    const value = getMarkConfig(property, model.markDef, model.config);\n    if (value !== undefined) {\n      e[property] = {value: value};\n    }\n  }\n  return e;\n}\n\nexport function getStyles(mark: MarkDef): string[] {\n  return [].concat(mark.type, mark.style || []);\n}\n\n/**\n * Return property value from style or mark specific config property if exists.\n * Otherwise, return general mark specific config.\n */\nexport function getMarkConfig<P extends keyof MarkConfig>(prop: P, mark: MarkDef, config: Config): MarkConfig[P] {\n  // By default, read from mark config first!\n  let value = config.mark[prop];\n\n  // Then read mark specific config, which has higher precedence\n  const markSpecificConfig = config[mark.type];\n  if (markSpecificConfig[prop] !== undefined) {\n    value = markSpecificConfig[prop];\n  }\n\n  // Then read style config, which has even higher precedence.\n  const styles = getStyles(mark);\n  for (const style of styles) {\n    const styleConfig = config.style[style];\n\n    // MarkConfig extends VgMarkConfig so a prop may not be a valid property for style\n    // However here we also check if it is defined, so it is okay to cast here\n    const p = prop as keyof VgMarkConfig;\n    if (styleConfig && styleConfig[p] !== undefined) {\n      value = styleConfig[p];\n    }\n  }\n\n  return value;\n}\n\nexport function formatSignalRef(fieldDef: FieldDef<string>, specifiedFormat: string, expr: 'datum' | 'parent', config: Config) {\n  const format = numberFormat(fieldDef, specifiedFormat, config);\n  if (fieldDef.bin) {\n    const startField = vgField(fieldDef, {expr});\n    const endField = vgField(fieldDef, {expr, binSuffix: 'end'});\n    return {\n      signal: binFormatExpression(startField, endField, format, config)\n    };\n  } else if (fieldDef.type === 'quantitative') {\n    return {\n      signal: `${formatExpr(vgField(fieldDef, {expr, binSuffix: 'range'}), format)}`\n    };\n  } else if (isTimeFieldDef(fieldDef)) {\n    const isUTCScale = isScaleFieldDef(fieldDef) && fieldDef['scale'] && fieldDef['scale'].type === ScaleType.UTC;\n    return {\n      signal: timeFormatExpression(vgField(fieldDef, {expr}), fieldDef.timeUnit, specifiedFormat, config.text.shortTimeLabels, config.timeFormat, isUTCScale)\n    };\n  } else {\n    return {\n      signal: `''+${vgField(fieldDef, {expr})}`\n    };\n  }\n}\n\nexport function getSpecifiedOrDefaultValue<T>(specifiedValue: T, defaultValue: T | {signal: string}) {\n  if (specifiedValue !== undefined) {\n    return specifiedValue;\n  }\n  return defaultValue;\n}\n\n/**\n * Returns number format for a fieldDef\n *\n * @param format explicitly specified format\n */\nexport function numberFormat(fieldDef: FieldDef<string>, specifiedFormat: string, config: Config) {\n  if (fieldDef.type === QUANTITATIVE) {\n    // add number format for quantitative type only\n\n    // Specified format in axis/legend has higher precedence than fieldDef.format\n    if (specifiedFormat) {\n      return specifiedFormat;\n    }\n\n    // TODO: need to make this work correctly for numeric ordinal / nominal type\n    return config.numberFormat;\n  }\n  return undefined;\n}\n\nfunction formatExpr(field: string, format: string) {\n  return `format(${field}, \"${format || ''}\")`;\n}\n\nexport function numberFormatExpr(field: string, specifiedFormat: string, config: Config) {\n  return formatExpr(field, specifiedFormat || config.numberFormat);\n}\n\n\nexport function binFormatExpression(startField: string, endField: string, format: string, config: Config) {\n  return `${startField} === null || isNaN(${startField}) ? \"null\" : ${numberFormatExpr(startField, format, config)} + \" - \" + ${numberFormatExpr(endField, format, config)}`;\n}\n\n\n/**\n * Returns the time expression used for axis/legend labels or text mark for a temporal field\n */\nexport function timeFormatExpression(field: string, timeUnit: TimeUnit, format: string, shortTimeLabels: boolean, timeFormatConfig: string, isUTCScale: boolean): string {\n  if (!timeUnit || format) {\n    // If there is not time unit, or if user explicitly specify format for axis/legend/text.\n    const _format = format || timeFormatConfig; // only use config.timeFormat if there is no timeUnit.\n    if (isUTCScale) {\n      return `utcFormat(${field}, '${_format}')`;\n    } else {\n      return `timeFormat(${field}, '${_format}')`;\n    }\n  } else {\n    return formatExpression(timeUnit, field, shortTimeLabels, isUTCScale);\n  }\n}\n\n/**\n * Return Vega sort parameters (tuple of field and order).\n */\nexport function sortParams(orderDef: OrderFieldDef<string> | OrderFieldDef<string>[], fieldRefOption?: FieldRefOption): VgSort {\n  return (isArray(orderDef) ? orderDef : [orderDef]).reduce((s, orderChannelDef) => {\n    s.field.push(vgField(orderChannelDef, fieldRefOption));\n    s.order.push(orderChannelDef.sort || 'ascending');\n    return s;\n  }, {field:[], order: []});\n}\n\nexport type AxisTitleComponent = AxisComponentProps['title'];\n\nexport function mergeTitleFieldDefs(f1: FieldDefBase<string>[], f2: FieldDefBase<string>[]) {\n  const merged = [...f1];\n\n  f2.forEach((fdToMerge) => {\n    for (const fieldDef1 of merged) {\n      // If already exists, no need to append to merged array\n      if (stringify(fieldDef1) === stringify(fdToMerge)) {\n        return;\n      }\n    }\n    merged.push(fdToMerge);\n  });\n  return merged;\n}\n\nexport function titleMerger(\n  v1: Explicit<AxisTitleComponent>, v2: Explicit<AxisTitleComponent>\n) {\n  if (isArray(v1.value) && isArray(v2.value)) {\n    return {\n      explicit: v1.explicit,\n      value: mergeTitleFieldDefs(v1.value, v2.value)\n    };\n  } else if (!isArray(v1.value) && !isArray(v2.value)) {\n    return {\n      explicit: v1.explicit, // keep the old explicit\n      value: v1.value === v2.value ?\n        v1.value : // if title is the same just use one of them\n        v1.value + ', ' + v2.value // join title with comma if different\n    };\n  }\n  /* istanbul ignore next: Condition should not happen -- only for warning in development. */\n  throw new Error('It should never reach here');\n}\n\n/**\n * Checks whether a fieldDef for a particular channel requires a computed bin range.\n */\nexport function binRequiresRange(fieldDef: FieldDef<string>, channel: Channel) {\n  if (!fieldDef.bin) {\n    console.warn('Only use this method with binned field defs');\n    return false;\n  }\n\n  // We need the range only when the user explicitly forces a binned field to be use discrete scale. In this case, bin range is used in axis and legend labels.\n  // We could check whether the axis or legend exists (not disabled) but that seems overkill.\n  return isScaleChannel(channel) && contains(['ordinal', 'nominal'], fieldDef.type);\n}\n","\nimport {hasDiscreteDomain} from '../../scale';\nimport {isVgRangeStep, VgRangeStep, VgSignal} from '../../vega.schema';\nimport {isFacetModel, Model} from '../model';\nimport {ScaleComponent} from '../scale/component';\n\nexport function assembleLayoutSignals(model: Model): VgSignal[] {\n  return [].concat(\n    sizeSignals(model, 'width'),\n    sizeSignals(model, 'height')\n  );\n}\n\nexport function sizeSignals(model: Model, sizeType: 'width' | 'height'): VgSignal[] {\n  const channel = sizeType === 'width' ? 'x' : 'y';\n  const size = model.component.layoutSize.get(sizeType);\n  if (!size || size === 'merged') {\n    return [];\n  }\n\n  // Read size signal name from name map, just in case it is the top-level size signal that got renamed.\n  const name = model.getSizeSignalRef(sizeType).signal;\n\n  if (size === 'range-step') {\n    const scaleComponent = model.getScaleComponent(channel);\n\n    if (scaleComponent) {\n      const type = scaleComponent.get('type');\n      const range = scaleComponent.get('range');\n\n      if (hasDiscreteDomain(type) && isVgRangeStep(range)) {\n        const scaleName = model.scaleName(channel);\n\n        if (isFacetModel(model.parent)) {\n          // If parent is facet and this is an independent scale, return only signal signal\n          // as the width/height will be calculated using the cardinality from\n          // facet's aggregate rather than reading from scale domain\n          const parentResolve = model.parent.component.resolve;\n          if (parentResolve.scale[channel] === 'independent') {\n            return [stepSignal(scaleName, range)];\n          }\n        }\n\n        return [\n          stepSignal(scaleName, range),\n          {\n            name,\n            update: sizeExpr(scaleName, scaleComponent, `domain('${scaleName}').length`)\n          }\n        ];\n      }\n    }\n    /* istanbul ignore next: Condition should not happen -- only for warning in development. */\n    throw new Error('layout size is range step although there is no rangeStep.');\n  } else {\n    return [{\n      name,\n      value: size\n    }];\n  }\n}\n\nfunction stepSignal(scaleName: string, range: VgRangeStep): VgSignal {\n  return {\n    name: scaleName + '_step',\n    value: range.step,\n  };\n}\n\nexport function sizeExpr(scaleName: string, scaleComponent: ScaleComponent, cardinality: string) {\n  const type = scaleComponent.get('type');\n  const padding = scaleComponent.get('padding');\n  let paddingOuter = scaleComponent.get('paddingOuter');\n  paddingOuter = paddingOuter !== undefined ? paddingOuter : padding;\n\n  let paddingInner = scaleComponent.get('paddingInner');\n  paddingInner = type === 'band' ?\n    // only band has real paddingInner\n    (paddingInner !== undefined ? paddingInner : padding) :\n    // For point, as calculated in https://github.com/vega/vega-scale/blob/master/src/band.js#L128,\n    // it's equivalent to have paddingInner = 1 since there is only n-1 steps between n points.\n    1;\n  return `bandspace(${cardinality}, ${paddingInner}, ${paddingOuter}) * ${scaleName}_step`;\n}\n\n\n","import {flatten, keys, stringify, vals} from '../../util';\nimport {VgLegend} from '../../vega.schema';\nimport {Model} from '../model';\nimport {LegendComponent} from './component';\nimport {mergeLegendComponent} from './parse';\n\nexport function assembleLegends(model: Model): VgLegend[] {\n  const legendComponentIndex = model.component.legends;\n  const legendByDomain: {[domainHash: string]: LegendComponent[]} = {};\n\n  for (const channel of keys(legendComponentIndex)) {\n    const scaleComponent = model.getScaleComponent(channel);\n    const domainHash = stringify(scaleComponent.domains);\n    if (legendByDomain[domainHash]) {\n      for (const mergedLegendComponent of legendByDomain[domainHash]) {\n        const merged = mergeLegendComponent(mergedLegendComponent, legendComponentIndex[channel]);\n        if (!merged) {\n          // If cannot merge, need to add this legend separately\n          legendByDomain[domainHash].push(legendComponentIndex[channel]);\n        }\n      }\n\n    } else {\n      legendByDomain[domainHash] = [legendComponentIndex[channel].clone()];\n    }\n  }\n\n  return flatten(vals(legendByDomain)).map((legendCmpt: LegendComponent) => legendCmpt.combine());\n}\n","import {COLOR, FILL, NonPositionScaleChannel, OPACITY, SHAPE, SIZE, STROKE} from '../../channel';\nimport {isFieldDef, title as fieldDefTitle} from '../../fielddef';\nimport {Legend, LEGEND_PROPERTIES, VG_LEGEND_PROPERTIES} from '../../legend';\nimport {GEOJSON} from '../../type';\nimport {deleteNestedProperty, keys} from '../../util';\nimport {VgLegend, VgLegendEncode} from '../../vega.schema';\nimport {getSpecifiedOrDefaultValue, numberFormat, titleMerger} from '../common';\nimport {isUnitModel, Model} from '../model';\nimport {parseGuideResolve} from '../resolve';\nimport {Explicit, makeImplicit} from '../split';\nimport {defaultTieBreaker, mergeValuesWithExplicit} from '../split';\nimport {UnitModel} from '../unit';\nimport {LegendComponent, LegendComponentIndex} from './component';\nimport * as encode from './encode';\nimport * as properties from './properties';\n\n\nexport function parseLegend(model: Model) {\n  if (isUnitModel(model)) {\n    model.component.legends = parseUnitLegend(model);\n  } else {\n    model.component.legends = parseNonUnitLegend(model);\n  }\n}\n\nfunction parseUnitLegend(model: UnitModel): LegendComponentIndex {\n  const {encoding} = model;\n  return [COLOR, FILL, STROKE, SIZE, SHAPE, OPACITY].reduce(function (legendComponent, channel) {\n    const def = encoding[channel];\n    if (model.legend(channel) && model.getScaleComponent(channel) && !(isFieldDef(def) && (channel === SHAPE && def.type === GEOJSON))) {\n      legendComponent[channel] = parseLegendForChannel(model, channel);\n    }\n    return legendComponent;\n  }, {});\n}\n\nfunction getLegendDefWithScale(model: UnitModel, channel: NonPositionScaleChannel): VgLegend {\n  // For binned field with continuous scale, use a special scale so we can overrride the mark props and labels\n  switch (channel) {\n    case COLOR:\n      const scale = model.scaleName(COLOR);\n      return model.markDef.filled ? {fill: scale} : {stroke: scale};\n    case FILL:\n    case STROKE:\n    case SIZE:\n    case SHAPE:\n    case OPACITY:\n      return {[channel]: model.scaleName(channel)};\n  }\n}\n\nexport function parseLegendForChannel(model: UnitModel, channel: NonPositionScaleChannel): LegendComponent {\n  const fieldDef = model.fieldDef(channel);\n  const legend = model.legend(channel);\n\n  const legendCmpt = new LegendComponent({}, getLegendDefWithScale(model, channel));\n\n  LEGEND_PROPERTIES.forEach(function(property) {\n    const value = getProperty(property, legend, channel, model);\n    if (value !== undefined) {\n      const explicit = property === 'values' ?\n        !!legend.values :  // specified legend.values is already respected, but may get transformed.\n        value === legend[property];\n      if (explicit || model.config.legend[property] === undefined) {\n        legendCmpt.set(property, value, explicit);\n      }\n    }\n  });\n\n  // 2) Add mark property definition groups\n  const legendEncoding = legend.encoding || {};\n  const legendEncode = ['labels', 'legend', 'title', 'symbols', 'gradient'].reduce((e: VgLegendEncode, part) => {\n    const value = encode[part] ?\n      // TODO: replace legendCmpt with type is sufficient\n      encode[part](fieldDef, legendEncoding[part], model, channel, legendCmpt.get('type')) : // apply rule\n      legendEncoding[part]; // no rule -- just default values\n    if (value !== undefined && keys(value).length > 0) {\n      e[part] = {update: value};\n    }\n    return e;\n  }, {} as VgLegendEncode);\n\n  if (keys(legendEncode).length > 0) {\n    legendCmpt.set('encode', legendEncode, !!legend.encoding);\n  }\n\n  return legendCmpt;\n}\n\nfunction getProperty(property: keyof (Legend | VgLegend), specifiedLegend: Legend, channel: NonPositionScaleChannel, model: UnitModel) {\n  const fieldDef = model.fieldDef(channel);\n\n  switch (property) {\n    case 'format':\n      // We don't include temporal field here as we apply format in encode block\n      return numberFormat(fieldDef, specifiedLegend.format, model.config);\n    case 'title':\n      // For falsy value, keep undefined so we use default,\n      // but use null for '', null, and false to hide the title\n      const specifiedTitle = fieldDef.title !== undefined ? fieldDef.title :\n        specifiedLegend.title || (specifiedLegend.title === undefined ? undefined : null);\n\n      return getSpecifiedOrDefaultValue(\n        specifiedTitle,\n        fieldDefTitle(fieldDef, model.config)\n      ) || undefined; // make falsy value undefined so output Vega spec is shorter\n    case 'values':\n      return properties.values(specifiedLegend);\n    case 'type':\n      return getSpecifiedOrDefaultValue(specifiedLegend.type, properties.type(fieldDef.type, channel, model.getScaleComponent(channel).get('type')));\n  }\n\n  // Otherwise, return specified property.\n  return specifiedLegend[property];\n}\n\nfunction parseNonUnitLegend(model: Model) {\n  const {legends, resolve} = model.component;\n\n  for (const child of model.children) {\n    parseLegend(child);\n\n    keys(child.component.legends).forEach((channel: NonPositionScaleChannel) => {\n      resolve.legend[channel] = parseGuideResolve(model.component.resolve, channel);\n\n      if (resolve.legend[channel] === 'shared') {\n        // If the resolve says shared (and has not been overridden)\n        // We will try to merge and see if there is a conflict\n\n        legends[channel] = mergeLegendComponent(legends[channel], child.component.legends[channel]);\n\n        if (!legends[channel]) {\n          // If merge returns nothing, there is a conflict so we cannot make the legend shared.\n          // Thus, mark legend as independent and remove the legend component.\n          resolve.legend[channel] = 'independent';\n          delete legends[channel];\n        }\n      }\n    });\n  }\n\n  keys(legends).forEach((channel: NonPositionScaleChannel) => {\n    for (const child of model.children) {\n      if (!child.component.legends[channel]) {\n        // skip if the child does not have a particular legend\n        continue;\n      }\n\n      if (resolve.legend[channel] === 'shared') {\n        // After merging shared legend, make sure to remove legend from child\n        delete child.component.legends[channel];\n      }\n    }\n  });\n  return legends;\n}\n\nexport function mergeLegendComponent(mergedLegend: LegendComponent, childLegend: LegendComponent): LegendComponent {\n  if (!mergedLegend) {\n    return childLegend.clone();\n  }\n  const mergedOrient = mergedLegend.getWithExplicit('orient');\n  const childOrient = childLegend.getWithExplicit('orient');\n\n\n  if (mergedOrient.explicit && childOrient.explicit && mergedOrient.value !== childOrient.value) {\n    // TODO: throw warning if resolve is explicit (We don't have info about explicit/implicit resolve yet.)\n    // Cannot merge due to inconsistent orient\n    return undefined;\n  }\n  let typeMerged = false;\n  // Otherwise, let's merge\n  for (const prop of VG_LEGEND_PROPERTIES) {\n    const mergedValueWithExplicit = mergeValuesWithExplicit<VgLegend, any>(\n      mergedLegend.getWithExplicit(prop),\n      childLegend.getWithExplicit(prop),\n      prop, 'legend',\n\n      // Tie breaker function\n      (v1: Explicit<any>, v2: Explicit<any>): any => {\n        switch (prop) {\n          case 'title':\n            return titleMerger(v1, v2);\n          case 'type':\n            // There are only two types. If we have different types, then prefer symbol over gradient.\n            typeMerged = true;\n            return makeImplicit('symbol');\n        }\n        return defaultTieBreaker<VgLegend, any>(v1, v2, prop, 'legend');\n      }\n    );\n    mergedLegend.setWithExplicit(prop, mergedValueWithExplicit);\n  }\n  if (typeMerged) {\n    if(((mergedLegend.implicit || {}).encode || {}).gradient) {\n      deleteNestedProperty(mergedLegend.implicit, ['encode', 'gradient']);\n    }\n    if (((mergedLegend.explicit || {}).encode || {}).gradient) {\n      deleteNestedProperty(mergedLegend.explicit, ['encode', 'gradient']);\n    }\n  }\n\n\n  return mergedLegend;\n}\n\n","import {POSITION_SCALE_CHANNELS, ScaleChannel} from '../channel';\nimport * as log from '../log';\nimport {Resolve, ResolveMode} from '../resolve';\nimport {contains} from '../util';\nimport {isConcatModel, isFacetModel, isLayerModel, isRepeatModel, Model} from './model';\n\nexport function defaultScaleResolve(channel: ScaleChannel, model: Model): ResolveMode {\n  if (isLayerModel(model) || isFacetModel(model)) {\n    return 'shared';\n  } else if (isConcatModel(model) || isRepeatModel(model)) {\n    return contains(POSITION_SCALE_CHANNELS, channel) ? 'independent' : 'shared';\n  }\n  /* istanbul ignore next: should never reach here. */\n  throw new Error('invalid model type for resolve');\n}\n\nexport function parseGuideResolve(resolve: Resolve, channel: ScaleChannel): ResolveMode {\n  const channelScaleResolve = resolve.scale[channel];\n  const guide = contains(POSITION_SCALE_CHANNELS, channel) ? 'axis' : 'legend';\n\n  if (channelScaleResolve === 'independent') {\n    if (resolve[guide][channel] === 'shared') {\n      log.warn(log.message.independentScaleMeansIndependentGuide(channel));\n    }\n    return 'independent';\n  }\n\n  return resolve[guide][channel] || 'shared';\n}\n","import * as log from '../log';\nimport {duplicate, stringify} from '../util';\n\n\n/**\n * Generic class for storing properties that are explicitly specified\n * and implicitly determined by the compiler.\n * This is important for scale/axis/legend merging as\n * we want to prioritize properties that users explicitly specified.\n */\nexport class Split<T extends object> {\n  constructor(\n    public readonly explicit: Partial<T> = {},\n    public readonly implicit: Partial<T> = {}\n  ) {}\n\n  public clone() {\n    return new Split(duplicate(this.explicit), duplicate(this.implicit));\n  }\n\n  public combine(): Partial<T> {\n    // FIXME remove \"as any\".\n    // Add \"as any\" to avoid an error \"Spread types may only be created from object types\".\n    return {\n      ...this.explicit as any, // Explicit properties comes first\n      ...this.implicit as any\n    };\n  }\n\n  public get<K extends keyof T>(key: K): T[K] {\n    // Explicit has higher precedence\n    return this.explicit[key] !== undefined ? this.explicit[key] : this.implicit[key];\n  }\n\n  public getWithExplicit<K extends keyof T>(key: K): Explicit<T[K]> {\n    // Explicit has higher precedence\n    if (this.explicit[key] !== undefined) {\n      return {explicit: true, value: this.explicit[key]};\n    } else if (this.implicit[key] !== undefined) {\n      return {explicit: false, value: this.implicit[key]};\n    }\n    return {explicit: false, value: undefined};\n  }\n\n  public setWithExplicit<K extends keyof T>(key: K, value: Explicit<T[K]>) {\n    if (value.value !== undefined) {\n      this.set(key, value.value, value.explicit);\n    }\n  }\n\n  public set<K extends keyof T>(key: K, value: T[K], explicit: boolean) {\n    delete this[explicit ? 'implicit' : 'explicit'][key];\n    this[explicit ? 'explicit' : 'implicit'][key] = value;\n    return this;\n  }\n\n  public copyKeyFromSplit<S extends T>(key: keyof T, s: Split<S>) {\n    // Explicit has higher precedence\n    if (s.explicit[key] !== undefined) {\n      this.set(key, s.explicit[key], true);\n    } else if (s.implicit[key] !== undefined) {\n      this.set(key, s.implicit[key], false);\n    }\n  }\n  public copyKeyFromObject<S extends Partial<T>>(key: keyof T, s: S) {\n    // Explicit has higher precedence\n    if (s[key] !== undefined) {\n      this.set(key, s[key], true);\n    }\n  }\n}\n\nexport interface Explicit<T> {\n  explicit: boolean;\n  value: T;\n}\n\n\nexport function makeExplicit<T>(value: T): Explicit<T> {\n  return {\n    explicit: true,\n    value\n  };\n}\n\nexport function makeImplicit<T>(value: T): Explicit<T> {\n  return {\n    explicit: false,\n    value\n  };\n}\n\nexport function tieBreakByComparing<S, T>(compare: (v1: T, v2: T) => number) {\n  return (v1: Explicit<T>, v2: Explicit<T>, property: keyof S | never, propertyOf: string): Explicit<T> => {\n    const diff = compare(v1.value, v2.value);\n    if (diff > 0) {\n      return v1;\n    } else if (diff < 0) {\n      return v2;\n    }\n    return defaultTieBreaker<S, T>(v1, v2, property, propertyOf);\n  };\n}\n\nexport function defaultTieBreaker<S, T>(v1: Explicit<T>, v2: Explicit<T>, property: keyof S, propertyOf: string) {\n  if (v1.explicit && v2.explicit) {\n    log.warn(log.message.mergeConflictingProperty(property, propertyOf, v1.value, v2.value));\n  }\n  // If equal score, prefer v1.\n  return v1;\n}\n\nexport function mergeValuesWithExplicit<S, T>(\n    v1: Explicit<T>, v2: Explicit<T>,\n    property: keyof S,\n    propertyOf: 'scale' | 'axis' | 'legend' | '',\n    tieBreaker: (v1: Explicit<T>, v2: Explicit<T>, property: keyof S, propertyOf: string) => Explicit<T> = defaultTieBreaker\n  ) {\n  if (v1 === undefined || v1.value === undefined) {\n    // For first run\n    return v2;\n  }\n\n  if (v1.explicit && !v2.explicit) {\n    return v1;\n  } else if (v2.explicit && !v1.explicit) {\n    return v2;\n  } else if (stringify(v1.value) === stringify(v2.value)) {\n    return v1;\n  } else {\n    return tieBreaker(v1, v2, property, propertyOf);\n  }\n}\n","import {Legend} from '../..//legend';\nimport {NonPositionScaleChannel} from '../../channel';\nimport {VgLegend} from '../../vega.schema';\nimport {Split} from '../split';\n\n\nexport class LegendComponent extends Split<VgLegend> {}\n\n// Using Mapped Type to declare type (https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types)\nexport type LegendComponentIndex = {[P in NonPositionScaleChannel]?: LegendComponent};\n\nexport type LegendIndex = {[P in NonPositionScaleChannel]?: Legend};\n","import {isArray} from 'vega-util';\n\nimport {Channel, COLOR, NonPositionScaleChannel, OPACITY, SHAPE} from '../../channel';\nimport {\n  Conditional,\n  FieldDef,\n  FieldDefWithCondition,\n  hasConditionalValueDef,\n  isTimeFieldDef,\n  isValueDef,\n  MarkPropFieldDef,\n  ValueDef,\n  ValueDefWithCondition,\n} from '../../fielddef';\nimport {AREA, BAR, CIRCLE, FILL_STROKE_CONFIG, GEOSHAPE, LINE, POINT, SQUARE, TEXT, TICK} from '../../mark';\nimport {ScaleType} from '../../scale';\nimport {keys} from '../../util';\nimport {LegendType, VgEncodeEntry} from '../../vega.schema';\nimport {applyMarkConfig, timeFormatExpression} from '../common';\nimport * as mixins from '../mark/mixins';\nimport {UnitModel} from '../unit';\n\nexport function symbols(fieldDef: FieldDef<string>, symbolsSpec: any, model: UnitModel, channel: Channel, type: LegendType): VgEncodeEntry {\n  if (type === 'gradient') {\n    return undefined;\n  }\n\n  let out = {\n    ...applyMarkConfig({}, model, FILL_STROKE_CONFIG),\n    ...mixins.color(model)\n  };\n\n  switch (model.mark) {\n    case BAR:\n    case TICK:\n    case TEXT:\n      out.shape = {value: 'square'};\n      break;\n    case CIRCLE:\n    case SQUARE:\n      out.shape = {value: model.mark};\n      break;\n    case POINT:\n    case LINE:\n    case GEOSHAPE:\n    case AREA:\n      // use default circle\n      break;\n  }\n\n  const {markDef, encoding} = model;\n  const filled = markDef.filled;\n\n  if (out.fill) {\n    // for fill legend, we don't want any fill in symbol\n    if (channel === 'fill' || (filled && channel === COLOR)) {\n      delete out.fill;\n    } else {\n      if (out.fill['field']) {\n        // For others, remove fill field\n        delete out.fill;\n      } else if (isArray(out.fill)) {\n        const fill = getFirstConditionValue(encoding.fill || encoding.color) || markDef.fill || (filled && markDef.color);\n        if (fill) {\n          out.fill = {value: fill};\n        }\n      }\n    }\n  }\n\n  if (out.stroke) {\n    if (channel === 'stroke' || (!filled && channel === COLOR)) {\n      delete out.stroke;\n    } else {\n      if (out.stroke['field']) {\n        // For others, remove stroke field\n        delete out.stroke;\n      } else if (isArray(out.stroke)) {\n        const stroke = getFirstConditionValue(encoding.stroke || encoding.color) || markDef.stroke || (!filled && markDef.color);\n        if (stroke) {\n          out.stroke = {value: stroke};\n        }\n      }\n    }\n  }\n\n  if (out.fill && out.fill['value'] !== 'transparent' && !out.stroke) {\n    // for non color channel's legend, we need to override symbol stroke config from Vega config\n    out.stroke = {value: 'transparent'};\n  }\n\n  if (channel !== SHAPE) {\n    const shape = getFirstConditionValue(encoding.shape) || markDef.shape;\n    if (shape) {\n      out.shape = {value: shape};\n    }\n  }\n\n  if (channel !== OPACITY) {\n    const opacity = getMaxValue(encoding.opacity) || markDef.opacity;\n    if (opacity) { // only apply opacity if it is neither zero or undefined\n      out.opacity = {value: opacity};\n    }\n  }\n\n  out = {...out, ...symbolsSpec};\n\n  return keys(out).length > 0 ? out : undefined;\n}\n\nexport function gradient(fieldDef: FieldDef<string>, gradientSpec: any, model: UnitModel, channel: Channel, type: LegendType) {\n  let out: any = {};\n\n  if (type === 'gradient') {\n    const opacity = getMaxValue(model.encoding.opacity) || model.markDef.opacity;\n    if (opacity) { // only apply opacity if it is neither zero or undefined\n      out.opacity = {value: opacity};\n    }\n  }\n\n  out = {...out, ...gradientSpec};\n  return keys(out).length > 0 ? out : undefined;\n}\n\nexport function labels(fieldDef: FieldDef<string>, labelsSpec: any, model: UnitModel, channel: NonPositionScaleChannel, type: LegendType) {\n  const legend = model.legend(channel);\n  const config = model.config;\n\n  let out: any = {};\n\n  if (isTimeFieldDef(fieldDef)) {\n    const isUTCScale = model.getScaleComponent(channel).get('type') === ScaleType.UTC;\n    labelsSpec = {\n      text: {\n        signal: timeFormatExpression('datum.value', fieldDef.timeUnit, legend.format, config.legend.shortTimeLabels, config.timeFormat, isUTCScale)\n      },\n      ...labelsSpec,\n    };\n  }\n\n  out = {...out, ...labelsSpec};\n\n  return keys(out).length > 0 ? out : undefined;\n}\n\nfunction getMaxValue(channelDef: FieldDefWithCondition<MarkPropFieldDef<string>> | ValueDefWithCondition<MarkPropFieldDef<string>>) {\n  return getConditionValue(channelDef,\n    (v: number, conditionalDef) => Math.max(v, conditionalDef.value as any)\n  );\n}\n\nfunction getFirstConditionValue(channelDef: FieldDefWithCondition<MarkPropFieldDef<string>> | ValueDefWithCondition<MarkPropFieldDef<string>>) {\n  return getConditionValue(channelDef,\n    (v: number, conditionalDef) => v !== undefined ? v : conditionalDef.value\n  );\n}\n\nfunction getConditionValue<T>(\n  channelDef: FieldDefWithCondition<MarkPropFieldDef<string>> | ValueDefWithCondition<MarkPropFieldDef<string>>,\n  reducer: (val: T, conditionalDef: Conditional<ValueDef>) => T\n): T {\n\n  if (hasConditionalValueDef(channelDef)) {\n    return (isArray(channelDef.condition) ? channelDef.condition : [channelDef.condition])\n      .reduce(reducer, channelDef.value as any);\n  } else if (isValueDef(channelDef)) {\n    return channelDef.value as any;\n  }\n  return undefined;\n}\n","import {isArray} from 'vega-util';\n\nimport {NONPOSITION_SCALE_CHANNELS, PositionScaleChannel} from '../../channel';\nimport {\n  ChannelDef,\n  FieldDef,\n  FieldDefWithCondition,\n  getFieldDef,\n  isConditionalSelection,\n  isValueDef,\n  TextFieldDef,\n  ValueDefWithCondition,\n  vgField,\n} from '../../fielddef';\nimport * as log from '../../log';\nimport {MarkDef} from '../../mark';\nimport {expression} from '../../predicate';\nimport {hasContinuousDomain} from '../../scale';\nimport {contains} from '../../util';\nimport {VG_MARK_CONFIGS, VgEncodeEntry, VgValueRef} from '../../vega.schema';\nimport {getMarkConfig} from '../common';\nimport {selectionPredicate} from '../selection/selection';\nimport {UnitModel} from '../unit';\nimport * as ref from './valueref';\n\nexport function color(model: UnitModel, opt: {valueOnly: boolean} = {valueOnly: false}): VgEncodeEntry {\n  const {markDef, encoding, config} = model;\n  const {filled, type: markType} = markDef;\n\n  const configValue = {\n    fill: getMarkConfig('fill', markDef, config),\n    stroke: getMarkConfig('stroke', markDef, config),\n    color: getMarkConfig('color', markDef, config)\n  };\n\n  const transparentIfNeeded = contains(['bar', 'point', 'circle', 'square', 'geoshape'], markType) ? 'transparent' : undefined;\n\n  const defaultValue = {\n    fill: markDef.fill || configValue.fill ||\n    // If there is no fill, always fill symbols, bar, geoshape\n    // with transparent fills https://github.com/vega/vega-lite/issues/1316\n      transparentIfNeeded,\n    stroke: markDef.stroke || configValue.stroke\n  };\n\n  const colorVgChannel = filled ? 'fill' : 'stroke';\n\n  const fillStrokeMarkDefAndConfig: VgEncodeEntry = {\n    ...(defaultValue.fill ? {\n      fill: {value: defaultValue.fill}\n    } : {}),\n    ...(defaultValue.stroke ? {\n      stroke: {value: defaultValue.stroke}\n    } : {}),\n  };\n\n  if (encoding.fill || encoding.stroke) {\n    // ignore encoding.color, markDef.color, config.color\n    if (markDef.color) {\n      // warn for markDef.color  (no need to warn encoding.color as it will be dropped in normalized already)\n      log.warn(log.message.droppingColor('property', {fill: 'fill' in encoding, stroke: 'stroke' in encoding}));\n    }\n\n    return {\n      ...nonPosition('fill', model, {defaultValue: defaultValue.fill || transparentIfNeeded}),\n      ...nonPosition('stroke', model, {defaultValue: defaultValue.stroke})\n    };\n  } else if (encoding.color) {\n\n    return {\n      ...fillStrokeMarkDefAndConfig,\n      // override them with encoded color field\n      ...nonPosition('color', model, {\n        vgChannel: colorVgChannel,\n        // apply default fill/stroke first, then color config, then transparent if needed.\n        defaultValue: markDef[colorVgChannel] || markDef.color || configValue[colorVgChannel] || configValue.color || (filled ? transparentIfNeeded : undefined)\n      })\n    };\n  } else if (markDef.fill || markDef.stroke) {\n    // Ignore markDef.color, config.color\n    if (markDef.color) {\n      log.warn(log.message.droppingColor('property', {fill: 'fill' in markDef, stroke: 'stroke' in markDef}));\n    }\n    return fillStrokeMarkDefAndConfig;\n  } else if (markDef.color) {\n    return {\n      ...fillStrokeMarkDefAndConfig, // in this case, fillStrokeMarkDefAndConfig only include config\n\n      // override config with markDef.color\n      [colorVgChannel]: {value: markDef.color}\n    };\n  } else if (configValue.fill || configValue.stroke) {\n    // ignore config.color\n    return fillStrokeMarkDefAndConfig;\n  } else if (configValue.color) {\n    return {\n      ...(transparentIfNeeded ? {fill: {value: 'transparent'}} : {}),\n      [colorVgChannel]: {value: configValue.color}\n    };\n  }\n  return {};\n}\n\nexport type Ignore = Record<'size' | 'orient', 'ignore' | 'include'>;\n\nexport function baseEncodeEntry(model: UnitModel, ignore: Ignore) {\n  return {\n    ...markDefProperties(model.markDef, ignore),\n    ...color(model),\n    ...nonPosition('opacity', model),\n    ...tooltip(model),\n    ...text(model, 'href')\n  };\n}\n\nfunction markDefProperties(mark: MarkDef, ignore: Ignore) {\n  return VG_MARK_CONFIGS.reduce((m, prop) => {\n    if (mark[prop] !== undefined && ignore[prop] !== 'ignore') {\n      m[prop] = {value: mark[prop]};\n    }\n    return m;\n  }, {});\n}\n\nexport function valueIfDefined(prop: string, value: string | number | boolean): VgEncodeEntry {\n  if (value !== undefined) {\n    return {[prop]: {value: value}};\n  }\n  return undefined;\n}\n\nfunction validPredicate(vgRef: string) {\n  return `${vgRef} !== null && !isNaN(${vgRef})`;\n}\n\nexport function defined(model: UnitModel): VgEncodeEntry {\n  if (model.config.invalidValues === 'filter') {\n    const fields = ['x', 'y'].map((channel: PositionScaleChannel) => {\n        const scaleComponent = model.getScaleComponent(channel);\n        if (scaleComponent) {\n          const scaleType = scaleComponent.get('type');\n\n          // Discrete domain scales can handle invalid values, but continuous scales can't.\n          if (hasContinuousDomain(scaleType)) {\n            return model.vgField(channel, {expr: 'datum'});\n          }\n        }\n        return undefined;\n      })\n      .filter(field => !!field)\n      .map(validPredicate);\n\n    if (fields.length > 0) {\n      return {\n        defined: {signal: fields.join(' && ')}\n      };\n    }\n  }\n\n  return {};\n}\n\n/**\n * Return mixins for non-positional channels with scales.  (Text doesn't have scale.)\n */\nexport function nonPosition(channel: typeof NONPOSITION_SCALE_CHANNELS[0], model: UnitModel, opt: {defaultValue?: number | string | boolean, vgChannel?: string, defaultRef?: VgValueRef} = {}): VgEncodeEntry {\n  const {defaultValue, vgChannel} = opt;\n  const defaultRef = opt.defaultRef || (defaultValue !== undefined ? {value: defaultValue} : undefined);\n\n  const channelDef = model.encoding[channel];\n\n  return wrapCondition(model, channelDef, vgChannel || channel, (cDef) => {\n    return ref.midPoint(\n      channel, cDef, model.scaleName(channel),\n      model.getScaleComponent(channel),\n      null, // No need to provide stack for non-position as it does not affect mid point\n      defaultRef\n    );\n  });\n}\n\n/**\n * Return a mixin that include a Vega production rule for a Vega-Lite conditional channel definition.\n * or a simple mixin if channel def has no condition.\n */\nfunction wrapCondition(\n    model: UnitModel, channelDef: ChannelDef<string>, vgChannel: string,\n    refFn: (cDef: ChannelDef<string>) => VgValueRef\n  ): VgEncodeEntry {\n  const condition = channelDef && channelDef.condition;\n  const valueRef = refFn(channelDef);\n  if (condition) {\n    const conditions = isArray(condition) ? condition : [condition];\n    const vgConditions = conditions.map((c) => {\n      const conditionValueRef = refFn(c);\n      const test = isConditionalSelection(c) ? selectionPredicate(model, c.selection) : expression(model, c.test);\n      return {\n        test,\n        ...conditionValueRef\n      };\n    });\n    return {\n      [vgChannel]: [\n        ...vgConditions,\n        ...(valueRef !== undefined ? [valueRef] : [])\n      ]\n    };\n  } else {\n    return valueRef !== undefined ? {[vgChannel]: valueRef} : {};\n  }\n}\n\nexport function tooltip(model: UnitModel) {\n  const channel = 'tooltip';\n  const channelDef = model.encoding[channel];\n  if (isArray(channelDef)) {\n    const keyValues = channelDef.map((fieldDef) => {\n      const key = fieldDef.title !== undefined ? fieldDef.title : vgField(fieldDef, {binSuffix: 'range'});\n      const value = ref.text(fieldDef, model.config).signal;\n      return `\"${key}\": ${value}`;\n    });\n    return {tooltip: {signal: `{${keyValues.join(', ')}}`}};\n  } else {\n    // if not an array, behave just like text\n    return textCommon(model, channel, channelDef);\n  }\n}\n\nexport function text(model: UnitModel, channel: 'text' | 'href' = 'text') {\n  const channelDef = model.encoding[channel];\n  return textCommon(model, channel, channelDef);\n}\n\nfunction textCommon(model: UnitModel, channel: 'text' | 'href' | 'tooltip', channelDef: FieldDefWithCondition<TextFieldDef<string>> | ValueDefWithCondition<TextFieldDef<string>>) {\n  return wrapCondition(model, channelDef, channel, (cDef) => ref.text(cDef, model.config));\n}\n\nexport function bandPosition(fieldDef: FieldDef<string>, channel: 'x'|'y', model: UnitModel) {\n  const scaleName = model.scaleName(channel);\n  const sizeChannel = channel === 'x' ? 'width' : 'height';\n\n  if (model.encoding.size || model.markDef.size !== undefined) {\n    const orient = model.markDef.orient;\n    if (orient) {\n      const centeredBandPositionMixins = {\n        // Use xc/yc and place the mark at the middle of the band\n        // This way we never have to deal with size's condition for x/y position.\n        [channel+'c']: ref.fieldRef(fieldDef, scaleName, {}, {band: 0.5})\n      };\n\n      if (getFieldDef(model.encoding.size)) {\n        log.warn(log.message.cannotUseSizeFieldWithBandSize(channel));\n        // TODO: apply size to band and set scale range to some values between 0-1.\n        // return {\n        //   ...centeredBandPositionMixins,\n        //   ...bandSize('size', model, {vgChannel: sizeChannel})\n        // };\n      } else if (isValueDef(model.encoding.size)) {\n        return {\n          ...centeredBandPositionMixins,\n          ...nonPosition('size', model, {vgChannel: sizeChannel})\n        };\n      } else if (model.markDef.size !== undefined) {\n        return {\n          ...centeredBandPositionMixins,\n          [sizeChannel]: {value: model.markDef.size}\n        };\n      }\n    } else {\n      log.warn(log.message.cannotApplySizeToNonOrientedMark(model.markDef.type));\n    }\n  }\n  return {\n    [channel]: ref.fieldRef(fieldDef, scaleName, {binSuffix: 'range'}),\n    [sizeChannel]: ref.bandRef(scaleName)\n  };\n}\n\nexport function centeredBandPosition(channel: 'x' | 'y', model: UnitModel, defaultPosRef: VgValueRef, defaultSizeRef: VgValueRef) {\n  const centerChannel: 'xc' | 'yc' = channel === 'x' ? 'xc' : 'yc';\n  const sizeChannel = channel === 'x' ? 'width' : 'height';\n  return {\n    ...pointPosition(channel, model, defaultPosRef, centerChannel),\n    ...nonPosition('size', model, {defaultRef: defaultSizeRef, vgChannel: sizeChannel})\n  };\n}\n\nexport function binnedPosition(fieldDef: FieldDef<string>, channel: 'x'|'y', scaleName: string, spacing: number, reverse: boolean) {\n  if (channel === 'x') {\n    return {\n      x2: ref.bin(fieldDef, scaleName, 'start', reverse ? 0 : spacing),\n      x: ref.bin(fieldDef, scaleName, 'end', reverse ? spacing : 0)\n    };\n  } else {\n    return {\n      y2: ref.bin(fieldDef, scaleName, 'start', reverse ? spacing : 0),\n      y: ref.bin(fieldDef, scaleName, 'end', reverse ? 0 : spacing)\n    };\n  }\n}\n\n/**\n * Return mixins for point (non-band) position channels.\n */\nexport function pointPosition(channel: 'x'|'y', model: UnitModel, defaultRef: VgValueRef | 'zeroOrMin' | 'zeroOrMax', vgChannel?: 'x'|'y'|'xc'|'yc') {\n  // TODO: refactor how refer to scale as discussed in https://github.com/vega/vega-lite/pull/1613\n\n  const {encoding, mark, stack} = model;\n\n  const channelDef = encoding[channel];\n  const scaleName = model.scaleName(channel);\n  const scale = model.getScaleComponent(channel);\n\n  const valueRef = !channelDef && (encoding.latitude || encoding.longitude) ?\n    // use geopoint output if there are lat/long and there is no point position overriding lat/long.\n    {field: model.getName(channel)} :\n    ref.stackable(channel, encoding[channel], scaleName, scale, stack,\n      ref.getDefaultRef(defaultRef, channel, scaleName, scale, mark)\n    );\n\n  return {\n    [vgChannel || channel]: valueRef\n  };\n}\n\n/**\n * Return mixins for x2, y2.\n * If channel is not specified, return one channel based on orientation.\n */\nexport function pointPosition2(model: UnitModel, defaultRef: 'zeroOrMin' | 'zeroOrMax', channel?: 'x2' | 'y2') {\n  const {encoding, mark, markDef, stack} = model;\n  channel = channel || (markDef.orient === 'horizontal' ? 'x2' : 'y2');\n\n  const baseChannel = channel === 'x2' ? 'x' : 'y';\n  const channelDef = encoding[baseChannel];\n  const scaleName = model.scaleName(baseChannel);\n  const scale = model.getScaleComponent(baseChannel);\n\n  const valueRef = !channelDef && (encoding.latitude || encoding.longitude) ?\n    // use geopoint output if there are lat2/long2 and there is no point position2 overriding lat2/long2.\n    {field: model.getName(channel)}:\n    ref.stackable2(channel, channelDef, encoding[channel], scaleName, scale, stack,\n      ref.getDefaultRef(defaultRef, baseChannel, scaleName, scale, mark)\n    );\n\n  return {[channel]: valueRef};\n}\n","/**\n * Utility files for producing Vega ValueRef for marks\n */\nimport {isArray, isString} from 'vega-util';\n\nimport {Channel, X, Y} from '../../channel';\nimport {Config} from '../../config';\nimport {\n  ChannelDef,\n  ChannelDefWithCondition,\n  FieldDef,\n  FieldRefOption,\n  isFieldDef,\n  isValueDef,\n  TextFieldDef,\n  vgField,\n} from '../../fielddef';\nimport * as log from '../../log';\nimport {Mark} from '../../mark';\nimport {hasDiscreteDomain, ScaleType} from '../../scale';\nimport {StackProperties} from '../../stack';\nimport {QUANTITATIVE} from '../../type';\nimport {contains, some} from '../../util';\nimport {VgSignalRef, VgValueRef} from '../../vega.schema';\nimport {binRequiresRange, formatSignalRef} from '../common';\nimport {ScaleComponent} from '../scale/component';\n\n\n// TODO: we need to find a way to refactor these so that scaleName is a part of scale\n// but that's complicated.  For now, this is a huge step moving forward.\n\n/**\n * @return Vega ValueRef for stackable x or y\n */\nexport function stackable(channel: 'x' | 'y', channelDef: ChannelDef<string>, scaleName: string, scale: ScaleComponent,\n    stack: StackProperties, defaultRef: VgValueRef): VgValueRef {\n  if (isFieldDef(channelDef) && stack && channel === stack.fieldChannel) {\n    // x or y use stack_end so that stacked line's point mark use stack_end too.\n    return fieldRef(channelDef, scaleName, {suffix: 'end'});\n  }\n  return midPoint(channel, channelDef, scaleName, scale, stack, defaultRef);\n}\n\n/**\n * @return Vega ValueRef for stackable x2 or y2\n */\nexport function stackable2(channel: 'x2' | 'y2', aFieldDef: ChannelDef<string>, a2fieldDef: ChannelDef<string>, scaleName: string, scale: ScaleComponent,\n    stack: StackProperties, defaultRef: VgValueRef): VgValueRef {\n  if (isFieldDef(aFieldDef) && stack &&\n      // If fieldChannel is X and channel is X2 (or Y and Y2)\n      channel.charAt(0) === stack.fieldChannel.charAt(0)\n      ) {\n    return fieldRef(aFieldDef, scaleName, {suffix: 'start'});\n  }\n  return midPoint(channel, a2fieldDef, scaleName, scale, stack, defaultRef);\n}\n\n/**\n * Value Ref for binned fields\n */\nexport function bin(fieldDef: FieldDef<string>, scaleName: string, side: 'start' | 'end', offset?: number) {\n  const binSuffix = side === 'start' ? undefined : 'end';\n  return fieldRef(fieldDef, scaleName, {binSuffix}, offset ? {offset} : {});\n}\n\nexport function fieldRef(\n    fieldDef: FieldDef<string>, scaleName: string, opt: FieldRefOption,\n    mixins?: {offset?: number | VgValueRef, band?: number|boolean}\n  ): VgValueRef {\n\n  const ref: VgValueRef = {\n    ...(scaleName ? {scale: scaleName} : {}),\n    field: vgField(fieldDef, opt),\n  };\n\n  if (mixins) {\n    return {\n      ...ref,\n      ...mixins\n    };\n  }\n  return ref;\n}\n\nexport function bandRef(scaleName: string, band: number|boolean = true): VgValueRef {\n  return {\n    scale: scaleName,\n    band: band\n  };\n}\n\n/**\n * Signal that returns the middle of a bin. Should only be used with x and y.\n */\nfunction binMidSignal(fieldDef: FieldDef<string>, scaleName: string) {\n  return {\n    signal: `(` +\n      `scale(\"${scaleName}\", ${vgField(fieldDef, {expr: 'datum'})})` +\n      ` + ` +\n      `scale(\"${scaleName}\", ${vgField(fieldDef, {binSuffix: 'end', expr: 'datum'})})`+\n    `)/2`\n  };\n}\n\n/**\n * @returns {VgValueRef} Value Ref for xc / yc or mid point for other channels.\n */\nexport function midPoint(channel: Channel, channelDef: ChannelDef<string>, scaleName: string, scale: ScaleComponent, stack: StackProperties, defaultRef: VgValueRef): VgValueRef {\n  // TODO: datum support\n\n  if (channelDef) {\n    /* istanbul ignore else */\n\n    if (isFieldDef(channelDef)) {\n      if (channelDef.bin) {\n        // Use middle only for x an y to place marks in the center between start and end of the bin range.\n        // We do not use the mid point for other channels (e.g. size) so that properties of legends and marks match.\n        if (contains([X, Y], channel) && channelDef.type === QUANTITATIVE) {\n          if (stack && stack.impute) {\n            // For stack, we computed bin_mid so we can impute.\n            return fieldRef(channelDef, scaleName, {binSuffix: 'mid'});\n          }\n          // For non-stack, we can just calculate bin mid on the fly using signal.\n          return binMidSignal(channelDef, scaleName);\n        }\n        return fieldRef(channelDef, scaleName, binRequiresRange(channelDef, channel) ? {binSuffix: 'range'} : {});\n      }\n\n      if (scale) {\n        const scaleType = scale.get('type');\n        if (hasDiscreteDomain(scaleType)) {\n          if (scaleType === 'band') {\n            // For band, to get mid point, need to offset by half of the band\n            return fieldRef(channelDef, scaleName, {binSuffix: 'range'}, {band: 0.5});\n          }\n          return fieldRef(channelDef, scaleName, {binSuffix: 'range'});\n        }\n      }\n      return fieldRef(channelDef, scaleName, {}); // no need for bin suffix\n    } else if (isValueDef(channelDef)) {\n      return {value: channelDef.value};\n    }\n\n    // If channelDef is neither field def or value def, it's a condition-only def.\n    // In such case, we will use default ref.\n  }\n\n  return defaultRef;\n}\n\nexport function text(textDef: ChannelDefWithCondition<TextFieldDef<string>>, config: Config): VgValueRef {\n  // text\n  if (textDef) {\n    if (isFieldDef(textDef)) {\n      return formatSignalRef(textDef, textDef.format, 'datum', config);\n    } else if (isValueDef(textDef)) {\n      return {value: textDef.value};\n    }\n  }\n  return undefined;\n}\n\nexport function mid(sizeRef: VgSignalRef): VgValueRef {\n  return {...sizeRef, mult: 0.5};\n}\n\n/**\n * Whether the scale definitely includes zero in the domain\n */\nfunction domainDefinitelyIncludeZero(scale: ScaleComponent) {\n  if (scale.get('zero') !== false) {\n    return true;\n  }\n  const domains = scale.domains;\n  if (isArray(domains)) {\n    return some(domains, (d) => isArray(d) && d.length === 2 && d[0] <=0 && d[1] >= 0);\n  }\n  return false;\n}\n\nexport function getDefaultRef(\n  defaultRef: VgValueRef | 'zeroOrMin' | 'zeroOrMax',\n  channel: 'x' | 'y', scaleName: string, scale: ScaleComponent, mark: Mark\n) {\n  if (isString(defaultRef)) {\n    if (scaleName) {\n      const scaleType = scale.get('type');\n      if (contains([ScaleType.LOG, ScaleType.TIME, ScaleType.UTC], scaleType)) {\n        // Log scales cannot have zero.\n        // Zero in time scale is arbitrary, and does not affect ratio.\n        // (Time is an interval level of measurement, not ratio).\n        // See https://en.wikipedia.org/wiki/Level_of_measurement for more info.\n        if (mark === 'bar' || mark === 'area') {\n          log.warn(log.message.nonZeroScaleUsedWithLengthMark(mark, channel, {scaleType}));\n        }\n      } else {\n        if (domainDefinitelyIncludeZero(scale)) {\n          return {\n            scale: scaleName,\n            value: 0\n          };\n        }\n        if (mark === 'bar' || mark === 'area') {\n          log.warn(log.message.nonZeroScaleUsedWithLengthMark(\n            mark, channel, {zeroFalse: scale.explicit.zero === false}\n          ));\n        }\n      }\n    }\n\n    if (defaultRef === 'zeroOrMin') {\n      return channel === 'x' ? {value: 0} : {field: {group: 'height'}};\n    } else { // zeroOrMax\n      return channel === 'x' ? {field: {group: 'width'}} : {value: 0};\n    }\n  }\n  return defaultRef;\n}\n\n","import {Channel, isColorChannel} from '../../channel';\nimport {DateTime, dateTimeExpr, isDateTime} from '../../datetime';\nimport {Legend} from '../../legend';\nimport {isBinScale, ScaleType} from '../../scale';\nimport {Type} from '../../type';\nimport {contains} from '../../util';\n\nexport function values(legend: Legend) {\n  const vals = legend.values;\n  if (vals && isDateTime(vals[0])) {\n    return (vals as DateTime[]).map((dt) => {\n      // normalize = true as end user won't put 0 = January\n      return {signal: dateTimeExpr(dt, true)};\n    });\n  }\n  return vals;\n}\n\nexport function type(t: Type, channel: Channel, scaleType: ScaleType): 'gradient' {\n  if (\n      isColorChannel(channel) && (\n        (t === 'quantitative' && !isBinScale(scaleType)) ||\n        (t === 'temporal' && contains<ScaleType>(['time', 'utc'], scaleType))\n      )\n    ) {\n    return 'gradient';\n  }\n  return undefined;\n}\n","import {contains} from '../../util';\nimport {isVgSignalRef, VgProjection, VgSignalRef} from '../../vega.schema';\nimport {isConcatModel, isLayerModel, isRepeatModel, Model} from '../model';\n\nexport function assembleProjections(model: Model): VgProjection[] {\n  if (isLayerModel(model) || isConcatModel(model) || isRepeatModel(model)) {\n    return assembleProjectionsForModelAndChildren(model);\n  } else {\n    return assembleProjectionForModel(model);\n  }\n}\n\nexport function assembleProjectionsForModelAndChildren(model: Model): VgProjection[] {\n  return model.children.reduce((projections, child) => {\n    return projections.concat(child.assembleProjections());\n  }, assembleProjectionForModel(model));\n}\n\nexport function assembleProjectionForModel(model: Model): VgProjection[] {\n  const component = model.component.projection;\n  if (!component || component.merged) {\n    return [];\n  }\n\n  const projection = component.combine();\n  const {name, ...rest} = projection;  // we need to extract name so that it is always present in the output and pass TS type validation\n\n  const size: VgSignalRef = {\n    signal: `[${component.size.map((ref) => ref.signal).join(', ')}]`\n  };\n\n  const fit: string[] = component.data.reduce((sources, data) => {\n    const source: string = isVgSignalRef(data) ? data.signal : `data('${model.lookupDataSource(data)}')`;\n    if (!contains(sources, source)) {\n      // build a unique list of sources\n      sources.push(source);\n    }\n    return sources;\n  }, []);\n\n  if (fit.length <= 0) {\n    throw new Error(\"Projection's fit didn't find any data sources\");\n  }\n\n  return [{\n    name,\n    size,\n    fit: {\n      signal: fit.length > 1 ? `[${fit.join(', ')}]` : fit[0]\n    },\n    ...rest\n  }];\n}\n","import {GEOPOSITION_CHANNELS, LATITUDE, LATITUDE2, LONGITUDE, LONGITUDE2, SHAPE} from '../../channel';\nimport {MAIN} from '../../data';\nimport {isFieldDef} from '../../fielddef';\nimport {GEOSHAPE} from '../../mark';\nimport {PROJECTION_PROPERTIES} from '../../projection';\nimport {GEOJSON} from '../../type';\nimport {duplicate, every, stringify} from '../../util';\nimport {VgSignalRef} from '../../vega.schema';\nimport {isUnitModel, Model} from '../model';\nimport {UnitModel} from '../unit';\nimport {ProjectionComponent} from './component';\n\nexport function parseProjection(model: Model) {\n  if (isUnitModel(model)) {\n    model.component.projection = parseUnitProjection(model);\n  } else {\n    // because parse happens from leaves up (unit specs before layer spec),\n    // we can be sure that the above if statement has already occurred\n    // and therefore we have access to child.component.projection\n    // for each of model's children\n    model.component.projection = parseNonUnitProjections(model);\n  }\n}\n\nfunction parseUnitProjection(model: UnitModel): ProjectionComponent {\n  const {specifiedProjection, markDef, config, encoding} = model;\n\n  const isGeoShapeMark = markDef && markDef.type === GEOSHAPE;\n  const isGeoPointOrLineMark = encoding && GEOPOSITION_CHANNELS.some(\n    (channel) => isFieldDef(encoding[channel])\n  );\n\n  if (isGeoShapeMark || isGeoPointOrLineMark) {\n    const data: (VgSignalRef | string)[] = [];\n\n    [[LONGITUDE, LATITUDE], [LONGITUDE2, LATITUDE2]].forEach((posssiblePair) => {\n      if (model.channelHasField(posssiblePair[0]) || model.channelHasField(posssiblePair[1])) {\n        data.push({\n          signal: model.getName(`geojson_${data.length}`)\n        });\n      }\n    });\n\n    if (model.channelHasField(SHAPE) && model.fieldDef(SHAPE).type === GEOJSON) {\n      data.push({\n        signal: model.getName(`geojson_${data.length}`)\n      });\n    }\n\n    if (data.length === 0) {\n      // main source is geojson, so we can just use that\n      data.push(model.requestDataName(MAIN));\n    }\n\n    return new ProjectionComponent(model.projectionName(true), {\n      ...(config.projection || {}),\n      ...(specifiedProjection || {}),\n    }, [model.getSizeSignalRef('width'), model.getSizeSignalRef('height')], data);\n  }\n\n  return undefined;\n}\n\n\nfunction mergeIfNoConflict(first: ProjectionComponent, second: ProjectionComponent): ProjectionComponent {\n  const allPropertiesShared = every(PROJECTION_PROPERTIES, (prop) => {\n    // neither has the poperty\n    if (!first.explicit.hasOwnProperty(prop) &&\n      !second.explicit.hasOwnProperty(prop)) {\n      return true;\n    }\n    // both have property and an equal value for property\n    if (first.explicit.hasOwnProperty(prop) &&\n      second.explicit.hasOwnProperty(prop) &&\n      // some properties might be signals or objects and require hashing for comparison\n      stringify(first.get(prop)) === stringify(second.get(prop))) {\n      return true;\n    }\n    return false;\n  });\n\n  const size = stringify(first.size) === stringify(second.size);\n  if (size) {\n    if (allPropertiesShared) {\n      return first;\n    } else if (stringify(first.explicit) === stringify({})) {\n      return second;\n    } else if (stringify(second.explicit) === stringify({})) {\n      return first;\n    }\n  }\n\n  // if all properties don't match, let each unit spec have its own projection\n  return null;\n}\n\nfunction parseNonUnitProjections(model: Model): ProjectionComponent {\n  if (model.children.length === 0) {\n    return undefined;\n  }\n\n  let nonUnitProjection: ProjectionComponent;\n  const mergable = every(model.children, (child) => {\n    parseProjection(child);\n    const projection = child.component.projection;\n    if (!projection) {\n      // child layer does not use a projection\n      return true;\n    } else if (!nonUnitProjection) {\n      // cached 'projection' is null, cache this one\n      nonUnitProjection = projection;\n      return true;\n    } else {\n      const merge = mergeIfNoConflict(nonUnitProjection, projection);\n      if (merge) {\n        nonUnitProjection = merge;\n      }\n      return !!merge;\n    }\n  });\n\n  // it cached one and all other children share the same projection,\n  if (nonUnitProjection && mergable) {\n    // so we can elevate it to the layer level\n    const name = model.projectionName(true);\n    const modelProjection = new ProjectionComponent(\n      name,\n      nonUnitProjection.specifiedProjection,\n      nonUnitProjection.size,\n      duplicate(nonUnitProjection.data)\n    );\n\n    // rename and assign all others as merged\n    model.children.forEach((child) => {\n      if (child.component.projection) {\n        modelProjection.data = modelProjection.data.concat(child.component.projection.data);\n        child.renameProjection(child.component.projection.get('name'), name);\n        child.component.projection.merged = true;\n      }\n    });\n\n    return modelProjection;\n  }\n\n  return undefined;\n}\n","\nimport {VgProjectionType} from './vega.schema';\n\nexport type ProjectionType = VgProjectionType;\n\nexport interface Projection {\n  /**\n   * The cartographic projection to use. This value is case-insensitive, for example `\"albers\"` and `\"Albers\"` indicate the same projection type. You can find all valid projection types [in the documentation](https://vega.github.io/vega-lite/docs/projection.html#projection-types).\n   *\n   * __Default value:__ `mercator`\n   */\n  type?: ProjectionType;\n\n  /**\n   * Sets the projections clipping circle radius to the specified angle in degrees. If `null`, switches to [antimeridian](http://bl.ocks.org/mbostock/3788999) cutting rather than small-circle clipping.\n   */\n  clipAngle?: number;\n\n  /**\n   * Sets the projections viewport clip extent to the specified bounds in pixels. The extent bounds are specified as an array `[[x0, y0], [x1, y1]]`, where `x0` is the left-side of the viewport, `y0` is the top, `x1` is the right and `y1` is the bottom. If `null`, no viewport clipping is performed.\n   */\n  clipExtent?: number[][];\n\n  /**\n   * Sets the projections center to the specified center, a two-element array of longitude and latitude in degrees.\n   *\n   * __Default value:__ `[0, 0]`\n   */\n  center?: number[];\n\n  /**\n   * Sets the projections three-axis rotation to the specified angles, which must be a two- or three-element array of numbers [`lambda`, `phi`, `gamma`] specifying the rotation angles in degrees about each spherical axis. (These correspond to yaw, pitch and roll.)\n   *\n   * __Default value:__ `[0, 0, 0]`\n   */\n  rotate?: number[];\n\n  /**\n   * Sets the threshold for the projections [adaptive resampling](http://bl.ocks.org/mbostock/3795544) to the specified value in pixels. This value corresponds to the [DouglasPeucker distance](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm). If precision is not specified, returns the projections current resampling precision which defaults to `0.5  0.70710`.\n   */\n  precision?: String;\n\n  /* The following properties are all supported for specific types of projections. Consult the d3-geo-projection library for more information: https://github.com/d3/d3-geo-projection */\n  coefficient?: number;\n  distance?: number;\n  fraction?: number;\n  lobes?: number;\n  parallel?: number;\n  radius?: number;\n  ratio?: number;\n  spacing?: number;\n  tilt?: number;\n}\n\n/**\n * Any property of Projection can be in config\n */\nexport interface ProjectionConfig extends Projection { }\n\nexport const PROJECTION_PROPERTIES: (keyof Projection)[] = [\n  'type',\n  'clipAngle',\n  'clipExtent',\n  'center',\n  'rotate',\n  'precision',\n  'coefficient',\n  'distance',\n  'fraction',\n  'lobes',\n  'parallel',\n  'radius',\n  'ratio',\n  'spacing',\n  'tilt'\n];\n","import {Projection} from '../../projection';\nimport {VgProjection, VgSignalRef} from '../../vega.schema';\nimport {Split} from '../split';\n\nexport class ProjectionComponent extends Split<VgProjection> {\n  public merged = false;\n\n  constructor(name: string, public specifiedProjection: Projection, public size: VgSignalRef[], public data: (string | VgSignalRef)[]) {\n    super(\n      {...specifiedProjection},  // all explicit properties of projection\n      {name}  // name as initial implicit property\n    );\n  }\n}\n","import {isArray} from 'vega-util';\nimport {Channel, ScaleChannel} from '../../channel';\nimport {keys} from '../../util';\nimport {isVgRangeStep, isVgSignalRef, VgRange, VgScale} from '../../vega.schema';\nimport {isConcatModel, isLayerModel, isRepeatModel, Model} from '../model';\nimport {isRawSelectionDomain, selectionScaleDomain} from '../selection/selection';\nimport {assembleDomain} from './domain';\n\nexport function assembleScales(model: Model): VgScale[] {\n  if (isLayerModel(model) || isConcatModel(model) || isRepeatModel(model)) {\n    // For concat / layer / repeat, include scales of children too\n    return model.children.reduce((scales, child) => {\n      return scales.concat(assembleScales(child));\n    }, assembleScalesForModel(model));\n  } else {\n    // For facet, child scales would not be included in the parent's scope.\n    // For unit, there is no child.\n    return assembleScalesForModel(model);\n  }\n}\n\nexport function assembleScalesForModel(model: Model): VgScale[] {\n    return keys(model.component.scales).reduce((scales: VgScale[], channel: ScaleChannel) => {\n      const scaleComponent = model.component.scales[channel];\n      if (scaleComponent.merged) {\n        // Skipped merged scales\n        return scales;\n      }\n\n      const scale = scaleComponent.combine();\n\n      // need to separate const and non const object destruction\n      let {domainRaw, range} = scale;\n      const {name, type, domainRaw: _d, range: _r, ...otherScaleProps} = scale;\n\n      range = assembleScaleRange(range, name, model, channel);\n\n      // As scale parsing occurs before selection parsing, a temporary signal\n      // is used for domainRaw. Here, we detect if this temporary signal\n      // is set, and replace it with the correct domainRaw signal.\n      // For more information, see isRawSelectionDomain in selection.ts.\n      if (domainRaw && isRawSelectionDomain(domainRaw)) {\n        domainRaw = selectionScaleDomain(model, domainRaw);\n      }\n\n\n      scales.push({\n        name,\n        type,\n        domain: assembleDomain(model, channel),\n        ...(domainRaw ? {domainRaw} : {}),\n        range: range,\n        ...otherScaleProps\n      });\n\n      return scales;\n    }, [] as VgScale[]);\n}\n\nexport function assembleScaleRange(scaleRange: VgRange, scaleName: string, model: Model, channel: Channel) {\n  // add signals to x/y range\n  if (channel === 'x' || channel === 'y') {\n    if (isVgRangeStep(scaleRange)) {\n      // For x/y range step, use a signal created in layout assemble instead of a constant range step.\n      return {\n        step: {signal: scaleName + '_step'}\n      };\n    } else if (isArray(scaleRange) && scaleRange.length === 2) {\n      const r0 = scaleRange[0];\n      const r1 = scaleRange[1];\n      if (r0 === 0 && isVgSignalRef(r1)) {\n        // Replace width signal just in case it is renamed.\n        return [0, {signal: model.getSizeName(r1.signal)}];\n      } else if (isVgSignalRef(r0) && r1 === 0) {\n        // Replace height signal just in case it is renamed.\n        return [{signal: model.getSizeName(r0.signal)}, 0];\n      }\n    }\n  }\n  return scaleRange;\n}\n","import {isString} from 'vega-util';\nimport {SHARED_DOMAIN_OP_INDEX} from '../../aggregate';\nimport {binToString} from '../../bin';\nimport {isScaleChannel, ScaleChannel} from '../../channel';\nimport {MAIN, RAW} from '../../data';\nimport {DateTime, dateTimeExpr, isDateTime} from '../../datetime';\nimport {FieldDef} from '../../fielddef';\nimport * as log from '../../log';\nimport {Domain, hasDiscreteDomain, isBinScale, isSelectionDomain, ScaleConfig, ScaleType} from '../../scale';\nimport {isSortArray, isSortField, SortField} from '../../sort';\nimport {hash} from '../../util';\nimport * as util from '../../util';\nimport {isDataRefUnionedDomain, isFieldRefUnionDomain} from '../../vega.schema';\nimport {\n  isDataRefDomain,\n  VgDataRef,\n  VgDomain,\n  VgFieldRefUnionDomain,\n  VgNonUnionDomain,\n  VgSortField,\n  VgUnionSortField,\n} from '../../vega.schema';\nimport {binRequiresRange} from '../common';\nimport {sortArrayIndexField} from '../data/calculate';\nimport {FACET_SCALE_PREFIX} from '../data/optimize';\nimport {isFacetModel, isUnitModel, Model} from '../model';\nimport {SELECTION_DOMAIN} from '../selection/selection';\nimport {UnitModel} from '../unit';\nimport {ScaleComponentIndex} from './component';\n\n\nexport function parseScaleDomain(model: Model) {\n  if (isUnitModel(model)) {\n    parseUnitScaleDomain(model);\n  } else {\n    parseNonUnitScaleDomain(model);\n  }\n}\n\nfunction parseUnitScaleDomain(model: UnitModel) {\n  const scales = model.specifiedScales;\n  const localScaleComponents: ScaleComponentIndex = model.component.scales;\n\n  util.keys(localScaleComponents).forEach((channel: ScaleChannel) => {\n    const specifiedScale = scales[channel];\n    const specifiedDomain = specifiedScale ? specifiedScale.domain : undefined;\n\n    const domains = parseDomainForChannel(model, channel);\n    const localScaleCmpt = localScaleComponents[channel];\n    localScaleCmpt.domains = domains;\n\n    if (isSelectionDomain(specifiedDomain)) {\n      // As scale parsing occurs before selection parsing, we use a temporary\n      // signal here and append the scale.domain definition. This is replaced\n      // with the correct domainRaw signal during scale assembly.\n      // For more information, see isRawSelectionDomain in selection.ts.\n\n      // FIXME: replace this with a special property in the scaleComponent\n      localScaleCmpt.set('domainRaw', {\n        signal: SELECTION_DOMAIN + hash(specifiedDomain)\n      }, true);\n    }\n\n    if (model.component.data.isFaceted) {\n      // get resolve from closest facet parent as this decides whether we need to refer to cloned subtree or not\n      let facetParent: Model = model;\n      while (!isFacetModel(facetParent) && facetParent.parent) {\n        facetParent = facetParent.parent;\n      }\n\n      const resolve = facetParent.component.resolve.scale[channel];\n\n      if (resolve === 'shared') {\n        for (const domain of domains) {\n          // Replace the scale domain with data output from a cloned subtree after the facet.\n          if (isDataRefDomain(domain)) {\n            // use data from cloned subtree (which is the same as data but with a prefix added once)\n            domain.data = FACET_SCALE_PREFIX + domain.data.replace(FACET_SCALE_PREFIX, '');\n          }\n        }\n      }\n    }\n  });\n}\n\nfunction parseNonUnitScaleDomain(model: Model) {\n  for (const child of model.children) {\n    parseScaleDomain(child);\n  }\n\n  const localScaleComponents: ScaleComponentIndex = model.component.scales;\n\n  util.keys(localScaleComponents).forEach((channel: ScaleChannel) => {\n    let domains: VgNonUnionDomain[];\n    let domainRaw = null;\n\n    for (const child of model.children) {\n      const childComponent = child.component.scales[channel];\n      if (childComponent) {\n        if (domains === undefined) {\n          domains = childComponent.domains;\n        } else {\n          domains = domains.concat(childComponent.domains);\n        }\n\n        const dr = childComponent.get('domainRaw');\n        if (domainRaw && dr && domainRaw.signal !== dr.signal) {\n          log.warn('The same selection must be used to override scale domains in a layered view.');\n        }\n        domainRaw = dr;\n      }\n    }\n\n    localScaleComponents[channel].domains = domains;\n\n    if (domainRaw) {\n      localScaleComponents[channel].set('domainRaw', domainRaw, true);\n    }\n  });\n}\n\n\n/**\n * Remove unaggregated domain if it is not applicable\n * Add unaggregated domain if domain is not specified and config.scale.useUnaggregatedDomain is true.\n */\nfunction normalizeUnaggregatedDomain(domain: Domain, fieldDef: FieldDef<string>, scaleType: ScaleType, scaleConfig: ScaleConfig) {\n  if (domain === 'unaggregated') {\n    const {valid, reason} = canUseUnaggregatedDomain(fieldDef, scaleType);\n    if(!valid) {\n      log.warn(reason);\n      return undefined;\n    }\n  } else if (domain === undefined && scaleConfig.useUnaggregatedDomain) {\n    // Apply config if domain is not specified.\n    const {valid} = canUseUnaggregatedDomain(fieldDef, scaleType);\n    if (valid) {\n      return 'unaggregated';\n    }\n  }\n\n  return domain;\n}\n\nexport function parseDomainForChannel(model: UnitModel, channel: ScaleChannel): VgNonUnionDomain[] {\n  const scaleType = model.getScaleComponent(channel).get('type');\n\n  const domain = normalizeUnaggregatedDomain(model.scaleDomain(channel), model.fieldDef(channel), scaleType, model.config.scale);\n  if (domain !== model.scaleDomain(channel)) {\n    model.specifiedScales[channel] = {\n      ...model.specifiedScales[channel],\n      domain\n    };\n  }\n\n  // If channel is either X or Y then union them with X2 & Y2 if they exist\n  if (channel === 'x' && model.channelHasField('x2')) {\n    if (model.channelHasField('x')) {\n      return parseSingleChannelDomain(scaleType, domain, model, 'x').concat(parseSingleChannelDomain(scaleType, domain, model, 'x2'));\n    } else {\n      return parseSingleChannelDomain(scaleType, domain, model, 'x2');\n    }\n  } else if (channel === 'y' && model.channelHasField('y2')) {\n    if (model.channelHasField('y')) {\n      return parseSingleChannelDomain(scaleType, domain, model, 'y').concat(parseSingleChannelDomain(scaleType, domain, model, 'y2'));\n    } else {\n      return parseSingleChannelDomain(scaleType, domain, model, 'y2');\n    }\n  }\n  return parseSingleChannelDomain(scaleType, domain, model, channel);\n}\n\nfunction parseSingleChannelDomain(scaleType: ScaleType, domain: Domain, model: UnitModel, channel: ScaleChannel | 'x2' | 'y2'): VgNonUnionDomain[] {\n  const fieldDef = model.fieldDef(channel);\n\n  if (domain && domain !== 'unaggregated' && !isSelectionDomain(domain)) { // explicit value\n    if (fieldDef.bin) {\n      log.warn(log.message.conflictedDomain(channel));\n    } else {\n      if (isDateTime(domain[0])) {\n        return (domain as DateTime[]).map((dt) => {\n          return {signal: `{data: ${dateTimeExpr(dt, true)}}`};\n        });\n      }\n      return [domain];\n    }\n  }\n\n  const stack = model.stack;\n  if (stack && channel === stack.fieldChannel) {\n    if(stack.offset === 'normalize') {\n      return [[0, 1]];\n    }\n\n    const data = model.requestDataName(MAIN);\n    return [{\n      data,\n      field: model.vgField(channel, {suffix: 'start'})\n    }, {\n      data,\n      field: model.vgField(channel, {suffix: 'end'})\n    }];\n  }\n\n  const sort = isScaleChannel(channel) ? domainSort(model, channel, scaleType) : undefined;\n\n  if (domain === 'unaggregated') {\n    const data = model.requestDataName(MAIN);\n    return [{\n      data,\n      field: model.vgField(channel, {aggregate: 'min'})\n    }, {\n      data,\n      field: model.vgField(channel, {aggregate: 'max'})\n    }];\n  } else if (fieldDef.bin) { // bin\n    if (isBinScale(scaleType)) {\n      const signal = model.getName(`${binToString(fieldDef.bin)}_${fieldDef.field}_bins`);\n      return [{signal: `sequence(${signal}.start, ${signal}.stop + ${signal}.step, ${signal}.step)`}];\n    }\n\n    if (hasDiscreteDomain(scaleType)) {\n      // ordinal bin scale takes domain from bin_range, ordered by bin start\n      // This is useful for both axis-based scale (x/y) and legend-based scale (other channels).\n      return [{\n        // If sort by aggregation of a specified sort field, we need to use RAW table,\n        // so we can aggregate values for the scale independently from the main aggregation.\n        data: util.isBoolean(sort) ? model.requestDataName(MAIN) : model.requestDataName(RAW),\n        // Use range if we added it and the scale does not support computing a range as a signal.\n        field: model.vgField(channel, binRequiresRange(fieldDef, channel) ? {binSuffix: 'range'} : {}),\n        // we have to use a sort object if sort = true to make the sort correct by bin start\n        sort: sort === true || !isSortField(sort) ? {\n          field: model.vgField(channel, {}),\n          op: 'min' // min or max doesn't matter since we sort by the start of the bin range\n        } : sort\n      }];\n    } else { // continuous scales\n      if (channel === 'x' || channel === 'y') {\n        // X/Y position have to include start and end for non-ordinal scale\n        const data = model.requestDataName(MAIN);\n        return [{\n          data,\n          field: model.vgField(channel, {})\n        }, {\n          data,\n          field: model.vgField(channel, {binSuffix: 'end'})\n        }];\n      } else {\n        // TODO: use bin_mid\n        return [{\n          data: model.requestDataName(MAIN),\n          field: model.vgField(channel, {})\n        }];\n      }\n    }\n  } else if (sort) {\n    return [{\n      // If sort by aggregation of a specified sort field, we need to use RAW table,\n      // so we can aggregate values for the scale independently from the main aggregation.\n      data: util.isBoolean(sort) ? model.requestDataName(MAIN) : model.requestDataName(RAW),\n      field: model.vgField(channel),\n      sort: sort\n    }];\n  } else {\n    return [{\n      data: model.requestDataName(MAIN),\n      field: model.vgField(channel)\n    }];\n  }\n}\n\n\nexport function domainSort(model: UnitModel, channel: ScaleChannel, scaleType: ScaleType): true | SortField<string> {\n  if (!hasDiscreteDomain(scaleType)) {\n    return undefined;\n  }\n\n  const sort = model.sort(channel);\n\n  // if the sort is specified with array, use the derived sort index field\n  if (isSortArray(sort)) {\n    return {\n      op: 'min',\n      field: sortArrayIndexField(model, channel),\n      order: 'ascending'\n    };\n  }\n\n  // Sorted based on an aggregate calculation over a specified sort field (only for ordinal scale)\n  if (isSortField(sort)) {\n    return sort;\n  }\n\n  if (sort === 'descending') {\n    return {\n      op: 'min',\n      field: model.vgField(channel),\n      order: 'descending'\n    };\n  }\n\n  if (util.contains(['ascending', undefined /* default =ascending*/], sort)) {\n    return true;\n  }\n\n  // sort == null\n  return undefined;\n}\n\n\n\n/**\n * Determine if a scale can use unaggregated domain.\n * @return {Boolean} Returns true if all of the following conditons applies:\n * 1. `scale.domain` is `unaggregated`\n * 2. Aggregation function is not `count` or `sum`\n * 3. The scale is quantitative or time scale.\n */\nexport function canUseUnaggregatedDomain(fieldDef: FieldDef<string>, scaleType: ScaleType): {valid: boolean, reason?: string} {\n  if (!fieldDef.aggregate) {\n    return {\n      valid: false,\n      reason: log.message.unaggregateDomainHasNoEffectForRawField(fieldDef)\n    };\n  }\n\n  if (!SHARED_DOMAIN_OP_INDEX[fieldDef.aggregate]) {\n    return {\n      valid: false,\n      reason: log.message.unaggregateDomainWithNonSharedDomainOp(fieldDef.aggregate)\n    };\n  }\n\n  if (fieldDef.type === 'quantitative') {\n    if (scaleType === 'log') {\n      return {\n        valid: false,\n        reason: log.message.unaggregatedDomainWithLogScale(fieldDef)\n      };\n    }\n  }\n\n  return {valid: true};\n}\n\n/**\n * Converts an array of domains to a single Vega scale domain.\n */\nexport function mergeDomains(domains: VgNonUnionDomain[]): VgDomain {\n  const uniqueDomains = util.unique(domains.map(domain => {\n    // ignore sort property when computing the unique domains\n    if (isDataRefDomain(domain)) {\n      const {sort: _s, ...domainWithoutSort} = domain;\n      return domainWithoutSort;\n    }\n    return domain;\n  }), util.hash);\n\n  const sorts: VgSortField[] = util.unique(domains.map(d => {\n    if (isDataRefDomain(d)) {\n      const s = d.sort;\n      if (s !== undefined && !util.isBoolean(s)) {\n        if (s.op === 'count') {\n          // let's make sure that if op is count, we don't use a field\n          delete s.field;\n        }\n        if (s.order === 'ascending') {\n          // drop order: ascending as it is the default\n          delete s.order;\n        }\n      }\n      return s;\n    }\n    return undefined;\n  }).filter(s => s !== undefined), util.hash);\n\n  if (uniqueDomains.length === 1) {\n    const domain = domains[0];\n    if (isDataRefDomain(domain) && sorts.length > 0) {\n      let sort = sorts[0];\n      if (sorts.length > 1) {\n        log.warn(log.message.MORE_THAN_ONE_SORT);\n        sort = true;\n      }\n      return {\n        ...domain,\n        sort\n      };\n    }\n    return domain;\n  }\n\n  // only keep simple sort properties that work with unioned domains\n  const simpleSorts = util.unique(sorts.map(s => {\n    if (s === true) {\n      return s;\n    }\n    if (s.op === 'count') {\n      return s;\n    }\n    log.warn(log.message.domainSortDropped(s));\n    return true;\n  }), util.hash) as VgUnionSortField[];\n\n  let sort: VgUnionSortField = undefined;\n\n  if (simpleSorts.length === 1) {\n    sort = simpleSorts[0];\n  } else if (simpleSorts.length > 1) {\n    log.warn(log.message.MORE_THAN_ONE_SORT);\n    sort = true;\n  }\n\n  const allData = util.unique(domains.map(d => {\n    if (isDataRefDomain(d)) {\n      return d.data;\n    }\n    return null;\n  }), x => x);\n\n  if (allData.length === 1 && allData[0] !== null) {\n    // create a union domain of different fields with a single data source\n    const domain: VgFieldRefUnionDomain = {\n      data: allData[0],\n      fields: uniqueDomains.map(d => (d as VgDataRef).field),\n      ...(sort ? {sort} : {})\n    };\n\n    return domain;\n  }\n\n  return {fields: uniqueDomains, ...(sort ? {sort} : {})};\n}\n\n/**\n * Return a field if a scale single field.\n * Return `undefined` otherwise.\n *\n */\nexport function getFieldFromDomain(domain: VgDomain): string {\n  if (isDataRefDomain(domain) && isString(domain.field)) {\n    return domain.field;\n  } else if (isDataRefUnionedDomain(domain)) {\n    let field;\n    for (const nonUnionDomain of domain.fields) {\n      if (isDataRefDomain(nonUnionDomain) && isString(nonUnionDomain.field)) {\n        if (!field) {\n          field = nonUnionDomain.field;\n        } else if (field !== nonUnionDomain.field) {\n          log.warn('Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect.');\n          return field;\n        }\n      }\n    }\n    log.warn('Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect.');\n    return field;\n  } else if (isFieldRefUnionDomain(domain)) {\n    log.warn('Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.');\n    const field = domain.fields[0];\n    return isString(field) ? field : undefined;\n  }\n\n  return undefined;\n}\n\nexport function assembleDomain(model: Model, channel: ScaleChannel) {\n  const scaleComponent = model.component.scales[channel];\n  const domains = scaleComponent.domains.map(domain => {\n    // Correct references to data as the original domain's data was determined\n    // in parseScale, which happens before parseData. Thus the original data\n    // reference can be incorrect.\n\n    if (isDataRefDomain(domain)) {\n      domain.data = model.lookupDataSource(domain.data);\n    }\n    return domain;\n  });\n\n  // domains is an array that has to be merged into a single vega domain\n  return mergeDomains(domains);\n}\n","import {AggregateOp} from 'vega';\nimport {isArray, isString} from 'vega-util';\n\nimport {VgComparatorOrder} from './vega.schema';\n\n\nexport type SortOrder = VgComparatorOrder | null;\n\nexport interface SortField<F> {\n  /**\n   * The data [field](field.html) to sort by.\n   *\n   * __Default value:__ If unspecified, defaults to the field specified in the outer data reference.\n   */\n  field?: F;\n  /**\n   * An [aggregate operation](aggregate.html#ops) to perform on the field prior to sorting (e.g., `\"count\"`, `\"mean\"` and `\"median\"`).\n   * This property is required in cases where the sort field and the data reference field do not match.\n   * The input data objects will be aggregated, grouped by the encoded data field.\n   *\n   * For a full list of operations, please see the documentation for [aggregate](aggregate.html#ops).\n   */\n  op: AggregateOp;\n\n  /**\n   * The sort order. One of `\"ascending\"` (default), `\"descending\"`, or `null` (no not sort).\n   */\n  order?: SortOrder;\n}\n\nexport function isSortField<F>(sort: string[] | SortOrder | SortField<F>): sort is SortField<F> {\n  return !!sort && (sort['op'] === 'count' || !!sort['field']) && !!sort['op'];\n}\n\nexport function isSortArray<F>(sort: string[] | SortOrder | SortField<F>): sort is string[] {\n  return !!sort && isArray(sort) && sort.every(s => isString(s));\n}\n","import {isScaleFieldDef, ScaleFieldDef, vgField} from '../../fielddef';\nimport {isSortArray} from '../../sort';\nimport {duplicate} from '../../util';\nimport {VgFormulaTransform} from '../../vega.schema';\nimport {ModelWithField} from '../model';\nimport {SingleDefChannel} from './../../channel';\nimport {CalculateTransform} from './../../transform';\nimport {DataFlowNode} from './dataflow';\n\n/**\n * We don't know what a calculate node depends on so we should never move it beyond anything that produces fields.\n */\nexport class CalculateNode extends DataFlowNode {\n  public clone() {\n    return new CalculateNode(null, duplicate(this.transform));\n  }\n\n  constructor(parent: DataFlowNode, private transform: CalculateTransform) {\n    super(parent);\n  }\n\n  public static parseAllForSortIndex(parent: DataFlowNode, model: ModelWithField) {\n    // get all the encoding with sort fields from model\n    model.forEachFieldDef((fieldDef: ScaleFieldDef<string>, channel: SingleDefChannel) => {\n      if (isScaleFieldDef(fieldDef) && isSortArray(fieldDef.sort)) {\n        const transform: CalculateTransform = {\n          calculate: CalculateNode.calculateExpressionFromSortField(fieldDef.field, fieldDef.sort),\n          as: sortArrayIndexField(model, channel)\n        };\n        parent = new CalculateNode(parent, transform);\n      }\n    });\n    return parent;\n  }\n\n  public static calculateExpressionFromSortField(field: string, sortFields: string[]): string {\n    let expression = '';\n    let i: number;\n    for (i = 0; i < sortFields.length; i++) {\n      expression += `datum.${field} === '${sortFields[i]}' ? ${i} : `;\n    }\n    expression += i;\n    return expression;\n  }\n\n  public producedFields() {\n    const out = {};\n    out[this.transform.as] = true;\n    return out;\n  }\n\n  public assemble(): VgFormulaTransform {\n    return {\n      type: 'formula',\n      expr: this.transform.calculate,\n      as: this.transform.as\n    };\n  }\n}\n\nexport function sortArrayIndexField(model: ModelWithField, channel: SingleDefChannel) {\n  const fieldDef = model.fieldDef(channel);\n  return `${channel}_${vgField(fieldDef)}_sort_index`;\n}\n","\nimport {DataSourceType} from '../../data';\nimport {Dict, StringSet} from '../../util';\n\n\n/**\n * A node in the dataflow tree.\n */\nexport class DataFlowNode {\n  private _children: DataFlowNode[] = [];\n\n  private _parent: DataFlowNode = null;\n\n  constructor(parent: DataFlowNode, public readonly debugName?: string) {\n    if (parent) {\n      this.parent = parent;\n    }\n  }\n\n  /**\n   * Clone this node with a deep copy but don't clone links to children or parents.\n   */\n  public clone(): DataFlowNode {\n    throw new Error('Cannot clone node');\n  }\n\n  /**\n   * Set of fields that are being created by this node.\n   */\n  public producedFields(): StringSet {\n    return {};\n  }\n\n  public dependentFields(): StringSet {\n    return {};\n  }\n\n  get parent() {\n    return this._parent;\n  }\n\n  /**\n   * Set the parent of the node and also add this not to the parent's children.\n   */\n  set parent(parent: DataFlowNode) {\n    this._parent = parent;\n    parent.addChild(this);\n  }\n\n  get children() {\n    return this._children;\n  }\n\n  public numChildren() {\n    return this._children.length;\n  }\n\n  public addChild(child: DataFlowNode) {\n    this._children.push(child);\n  }\n\n  public removeChild(oldChild: DataFlowNode) {\n    this._children.splice(this._children.indexOf(oldChild), 1);\n  }\n\n  /**\n   * Remove node from the dataflow.\n   */\n  public remove() {\n    for (const child of this._children) {\n      child.parent = this._parent;\n    }\n    this._parent.removeChild(this);\n  }\n\n  /**\n   * Insert another node as a parent of this node.\n   */\n  public insertAsParentOf(other: DataFlowNode) {\n    const parent = other.parent;\n    parent.removeChild(this);\n    this.parent = parent;\n    other.parent = this;\n  }\n\n  public swapWithParent() {\n    const parent = this._parent;\n    const newParent = parent.parent;\n\n    // reconnect the children\n    for (const child of this._children) {\n      child.parent = parent;\n    }\n\n    // remove old links\n    this._children = [];  // equivalent to removing every child link one by one\n    parent.removeChild(this);\n    parent.parent.removeChild(parent);\n\n\n    // swap two nodes\n    this.parent = newParent;\n    parent.parent = this;\n  }\n}\n\nexport class OutputNode extends DataFlowNode {\n  private _source: string;\n\n  private _name: string;\n\n  public clone(): this {\n    const cloneObj = new (<any>this.constructor);\n    cloneObj.debugName = 'clone_' + this.debugName;\n    cloneObj._source = this._source;\n    cloneObj._name = 'clone_' + this._name;\n    cloneObj.type = this.type;\n    cloneObj.refCounts = this.refCounts;\n    cloneObj.refCounts[cloneObj._name] = 0;\n    return cloneObj;\n  }\n\n  /**\n   * @param source The name of the source. Will change in assemble.\n   * @param type The type of the output node.\n   * @param refCounts A global ref counter map.\n   */\n  constructor(parent: DataFlowNode, source: string, public readonly type: DataSourceType, private readonly refCounts: Dict<number>) {\n    super(parent, source);\n\n    this._source = this._name = source;\n\n    if (this.refCounts && !(this._name in this.refCounts)) {\n      this.refCounts[this._name] = 0;\n    }\n  }\n\n  /**\n   * Request the datasource name and increase the ref counter.\n   *\n   * During the parsing phase, this will return the simple name such as 'main' or 'raw'.\n   * It is crucial to request the name from an output node to mark it as a required node.\n   * If nobody ever requests the name, this datasource will not be instantiated in the assemble phase.\n   *\n   * In the assemble phase, this will return the correct name.\n   */\n  public getSource() {\n    this.refCounts[this._name]++;\n    return this._source;\n  }\n\n  public isRequired(): boolean {\n    return !!this.refCounts[this._name];\n  }\n\n  public setSource(source: string) {\n    this._source = source;\n  }\n}\n","import {MAIN} from '../../data';\nimport {every, flatten, keys, vals} from '../../util';\nimport {AggregateNode} from './aggregate';\nimport {DataFlowNode, OutputNode} from './dataflow';\nimport {FacetNode} from './facet';\nimport {FilterInvalidNode} from './filterinvalid';\nimport {DataComponent} from './index';\nimport * as optimizers from './optimizers';\nimport {SourceNode} from './source';\nimport {StackNode} from './stack';\n\nexport const FACET_SCALE_PREFIX = 'scale_';\n\n/**\n * Clones the subtree and ignores output nodes except for the leafs, which are renamed.\n */\nfunction cloneSubtree(facet: FacetNode) {\n  function clone(node: DataFlowNode): DataFlowNode[] {\n    if (!(node instanceof FacetNode)) {\n      const copy = node.clone();\n\n      if (copy instanceof OutputNode) {\n        const newName = FACET_SCALE_PREFIX + copy.getSource();\n        copy.setSource(newName);\n\n        facet.model.component.data.outputNodes[newName] = copy;\n      } else if (copy instanceof AggregateNode || copy instanceof StackNode) {\n        copy.addDimensions(facet.fields);\n      }\n      flatten(node.children.map(clone)).forEach((n: DataFlowNode) => n.parent = copy);\n\n      return [copy];\n    }\n\n    return flatten(node.children.map(clone));\n  }\n  return clone;\n}\n\n/**\n * Move facet nodes down to the next fork or output node. Also pull the main output with the facet node.\n * After moving down the facet node, make a copy of the subtree and make it a child of the main output.\n */\nfunction moveFacetDown(node: DataFlowNode) {\n  if (node instanceof FacetNode) {\n    if (node.numChildren() === 1 && !(node.children[0] instanceof OutputNode)) {\n      // move down until we hit a fork or output node\n\n      const child = node.children[0];\n\n      if (child instanceof AggregateNode || child instanceof StackNode) {\n        child.addDimensions(node.fields);\n      }\n\n      child.swapWithParent();\n      moveFacetDown(node);\n    } else {\n      // move main to facet\n      moveMainDownToFacet(node.model.component.data.main);\n\n      // replicate the subtree and place it before the facet's main node\n      const copy: DataFlowNode[] = flatten(node.children.map(cloneSubtree(node)));\n      copy.forEach(c => c.parent = node.model.component.data.main);\n    }\n  } else {\n    node.children.forEach(moveFacetDown);\n  }\n}\n\nfunction moveMainDownToFacet(node: DataFlowNode) {\n  if (node instanceof OutputNode && node.type === MAIN) {\n    if (node.numChildren() === 1) {\n      const child = node.children[0];\n\n      if (!(child instanceof FacetNode)) {\n        child.swapWithParent();\n        moveMainDownToFacet(node);\n      }\n    }\n  }\n}\n\n/**\n * Remove nodes that are not required starting from a root.\n */\nfunction removeUnnecessaryNodes(node: DataFlowNode) {\n\n  // remove empty null filter nodes\n  if (node instanceof FilterInvalidNode && every(vals(node.filter), f => f === null)) {\n    node.remove();\n  }\n\n  // remove output nodes that are not required\n  if (node instanceof OutputNode && !node.isRequired()) {\n    node.remove();\n  }\n\n  node.children.forEach(removeUnnecessaryNodes);\n}\n\n/**\n * Return all leaf nodes.\n */\nfunction getLeaves(roots: DataFlowNode[]) {\n  const leaves: DataFlowNode[] = [];\n  function append(node: DataFlowNode) {\n    if (node.numChildren() === 0) {\n      leaves.push(node);\n    } else {\n      node.children.forEach(append);\n    }\n  }\n\n  roots.forEach(append);\n  return leaves;\n}\n\n/**\n * Optimizes the dataflow of the passed in data component.\n */\nexport function optimizeDataflow(dataComponent: DataComponent) {\n  let roots: SourceNode[] = vals(dataComponent.sources);\n\n  roots.forEach(removeUnnecessaryNodes);\n\n  // remove source nodes that don't have any children because they also don't have output nodes\n  roots = roots.filter(r => r.numChildren() > 0);\n  getLeaves(roots).forEach(optimizers.iterateFromLeaves(optimizers.removeUnusedSubtrees));\n  roots = roots.filter(r => r.numChildren() > 0);\n\n  getLeaves(roots).forEach(optimizers.iterateFromLeaves(optimizers.moveParseUp));\n  getLeaves(roots).forEach(optimizers.removeDuplicateTimeUnits);\n\n  roots.forEach(moveFacetDown);\n\n  keys(dataComponent.sources).forEach(s => {\n    if (dataComponent.sources[s].numChildren() === 0) {\n      delete dataComponent.sources[s];\n    }\n  });\n}\n","import {AggregateOp} from 'vega';\nimport {Channel, isScaleChannel} from '../../channel';\nimport {FieldDef, vgField} from '../../fielddef';\nimport * as log from '../../log';\nimport {AggregateTransform} from '../../transform';\nimport {Dict, differ, duplicate, keys, StringSet} from '../../util';\nimport {VgAggregateTransform} from '../../vega.schema';\nimport {binRequiresRange} from '../common';\nimport {UnitModel} from './../unit';\nimport {DataFlowNode} from './dataflow';\n\nfunction addDimension(dims: {[field: string]: boolean}, channel: Channel, fieldDef: FieldDef<string>) {\n  if (fieldDef.bin) {\n    dims[vgField(fieldDef, {})] = true;\n    dims[vgField(fieldDef, {binSuffix: 'end'})] = true;\n\n    if (binRequiresRange(fieldDef, channel)) {\n      dims[vgField(fieldDef, {binSuffix: 'range'})] = true;\n    }\n  } else {\n    dims[vgField(fieldDef)] = true;\n  }\n  return dims;\n}\n\nfunction mergeMeasures(parentMeasures: Dict<Dict<string>>, childMeasures: Dict<Dict<string>>) {\n  for (const f in childMeasures) {\n    if (childMeasures.hasOwnProperty(f)) {\n      // when we merge a measure, we either have to add an aggregation operator or even a new field\n      const ops = childMeasures[f];\n      for (const op in ops) {\n        if (ops.hasOwnProperty(op)) {\n          if (f in parentMeasures) {\n            // add operator to existing measure field\n            parentMeasures[f][op] = ops[op];\n          } else {\n            parentMeasures[f] = {op: ops[op]};\n          }\n        }\n      }\n    }\n  }\n}\n\nexport class AggregateNode extends DataFlowNode {\n  public clone() {\n    return new AggregateNode(null, {...this.dimensions}, duplicate(this.measures));\n  }\n\n  /**\n   * @param dimensions string set for dimensions\n   * @param measures dictionary mapping field name => dict of aggregation functions and names to use\n   */\n  constructor(parent: DataFlowNode, private dimensions: StringSet, private measures: Dict<{[key in AggregateOp]?: string}>) {\n    super(parent);\n  }\n\n  public static makeFromEncoding(parent: DataFlowNode, model: UnitModel): AggregateNode {\n    let isAggregate = false;\n    model.forEachFieldDef(fd => {\n      if (fd.aggregate) {\n        isAggregate = true;\n      }\n    });\n\n    const meas = {};\n    const dims = {};\n\n    if (!isAggregate) {\n      // no need to create this node if the model has no aggregation\n      return null;\n    }\n\n    model.forEachFieldDef((fieldDef, channel) => {\n      if (fieldDef.aggregate) {\n        if (fieldDef.aggregate === 'count') {\n          meas['*'] = meas['*'] || {};\n          meas['*']['count'] = vgField(fieldDef, {aggregate: 'count'});\n        } else {\n          meas[fieldDef.field] = meas[fieldDef.field] || {};\n          meas[fieldDef.field][fieldDef.aggregate] = vgField(fieldDef);\n\n          // For scale channel with domain === 'unaggregated', add min/max so we can use their union as unaggregated domain\n          if (isScaleChannel(channel) && model.scaleDomain(channel) === 'unaggregated') {\n            meas[fieldDef.field]['min'] = vgField(fieldDef, {aggregate: 'min'});\n            meas[fieldDef.field]['max'] = vgField(fieldDef, {aggregate: 'max'});\n          }\n        }\n      } else {\n        addDimension(dims, channel, fieldDef);\n      }\n    });\n\n    if ((keys(dims).length + keys(meas).length) === 0) {\n      return null;\n    }\n\n    return new AggregateNode(parent, dims, meas);\n  }\n\n  public static makeFromTransform(parent: DataFlowNode, t: AggregateTransform): AggregateNode {\n    const dims = {};\n    const meas = {};\n\n    for (const s of t.aggregate) {\n      if (s.op) {\n        if (s.op === 'count') {\n          meas['*'] = meas['*'] || {};\n          meas['*']['count'] = s.as || vgField(s);\n        } else {\n          meas[s.field] = meas[s.field] || {};\n          meas[s.field][s.op] = s.as || vgField(s);\n        }\n      }\n    }\n\n    for (const s of t.groupby || []) {\n      dims[s] = true;\n    }\n\n    if ((keys(dims).length + keys(meas).length) === 0) {\n      return null;\n    }\n\n    return new AggregateNode(parent, dims, meas);\n  }\n\n  public merge(other: AggregateNode) {\n    if (!differ(this.dimensions, other.dimensions)) {\n      mergeMeasures(this.measures, other.measures);\n      other.remove();\n    } else {\n      log.debug('different dimensions, cannot merge');\n    }\n  }\n\n  public addDimensions(fields: string[]) {\n    fields.forEach(f => this.dimensions[f] = true);\n  }\n\n  public dependentFields() {\n    const out = {};\n\n    keys(this.dimensions).forEach(f => out[f] = true);\n    keys(this.measures).forEach(m => out[m] = true);\n\n    return out;\n  }\n\n  public producedFields() {\n    const out = {};\n\n    keys(this.measures).forEach(field => {\n      keys(this.measures[field]).forEach(op => {\n        out[`${op}_${field}`] = true;\n      });\n    });\n\n    return out;\n  }\n\n  public assemble(): VgAggregateTransform {\n    const ops: AggregateOp[] = [];\n    const fields: string[] = [];\n    const as: string[] = [];\n\n    for (const field of keys(this.measures)) {\n      for (const op of keys(this.measures[field])) {\n        as.push(this.measures[field][op]);\n        ops.push(op);\n        fields.push(field);\n      }\n    }\n\n    const result: VgAggregateTransform = {\n      type: 'aggregate',\n      groupby: keys(this.dimensions),\n      ops,\n      fields,\n      as\n    };\n\n    return result;\n  }\n}\n","import {AggregateOp} from 'vega';\nimport {COLUMN, ROW, ScaleChannel} from '../../channel';\nimport * as log from '../../log';\nimport {hasDiscreteDomain} from '../../scale';\nimport {isVgRangeStep, VgAggregateTransform, VgData} from '../../vega.schema';\nimport {FacetModel} from '../facet';\nimport {Model} from '../model';\nimport {assembleDomain, getFieldFromDomain} from '../scale/domain';\nimport {DataFlowNode} from './dataflow';\n\ntype ChildIndependentFieldsWithStep = {\n  x?: string,\n  y?: string\n};\n\n/**\n * A node that helps us track what fields we are faceting by.\n */\nexport class FacetNode extends DataFlowNode {\n  private readonly columnFields: string[];\n  private readonly columnName: string;\n\n  private readonly rowFields: string[];\n  private readonly rowName: string;\n\n  private readonly childModel: Model;\n\n  /**\n   * @param model The facet model.\n   * @param name The name that this facet source will have.\n   * @param data The source data for this facet data.\n   */\n  public constructor(parent: DataFlowNode, public readonly model: FacetModel, public readonly name: string, public data: string) {\n    super(parent);\n\n    if (model.facet.column) {\n      this.columnFields = [model.vgField(COLUMN)];\n      this.columnName = model.getName('column_domain');\n      if (model.fieldDef(COLUMN).bin) {\n        this.columnFields.push(model.vgField(COLUMN, {binSuffix: 'end'}));\n      }\n    }\n\n    if (model.facet.row) {\n      this.rowFields = [model.vgField(ROW)];\n      this.rowName = model.getName('row_domain');\n      if (model.fieldDef(ROW).bin) {\n        this.rowFields.push(model.vgField(ROW, {binSuffix: 'end'}));\n      }\n    }\n\n    this.childModel = model.child;\n  }\n\n  get fields() {\n    let fields: string[] = [];\n    if (this.columnFields) {\n      fields = fields.concat(this.columnFields);\n    }\n    if (this.rowFields) {\n      fields = fields.concat(this.rowFields);\n    }\n    return fields;\n  }\n\n  /**\n   * The name to reference this source is its name.\n   */\n  public getSource() {\n    return this.name;\n  }\n\n  private getChildIndependentFieldsWithStep() {\n    const childIndependentFieldsWithStep: ChildIndependentFieldsWithStep = {};\n\n    for (const channel of ['x', 'y'] as ScaleChannel[]) {\n      const childScaleComponent = this.childModel.component.scales[channel];\n      if (childScaleComponent && !childScaleComponent.merged) {\n        const type = childScaleComponent.get('type');\n        const range = childScaleComponent.get('range');\n\n        if (hasDiscreteDomain(type) && isVgRangeStep(range)) {\n          const domain = assembleDomain(this.childModel, channel);\n          const field = getFieldFromDomain(domain);\n          if (field) {\n            childIndependentFieldsWithStep[channel] = field;\n          } else {\n            log.warn('Unknown field for ${channel}.  Cannot calculate view size.');\n          }\n        }\n      }\n    }\n\n    return childIndependentFieldsWithStep;\n  }\n\n  private assembleRowColumnData(channel: 'row' | 'column', crossedDataName: string, childIndependentFieldsWithStep: ChildIndependentFieldsWithStep): VgData {\n    let aggregateChildField: Partial<VgAggregateTransform> = {};\n    const childChannel = channel === 'row' ? 'y' : 'x';\n\n    if (childIndependentFieldsWithStep[childChannel]) {\n      if (crossedDataName) {\n        aggregateChildField = {\n          // If there is a crossed data, calculate max\n          fields: [`distinct_${childIndependentFieldsWithStep[childChannel]}`],\n          ops: ['max'],\n          // Although it is technically a max, just name it distinct so it's easier to refer to it\n          as: [`distinct_${childIndependentFieldsWithStep[childChannel]}`]\n        };\n      } else {\n        aggregateChildField = {\n          // If there is no crossed data, just calculate distinct\n          fields: [childIndependentFieldsWithStep[childChannel]],\n          ops: ['distinct']\n        };\n      }\n    }\n\n    return {\n      name: channel === 'row' ? this.rowName : this.columnName,\n      // Use data from the crossed one if it exist\n      source: crossedDataName || this.data,\n      transform: [{\n        type: 'aggregate',\n        groupby: channel === 'row' ? this.rowFields : this.columnFields,\n        ...aggregateChildField\n      }]\n    };\n  }\n\n  public assemble() {\n    const data: VgData[] = [];\n    let crossedDataName = null;\n    const childIndependentFieldsWithStep = this.getChildIndependentFieldsWithStep();\n\n    if (this.columnName && this.rowName && (childIndependentFieldsWithStep.x || childIndependentFieldsWithStep.y)) {\n      // Need to create a cross dataset to correctly calculate cardinality\n      crossedDataName = `cross_${this.columnName}_${this.rowName}`;\n\n      const fields = [].concat(\n        childIndependentFieldsWithStep.x ? [childIndependentFieldsWithStep.x] : [],\n        childIndependentFieldsWithStep.y ? [childIndependentFieldsWithStep.y] : [],\n      );\n      const ops = fields.map((): AggregateOp => 'distinct');\n\n      data.push({\n        name: crossedDataName,\n        source: this.data,\n        transform: [{\n          type: 'aggregate',\n          groupby: this.columnFields.concat(this.rowFields),\n          fields: fields,\n          ops\n        }]\n      });\n    }\n\n    if (this.columnName) {\n      data.push(this.assembleRowColumnData('column', crossedDataName, childIndependentFieldsWithStep));\n    }\n\n    if (this.rowName) {\n      data.push(this.assembleRowColumnData('row', crossedDataName, childIndependentFieldsWithStep));\n    }\n\n    return data;\n  }\n}\n","import {isScaleChannel} from '../../channel';\nimport {FieldDef, vgField as fieldRef} from '../../fielddef';\nimport {isPathMark} from '../../mark';\nimport {hasContinuousDomain, ScaleType} from '../../scale';\nimport {Dict, keys} from '../../util';\nimport {VgFilterTransform} from '../../vega.schema';\nimport {UnitModel} from '../unit';\nimport {DataFlowNode} from './dataflow';\n\nexport class FilterInvalidNode extends DataFlowNode {\n  public clone() {\n    return new FilterInvalidNode(null, {...this.fieldDefs});\n  }\n\n  constructor(parent: DataFlowNode, private fieldDefs: Dict<FieldDef<string>>) {\n   super(parent);\n  }\n\n  public static make(parent: DataFlowNode, model: UnitModel): FilterInvalidNode {\n    const {config, mark} = model;\n    if (config.invalidValues !== 'filter' ) {\n      return null;\n    }\n\n    const filter = model.reduceFieldDef((aggregator: Dict<FieldDef<string>>, fieldDef, channel) => {\n      const scaleComponent = isScaleChannel(channel) && model.getScaleComponent(channel);\n      if (scaleComponent) {\n        const scaleType = scaleComponent.get('type');\n\n\n        // While discrete domain scales can handle invalid values, continuous scales can't.\n        // Thus, for non-path marks, we have to filter null for scales with continuous domains.\n        // (For path marks, we will use \"defined\" property and skip these values instead.)\n        if (hasContinuousDomain(scaleType) && !fieldDef.aggregate && !isPathMark(mark)) {\n          aggregator[fieldDef.field] = fieldDef;\n        }\n      }\n      return aggregator;\n    }, {} as Dict<FieldDef<string>>);\n\n    if (!keys(filter).length) {\n      return null;\n    }\n\n    return new FilterInvalidNode(parent, filter);\n  }\n\n  get filter() {\n    return this.fieldDefs;\n  }\n\n  // create the VgTransforms for each of the filtered fields\n  public assemble(): VgFilterTransform {\n\n    const filters = keys(this.filter).reduce((vegaFilters, field) => {\n      const fieldDef = this.fieldDefs[field];\n      const ref = fieldRef(fieldDef, {expr: 'datum'});\n\n      if (fieldDef !== null) {\n        vegaFilters.push(`${ref} !== null`);\n        vegaFilters.push(`!isNaN(${ref})`);\n      }\n      return vegaFilters;\n    }, []);\n\n    return filters.length > 0 ?\n    {\n        type: 'filter',\n        expr: filters.join(' && ')\n    } : null;\n  }\n}\n","import {hasIntersection, keys} from '../../util';\nimport {DataFlowNode, OutputNode} from './dataflow';\nimport {FacetNode} from './facet';\nimport {ParseNode} from './formatparse';\nimport {SourceNode} from './source';\nimport {TimeUnitNode} from './timeunit';\n\n\n/**\n * Start optimization path at the leaves. Useful for merging up or removing things.\n *\n * If the callback returns true, the recursion continues.\n */\nexport function iterateFromLeaves(f: (node: DataFlowNode) => boolean) {\n  function optimizeNextFromLeaves(node: DataFlowNode) {\n    if (node instanceof SourceNode) {\n      return;\n    }\n\n    const next = node.parent;\n    if (f(node)) {\n      optimizeNextFromLeaves(next);\n    }\n  }\n\n  return optimizeNextFromLeaves;\n}\n\n/**\n * Move parse nodes up to forks.\n */\nexport function moveParseUp(node: DataFlowNode) {\n  const parent = node.parent;\n\n  // move parse up by merging or swapping\n  if (node instanceof ParseNode) {\n    if (parent instanceof SourceNode) {\n      return false;\n    }\n\n    if (parent.numChildren() > 1) {\n      // don't move parse further up but continue with parent.\n      return true;\n    }\n\n    if (parent instanceof ParseNode) {\n      parent.merge(node);\n    } else {\n      // don't swap with nodes that produce something that the parse node depends on (e.g. lookup)\n      if (hasIntersection(parent.producedFields(), node.dependentFields())) {\n        return true;\n      }\n\n      node.swapWithParent();\n    }\n  }\n\n  return true;\n}\n\n/**\n * Repeatedly remove leaf nodes that are not output or facet nodes.\n * The reason is that we don't need subtrees that don't have any output nodes.\n * Facet nodes are needed for the row or column domains.\n */\nexport function removeUnusedSubtrees(node: DataFlowNode) {\n  if (node instanceof OutputNode || node.numChildren() > 0 || node instanceof FacetNode) {\n    // no need to continue with parent because it is output node or will have children (there was a fork)\n    return false;\n  } else {\n    node.remove();\n  }\n  return true;\n}\n\n/**\n * Removes duplicate time unit nodes (as determined by the name of the\n * output field) that may be generated due to selections projected over\n * time units.\n */\nexport function removeDuplicateTimeUnits(leaf: DataFlowNode) {\n  let fields = {};\n  return iterateFromLeaves((node: DataFlowNode) => {\n    if (node instanceof TimeUnitNode) {\n      const pfields = node.producedFields();\n      const dupe = keys(pfields).every((k) => !!fields[k]);\n\n      if (dupe) {\n        node.remove();\n      } else {\n        fields = {...fields, ...pfields};\n      }\n    }\n\n    return true;\n  })(leaf);\n}\n","import {toSet} from 'vega-util';\nimport {isCountingAggregateOp} from '../../aggregate';\nimport {isNumberFieldDef, isTimeFieldDef} from '../../fielddef';\nimport * as log from '../../log';\nimport {forEachLeave} from '../../logical';\nimport {isFieldPredicate} from '../../predicate';\nimport {isCalculate, isFilter, Transform} from '../../transform';\nimport {accessPath, Dict, duplicate, keys, StringSet} from '../../util';\nimport {VgFormulaTransform} from '../../vega.schema';\nimport {isFacetModel, isUnitModel, Model} from '../model';\nimport {DataFlowNode} from './dataflow';\n\n\nfunction parseExpression(field: string, parse: string): string {\n  const f = `datum${accessPath(field)}`;\n  if (parse === 'number') {\n    return `toNumber(${f})`;\n  } else if (parse === 'boolean') {\n    return `toBoolean(${f})`;\n  } else if (parse === 'string') {\n    return `toString(${f})`;\n  } else if (parse === 'date') {\n    return `toDate(${f})`;\n  } else if (parse.indexOf('date:') === 0) {\n    const specifier = parse.slice(5, parse.length);\n    return `timeParse(${f},${specifier})`;\n  } else if (parse.indexOf('utc:') === 0) {\n    const specifier = parse.slice(4, parse.length);\n    return `utcParse(${f},${specifier})`;\n  } else {\n    log.warn(log.message.unrecognizedParse(parse));\n    return null;\n  }\n}\n\nexport class ParseNode extends DataFlowNode {\n  private _parse: Dict<string> = {};\n\n  public clone() {\n    return new ParseNode(null, duplicate(this.parse));\n  }\n\n  constructor(parent: DataFlowNode, parse: Dict<string>) {\n    super(parent);\n\n    this._parse = parse;\n  }\n\n  public static make(parent: DataFlowNode, model: Model) {\n    const parse = {};\n    const calcFieldMap = {};\n\n    (model.transforms || []).forEach((transform: Transform) => {\n      if (isCalculate(transform)) {\n        calcFieldMap[transform.as] = true;\n      } else if (isFilter(transform)) {\n        forEachLeave(transform.filter, (filter) => {\n          if (isFieldPredicate(filter)) {\n            if (filter.timeUnit) {\n              parse[filter.field] = 'date';\n            }\n          }\n        });\n      }\n    }, {});\n\n    if (isUnitModel(model) || isFacetModel(model)) {\n      // Parse encoded fields\n      model.forEachFieldDef(fieldDef => {\n        if (isTimeFieldDef(fieldDef)) {\n          parse[fieldDef.field] = 'date';\n        } else if (isNumberFieldDef(fieldDef)) {\n          if (calcFieldMap[fieldDef.field] || isCountingAggregateOp(fieldDef.aggregate)) {\n            return;\n          }\n          parse[fieldDef.field] = 'number';\n        }\n      });\n    }\n\n    // Custom parse should override inferred parse\n    const data = model.data;\n    if (data && data.format && data.format.parse) {\n      const p = data.format.parse;\n      keys(p).forEach(field => {\n        parse[field] = p[field];\n      });\n    }\n\n    // We should not parse what has already been parsed in a parent\n    const modelParse = model.component.data.ancestorParse;\n    keys(modelParse).forEach(field => {\n      if (parse[field] !== modelParse[field]) {\n        log.warn(log.message.differentParse(field, parse[field], modelParse[field]));\n      } else {\n        delete parse[field];\n      }\n    });\n\n    if (keys(parse).length === 0) {\n      return null;\n    }\n\n    return new ParseNode(parent, parse);\n  }\n\n  public get parse() {\n    return this._parse;\n  }\n\n  public merge(other: ParseNode) {\n    this._parse = {...this._parse, ...other.parse};\n    other.remove();\n  }\n  public assembleFormatParse() {\n    return this._parse;\n  }\n\n  // format parse depends and produces all fields in its parse\n  public producedFields(): StringSet {\n    return toSet(keys(this.parse));\n  }\n\n  public dependentFields(): StringSet {\n    return toSet(keys(this.parse));\n  }\n\n  public assembleTransforms(): VgFormulaTransform[] {\n    return keys(this._parse).map(field => {\n      const expr = parseExpression(field, this._parse[field]);\n      if (!expr) {\n        return null;\n      }\n\n      const formula: VgFormulaTransform = {\n        type: 'formula',\n        expr,\n        as: field\n      };\n      return formula;\n    }).filter(t => t !== null);\n  }\n}\n","import {Data, DataFormatType, isInlineData, isNamedData, isUrlData} from '../../data';\nimport {contains, hash} from '../../util';\nimport {VgData} from '../../vega.schema';\nimport {DataFlowNode} from './dataflow';\n\nexport class SourceNode extends DataFlowNode {\n  private _data: Partial<VgData>;\n\n  private _name: string;\n\n  private _hash: string | number;\n\n  constructor(data: Data) {\n    super(null);  // source cannot have parent\n\n    data = data || {name: 'source'};\n\n    if (isInlineData(data)) {\n      this._data = {values: data.values};\n    } else if (isUrlData(data)) {\n      this._data = {url: data.url};\n\n      if (!data.format) {\n        data.format = {};\n      }\n\n      if (!data.format || !data.format.type) {\n        // Extract extension from URL using snippet from\n        // http://stackoverflow.com/questions/680929/how-to-extract-extension-from-filename-string-in-javascript\n        let defaultExtension = /(?:\\.([^.]+))?$/.exec(data.url)[1];\n        if (!contains(['json', 'csv', 'tsv', 'topojson'], defaultExtension)) {\n          defaultExtension = 'json';\n        }\n\n        // defaultExtension has type string but we ensure that it is DataFormatType above\n        data.format.type = defaultExtension as DataFormatType;\n      }\n    } else if (isNamedData(data)) {\n      this._name = data.name;\n      this._data = {};\n    }\n\n    if (!isNamedData(data) && data.format) {\n      const {parse = null, ...format} = data.format;\n      this._data.format = format;\n    }\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  public hasName(): boolean {\n    return !!this._name;\n  }\n\n  get dataName() {\n    return this._name;\n  }\n\n  set dataName(name: string) {\n    this._name = name;\n  }\n\n  set parent(parent: DataFlowNode) {\n    throw new Error('Source nodes have to be roots.');\n  }\n\n  public remove() {\n    throw new Error('Source nodes are roots and cannot be removed.');\n  }\n\n  /**\n   * Return a unique identifier for this data source.\n   */\n  public hash() {\n    if (isInlineData(this._data)) {\n      if (!this._hash) {\n        // Hashing can be expensive for large inline datasets.\n        this._hash = hash(this._data);\n      }\n      return this._hash;\n    } else if (isUrlData(this._data)) {\n      return hash([this._data.url, this._data.format]);\n    } else {\n      return this._name;\n    }\n  }\n\n  public assemble(): VgData {\n    return {\n      name: this._name,\n      ...this._data,\n      transform: []\n    };\n  }\n}\n","import {vgField} from '../../fielddef';\nimport {fieldExpr, TimeUnit} from '../../timeunit';\nimport {TimeUnitTransform} from '../../transform';\nimport {Dict, duplicate, keys, vals} from '../../util';\nimport {VgFormulaTransform} from '../../vega.schema';\nimport {ModelWithField} from '../model';\nimport {DataFlowNode} from './dataflow';\n\n\nexport interface TimeUnitComponent {\n  as: string;\n  timeUnit: TimeUnit;\n  field: string;\n}\n\nexport class TimeUnitNode extends DataFlowNode {\n  public clone() {\n    return new TimeUnitNode(null, duplicate(this.formula));\n  }\n\n  constructor(parent: DataFlowNode, private formula: Dict<TimeUnitComponent>) {\n    super(parent);\n  }\n\n  public static makeFromEncoding(parent: DataFlowNode, model: ModelWithField) {\n    const formula = model.reduceFieldDef((timeUnitComponent: TimeUnitComponent, fieldDef) => {\n      if (fieldDef.timeUnit) {\n        const f = vgField(fieldDef);\n        timeUnitComponent[f] = {\n          as: f,\n          timeUnit: fieldDef.timeUnit,\n          field: fieldDef.field\n        };\n      }\n      return timeUnitComponent;\n    }, {} as Dict<TimeUnitComponent>);\n\n    if (keys(formula).length === 0) {\n      return null;\n    }\n\n    return new TimeUnitNode(parent, formula);\n  }\n\n  public static makeFromTransform(parent: DataFlowNode, t: TimeUnitTransform) {\n    return new TimeUnitNode(parent, {\n      [t.field]: {\n        as: t.as,\n        timeUnit: t.timeUnit,\n        field: t.field\n      }\n    });\n  }\n\n  public merge(other: TimeUnitNode) {\n    this.formula = {...this.formula, ...other.formula};\n    other.remove();\n  }\n\n  public producedFields() {\n    const out = {};\n\n    vals(this.formula).forEach(f => {\n      out[f.as] = true;\n    });\n\n    return out;\n  }\n\n  public dependentFields() {\n    const out = {};\n\n    vals(this.formula).forEach(f => {\n      out[f.field] = true;\n    });\n\n    return out;\n  }\n\n  public assemble() {\n    return vals(this.formula).map(c => {\n      return {\n        type: 'formula',\n        as: c.as,\n        expr: fieldExpr(c.timeUnit, c.field)\n      } as VgFormulaTransform;\n    });\n  }\n}\n","import {isArray} from 'vega-util';\nimport {FieldDef, vgField} from '../../fielddef';\nimport {StackOffset} from '../../stack';\nimport {duplicate} from '../../util';\nimport {VgSort, VgTransform} from '../../vega.schema';\nimport {sortParams} from '../common';\nimport {UnitModel} from './../unit';\nimport {DataFlowNode} from './dataflow';\n\n\nfunction getStackByFields(model: UnitModel): string[] {\n  return model.stack.stackBy.reduce((fields, by) => {\n    const fieldDef = by.fieldDef;\n\n    const _field = vgField(fieldDef);\n    if (_field) {\n      fields.push(_field);\n    }\n    return fields;\n  }, [] as string[]);\n}\n\nexport interface StackComponent {\n  /**\n   * Faceted field.\n   */\n  facetby: string[];\n\n  dimensionFieldDef: FieldDef<string>;\n\n  /**\n   * Stack measure's field\n   */\n  field: string;\n\n  /**\n   * Level of detail fields for each level in the stacked charts such as color or detail.\n   */\n  stackby: string[];\n\n  /**\n   * Field that determines order of levels in the stacked charts.\n   */\n  sort: VgSort;\n\n  /** Mode for stacking marks. */\n  offset: StackOffset;\n\n  /**\n   * Whether to impute the data before stacking.\n   */\n  impute: boolean;\n}\n\nexport class StackNode extends DataFlowNode {\n  private _stack: StackComponent;\n\n  public clone() {\n    return new StackNode(null, duplicate(this._stack));\n  }\n\n  constructor(parent: DataFlowNode, stack: StackComponent) {\n    super(parent);\n\n    this._stack = stack;\n  }\n\n  public static make(parent: DataFlowNode, model: UnitModel) {\n\n    const stackProperties = model.stack;\n\n    if (!stackProperties) {\n      return null;\n    }\n\n    let dimensionFieldDef: FieldDef<string>;\n    if (stackProperties.groupbyChannel) {\n      dimensionFieldDef = model.fieldDef(stackProperties.groupbyChannel);\n    }\n\n    const stackby = getStackByFields(model);\n    const orderDef = model.encoding.order;\n\n    let sort: VgSort;\n    if (orderDef) {\n      sort = sortParams(orderDef);\n    } else {\n      // default = descending by stackFields\n      // FIXME is the default here correct for binned fields?\n      sort = stackby.reduce((s, field) => {\n        s.field.push(field);\n        s.order.push('descending');\n        return s;\n      }, {field:[], order: []});\n    }\n\n    return new StackNode(parent, {\n      dimensionFieldDef,\n      field: model.vgField(stackProperties.fieldChannel),\n      facetby: [],\n      stackby,\n      sort,\n      offset: stackProperties.offset,\n      impute: stackProperties.impute,\n    });\n  }\n\n  get stack(): StackComponent {\n    return this._stack;\n  }\n\n  public addDimensions(fields: string[]) {\n    this._stack.facetby = this._stack.facetby.concat(fields);\n  }\n\n  public dependentFields() {\n    const out = {};\n\n    out[this._stack.field] = true;\n\n    this.getGroupbyFields().forEach(f => out[f] = true);\n    this._stack.facetby.forEach(f => out[f] = true);\n    const field = this._stack.sort.field;\n    isArray(field) ? field.forEach(f => out[f] = true) : out[field] = true;\n\n    return out;\n  }\n\n  public producedFields() {\n    const out = {};\n\n    out[this._stack.field + '_start'] = true;\n    out[this._stack.field + '_end'] = true;\n\n    return out;\n  }\n\n  private getGroupbyFields() {\n    const {dimensionFieldDef, impute} = this._stack;\n    if (dimensionFieldDef) {\n      if (dimensionFieldDef.bin) {\n        if (impute) {\n          // For binned group by field with impute, we calculate bin_mid\n          // as we cannot impute two fields simultaneously\n          return [vgField(dimensionFieldDef, {binSuffix: 'mid'})];\n        }\n        return [\n          // For binned group by field without impute, we need both bin (start) and bin_end\n          vgField(dimensionFieldDef, {}),\n          vgField(dimensionFieldDef, {binSuffix: 'end'})\n        ];\n      }\n      return [vgField(dimensionFieldDef)];\n    }\n    return [];\n  }\n\n  public assemble(): VgTransform[] {\n    const transform: VgTransform[] = [];\n\n    const {facetby, field: stackField, dimensionFieldDef, impute, offset, sort, stackby} = this._stack;\n\n    // Impute\n    if (impute && dimensionFieldDef) {\n      const dimensionField = dimensionFieldDef ? vgField(dimensionFieldDef, {binSuffix: 'mid'}): undefined;\n\n      if (dimensionFieldDef.bin) {\n        // As we can only impute one field at a time, we need to calculate\n        // mid point for a binned field\n        transform.push({\n          type: 'formula',\n          expr: '(' +\n            vgField(dimensionFieldDef, {expr: 'datum'}) +\n            '+' +\n            vgField(dimensionFieldDef, {expr: 'datum', binSuffix: 'end'}) +\n            ')/2',\n          as: dimensionField\n        });\n      }\n\n      transform.push({\n        type: 'impute',\n        field: stackField,\n        groupby: stackby,\n        key: dimensionField,\n        method: 'value',\n        value: 0\n      });\n    }\n\n    // Stack\n    transform.push({\n      type: 'stack',\n      groupby: this.getGroupbyFields().concat(facetby),\n      field: stackField,\n      sort,\n      as: [\n        stackField + '_start',\n        stackField + '_end'\n      ],\n      offset\n    });\n\n    return transform;\n  }\n}\n","import {SCALE_CHANNELS, ScaleChannel, SHAPE, X, Y} from '../../channel';\nimport {FieldDef, getFieldDef, hasConditionalFieldDef, isFieldDef} from '../../fielddef';\nimport {GEOSHAPE} from '../../mark';\nimport {\n  NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES,\n  Scale,\n  scaleCompatible,\n  ScaleType,\n  scaleTypePrecedence,\n} from '../../scale';\nimport {GEOJSON} from '../../type';\nimport {keys} from '../../util';\nimport {VgScale} from '../../vega.schema';\nimport {isUnitModel, Model} from '../model';\nimport {defaultScaleResolve} from '../resolve';\nimport {Explicit, mergeValuesWithExplicit, tieBreakByComparing} from '../split';\nimport {UnitModel} from '../unit';\nimport {ScaleComponent, ScaleComponentIndex} from './component';\nimport {parseScaleDomain} from './domain';\nimport {parseScaleProperty} from './properties';\nimport {parseScaleRange} from './range';\nimport {scaleType} from './type';\n\nexport function parseScale(model: Model) {\n  parseScaleCore(model);\n  parseScaleDomain(model);\n  for (const prop of NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES) {\n    parseScaleProperty(model, prop);\n  }\n  // range depends on zero\n  parseScaleRange(model);\n}\n\nexport function parseScaleCore(model: Model) {\n  if (isUnitModel(model)) {\n    model.component.scales = parseUnitScaleCore(model);\n  } else {\n    model.component.scales = parseNonUnitScaleCore(model);\n  }\n}\n\n/**\n * Parse scales for all channels of a model.\n */\nfunction parseUnitScaleCore(model: UnitModel): ScaleComponentIndex {\n  const {encoding, config, mark} = model;\n\n  return SCALE_CHANNELS.reduce((scaleComponents: ScaleComponentIndex, channel: ScaleChannel) => {\n    let fieldDef: FieldDef<string>;\n    let specifiedScale: Scale | null = undefined;\n\n    const channelDef = encoding[channel];\n\n    // Don't generate scale for shape of geoshape\n    if (\n      isFieldDef(channelDef) && mark === GEOSHAPE &&\n      channel === SHAPE && channelDef.type === GEOJSON\n    ) {\n      return scaleComponents;\n    }\n\n    if (isFieldDef(channelDef)) {\n      fieldDef = channelDef;\n      specifiedScale = channelDef.scale;\n    } else if (hasConditionalFieldDef(channelDef)) {\n      fieldDef = channelDef.condition;\n      specifiedScale = channelDef.condition['scale']; // We use ['scale'] since we know that channel here has scale for sure\n    } else if (channel === X) {\n      fieldDef = getFieldDef(encoding.x2);\n    } else if (channel === Y) {\n      fieldDef = getFieldDef(encoding.y2);\n    }\n\n    if (fieldDef && specifiedScale !== null && specifiedScale !== false) {\n      specifiedScale = specifiedScale || {};\n      const specifiedScaleType = specifiedScale.type;\n      const sType = scaleType(specifiedScale.type, channel, fieldDef, mark, config.scale);\n      scaleComponents[channel] = new ScaleComponent(\n        model.scaleName(channel + '', true),\n        {value: sType, explicit: specifiedScaleType === sType}\n      );\n    }\n    return scaleComponents;\n  }, {});\n}\n\nconst scaleTypeTieBreaker = tieBreakByComparing(\n  (st1: ScaleType, st2: ScaleType) => (scaleTypePrecedence(st1) - scaleTypePrecedence(st2))\n);\n\n\nfunction parseNonUnitScaleCore(model: Model) {\n  const scaleComponents: ScaleComponentIndex = model.component.scales = {};\n\n  const scaleTypeWithExplicitIndex: {\n    // Using Mapped Type to declare type (https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types)\n    [k in ScaleChannel]?: Explicit<ScaleType>\n  } = {};\n  const resolve = model.component.resolve;\n\n  // Parse each child scale and determine if a particular channel can be merged.\n  for (const child of model.children) {\n    parseScaleCore(child);\n\n    // Instead of always merging right away -- check if it is compatible to merge first!\n    keys(child.component.scales).forEach((channel: ScaleChannel) => {\n      // if resolve is undefined, set default first\n      resolve.scale[channel] = resolve.scale[channel] || defaultScaleResolve(channel, model);\n\n      if (resolve.scale[channel] === 'shared') {\n        const explicitScaleType = scaleTypeWithExplicitIndex[channel];\n        const childScaleType = child.component.scales[channel].getWithExplicit('type');\n\n        if (explicitScaleType) {\n          if (scaleCompatible(explicitScaleType.value, childScaleType.value)) {\n            // merge scale component if type are compatible\n            scaleTypeWithExplicitIndex[channel] = mergeValuesWithExplicit<VgScale, ScaleType>(\n              explicitScaleType, childScaleType, 'type', 'scale', scaleTypeTieBreaker\n            );\n          } else {\n            // Otherwise, update conflicting channel to be independent\n            resolve.scale[channel] = 'independent';\n            // Remove from the index so they don't get merged\n            delete scaleTypeWithExplicitIndex[channel];\n          }\n        } else {\n          scaleTypeWithExplicitIndex[channel] = childScaleType;\n        }\n      }\n    });\n  }\n\n  // Merge each channel listed in the index\n  keys(scaleTypeWithExplicitIndex).forEach((channel: ScaleChannel) => {\n    // Create new merged scale component\n    const name = model.scaleName(channel, true);\n    const typeWithExplicit = scaleTypeWithExplicitIndex[channel];\n    scaleComponents[channel] = new ScaleComponent(name, typeWithExplicit);\n\n    // rename each child and mark them as merged\n    for (const child of model.children) {\n      const childScale = child.component.scales[channel];\n      if (childScale) {\n        child.renameScale(childScale.get('name'), name);\n        childScale.merged = true;\n      }\n    }\n  });\n\n  return scaleComponents;\n}\n","import {ScaleChannel} from '../../channel';\nimport {Scale, ScaleType} from '../../scale';\nimport {Omit} from '../../util';\nimport {VgNonUnionDomain, VgScale} from '../../vega.schema';\nimport {Explicit, Split} from '../split';\n\n/**\n * All VgDomain property except domain.\n * (We exclude domain as we have a special \"domains\" array that allow us merge them all at once in assemble.)\n */\n// TODO: also exclude domainRaw and property implement the right scaleComponent for selection domain\nexport type ScaleComponentProps = Omit<VgScale, 'domain'>;\n\nexport class ScaleComponent extends Split<ScaleComponentProps> {\n  public merged = false;\n\n  public domains: VgNonUnionDomain[] = [];\n\n  constructor(name: string, typeWithExplicit: Explicit<ScaleType>) {\n    super(\n      {},     // no initial explicit property\n      {name}  // name as initial implicit property\n    );\n    this.setWithExplicit('type', typeWithExplicit);\n  }\n}\n\n// Using Mapped Type to declare type (https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types)\nexport type ScaleComponentIndex = {[P in ScaleChannel]?: ScaleComponent};\n\nexport type ScaleIndex = {[P in ScaleChannel]?: Scale};\n","import {Channel, ScaleChannel, X, Y} from '../../channel';\nimport {Config} from '../../config';\nimport {FieldDef} from '../../fielddef';\nimport * as log from '../../log';\nimport {BarConfig, MarkDef} from '../../mark';\nimport {channelScalePropertyIncompatability, Domain, hasContinuousDomain, isContinuousToContinuous, NiceTime, Scale, ScaleConfig, ScaleType, scaleTypeSupportProperty} from '../../scale';\nimport {SortField, SortOrder} from '../../sort';\nimport {contains, keys} from '../../util';\nimport * as util from '../../util';\nimport {VgScale} from '../../vega.schema';\nimport {isUnitModel, Model} from '../model';\nimport {Explicit, mergeValuesWithExplicit, tieBreakByComparing} from '../split';\nimport {UnitModel} from '../unit';\nimport {ScaleComponent, ScaleComponentIndex, ScaleComponentProps} from './component';\nimport {parseScaleRange} from './range';\n\nexport function parseScaleProperty(model: Model, property: keyof (Scale | ScaleComponentProps)) {\n  if (isUnitModel(model)) {\n    parseUnitScaleProperty(model, property);\n  } else {\n    parseNonUnitScaleProperty(model, property);\n  }\n}\n\nfunction parseUnitScaleProperty(model: UnitModel, property: keyof (Scale | ScaleComponentProps)) {\n  const localScaleComponents: ScaleComponentIndex = model.component.scales;\n\n  keys(localScaleComponents).forEach((channel: ScaleChannel) => {\n    const specifiedScale = model.specifiedScales[channel];\n    const localScaleCmpt = localScaleComponents[channel];\n    const mergedScaleCmpt = model.getScaleComponent(channel);\n    const fieldDef = model.fieldDef(channel);\n    const sort = model.sort(channel);\n    const config = model.config;\n\n    const specifiedValue = specifiedScale[property];\n    const sType = mergedScaleCmpt.get('type');\n\n    const supportedByScaleType = scaleTypeSupportProperty(sType, property);\n    const channelIncompatability = channelScalePropertyIncompatability(channel, property);\n\n    if (specifiedValue !== undefined) {\n      // If there is a specified value, check if it is compatible with scale type and channel\n      if (!supportedByScaleType) {\n        log.warn(log.message.scalePropertyNotWorkWithScaleType(sType, property, channel));\n      } else if (channelIncompatability) { // channel\n        log.warn(channelIncompatability);\n      }\n    }\n    if (supportedByScaleType && channelIncompatability === undefined) {\n      if (specifiedValue !== undefined) {\n        // copyKeyFromObject ensure type safety\n        localScaleCmpt.copyKeyFromObject(property, specifiedScale);\n      } else {\n        const value = getDefaultValue(\n          property, channel, fieldDef, sort,\n          mergedScaleCmpt.get('type'),\n          mergedScaleCmpt.get('padding'),\n          mergedScaleCmpt.get('paddingInner'),\n          specifiedScale.domain,\n          model.markDef, config\n        );\n        if (value !== undefined) {\n          localScaleCmpt.set(property, value, false);\n        }\n      }\n    }\n  });\n}\n\n// Note: This method is used in Voyager.\nexport function getDefaultValue(\n  property: keyof Scale, channel: Channel, fieldDef: FieldDef<string>, sort: SortOrder | SortField<string> | string[],\n  scaleType: ScaleType, scalePadding: number, scalePaddingInner: number,\n  specifiedDomain: Scale['domain'], markDef: MarkDef, config: Config) {\n  const scaleConfig = config.scale;\n\n  // If we have default rule-base, determine default value first\n  switch (property) {\n    case 'nice':\n      return nice(scaleType, channel, fieldDef);\n    case 'padding':\n      return padding(channel, scaleType, scaleConfig, fieldDef, markDef, config.bar);\n    case 'paddingInner':\n      return paddingInner(scalePadding, channel, scaleConfig);\n    case 'paddingOuter':\n      return paddingOuter(scalePadding, channel, scaleType, scalePaddingInner, scaleConfig);\n    case 'reverse':\n      return reverse(scaleType, sort);\n    case 'zero':\n      return zero(channel, fieldDef, specifiedDomain, markDef);\n  }\n  // Otherwise, use scale config\n  return scaleConfig[property];\n}\n\nexport function parseNonUnitScaleProperty(model: Model, property: keyof (Scale | ScaleComponentProps)) {\n  const localScaleComponents: ScaleComponentIndex = model.component.scales;\n\n  for (const child of model.children) {\n    if (property === 'range') {\n      parseScaleRange(child);\n    } else {\n      parseScaleProperty(child, property);\n    }\n  }\n\n  keys(localScaleComponents).forEach((channel: ScaleChannel) => {\n    let valueWithExplicit: Explicit<any>;\n\n    for (const child of model.children) {\n      const childComponent = child.component.scales[channel];\n      if (childComponent) {\n        const childValueWithExplicit = childComponent.getWithExplicit(property);\n        valueWithExplicit = mergeValuesWithExplicit<VgScale, any>(\n          valueWithExplicit, childValueWithExplicit,\n          property,\n          'scale',\n          tieBreakByComparing<VgScale, any>((v1, v2) => {\n            switch (property) {\n              case 'range':\n                // For range step, prefer larger step\n                if (v1.step && v2.step) {\n                  return v1.step - v2.step;\n                }\n                return 0;\n              // TODO: precedence rule for other properties\n            }\n            return 0;\n          })\n        );\n      }\n    }\n    localScaleComponents[channel].setWithExplicit(property, valueWithExplicit);\n  });\n}\n\nexport function nice(scaleType: ScaleType, channel: Channel, fieldDef: FieldDef<string>): boolean | NiceTime {\n  if (fieldDef.bin || util.contains([ScaleType.TIME, ScaleType.UTC], scaleType)) {\n    return undefined;\n  }\n  return util.contains([X, Y], channel); // return true for quantitative X/Y unless binned\n}\n\nexport function padding(channel: Channel, scaleType: ScaleType, scaleConfig: ScaleConfig, fieldDef: FieldDef<string>, markDef: MarkDef, barConfig: BarConfig) {\n  if (util.contains([X, Y], channel)) {\n    if (isContinuousToContinuous(scaleType)) {\n      if (scaleConfig.continuousPadding !== undefined) {\n        return scaleConfig.continuousPadding;\n      }\n\n      const {type, orient} = markDef;\n      if (type === 'bar' && !fieldDef.bin) {\n        if (\n          (orient === 'vertical' && channel === 'x') ||\n          (orient === 'horizontal' && channel === 'y')\n        ) {\n          return barConfig.continuousBandSize;\n        }\n      }\n    }\n\n    if (scaleType === ScaleType.POINT) {\n      return scaleConfig.pointPadding;\n    }\n  }\n  return undefined;\n}\n\nexport function paddingInner(paddingValue: number, channel: Channel, scaleConfig: ScaleConfig) {\n  if (paddingValue !== undefined) {\n    // If user has already manually specified \"padding\", no need to add default paddingInner.\n    return undefined;\n  }\n\n  if (util.contains([X, Y], channel)) {\n    // Padding is only set for X and Y by default.\n    // Basically it doesn't make sense to add padding for color and size.\n\n    // paddingOuter would only be called if it's a band scale, just return the default for bandScale.\n    return scaleConfig.bandPaddingInner;\n  }\n  return undefined;\n}\n\nexport function paddingOuter(paddingValue: number, channel: Channel, scaleType: ScaleType, paddingInnerValue: number, scaleConfig: ScaleConfig) {\n  if (paddingValue !== undefined) {\n    // If user has already manually specified \"padding\", no need to add default paddingOuter.\n    return undefined;\n  }\n\n  if (util.contains([X, Y], channel)) {\n    // Padding is only set for X and Y by default.\n    // Basically it doesn't make sense to add padding for color and size.\n    if (scaleType === ScaleType.BAND) {\n      if (scaleConfig.bandPaddingOuter !== undefined) {\n        return scaleConfig.bandPaddingOuter;\n      }\n      /* By default, paddingOuter is paddingInner / 2. The reason is that\n          size (width/height) = step * (cardinality - paddingInner + 2 * paddingOuter).\n          and we want the width/height to be integer by default.\n          Note that step (by default) and cardinality are integers.) */\n      return paddingInnerValue / 2;\n    }\n  }\n  return undefined;\n}\n\nexport function reverse(scaleType: ScaleType, sort: SortOrder | SortField<string> | string[]) {\n  if (hasContinuousDomain(scaleType) && sort === 'descending') {\n    // For continuous domain scales, Vega does not support domain sort.\n    // Thus, we reverse range instead if sort is descending\n    return true;\n  }\n  return undefined;\n}\n\nexport function zero(channel: Channel, fieldDef: FieldDef<string>, specifiedScale: Domain, markDef: MarkDef) {\n  // By default, return true only for the following cases:\n\n  // 1) using quantitative field with size\n  // While this can be either ratio or interval fields, our assumption is that\n  // ratio are more common.\n  if (channel === 'size' && fieldDef.type === 'quantitative') {\n    return true;\n  }\n\n  // 2) non-binned, quantitative x-scale or y-scale if no custom domain is provided.\n  // (For binning, we should not include zero by default because binning are calculated without zero.\n  // Similar, if users explicitly provide a domain range, we should not augment zero as that will be unexpected.)\n  const hasCustomDomain = !!specifiedScale && specifiedScale !== 'unaggregated';\n  if (!hasCustomDomain && !fieldDef.bin && util.contains([X, Y], channel)) {\n    const {orient, type} = markDef;\n    if (contains(['bar', 'area', 'line', 'trail'], type)) {\n      if (\n        (orient === 'horizontal' && channel === 'y') ||\n        (orient === 'vertical' && channel === 'x')\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n  return false;\n}\n","import {isNumber} from 'vega-util';\n\nimport {Channel, COLOR, FILL, OPACITY, SCALE_CHANNELS, ScaleChannel, SHAPE, SIZE, STROKE, X, Y} from '../../channel';\nimport {Config} from '../../config';\nimport * as log from '../../log';\nimport {Mark} from '../../mark';\nimport {\n  channelScalePropertyIncompatability,\n  isExtendedScheme,\n  Range,\n  Scale,\n  ScaleConfig,\n  ScaleType,\n  scaleTypeSupportProperty,\n  Scheme,\n} from '../../scale';\nimport {hasContinuousDomain} from '../../scale';\nimport {Type} from '../../type';\nimport * as util from '../../util';\nimport {isVgRangeStep, VgRange, VgScheme} from '../../vega.schema';\nimport {isUnitModel, Model} from '../model';\nimport {Explicit, makeExplicit, makeImplicit} from '../split';\nimport {UnitModel} from '../unit';\nimport {ScaleComponentIndex} from './component';\nimport {parseNonUnitScaleProperty} from './properties';\n\n\nexport type RangeMixins = {range: Range} | {rangeStep: number} | {scheme: Scheme};\n\nexport const RANGE_PROPERTIES: (keyof Scale)[] = ['range', 'rangeStep', 'scheme'];\n\n\nexport function parseScaleRange(model: Model) {\n  if (isUnitModel(model)) {\n    parseUnitScaleRange(model);\n  } else {\n    parseNonUnitScaleProperty(model, 'range');\n  }\n}\n\nfunction parseUnitScaleRange(model: UnitModel) {\n  const localScaleComponents: ScaleComponentIndex = model.component.scales;\n\n  // use SCALE_CHANNELS instead of scales[channel] to ensure that x, y come first!\n  SCALE_CHANNELS.forEach((channel: ScaleChannel) => {\n    const localScaleCmpt = localScaleComponents[channel];\n    if (!localScaleCmpt) {\n      return;\n    }\n    const mergedScaleCmpt = model.getScaleComponent(channel);\n\n\n    const specifiedScale = model.specifiedScales[channel];\n    const fieldDef = model.fieldDef(channel);\n\n    // Read if there is a specified width/height\n    const sizeType = channel === 'x' ? 'width' : channel === 'y' ? 'height' : undefined;\n    let sizeSpecified = sizeType ? !!model.component.layoutSize.get(sizeType) : undefined;\n\n    const scaleType = mergedScaleCmpt.get('type');\n\n    // if autosize is fit, size cannot be data driven\n    const rangeStep = util.contains(['point', 'band'], scaleType) || !!specifiedScale.rangeStep;\n    if (sizeType && model.fit && !sizeSpecified && rangeStep) {\n      log.warn(log.message.CANNOT_FIX_RANGE_STEP_WITH_FIT);\n      sizeSpecified = true;\n    }\n\n    const xyRangeSteps = getXYRangeStep(model);\n\n    const rangeWithExplicit = parseRangeForChannel(\n      channel, scaleType, fieldDef.type, specifiedScale, model.config,\n      localScaleCmpt.get('zero'), model.mark, sizeSpecified, model.getName(sizeType), xyRangeSteps\n    );\n\n    localScaleCmpt.setWithExplicit('range', rangeWithExplicit);\n  });\n}\n\nfunction getXYRangeStep(model: UnitModel) {\n  const xyRangeSteps: number[] = [];\n\n  const xScale = model.getScaleComponent('x');\n  const xRange = xScale && xScale.get('range');\n  if (xRange && isVgRangeStep(xRange) && isNumber(xRange.step)) {\n    xyRangeSteps.push(xRange.step);\n  }\n\n  const yScale = model.getScaleComponent('y');\n  const yRange = yScale && yScale.get('range');\n  if (yRange && isVgRangeStep(yRange) && isNumber(yRange.step)) {\n    xyRangeSteps.push(yRange.step);\n  }\n\n  return xyRangeSteps;\n}\n\n/**\n * Return mixins that includes one of the range properties (range, rangeStep, scheme).\n */\nexport function parseRangeForChannel(\n    channel: Channel, scaleType: ScaleType, type: Type, specifiedScale: Scale, config: Config,\n    zero: boolean, mark: Mark, sizeSpecified: boolean, sizeSignal: string, xyRangeSteps: number[]\n  ): Explicit<VgRange> {\n\n  const noRangeStep = sizeSpecified || specifiedScale.rangeStep === null;\n\n  // Check if any of the range properties is specified.\n  // If so, check if it is compatible and make sure that we only output one of the properties\n  for (const property of RANGE_PROPERTIES) {\n    if (specifiedScale[property] !== undefined) {\n      const supportedByScaleType = scaleTypeSupportProperty(scaleType, property);\n      const channelIncompatability = channelScalePropertyIncompatability(channel, property);\n      if (!supportedByScaleType) {\n        log.warn(log.message.scalePropertyNotWorkWithScaleType(scaleType, property, channel));\n      } else if (channelIncompatability) { // channel\n        log.warn(channelIncompatability);\n      } else {\n        switch (property) {\n          case 'range':\n            return makeExplicit(specifiedScale[property]);\n          case 'scheme':\n            return makeExplicit(parseScheme(specifiedScale[property]));\n          case 'rangeStep':\n            const rangeStep = specifiedScale[property];\n            if (rangeStep !== null) {\n              if (!sizeSpecified) {\n                return makeExplicit({step: rangeStep});\n              } else {\n                // If top-level size is specified, we ignore specified rangeStep.\n                log.warn(log.message.rangeStepDropped(channel));\n              }\n            }\n        }\n      }\n    }\n  }\n  return makeImplicit(\n    defaultRange(\n      channel, scaleType, type, config,\n      zero, mark, sizeSignal, xyRangeSteps, noRangeStep\n    )\n  );\n}\n\nfunction parseScheme(scheme: Scheme) {\n  if (isExtendedScheme(scheme)) {\n    const r: VgScheme = {scheme: scheme.name};\n    if (scheme.count) {\n      r.count = scheme.count;\n    }\n    if (scheme.extent) {\n      r.extent = scheme.extent;\n    }\n    return r;\n  }\n  return {scheme: scheme};\n}\n\nexport function defaultRange(\n  channel: Channel, scaleType: ScaleType, type: Type, config: Config, zero: boolean, mark: Mark,\n  sizeSignal: string, xyRangeSteps: number[], noRangeStep: boolean\n): VgRange {\n  switch (channel) {\n    case X:\n    case Y:\n      if (util.contains(['point', 'band'], scaleType) && !noRangeStep) {\n        if (channel === X && mark === 'text') {\n          if (config.scale.textXRangeStep) {\n            return {step: config.scale.textXRangeStep};\n          }\n        } else {\n          if (config.scale.rangeStep) {\n            return {step: config.scale.rangeStep};\n          }\n        }\n      }\n\n      // If range step is null, use zero to width or height.\n      // Note that these range signals are temporary\n      // as they can be merged and renamed.\n      // (We do not have the right size signal here since parseLayoutSize() happens after parseScale().)\n      // We will later replace these temporary names with\n      // the final name in assembleScaleRange()\n\n      if (channel === Y && hasContinuousDomain(scaleType)) {\n        // For y continuous scale, we have to start from the height as the bottom part has the max value.\n        return [{signal: sizeSignal}, 0];\n      } else {\n        return [0, {signal: sizeSignal}];\n      }\n    case SIZE:\n      // TODO: support custom rangeMin, rangeMax\n      const rangeMin = sizeRangeMin(mark, zero, config);\n      const rangeMax = sizeRangeMax(mark, xyRangeSteps, config);\n      return [rangeMin, rangeMax];\n    case SHAPE:\n      return 'symbol';\n    case COLOR:\n    case FILL:\n    case STROKE:\n      if (scaleType === 'ordinal') {\n        // Only nominal data uses ordinal scale by default\n        return type === 'nominal' ? 'category' : 'ordinal';\n      }\n      return mark === 'rect' || mark === 'geoshape' ? 'heatmap' : 'ramp';\n    case OPACITY:\n      // TODO: support custom rangeMin, rangeMax\n      return [config.scale.minOpacity, config.scale.maxOpacity];\n  }\n  /* istanbul ignore next: should never reach here */\n  throw new Error(`Scale range undefined for channel ${channel}`);\n}\n\nfunction sizeRangeMin(mark: Mark, zero: boolean, config: Config) {\n  if (zero) {\n    return 0;\n  }\n  switch (mark) {\n    case 'bar':\n    case 'tick':\n      return config.scale.minBandSize;\n    case 'line':\n    case 'trail':\n    case 'rule':\n      return config.scale.minStrokeWidth;\n    case 'text':\n      return config.scale.minFontSize;\n    case 'point':\n    case 'square':\n    case 'circle':\n      return config.scale.minSize;\n  }\n  /* istanbul ignore next: should never reach here */\n  // sizeRangeMin not implemented for the mark\n  throw new Error(log.message.incompatibleChannel('size', mark));\n}\n\nfunction sizeRangeMax(mark: Mark, xyRangeSteps: number[], config: Config) {\n  const scaleConfig = config.scale;\n  // TODO(#1168): make max size scale based on rangeStep / overall plot size\n  switch (mark) {\n    case 'bar':\n    case 'tick':\n      if (config.scale.maxBandSize !== undefined) {\n        return config.scale.maxBandSize;\n      }\n      return minXYRangeStep(xyRangeSteps, config.scale) - 1;\n    case 'line':\n    case 'trail':\n    case 'rule':\n      return config.scale.maxStrokeWidth;\n    case 'text':\n      return config.scale.maxFontSize;\n    case 'point':\n    case 'square':\n    case 'circle':\n      if (config.scale.maxSize) {\n        return config.scale.maxSize;\n      }\n\n      // FIXME this case totally should be refactored\n      const pointStep = minXYRangeStep(xyRangeSteps, scaleConfig);\n      return (pointStep - 2) * (pointStep - 2);\n  }\n  /* istanbul ignore next: should never reach here */\n  // sizeRangeMax not implemented for the mark\n  throw new Error(log.message.incompatibleChannel('size', mark));\n}\n\n/**\n * @returns {number} Range step of x or y or minimum between the two if both are ordinal scale.\n */\nfunction minXYRangeStep(xyRangeSteps: number[], scaleConfig: ScaleConfig): number {\n  if (xyRangeSteps.length > 0) {\n    return Math.min.apply(null, xyRangeSteps);\n  }\n  if (scaleConfig.rangeStep) {\n    return scaleConfig.rangeStep;\n  }\n  return 21; // FIXME: re-evaluate the default value here.\n}\n","import {stringValue} from 'vega-util';\nimport {X, Y} from '../../channel';\nimport {warn} from '../../log';\nimport {hasContinuousDomain, isBinScale} from '../../scale';\nimport {keys} from '../../util';\nimport {VgEventStream} from '../../vega.schema';\nimport {UnitModel} from '../unit';\nimport {\n  channelSignalName,\n  positionalProjections,\n  SelectionCompiler,\n  SelectionComponent,\n  STORE,\n  TUPLE,\n  unitName,\n} from './selection';\nimport scales from './transforms/scales';\n\nexport const BRUSH = '_brush';\nexport const SCALE_TRIGGER = '_scale_trigger';\n\nconst interval:SelectionCompiler = {\n  predicate: 'vlInterval',\n  scaleDomain: 'vlIntervalDomain',\n\n  signals: function(model, selCmpt) {\n    const name = selCmpt.name;\n    const hasScales = scales.has(selCmpt);\n    const signals: any[] = [];\n    const intervals: any[] = [];\n    const tupleTriggers: string[] = [];\n    const scaleTriggers: any[] = [];\n\n    if (selCmpt.translate && !hasScales) {\n      const filterExpr = `!event.item || event.item.mark.name !== ${stringValue(name + BRUSH)}`;\n      events(selCmpt, function(_: any[], evt: VgEventStream) {\n        const filters = evt.between[0].filter || (evt.between[0].filter = []);\n        if (filters.indexOf(filterExpr) < 0) {\n          filters.push(filterExpr);\n        }\n      });\n    }\n\n    selCmpt.project.forEach(function(p) {\n      const channel = p.channel;\n      if (channel !== X && channel !== Y) {\n        warn('Interval selections only support x and y encoding channels.');\n        return;\n      }\n\n      const cs = channelSignals(model, selCmpt, channel);\n      const dname = channelSignalName(selCmpt, channel, 'data');\n      const vname = channelSignalName(selCmpt, channel, 'visual');\n      const scaleStr = stringValue(model.scaleName(channel));\n      const scaleType = model.getScaleComponent(channel).get('type');\n      const toNum = hasContinuousDomain(scaleType) ? '+' : '';\n\n      signals.push.apply(signals, cs);\n      tupleTriggers.push(dname);\n      intervals.push(`{encoding: ${stringValue(channel)}, ` +\n        `field: ${stringValue(p.field)}, extent: ${dname}}`);\n\n      scaleTriggers.push({\n        scaleName: model.scaleName(channel),\n        expr: `(!isArray(${dname}) || ` +\n          `(${toNum}invert(${scaleStr}, ${vname})[0] === ${toNum}${dname}[0] && ` +\n            `${toNum}invert(${scaleStr}, ${vname})[1] === ${toNum}${dname}[1]))`\n      });\n    });\n\n    // Proxy scale reactions to ensure that an infinite loop doesn't occur\n    // when an interval selection filter touches the scale.\n    if (!hasScales) {\n      signals.push({\n        name: name + SCALE_TRIGGER,\n        update: scaleTriggers.map((t) => t.expr).join(' && ') +\n          ` ? ${name + SCALE_TRIGGER} : {}`\n      });\n    }\n\n    // Only add an interval to the store if it has valid data extents. Data extents\n    // are set to null if pixel extents are equal to account for intervals over\n    // ordinal/nominal domains which, when inverted, will still produce a valid datum.\n    return signals.concat({\n      name: name + TUPLE,\n      on: [{\n        events: tupleTriggers.map((t) => ({signal: t})),\n        update: tupleTriggers.join(' && ') +\n          ` ? {unit: ${unitName(model)}, intervals: [${intervals.join(', ')}]} : null`\n      }]\n    });\n  },\n\n  modifyExpr: function(model, selCmpt) {\n    const tpl = selCmpt.name + TUPLE;\n    return tpl + ', ' +\n      (selCmpt.resolve === 'global' ? 'true' : `{unit: ${unitName(model)}}`);\n  },\n\n  marks: function(model, selCmpt, marks) {\n    const name = selCmpt.name;\n    const {xi, yi} = positionalProjections(selCmpt);\n    const store = `data(${stringValue(selCmpt.name + STORE)})`;\n\n    // Do not add a brush if we're binding to scales.\n    if (scales.has(selCmpt)) {\n      return marks;\n    }\n\n    const update: any = {\n      x: xi !== null ? {signal: `${name}_x[0]`} : {value: 0},\n      y: yi !== null ? {signal: `${name}_y[0]`} : {value: 0},\n      x2: xi !== null ? {signal: `${name}_x[1]`} : {field: {group: 'width'}},\n      y2: yi !== null ? {signal: `${name}_y[1]`} : {field: {group: 'height'}}\n    };\n\n    // If the selection is resolved to global, only a single interval is in\n    // the store. Wrap brush mark's encodings with a production rule to test\n    // this based on the `unit` property. Hide the brush mark if it corresponds\n    // to a unit different from the one in the store.\n    if (selCmpt.resolve === 'global') {\n      for (const key of keys(update)) {\n        update[key] = [{\n          test: `${store}.length && ${store}[0].unit === ${unitName(model)}`,\n          ...update[key]\n        }, {value: 0}];\n      }\n    }\n\n    // Two brush marks ensure that fill colors and other aesthetic choices do\n    // not interefere with the core marks, but that the brushed region can still\n    // be interacted with (e.g., dragging it around).\n    const {fill, fillOpacity, ...stroke} = selCmpt.mark;\n    const vgStroke = keys(stroke).reduce((def, k) => {\n      def[k] = [{\n        test: [\n          xi !== null && `${name}_x[0] !== ${name}_x[1]`,\n          yi != null && `${name}_y[0] !== ${name}_y[1]`,\n        ].filter(x => x).join(' && '),\n        value: stroke[k]\n      }, {value: null}];\n      return def;\n    }, {});\n\n    return [{\n      name: name + BRUSH + '_bg',\n      type: 'rect',\n      clip: true,\n      encode: {\n        enter: {\n          fill: {value: fill},\n          fillOpacity: {value: fillOpacity}\n        },\n        update: update\n      }\n    } as any].concat(marks, {\n      name: name + BRUSH,\n      type: 'rect',\n      clip: true,\n      encode: {\n        enter: {\n          fill: {value: 'transparent'}\n        },\n        update: {...update, ...vgStroke}\n      }\n    });\n  }\n};\nexport default interval;\n\n/**\n * Returns the visual and data signals for an interval selection.\n */\nfunction channelSignals(model: UnitModel, selCmpt: SelectionComponent, channel: 'x'|'y'): any {\n  const vname = channelSignalName(selCmpt, channel, 'visual');\n  const dname = channelSignalName(selCmpt, channel, 'data');\n  const hasScales = scales.has(selCmpt);\n  const scaleName = model.scaleName(channel);\n  const scaleStr = stringValue(scaleName);\n  const scale = model.getScaleComponent(channel);\n  const scaleType = scale ? scale.get('type') : undefined;\n  const size = model.getSizeSignalRef(channel === X ? 'width' : 'height').signal;\n  const coord = `${channel}(unit)`;\n\n  const on = events(selCmpt, function(def: any[], evt: VgEventStream) {\n    return def.concat(\n      {events: evt.between[0], update: `[${coord}, ${coord}]`},           // Brush Start\n      {events: evt, update: `[${vname}[0], clamp(${coord}, 0, ${size})]`} // Brush End\n    );\n  });\n\n  // React to pan/zooms of continuous scales. Non-continuous scales\n  // (bin-linear, band, point) cannot be pan/zoomed and any other changes\n  // to their domains (e.g., filtering) should clear the brushes.\n  on.push({\n    events: {signal: selCmpt.name + SCALE_TRIGGER},\n    update: hasContinuousDomain(scaleType) && !isBinScale(scaleType) ?\n      `[scale(${scaleStr}, ${dname}[0]), scale(${scaleStr}, ${dname}[1])]` : `[0, 0]`\n  });\n\n  return hasScales ? [{name: dname, on: []}] : [{\n    name: vname, value: [], on: on\n  }, {\n    name: dname,\n    on: [{events: {signal: vname}, update: `${vname}[0] === ${vname}[1] ? null : invert(${scaleStr}, ${vname})`}]\n  }];\n}\n\nfunction events(selCmpt: SelectionComponent, cb: Function) {\n  return selCmpt.events.reduce(function(on: any[], evt: VgEventStream) {\n    if (!evt.between) {\n      warn(`${evt} is not an ordered event stream for interval selections`);\n      return on;\n    }\n    return cb(on, evt);\n  }, []);\n}\n","import {stringValue} from 'vega-util';\nimport {Channel, X, Y} from '../../../channel';\nimport * as log from '../../../log';\nimport {hasContinuousDomain, isBinScale} from '../../../scale';\nimport {UnitModel} from '../../unit';\nimport {channelSignalName} from '../selection';\nimport {TransformCompiler} from './transforms';\n\n\nconst scaleBindings:TransformCompiler = {\n  has: function(selCmpt) {\n    return selCmpt.type === 'interval' && selCmpt.resolve === 'global' &&\n      selCmpt.bind && selCmpt.bind === 'scales';\n  },\n\n  parse: function(model, selDef, selCmpt) {\n    const bound: Channel[] = selCmpt.scales = [];\n\n    selCmpt.project.forEach(function(p) {\n      const channel = p.channel;\n      const scale = model.getScaleComponent(channel);\n      const scaleType = scale ? scale.get('type') : undefined;\n\n      if (!scale || !hasContinuousDomain(scaleType) || isBinScale(scaleType)) {\n        log.warn(log.message.SCALE_BINDINGS_CONTINUOUS);\n        return;\n      }\n\n      scale.set('domainRaw', {signal: channelSignalName(selCmpt, channel, 'data')}, true);\n      bound.push(channel);\n\n      // Bind both x/y for diag plot of repeated views.\n      if (model.repeater && model.repeater.row === model.repeater.column) {\n        const scale2 = model.getScaleComponent(channel === X ? Y : X);\n        scale2.set('domainRaw', {signal: channelSignalName(selCmpt, channel, 'data')}, true);\n      }\n    });\n  },\n\n  topLevelSignals: function(model, selCmpt, signals) {\n    // Top-level signals are only needed when coordinating composed views.\n    if (!model.parent) {\n      return signals;\n    }\n\n    const channels = selCmpt.scales.filter((channel) => {\n      return !(signals.filter(s => s.name === channelSignalName(selCmpt, channel, 'data')).length);\n    });\n\n    return signals.concat(channels.map((channel) => {\n      return {name: channelSignalName(selCmpt, channel, 'data')};\n    }));\n  },\n\n  signals: function(model, selCmpt, signals) {\n    // Nested signals need only push to top-level signals when within composed views.\n    if (model.parent) {\n      selCmpt.scales.forEach(channel => {\n        const signal = signals.filter(s => s.name === channelSignalName(selCmpt, channel, 'data'))[0];\n\n        signal.push = 'outer';\n        delete signal.value;\n        delete signal.update;\n      });\n    }\n\n    return signals;\n  }\n};\n\nexport default scaleBindings;\n\nexport function domain(model: UnitModel, channel: Channel) {\n  const scale = stringValue(model.scaleName(channel));\n  return `domain(${scale})`;\n}\n","import {stringValue} from 'vega-util';\n\nimport {accessPath} from '../../util';\nimport {UnitModel} from '../unit';\nimport {SelectionCompiler, SelectionComponent, TUPLE, unitName} from './selection';\nimport nearest from './transforms/nearest';\n\nexport function signals(model: UnitModel, selCmpt: SelectionComponent) {\n  const proj = selCmpt.project;\n  const datum = nearest.has(selCmpt) ?\n    '(item().isVoronoi ? datum.datum : datum)' : 'datum';\n  const bins: string[] = [];\n  const encodings = proj.map((p) => stringValue(p.channel)).filter((e) => e).join(', ');\n  const fields = proj.map((p) => stringValue(p.field)).join(', ');\n  const values = proj.map((p) => {\n    const channel = p.channel;\n    const fieldDef = model.fieldDef(channel);\n    // Binned fields should capture extents, for a range test against the raw field.\n    return (fieldDef && fieldDef.bin) ? (bins.push(p.field),\n      `[${datum}${accessPath(model.vgField(channel, {}))}, ` +\n          `${datum}${accessPath(model.vgField(channel, {binSuffix: 'end'}))}]`) :\n      `${datum}${accessPath(p.field)}`;\n  }).join(', ');\n\n  // Only add a discrete selection to the store if a datum is present _and_\n  // the interaction isn't occurring on a group mark. This guards against\n  // polluting interactive state with invalid values in faceted displays\n  // as the group marks are also data-driven. We force the update to account\n  // for constant null states but varying toggles (e.g., shift-click in\n  // whitespace followed by a click in whitespace; the store should only\n  // be cleared on the second click).\n  return [{\n    name: selCmpt.name + TUPLE,\n    value: {},\n    on: [{\n      events: selCmpt.events,\n      update: `datum && item().mark.marktype !== 'group' ? ` +\n        `{unit: ${unitName(model)}, encodings: [${encodings}], ` +\n        `fields: [${fields}], values: [${values}]` +\n        (bins.length ? ', ' + bins.map((b) => `${stringValue('bin_' + b)}: 1`).join(', ') : '') +\n        '} : null',\n      force: true\n    }]\n  }];\n}\n\nconst multi:SelectionCompiler = {\n  predicate: 'vlMulti',\n  scaleDomain: 'vlMultiDomain',\n\n  signals: signals,\n\n  modifyExpr: function(model, selCmpt) {\n    const tpl = selCmpt.name + TUPLE;\n    return tpl + ', ' +\n      (selCmpt.resolve === 'global' ? 'null' : `{unit: ${unitName(model)}}`);\n  }\n};\n\nexport default multi;\n","import * as log from '../../../log';\nimport {isPathMark} from '../../../mark';\nimport {positionalProjections} from '../selection';\nimport {TransformCompiler} from './transforms';\n\nconst VORONOI = 'voronoi';\n\nconst nearest:TransformCompiler = {\n  has: function(selCmpt) {\n    return selCmpt.type !== 'interval' && selCmpt.nearest;\n  },\n\n  marks: function(model, selCmpt, marks) {\n    const {x, y} = positionalProjections(selCmpt);\n    const markType = model.mark;\n    if (isPathMark(markType)) {\n      log.warn(log.message.nearestNotSupportForContinuous(markType));\n      return marks;\n    }\n\n    const cellDef = {\n      name: model.getName(VORONOI),\n      type: 'path',\n      from: {data: model.getName('marks')},\n      encode: {\n        enter: {\n          fill: {value: 'transparent'},\n          strokeWidth: {value: 0.35},\n          stroke: {value: 'transparent'},\n          isVoronoi: {value: true}\n        }\n      },\n      transform: [{\n        type: 'voronoi',\n        x: {expr: (x || (!x && !y)) ? 'datum.datum.x || 0' : '0'},\n        y: {expr: (y || (!x && !y)) ? 'datum.datum.y || 0' : '0'},\n        size: [model.getSizeSignalRef('width'), model.getSizeSignalRef('height')]\n      }]\n    };\n\n    let index = 0;\n    let exists = false;\n    marks.forEach((mark, i) => {\n      const name = mark.name || '';\n      if (name === model.component.mark[0].name) {\n        index = i;\n      } else if (name.indexOf(VORONOI) >= 0) {\n        exists = true;\n      }\n    });\n\n    if (!exists) {\n      marks.splice(index + 1, 0, cellDef);\n    }\n\n    return marks;\n  }\n};\n\nexport default nearest;\n","import {stringValue} from 'vega-util';\n\nimport {signals as multiSignals} from './multi';\nimport {SelectionCompiler, STORE, TUPLE, unitName} from './selection';\n\n\nconst single:SelectionCompiler = {\n  predicate: 'vlSingle',\n  scaleDomain: 'vlSingleDomain',\n\n  signals: multiSignals,\n\n  topLevelSignals: function(model, selCmpt, signals) {\n    const hasSignal = signals.filter((s) => s.name === selCmpt.name);\n    const data = `data(${stringValue(selCmpt.name + STORE)})`;\n    const values = `${data}[0].values`;\n    return hasSignal.length ? signals : signals.concat({\n      name: selCmpt.name,\n      update: `${data}.length && {` +\n        selCmpt.project.map((p, i) => `${p.field}: ${values}[${i}]`).join(', ') + '}'\n    });\n  },\n\n  modifyExpr: function(model, selCmpt) {\n    const tpl = selCmpt.name + TUPLE;\n    return tpl + ', ' +\n      (selCmpt.resolve === 'global' ? 'true' : `{unit: ${unitName(model)}}`);\n  }\n};\n\nexport default single;\n","import {SelectionDef} from '../../../selection';\nimport {Dict} from '../../../util';\nimport {VgSignal} from '../../../vega.schema';\nimport {Model} from '../../model';\nimport {UnitModel} from '../../unit';\nimport {SelectionComponent} from '../selection';\n\n\nexport interface TransformCompiler {\n  has: (selCmpt: SelectionComponent | SelectionDef) => boolean;\n  parse?: (model: UnitModel, def: SelectionDef, selCmpt: SelectionComponent) => void;\n  signals?: (model: UnitModel, selCmpt: SelectionComponent, signals: VgSignal[]) => VgSignal[];\n  topLevelSignals?: (model: Model, selCmpt: SelectionComponent, signals: VgSignal[]) => VgSignal[];\n  modifyExpr?: (model: UnitModel, selCmpt: SelectionComponent, expr: string) => string;\n  marks?: (model: UnitModel, selCmpt:SelectionComponent, marks: any[]) => any[];\n}\n\nimport inputs from './inputs';\nimport nearest from './nearest';\nimport project from './project';\nimport scales from './scales';\nimport toggle from './toggle';\nimport translate from './translate';\nimport zoom from './zoom';\nconst compilers: Dict<TransformCompiler> = {project, toggle, scales,\n  translate, zoom, inputs, nearest};\n\nexport function forEachTransform(selCmpt: SelectionComponent, cb: (tx: TransformCompiler) => void) {\n  for (const t in compilers) {\n    if (compilers[t].has(selCmpt)) {\n      cb(compilers[t]);\n    }\n  }\n}\n","import {stringValue} from 'vega-util';\nimport {accessPath, varName} from '../../../util';\nimport {TUPLE} from '../selection';\nimport nearest from './nearest';\nimport {TransformCompiler} from './transforms';\n\n\nconst inputBindings:TransformCompiler = {\n  has: function(selCmpt) {\n    return selCmpt.type === 'single' && selCmpt.resolve === 'global' &&\n      selCmpt.bind && selCmpt.bind !== 'scales';\n  },\n\n  topLevelSignals: function(model, selCmpt, signals) {\n    const name = selCmpt.name;\n    const proj = selCmpt.project;\n    const bind = selCmpt.bind;\n    const datum = nearest.has(selCmpt) ?\n      '(item().isVoronoi ? datum.datum : datum)' : 'datum';\n\n    proj.forEach(function(p) {\n      const sgname = varName(`${name}_${p.field}`);\n      const hasSignal = signals.filter((s) => s.name === sgname);\n      if (!hasSignal.length) {\n        signals.unshift({\n          name: sgname,\n          value: '',\n          on: [{\n            events: selCmpt.events,\n            update: `datum && item().mark.marktype !== 'group' ? ${datum}${accessPath(p.field)} : null`\n          }],\n          bind: bind[p.field] || bind[p.channel] || bind\n        });\n      }\n    });\n\n    return signals;\n  },\n\n  signals: function(model, selCmpt, signals) {\n    const name = selCmpt.name;\n    const proj = selCmpt.project;\n    const signal = signals.filter((s) => s.name === name + TUPLE)[0];\n    const fields = proj.map((p) => stringValue(p.field)).join(', ');\n    const values = proj.map((p) => varName(`${name}_${p.field}`));\n\n    if (values.length) {\n      signal.update = `${values.join(' && ')} ? {fields: [${fields}], values: [${values.join(', ')}]} : null`;\n    }\n\n    delete signal.value;\n    delete signal.on;\n\n    return signals;\n  }\n};\n\nexport default inputBindings;\n","import {SingleDefChannel} from '../../../channel';\nimport * as log from '../../../log';\nimport {SelectionDef} from '../../../selection';\nimport {keys} from '../../../util';\nimport {TimeUnitComponent, TimeUnitNode} from '../../data/timeunit';\nimport {SelectionComponent} from '../selection';\nimport {TransformCompiler} from './transforms';\n\nconst project: TransformCompiler = {\n  has: function(selDef: SelectionComponent | SelectionDef) {\n    const def = selDef as SelectionDef;\n    return def.fields !== undefined || def.encodings !== undefined;\n  },\n\n  parse: function(model, selDef, selCmpt) {\n    const channels = {};\n    const timeUnits: {[key: string]: TimeUnitComponent} = {};\n\n    // TODO: find a possible channel mapping for these fields.\n    (selDef.fields || []).forEach((field) => channels[field] = null);\n\n    (selDef.encodings || []).forEach((channel: SingleDefChannel) => {\n      const fieldDef = model.fieldDef(channel);\n      if (fieldDef) {\n        if (fieldDef.timeUnit) {\n          const tuField = model.vgField(channel);\n          channels[tuField] = channel;\n\n          // Construct TimeUnitComponents which will be combined into a\n          // TimeUnitNode. This node may need to be inserted into the\n          // dataflow if the selection is used across views that do not\n          // have these time units defined.\n          timeUnits[tuField] = {\n            as: tuField,\n            field: fieldDef.field,\n            timeUnit: fieldDef.timeUnit\n          };\n        } else {\n          channels[fieldDef.field] = channel;\n        }\n      } else {\n        log.warn(log.message.cannotProjectOnChannelWithoutField(channel));\n      }\n    });\n\n    const projection = selCmpt.project || (selCmpt.project = []);\n    for (const field in channels) {\n      if (channels.hasOwnProperty(field)) {\n        projection.push({field: field, channel: channels[field]});\n      }\n    }\n\n    const fields = selCmpt.fields || (selCmpt.fields = {});\n    projection.filter((p) => p.channel).forEach((p) => fields[p.channel] = p.field);\n\n    if (keys(timeUnits).length) {\n      selCmpt.timeUnit = new TimeUnitNode(null, timeUnits);\n    }\n  }\n};\n\nexport default project;\n","\nimport {TUPLE, unitName} from '../selection';\nimport {TransformCompiler} from './transforms';\n\n\nconst TOGGLE = '_toggle';\n\nconst toggle:TransformCompiler = {\n  has: function(selCmpt) {\n    return selCmpt.type === 'multi' && selCmpt.toggle;\n  },\n\n  signals: function(model, selCmpt, signals) {\n    return signals.concat({\n      name: selCmpt.name + TOGGLE,\n      value: false,\n      on: [{events: selCmpt.events, update: selCmpt.toggle}]\n    });\n  },\n\n  modifyExpr: function(model, selCmpt, expr) {\n    const tpl = selCmpt.name + TUPLE;\n    const signal = selCmpt.name + TOGGLE;\n\n    return `${signal} ? null : ${tpl}, ` +\n      (selCmpt.resolve === 'global' ?\n        `${signal} ? null : true, ` :\n        `${signal} ? null : {unit: ${unitName(model)}}, `) +\n      `${signal} ? ${tpl} : null`;\n  }\n};\n\nexport default toggle;\n","/// <reference path=\"../../../../typings/vega-event-selector.d.ts\" />\n\nimport {selector as parseSelector} from 'vega-event-selector';\n\nimport {ScaleChannel, X, Y} from '../../../channel';\nimport {VgSignal} from '../../../vega.schema';\nimport {BRUSH as INTERVAL_BRUSH} from '../interval';\nimport {channelSignalName, positionalProjections, SelectionComponent} from '../selection';\nimport {UnitModel} from './../../unit';\nimport scalesCompiler, {domain} from './scales';\nimport {TransformCompiler} from './transforms';\n\n\nconst ANCHOR = '_translate_anchor';\nconst DELTA = '_translate_delta';\n\nconst translate:TransformCompiler = {\n  has: function(selCmpt) {\n    return selCmpt.type === 'interval' && selCmpt.translate;\n  },\n\n  signals: function(model, selCmpt, signals) {\n    const name = selCmpt.name;\n    const hasScales = scalesCompiler.has(selCmpt);\n    const anchor = name + ANCHOR;\n    const {x, y} = positionalProjections(selCmpt);\n    let events = parseSelector(selCmpt.translate, 'scope');\n\n    if (!hasScales) {\n      events = events.map((e) => (e.between[0].markname = name + INTERVAL_BRUSH, e));\n    }\n\n    signals.push({\n      name: anchor,\n      value: {},\n      on: [{\n        events: events.map((e) => e.between[0]),\n        update: '{x: x(unit), y: y(unit)' +\n          (x !== null ? ', extent_x: ' + (hasScales ? domain(model, X) :\n              `slice(${channelSignalName(selCmpt, 'x', 'visual')})`) : '') +\n\n          (y !== null ? ', extent_y: ' + (hasScales ? domain(model, Y) :\n              `slice(${channelSignalName(selCmpt, 'y', 'visual')})`) : '') + '}'\n      }]\n    }, {\n      name: name + DELTA,\n      value: {},\n      on: [{\n        events: events,\n        update: `{x: ${anchor}.x - x(unit), y: ${anchor}.y - y(unit)}`\n      }]\n    });\n\n    if (x !== null) {\n      onDelta(model, selCmpt, X, 'width', signals);\n    }\n\n    if (y !== null) {\n      onDelta(model, selCmpt, Y, 'height', signals);\n    }\n\n    return signals;\n  }\n};\n\nexport default translate;\n\nfunction onDelta(model: UnitModel, selCmpt: SelectionComponent, channel: ScaleChannel, size: 'width' | 'height', signals: VgSignal[]) {\n  const name = selCmpt.name;\n  const hasScales = scalesCompiler.has(selCmpt);\n  const signal = signals.filter(s => {\n    return s.name === channelSignalName(selCmpt, channel, hasScales ? 'data' : 'visual');\n  })[0];\n  const anchor = name + ANCHOR;\n  const delta = name + DELTA;\n  const sizeSg = model.getSizeSignalRef(size).signal;\n  const scaleCmpt = model.getScaleComponent(channel);\n  const scaleType = scaleCmpt.get('type');\n  const sign = hasScales && channel === X ? '-' : ''; // Invert delta when panning x-scales.\n  const extent = `${anchor}.extent_${channel}`;\n  const offset = `${sign}${delta}.${channel} / ` + (hasScales ? `${sizeSg}` : `span(${extent})`);\n  const panFn = !hasScales ? 'panLinear' :\n    scaleType === 'log' ? 'panLog' :\n    scaleType === 'pow' ? 'panPow' : 'panLinear';\n  const update = `${panFn}(${extent}, ${offset}` +\n    (hasScales && scaleType === 'pow' ? `, ${scaleCmpt.get('exponent') || 1}` : '') + ')';\n\n  signal.on.push({\n    events: {signal: delta},\n    update: hasScales ? update : `clampRange(${update}, 0, ${sizeSg})`\n  });\n}\n","/// <reference path=\"../../../../typings/vega-event-selector.d.ts\" />\n\nimport {selector as parseSelector} from 'vega-event-selector';\nimport {stringValue} from 'vega-util';\nimport {ScaleChannel, X, Y} from '../../../channel';\nimport {VgSignal} from '../../../vega.schema';\nimport {BRUSH as INTERVAL_BRUSH} from '../interval';\nimport {channelSignalName, positionalProjections, SelectionComponent} from '../selection';\nimport {UnitModel} from './../../unit';\nimport {default as scalesCompiler, domain} from './scales';\nimport {TransformCompiler} from './transforms';\n\n\nconst ANCHOR = '_zoom_anchor';\nconst DELTA = '_zoom_delta';\n\nconst zoom:TransformCompiler = {\n  has: function(selCmpt) {\n    return selCmpt.type === 'interval' && selCmpt.zoom;\n  },\n\n  signals: function(model, selCmpt, signals) {\n    const name = selCmpt.name;\n    const hasScales = scalesCompiler.has(selCmpt);\n    const delta = name + DELTA;\n    const {x, y} = positionalProjections(selCmpt);\n    const sx = stringValue(model.scaleName(X));\n    const sy = stringValue(model.scaleName(Y));\n    let events = parseSelector(selCmpt.zoom, 'scope');\n\n    if (!hasScales) {\n      events = events.map((e) => (e.markname = name + INTERVAL_BRUSH, e));\n    }\n\n    signals.push({\n      name: name + ANCHOR,\n      on: [{\n        events: events,\n        update: !hasScales ? `{x: x(unit), y: y(unit)}` :\n          '{' + [\n            (sx ? `x: invert(${sx}, x(unit))` : ''),\n            (sy ? `y: invert(${sy}, y(unit))` : '')\n          ].filter((expr) => !!expr).join(', ') + '}'\n      }]\n    }, {\n      name: delta,\n      on: [{\n        events: events,\n        force: true,\n        update: 'pow(1.001, event.deltaY * pow(16, event.deltaMode))'\n      }]\n    });\n\n    if (x !== null) {\n      onDelta(model, selCmpt, 'x', 'width', signals);\n    }\n\n    if (y !== null) {\n      onDelta(model, selCmpt, 'y', 'height', signals);\n    }\n\n    return signals;\n  }\n};\n\nexport default zoom;\n\nfunction onDelta(model: UnitModel, selCmpt: SelectionComponent, channel: ScaleChannel, size: 'width' | 'height', signals: VgSignal[]) {\n  const name = selCmpt.name;\n  const hasScales = scalesCompiler.has(selCmpt);\n  const signal = signals.filter(s => {\n    return s.name === channelSignalName(selCmpt, channel, hasScales ? 'data' : 'visual');\n  })[0];\n  const sizeSg = model.getSizeSignalRef(size).signal;\n  const scaleCmpt = model.getScaleComponent(channel);\n  const scaleType = scaleCmpt.get('type');\n  const base = hasScales ? domain(model, channel) : signal.name;\n  const delta = name + DELTA;\n  const anchor = `${name}${ANCHOR}.${channel}`;\n  const zoomFn = !hasScales ? 'zoomLinear' :\n    scaleType === 'log' ? 'zoomLog' :\n    scaleType === 'pow' ? 'zoomPow' : 'zoomLinear';\n  const update = `${zoomFn}(${base}, ${anchor}, ${delta}` +\n    (hasScales && scaleType === 'pow' ? `, ${scaleCmpt.get('exponent') || 1}` : '') + ')';\n\n  signal.on.push({\n    events: {signal: delta},\n    update: hasScales ? update : `clampRange(${update}, 0, ${sizeSg})`\n  });\n}\n","// Imports to satisfy --declarations build requirements\r\n// https://github.com/Microsoft/TypeScript/issues/9944\r\n\r\n// tslint:disable:no-unused-variable\r\nimport {StateWithHistory} from 'redux-undo';\r\nimport {GenericState, UndoableStateBase} from '../models';\r\n// tslint:enable:no-unused-variable\r\n\r\nimport {createSelector} from 'reselect';\r\nimport {InlineData} from 'vega-lite/build/src/data';\r\nimport {isArray} from 'vega-util';\r\nimport {State} from '../models';\r\nimport {Bookmark} from '../models/bookmark';\r\nimport {VoyagerConfig} from '../models/config';\r\nimport {CustomWildcardField} from '../models/custom-wildcard-field';\r\nimport {Log} from '../models/log';\r\nimport {RelatedViews} from '../models/related-views';\r\nimport {ShelfPreview} from '../models/shelf-preview';\r\nimport {ShelfFilter, toPredicateFunction} from '../models/shelf/filter';\r\nimport {selectData} from './dataset';\r\nimport {selectFilters} from './shelf';\r\n\r\nexport * from './dataset';\r\nexport * from './result';\r\nexport * from './shelf';\r\nexport * from './tab';\r\n\r\nexport const selectBookmark = (state: State): Bookmark => state.persistent.bookmark;\r\nexport const selectConfig = (state: State): VoyagerConfig => state.persistent.config;\r\nexport const selectRelatedViews = (state: State): RelatedViews => state.persistent.relatedViews;\r\nexport const selectShelfPreview = (state: State): ShelfPreview => state.persistent.shelfPreview;\r\nexport const selectLog = (state: State): Log => state.persistent.log;\r\n\r\nexport const selectCustomWildcardFields = (state: State): CustomWildcardField[] => {\r\n  return state.undoable.present.customWildcardFields;\r\n};\r\n\r\nexport const selectFilteredData = createSelector(\r\n  selectData,\r\n  selectFilters,\r\n  (data: InlineData, filters: ShelfFilter[]): InlineData => {\r\n    if (!data || filters.length === 0) {\r\n      return data;\r\n    }\r\n    const filter = toPredicateFunction(filters);\r\n    if (!isArray(data.values)) {\r\n      throw new Error('Voyager only supports array values');\r\n    }\r\n    // FIXME: No signatures error\r\n    const dataVals = data.values as any;\r\n    const values = dataVals.filter(filter);\r\n    return {values};\r\n  }\r\n);\r\n\r\n","'use strict';\n\nexports.__esModule = true;\nexports.defaultMemoize = defaultMemoize;\nexports.createSelectorCreator = createSelectorCreator;\nexports.createStructuredSelector = createStructuredSelector;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction defaultMemoize(func) {\n  var equalityCheck = arguments.length <= 1 || arguments[1] === undefined ? defaultEqualityCheck : arguments[1];\n\n  var lastArgs = null;\n  var lastResult = null;\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (lastArgs === null || lastArgs.length !== args.length || !args.every(function (value, index) {\n      return equalityCheck(value, lastArgs[index]);\n    })) {\n      lastResult = func.apply(undefined, args);\n    }\n    lastArgs = args;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nfunction createSelectorCreator(memoize) {\n  for (var _len2 = arguments.length, memoizeOptions = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    memoizeOptions[_key2 - 1] = arguments[_key2];\n  }\n\n  return function () {\n    for (var _len3 = arguments.length, funcs = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      funcs[_key3] = arguments[_key3];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      return resultFunc.apply(undefined, arguments);\n    }].concat(memoizeOptions));\n\n    var selector = function selector(state, props) {\n      for (var _len4 = arguments.length, args = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n        args[_key4 - 2] = arguments[_key4];\n      }\n\n      var params = dependencies.map(function (dependency) {\n        return dependency.apply(undefined, [state, props].concat(args));\n      });\n      return memoizedResultFunc.apply(undefined, _toConsumableArray(params));\n    };\n\n    selector.resultFunc = resultFunc;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nvar createSelector = exports.createSelector = createSelectorCreator(defaultMemoize);\n\nfunction createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length <= 1 || arguments[1] === undefined ? createSelector : arguments[1];\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len5 = arguments.length, values = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      values[_key5] = arguments[_key5];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","// tslint:disable:no-unused-variable\r\nimport {StateWithHistory} from 'redux-undo';\r\nimport {Selector} from 'reselect/src/reselect';\r\nimport {GenericState, UndoableStateBase} from '../models';\r\nimport {ResultPlot} from '../models/result';\r\n// tslint:enable:no-unused-variable\r\n\r\nimport {Schema} from 'compassql/build/src/schema';\r\nimport {SHORT_WILDCARD} from 'compassql/build/src/wildcard';\r\nimport {createSelector} from 'reselect';\r\nimport {InlineData} from 'vega-lite/build/src/data';\r\nimport {ShelfFieldDef, State} from '../models';\r\nimport {Dataset} from '../models/dataset';\r\n\r\nexport const selectData = (state: State): InlineData => state.undoable.present.dataset.data;\r\nexport const selectDataset = (state: State): Dataset => state.undoable.present.dataset;\r\nexport const selectSchema = (state: State): Schema => state.undoable.present.dataset.schema;\r\n\r\n\r\nconst ALL_PRESET_WILDCARD_FIELDS: ShelfFieldDef[] = [\r\n  {field: SHORT_WILDCARD, type: 'quantitative', description: 'Quantitative Fields'},\r\n  {field: SHORT_WILDCARD, type: 'nominal', description: 'Categorical Fields'},\r\n  {field: SHORT_WILDCARD, type: 'temporal', description: 'Temporal Fields'},\r\n];\r\n\r\nexport const selectPresetWildcardFields = createSelector(\r\n  selectSchema,\r\n  (schema: Schema): ShelfFieldDef[] => {\r\n    if (!schema) {\r\n      return [];\r\n    }\r\n    const typeIndex = schema.fieldSchemas.reduce((index, fieldSchema) => {\r\n      index[fieldSchema.vlType] = true;\r\n      return index;\r\n    }, {});\r\n\r\n    return ALL_PRESET_WILDCARD_FIELDS.filter(fieldDef => typeIndex[fieldDef.type]);\r\n  }\r\n);\r\n\r\nexport const selectSchemaFieldDefs = createSelector(\r\n  selectSchema,\r\n  (schema: Schema): ShelfFieldDef[] => {\r\n    if (!schema) {\r\n      return [];\r\n    }\r\n    return schema.fieldSchemas.map(fieldSchema => {\r\n      const {name, vlType} = fieldSchema;\r\n      return {field: name, type: vlType};\r\n    });\r\n  }\r\n);\r\n","// tslint:disable:no-unused-variable\r\nimport {StateWithHistory} from 'redux-undo';\r\nimport {FieldOneOfPredicate, FieldRangePredicate} from 'vega-lite/build/src/predicate';\r\nimport {GenericState, State, UndoableStateBase} from '../models/index';\r\n// tslint:enable:no-unused-variable\r\n\r\nimport {Query} from 'compassql/build/src/query/query';\r\nimport {SpecQuery} from 'compassql/build/src/query/spec';\r\nimport {createSelector} from 'reselect';\r\nimport {PlotTabState} from '../models';\r\nimport {ShelfFilter} from '../models/shelf/filter';\r\nimport {getDefaultGroupBy, Shelf, ShelfGroupBy, toQuery} from '../models/shelf/index';\r\nimport {hasWildcards, ShelfUnitSpec} from '../models/shelf/spec';\r\nimport {selectActiveTab} from './tab';\r\n\r\nexport const selectShelf = createSelector(selectActiveTab,\r\n  (plotTabState: PlotTabState): Shelf => plotTabState.shelf\r\n);\r\n\r\nexport const selectShelfGroupBy = createSelector(selectShelf,\r\n  (shelf: Shelf): ShelfGroupBy => shelf.groupBy\r\n);\r\n\r\nexport const selectShelfSpec = createSelector(selectShelf,\r\n  (shelf: Shelf): ShelfUnitSpec => shelf.spec\r\n);\r\n\r\nexport const selectFilters = createSelector(selectShelf,\r\n  (shelf: Shelf): ShelfFilter[] => shelf.filters\r\n);\r\n\r\nexport const selectShelfAutoAddCount = createSelector(selectShelf,\r\n  (shelf: Shelf) => shelf.autoAddCount\r\n);\r\n\r\nexport const selectQuery = createSelector(\r\n  selectShelfSpec,\r\n  selectShelfGroupBy,\r\n  selectShelfAutoAddCount,\r\n  (spec: ShelfUnitSpec, groupBy: ShelfGroupBy, autoAddCount: boolean): Query => {\r\n    return toQuery({spec, groupBy, autoAddCount});\r\n  }\r\n);\r\n\r\nexport const selectQuerySpec = createSelector(\r\n  selectQuery,\r\n  (query: Query): SpecQuery => query.spec\r\n);\r\n\r\nexport const selectDefaultGroupBy = createSelector(\r\n  selectQuerySpec,\r\n  (specQ: SpecQuery) => {\r\n    return getDefaultGroupBy(hasWildcards(specQ));\r\n  }\r\n);\r\n\r\nexport const selectIsQuerySpecific = createSelector(\r\n  selectQuerySpec,\r\n  (spec: SpecQuery) => {\r\n    return !hasWildcards(spec).hasAnyWildcard;\r\n  }\r\n);\r\n\r\nexport const selectIsQueryEmpty = createSelector(\r\n  selectQuerySpec,\r\n  (spec: SpecQuery) => {\r\n    return spec.encodings.length === 0;\r\n  }\r\n);\r\n","import {createSelector} from 'reselect';\r\nimport {PlotTabState, State, Tab} from '../models';\r\n\r\n// tslint:disable:no-unused-variable\r\nimport {GenericState, UndoableStateBase} from '../models';\r\n// tslint:enable:no-unused-variable\r\n\r\nexport const selectTab = (state: State): Tab => state.undoable.present.tab;\r\n\r\nexport const selectActiveTabID = createSelector(\r\n  selectTab,\r\n  (tab: Tab): number => tab.activeTabID\r\n);\r\n\r\nexport const selectActiveTab = createSelector(\r\n  selectTab,\r\n  selectActiveTabID,\r\n  (tab: Tab, activeTabID: number): PlotTabState => tab.list[activeTabID]\r\n);\r\n","// tslint:disable:no-unused-variable\r\nimport {BoxPlotDef} from 'vega-lite/build/src/compositemark/boxplot';\r\nimport {EncodingWithFacet} from 'vega-lite/build/src/encoding';\r\nimport {MarkDef} from 'vega-lite/build/src/mark';\r\nimport {FacetedCompositeUnitSpec, GenericUnitSpec, isUnitSpec} from 'vega-lite/build/src/spec';\r\nimport {GenericState, UndoableStateBase} from '../models/index';\r\n// tslint:enable:no-unused-variable\r\n\r\nimport {createSelector} from 'reselect';\r\nimport {Selector} from 'reselect/src/reselect';\r\nimport {PlotTabState, State} from '../models/index';\r\nimport {ResultPlot} from '../models/result';\r\nimport {Result, RESULT_TYPES, ResultType} from '../models/result';\r\nimport {selectIsQueryEmpty, selectIsQuerySpecific} from './shelf';\r\nimport {selectActiveTab} from './tab';\r\n\r\nexport const selectResult: {\r\n  [k in ResultType]?: Selector<State, Result>\r\n} = RESULT_TYPES.reduce((selectors, resultType) => {\r\n  selectors[resultType] = createSelector(\r\n    selectActiveTab,\r\n    (plotTabState: PlotTabState) => plotTabState.result[resultType]\r\n  );\r\n  return selectors;\r\n}, {});\r\n\r\nexport const selectResultLimit: {\r\n  [k in ResultType]?: Selector<State, number>\r\n} = RESULT_TYPES.reduce((selectors, resultType) => {\r\n  selectors[resultType] = createSelector(\r\n    selectResult[resultType],\r\n    (result: Result) => result.limit\r\n  );\r\n  return selectors;\r\n}, {});\r\n\r\n// This one is not exported as it does not correctly include filter transforms yet\r\nconst selectResultPlots: {\r\n  [k in ResultType]?: Selector<State, ResultPlot[]>\r\n} = RESULT_TYPES.reduce((selectors, resultType) => {\r\n  selectors[resultType] = createSelector(\r\n    selectResult[resultType],\r\n    (result: Result) => result.plots\r\n  );\r\n  return selectors;\r\n}, {});\r\n\r\nexport const selectMainSpec = createSelector(\r\n  selectIsQuerySpecific,\r\n  selectIsQueryEmpty,\r\n  selectResultPlots.main,\r\n  (\r\n    isQuerySpecific: boolean,\r\n    isQueryEmpty: boolean,\r\n    mainPlots: ResultPlot[]\r\n  ): FacetedCompositeUnitSpec => {\r\n    if (!isQuerySpecific || !mainPlots || isQueryEmpty) {\r\n      return undefined;\r\n    }\r\n    return mainPlots[0].spec;\r\n  }\r\n);\r\n","import {PlainReduxAction} from './redux-action';\r\n\r\nexport const RESET = 'RESET';\r\nexport type ResetAction = PlainReduxAction<typeof RESET>;\r\n","import {WarningLevel} from '../models/log';\r\nimport {PlainReduxAction, ReduxAction} from './redux-action';\r\n\r\nexport type LogAction = LogErrorsAdd | LogWarningsAdd | LogWarningsClear | LogErrorsRemove;\r\n\r\nexport const LOG_ERRORS_ADD = 'LOG_ERRORS_ADD';\r\nexport type LogErrorsAdd = ReduxAction<typeof LOG_ERRORS_ADD, {\r\n  errors: string[]\r\n}>;\r\n\r\nexport const LOG_WARNINGS_ADD = 'LOG_WARNINGS_ADD';\r\nexport type LogWarningsAdd = ReduxAction<typeof LOG_WARNINGS_ADD, {\r\n  warnings: string[];\r\n  level: WarningLevel;\r\n}>;\r\n\r\nexport const LOG_WARNINGS_CLEAR = 'LOG_WARNINGS_CLEAR';\r\nexport type LogWarningsClear = PlainReduxAction<typeof LOG_WARNINGS_CLEAR>;\r\n\r\nexport const LOG_ERRORS_CLEAR = 'LOG_ERRORS_CLEAR';\r\nexport type LogErrorsRemove = PlainReduxAction<typeof LOG_ERRORS_CLEAR>;\r\n","/**\r\n * Helpers for implementing actions with Typescript.\r\n */\r\n\r\nimport {Action as BaseReduxAction, Dispatch} from 'redux';\r\nimport {ThunkAction} from 'redux-thunk';\r\n\r\n/**\r\n * Basic Redux Action of type A.\r\n * (A should be a type of a string literal.)\r\n */\r\nexport interface PlainReduxAction<A> extends BaseReduxAction {\r\n  type: A;\r\n};\r\n\r\n/**\r\n *\r\n */\r\nexport interface ReduxAction<A, P> extends PlainReduxAction<A> {\r\n  payload: P;\r\n};\r\n\r\n/**\r\n * Handler mixins interface for dealing with actions from presentation components.\r\n */\r\nexport interface ActionHandler<A> {\r\n  handleAction: (action: A) => void;\r\n}\r\n\r\n/**\r\n * Create a handleAction object\r\n */\r\nexport function createDispatchHandler<A extends (BaseReduxAction | ThunkAction<any, any, any>)>() {\r\n  return (dispatch: Dispatch<A>): ActionHandler<A> => ({\r\n    handleAction(action: A) {\r\n      // HACK: typing here is somewhat wrong -- we should remove any\r\n      dispatch(action as any);\r\n    }\r\n  });\r\n}\r\n","import {ReduxAction} from './redux-action';\r\n\r\nexport type RelatedViewsAction = RelatedViewsHideToggle;\r\n\r\nexport const RELATED_VIEWS_HIDE_TOGGLE = 'RELATED_VIEWS_HIDE_TOGGLE';\r\nexport type RelatedViewsHideToggle = ReduxAction<typeof RELATED_VIEWS_HIDE_TOGGLE, {\r\n  newIsCollapsed: boolean\r\n}>;\r\n","\r\nimport {Query} from 'compassql/build/src/query/query';\r\nimport {Dispatch} from 'redux';\r\nimport {ThunkAction} from 'redux-thunk';\r\nimport {Channel} from 'vega-lite/build/src/channel';\r\nimport {fetchCompassQLRecommend} from '../api/api';\r\nimport {State} from '../models/index';\r\nimport {ResultPlot, ResultPlotWithKey} from '../models/result';\r\nimport {ResultType} from '../models/result';\r\nimport {ShelfFieldDef} from '../models/shelf/spec/encoding';\r\nimport {selectConfig, selectData, selectSchema} from '../selectors';\r\nimport {Action} from './index';\r\nimport {ReduxAction} from './redux-action';\r\n\r\nexport type ResultAction = ResultRequest | ResultReceive | ResultLimitIncrease | ResultModifyAction;\r\n\r\nexport type ResultModifyAction = ResultModifyFieldProp<any> | ResultModifyNestedFieldProp<any, any>;\r\n\r\ntype ResultActionType = ResultAction['type'];\r\n\r\nconst RESULT_ACTION_TYPE_INDEX: {[K in ResultActionType]: 1} = {\r\n  RESULT_REQUEST: 1,\r\n  RESULT_RECEIVE: 1,\r\n  RESULT_LIMIT_INCREASE: 1,\r\n  // Result modify actions\r\n  RESULT_MODIFY_FIELD_PROP: 1,\r\n  RESULT_MODIFY_NESTED_FIELD_PROP: 1\r\n};\r\n\r\nexport function isResultAction(action: Action): action is ResultAction {\r\n  return RESULT_ACTION_TYPE_INDEX[action.type];\r\n}\r\n\r\nexport type ResultAsyncAction = AsyncResultRequest;\r\n\r\nexport const RESULT_REQUEST = 'RESULT_REQUEST';\r\nexport type ResultRequest = ReduxAction<typeof RESULT_REQUEST, {\r\n  resultType: ResultType\r\n}>;\r\n\r\nexport const RESULT_LIMIT_INCREASE = 'RESULT_LIMIT_INCREASE';\r\nexport type ResultLimitIncrease = ReduxAction<typeof RESULT_LIMIT_INCREASE, {\r\n  resultType: ResultType,\r\n  increment: number\r\n}>;\r\n\r\nexport const RESULT_RECEIVE = 'RESULT_RECEIVE';\r\nexport type ResultReceive = ReduxAction<typeof RESULT_RECEIVE, {\r\n  resultType: ResultType,\r\n  query: Query,\r\n  plots: ResultPlot[]\r\n}>;\r\n\r\nexport const RESULT_MODIFY_FIELD_PROP = 'RESULT_MODIFY_FIELD_PROP';\r\nexport type ResultModifyFieldProp<\r\n  P extends 'sort' // TODO: stack and format\r\n> = ReduxAction<typeof RESULT_MODIFY_FIELD_PROP, {\r\n  resultType: ResultType,\r\n  index: number,\r\n  channel: Channel,\r\n  prop: P\r\n  value: ShelfFieldDef[P]\r\n}>;\r\n\r\nexport const RESULT_MODIFY_NESTED_FIELD_PROP = 'RESULT_MODIFY_NESTED_FIELD_PROP';\r\nexport type ResultModifyNestedFieldProp<\r\n  P extends 'scale' | 'axis' | 'legend',\r\n  N extends keyof ShelfFieldDef[P]\r\n> = ReduxAction<typeof RESULT_MODIFY_NESTED_FIELD_PROP, {\r\n  resultType: ResultType,\r\n  index: number,\r\n  channel: Channel,\r\n  prop: P,\r\n  nestedProp: N,\r\n  value: ShelfFieldDef[P][N]\r\n}>;\r\n\r\nexport type AsyncResultRequest = ThunkAction<void , State, undefined>;\r\nexport function resultRequest(resultType: ResultType, query: Query, filterKey?: string): AsyncResultRequest {\r\n  return (dispatch: Dispatch<Action>, getState) => {\r\n    const schema = selectSchema(getState());\r\n    const data = selectData(getState());\r\n    const config = selectConfig(getState());\r\n\r\n    dispatch({\r\n      type: RESULT_REQUEST,\r\n      payload: {resultType}\r\n    });\r\n\r\n    // TODO: pass in config\r\n    return fetchCompassQLRecommend(query, schema, data, config).then(\r\n      (preFilteredPlots: ResultPlotWithKey[]) => {\r\n        const plots: ResultPlot[] = (\r\n          filterKey ?\r\n          preFilteredPlots.filter(p => p.groupByKey !== filterKey) :\r\n          preFilteredPlots\r\n        ).map(p => p.plot);\r\n\r\n        dispatch({\r\n          type: RESULT_RECEIVE,\r\n          payload: {query, plots, resultType}\r\n        });\r\n      }\r\n    );\r\n  };\r\n}\r\n","import {Query} from 'compassql/build/src/query/query';\r\nimport {ShelfGroupBy} from '../../models';\r\nimport {ReduxAction} from '../redux-action';\r\nimport {FilterAction} from './filter';\r\nimport {SpecAction} from './spec';\r\n\r\nexport * from './filter';\r\nexport * from './spec';\r\n\r\nexport type ShelfAction = FilterAction | SpecAction | ShelfLoadQuery | ShelfAutoAddCountChange | ShelfGroupByChange;\r\n\r\nexport const SHELF_LOAD_QUERY = 'SHELF_LOAD_QUERY';\r\nexport type ShelfLoadQuery = ReduxAction<typeof SHELF_LOAD_QUERY, {\r\n  query: Query\r\n}>;\r\n\r\nexport const SHELF_AUTO_ADD_COUNT_CHANGE = 'SHELF_AUTO_ADD_COUNT_CHANGE';\r\nexport type ShelfAutoAddCountChange = ReduxAction<typeof SHELF_AUTO_ADD_COUNT_CHANGE, {\r\n  autoAddCount: boolean\r\n}>;\r\n\r\nexport const SHELF_GROUP_BY_CHANGE = 'SHELF_GROUP_BY_CHANGE';\r\nexport type ShelfGroupByChange = ReduxAction<typeof SHELF_GROUP_BY_CHANGE, {\r\n  groupBy: ShelfGroupBy\r\n}>;\r\n","import {DateTime} from 'vega-lite/build/src/datetime';\r\nimport {FieldOneOfPredicate, FieldRangePredicate} from 'vega-lite/build/src/predicate';\r\nimport {TimeUnit} from 'vega-lite/build/src/timeunit';\r\nimport {PlainReduxAction, ReduxAction} from '../redux-action';\r\n\r\nexport type FilterAction = FilterAdd | FilterClear | FilterRemove | FilterToggle | FilterModifyExtent |\r\n  FilterModifyMinBound | FilterModifyMaxBound | FilterModifyOneOf | FilterModifyTimeUnit;\r\n\r\nexport const FILTER_ADD = 'FILTER_ADD';\r\nexport type FilterAdd = ReduxAction<typeof FILTER_ADD, {\r\n  filter: FieldRangePredicate | FieldOneOfPredicate,\r\n  index?: number\r\n}>;\r\n\r\nexport const FILTER_TOGGLE = 'FILTER_TOGGLE';\r\nexport type FilterToggle = ReduxAction<typeof FILTER_TOGGLE, {\r\n  filter: FieldRangePredicate |FieldOneOfPredicate\r\n}>;\r\n\r\nexport const FILTER_REMOVE = 'FILTER_REMOVE';\r\nexport type FilterRemove = ReduxAction<typeof FILTER_REMOVE, {\r\n  index: number\r\n}>;\r\n\r\nexport const FILTER_CLEAR = 'FILTER_CLEAR';\r\nexport type FilterClear = PlainReduxAction<typeof FILTER_CLEAR>;\r\n\r\nexport const FILTER_MODIFY_EXTENT = 'FILTER_MODIFY_EXTENT';\r\nexport type FilterModifyExtent = ReduxAction<typeof FILTER_MODIFY_EXTENT, {\r\n  range: number[] | DateTime[],\r\n  index: number\r\n}>;\r\n\r\nexport const FILTER_MODIFY_MIN_BOUND = 'FILTER_MODIFY_MIN_BOUND';\r\nexport type FilterModifyMinBound = ReduxAction<typeof FILTER_MODIFY_MIN_BOUND, {\r\n  minBound: number | DateTime,\r\n  index: number\r\n}>;\r\n\r\nexport const FILTER_MODIFY_MAX_BOUND = 'FILTER_MODIFY_MAX_BOUND';\r\nexport type FilterModifyMaxBound = ReduxAction<typeof FILTER_MODIFY_MAX_BOUND, {\r\n  maxBound: number | DateTime,\r\n  index: number\r\n}>;\r\n\r\nexport const FILTER_MODIFY_ONE_OF = 'FILTER_MODIFY_ONE_OF';\r\nexport type FilterModifyOneOf = ReduxAction<typeof FILTER_MODIFY_ONE_OF, {\r\n  oneOf: string[] | number[] | boolean[] | DateTime[],\r\n  index: number\r\n}>;\r\n\r\nexport const FILTER_MODIFY_TIME_UNIT = 'FILTER_MODIFY_TIME_UNIT';\r\nexport type FilterModifyTimeUnit = ReduxAction<typeof FILTER_MODIFY_TIME_UNIT, {\r\n  timeUnit: TimeUnit,\r\n  index: number,\r\n  domain: number[]\r\n}>;\r\n","import {State} from '../models';\r\nimport {ReduxAction} from './redux-action';\r\n\r\nexport type ApplicationStateAction = SetApplicationState;\r\n\r\nexport const SET_APPLICATION_STATE = 'SET_APPLICATION_STATE';\r\nexport type SetApplicationState = ReduxAction<typeof SET_APPLICATION_STATE, {\r\n  state: Readonly<State>\r\n}>;\r\n","import {PlainReduxAction} from './redux-action';\r\n\r\nexport type UndoableAction = Undo | Redo;\r\n\r\nexport const UNDO = 'UNDO';\r\nexport type Undo = PlainReduxAction<typeof UNDO>;\r\n\r\nexport const REDO = 'REDO';\r\nexport type Redo = PlainReduxAction<typeof REDO>;\r\n\r\n","import {Query} from 'compassql/build/src/query/query';\r\nimport {TopLevelFacetedUnitSpec} from 'vega-lite/build/src/spec';\r\nimport {PlainReduxAction, ReduxAction} from './redux-action';\r\n\r\nexport type ShelfPreviewAction = ShelfPreviewSpec | ShelfPreviewQuery | ShelfPreviewDisable;\r\n\r\nexport const SHELF_PREVIEW_SPEC = 'SHELF_PREVIEW_SPEC';\r\nexport type ShelfPreviewSpec = ReduxAction<typeof SHELF_PREVIEW_SPEC, {\r\n  spec: TopLevelFacetedUnitSpec\r\n}>;\r\n\r\nexport const SHELF_PREVIEW_QUERY = 'SHELF_PREVIEW_QUERY';\r\nexport type ShelfPreviewQuery = ReduxAction<typeof SHELF_PREVIEW_QUERY, {\r\n  query: Query\r\n}>;\r\n\r\nexport const SHELF_PREVIEW_DISABLE = 'SHELF_PREVIEW_DISABLE';\r\nexport type ShelfPreviewDisable = PlainReduxAction<typeof SHELF_PREVIEW_DISABLE>;\r\n","\r\nimport * as React from 'react';\r\nimport {Dispatch} from 'redux';\r\nimport {ActionCreators} from 'redux-undo';\r\nimport {Data} from 'vega-lite/build/src/data';\r\nimport { FacetedCompositeUnitSpec, TopLevel } from 'vega-lite/build/src/spec';\r\nimport {datasetLoad, SET_APPLICATION_STATE, SET_CONFIG} from '../actions';\r\nimport {SPEC_LOAD} from '../actions/shelf';\r\nimport {VoyagerConfig} from '../models/config';\r\nimport {State} from '../models/index';\r\nimport {AppRoot} from './app-root';\r\n// import * as firebase from 'firebase/app'\r\n// import 'firebase/auth'\r\n\r\n// const firebaseConfig = {\r\n//   apiKey: \"AIzaSyDVjpcDXylWKcKr0RNiMOfV2gZCulmAq6Q\",\r\n//   authDomain: \"geneticaai.firebaseapp.com\",\r\n//   databaseURL: \"https://geneticaai-default-rtdb.firebaseio.com\",\r\n//   projectId: \"geneticaai\",\r\n//   storageBucket: \"geneticaai.appspot.com\",\r\n//   messagingSenderId: \"877088757746\",\r\n//   appId: \"1:877088757746:web:cf1e2a68d475e887b37d6b\",\r\n//   measurementId: \"G-Z6WYPVVK8C\"\r\n// };\r\n\r\n// console.log('firebase', firebase);\r\n\r\nexport interface Props extends React.Props<App> {\r\n  config?: VoyagerConfig;\r\n  data?: Data;\r\n  applicationState?: Readonly<State>;\r\n  spec?: TopLevel<FacetedCompositeUnitSpec>;\r\n  filename?: string;\r\n  dispatch: Dispatch<State>;\r\n}\r\n\r\nexport class App extends React.PureComponent<Props, {}> {\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n  }\r\n\r\n  public componentWillUpdate(nextProps: Props) {\r\n    this.update(nextProps);\r\n  }\r\n\r\n  public componentWillMount() {\r\n    // Clear history as redux-undo seems to always put the first action after\r\n    // an init into the history. This ensures we start with a fresh history once\r\n    // the app is about to start.\r\n    this.props.dispatch(ActionCreators.clearHistory());\r\n    this.update(this.props);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    document.addEventListener('myEvent', (event) => {\r\n      // console.log('event xx', event['data']);\r\n      this.props.dispatch(datasetLoad(null, event['data'].data));\r\n    });\r\n  }\r\n\r\n  public render() {\r\n    return <AppRoot/>;\r\n  }\r\n\r\n  private update(nextProps: Props) {\r\n    const { data, config, applicationState, dispatch, spec, filename } = nextProps;\r\n    if (data) {\r\n      this.setData(data, filename);\r\n    }\r\n\r\n    if (config) {\r\n      this.setConfig(config);\r\n    }\r\n\r\n    if (spec) {\r\n      // Note that this will overwrite other passed in props\r\n      this.setSpec(spec, filename);\r\n    }\r\n\r\n    if (applicationState) {\r\n      // Note that this will overwrite other passed in props\r\n      this.setApplicationState(applicationState);\r\n    }\r\n  }\r\n\r\n  private setData(data: Data, filename: string): any {\r\n    return this.props.dispatch(datasetLoad(filename, data));\r\n  }\r\n\r\n  private setConfig(config: VoyagerConfig) {\r\n    this.props.dispatch({\r\n      type: SET_CONFIG,\r\n      payload: {\r\n        config,\r\n      }\r\n    });\r\n  }\r\n\r\n  private setSpec(spec: TopLevel<FacetedCompositeUnitSpec>, filename: string) {\r\n    if (spec.data) {\r\n      this.setData(spec.data, filename)\r\n        .then(\r\n          () => {\r\n            this.shelfSpecLoad(spec);\r\n          },\r\n          (err: any) => {\r\n            throw new Error('error setting data for spec:' + err.toString());\r\n          }\r\n        );\r\n    } else {\r\n      this.shelfSpecLoad(spec);\r\n    }\r\n  }\r\n\r\n  private shelfSpecLoad(spec: TopLevel<FacetedCompositeUnitSpec>) {\r\n    this.props.dispatch({\r\n      type: SPEC_LOAD,\r\n      payload: {\r\n        spec,\r\n        keepWildcardMark: false\r\n      }\r\n    });\r\n  }\r\n\r\n  private setApplicationState(state: Readonly<State>): void {\r\n    this.props.dispatch({\r\n      type: SET_APPLICATION_STATE,\r\n      payload: {\r\n        state,\r\n      }\r\n    });\r\n  }\r\n}\r\n","\r\nimport * as React from 'react';\r\nimport {DragDropContext} from 'react-dnd';\r\nimport HTML5Backend from 'react-dnd-html5-backend';\r\nimport {connect} from 'react-redux';\r\nimport {ClipLoader} from 'react-spinners';\r\nimport * as SplitPane from 'react-split-pane';\r\nimport {SPINNER_COLOR} from '../../constants';\r\nimport {VoyagerConfig} from '../../models/config';\r\nimport {Dataset} from '../../models/dataset';\r\nimport {State} from '../../models/index';\r\nimport {selectConfig} from '../../selectors';\r\nimport {selectDataset} from '../../selectors/dataset';\r\nimport '../app.scss';\r\nimport {DataPane} from '../data-pane/index';\r\nimport {EncodingPane} from '../encoding-pane/index';\r\nimport {Footer} from '../footer/index';\r\nimport {Header} from '../header/index';\r\nimport {LoadData} from '../load-data-pane/index';\r\nimport {LogPane} from '../log-pane/index';\r\nimport {ViewPane} from '../view-pane/index';\r\n\r\nexport interface AppRootProps {\r\n  dataset: Dataset;\r\n  config: VoyagerConfig;\r\n}\r\n\r\nclass AppRootBase extends React.PureComponent<AppRootProps, {}> {\r\n  public render() {\r\n    const {dataset, config} = this.props;\r\n    const {hideHeader, hideFooter} = config;\r\n    let bottomPane, footer;\r\n    bottomPane = (\r\n      <SplitPane split=\"vertical\" defaultSize={200} minSize={175} maxSize={350}>\r\n        <DataPane/>\r\n        <SplitPane split=\"vertical\" defaultSize={235} minSize={200} maxSize={350}>\r\n          <EncodingPane/>\r\n          <ViewPane/>\r\n        </SplitPane>\r\n      </SplitPane>\r\n    );\r\n    if (!hideFooter) {\r\n      footer = <Footer/>;\r\n    }\r\n    return (\r\n      <div className=\"voyager\">\r\n        <LogPane/>\r\n        {!hideHeader && <Header/>}\r\n        <ClipLoader color={SPINNER_COLOR} loading={dataset.isLoading}/>\r\n        {bottomPane}\r\n        {footer}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const AppRoot = connect(\r\n  (state: State) => {\r\n    return {\r\n      dataset: selectDataset(state),\r\n      config: selectConfig(state)\r\n    };\r\n  }\r\n)(DragDropContext(HTML5Backend)(AppRootBase));\r\n\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__305__;","module.exports = __WEBPACK_EXTERNAL_MODULE__306__;","module.exports = require('./dist/index');","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['module', './spinners/BarLoader', './spinners/BeatLoader', './spinners/BounceLoader', './spinners/CircleLoader', './spinners/ClipLoader', './spinners/ClimbingBoxLoader', './spinners/DotLoader', './spinners/FadeLoader', './spinners/GridLoader', './spinners/HashLoader', './spinners/MoonLoader', './spinners/PacmanLoader', './spinners/PropagateLoader', './spinners/PulseLoader', './spinners/RingLoader', './spinners/RiseLoader', './spinners/RotateLoader', './spinners/ScaleLoader', './spinners/SyncLoader'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./spinners/BarLoader'), require('./spinners/BeatLoader'), require('./spinners/BounceLoader'), require('./spinners/CircleLoader'), require('./spinners/ClipLoader'), require('./spinners/ClimbingBoxLoader'), require('./spinners/DotLoader'), require('./spinners/FadeLoader'), require('./spinners/GridLoader'), require('./spinners/HashLoader'), require('./spinners/MoonLoader'), require('./spinners/PacmanLoader'), require('./spinners/PropagateLoader'), require('./spinners/PulseLoader'), require('./spinners/RingLoader'), require('./spinners/RiseLoader'), require('./spinners/RotateLoader'), require('./spinners/ScaleLoader'), require('./spinners/SyncLoader'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.BarLoader, global.BeatLoader, global.BounceLoader, global.CircleLoader, global.ClipLoader, global.ClimbingBoxLoader, global.DotLoader, global.FadeLoader, global.GridLoader, global.HashLoader, global.MoonLoader, global.PacmanLoader, global.PropagateLoader, global.PulseLoader, global.RingLoader, global.RiseLoader, global.RotateLoader, global.ScaleLoader, global.SyncLoader);\n    global.index = mod.exports;\n  }\n})(this, function (module, _BarLoader, _BeatLoader, _BounceLoader, _CircleLoader, _ClipLoader, _ClimbingBoxLoader, _DotLoader, _FadeLoader, _GridLoader, _HashLoader, _MoonLoader, _PacmanLoader, _PropagateLoader, _PulseLoader, _RingLoader, _RiseLoader, _RotateLoader, _ScaleLoader, _SyncLoader) {\n  'use strict';\n\n  var _BarLoader2 = _interopRequireDefault(_BarLoader);\n\n  var _BeatLoader2 = _interopRequireDefault(_BeatLoader);\n\n  var _BounceLoader2 = _interopRequireDefault(_BounceLoader);\n\n  var _CircleLoader2 = _interopRequireDefault(_CircleLoader);\n\n  var _ClipLoader2 = _interopRequireDefault(_ClipLoader);\n\n  var _ClimbingBoxLoader2 = _interopRequireDefault(_ClimbingBoxLoader);\n\n  var _DotLoader2 = _interopRequireDefault(_DotLoader);\n\n  var _FadeLoader2 = _interopRequireDefault(_FadeLoader);\n\n  var _GridLoader2 = _interopRequireDefault(_GridLoader);\n\n  var _HashLoader2 = _interopRequireDefault(_HashLoader);\n\n  var _MoonLoader2 = _interopRequireDefault(_MoonLoader);\n\n  var _PacmanLoader2 = _interopRequireDefault(_PacmanLoader);\n\n  var _PropagateLoader2 = _interopRequireDefault(_PropagateLoader);\n\n  var _PulseLoader2 = _interopRequireDefault(_PulseLoader);\n\n  var _RingLoader2 = _interopRequireDefault(_RingLoader);\n\n  var _RiseLoader2 = _interopRequireDefault(_RiseLoader);\n\n  var _RotateLoader2 = _interopRequireDefault(_RotateLoader);\n\n  var _ScaleLoader2 = _interopRequireDefault(_ScaleLoader);\n\n  var _SyncLoader2 = _interopRequireDefault(_SyncLoader);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  module.exports = {\n    BarLoader: _BarLoader2.default,\n    BeatLoader: _BeatLoader2.default,\n    BounceLoader: _BounceLoader2.default,\n    CircleLoader: _CircleLoader2.default,\n    ClipLoader: _ClipLoader2.default,\n    ClimbingBoxLoader: _ClimbingBoxLoader2.default,\n    DotLoader: _DotLoader2.default,\n    FadeLoader: _FadeLoader2.default,\n    GridLoader: _GridLoader2.default,\n    HashLoader: _HashLoader2.default,\n    MoonLoader: _MoonLoader2.default,\n    PacmanLoader: _PacmanLoader2.default,\n    PropagateLoader: _PropagateLoader2.default,\n    PulseLoader: _PulseLoader2.default,\n    RingLoader: _RingLoader2.default,\n    RiseLoader: _RiseLoader2.default,\n    RotateLoader: _RotateLoader2.default,\n    ScaleLoader: _ScaleLoader2.default,\n    SyncLoader: _SyncLoader2.default\n  };\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule', '../helpers'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'), require('../helpers'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule, global.helpers);\n    global.BarLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule, _helpers) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframesLong = {\n    '0%': {\n      left: '-35%',\n      right: '100%'\n    },\n    '60%': {\n      left: '100%',\n      right: '-90%'\n    },\n    '100%': {\n      left: '100%',\n      right: '-90%'\n    }\n  };\n\n  /**\n   * @type {object}\n   */\n  var keyframesShort = {\n    '0%': {\n      left: '-200%',\n      right: '100%'\n    },\n    '60%': {\n      left: '107%',\n      right: '-8%'\n    },\n    '100%': {\n      left: '107%',\n      right: '-8%'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationNameLong = (0, _insertKeyframesRule2.default)(keyframesLong);\n\n  /**\n   * @type {string}\n   */\n  var animationNameShort = (0, _insertKeyframesRule2.default)(keyframesShort);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getLineStyle',\n      value: function getLineStyle() {\n        return {\n          position: 'absolute',\n          height: this.props.height,\n          display: 'block',\n          backgroundColor: this.props.color,\n          borderRadius: 2,\n          backgroundClip: 'padding-box',\n          overflow: 'hidden',\n          willChange: 'left right'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = void 0;\n        var animationFillMode = 'forwards';\n\n        if (i === 1) {\n          animation = [animationNameLong, '2.1s', 'cubic-bezier(0.65, 0.815, 0.735, 0.395)', 'infinite'].join(' ');\n        } else if (i === 2) {\n          animation = [animationNameShort, '2.1s', '1.15s', 'cubic-bezier(0.165, 0.84, 0.44, 1)', 'infinite'].join(' ');\n        }\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        if (i === 0) {\n          var color = this.props.color;\n\n\n          return {\n            position: 'relative',\n            height: this.props.height,\n            width: this.props.width,\n            overflow: 'hidden',\n            backgroundColor: (0, _helpers.calculateRgba)(color, 0.2),\n            backgroundClip: 'padding-box'\n          };\n        }\n\n        return (0, _appendVendorPrefix2.default)(this.getLineStyle(i), this.getAnimationStyle(i));\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--bar' },\n            _react2.default.createElement(\n              'div',\n              { style: this.getStyle(0) },\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    width: _propTypes2.default.number,\n    height: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    width: 100,\n    height: 4\n  };\n\n  exports.default = Loader;\n});","/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar invariant = require('fbjs/lib/invariant');\nvar warning = require('fbjs/lib/warning');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar checkPropTypes = require('./checkPropTypes');\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          invariant(\n            false,\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            warning(\n              false,\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `%s` prop on `%s`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.',\n              propFullName,\n              componentName\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunction.thatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      process.env.NODE_ENV !== 'production' ? warning(false, 'Invalid argument supplied to oneOf, expected an instance of array.') : void 0;\n      return emptyFunction.thatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues);\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + propValue + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (propValue.hasOwnProperty(key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? warning(false, 'Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunction.thatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        warning(\n          false,\n          'Invalid argument supplid to oneOfType. Expected an array of check functions, but ' +\n          'received %s at index %s.',\n          getPostfixForTypeWarning(checker),\n          i\n        );\n        return emptyFunction.thatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","\"use strict\";\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * \n */\n\nfunction makeEmptyFunction(arg) {\n  return function () {\n    return arg;\n  };\n}\n\n/**\n * This function accepts and discards inputs; it has no side effects. This is\n * primarily useful idiomatically for overridable function endpoints which\n * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n */\nvar emptyFunction = function emptyFunction() {};\n\nemptyFunction.thatReturns = makeEmptyFunction;\nemptyFunction.thatReturnsFalse = makeEmptyFunction(false);\nemptyFunction.thatReturnsTrue = makeEmptyFunction(true);\nemptyFunction.thatReturnsNull = makeEmptyFunction(null);\nemptyFunction.thatReturnsThis = function () {\n  return this;\n};\nemptyFunction.thatReturnsArgument = function (arg) {\n  return arg;\n};\n\nmodule.exports = emptyFunction;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;","/**\n * Copyright 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n */\n\n'use strict';\n\nvar emptyFunction = require('./emptyFunction');\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar warning = emptyFunction;\n\nif (process.env.NODE_ENV !== 'production') {\n  (function () {\n    var printWarning = function printWarning(format) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var argIndex = 0;\n      var message = 'Warning: ' + format.replace(/%s/g, function () {\n        return args[argIndex++];\n      });\n      if (typeof console !== 'undefined') {\n        console.error(message);\n      }\n      try {\n        // --- Welcome to debugging React ---\n        // This error was thrown as a convenience so that you can use this stack\n        // to find the callsite that caused this warning to fire.\n        throw new Error(message);\n      } catch (x) {}\n    };\n\n    warning = function warning(condition, format) {\n      if (format === undefined) {\n        throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');\n      }\n\n      if (format.indexOf('Failed Composite propType: ') === 0) {\n        return; // Ignore CompositeComponent proptype check.\n      }\n\n      if (!condition) {\n        for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n          args[_key2 - 2] = arguments[_key2];\n        }\n\n        printWarning.apply(undefined, [format].concat(args));\n      }\n    };\n  })();\n}\n\nmodule.exports = warning;","/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== 'production') {\n  var invariant = require('fbjs/lib/invariant');\n  var warning = require('fbjs/lib/warning');\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (typeSpecs.hasOwnProperty(typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          invariant(typeof typeSpecs[typeSpecName] === 'function', '%s: %s type `%s` is invalid; it must be a function, usually from ' + 'React.PropTypes.', componentName || 'React class', location, typeSpecName);\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        warning(!error || error instanceof Error, '%s: type specification of %s `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error);\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          warning(false, 'Failed %s type: %s%s', location, error.message, stack != null ? stack : '');\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar invariant = require('fbjs/lib/invariant');\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    invariant(\n      false,\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","'use strict';\n\nvar getVendorPropertyName = require('./getVendorPropertyName');\n\nmodule.exports = function(target, sources) {\n  var to = Object(target);\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  for (var nextIndex = 1; nextIndex < arguments.length; nextIndex++) {\n    var nextSource = arguments[nextIndex];\n    if (nextSource == null) {\n      continue;\n    }\n\n    var from = Object(nextSource);\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n  }\n\n  var prefixed = {};\n  for (var key in to) {\n    prefixed[getVendorPropertyName(key)] = to[key]\n  }\n\n  return prefixed\n}\n","'use strict';\n\nvar builtinStyle = require('./builtinStyle');\nvar prefixes = ['Moz', 'Webkit', 'O', 'ms'];\nvar domVendorPrefix;\n\n// Helper function to get the proper vendor property name. (transition => WebkitTransition)\nmodule.exports = function(prop, isSupportTest) {\n\n  var vendorProp;\n  if (prop in builtinStyle) return prop;\n\n  var UpperProp = prop.charAt(0).toUpperCase() + prop.substr(1);\n\n  if (domVendorPrefix) {\n\n    vendorProp = domVendorPrefix + UpperProp;\n    if (vendorProp in builtinStyle) {\n      return vendorProp;\n    }\n  } else {\n\n    for (var i = 0; i < prefixes.length; ++i) {\n      vendorProp = prefixes[i] + UpperProp;\n      if (vendorProp in builtinStyle) {\n        domVendorPrefix = prefixes[i];\n        return vendorProp;\n      }\n    }\n  }\n\n  // if support test, not fallback to origin prop name\n  if (!isSupportTest) {\n    return prop;\n  }\n\n}\n","'use strict';\n\nmodule.exports = document.createElement('div').style;\n","'use strict';\n\nvar insertRule = require('./insertRule');\nvar vendorPrefix = require('./getVendorPrefix')();\nvar index = 0;\n\nmodule.exports = function(keyframes) {\n  // random name\n  var name = 'anim_' + (++index) + (+new Date);\n  var css = \"@\" + vendorPrefix + \"keyframes \" + name + \" {\";\n\n  for (var key in keyframes) {\n    css += key + \" {\";\n\n    for (var property in keyframes[key]) {\n      var part = \":\" + keyframes[key][property] + \";\";\n      // We do vendor prefix for every property\n      css += vendorPrefix + property + part;\n      css += property + part;\n    }\n\n    css += \"}\";\n  }\n\n  css += \"}\";\n\n  insertRule(css);\n\n  return name\n}\n","'use strict';\n\nvar extraSheet;\n\nmodule.exports = function(css) {\n\n  if (!extraSheet) {\n    // First time, create an extra stylesheet for adding rules\n    extraSheet = document.createElement('style');\n    document.getElementsByTagName('head')[0].appendChild(extraSheet);\n    // Keep reference to actual StyleSheet object (`styleSheet` for IE < 9)\n    extraSheet = extraSheet.sheet || extraSheet.styleSheet;\n  }\n\n  var index = (extraSheet.cssRules || extraSheet.rules).length;\n  extraSheet.insertRule(css, index);\n\n  return extraSheet;\n}\n","'use strict';\n\nvar cssVendorPrefix;\n\nmodule.exports = function() {\n\n  if (cssVendorPrefix) return cssVendorPrefix;\n\n  var styles = window.getComputedStyle(document.documentElement, '');\n  var pre = (Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o']))[1];\n\n  return cssVendorPrefix = '-' + pre + '-';\n}\n","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports);\n    global.index = mod.exports;\n  }\n})(this, function (exports) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  var calculateRgba = exports.calculateRgba = function calculateRgba(color, opacity) {\n    if (color[0] === '#') {\n      color = color.slice(1);\n    }\n\n    if (color.length === 3) {\n      var res = '';\n      color.split('').forEach(function (c) {\n        res += c;\n        res += c;\n      });\n      color = res;\n    }\n\n    var rgbValues = color.match(/.{2}/g).map(function (hex) {\n      return parseInt(hex, 16);\n    }).join(', ');\n    return 'rgba(' + rgbValues + ', ' + opacity + ')';\n  };\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.BeatLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '50%': {\n      transform: 'scale(0.75)',\n      opacity: 0.2\n    },\n    '100%': {\n      transform: 'scale(1)',\n      opacity: 1\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          backgroundColor: this.props.color,\n          width: this.props.size,\n          height: this.props.size,\n          margin: this.props.margin,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [animationName, '0.7s', i % 2 ? '0s' : '0.35s', 'infinite', 'linear'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i), { display: 'inline-block' });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--beat' },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) }),\n            _react2.default.createElement('div', { style: this.getStyle(3) })\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    margin: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 15,\n    margin: 2\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.BounceLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '0%, 100%': {\n      transform: 'scale(0)'\n    },\n    '50%': {\n      transform: 'scale(1.0)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          backgroundColor: this.props.color,\n          width: this.props.size,\n          height: this.props.size,\n          borderRadius: '100%',\n          opacity: 0.6,\n          position: 'absolute',\n          top: 0,\n          left: 0\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [animationName, '2s', i === 1 ? '1s' : '0s', 'infinite', 'ease-in-out'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        if (i) {\n          return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i));\n        }\n\n        return (0, _appendVendorPrefix2.default)({\n          width: this.props.size,\n          height: this.props.size,\n          position: 'relative'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--bounce' },\n            _react2.default.createElement(\n              'div',\n              { style: this.getStyle() },\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 60\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.CircleLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    \"0%\": { transform: \"rotate(0deg)\" },\n    \"50%\": { transform: \"rotate(180deg)\" },\n    \"100%\": { transform: \"rotate(360deg)\" }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getCircleStyle',\n      value: function getCircleStyle() {\n        return {\n          borderRadius: \"100%\",\n          position: \"absolute\",\n          border: '1px solid ' + this.props.color,\n          transition: \"2s\",\n          borderBottom: \"none\",\n          borderRight: \"none\"\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [animationName, '1s', i * 0.2 + 's', 'infinite', 'linear'].join(' ');\n        var animationFillMode = '';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        var width = this.props.size * (1 - i / 10);\n        var height = width;\n        var left = i * 0.35 * 2.5 + '%';\n        var top = i * 0.7 * 2.5 + '%';\n\n        return (0, _appendVendorPrefix2.default)(this.getCircleStyle(), this.getAnimationStyle(i), {\n          width: width,\n          height: height,\n          left: left,\n          top: top\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          var style = {\n            height: this.props.size,\n            width: this.props.size,\n            position: 'relative'\n          };\n\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--circle' },\n            _react2.default.createElement(\n              'div',\n              { style: style },\n              _react2.default.createElement('div', { style: this.getStyle(0) }),\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) }),\n              _react2.default.createElement('div', { style: this.getStyle(3) }),\n              _react2.default.createElement('div', { style: this.getStyle(4) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 50\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.ClipLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '0%': {\n      transform: 'rotate(0deg) scale(1)'\n    },\n    '50%': {\n      transform: 'rotate(180deg) scale(0.8)'\n    },\n    '100%': {\n      transform: 'rotate(360deg) scale(1)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          width: this.props.size,\n          height: this.props.size,\n          border: '2px solid',\n          borderColor: this.props.color,\n          borderBottomColor: 'transparent',\n          borderRadius: '100%',\n          background: 'transparent !important'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle() {\n        var animation = [animationName, '0.75s', '0s', 'infinite', 'linear'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i), {\n          display: 'inline-block'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--clip' },\n            _react2.default.createElement('div', { style: this.getStyle() })\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 35\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.ClimbingBoxLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '0%': {\n      transform: 'translate(0, -1em) rotate(-45deg)'\n    },\n    '5%': {\n      transform: 'translate(0, -1em) rotate(-50deg)'\n    },\n    '20%': {\n      transform: 'translate(1em, -2em) rotate(47deg)'\n    },\n    '25%': {\n      transform: 'translate(1em, -2em) rotate(45deg)'\n    },\n    '30%': {\n      transform: 'translate(1em, -2em) rotate(40deg)'\n    },\n    '45%': {\n      transform: 'translate(2em, -3em) rotate(137deg)'\n    },\n    '50%': {\n      transform: 'translate(2em, -3em) rotate(135deg)'\n    },\n    '55%': {\n      transform: 'translate(2em, -3em) rotate(130deg)'\n    },\n    '70%': {\n      transform: 'translate(3em, -4em) rotate(217deg)'\n    },\n    '75%': {\n      transform: 'translate(3em, -4em) rotate(220deg)'\n    },\n    '100%': {\n      transform: 'translate(0, -1em) rotate(-225deg)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBoxStyle',\n      value: function getBoxStyle() {\n        return {\n          position: 'absolute',\n          left: '0px',\n          bottom: '-0.1em',\n          width: '1em',\n          height: '1em',\n          backgroundColor: 'transparent',\n          border: '0.25em solid ' + this.props.color,\n          borderRadius: '15%',\n          transform: 'translate(0, -1em) rotate(-45deg)'\n        };\n      }\n    }, {\n      key: 'getHillStyle',\n      value: function getHillStyle() {\n        return {\n          position: 'absolute',\n          width: '7.1em',\n          height: '7.1em',\n          top: '1.7em',\n          left: '1.7em',\n          borderLeft: '0.25em solid ' + this.props.color,\n          transform: 'rotate(45deg)'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle() {\n        var animation = [animationName, '2.5s', 'infinite', 'cubic-bezier(.79, 0, .47, .97)'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle() {\n        return (0, _appendVendorPrefix2.default)(this.getBoxStyle(), this.getAnimationStyle());\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          var style = {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            marginTop: '-2.7em',\n            marginLeft: '-2.7em',\n            width: '5.4em',\n            height: '5.4em',\n            fontSize: this.props.size\n          };\n\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--climbing-box' },\n            _react2.default.createElement(\n              'div',\n              { style: style },\n              _react2.default.createElement('div', { style: this.getStyle() }),\n              _react2.default.createElement('div', { style: this.getHillStyle() })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 15\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.DotLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var rotateKeyframes = {\n    '100%': {\n      transform: 'rotate(360deg)'\n    }\n  };\n\n  /**\n   * @type {object}\n   */\n  var bounceKeyframes = {\n    '0%, 100%': {\n      transform: 'scale(0)'\n    },\n    '50%': {\n      transform: 'scale(1.0)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var rotateAnimationName = (0, _insertKeyframesRule2.default)(rotateKeyframes);\n\n  /**\n   * @type {string}\n   */\n  var bounceAnimationName = (0, _insertKeyframesRule2.default)(bounceKeyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle(size) {\n        return {\n          backgroundColor: this.props.color,\n          width: size,\n          height: size,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [i === 0 ? rotateAnimationName : bounceAnimationName, '2s', i === 2 ? '-1s' : '0s', 'infinite', 'linear'].join(' ');\n        var animationFillMode = 'forwards';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        var size = this.props.size;\n\n        var ballSize = size / 2;\n\n        if (i) {\n          return (0, _appendVendorPrefix2.default)(this.getBallStyle(ballSize), this.getAnimationStyle(i), {\n            position: 'absolute',\n            top: i % 2 ? 0 : 'auto',\n            bottom: i % 2 ? 'auto' : 0\n          });\n        }\n\n        return (0, _appendVendorPrefix2.default)(this.getAnimationStyle(i), {\n          width: size,\n          height: size,\n          position: 'relative'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--dot' },\n            _react2.default.createElement(\n              'div',\n              { style: this.getStyle(0) },\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 60\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.FadeLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '50%': {\n      opacity: 0.3\n    },\n    '100%': {\n      opacity: 1\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getLineStyle',\n      value: function getLineStyle() {\n        return {\n          backgroundColor: this.props.color,\n          height: this.props.height,\n          width: this.props.width,\n          margin: this.props.margin,\n          borderRadius: this.props.radius\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [animationName, '1.2s', i * 0.12 + 's', 'infinite', 'ease-in-out'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getPosStyle',\n      value: function getPosStyle(i) {\n        var radius = 20;\n        var quarter = radius / 2 + radius / 5.5;\n\n        var lines = {\n          l1: {\n            top: radius,\n            left: 0\n          },\n          l2: {\n            top: quarter,\n            left: quarter,\n            transform: 'rotate(-45deg)'\n          },\n          l3: {\n            top: 0,\n            left: radius,\n            transform: 'rotate(90deg)'\n          },\n          l4: {\n            top: -quarter,\n            left: quarter,\n            transform: 'rotate(45deg)'\n          },\n          l5: {\n            top: -radius,\n            left: 0\n          },\n          l6: {\n            top: -quarter,\n            left: -quarter,\n            transform: 'rotate(-45deg)'\n          },\n          l7: {\n            top: 0,\n            left: -radius,\n            transform: 'rotate(90deg)'\n          },\n          l8: {\n            top: quarter,\n            left: -quarter,\n            transform: 'rotate(45deg)'\n          }\n        };\n\n        return lines['l' + i];\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getLineStyle(i), this.getPosStyle(i), this.getAnimationStyle(i), {\n          position: 'absolute'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          var style = {\n            position: 'relative',\n            fontSize: 0\n          };\n\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--fade' },\n            _react2.default.createElement(\n              'div',\n              { style: style },\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) }),\n              _react2.default.createElement('div', { style: this.getStyle(3) }),\n              _react2.default.createElement('div', { style: this.getStyle(4) }),\n              _react2.default.createElement('div', { style: this.getStyle(5) }),\n              _react2.default.createElement('div', { style: this.getStyle(6) }),\n              _react2.default.createElement('div', { style: this.getStyle(7) }),\n              _react2.default.createElement('div', { style: this.getStyle(8) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    height: _propTypes2.default.number,\n    width: _propTypes2.default.number,\n    margin: _propTypes2.default.number,\n    radius: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    height: 15,\n    width: 5,\n    margin: 2,\n    radius: 2\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.GridLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '0%': {\n      transform: 'scale(1)'\n    },\n    '50%': {\n      transform: 'scale(0.5)',\n      opacity: 0.7\n    },\n    '100%': {\n      transform: 'scale(1)',\n      opacity: 1\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  /**\n   * @param  {number} top top position\n   * @return {number} random value\n   */\n  var random = function random(top) {\n    return Math.random() * top;\n  };\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          backgroundColor: this.props.color,\n          width: this.props.size,\n          height: this.props.size,\n          margin: this.props.margin,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle() {\n        var animationDuration = random(100) / 100 + 0.6 + 's';\n        var animationDelay = random(100) / 100 - 0.2 + 's';\n\n        var animation = [animationName, animationDuration, animationDelay, 'infinite', 'ease'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i), {\n          display: 'inline-block'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          var style = {\n            width: parseFloat(this.props.size) * 3 + parseFloat(this.props.margin) * 6,\n            fontSize: 0\n          };\n\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--grid' },\n            _react2.default.createElement(\n              'div',\n              { style: style },\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) }),\n              _react2.default.createElement('div', { style: this.getStyle(3) }),\n              _react2.default.createElement('div', { style: this.getStyle(4) }),\n              _react2.default.createElement('div', { style: this.getStyle(5) }),\n              _react2.default.createElement('div', { style: this.getStyle(6) }),\n              _react2.default.createElement('div', { style: this.getStyle(7) }),\n              _react2.default.createElement('div', { style: this.getStyle(8) }),\n              _react2.default.createElement('div', { style: this.getStyle(9) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    margin: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 15,\n    margin: 2\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule', '../helpers'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'), require('../helpers'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule, global.helpers);\n    global.HashLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule, _helpers) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @param {number} size\n   * @param {string} color\n   * @return {object} object with keyframe properties\n   */\n\n  var keyframesBefore = function keyframesBefore(size, color) {\n    var thickness = size / 5;\n    var lat = (size - thickness) / 2;\n    var offset = lat - thickness;\n    color = (0, _helpers.calculateRgba)(color, 0.75);\n    return {\n      '0%': {\n        width: thickness + 'px',\n        'box-shadow': lat + 'px ' + -offset + 'px ' + color + ', ' + -lat + 'px ' + offset + 'px ' + color\n      },\n      '35%': {\n        width: size + 'px',\n        'box-shadow': '0 ' + -offset + 'px ' + color + ', 0 ' + offset + 'px ' + color\n      },\n      '70%': {\n        width: thickness + 'px',\n        'box-shadow': -lat + 'px ' + -offset + 'px ' + color + ', ' + lat + 'px ' + offset + 'px ' + color\n      },\n      '100%': {\n        'box-shadow': lat + 'px ' + -offset + 'px ' + color + ', ' + -lat + 'px ' + offset + 'px ' + color\n      }\n    };\n  };\n\n  /**\n   * @param {number} size\n   * @param {string} color\n   * @return {object} object with keyframe properties\n   */\n\n  var keyframesAfter = function keyframesAfter(size, color) {\n    var thickness = size / 5;\n    var lat = (size - thickness) / 2;\n    var offset = lat - thickness;\n    color = (0, _helpers.calculateRgba)(color, 0.75);\n    return {\n      '0%': {\n        height: thickness + 'px',\n        'box-shadow': offset + 'px ' + lat + 'px ' + color + ', ' + -offset + 'px ' + -lat + 'px ' + color\n      },\n      '35%': {\n        height: size + 'px',\n        'box-shadow': offset + 'px ' + 0 + ' ' + color + ', ' + -offset + 'px ' + 0 + ' ' + color\n      },\n      '70%': {\n        height: thickness + 'px',\n        'box-shadow': offset + 'px ' + -lat + 'px ' + color + ', ' + -offset + 'px ' + lat + 'px ' + color\n      },\n      '100%': {\n        'box-shadow': offset + 'px ' + lat + 'px ' + color + ', ' + -offset + 'px ' + -lat + 'px ' + color\n      }\n    };\n  };\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getLineStyle',\n      value: function getLineStyle() {\n        return {\n          position: 'absolute',\n          content: '',\n          top: '50%',\n          left: '50%',\n          display: 'block',\n          width: this.props.size / 5,\n          height: this.props.size / 5,\n          borderRadius: this.props.size / 10,\n          transform: 'translate(-50%, -50%)'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var keyframes = void 0;\n        var _props = this.props,\n            color = _props.color,\n            size = _props.size;\n\n        if (i === 1) {\n          keyframes = keyframesBefore(size, color);\n        } else {\n          keyframes = keyframesAfter(size, color);\n        }\n        var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n        var animation = [animationName, '2s', 'infinite'].join(' ');\n        var animationFillMode = '';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getLineStyle(), this.getAnimationStyle(i));\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        var style = {\n          position: 'relative',\n          width: this.props.size,\n          height: this.props.size,\n          transform: 'rotate(165deg)'\n        };\n\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--hash' },\n            _react2.default.createElement(\n              'div',\n              { style: style },\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    size: _propTypes2.default.number,\n    color: _propTypes2.default.string\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    size: 50,\n    color: \"#000000\"\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.MoonLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '100%': {\n      transform: 'rotate(360deg)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle(size) {\n        return {\n          width: size,\n          height: size,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle() {\n        var animation = [animationName, '0.6s', '0s', 'infinite', 'linear'].join(' ');\n        var animationFillMode = 'forwards';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        var size = parseInt(this.props.size, 10);\n        var moonSize = size / 7;\n\n        if (i === 1) {\n          return (0, _appendVendorPrefix2.default)(this.getBallStyle(moonSize), this.getAnimationStyle(i), {\n            backgroundColor: this.props.color,\n            opacity: '0.8',\n            position: 'absolute',\n            top: size / 2 - moonSize / 2\n          });\n        } else if (i === 2) {\n          return (0, _appendVendorPrefix2.default)(this.getBallStyle(size), {\n            border: moonSize + 'px solid ' + this.props.color,\n            opacity: 0.1\n          });\n        } else {\n          return (0, _appendVendorPrefix2.default)(this.getAnimationStyle(i), { position: 'relative' });\n        }\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--moon' },\n            _react2.default.createElement(\n              'div',\n              { style: this.getStyle(0) },\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 60\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.PacmanLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  var keyframes = {\n    0: {\n      \"0%\": { transform: 'rotate(0deg) ' },\n      \"50%\": { transform: 'rotate(-45deg) ' }\n    },\n    1: {\n      \"0%\": { transform: 'rotate(0deg) ' },\n      \"50%\": { transform: 'rotate(45deg) ' }\n    }\n  };\n\n  /**\n   * @type {object}\n   */\n  var animations = {};\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          backgroundColor: this.props.color,\n          width: this.props.size,\n          height: this.props.size,\n          margin: this.props.margin,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var size = this.props.size;\n        var animationName = animations[size];\n\n        if (!animationName) {\n          var keyframesBall = {\n            '75%': {\n              opacity: 0.7\n            },\n            '100%': {\n              transform: 'translate(' + -4 * size + 'px, ' + -size / 4 + 'px)'\n            }\n          };\n          animationName = (0, _insertKeyframesRule2.default)(keyframesBall);\n          animations[size] = animationName;\n        }\n\n        var animation = [animationName, '1s', i * 0.25 + 's', 'infinite', 'linear'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        if (i <= 1) {\n          var s1 = this.props.size + 'px solid transparent';\n          var s2 = this.props.size + 'px solid ' + this.props.color;\n\n          var animationName = (0, _insertKeyframesRule2.default)(keyframes[i]);\n          var animation = [animationName, '0.8s', 'infinite', 'ease-in-out'].join(' ');\n\n          return {\n            width: 0,\n            height: 0,\n            borderRight: s1,\n            borderTop: i === 0 ? s1 : s2,\n            borderLeft: s2,\n            borderBottom: i === 0 ? s2 : s1,\n            borderRadius: this.props.size,\n            position: 'absolute',\n            animation: animation\n          };\n        }\n\n        return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i), {\n          width: 10,\n          height: 10,\n          transform: 'translate(0, ' + -this.props.size / 4 + 'px)',\n          position: 'absolute',\n          top: 25,\n          left: 100\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          var style = {\n            position: 'relative',\n            fontSize: 0,\n            height: this.props.size,\n            width: this.props.size\n          };\n\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--pacman' },\n            _react2.default.createElement(\n              'div',\n              { style: style },\n              _react2.default.createElement('div', { style: this.getStyle(0) }),\n              _react2.default.createElement('div', { style: _extends({}, this.getStyle(1), { position: 'absolute' }) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) }),\n              _react2.default.createElement('div', { style: this.getStyle(3) }),\n              _react2.default.createElement('div', { style: this.getStyle(4) }),\n              _react2.default.createElement('div', { style: this.getStyle(5) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    margin: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 25,\n    margin: 2\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.PropagateLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  // 1.5 4.5 7.5\n  var distance = [1, 3, 5];\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    0: {\n      '25%': { transform: 'translateX(-' + distance[0] + 'rem) scale(0.75)' },\n      '50%': { transform: 'translateX(-' + distance[1] + 'rem) scale(0.6)' },\n      '75%': { transform: 'translateX(-' + distance[2] + 'rem) scale(0.5)' },\n      '95%': { transform: 'translateX(0rem) scale(1)' }\n    },\n    1: {\n      '25%': { transform: 'translateX(-' + distance[0] + 'rem) scale(0.75)' },\n      '50%': { transform: 'translateX(-' + distance[1] + 'rem) scale(0.6)' },\n      '75%': { transform: 'translateX(-' + distance[1] + 'rem) scale(0.6)' },\n      '95%': { transform: 'translateX(0rem) scale(1)' }\n    },\n    2: {\n      '25%': { transform: 'translateX(-' + distance[0] + 'rem) scale(0.75)' },\n      '75%': { transform: 'translateX(-' + distance[0] + 'rem) scale(0.75)' },\n      '95%': { transform: 'translateX(0rem) scale(1)' }\n    },\n    3: {\n      '25%': { transform: 'translateX(' + distance[0] + 'rem) scale(0.75)' },\n      '75%': { transform: 'translateX(' + distance[0] + 'rem) scale(0.75)' },\n      '95%': { transform: 'translateX(0rem) scale(1)' }\n    },\n    4: {\n      '25%': { transform: 'translateX(' + distance[0] + 'rem) scale(0.75)' },\n      '50%': { transform: 'translateX(' + distance[1] + 'rem) scale(0.6)' },\n      '75%': { transform: 'translateX(' + distance[1] + 'rem) scale(0.6)' },\n      '95%': { transform: 'translateX(0rem) scale(1)' }\n    },\n    5: {\n      '25%': { transform: 'translateX(' + distance[0] + 'rem) scale(0.75)' },\n      '50%': { transform: 'translateX(' + distance[1] + 'rem) scale(0.6)' },\n      '75%': { transform: 'translateX(' + distance[2] + 'rem) scale(0.5)' },\n      '95%': { transform: 'translateX(0rem) scale(1)' }\n    }\n  };\n\n  // /**\n  //  * @type {string}\n  //  */\n  // const animationName = insertKeyframesRule(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          position: 'absolute',\n          fontSize: this.props.size / 3,\n          width: this.props.size,\n          height: this.props.size,\n          background: this.props.color,\n          borderRadius: '50%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animationName = (0, _insertKeyframesRule2.default)(keyframes[i]);\n        var animation = [animationName, '1.5s', 'infinite'].join(' ');\n        var animationFillMode = 'forwards';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i));\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--propagate' },\n            _react2.default.createElement(\n              'div',\n              { style: { position: 'relative' } },\n              _react2.default.createElement('div', { style: this.getStyle(0) }),\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) }),\n              _react2.default.createElement('div', { style: this.getStyle(3) }),\n              _react2.default.createElement('div', { style: this.getStyle(4) }),\n              _react2.default.createElement('div', { style: this.getStyle(5) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    size: _propTypes2.default.number,\n    color: _propTypes2.default.string\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    size: 15,\n    color: '#000000'\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.PulseLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '0%': {\n      transform: 'scale(1)',\n      opacity: 1\n    },\n    '45%': {\n      transform: 'scale(0.1)',\n      opacity: 0.7\n    },\n    '80%': {\n      transform: 'scale(1)',\n      opacity: 1\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          backgroundColor: this.props.color,\n          width: this.props.size,\n          height: this.props.size,\n          margin: this.props.margin,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [animationName, '0.75s', i * 0.12 + 's', 'infinite', 'cubic-bezier(.2,.68,.18,1.08)'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i), {\n          display: 'inline-block'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--pulse' },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) }),\n            _react2.default.createElement('div', { style: this.getStyle(3) })\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    margin: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 15,\n    margin: 2\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.RingLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var rightRotateKeyframes = {\n    '0%': {\n      transform: 'rotateX(0deg) rotateY(0deg) rotateZ(0deg)'\n\n    },\n    '100%': {\n      transform: 'rotateX(180deg) rotateY(360deg) rotateZ(360deg)'\n    }\n  };\n\n  /**\n   * @type {object}\n   */\n  var leftRotateKeyframes = {\n    '0%': {\n      transform: 'rotateX(0deg) rotateY(0deg) rotateZ(0deg)'\n    },\n    '100%': {\n      transform: 'rotateX(360deg) rotateY(180deg) rotateZ(360deg)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var rightRotateAnimationName = (0, _insertKeyframesRule2.default)(rightRotateKeyframes);\n\n  /**\n   * @type {string}\n   */\n  var leftRotateAnimationName = (0, _insertKeyframesRule2.default)(leftRotateKeyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getCircleStyle',\n      value: function getCircleStyle(size) {\n        return {\n          width: size,\n          height: size,\n          border: size / 10 + 'px solid ' + this.props.color,\n          opacity: 0.4,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [i === 1 ? rightRotateAnimationName : leftRotateAnimationName, '2s', '0s', 'infinite', 'linear'].join(' ');\n        var animationFillMode = 'forwards';\n        var perspective = '800px';\n\n        return {\n          perspective: perspective,\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        var size = this.props.size;\n\n        if (i) {\n          return (0, _appendVendorPrefix2.default)(this.getCircleStyle(size), this.getAnimationStyle(i), {\n            position: 'absolute',\n            top: 0,\n            left: 0\n          });\n        }\n\n        return {\n          width: size,\n          height: size,\n          position: 'relative'\n        };\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--ring' },\n            _react2.default.createElement(\n              'div',\n              { style: this.getStyle(0) },\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 60\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.RiseLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {number}\n   */\n  var riseAmount = 30;\n\n  /**\n   * @type {object}\n   */\n  var keyframesEven = {\n    '0%': {\n      transform: 'scale(1.1)'\n    },\n    25: {\n      transform: 'translateY(-' + riseAmount + 'px)'\n    },\n    '50%': {\n      transform: 'scale(0.4)'\n    },\n    '75%': {\n      transform: 'translateY(' + riseAmount + 'px)'\n    },\n    '100%': {\n      transform: 'translateY(0) scale(1.0)'\n    }\n  };\n\n  /**\n   * @type {object}\n   */\n  var keyframesOdd = {\n    '0%': {\n      transform: 'scale(0.4)'\n    },\n    25: {\n      transform: 'translateY(' + riseAmount + 'px)'\n    },\n    '50%': {\n      transform: 'scale(1.1)'\n    },\n    '75%': {\n      transform: 'translateY(-' + riseAmount + 'px)'\n    },\n    '100%': {\n      transform: 'translateY(0) scale(0.75)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationNameEven = (0, _insertKeyframesRule2.default)(keyframesEven);\n\n  /**\n   * @type {string}\n   */\n  var animationNameOdd = (0, _insertKeyframesRule2.default)(keyframesOdd);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          backgroundColor: this.props.color,\n          width: this.props.size,\n          height: this.props.size,\n          margin: this.props.margin,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [i % 2 === 0 ? animationNameEven : animationNameOdd, '1s', '0s', 'infinite', 'cubic-bezier(.15,.46,.9,.6)'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i), {\n          display: 'inline-block'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--rise' },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) }),\n            _react2.default.createElement('div', { style: this.getStyle(3) }),\n            _react2.default.createElement('div', { style: this.getStyle(4) }),\n            _react2.default.createElement('div', { style: this.getStyle(5) })\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    margin: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 15,\n    margin: 2\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.RotateLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '0%': {\n      transform: 'rotate(0deg)'\n    },\n    '50%': {\n      transform: 'rotate(180deg)'\n    },\n    '100%': {\n      transform: 'rotate(360deg)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          backgroundColor: this.props.color,\n          width: this.props.size,\n          height: this.props.size,\n          margin: this.props.margin,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle() {\n        var animation = [animationName, '1s', '0s', 'infinite', 'cubic-bezier(.7,-.13,.22,.86)'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        if (i) {\n          return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), {\n            opacity: '0.8',\n            position: 'absolute',\n            top: 0,\n            left: i % 2 ? -28 : 25\n          });\n        }\n\n        return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i), {\n          display: 'inline-block',\n          position: 'relative'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--rotate' },\n            _react2.default.createElement(\n              'div',\n              { style: this.getStyle() },\n              _react2.default.createElement('div', { style: this.getStyle(1) }),\n              _react2.default.createElement('div', { style: this.getStyle(2) })\n            )\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    margin: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 15,\n    margin: 2\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.ScaleLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '0%': {\n      transform: 'scaley(1.0)'\n    },\n    '50%': {\n      transform: 'scaley(0.4)'\n    },\n    '100%': {\n      transform: 'scaley(1.0)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getLineStyle',\n      value: function getLineStyle() {\n        return {\n          backgroundColor: this.props.color,\n          height: this.props.height,\n          width: this.props.width,\n          margin: this.props.margin,\n          borderRadius: this.props.radius\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [animationName, '1s', i * 0.1 + 's', 'infinite', 'cubic-bezier(.2,.68,.18,1.08)'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getLineStyle(i), this.getAnimationStyle(i), {\n          display: 'inline-block'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--scale' },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) }),\n            _react2.default.createElement('div', { style: this.getStyle(3) }),\n            _react2.default.createElement('div', { style: this.getStyle(4) }),\n            _react2.default.createElement('div', { style: this.getStyle(5) })\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    height: _propTypes2.default.number,\n    width: _propTypes2.default.number,\n    margin: _propTypes2.default.number,\n    radius: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    height: 35,\n    width: 4,\n    margin: 2,\n    radius: 2\n  };\n\n  exports.default = Loader;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'domkit/appendVendorPrefix', 'domkit/insertKeyframesRule'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('domkit/appendVendorPrefix'), require('domkit/insertKeyframesRule'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes, global.appendVendorPrefix, global.insertKeyframesRule);\n    global.SyncLoader = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _appendVendorPrefix, _insertKeyframesRule) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\n  var _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  /**\n   * @type {object}\n   */\n  var keyframes = {\n    '33%': {\n      transform: 'translateY(10px)'\n    },\n    '66%': {\n      transform: 'translateY(-10px)'\n    },\n    '100%': {\n      transform: 'translateY(0)'\n    }\n  };\n\n  /**\n   * @type {string}\n   */\n  var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n  var Loader = function (_React$Component) {\n    _inherits(Loader, _React$Component);\n\n    function Loader() {\n      _classCallCheck(this, Loader);\n\n      return _possibleConstructorReturn(this, (Loader.__proto__ || Object.getPrototypeOf(Loader)).apply(this, arguments));\n    }\n\n    _createClass(Loader, [{\n      key: 'getBallStyle',\n      value: function getBallStyle() {\n        return {\n          backgroundColor: this.props.color,\n          width: this.props.size,\n          height: this.props.size,\n          margin: this.props.margin,\n          borderRadius: '100%'\n        };\n      }\n    }, {\n      key: 'getAnimationStyle',\n      value: function getAnimationStyle(i) {\n        var animation = [animationName, '0.6s', i * 0.07 + 's', 'infinite', 'ease-in-out'].join(' ');\n        var animationFillMode = 'both';\n\n        return {\n          animation: animation,\n          animationFillMode: animationFillMode\n        };\n      }\n    }, {\n      key: 'getStyle',\n      value: function getStyle(i) {\n        return (0, _appendVendorPrefix2.default)(this.getBallStyle(i), this.getAnimationStyle(i), {\n          display: 'inline-block'\n        });\n      }\n    }, {\n      key: 'renderLoader',\n      value: function renderLoader(loading) {\n        if (loading) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'react-spinners--sync' },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) }),\n            _react2.default.createElement('div', { style: this.getStyle(3) })\n          );\n        }\n\n        return null;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return this.renderLoader(this.props.loading);\n      }\n    }]);\n\n    return Loader;\n  }(_react2.default.Component);\n\n  /**\n   * @type {object}\n   */\n  Loader.propTypes = {\n    loading: _propTypes2.default.bool,\n    color: _propTypes2.default.string,\n    size: _propTypes2.default.number,\n    margin: _propTypes2.default.number\n  };\n\n  /**\n   * @type {object}\n   */\n  Loader.defaultProps = {\n    loading: true,\n    color: '#000000',\n    size: 15,\n    margin: 2\n  };\n\n  exports.default = Loader;\n});","var SplitPane = require('./lib/SplitPane');\n\nmodule.exports = SplitPane;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _inlineStylePrefixer = require('inline-style-prefixer');\n\nvar _inlineStylePrefixer2 = _interopRequireDefault(_inlineStylePrefixer);\n\nvar _reactStyleProptype = require('react-style-proptype');\n\nvar _reactStyleProptype2 = _interopRequireDefault(_reactStyleProptype);\n\nvar _Pane = require('./Pane');\n\nvar _Pane2 = _interopRequireDefault(_Pane);\n\nvar _Resizer = require('./Resizer');\n\nvar _Resizer2 = _interopRequireDefault(_Resizer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar USER_AGENT = 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.2 (KHTML, like Gecko) Safari/537.2';\n\nfunction unFocus(document, window) {\n    if (document.selection) {\n        document.selection.empty();\n    } else {\n        try {\n            window.getSelection().removeAllRanges();\n            // eslint-disable-next-line no-empty\n        } catch (e) {}\n    }\n}\n\nvar SplitPane = function (_Component) {\n    _inherits(SplitPane, _Component);\n\n    function SplitPane() {\n        var _ref;\n\n        _classCallCheck(this, SplitPane);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        var _this = _possibleConstructorReturn(this, (_ref = SplitPane.__proto__ || Object.getPrototypeOf(SplitPane)).call.apply(_ref, [this].concat(args)));\n\n        _this.onMouseDown = _this.onMouseDown.bind(_this);\n        _this.onTouchStart = _this.onTouchStart.bind(_this);\n        _this.onMouseMove = _this.onMouseMove.bind(_this);\n        _this.onTouchMove = _this.onTouchMove.bind(_this);\n        _this.onMouseUp = _this.onMouseUp.bind(_this);\n\n        _this.state = {\n            active: false,\n            resized: false\n        };\n        return _this;\n    }\n\n    _createClass(SplitPane, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.setSize(this.props, this.state);\n            document.addEventListener('mouseup', this.onMouseUp);\n            document.addEventListener('mousemove', this.onMouseMove);\n            document.addEventListener('touchmove', this.onTouchMove);\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(props) {\n            this.setSize(props, this.state);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            document.removeEventListener('mouseup', this.onMouseUp);\n            document.removeEventListener('mousemove', this.onMouseMove);\n            document.removeEventListener('touchmove', this.onTouchMove);\n        }\n    }, {\n        key: 'onMouseDown',\n        value: function onMouseDown(event) {\n            var eventWithTouches = _extends({}, event, { touches: [{ clientX: event.clientX, clientY: event.clientY }] });\n            this.onTouchStart(eventWithTouches);\n        }\n    }, {\n        key: 'onTouchStart',\n        value: function onTouchStart(event) {\n            if (this.props.allowResize) {\n                unFocus(document, window);\n                var position = this.props.split === 'vertical' ? event.touches[0].clientX : event.touches[0].clientY;\n                if (typeof this.props.onDragStarted === 'function') {\n                    this.props.onDragStarted();\n                }\n                this.setState({\n                    active: true,\n                    position: position\n                });\n            }\n        }\n    }, {\n        key: 'onMouseMove',\n        value: function onMouseMove(event) {\n            var eventWithTouches = _extends({}, event, { touches: [{ clientX: event.clientX, clientY: event.clientY }] });\n            this.onTouchMove(eventWithTouches);\n        }\n    }, {\n        key: 'onTouchMove',\n        value: function onTouchMove(event) {\n            if (this.props.allowResize) {\n                if (this.state.active) {\n                    unFocus(document, window);\n                    var isPrimaryFirst = this.props.primary === 'first';\n                    var ref = isPrimaryFirst ? this.pane1 : this.pane2;\n                    if (ref) {\n                        var node = _reactDom2.default.findDOMNode(ref);\n\n                        if (node.getBoundingClientRect) {\n                            var width = node.getBoundingClientRect().width;\n                            var height = node.getBoundingClientRect().height;\n                            var current = this.props.split === 'vertical' ? event.touches[0].clientX : event.touches[0].clientY;\n                            var size = this.props.split === 'vertical' ? width : height;\n                            var position = this.state.position;\n                            var newPosition = isPrimaryFirst ? position - current : current - position;\n\n                            var maxSize = this.props.maxSize;\n                            if (this.props.maxSize !== undefined && this.props.maxSize <= 0) {\n                                var splPane = this.splitPane;\n                                if (this.props.split === 'vertical') {\n                                    maxSize = splPane.getBoundingClientRect().width + this.props.maxSize;\n                                } else {\n                                    maxSize = splPane.getBoundingClientRect().height + this.props.maxSize;\n                                }\n                            }\n\n                            var newSize = size - newPosition;\n\n                            if (newSize < this.props.minSize) {\n                                newSize = this.props.minSize;\n                            } else if (this.props.maxSize !== undefined && newSize > maxSize) {\n                                newSize = maxSize;\n                            } else {\n                                this.setState({\n                                    position: current,\n                                    resized: true\n                                });\n                            }\n\n                            if (this.props.onChange) {\n                                this.props.onChange(newSize);\n                            }\n                            this.setState({\n                                draggedSize: newSize\n                            });\n                            ref.setState({\n                                size: newSize\n                            });\n                        }\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'onMouseUp',\n        value: function onMouseUp() {\n            if (this.props.allowResize) {\n                if (this.state.active) {\n                    if (typeof this.props.onDragFinished === 'function') {\n                        this.props.onDragFinished(this.state.draggedSize);\n                    }\n                    this.setState({\n                        active: false\n                    });\n                }\n            }\n        }\n    }, {\n        key: 'setSize',\n        value: function setSize(props, state) {\n            var ref = this.props.primary === 'first' ? this.pane1 : this.pane2;\n            var newSize = void 0;\n            if (ref) {\n                newSize = props.size || state && state.draggedSize || props.defaultSize || props.minSize;\n                ref.setState({\n                    size: newSize\n                });\n                if (props.size !== state.draggedSize) {\n                    this.setState({\n                        draggedSize: newSize\n                    });\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                split = _props.split,\n                allowResize = _props.allowResize;\n\n            var disabledClass = allowResize ? '' : 'disabled';\n\n            var style = _extends({}, this.props.style || {}, {\n                display: 'flex',\n                flex: 1,\n                position: 'relative',\n                outline: 'none',\n                overflow: 'hidden',\n                MozUserSelect: 'text',\n                WebkitUserSelect: 'text',\n                msUserSelect: 'text',\n                userSelect: 'text'\n            });\n\n            if (split === 'vertical') {\n                _extends(style, {\n                    flexDirection: 'row',\n                    height: '100%',\n                    position: 'absolute',\n                    left: 0,\n                    right: 0\n                });\n            } else {\n                _extends(style, {\n                    flexDirection: 'column',\n                    height: '100%',\n                    minHeight: '100%',\n                    position: 'absolute',\n                    top: 0,\n                    bottom: 0,\n                    width: '100%'\n                });\n            }\n\n            var children = this.props.children;\n            var classes = ['SplitPane', this.props.className, split, disabledClass];\n\n            var pane1Style = this.props.prefixer.prefix(_extends({}, this.props.paneStyle || {}, this.props.pane1Style || {}));\n\n            var pane2Style = this.props.prefixer.prefix(_extends({}, this.props.paneStyle || {}, this.props.pane2Style || {}));\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    className: classes.join(' '),\n                    style: this.props.prefixer.prefix(style),\n                    ref: function ref(node) {\n                        _this2.splitPane = node;\n                    }\n                },\n                _react2.default.createElement(\n                    _Pane2.default,\n                    {\n                        ref: function ref(node) {\n                            _this2.pane1 = node;\n                        },\n                        key: 'pane1', className: 'Pane1',\n                        style: pane1Style,\n                        split: split,\n                        size: this.props.primary === 'first' ? this.props.size || this.props.defaultSize || this.props.minSize : undefined\n                    },\n                    children[0]\n                ),\n                _react2.default.createElement(_Resizer2.default, {\n                    ref: function ref(node) {\n                        _this2.resizer = node;\n                    },\n                    key: 'resizer',\n                    className: disabledClass,\n                    resizerClassName: this.props.resizerClassName,\n                    onMouseDown: this.onMouseDown,\n                    onTouchStart: this.onTouchStart,\n                    onTouchEnd: this.onMouseUp,\n                    style: this.props.resizerStyle || {},\n                    split: split\n                }),\n                _react2.default.createElement(\n                    _Pane2.default,\n                    {\n                        ref: function ref(node) {\n                            _this2.pane2 = node;\n                        },\n                        key: 'pane2',\n                        className: 'Pane2',\n                        style: pane2Style,\n                        split: split,\n                        size: this.props.primary === 'second' ? this.props.size || this.props.defaultSize || this.props.minSize : undefined\n                    },\n                    children[1]\n                )\n            );\n        }\n    }]);\n\n    return SplitPane;\n}(_react.Component);\n\nSplitPane.propTypes = {\n    primary: _react.PropTypes.oneOf(['first', 'second']),\n    minSize: _react.PropTypes.oneOfType([_react2.default.PropTypes.string, _react2.default.PropTypes.number]),\n    maxSize: _react.PropTypes.oneOfType([_react2.default.PropTypes.string, _react2.default.PropTypes.number]),\n    // eslint-disable-next-line react/no-unused-prop-types\n    defaultSize: _react.PropTypes.oneOfType([_react2.default.PropTypes.string, _react2.default.PropTypes.number]),\n    size: _react.PropTypes.oneOfType([_react2.default.PropTypes.string, _react2.default.PropTypes.number]),\n    allowResize: _react.PropTypes.bool,\n    split: _react.PropTypes.oneOf(['vertical', 'horizontal']),\n    onDragStarted: _react.PropTypes.func,\n    onDragFinished: _react.PropTypes.func,\n    onChange: _react.PropTypes.func,\n    prefixer: _react.PropTypes.instanceOf(_inlineStylePrefixer2.default).isRequired,\n    style: _reactStyleProptype2.default,\n    resizerStyle: _reactStyleProptype2.default,\n    paneStyle: _reactStyleProptype2.default,\n    pane1Style: _reactStyleProptype2.default,\n    pane2Style: _reactStyleProptype2.default,\n    className: _react.PropTypes.string,\n    resizerClassName: _react.PropTypes.string,\n    children: _react.PropTypes.arrayOf(_react.PropTypes.node).isRequired\n};\n\nSplitPane.defaultProps = {\n    split: 'vertical',\n    minSize: 50,\n    allowResize: true,\n    prefixer: new _inlineStylePrefixer2.default({ userAgent: USER_AGENT }),\n    primary: 'first'\n};\n\nexports.default = SplitPane;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createPrefixer = require('./createPrefixer');\n\nvar _createPrefixer2 = _interopRequireDefault(_createPrefixer);\n\nvar _cursor = require('./plugins/cursor');\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _crossFade = require('./plugins/crossFade');\n\nvar _crossFade2 = _interopRequireDefault(_crossFade);\n\nvar _filter = require('./plugins/filter');\n\nvar _filter2 = _interopRequireDefault(_filter);\n\nvar _flex = require('./plugins/flex');\n\nvar _flex2 = _interopRequireDefault(_flex);\n\nvar _flexboxOld = require('./plugins/flexboxOld');\n\nvar _flexboxOld2 = _interopRequireDefault(_flexboxOld);\n\nvar _gradient = require('./plugins/gradient');\n\nvar _gradient2 = _interopRequireDefault(_gradient);\n\nvar _imageSet = require('./plugins/imageSet');\n\nvar _imageSet2 = _interopRequireDefault(_imageSet);\n\nvar _position = require('./plugins/position');\n\nvar _position2 = _interopRequireDefault(_position);\n\nvar _sizing = require('./plugins/sizing');\n\nvar _sizing2 = _interopRequireDefault(_sizing);\n\nvar _transition = require('./plugins/transition');\n\nvar _transition2 = _interopRequireDefault(_transition);\n\nvar _static = require('../static');\n\nvar _static2 = _interopRequireDefault(_static);\n\nvar _dynamicData = require('./dynamicData');\n\nvar _dynamicData2 = _interopRequireDefault(_dynamicData);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar plugins = [_crossFade2.default, _cursor2.default, _filter2.default, _flexboxOld2.default, _gradient2.default, _imageSet2.default, _position2.default, _sizing2.default, _transition2.default, _flex2.default];\n\nvar Prefixer = (0, _createPrefixer2.default)({\n  prefixMap: _dynamicData2.default.prefixMap,\n  plugins: plugins\n}, _static2.default);\nexports.default = Prefixer;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = createPrefixer;\n\nvar _getBrowserInformation = require('../utils/getBrowserInformation');\n\nvar _getBrowserInformation2 = _interopRequireDefault(_getBrowserInformation);\n\nvar _getPrefixedKeyframes = require('../utils/getPrefixedKeyframes');\n\nvar _getPrefixedKeyframes2 = _interopRequireDefault(_getPrefixedKeyframes);\n\nvar _capitalizeString = require('../utils/capitalizeString');\n\nvar _capitalizeString2 = _interopRequireDefault(_capitalizeString);\n\nvar _addNewValuesOnly = require('../utils/addNewValuesOnly');\n\nvar _addNewValuesOnly2 = _interopRequireDefault(_addNewValuesOnly);\n\nvar _isObject = require('../utils/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nvar _prefixValue = require('../utils/prefixValue');\n\nvar _prefixValue2 = _interopRequireDefault(_prefixValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction createPrefixer(_ref) {\n  var prefixMap = _ref.prefixMap,\n      plugins = _ref.plugins;\n  var fallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (style) {\n    return style;\n  };\n\n  return function () {\n    /**\n    * Instantiante a new prefixer\n    * @param {string} userAgent - userAgent to gather prefix information according to caniuse.com\n    * @param {string} keepUnprefixed - keeps unprefixed properties and values\n    */\n    function Prefixer() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _classCallCheck(this, Prefixer);\n\n      var defaultUserAgent = typeof navigator !== 'undefined' ? navigator.userAgent : undefined;\n\n      this._userAgent = options.userAgent || defaultUserAgent;\n      this._keepUnprefixed = options.keepUnprefixed || false;\n\n      if (this._userAgent) {\n        this._browserInfo = (0, _getBrowserInformation2.default)(this._userAgent);\n      }\n\n      // Checks if the userAgent was resolved correctly\n      if (this._browserInfo && this._browserInfo.cssPrefix) {\n        this.prefixedKeyframes = (0, _getPrefixedKeyframes2.default)(this._browserInfo.browserName, this._browserInfo.browserVersion, this._browserInfo.cssPrefix);\n      } else {\n        this._useFallback = true;\n        return false;\n      }\n\n      var prefixData = this._browserInfo.browserName && prefixMap[this._browserInfo.browserName];\n      if (prefixData) {\n        this._requiresPrefix = {};\n\n        for (var property in prefixData) {\n          if (prefixData[property] >= this._browserInfo.browserVersion) {\n            this._requiresPrefix[property] = true;\n          }\n        }\n\n        this._hasPropsRequiringPrefix = Object.keys(this._requiresPrefix).length > 0;\n      } else {\n        this._useFallback = true;\n      }\n\n      this._metaData = {\n        browserVersion: this._browserInfo.browserVersion,\n        browserName: this._browserInfo.browserName,\n        cssPrefix: this._browserInfo.cssPrefix,\n        jsPrefix: this._browserInfo.jsPrefix,\n        keepUnprefixed: this._keepUnprefixed,\n        requiresPrefix: this._requiresPrefix\n      };\n    }\n\n    _createClass(Prefixer, [{\n      key: 'prefix',\n      value: function prefix(style) {\n        // use static prefixer as fallback if userAgent can not be resolved\n        if (this._useFallback) {\n          return fallback(style);\n        }\n\n        // only add prefixes if needed\n        if (!this._hasPropsRequiringPrefix) {\n          return style;\n        }\n\n        return this._prefixStyle(style);\n      }\n    }, {\n      key: '_prefixStyle',\n      value: function _prefixStyle(style) {\n        for (var property in style) {\n          var value = style[property];\n\n          // handle nested objects\n          if ((0, _isObject2.default)(value)) {\n            style[property] = this.prefix(value);\n            // handle array values\n          } else if (Array.isArray(value)) {\n            var combinedValue = [];\n\n            for (var i = 0, len = value.length; i < len; ++i) {\n              var processedValue = (0, _prefixValue2.default)(plugins, property, value[i], style, this._metaData);\n              (0, _addNewValuesOnly2.default)(combinedValue, processedValue || value[i]);\n            }\n\n            // only modify the value if it was touched\n            // by any plugin to prevent unnecessary mutations\n            if (combinedValue.length > 0) {\n              style[property] = combinedValue;\n            }\n          } else {\n            var _processedValue = (0, _prefixValue2.default)(plugins, property, value, style, this._metaData);\n\n            // only modify the value if it was touched\n            // by any plugin to prevent unnecessary mutations\n            if (_processedValue) {\n              style[property] = _processedValue;\n            }\n\n            // add prefixes to properties\n            if (this._requiresPrefix[property]) {\n              style[this._browserInfo.jsPrefix + (0, _capitalizeString2.default)(property)] = value;\n              if (!this._keepUnprefixed) {\n                delete style[property];\n              }\n            }\n          }\n        }\n\n        return style;\n      }\n\n      /**\n      * Returns a prefixed version of the style object using all vendor prefixes\n      * @param {Object} styles - Style object that gets prefixed properties added\n      * @returns {Object} - Style object with prefixed properties and values\n      */\n\n    }], [{\n      key: 'prefixAll',\n      value: function prefixAll(styles) {\n        return fallback(styles);\n      }\n    }]);\n\n    return Prefixer;\n  }();\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getBrowserInformation;\n\nvar _bowser = require('bowser');\n\nvar _bowser2 = _interopRequireDefault(_bowser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar prefixByBrowser = {\n  chrome: 'Webkit',\n  safari: 'Webkit',\n  ios: 'Webkit',\n  android: 'Webkit',\n  phantom: 'Webkit',\n  opera: 'Webkit',\n  webos: 'Webkit',\n  blackberry: 'Webkit',\n  bada: 'Webkit',\n  tizen: 'Webkit',\n  chromium: 'Webkit',\n  vivaldi: 'Webkit',\n  firefox: 'Moz',\n  seamoney: 'Moz',\n  sailfish: 'Moz',\n  msie: 'ms',\n  msedge: 'ms'\n};\n\n\nvar browserByCanIuseAlias = {\n  chrome: 'chrome',\n  chromium: 'chrome',\n  safari: 'safari',\n  firfox: 'firefox',\n  msedge: 'edge',\n  opera: 'opera',\n  vivaldi: 'opera',\n  msie: 'ie'\n};\n\nfunction getBrowserName(browserInfo) {\n  if (browserInfo.firefox) {\n    return 'firefox';\n  }\n\n  if (browserInfo.mobile || browserInfo.tablet) {\n    if (browserInfo.ios) {\n      return 'ios_saf';\n    } else if (browserInfo.android) {\n      return 'android';\n    } else if (browserInfo.opera) {\n      return 'op_mini';\n    }\n  }\n\n  for (var browser in browserByCanIuseAlias) {\n    if (browserInfo[browser]) {\n      return browserByCanIuseAlias[browser];\n    }\n  }\n}\n\n/**\n * Uses bowser to get default browser browserInformation such as version and name\n * Evaluates bowser browserInfo and adds vendorPrefix browserInformation\n * @param {string} userAgent - userAgent that gets evaluated\n */\nfunction getBrowserInformation(userAgent) {\n  var browserInfo = _bowser2.default._detect(userAgent);\n\n  for (var browser in prefixByBrowser) {\n    if (browserInfo[browser]) {\n      var prefix = prefixByBrowser[browser];\n\n      browserInfo.jsPrefix = prefix;\n      browserInfo.cssPrefix = '-' + prefix.toLowerCase() + '-';\n      break;\n    }\n  }\n\n  browserInfo.browserName = getBrowserName(browserInfo);\n\n  // For cordova IOS 8 the version is missing, set truncated osversion to prevent NaN\n  if (browserInfo.version) {\n    browserInfo.browserVersion = parseFloat(browserInfo.version);\n  } else {\n    browserInfo.browserVersion = parseInt(parseFloat(browserInfo.osversion), 10);\n  }\n\n  browserInfo.osVersion = parseFloat(browserInfo.osversion);\n\n  // iOS forces all browsers to use Safari under the hood\n  // as the Safari version seems to match the iOS version\n  // we just explicitely use the osversion instead\n  // https://github.com/rofrischmann/inline-style-prefixer/issues/72\n  if (browserInfo.browserName === 'ios_saf' && browserInfo.browserVersion > browserInfo.osVersion) {\n    browserInfo.browserVersion = browserInfo.osVersion;\n  }\n\n  // seperate native android chrome\n  // https://github.com/rofrischmann/inline-style-prefixer/issues/45\n  if (browserInfo.browserName === 'android' && browserInfo.chrome && browserInfo.browserVersion > 37) {\n    browserInfo.browserName = 'and_chr';\n  }\n\n  // For android < 4.4 we want to check the osversion\n  // not the chrome version, see issue #26\n  // https://github.com/rofrischmann/inline-style-prefixer/issues/26\n  if (browserInfo.browserName === 'android' && browserInfo.osVersion < 5) {\n    browserInfo.browserVersion = browserInfo.osVersion;\n  }\n\n  // Samsung browser are basically build on Chrome > 44\n  // https://github.com/rofrischmann/inline-style-prefixer/issues/102\n  if (browserInfo.browserName === 'android' && browserInfo.samsungBrowser) {\n    browserInfo.browserName = 'and_chr';\n    browserInfo.browserVersion = 44;\n  }\n\n  return browserInfo;\n}\nmodule.exports = exports['default'];","/*!\n * Bowser - a browser detector\n * https://github.com/ded/bowser\n * MIT License | (c) Dustin Diaz 2015\n */\n\n!function (root, name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(name, definition)\n  else root[name] = definition()\n}(this, 'bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    function getSecondMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[2]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua)\n      , nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua)\n      , chromeos = /CrOS/.test(ua)\n      , silk = /silk/i.test(ua)\n      , sailfish = /sailfish/i.test(ua)\n      , tizen = /tizen/i.test(ua)\n      , webos = /(web|hpw)os/i.test(ua)\n      , windowsphone = /windows phone/i.test(ua)\n      , samsungBrowser = /SamsungBrowser/i.test(ua)\n      , windows = !windowsphone && /windows/i.test(ua)\n      , mac = !iosdevice && !silk && /macintosh/i.test(ua)\n      , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)\n      , edgeVersion = getFirstMatch(/edge\\/(\\d+(\\.\\d+)?)/i)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , xbox = /xbox/i.test(ua)\n      , result\n\n    if (/opera/i.test(ua)) {\n      //  an old Opera\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/opr|opios/i.test(ua)) {\n      // a new Opera\n      result = {\n        name: 'Opera'\n        , opera: t\n        , version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/SamsungBrowser/i.test(ua)) {\n      result = {\n        name: 'Samsung Internet for Android'\n        , samsungBrowser: t\n        , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/coast/i.test(ua)) {\n      result = {\n        name: 'Opera Coast'\n        , coast: t\n        , version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/yabrowser/i.test(ua)) {\n      result = {\n        name: 'Yandex Browser'\n      , yandexbrowser: t\n      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/ucbrowser/i.test(ua)) {\n      result = {\n          name: 'UC Browser'\n        , ucbrowser: t\n        , version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/mxios/i.test(ua)) {\n      result = {\n        name: 'Maxthon'\n        , maxthon: t\n        , version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/epiphany/i.test(ua)) {\n      result = {\n        name: 'Epiphany'\n        , epiphany: t\n        , version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/puffin/i.test(ua)) {\n      result = {\n        name: 'Puffin'\n        , puffin: t\n        , version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n      }\n    }\n    else if (/sleipnir/i.test(ua)) {\n      result = {\n        name: 'Sleipnir'\n        , sleipnir: t\n        , version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/k-meleon/i.test(ua)) {\n      result = {\n        name: 'K-Meleon'\n        , kMeleon: t\n        , version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (windowsphone) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      }\n      if (edgeVersion) {\n        result.msedge = t\n        result.version = edgeVersion\n      }\n      else {\n        result.msie = t\n        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (chromeos) {\n      result = {\n        name: 'Chrome'\n      , chromeos: t\n      , chromeBook: t\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/chrome.+? edge/i.test(ua)) {\n      result = {\n        name: 'Microsoft Edge'\n      , msedge: t\n      , version: edgeVersion\n      }\n    }\n    else if (/vivaldi/i.test(ua)) {\n      result = {\n        name: 'Vivaldi'\n        , vivaldi: t\n        , version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (sailfish) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel|fxios/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (silk) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/slimerjs/i.test(ua)) {\n      result = {\n        name: 'SlimerJS'\n        , slimer: t\n        , version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (webos) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (tizen) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/qupzilla/i.test(ua)) {\n      result = {\n        name: 'QupZilla'\n        , qupzilla: t\n        , version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n      }\n    }\n    else if (/chromium/i.test(ua)) {\n      result = {\n        name: 'Chromium'\n        , chromium: t\n        , version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n        , chrome: t\n        , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n        , version: versionIdentifier\n      }\n    }\n    else if (/safari|applewebkit/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      }\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if(/googlebot/i.test(ua)) {\n      result = {\n        name: 'Googlebot'\n      , googlebot: t\n      , version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n      }\n    }\n    else {\n      result = {\n        name: getFirstMatch(/^(.*)\\/(.*) /),\n        version: getSecondMatch(/^(.*)\\/(.*) /)\n     };\n   }\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n      if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n        result.name = result.name || \"Blink\"\n        result.blink = t\n      } else {\n        result.name = result.name || \"Webkit\"\n        result.webkit = t\n      }\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (!result.windowsphone && !result.msedge && (android || result.silk)) {\n      result.android = t\n    } else if (!result.windowsphone && !result.msedge && iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    } else if (mac) {\n      result.mac = t\n    } else if (xbox) {\n      result.xbox = t\n    } else if (windows) {\n      result.windows = t\n    } else if (linux) {\n      result.linux = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (\n         tablet\n      || nexusTablet\n      || iosdevice == 'ipad'\n      || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\n      || result.silk\n    ) {\n      result.tablet = t\n    } else if (\n         mobile\n      || iosdevice == 'iphone'\n      || iosdevice == 'ipod'\n      || android\n      || nexusMobile\n      || result.blackberry\n      || result.webos\n      || result.bada\n    ) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if (result.msedge ||\n        (result.msie && result.version >= 10) ||\n        (result.yandexbrowser && result.version >= 15) ||\n\t\t    (result.vivaldi && result.version >= 1.0) ||\n        (result.chrome && result.version >= 20) ||\n        (result.samsungBrowser && result.version >= 4) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        || (result.chromium && result.version >= 20)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        || (result.chromium && result.version < 20)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')\n\n  bowser.test = function (browserList) {\n    for (var i = 0; i < browserList.length; ++i) {\n      var browserItem = browserList[i];\n      if (typeof browserItem=== 'string') {\n        if (browserItem in bowser) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  function getVersionPrecision(version) {\n    return version.split(\".\").length;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  function map(arr, iterator) {\n    var result = [], i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i++) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n   *\n   * @param  {Array<String>} versions versions to compare\n   * @return {Number} comparison result\n   */\n  function compareVersions(versions) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n    var chunks = map(versions, function (version) {\n      var delta = precision - getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      version = version + new Array(delta + 1).join(\".0\");\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return map(version.split(\".\"), function (chunk) {\n        return new Array(20 - chunk.length).join(\"0\") + chunk;\n      }).reverse();\n    });\n\n    // iterate in reverse order by reversed chunks array\n    while (--precision >= 0) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n      else if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === 0) {\n          // all version chunks are same\n          return 0;\n        }\n      }\n      else {\n        return -1;\n      }\n    }\n  }\n\n  /**\n   * Check if browser is unsupported\n   *\n   * @example\n   *   bowser.isUnsupportedBrowser({\n   *     msie: \"10\",\n   *     firefox: \"23\",\n   *     chrome: \"29\",\n   *     safari: \"5.1\",\n   *     opera: \"16\",\n   *     phantom: \"534\"\n   *   });\n   *\n   * @param  {Object}  minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function isUnsupportedBrowser(minVersions, strictMode, ua) {\n    var _bowser = bowser;\n\n    // make strictMode param optional with ua param usage\n    if (typeof strictMode === 'string') {\n      ua = strictMode;\n      strictMode = void(0);\n    }\n\n    if (strictMode === void(0)) {\n      strictMode = false;\n    }\n    if (ua) {\n      _bowser = detect(ua);\n    }\n\n    var version = \"\" + _bowser.version;\n    for (var browser in minVersions) {\n      if (minVersions.hasOwnProperty(browser)) {\n        if (_bowser[browser]) {\n          if (typeof minVersions[browser] !== 'string') {\n            throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));\n          }\n\n          // browser version and min supported version.\n          return compareVersions([version, minVersions[browser]]) < 0;\n        }\n      }\n    }\n\n    return strictMode; // not found\n  }\n\n  /**\n   * Check if browser is supported\n   *\n   * @param  {Object} minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function check(minVersions, strictMode, ua) {\n    return !isUnsupportedBrowser(minVersions, strictMode, ua);\n  }\n\n  bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n  bowser.compareVersions = compareVersions;\n  bowser.check = check;\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getPrefixedKeyframes;\nfunction getPrefixedKeyframes(browserName, browserVersion, cssPrefix) {\n  var prefixedKeyframes = 'keyframes';\n\n  if (browserName === 'chrome' && browserVersion < 43 || (browserName === 'safari' || browserName === 'ios_saf') && browserVersion < 9 || browserName === 'opera' && browserVersion < 30 || browserName === 'android' && browserVersion <= 4.4 || browserName === 'and_uc') {\n    return cssPrefix + prefixedKeyframes;\n  }\n  return prefixedKeyframes;\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = capitalizeString;\nfunction capitalizeString(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = addNewValuesOnly;\nfunction addIfNew(list, value) {\n  if (list.indexOf(value) === -1) {\n    list.push(value);\n  }\n}\n\nfunction addNewValuesOnly(list, values) {\n  if (Array.isArray(values)) {\n    for (var i = 0, len = values.length; i < len; ++i) {\n      addIfNew(list, values[i]);\n    }\n  } else {\n    addIfNew(list, values);\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isObject;\nfunction isObject(value) {\n  return value instanceof Object && !Array.isArray(value);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = prefixValue;\nfunction prefixValue(plugins, property, value, style, metaData) {\n  for (var i = 0, len = plugins.length; i < len; ++i) {\n    var processedValue = plugins[i](property, value, style, metaData);\n\n    // we can stop processing if a value is returned\n    // as all plugin criteria are unique\n    if (processedValue) {\n      return processedValue;\n    }\n  }\n}\nmodule.exports = exports[\"default\"];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = cursor;\n\nvar _getPrefixedValue = require('../../utils/getPrefixedValue');\n\nvar _getPrefixedValue2 = _interopRequireDefault(_getPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar grabValues = {\n  grab: true,\n  grabbing: true\n};\n\n\nvar zoomValues = {\n  'zoom-in': true,\n  'zoom-out': true\n};\n\nfunction cursor(property, value, style, _ref) {\n  var browserName = _ref.browserName,\n      browserVersion = _ref.browserVersion,\n      cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed;\n\n  // adds prefixes for firefox, chrome, safari, and opera regardless of\n  // version until a reliable browser support info can be found\n  // see: https://github.com/rofrischmann/inline-style-prefixer/issues/79\n  if (property === 'cursor' && grabValues[value] && (browserName === 'firefox' || browserName === 'chrome' || browserName === 'safari' || browserName === 'opera')) {\n    return (0, _getPrefixedValue2.default)(cssPrefix + value, value, keepUnprefixed);\n  }\n\n  if (property === 'cursor' && zoomValues[value] && (browserName === 'firefox' && browserVersion < 24 || browserName === 'chrome' && browserVersion < 37 || browserName === 'safari' && browserVersion < 9 || browserName === 'opera' && browserVersion < 24)) {\n    return (0, _getPrefixedValue2.default)(cssPrefix + value, value, keepUnprefixed);\n  }\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getPrefixedValue;\nfunction getPrefixedValue(prefixedValue, value, keepUnprefixed) {\n  if (keepUnprefixed) {\n    return [prefixedValue, value];\n  }\n  return prefixedValue;\n}\nmodule.exports = exports[\"default\"];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = crossFade;\n\nvar _getPrefixedValue = require('../../utils/getPrefixedValue');\n\nvar _getPrefixedValue2 = _interopRequireDefault(_getPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction crossFade(property, value, style, _ref) {\n  var browserName = _ref.browserName,\n      browserVersion = _ref.browserVersion,\n      cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed;\n\n  if (typeof value === 'string' && value.indexOf('cross-fade(') > -1 && (browserName === 'chrome' || browserName === 'opera' || browserName === 'and_chr' || (browserName === 'ios_saf' || browserName === 'safari') && browserVersion < 10)) {\n    return (0, _getPrefixedValue2.default)(value.replace(/cross-fade\\(/g, cssPrefix + 'cross-fade('), value, keepUnprefixed);\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = filter;\n\nvar _getPrefixedValue = require('../../utils/getPrefixedValue');\n\nvar _getPrefixedValue2 = _interopRequireDefault(_getPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction filter(property, value, style, _ref) {\n  var browserName = _ref.browserName,\n      browserVersion = _ref.browserVersion,\n      cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed;\n\n  if (typeof value === 'string' && value.indexOf('filter(') > -1 && (browserName === 'ios_saf' || browserName === 'safari' && browserVersion < 9.1)) {\n    return (0, _getPrefixedValue2.default)(value.replace(/filter\\(/g, cssPrefix + 'filter('), value, keepUnprefixed);\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = flex;\n\nvar _getPrefixedValue = require('../../utils/getPrefixedValue');\n\nvar _getPrefixedValue2 = _interopRequireDefault(_getPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar values = {\n  flex: true,\n  'inline-flex': true\n};\nfunction flex(property, value, style, _ref) {\n  var browserName = _ref.browserName,\n      browserVersion = _ref.browserVersion,\n      cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed;\n\n  if (property === 'display' && values[value] && (browserName === 'chrome' && browserVersion < 29 && browserVersion > 20 || (browserName === 'safari' || browserName === 'ios_saf') && browserVersion < 9 && browserVersion > 6 || browserName === 'opera' && (browserVersion === 15 || browserVersion === 16))) {\n    return (0, _getPrefixedValue2.default)(cssPrefix + value, value, keepUnprefixed);\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = flexboxOld;\n\nvar _getPrefixedValue = require('../../utils/getPrefixedValue');\n\nvar _getPrefixedValue2 = _interopRequireDefault(_getPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar alternativeValues = {\n  'space-around': 'justify',\n  'space-between': 'justify',\n  'flex-start': 'start',\n  'flex-end': 'end',\n  'wrap-reverse': 'multiple',\n  wrap: 'multiple',\n  flex: 'box',\n  'inline-flex': 'inline-box'\n};\n\n\nvar alternativeProps = {\n  alignItems: 'WebkitBoxAlign',\n  justifyContent: 'WebkitBoxPack',\n  flexWrap: 'WebkitBoxLines'\n};\n\nvar otherProps = ['alignContent', 'alignSelf', 'order', 'flexGrow', 'flexShrink', 'flexBasis', 'flexDirection'];\nvar properties = Object.keys(alternativeProps).concat(otherProps);\n\nfunction flexboxOld(property, value, style, _ref) {\n  var browserName = _ref.browserName,\n      browserVersion = _ref.browserVersion,\n      cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed,\n      requiresPrefix = _ref.requiresPrefix;\n\n  if ((properties.indexOf(property) > -1 || property === 'display' && typeof value === 'string' && value.indexOf('flex') > -1) && (browserName === 'firefox' && browserVersion < 22 || browserName === 'chrome' && browserVersion < 21 || (browserName === 'safari' || browserName === 'ios_saf') && browserVersion <= 6.1 || browserName === 'android' && browserVersion < 4.4 || browserName === 'and_uc')) {\n    delete requiresPrefix[property];\n\n    if (!keepUnprefixed && !Array.isArray(style[property])) {\n      delete style[property];\n    }\n    if (property === 'flexDirection' && typeof value === 'string') {\n      if (value.indexOf('column') > -1) {\n        style.WebkitBoxOrient = 'vertical';\n      } else {\n        style.WebkitBoxOrient = 'horizontal';\n      }\n      if (value.indexOf('reverse') > -1) {\n        style.WebkitBoxDirection = 'reverse';\n      } else {\n        style.WebkitBoxDirection = 'normal';\n      }\n    }\n    if (property === 'display' && alternativeValues[value]) {\n      return (0, _getPrefixedValue2.default)(cssPrefix + alternativeValues[value], value, keepUnprefixed);\n    }\n    if (alternativeProps[property]) {\n      style[alternativeProps[property]] = alternativeValues[value] || value;\n    }\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = gradient;\n\nvar _getPrefixedValue = require('../../utils/getPrefixedValue');\n\nvar _getPrefixedValue2 = _interopRequireDefault(_getPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar values = /linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;\nfunction gradient(property, value, style, _ref) {\n  var browserName = _ref.browserName,\n      browserVersion = _ref.browserVersion,\n      cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed;\n\n  if (typeof value === 'string' && value.match(values) !== null && (browserName === 'firefox' && browserVersion < 16 || browserName === 'chrome' && browserVersion < 26 || (browserName === 'safari' || browserName === 'ios_saf') && browserVersion < 7 || (browserName === 'opera' || browserName === 'op_mini') && browserVersion < 12.1 || browserName === 'android' && browserVersion < 4.4 || browserName === 'and_uc')) {\n    return (0, _getPrefixedValue2.default)(cssPrefix + value, value, keepUnprefixed);\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = imageSet;\n\nvar _getPrefixedValue = require('../../utils/getPrefixedValue');\n\nvar _getPrefixedValue2 = _interopRequireDefault(_getPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction imageSet(property, value, style, _ref) {\n  var browserName = _ref.browserName,\n      cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed;\n\n  if (typeof value === 'string' && value.indexOf('image-set(') > -1 && (browserName === 'chrome' || browserName === 'opera' || browserName === 'and_chr' || browserName === 'and_uc' || browserName === 'ios_saf' || browserName === 'safari')) {\n    return (0, _getPrefixedValue2.default)(value.replace(/image-set\\(/g, cssPrefix + 'image-set('), value, keepUnprefixed);\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = position;\n\nvar _getPrefixedValue = require('../../utils/getPrefixedValue');\n\nvar _getPrefixedValue2 = _interopRequireDefault(_getPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction position(property, value, _ref) {\n  var browserName = _ref.browserName,\n      cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed;\n\n  if (property === 'position' && value === 'sticky' && (browserName === 'safari' || browserName === 'ios_saf')) {\n    return (0, _getPrefixedValue2.default)(cssPrefix + value, value, keepUnprefixed);\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sizing;\n\nvar _getPrefixedValue = require('../../utils/getPrefixedValue');\n\nvar _getPrefixedValue2 = _interopRequireDefault(_getPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar properties = {\n  maxHeight: true,\n  maxWidth: true,\n  width: true,\n  height: true,\n  columnWidth: true,\n  minWidth: true,\n  minHeight: true\n};\n\nvar values = {\n  'min-content': true,\n  'max-content': true,\n  'fill-available': true,\n  'fit-content': true,\n  'contain-floats': true\n};\n\n// TODO: chrome & opera support it\nfunction sizing(property, value, style, _ref) {\n  var cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed;\n\n  // This might change in the future\n  // Keep an eye on it\n  if (properties[property] && values[value]) {\n    return (0, _getPrefixedValue2.default)(cssPrefix + value, value, keepUnprefixed);\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = transition;\n\nvar _hyphenateProperty = require('css-in-js-utils/lib/hyphenateProperty');\n\nvar _hyphenateProperty2 = _interopRequireDefault(_hyphenateProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar properties = {\n  transition: true,\n  transitionProperty: true,\n  WebkitTransition: true,\n  WebkitTransitionProperty: true,\n  MozTransition: true,\n  MozTransitionProperty: true\n};\n\nvar requiresPrefixDashCased = void 0;\n\nfunction transition(property, value, style, _ref) {\n  var cssPrefix = _ref.cssPrefix,\n      keepUnprefixed = _ref.keepUnprefixed,\n      requiresPrefix = _ref.requiresPrefix;\n\n  if (typeof value === 'string' && properties[property]) {\n    var _ret = function () {\n      // memoize the prefix array for later use\n      if (!requiresPrefixDashCased) {\n        requiresPrefixDashCased = Object.keys(requiresPrefix).map(function (prop) {\n          return (0, _hyphenateProperty2.default)(prop);\n        });\n      }\n\n      // only split multi values, not cubic beziers\n      var multipleValues = value.split(/,(?![^()]*(?:\\([^()]*\\))?\\))/g);\n\n      requiresPrefixDashCased.forEach(function (prop) {\n        multipleValues.forEach(function (val, index) {\n          if (val.indexOf(prop) > -1 && prop !== 'order') {\n            multipleValues[index] = val.replace(prop, cssPrefix + prop) + (keepUnprefixed ? ',' + val : '');\n          }\n        });\n      });\n\n      return {\n        v: multipleValues.join(',')\n      };\n    }();\n\n    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = hyphenateProperty;\n\nvar _hyphenateStyleName = require('hyphenate-style-name');\n\nvar _hyphenateStyleName2 = _interopRequireDefault(_hyphenateStyleName);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction hyphenateProperty(property) {\n  return (0, _hyphenateStyleName2.default)(property);\n}\nmodule.exports = exports['default'];","'use strict';\n\nvar uppercasePattern = /[A-Z]/g;\nvar msPattern = /^ms-/;\nvar cache = {};\n\nfunction hyphenateStyleName(string) {\n    return string in cache\n    ? cache[string]\n    : cache[string] = string\n      .replace(uppercasePattern, '-$&')\n      .toLowerCase()\n      .replace(msPattern, '-ms-');\n}\n\nmodule.exports = hyphenateStyleName;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createPrefixer = require('./createPrefixer');\n\nvar _createPrefixer2 = _interopRequireDefault(_createPrefixer);\n\nvar _staticData = require('./staticData');\n\nvar _staticData2 = _interopRequireDefault(_staticData);\n\nvar _cursor = require('./plugins/cursor');\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _crossFade = require('./plugins/crossFade');\n\nvar _crossFade2 = _interopRequireDefault(_crossFade);\n\nvar _filter = require('./plugins/filter');\n\nvar _filter2 = _interopRequireDefault(_filter);\n\nvar _flex = require('./plugins/flex');\n\nvar _flex2 = _interopRequireDefault(_flex);\n\nvar _flexboxOld = require('./plugins/flexboxOld');\n\nvar _flexboxOld2 = _interopRequireDefault(_flexboxOld);\n\nvar _gradient = require('./plugins/gradient');\n\nvar _gradient2 = _interopRequireDefault(_gradient);\n\nvar _imageSet = require('./plugins/imageSet');\n\nvar _imageSet2 = _interopRequireDefault(_imageSet);\n\nvar _position = require('./plugins/position');\n\nvar _position2 = _interopRequireDefault(_position);\n\nvar _sizing = require('./plugins/sizing');\n\nvar _sizing2 = _interopRequireDefault(_sizing);\n\nvar _transition = require('./plugins/transition');\n\nvar _transition2 = _interopRequireDefault(_transition);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar plugins = [_crossFade2.default, _cursor2.default, _filter2.default, _flexboxOld2.default, _gradient2.default, _imageSet2.default, _position2.default, _sizing2.default, _transition2.default, _flex2.default];\n\nexports.default = (0, _createPrefixer2.default)({\n  prefixMap: _staticData2.default.prefixMap,\n  plugins: plugins\n});\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createPrefixer;\n\nvar _prefixProperty = require('../utils/prefixProperty');\n\nvar _prefixProperty2 = _interopRequireDefault(_prefixProperty);\n\nvar _prefixValue = require('../utils/prefixValue');\n\nvar _prefixValue2 = _interopRequireDefault(_prefixValue);\n\nvar _addNewValuesOnly = require('../utils/addNewValuesOnly');\n\nvar _addNewValuesOnly2 = _interopRequireDefault(_addNewValuesOnly);\n\nvar _isObject = require('../utils/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createPrefixer(_ref) {\n  var prefixMap = _ref.prefixMap,\n      plugins = _ref.plugins;\n\n  function prefixAll(style) {\n    for (var property in style) {\n      var value = style[property];\n\n      // handle nested objects\n      if ((0, _isObject2.default)(value)) {\n        style[property] = prefixAll(value);\n        // handle array values\n      } else if (Array.isArray(value)) {\n        var combinedValue = [];\n\n        for (var i = 0, len = value.length; i < len; ++i) {\n          var processedValue = (0, _prefixValue2.default)(plugins, property, value[i], style, prefixMap);\n          (0, _addNewValuesOnly2.default)(combinedValue, processedValue || value[i]);\n        }\n\n        // only modify the value if it was touched\n        // by any plugin to prevent unnecessary mutations\n        if (combinedValue.length > 0) {\n          style[property] = combinedValue;\n        }\n      } else {\n        var _processedValue = (0, _prefixValue2.default)(plugins, property, value, style, prefixMap);\n\n        // only modify the value if it was touched\n        // by any plugin to prevent unnecessary mutations\n        if (_processedValue) {\n          style[property] = _processedValue;\n        }\n\n        (0, _prefixProperty2.default)(prefixMap, property, style);\n      }\n    }\n\n    return style;\n  }\n\n  return prefixAll;\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = prefixProperty;\n\nvar _capitalizeString = require('./capitalizeString');\n\nvar _capitalizeString2 = _interopRequireDefault(_capitalizeString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction prefixProperty(prefixProperties, property, style) {\n  var requiredPrefixes = prefixProperties[property];\n\n  if (requiredPrefixes) {\n    for (var i = 0, len = requiredPrefixes.length; i < len; ++i) {\n      style[requiredPrefixes[i] + (0, _capitalizeString2.default)(property)] = style[property];\n    }\n  }\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  plugins: [],\n  prefixMap: { \"appearance\": [\"Webkit\", \"Moz\"], \"userSelect\": [\"Webkit\", \"Moz\", \"ms\"], \"textEmphasisPosition\": [\"Webkit\"], \"textEmphasis\": [\"Webkit\"], \"textEmphasisStyle\": [\"Webkit\"], \"textEmphasisColor\": [\"Webkit\"], \"boxDecorationBreak\": [\"Webkit\"], \"clipPath\": [\"Webkit\"], \"maskImage\": [\"Webkit\"], \"maskMode\": [\"Webkit\"], \"maskRepeat\": [\"Webkit\"], \"maskPosition\": [\"Webkit\"], \"maskClip\": [\"Webkit\"], \"maskOrigin\": [\"Webkit\"], \"maskSize\": [\"Webkit\"], \"maskComposite\": [\"Webkit\"], \"mask\": [\"Webkit\"], \"maskBorderSource\": [\"Webkit\"], \"maskBorderMode\": [\"Webkit\"], \"maskBorderSlice\": [\"Webkit\"], \"maskBorderWidth\": [\"Webkit\"], \"maskBorderOutset\": [\"Webkit\"], \"maskBorderRepeat\": [\"Webkit\"], \"maskBorder\": [\"Webkit\"], \"maskType\": [\"Webkit\"], \"textDecorationStyle\": [\"Webkit\"], \"textDecorationSkip\": [\"Webkit\"], \"textDecorationLine\": [\"Webkit\"], \"textDecorationColor\": [\"Webkit\"], \"filter\": [\"Webkit\"], \"fontFeatureSettings\": [\"Webkit\"], \"breakAfter\": [\"Webkit\", \"Moz\", \"ms\"], \"breakBefore\": [\"Webkit\", \"Moz\", \"ms\"], \"breakInside\": [\"Webkit\", \"Moz\", \"ms\"], \"columnCount\": [\"Webkit\", \"Moz\"], \"columnFill\": [\"Webkit\", \"Moz\"], \"columnGap\": [\"Webkit\", \"Moz\"], \"columnRule\": [\"Webkit\", \"Moz\"], \"columnRuleColor\": [\"Webkit\", \"Moz\"], \"columnRuleStyle\": [\"Webkit\", \"Moz\"], \"columnRuleWidth\": [\"Webkit\", \"Moz\"], \"columns\": [\"Webkit\", \"Moz\"], \"columnSpan\": [\"Webkit\", \"Moz\"], \"columnWidth\": [\"Webkit\", \"Moz\"], \"flex\": [\"Webkit\"], \"flexBasis\": [\"Webkit\"], \"flexDirection\": [\"Webkit\"], \"flexGrow\": [\"Webkit\"], \"flexFlow\": [\"Webkit\"], \"flexShrink\": [\"Webkit\"], \"flexWrap\": [\"Webkit\"], \"alignContent\": [\"Webkit\"], \"alignItems\": [\"Webkit\"], \"alignSelf\": [\"Webkit\"], \"justifyContent\": [\"Webkit\"], \"order\": [\"Webkit\"], \"transform\": [\"Webkit\"], \"transformOrigin\": [\"Webkit\"], \"transformOriginX\": [\"Webkit\"], \"transformOriginY\": [\"Webkit\"], \"backfaceVisibility\": [\"Webkit\"], \"perspective\": [\"Webkit\"], \"perspectiveOrigin\": [\"Webkit\"], \"transformStyle\": [\"Webkit\"], \"transformOriginZ\": [\"Webkit\"], \"animation\": [\"Webkit\"], \"animationDelay\": [\"Webkit\"], \"animationDirection\": [\"Webkit\"], \"animationFillMode\": [\"Webkit\"], \"animationDuration\": [\"Webkit\"], \"animationIterationCount\": [\"Webkit\"], \"animationName\": [\"Webkit\"], \"animationPlayState\": [\"Webkit\"], \"animationTimingFunction\": [\"Webkit\"], \"backdropFilter\": [\"Webkit\"], \"fontKerning\": [\"Webkit\"], \"scrollSnapType\": [\"Webkit\", \"ms\"], \"scrollSnapPointsX\": [\"Webkit\", \"ms\"], \"scrollSnapPointsY\": [\"Webkit\", \"ms\"], \"scrollSnapDestination\": [\"Webkit\", \"ms\"], \"scrollSnapCoordinate\": [\"Webkit\", \"ms\"], \"shapeImageThreshold\": [\"Webkit\"], \"shapeImageMargin\": [\"Webkit\"], \"shapeImageOutside\": [\"Webkit\"], \"hyphens\": [\"Webkit\", \"Moz\", \"ms\"], \"flowInto\": [\"Webkit\", \"ms\"], \"flowFrom\": [\"Webkit\", \"ms\"], \"regionFragment\": [\"Webkit\", \"ms\"], \"textAlignLast\": [\"Moz\"], \"tabSize\": [\"Moz\"], \"wrapFlow\": [\"ms\"], \"wrapThrough\": [\"ms\"], \"wrapMargin\": [\"ms\"], \"gridTemplateColumns\": [\"ms\"], \"gridTemplateRows\": [\"ms\"], \"gridTemplateAreas\": [\"ms\"], \"gridTemplate\": [\"ms\"], \"gridAutoColumns\": [\"ms\"], \"gridAutoRows\": [\"ms\"], \"gridAutoFlow\": [\"ms\"], \"grid\": [\"ms\"], \"gridRowStart\": [\"ms\"], \"gridColumnStart\": [\"ms\"], \"gridRowEnd\": [\"ms\"], \"gridRow\": [\"ms\"], \"gridColumn\": [\"ms\"], \"gridColumnEnd\": [\"ms\"], \"gridColumnGap\": [\"ms\"], \"gridRowGap\": [\"ms\"], \"gridArea\": [\"ms\"], \"gridGap\": [\"ms\"], \"textSizeAdjust\": [\"Webkit\", \"ms\"], \"transitionDelay\": [\"Webkit\"], \"transitionDuration\": [\"Webkit\"], \"transitionProperty\": [\"Webkit\"], \"transitionTimingFunction\": [\"Webkit\"] }\n};\nmodule.exports = exports[\"default\"];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = cursor;\nvar prefixes = ['-webkit-', '-moz-', ''];\n\nvar values = {\n  'zoom-in': true,\n  'zoom-out': true,\n  grab: true,\n  grabbing: true\n};\n\nfunction cursor(property, value) {\n  if (property === 'cursor' && values[value]) {\n    return prefixes.map(function (prefix) {\n      return prefix + value;\n    });\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = crossFade;\n\nvar _isPrefixedValue = require('css-in-js-utils/lib/isPrefixedValue');\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// http://caniuse.com/#search=cross-fade\nvar prefixes = ['-webkit-', ''];\nfunction crossFade(property, value) {\n  if (typeof value === 'string' && !(0, _isPrefixedValue2.default)(value) && value.indexOf('cross-fade(') > -1) {\n    return prefixes.map(function (prefix) {\n      return value.replace(/cross-fade\\(/g, prefix + 'cross-fade(');\n    });\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isPrefixedValue;\n\nvar regex = /-webkit-|-moz-|-ms-/;\n\nfunction isPrefixedValue(value) {\n  return typeof value === 'string' && value.match(regex) !== null;\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = filter;\n\nvar _isPrefixedValue = require('css-in-js-utils/lib/isPrefixedValue');\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// http://caniuse.com/#feat=css-filter-function\nvar prefixes = ['-webkit-', ''];\nfunction filter(property, value) {\n  if (typeof value === 'string' && !(0, _isPrefixedValue2.default)(value) && value.indexOf('filter(') > -1) {\n    return prefixes.map(function (prefix) {\n      return value.replace(/filter\\(/g, prefix + 'filter(');\n    });\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = flex;\nvar values = {\n  flex: true,\n  'inline-flex': true\n};\n\nfunction flex(property, value) {\n  if (property === 'display' && values[value]) {\n    return ['-webkit-box', '-moz-box', '-ms-' + value + 'box', '-webkit-' + value, value];\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = flexboxOld;\nvar alternativeValues = {\n  'space-around': 'justify',\n  'space-between': 'justify',\n  'flex-start': 'start',\n  'flex-end': 'end',\n  'wrap-reverse': 'multiple',\n  wrap: 'multiple'\n};\n\nvar alternativeProps = {\n  alignItems: 'WebkitBoxAlign',\n  justifyContent: 'WebkitBoxPack',\n  flexWrap: 'WebkitBoxLines'\n};\n\nfunction flexboxOld(property, value, style) {\n  if (property === 'flexDirection' && typeof value === 'string') {\n    if (value.indexOf('column') > -1) {\n      style.WebkitBoxOrient = 'vertical';\n    } else {\n      style.WebkitBoxOrient = 'horizontal';\n    }\n    if (value.indexOf('reverse') > -1) {\n      style.WebkitBoxDirection = 'reverse';\n    } else {\n      style.WebkitBoxDirection = 'normal';\n    }\n  }\n  if (alternativeProps[property]) {\n    style[alternativeProps[property]] = alternativeValues[value] || value;\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = gradient;\n\nvar _isPrefixedValue = require('css-in-js-utils/lib/isPrefixedValue');\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar prefixes = ['-webkit-', '-moz-', ''];\n\nvar values = /linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;\n\nfunction gradient(property, value) {\n  if (typeof value === 'string' && !(0, _isPrefixedValue2.default)(value) && value.match(values) !== null) {\n    return prefixes.map(function (prefix) {\n      return prefix + value;\n    });\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = imageSet;\n\nvar _isPrefixedValue = require('css-in-js-utils/lib/isPrefixedValue');\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// http://caniuse.com/#feat=css-image-set\nvar prefixes = ['-webkit-', ''];\nfunction imageSet(property, value) {\n  if (typeof value === 'string' && !(0, _isPrefixedValue2.default)(value) && value.indexOf('image-set(') > -1) {\n    return prefixes.map(function (prefix) {\n      return value.replace(/image-set\\(/g, prefix + 'image-set(');\n    });\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = position;\nfunction position(property, value) {\n  if (property === 'position' && value === 'sticky') {\n    return ['-webkit-sticky', 'sticky'];\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sizing;\nvar prefixes = ['-webkit-', '-moz-', ''];\n\nvar properties = {\n  maxHeight: true,\n  maxWidth: true,\n  width: true,\n  height: true,\n  columnWidth: true,\n  minWidth: true,\n  minHeight: true\n};\nvar values = {\n  'min-content': true,\n  'max-content': true,\n  'fill-available': true,\n  'fit-content': true,\n  'contain-floats': true\n};\n\nfunction sizing(property, value) {\n  if (properties[property] && values[value]) {\n    return prefixes.map(function (prefix) {\n      return prefix + value;\n    });\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = transition;\n\nvar _hyphenateProperty = require('css-in-js-utils/lib/hyphenateProperty');\n\nvar _hyphenateProperty2 = _interopRequireDefault(_hyphenateProperty);\n\nvar _isPrefixedValue = require('css-in-js-utils/lib/isPrefixedValue');\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nvar _capitalizeString = require('../../utils/capitalizeString');\n\nvar _capitalizeString2 = _interopRequireDefault(_capitalizeString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar properties = {\n  transition: true,\n  transitionProperty: true,\n  WebkitTransition: true,\n  WebkitTransitionProperty: true,\n  MozTransition: true,\n  MozTransitionProperty: true\n};\n\n\nvar prefixMapping = {\n  Webkit: '-webkit-',\n  Moz: '-moz-',\n  ms: '-ms-'\n};\n\nfunction prefixValue(value, propertyPrefixMap) {\n  if ((0, _isPrefixedValue2.default)(value)) {\n    return value;\n  }\n\n  // only split multi values, not cubic beziers\n  var multipleValues = value.split(/,(?![^()]*(?:\\([^()]*\\))?\\))/g);\n\n  for (var i = 0, len = multipleValues.length; i < len; ++i) {\n    var singleValue = multipleValues[i];\n    var values = [singleValue];\n    for (var property in propertyPrefixMap) {\n      var dashCaseProperty = (0, _hyphenateProperty2.default)(property);\n\n      if (singleValue.indexOf(dashCaseProperty) > -1 && dashCaseProperty !== 'order') {\n        var prefixes = propertyPrefixMap[property];\n        for (var j = 0, pLen = prefixes.length; j < pLen; ++j) {\n          // join all prefixes and create a new value\n          values.unshift(singleValue.replace(dashCaseProperty, prefixMapping[prefixes[j]] + dashCaseProperty));\n        }\n      }\n    }\n\n    multipleValues[i] = values.join(',');\n  }\n\n  return multipleValues.join(',');\n}\n\nfunction transition(property, value, style, propertyPrefixMap) {\n  // also check for already prefixed transitions\n  if (typeof value === 'string' && properties[property]) {\n    var outputValue = prefixValue(value, propertyPrefixMap);\n    // if the property is already prefixed\n    var webkitOutput = outputValue.split(/,(?![^()]*(?:\\([^()]*\\))?\\))/g).filter(function (val) {\n      return val.match(/-moz-|-ms-/) === null;\n    }).join(',');\n\n    if (property.indexOf('Webkit') > -1) {\n      return webkitOutput;\n    }\n\n    var mozOutput = outputValue.split(/,(?![^()]*(?:\\([^()]*\\))?\\))/g).filter(function (val) {\n      return val.match(/-webkit-|-ms-/) === null;\n    }).join(',');\n\n    if (property.indexOf('Moz') > -1) {\n      return mozOutput;\n    }\n\n    style['Webkit' + (0, _capitalizeString2.default)(property)] = webkitOutput;\n    style['Moz' + (0, _capitalizeString2.default)(property)] = mozOutput;\n    return outputValue;\n  }\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  plugins: [],\n  prefixMap: { \"chrome\": { \"appearance\": 59, \"userSelect\": 53, \"textEmphasisPosition\": 59, \"textEmphasis\": 59, \"textEmphasisStyle\": 59, \"textEmphasisColor\": 59, \"boxDecorationBreak\": 59, \"clipPath\": 54, \"maskImage\": 59, \"maskMode\": 59, \"maskRepeat\": 59, \"maskPosition\": 59, \"maskClip\": 59, \"maskOrigin\": 59, \"maskSize\": 59, \"maskComposite\": 59, \"mask\": 59, \"maskBorderSource\": 59, \"maskBorderMode\": 59, \"maskBorderSlice\": 59, \"maskBorderWidth\": 59, \"maskBorderOutset\": 59, \"maskBorderRepeat\": 59, \"maskBorder\": 59, \"maskType\": 59, \"textDecorationStyle\": 56, \"textDecorationSkip\": 56, \"textDecorationLine\": 56, \"textDecorationColor\": 56, \"filter\": 52, \"fontFeatureSettings\": 47, \"breakAfter\": 49, \"breakBefore\": 49, \"breakInside\": 49, \"columnCount\": 49, \"columnFill\": 49, \"columnGap\": 49, \"columnRule\": 49, \"columnRuleColor\": 49, \"columnRuleStyle\": 49, \"columnRuleWidth\": 49, \"columns\": 49, \"columnSpan\": 49, \"columnWidth\": 49 }, \"safari\": { \"flex\": 8, \"flexBasis\": 8, \"flexDirection\": 8, \"flexGrow\": 8, \"flexFlow\": 8, \"flexShrink\": 8, \"flexWrap\": 8, \"alignContent\": 8, \"alignItems\": 8, \"alignSelf\": 8, \"justifyContent\": 8, \"order\": 8, \"transform\": 8, \"transformOrigin\": 8, \"transformOriginX\": 8, \"transformOriginY\": 8, \"backfaceVisibility\": 8, \"perspective\": 8, \"perspectiveOrigin\": 8, \"transformStyle\": 8, \"transformOriginZ\": 8, \"animation\": 8, \"animationDelay\": 8, \"animationDirection\": 8, \"animationFillMode\": 8, \"animationDuration\": 8, \"animationIterationCount\": 8, \"animationName\": 8, \"animationPlayState\": 8, \"animationTimingFunction\": 8, \"appearance\": 10.1, \"userSelect\": 10.1, \"backdropFilter\": 10.1, \"fontKerning\": 9, \"scrollSnapType\": 10.1, \"scrollSnapPointsX\": 10.1, \"scrollSnapPointsY\": 10.1, \"scrollSnapDestination\": 10.1, \"scrollSnapCoordinate\": 10.1, \"boxDecorationBreak\": 10.1, \"clipPath\": 10.1, \"maskImage\": 10.1, \"maskMode\": 10.1, \"maskRepeat\": 10.1, \"maskPosition\": 10.1, \"maskClip\": 10.1, \"maskOrigin\": 10.1, \"maskSize\": 10.1, \"maskComposite\": 10.1, \"mask\": 10.1, \"maskBorderSource\": 10.1, \"maskBorderMode\": 10.1, \"maskBorderSlice\": 10.1, \"maskBorderWidth\": 10.1, \"maskBorderOutset\": 10.1, \"maskBorderRepeat\": 10.1, \"maskBorder\": 10.1, \"maskType\": 10.1, \"textDecorationStyle\": 10.1, \"textDecorationSkip\": 10.1, \"textDecorationLine\": 10.1, \"textDecorationColor\": 10.1, \"shapeImageThreshold\": 10, \"shapeImageMargin\": 10, \"shapeImageOutside\": 10, \"filter\": 9, \"hyphens\": 10.1, \"flowInto\": 10.1, \"flowFrom\": 10.1, \"breakBefore\": 8, \"breakAfter\": 8, \"breakInside\": 8, \"regionFragment\": 10.1, \"columnCount\": 8, \"columnFill\": 8, \"columnGap\": 8, \"columnRule\": 8, \"columnRuleColor\": 8, \"columnRuleStyle\": 8, \"columnRuleWidth\": 8, \"columns\": 8, \"columnSpan\": 8, \"columnWidth\": 8 }, \"firefox\": { \"appearance\": 54, \"userSelect\": 54, \"textAlignLast\": 48, \"tabSize\": 54, \"hyphens\": 42, \"breakAfter\": 51, \"breakBefore\": 51, \"breakInside\": 51, \"columnCount\": 51, \"columnFill\": 51, \"columnGap\": 51, \"columnRule\": 51, \"columnRuleColor\": 51, \"columnRuleStyle\": 51, \"columnRuleWidth\": 51, \"columns\": 51, \"columnSpan\": 51, \"columnWidth\": 51 }, \"opera\": { \"flex\": 16, \"flexBasis\": 16, \"flexDirection\": 16, \"flexGrow\": 16, \"flexFlow\": 16, \"flexShrink\": 16, \"flexWrap\": 16, \"alignContent\": 16, \"alignItems\": 16, \"alignSelf\": 16, \"justifyContent\": 16, \"order\": 16, \"transform\": 22, \"transformOrigin\": 22, \"transformOriginX\": 22, \"transformOriginY\": 22, \"backfaceVisibility\": 22, \"perspective\": 22, \"perspectiveOrigin\": 22, \"transformStyle\": 22, \"transformOriginZ\": 22, \"animation\": 29, \"animationDelay\": 29, \"animationDirection\": 29, \"animationFillMode\": 29, \"animationDuration\": 29, \"animationIterationCount\": 29, \"animationName\": 29, \"animationPlayState\": 29, \"animationTimingFunction\": 29, \"appearance\": 44, \"userSelect\": 40, \"fontKerning\": 19, \"textEmphasisPosition\": 44, \"textEmphasis\": 44, \"textEmphasisStyle\": 44, \"textEmphasisColor\": 44, \"boxDecorationBreak\": 44, \"clipPath\": 41, \"maskImage\": 44, \"maskMode\": 44, \"maskRepeat\": 44, \"maskPosition\": 44, \"maskClip\": 44, \"maskOrigin\": 44, \"maskSize\": 44, \"maskComposite\": 44, \"mask\": 44, \"maskBorderSource\": 44, \"maskBorderMode\": 44, \"maskBorderSlice\": 44, \"maskBorderWidth\": 44, \"maskBorderOutset\": 44, \"maskBorderRepeat\": 44, \"maskBorder\": 44, \"maskType\": 44, \"textDecorationStyle\": 43, \"textDecorationSkip\": 43, \"textDecorationLine\": 43, \"textDecorationColor\": 43, \"filter\": 39, \"fontFeatureSettings\": 34, \"breakAfter\": 36, \"breakBefore\": 36, \"breakInside\": 36, \"columnCount\": 36, \"columnFill\": 36, \"columnGap\": 36, \"columnRule\": 36, \"columnRuleColor\": 36, \"columnRuleStyle\": 36, \"columnRuleWidth\": 36, \"columns\": 36, \"columnSpan\": 36, \"columnWidth\": 36 }, \"ie\": { \"userSelect\": 11, \"wrapFlow\": 11, \"wrapThrough\": 11, \"wrapMargin\": 11, \"scrollSnapType\": 11, \"scrollSnapPointsX\": 11, \"scrollSnapPointsY\": 11, \"scrollSnapDestination\": 11, \"scrollSnapCoordinate\": 11, \"hyphens\": 11, \"flowInto\": 11, \"flowFrom\": 11, \"breakBefore\": 11, \"breakAfter\": 11, \"breakInside\": 11, \"regionFragment\": 11, \"gridTemplateColumns\": 11, \"gridTemplateRows\": 11, \"gridTemplateAreas\": 11, \"gridTemplate\": 11, \"gridAutoColumns\": 11, \"gridAutoRows\": 11, \"gridAutoFlow\": 11, \"grid\": 11, \"gridRowStart\": 11, \"gridColumnStart\": 11, \"gridRowEnd\": 11, \"gridRow\": 11, \"gridColumn\": 11, \"gridColumnEnd\": 11, \"gridColumnGap\": 11, \"gridRowGap\": 11, \"gridArea\": 11, \"gridGap\": 11, \"textSizeAdjust\": 11 }, \"edge\": { \"userSelect\": 15, \"wrapFlow\": 15, \"wrapThrough\": 15, \"wrapMargin\": 15, \"scrollSnapType\": 15, \"scrollSnapPointsX\": 15, \"scrollSnapPointsY\": 15, \"scrollSnapDestination\": 15, \"scrollSnapCoordinate\": 15, \"hyphens\": 15, \"flowInto\": 15, \"flowFrom\": 15, \"breakBefore\": 15, \"breakAfter\": 15, \"breakInside\": 15, \"regionFragment\": 15, \"gridTemplateColumns\": 15, \"gridTemplateRows\": 15, \"gridTemplateAreas\": 15, \"gridTemplate\": 15, \"gridAutoColumns\": 15, \"gridAutoRows\": 15, \"gridAutoFlow\": 15, \"grid\": 15, \"gridRowStart\": 15, \"gridColumnStart\": 15, \"gridRowEnd\": 15, \"gridRow\": 15, \"gridColumn\": 15, \"gridColumnEnd\": 15, \"gridColumnGap\": 15, \"gridRowGap\": 15, \"gridArea\": 15, \"gridGap\": 15 }, \"ios_saf\": { \"flex\": 8.1, \"flexBasis\": 8.1, \"flexDirection\": 8.1, \"flexGrow\": 8.1, \"flexFlow\": 8.1, \"flexShrink\": 8.1, \"flexWrap\": 8.1, \"alignContent\": 8.1, \"alignItems\": 8.1, \"alignSelf\": 8.1, \"justifyContent\": 8.1, \"order\": 8.1, \"transform\": 8.1, \"transformOrigin\": 8.1, \"transformOriginX\": 8.1, \"transformOriginY\": 8.1, \"backfaceVisibility\": 8.1, \"perspective\": 8.1, \"perspectiveOrigin\": 8.1, \"transformStyle\": 8.1, \"transformOriginZ\": 8.1, \"animation\": 8.1, \"animationDelay\": 8.1, \"animationDirection\": 8.1, \"animationFillMode\": 8.1, \"animationDuration\": 8.1, \"animationIterationCount\": 8.1, \"animationName\": 8.1, \"animationPlayState\": 8.1, \"animationTimingFunction\": 8.1, \"appearance\": 10, \"userSelect\": 10, \"backdropFilter\": 10, \"fontKerning\": 10, \"scrollSnapType\": 10, \"scrollSnapPointsX\": 10, \"scrollSnapPointsY\": 10, \"scrollSnapDestination\": 10, \"scrollSnapCoordinate\": 10, \"boxDecorationBreak\": 10, \"clipPath\": 10, \"maskImage\": 10, \"maskMode\": 10, \"maskRepeat\": 10, \"maskPosition\": 10, \"maskClip\": 10, \"maskOrigin\": 10, \"maskSize\": 10, \"maskComposite\": 10, \"mask\": 10, \"maskBorderSource\": 10, \"maskBorderMode\": 10, \"maskBorderSlice\": 10, \"maskBorderWidth\": 10, \"maskBorderOutset\": 10, \"maskBorderRepeat\": 10, \"maskBorder\": 10, \"maskType\": 10, \"textSizeAdjust\": 10, \"textDecorationStyle\": 10, \"textDecorationSkip\": 10, \"textDecorationLine\": 10, \"textDecorationColor\": 10, \"shapeImageThreshold\": 10, \"shapeImageMargin\": 10, \"shapeImageOutside\": 10, \"filter\": 9, \"hyphens\": 10, \"flowInto\": 10, \"flowFrom\": 10, \"breakBefore\": 8.1, \"breakAfter\": 8.1, \"breakInside\": 8.1, \"regionFragment\": 10, \"columnCount\": 8.1, \"columnFill\": 8.1, \"columnGap\": 8.1, \"columnRule\": 8.1, \"columnRuleColor\": 8.1, \"columnRuleStyle\": 8.1, \"columnRuleWidth\": 8.1, \"columns\": 8.1, \"columnSpan\": 8.1, \"columnWidth\": 8.1 }, \"android\": { \"flex\": 4.2, \"flexBasis\": 4.2, \"flexDirection\": 4.2, \"flexGrow\": 4.2, \"flexFlow\": 4.2, \"flexShrink\": 4.2, \"flexWrap\": 4.2, \"alignContent\": 4.2, \"alignItems\": 4.2, \"alignSelf\": 4.2, \"justifyContent\": 4.2, \"order\": 4.2, \"transition\": 4.2, \"transitionDelay\": 4.2, \"transitionDuration\": 4.2, \"transitionProperty\": 4.2, \"transitionTimingFunction\": 4.2, \"transform\": 4.4, \"transformOrigin\": 4.4, \"transformOriginX\": 4.4, \"transformOriginY\": 4.4, \"backfaceVisibility\": 4.4, \"perspective\": 4.4, \"perspectiveOrigin\": 4.4, \"transformStyle\": 4.4, \"transformOriginZ\": 4.4, \"animation\": 4.4, \"animationDelay\": 4.4, \"animationDirection\": 4.4, \"animationFillMode\": 4.4, \"animationDuration\": 4.4, \"animationIterationCount\": 4.4, \"animationName\": 4.4, \"animationPlayState\": 4.4, \"animationTimingFunction\": 4.4, \"appearance\": 53, \"userSelect\": 53, \"fontKerning\": 4.4, \"textEmphasisPosition\": 53, \"textEmphasis\": 53, \"textEmphasisStyle\": 53, \"textEmphasisColor\": 53, \"boxDecorationBreak\": 53, \"clipPath\": 53, \"maskImage\": 53, \"maskMode\": 53, \"maskRepeat\": 53, \"maskPosition\": 53, \"maskClip\": 53, \"maskOrigin\": 53, \"maskSize\": 53, \"maskComposite\": 53, \"mask\": 53, \"maskBorderSource\": 53, \"maskBorderMode\": 53, \"maskBorderSlice\": 53, \"maskBorderWidth\": 53, \"maskBorderOutset\": 53, \"maskBorderRepeat\": 53, \"maskBorder\": 53, \"maskType\": 53, \"filter\": 4.4, \"fontFeatureSettings\": 4.4, \"breakAfter\": 53, \"breakBefore\": 53, \"breakInside\": 53, \"columnCount\": 53, \"columnFill\": 53, \"columnGap\": 53, \"columnRule\": 53, \"columnRuleColor\": 53, \"columnRuleStyle\": 53, \"columnRuleWidth\": 53, \"columns\": 53, \"columnSpan\": 53, \"columnWidth\": 53 }, \"and_chr\": { \"appearance\": 55, \"textEmphasisPosition\": 55, \"textEmphasis\": 55, \"textEmphasisStyle\": 55, \"textEmphasisColor\": 55, \"boxDecorationBreak\": 55, \"maskImage\": 55, \"maskMode\": 55, \"maskRepeat\": 55, \"maskPosition\": 55, \"maskClip\": 55, \"maskOrigin\": 55, \"maskSize\": 55, \"maskComposite\": 55, \"mask\": 55, \"maskBorderSource\": 55, \"maskBorderMode\": 55, \"maskBorderSlice\": 55, \"maskBorderWidth\": 55, \"maskBorderOutset\": 55, \"maskBorderRepeat\": 55, \"maskBorder\": 55, \"maskType\": 55, \"textDecorationStyle\": 55, \"textDecorationSkip\": 55, \"textDecorationLine\": 55, \"textDecorationColor\": 55 }, \"and_uc\": { \"flex\": 11, \"flexBasis\": 11, \"flexDirection\": 11, \"flexGrow\": 11, \"flexFlow\": 11, \"flexShrink\": 11, \"flexWrap\": 11, \"alignContent\": 11, \"alignItems\": 11, \"alignSelf\": 11, \"justifyContent\": 11, \"order\": 11, \"transition\": 11, \"transitionDelay\": 11, \"transitionDuration\": 11, \"transitionProperty\": 11, \"transitionTimingFunction\": 11, \"transform\": 11, \"transformOrigin\": 11, \"transformOriginX\": 11, \"transformOriginY\": 11, \"backfaceVisibility\": 11, \"perspective\": 11, \"perspectiveOrigin\": 11, \"transformStyle\": 11, \"transformOriginZ\": 11, \"animation\": 11, \"animationDelay\": 11, \"animationDirection\": 11, \"animationFillMode\": 11, \"animationDuration\": 11, \"animationIterationCount\": 11, \"animationName\": 11, \"animationPlayState\": 11, \"animationTimingFunction\": 11, \"appearance\": 11, \"userSelect\": 11, \"fontKerning\": 11, \"textEmphasisPosition\": 11, \"textEmphasis\": 11, \"textEmphasisStyle\": 11, \"textEmphasisColor\": 11, \"maskImage\": 11, \"maskMode\": 11, \"maskRepeat\": 11, \"maskPosition\": 11, \"maskClip\": 11, \"maskOrigin\": 11, \"maskSize\": 11, \"maskComposite\": 11, \"mask\": 11, \"maskBorderSource\": 11, \"maskBorderMode\": 11, \"maskBorderSlice\": 11, \"maskBorderWidth\": 11, \"maskBorderOutset\": 11, \"maskBorderRepeat\": 11, \"maskBorder\": 11, \"maskType\": 11, \"textSizeAdjust\": 11, \"filter\": 11, \"hyphens\": 11, \"flowInto\": 11, \"flowFrom\": 11, \"breakBefore\": 11, \"breakAfter\": 11, \"breakInside\": 11, \"regionFragment\": 11, \"fontFeatureSettings\": 11, \"columnCount\": 11, \"columnFill\": 11, \"columnGap\": 11, \"columnRule\": 11, \"columnRuleColor\": 11, \"columnRuleStyle\": 11, \"columnRuleWidth\": 11, \"columns\": 11, \"columnSpan\": 11, \"columnWidth\": 11 }, \"op_mini\": {} }\n};\nmodule.exports = exports[\"default\"];","var properties = require('./css-properties.js');\nvar React = require('react');\n\nmodule.exports = function(props, propName, componentName) {\n  var styles = props[propName];\n  if (!styles) {\n    return;\n  }\n\n  var failures = [];\n  Object.keys(styles).forEach(function(styleKey){\n    if (properties.indexOf(styleKey) === -1) {\n      failures.push(styleKey);\n    }\n  });\n  if (failures.length) {\n    throw new Error('Prop ' + propName + ' passed to ' + componentName + '. Has invalid keys ' + failures.join(', '));\n  }\n};\n\nmodule.exports.isRequired = function(props, propName, componentName) {\n  if (!props[propName]) {\n    throw new Error('Prop ' + propName + ' passed to ' + componentName + ' is required');\n  }\n  return module.exports(props, propName, componentName);\n};\n\nmodule.exports.supportingArrays = React.PropTypes.oneOfType([\n  React.PropTypes.arrayOf(module.exports),\n  module.exports\n]);\n\n","module.exports = [\n  \"alignContent\",\n  \"MozAlignContent\",\n  \"WebkitAlignContent\",\n  \"MSAlignContent\",\n  \"OAlignContent\",\n  \"alignItems\",\n  \"MozAlignItems\",\n  \"WebkitAlignItems\",\n  \"MSAlignItems\",\n  \"OAlignItems\",\n  \"alignSelf\",\n  \"MozAlignSelf\",\n  \"WebkitAlignSelf\",\n  \"MSAlignSelf\",\n  \"OAlignSelf\",\n  \"all\",\n  \"MozAll\",\n  \"WebkitAll\",\n  \"MSAll\",\n  \"OAll\",\n  \"animation\",\n  \"MozAnimation\",\n  \"WebkitAnimation\",\n  \"MSAnimation\",\n  \"OAnimation\",\n  \"animationDelay\",\n  \"MozAnimationDelay\",\n  \"WebkitAnimationDelay\",\n  \"MSAnimationDelay\",\n  \"OAnimationDelay\",\n  \"animationDirection\",\n  \"MozAnimationDirection\",\n  \"WebkitAnimationDirection\",\n  \"MSAnimationDirection\",\n  \"OAnimationDirection\",\n  \"animationDuration\",\n  \"MozAnimationDuration\",\n  \"WebkitAnimationDuration\",\n  \"MSAnimationDuration\",\n  \"OAnimationDuration\",\n  \"animationFillMode\",\n  \"MozAnimationFillMode\",\n  \"WebkitAnimationFillMode\",\n  \"MSAnimationFillMode\",\n  \"OAnimationFillMode\",\n  \"animationIterationCount\",\n  \"MozAnimationIterationCount\",\n  \"WebkitAnimationIterationCount\",\n  \"MSAnimationIterationCount\",\n  \"OAnimationIterationCount\",\n  \"animationName\",\n  \"MozAnimationName\",\n  \"WebkitAnimationName\",\n  \"MSAnimationName\",\n  \"OAnimationName\",\n  \"animationPlayState\",\n  \"MozAnimationPlayState\",\n  \"WebkitAnimationPlayState\",\n  \"MSAnimationPlayState\",\n  \"OAnimationPlayState\",\n  \"animationTimingFunction\",\n  \"MozAnimationTimingFunction\",\n  \"WebkitAnimationTimingFunction\",\n  \"MSAnimationTimingFunction\",\n  \"OAnimationTimingFunction\",\n  \"backfaceVisibility\",\n  \"MozBackfaceVisibility\",\n  \"WebkitBackfaceVisibility\",\n  \"MSBackfaceVisibility\",\n  \"OBackfaceVisibility\",\n  \"background\",\n  \"MozBackground\",\n  \"WebkitBackground\",\n  \"MSBackground\",\n  \"OBackground\",\n  \"backgroundAttachment\",\n  \"MozBackgroundAttachment\",\n  \"WebkitBackgroundAttachment\",\n  \"MSBackgroundAttachment\",\n  \"OBackgroundAttachment\",\n  \"backgroundBlendMode\",\n  \"MozBackgroundBlendMode\",\n  \"WebkitBackgroundBlendMode\",\n  \"MSBackgroundBlendMode\",\n  \"OBackgroundBlendMode\",\n  \"backgroundClip\",\n  \"MozBackgroundClip\",\n  \"WebkitBackgroundClip\",\n  \"MSBackgroundClip\",\n  \"OBackgroundClip\",\n  \"backgroundColor\",\n  \"MozBackgroundColor\",\n  \"WebkitBackgroundColor\",\n  \"MSBackgroundColor\",\n  \"OBackgroundColor\",\n  \"backgroundImage\",\n  \"MozBackgroundImage\",\n  \"WebkitBackgroundImage\",\n  \"MSBackgroundImage\",\n  \"OBackgroundImage\",\n  \"backgroundOrigin\",\n  \"MozBackgroundOrigin\",\n  \"WebkitBackgroundOrigin\",\n  \"MSBackgroundOrigin\",\n  \"OBackgroundOrigin\",\n  \"backgroundPosition\",\n  \"MozBackgroundPosition\",\n  \"WebkitBackgroundPosition\",\n  \"MSBackgroundPosition\",\n  \"OBackgroundPosition\",\n  \"backgroundRepeat\",\n  \"MozBackgroundRepeat\",\n  \"WebkitBackgroundRepeat\",\n  \"MSBackgroundRepeat\",\n  \"OBackgroundRepeat\",\n  \"backgroundSize\",\n  \"MozBackgroundSize\",\n  \"WebkitBackgroundSize\",\n  \"MSBackgroundSize\",\n  \"OBackgroundSize\",\n  \"blockSize\",\n  \"MozBlockSize\",\n  \"WebkitBlockSize\",\n  \"MSBlockSize\",\n  \"OBlockSize\",\n  \"border\",\n  \"MozBorder\",\n  \"WebkitBorder\",\n  \"MSBorder\",\n  \"OBorder\",\n  \"borderBlockEnd\",\n  \"MozBorderBlockEnd\",\n  \"WebkitBorderBlockEnd\",\n  \"MSBorderBlockEnd\",\n  \"OBorderBlockEnd\",\n  \"borderBlockEndColor\",\n  \"MozBorderBlockEndColor\",\n  \"WebkitBorderBlockEndColor\",\n  \"MSBorderBlockEndColor\",\n  \"OBorderBlockEndColor\",\n  \"borderBlockEndStyle\",\n  \"MozBorderBlockEndStyle\",\n  \"WebkitBorderBlockEndStyle\",\n  \"MSBorderBlockEndStyle\",\n  \"OBorderBlockEndStyle\",\n  \"borderBlockEndWidth\",\n  \"MozBorderBlockEndWidth\",\n  \"WebkitBorderBlockEndWidth\",\n  \"MSBorderBlockEndWidth\",\n  \"OBorderBlockEndWidth\",\n  \"borderBlockStart\",\n  \"MozBorderBlockStart\",\n  \"WebkitBorderBlockStart\",\n  \"MSBorderBlockStart\",\n  \"OBorderBlockStart\",\n  \"borderBlockStartColor\",\n  \"MozBorderBlockStartColor\",\n  \"WebkitBorderBlockStartColor\",\n  \"MSBorderBlockStartColor\",\n  \"OBorderBlockStartColor\",\n  \"borderBlockStartStyle\",\n  \"MozBorderBlockStartStyle\",\n  \"WebkitBorderBlockStartStyle\",\n  \"MSBorderBlockStartStyle\",\n  \"OBorderBlockStartStyle\",\n  \"borderBlockStartWidth\",\n  \"MozBorderBlockStartWidth\",\n  \"WebkitBorderBlockStartWidth\",\n  \"MSBorderBlockStartWidth\",\n  \"OBorderBlockStartWidth\",\n  \"borderBottom\",\n  \"MozBorderBottom\",\n  \"WebkitBorderBottom\",\n  \"MSBorderBottom\",\n  \"OBorderBottom\",\n  \"borderBottomColor\",\n  \"MozBorderBottomColor\",\n  \"WebkitBorderBottomColor\",\n  \"MSBorderBottomColor\",\n  \"OBorderBottomColor\",\n  \"borderBottomLeftRadius\",\n  \"MozBorderBottomLeftRadius\",\n  \"WebkitBorderBottomLeftRadius\",\n  \"MSBorderBottomLeftRadius\",\n  \"OBorderBottomLeftRadius\",\n  \"borderBottomRightRadius\",\n  \"MozBorderBottomRightRadius\",\n  \"WebkitBorderBottomRightRadius\",\n  \"MSBorderBottomRightRadius\",\n  \"OBorderBottomRightRadius\",\n  \"borderBottomStyle\",\n  \"MozBorderBottomStyle\",\n  \"WebkitBorderBottomStyle\",\n  \"MSBorderBottomStyle\",\n  \"OBorderBottomStyle\",\n  \"borderBottomWidth\",\n  \"MozBorderBottomWidth\",\n  \"WebkitBorderBottomWidth\",\n  \"MSBorderBottomWidth\",\n  \"OBorderBottomWidth\",\n  \"borderCollapse\",\n  \"MozBorderCollapse\",\n  \"WebkitBorderCollapse\",\n  \"MSBorderCollapse\",\n  \"OBorderCollapse\",\n  \"borderColor\",\n  \"MozBorderColor\",\n  \"WebkitBorderColor\",\n  \"MSBorderColor\",\n  \"OBorderColor\",\n  \"borderImage\",\n  \"MozBorderImage\",\n  \"WebkitBorderImage\",\n  \"MSBorderImage\",\n  \"OBorderImage\",\n  \"borderImageOutset\",\n  \"MozBorderImageOutset\",\n  \"WebkitBorderImageOutset\",\n  \"MSBorderImageOutset\",\n  \"OBorderImageOutset\",\n  \"borderImageRepeat\",\n  \"MozBorderImageRepeat\",\n  \"WebkitBorderImageRepeat\",\n  \"MSBorderImageRepeat\",\n  \"OBorderImageRepeat\",\n  \"borderImageSlice\",\n  \"MozBorderImageSlice\",\n  \"WebkitBorderImageSlice\",\n  \"MSBorderImageSlice\",\n  \"OBorderImageSlice\",\n  \"borderImageSource\",\n  \"MozBorderImageSource\",\n  \"WebkitBorderImageSource\",\n  \"MSBorderImageSource\",\n  \"OBorderImageSource\",\n  \"borderImageWidth\",\n  \"MozBorderImageWidth\",\n  \"WebkitBorderImageWidth\",\n  \"MSBorderImageWidth\",\n  \"OBorderImageWidth\",\n  \"borderInlineEnd\",\n  \"MozBorderInlineEnd\",\n  \"WebkitBorderInlineEnd\",\n  \"MSBorderInlineEnd\",\n  \"OBorderInlineEnd\",\n  \"borderInlineEndColor\",\n  \"MozBorderInlineEndColor\",\n  \"WebkitBorderInlineEndColor\",\n  \"MSBorderInlineEndColor\",\n  \"OBorderInlineEndColor\",\n  \"borderInlineEndStyle\",\n  \"MozBorderInlineEndStyle\",\n  \"WebkitBorderInlineEndStyle\",\n  \"MSBorderInlineEndStyle\",\n  \"OBorderInlineEndStyle\",\n  \"borderInlineEndWidth\",\n  \"MozBorderInlineEndWidth\",\n  \"WebkitBorderInlineEndWidth\",\n  \"MSBorderInlineEndWidth\",\n  \"OBorderInlineEndWidth\",\n  \"borderInlineStart\",\n  \"MozBorderInlineStart\",\n  \"WebkitBorderInlineStart\",\n  \"MSBorderInlineStart\",\n  \"OBorderInlineStart\",\n  \"borderInlineStartColor\",\n  \"MozBorderInlineStartColor\",\n  \"WebkitBorderInlineStartColor\",\n  \"MSBorderInlineStartColor\",\n  \"OBorderInlineStartColor\",\n  \"borderInlineStartStyle\",\n  \"MozBorderInlineStartStyle\",\n  \"WebkitBorderInlineStartStyle\",\n  \"MSBorderInlineStartStyle\",\n  \"OBorderInlineStartStyle\",\n  \"borderInlineStartWidth\",\n  \"MozBorderInlineStartWidth\",\n  \"WebkitBorderInlineStartWidth\",\n  \"MSBorderInlineStartWidth\",\n  \"OBorderInlineStartWidth\",\n  \"borderLeft\",\n  \"MozBorderLeft\",\n  \"WebkitBorderLeft\",\n  \"MSBorderLeft\",\n  \"OBorderLeft\",\n  \"borderLeftColor\",\n  \"MozBorderLeftColor\",\n  \"WebkitBorderLeftColor\",\n  \"MSBorderLeftColor\",\n  \"OBorderLeftColor\",\n  \"borderLeftStyle\",\n  \"MozBorderLeftStyle\",\n  \"WebkitBorderLeftStyle\",\n  \"MSBorderLeftStyle\",\n  \"OBorderLeftStyle\",\n  \"borderLeftWidth\",\n  \"MozBorderLeftWidth\",\n  \"WebkitBorderLeftWidth\",\n  \"MSBorderLeftWidth\",\n  \"OBorderLeftWidth\",\n  \"borderRadius\",\n  \"MozBorderRadius\",\n  \"WebkitBorderRadius\",\n  \"MSBorderRadius\",\n  \"OBorderRadius\",\n  \"borderRight\",\n  \"MozBorderRight\",\n  \"WebkitBorderRight\",\n  \"MSBorderRight\",\n  \"OBorderRight\",\n  \"borderRightColor\",\n  \"MozBorderRightColor\",\n  \"WebkitBorderRightColor\",\n  \"MSBorderRightColor\",\n  \"OBorderRightColor\",\n  \"borderRightStyle\",\n  \"MozBorderRightStyle\",\n  \"WebkitBorderRightStyle\",\n  \"MSBorderRightStyle\",\n  \"OBorderRightStyle\",\n  \"borderRightWidth\",\n  \"MozBorderRightWidth\",\n  \"WebkitBorderRightWidth\",\n  \"MSBorderRightWidth\",\n  \"OBorderRightWidth\",\n  \"borderSpacing\",\n  \"MozBorderSpacing\",\n  \"WebkitBorderSpacing\",\n  \"MSBorderSpacing\",\n  \"OBorderSpacing\",\n  \"borderStyle\",\n  \"MozBorderStyle\",\n  \"WebkitBorderStyle\",\n  \"MSBorderStyle\",\n  \"OBorderStyle\",\n  \"borderTop\",\n  \"MozBorderTop\",\n  \"WebkitBorderTop\",\n  \"MSBorderTop\",\n  \"OBorderTop\",\n  \"borderTopColor\",\n  \"MozBorderTopColor\",\n  \"WebkitBorderTopColor\",\n  \"MSBorderTopColor\",\n  \"OBorderTopColor\",\n  \"borderTopLeftRadius\",\n  \"MozBorderTopLeftRadius\",\n  \"WebkitBorderTopLeftRadius\",\n  \"MSBorderTopLeftRadius\",\n  \"OBorderTopLeftRadius\",\n  \"borderTopRightRadius\",\n  \"MozBorderTopRightRadius\",\n  \"WebkitBorderTopRightRadius\",\n  \"MSBorderTopRightRadius\",\n  \"OBorderTopRightRadius\",\n  \"borderTopStyle\",\n  \"MozBorderTopStyle\",\n  \"WebkitBorderTopStyle\",\n  \"MSBorderTopStyle\",\n  \"OBorderTopStyle\",\n  \"borderTopWidth\",\n  \"MozBorderTopWidth\",\n  \"WebkitBorderTopWidth\",\n  \"MSBorderTopWidth\",\n  \"OBorderTopWidth\",\n  \"borderWidth\",\n  \"MozBorderWidth\",\n  \"WebkitBorderWidth\",\n  \"MSBorderWidth\",\n  \"OBorderWidth\",\n  \"bottom\",\n  \"MozBottom\",\n  \"WebkitBottom\",\n  \"MSBottom\",\n  \"OBottom\",\n  \"boxDecorationBreak\",\n  \"MozBoxDecorationBreak\",\n  \"WebkitBoxDecorationBreak\",\n  \"MSBoxDecorationBreak\",\n  \"OBoxDecorationBreak\",\n  \"boxShadow\",\n  \"MozBoxShadow\",\n  \"WebkitBoxShadow\",\n  \"MSBoxShadow\",\n  \"OBoxShadow\",\n  \"boxSizing\",\n  \"MozBoxSizing\",\n  \"WebkitBoxSizing\",\n  \"MSBoxSizing\",\n  \"OBoxSizing\",\n  \"breakAfter\",\n  \"MozBreakAfter\",\n  \"WebkitBreakAfter\",\n  \"MSBreakAfter\",\n  \"OBreakAfter\",\n  \"breakBefore\",\n  \"MozBreakBefore\",\n  \"WebkitBreakBefore\",\n  \"MSBreakBefore\",\n  \"OBreakBefore\",\n  \"breakInside\",\n  \"MozBreakInside\",\n  \"WebkitBreakInside\",\n  \"MSBreakInside\",\n  \"OBreakInside\",\n  \"captionSide\",\n  \"MozCaptionSide\",\n  \"WebkitCaptionSide\",\n  \"MSCaptionSide\",\n  \"OCaptionSide\",\n  \"caretColor\",\n  \"MozCaretColor\",\n  \"WebkitCaretColor\",\n  \"MSCaretColor\",\n  \"OCaretColor\",\n  \"ch\",\n  \"MozCh\",\n  \"WebkitCh\",\n  \"MSCh\",\n  \"OCh\",\n  \"clear\",\n  \"MozClear\",\n  \"WebkitClear\",\n  \"MSClear\",\n  \"OClear\",\n  \"clip\",\n  \"MozClip\",\n  \"WebkitClip\",\n  \"MSClip\",\n  \"OClip\",\n  \"clipPath\",\n  \"MozClipPath\",\n  \"WebkitClipPath\",\n  \"MSClipPath\",\n  \"OClipPath\",\n  \"cm\",\n  \"MozCm\",\n  \"WebkitCm\",\n  \"MSCm\",\n  \"OCm\",\n  \"color\",\n  \"MozColor\",\n  \"WebkitColor\",\n  \"MSColor\",\n  \"OColor\",\n  \"columnCount\",\n  \"MozColumnCount\",\n  \"WebkitColumnCount\",\n  \"MSColumnCount\",\n  \"OColumnCount\",\n  \"columnFill\",\n  \"MozColumnFill\",\n  \"WebkitColumnFill\",\n  \"MSColumnFill\",\n  \"OColumnFill\",\n  \"columnGap\",\n  \"MozColumnGap\",\n  \"WebkitColumnGap\",\n  \"MSColumnGap\",\n  \"OColumnGap\",\n  \"columnRule\",\n  \"MozColumnRule\",\n  \"WebkitColumnRule\",\n  \"MSColumnRule\",\n  \"OColumnRule\",\n  \"columnRuleColor\",\n  \"MozColumnRuleColor\",\n  \"WebkitColumnRuleColor\",\n  \"MSColumnRuleColor\",\n  \"OColumnRuleColor\",\n  \"columnRuleStyle\",\n  \"MozColumnRuleStyle\",\n  \"WebkitColumnRuleStyle\",\n  \"MSColumnRuleStyle\",\n  \"OColumnRuleStyle\",\n  \"columnRuleWidth\",\n  \"MozColumnRuleWidth\",\n  \"WebkitColumnRuleWidth\",\n  \"MSColumnRuleWidth\",\n  \"OColumnRuleWidth\",\n  \"columnSpan\",\n  \"MozColumnSpan\",\n  \"WebkitColumnSpan\",\n  \"MSColumnSpan\",\n  \"OColumnSpan\",\n  \"columnWidth\",\n  \"MozColumnWidth\",\n  \"WebkitColumnWidth\",\n  \"MSColumnWidth\",\n  \"OColumnWidth\",\n  \"columns\",\n  \"MozColumns\",\n  \"WebkitColumns\",\n  \"MSColumns\",\n  \"OColumns\",\n  \"content\",\n  \"MozContent\",\n  \"WebkitContent\",\n  \"MSContent\",\n  \"OContent\",\n  \"counterIncrement\",\n  \"MozCounterIncrement\",\n  \"WebkitCounterIncrement\",\n  \"MSCounterIncrement\",\n  \"OCounterIncrement\",\n  \"counterReset\",\n  \"MozCounterReset\",\n  \"WebkitCounterReset\",\n  \"MSCounterReset\",\n  \"OCounterReset\",\n  \"cursor\",\n  \"MozCursor\",\n  \"WebkitCursor\",\n  \"MSCursor\",\n  \"OCursor\",\n  \"deg\",\n  \"MozDeg\",\n  \"WebkitDeg\",\n  \"MSDeg\",\n  \"ODeg\",\n  \"direction\",\n  \"MozDirection\",\n  \"WebkitDirection\",\n  \"MSDirection\",\n  \"ODirection\",\n  \"display\",\n  \"MozDisplay\",\n  \"WebkitDisplay\",\n  \"MSDisplay\",\n  \"ODisplay\",\n  \"dpcm\",\n  \"MozDpcm\",\n  \"WebkitDpcm\",\n  \"MSDpcm\",\n  \"ODpcm\",\n  \"dpi\",\n  \"MozDpi\",\n  \"WebkitDpi\",\n  \"MSDpi\",\n  \"ODpi\",\n  \"dppx\",\n  \"MozDppx\",\n  \"WebkitDppx\",\n  \"MSDppx\",\n  \"ODppx\",\n  \"em\",\n  \"MozEm\",\n  \"WebkitEm\",\n  \"MSEm\",\n  \"OEm\",\n  \"emptyCells\",\n  \"MozEmptyCells\",\n  \"WebkitEmptyCells\",\n  \"MSEmptyCells\",\n  \"OEmptyCells\",\n  \"ex\",\n  \"MozEx\",\n  \"WebkitEx\",\n  \"MSEx\",\n  \"OEx\",\n  \"filter\",\n  \"MozFilter\",\n  \"WebkitFilter\",\n  \"MSFilter\",\n  \"OFilter\",\n  \"flexBasis\",\n  \"MozFlexBasis\",\n  \"WebkitFlexBasis\",\n  \"MSFlexBasis\",\n  \"OFlexBasis\",\n  \"flexDirection\",\n  \"MozFlexDirection\",\n  \"WebkitFlexDirection\",\n  \"MSFlexDirection\",\n  \"OFlexDirection\",\n  \"flexFlow\",\n  \"MozFlexFlow\",\n  \"WebkitFlexFlow\",\n  \"MSFlexFlow\",\n  \"OFlexFlow\",\n  \"flexGrow\",\n  \"MozFlexGrow\",\n  \"WebkitFlexGrow\",\n  \"MSFlexGrow\",\n  \"OFlexGrow\",\n  \"flexShrink\",\n  \"MozFlexShrink\",\n  \"WebkitFlexShrink\",\n  \"MSFlexShrink\",\n  \"OFlexShrink\",\n  \"flexWrap\",\n  \"MozFlexWrap\",\n  \"WebkitFlexWrap\",\n  \"MSFlexWrap\",\n  \"OFlexWrap\",\n  \"float\",\n  \"MozFloat\",\n  \"WebkitFloat\",\n  \"MSFloat\",\n  \"OFloat\",\n  \"font\",\n  \"MozFont\",\n  \"WebkitFont\",\n  \"MSFont\",\n  \"OFont\",\n  \"fontFamily\",\n  \"MozFontFamily\",\n  \"WebkitFontFamily\",\n  \"MSFontFamily\",\n  \"OFontFamily\",\n  \"fontFeatureSettings\",\n  \"MozFontFeatureSettings\",\n  \"WebkitFontFeatureSettings\",\n  \"MSFontFeatureSettings\",\n  \"OFontFeatureSettings\",\n  \"fontKerning\",\n  \"MozFontKerning\",\n  \"WebkitFontKerning\",\n  \"MSFontKerning\",\n  \"OFontKerning\",\n  \"fontLanguageOverride\",\n  \"MozFontLanguageOverride\",\n  \"WebkitFontLanguageOverride\",\n  \"MSFontLanguageOverride\",\n  \"OFontLanguageOverride\",\n  \"fontSize\",\n  \"MozFontSize\",\n  \"WebkitFontSize\",\n  \"MSFontSize\",\n  \"OFontSize\",\n  \"fontSizeAdjust\",\n  \"MozFontSizeAdjust\",\n  \"WebkitFontSizeAdjust\",\n  \"MSFontSizeAdjust\",\n  \"OFontSizeAdjust\",\n  \"fontStretch\",\n  \"MozFontStretch\",\n  \"WebkitFontStretch\",\n  \"MSFontStretch\",\n  \"OFontStretch\",\n  \"fontStyle\",\n  \"MozFontStyle\",\n  \"WebkitFontStyle\",\n  \"MSFontStyle\",\n  \"OFontStyle\",\n  \"fontSynthesis\",\n  \"MozFontSynthesis\",\n  \"WebkitFontSynthesis\",\n  \"MSFontSynthesis\",\n  \"OFontSynthesis\",\n  \"fontVariant\",\n  \"MozFontVariant\",\n  \"WebkitFontVariant\",\n  \"MSFontVariant\",\n  \"OFontVariant\",\n  \"fontVariantAlternates\",\n  \"MozFontVariantAlternates\",\n  \"WebkitFontVariantAlternates\",\n  \"MSFontVariantAlternates\",\n  \"OFontVariantAlternates\",\n  \"fontVariantCaps\",\n  \"MozFontVariantCaps\",\n  \"WebkitFontVariantCaps\",\n  \"MSFontVariantCaps\",\n  \"OFontVariantCaps\",\n  \"fontVariantEastAsian\",\n  \"MozFontVariantEastAsian\",\n  \"WebkitFontVariantEastAsian\",\n  \"MSFontVariantEastAsian\",\n  \"OFontVariantEastAsian\",\n  \"fontVariantLigatures\",\n  \"MozFontVariantLigatures\",\n  \"WebkitFontVariantLigatures\",\n  \"MSFontVariantLigatures\",\n  \"OFontVariantLigatures\",\n  \"fontVariantNumeric\",\n  \"MozFontVariantNumeric\",\n  \"WebkitFontVariantNumeric\",\n  \"MSFontVariantNumeric\",\n  \"OFontVariantNumeric\",\n  \"fontVariantPosition\",\n  \"MozFontVariantPosition\",\n  \"WebkitFontVariantPosition\",\n  \"MSFontVariantPosition\",\n  \"OFontVariantPosition\",\n  \"fontWeight\",\n  \"MozFontWeight\",\n  \"WebkitFontWeight\",\n  \"MSFontWeight\",\n  \"OFontWeight\",\n  \"fr\",\n  \"MozFr\",\n  \"WebkitFr\",\n  \"MSFr\",\n  \"OFr\",\n  \"grad\",\n  \"MozGrad\",\n  \"WebkitGrad\",\n  \"MSGrad\",\n  \"OGrad\",\n  \"grid\",\n  \"MozGrid\",\n  \"WebkitGrid\",\n  \"MSGrid\",\n  \"OGrid\",\n  \"gridArea\",\n  \"MozGridArea\",\n  \"WebkitGridArea\",\n  \"MSGridArea\",\n  \"OGridArea\",\n  \"gridAutoColumns\",\n  \"MozGridAutoColumns\",\n  \"WebkitGridAutoColumns\",\n  \"MSGridAutoColumns\",\n  \"OGridAutoColumns\",\n  \"gridAutoFlow\",\n  \"MozGridAutoFlow\",\n  \"WebkitGridAutoFlow\",\n  \"MSGridAutoFlow\",\n  \"OGridAutoFlow\",\n  \"gridAutoRows\",\n  \"MozGridAutoRows\",\n  \"WebkitGridAutoRows\",\n  \"MSGridAutoRows\",\n  \"OGridAutoRows\",\n  \"gridColumn\",\n  \"MozGridColumn\",\n  \"WebkitGridColumn\",\n  \"MSGridColumn\",\n  \"OGridColumn\",\n  \"gridColumnEnd\",\n  \"MozGridColumnEnd\",\n  \"WebkitGridColumnEnd\",\n  \"MSGridColumnEnd\",\n  \"OGridColumnEnd\",\n  \"gridColumnGap\",\n  \"MozGridColumnGap\",\n  \"WebkitGridColumnGap\",\n  \"MSGridColumnGap\",\n  \"OGridColumnGap\",\n  \"gridColumnStart\",\n  \"MozGridColumnStart\",\n  \"WebkitGridColumnStart\",\n  \"MSGridColumnStart\",\n  \"OGridColumnStart\",\n  \"gridGap\",\n  \"MozGridGap\",\n  \"WebkitGridGap\",\n  \"MSGridGap\",\n  \"OGridGap\",\n  \"gridRow\",\n  \"MozGridRow\",\n  \"WebkitGridRow\",\n  \"MSGridRow\",\n  \"OGridRow\",\n  \"gridRowEnd\",\n  \"MozGridRowEnd\",\n  \"WebkitGridRowEnd\",\n  \"MSGridRowEnd\",\n  \"OGridRowEnd\",\n  \"gridRowGap\",\n  \"MozGridRowGap\",\n  \"WebkitGridRowGap\",\n  \"MSGridRowGap\",\n  \"OGridRowGap\",\n  \"gridRowStart\",\n  \"MozGridRowStart\",\n  \"WebkitGridRowStart\",\n  \"MSGridRowStart\",\n  \"OGridRowStart\",\n  \"gridTemplate\",\n  \"MozGridTemplate\",\n  \"WebkitGridTemplate\",\n  \"MSGridTemplate\",\n  \"OGridTemplate\",\n  \"gridTemplateAreas\",\n  \"MozGridTemplateAreas\",\n  \"WebkitGridTemplateAreas\",\n  \"MSGridTemplateAreas\",\n  \"OGridTemplateAreas\",\n  \"gridTemplateColumns\",\n  \"MozGridTemplateColumns\",\n  \"WebkitGridTemplateColumns\",\n  \"MSGridTemplateColumns\",\n  \"OGridTemplateColumns\",\n  \"gridTemplateRows\",\n  \"MozGridTemplateRows\",\n  \"WebkitGridTemplateRows\",\n  \"MSGridTemplateRows\",\n  \"OGridTemplateRows\",\n  \"height\",\n  \"MozHeight\",\n  \"WebkitHeight\",\n  \"MSHeight\",\n  \"OHeight\",\n  \"hyphens\",\n  \"MozHyphens\",\n  \"WebkitHyphens\",\n  \"MSHyphens\",\n  \"OHyphens\",\n  \"hz\",\n  \"MozHz\",\n  \"WebkitHz\",\n  \"MSHz\",\n  \"OHz\",\n  \"imageOrientation\",\n  \"MozImageOrientation\",\n  \"WebkitImageOrientation\",\n  \"MSImageOrientation\",\n  \"OImageOrientation\",\n  \"imageRendering\",\n  \"MozImageRendering\",\n  \"WebkitImageRendering\",\n  \"MSImageRendering\",\n  \"OImageRendering\",\n  \"imageResolution\",\n  \"MozImageResolution\",\n  \"WebkitImageResolution\",\n  \"MSImageResolution\",\n  \"OImageResolution\",\n  \"imeMode\",\n  \"MozImeMode\",\n  \"WebkitImeMode\",\n  \"MSImeMode\",\n  \"OImeMode\",\n  \"in\",\n  \"MozIn\",\n  \"WebkitIn\",\n  \"MSIn\",\n  \"OIn\",\n  \"inherit\",\n  \"MozInherit\",\n  \"WebkitInherit\",\n  \"MSInherit\",\n  \"OInherit\",\n  \"initial\",\n  \"MozInitial\",\n  \"WebkitInitial\",\n  \"MSInitial\",\n  \"OInitial\",\n  \"inlineSize\",\n  \"MozInlineSize\",\n  \"WebkitInlineSize\",\n  \"MSInlineSize\",\n  \"OInlineSize\",\n  \"isolation\",\n  \"MozIsolation\",\n  \"WebkitIsolation\",\n  \"MSIsolation\",\n  \"OIsolation\",\n  \"justifyContent\",\n  \"MozJustifyContent\",\n  \"WebkitJustifyContent\",\n  \"MSJustifyContent\",\n  \"OJustifyContent\",\n  \"khz\",\n  \"MozKhz\",\n  \"WebkitKhz\",\n  \"MSKhz\",\n  \"OKhz\",\n  \"left\",\n  \"MozLeft\",\n  \"WebkitLeft\",\n  \"MSLeft\",\n  \"OLeft\",\n  \"letterSpacing\",\n  \"MozLetterSpacing\",\n  \"WebkitLetterSpacing\",\n  \"MSLetterSpacing\",\n  \"OLetterSpacing\",\n  \"lineBreak\",\n  \"MozLineBreak\",\n  \"WebkitLineBreak\",\n  \"MSLineBreak\",\n  \"OLineBreak\",\n  \"lineHeight\",\n  \"MozLineHeight\",\n  \"WebkitLineHeight\",\n  \"MSLineHeight\",\n  \"OLineHeight\",\n  \"listStyle\",\n  \"MozListStyle\",\n  \"WebkitListStyle\",\n  \"MSListStyle\",\n  \"OListStyle\",\n  \"listStyleImage\",\n  \"MozListStyleImage\",\n  \"WebkitListStyleImage\",\n  \"MSListStyleImage\",\n  \"OListStyleImage\",\n  \"listStylePosition\",\n  \"MozListStylePosition\",\n  \"WebkitListStylePosition\",\n  \"MSListStylePosition\",\n  \"OListStylePosition\",\n  \"listStyleType\",\n  \"MozListStyleType\",\n  \"WebkitListStyleType\",\n  \"MSListStyleType\",\n  \"OListStyleType\",\n  \"margin\",\n  \"MozMargin\",\n  \"WebkitMargin\",\n  \"MSMargin\",\n  \"OMargin\",\n  \"marginBlockEnd\",\n  \"MozMarginBlockEnd\",\n  \"WebkitMarginBlockEnd\",\n  \"MSMarginBlockEnd\",\n  \"OMarginBlockEnd\",\n  \"marginBlockStart\",\n  \"MozMarginBlockStart\",\n  \"WebkitMarginBlockStart\",\n  \"MSMarginBlockStart\",\n  \"OMarginBlockStart\",\n  \"marginBottom\",\n  \"MozMarginBottom\",\n  \"WebkitMarginBottom\",\n  \"MSMarginBottom\",\n  \"OMarginBottom\",\n  \"marginInlineEnd\",\n  \"MozMarginInlineEnd\",\n  \"WebkitMarginInlineEnd\",\n  \"MSMarginInlineEnd\",\n  \"OMarginInlineEnd\",\n  \"marginInlineStart\",\n  \"MozMarginInlineStart\",\n  \"WebkitMarginInlineStart\",\n  \"MSMarginInlineStart\",\n  \"OMarginInlineStart\",\n  \"marginLeft\",\n  \"MozMarginLeft\",\n  \"WebkitMarginLeft\",\n  \"MSMarginLeft\",\n  \"OMarginLeft\",\n  \"marginRight\",\n  \"MozMarginRight\",\n  \"WebkitMarginRight\",\n  \"MSMarginRight\",\n  \"OMarginRight\",\n  \"marginTop\",\n  \"MozMarginTop\",\n  \"WebkitMarginTop\",\n  \"MSMarginTop\",\n  \"OMarginTop\",\n  \"mask\",\n  \"MozMask\",\n  \"WebkitMask\",\n  \"MSMask\",\n  \"OMask\",\n  \"maskClip\",\n  \"MozMaskClip\",\n  \"WebkitMaskClip\",\n  \"MSMaskClip\",\n  \"OMaskClip\",\n  \"maskComposite\",\n  \"MozMaskComposite\",\n  \"WebkitMaskComposite\",\n  \"MSMaskComposite\",\n  \"OMaskComposite\",\n  \"maskImage\",\n  \"MozMaskImage\",\n  \"WebkitMaskImage\",\n  \"MSMaskImage\",\n  \"OMaskImage\",\n  \"maskMode\",\n  \"MozMaskMode\",\n  \"WebkitMaskMode\",\n  \"MSMaskMode\",\n  \"OMaskMode\",\n  \"maskOrigin\",\n  \"MozMaskOrigin\",\n  \"WebkitMaskOrigin\",\n  \"MSMaskOrigin\",\n  \"OMaskOrigin\",\n  \"maskPosition\",\n  \"MozMaskPosition\",\n  \"WebkitMaskPosition\",\n  \"MSMaskPosition\",\n  \"OMaskPosition\",\n  \"maskRepeat\",\n  \"MozMaskRepeat\",\n  \"WebkitMaskRepeat\",\n  \"MSMaskRepeat\",\n  \"OMaskRepeat\",\n  \"maskSize\",\n  \"MozMaskSize\",\n  \"WebkitMaskSize\",\n  \"MSMaskSize\",\n  \"OMaskSize\",\n  \"maskType\",\n  \"MozMaskType\",\n  \"WebkitMaskType\",\n  \"MSMaskType\",\n  \"OMaskType\",\n  \"maxBlockSize\",\n  \"MozMaxBlockSize\",\n  \"WebkitMaxBlockSize\",\n  \"MSMaxBlockSize\",\n  \"OMaxBlockSize\",\n  \"maxHeight\",\n  \"MozMaxHeight\",\n  \"WebkitMaxHeight\",\n  \"MSMaxHeight\",\n  \"OMaxHeight\",\n  \"maxInlineSize\",\n  \"MozMaxInlineSize\",\n  \"WebkitMaxInlineSize\",\n  \"MSMaxInlineSize\",\n  \"OMaxInlineSize\",\n  \"maxWidth\",\n  \"MozMaxWidth\",\n  \"WebkitMaxWidth\",\n  \"MSMaxWidth\",\n  \"OMaxWidth\",\n  \"minBlockSize\",\n  \"MozMinBlockSize\",\n  \"WebkitMinBlockSize\",\n  \"MSMinBlockSize\",\n  \"OMinBlockSize\",\n  \"minHeight\",\n  \"MozMinHeight\",\n  \"WebkitMinHeight\",\n  \"MSMinHeight\",\n  \"OMinHeight\",\n  \"minInlineSize\",\n  \"MozMinInlineSize\",\n  \"WebkitMinInlineSize\",\n  \"MSMinInlineSize\",\n  \"OMinInlineSize\",\n  \"minWidth\",\n  \"MozMinWidth\",\n  \"WebkitMinWidth\",\n  \"MSMinWidth\",\n  \"OMinWidth\",\n  \"mixBlendMode\",\n  \"MozMixBlendMode\",\n  \"WebkitMixBlendMode\",\n  \"MSMixBlendMode\",\n  \"OMixBlendMode\",\n  \"mm\",\n  \"MozMm\",\n  \"WebkitMm\",\n  \"MSMm\",\n  \"OMm\",\n  \"ms\",\n  \"MozMs\",\n  \"WebkitMs\",\n  \"MSMs\",\n  \"OMs\",\n  \"objectFit\",\n  \"MozObjectFit\",\n  \"WebkitObjectFit\",\n  \"MSObjectFit\",\n  \"OObjectFit\",\n  \"objectPosition\",\n  \"MozObjectPosition\",\n  \"WebkitObjectPosition\",\n  \"MSObjectPosition\",\n  \"OObjectPosition\",\n  \"offsetBlockEnd\",\n  \"MozOffsetBlockEnd\",\n  \"WebkitOffsetBlockEnd\",\n  \"MSOffsetBlockEnd\",\n  \"OOffsetBlockEnd\",\n  \"offsetBlockStart\",\n  \"MozOffsetBlockStart\",\n  \"WebkitOffsetBlockStart\",\n  \"MSOffsetBlockStart\",\n  \"OOffsetBlockStart\",\n  \"offsetInlineEnd\",\n  \"MozOffsetInlineEnd\",\n  \"WebkitOffsetInlineEnd\",\n  \"MSOffsetInlineEnd\",\n  \"OOffsetInlineEnd\",\n  \"offsetInlineStart\",\n  \"MozOffsetInlineStart\",\n  \"WebkitOffsetInlineStart\",\n  \"MSOffsetInlineStart\",\n  \"OOffsetInlineStart\",\n  \"opacity\",\n  \"MozOpacity\",\n  \"WebkitOpacity\",\n  \"MSOpacity\",\n  \"OOpacity\",\n  \"order\",\n  \"MozOrder\",\n  \"WebkitOrder\",\n  \"MSOrder\",\n  \"OOrder\",\n  \"orphans\",\n  \"MozOrphans\",\n  \"WebkitOrphans\",\n  \"MSOrphans\",\n  \"OOrphans\",\n  \"outline\",\n  \"MozOutline\",\n  \"WebkitOutline\",\n  \"MSOutline\",\n  \"OOutline\",\n  \"outlineColor\",\n  \"MozOutlineColor\",\n  \"WebkitOutlineColor\",\n  \"MSOutlineColor\",\n  \"OOutlineColor\",\n  \"outlineOffset\",\n  \"MozOutlineOffset\",\n  \"WebkitOutlineOffset\",\n  \"MSOutlineOffset\",\n  \"OOutlineOffset\",\n  \"outlineStyle\",\n  \"MozOutlineStyle\",\n  \"WebkitOutlineStyle\",\n  \"MSOutlineStyle\",\n  \"OOutlineStyle\",\n  \"outlineWidth\",\n  \"MozOutlineWidth\",\n  \"WebkitOutlineWidth\",\n  \"MSOutlineWidth\",\n  \"OOutlineWidth\",\n  \"overflow\",\n  \"MozOverflow\",\n  \"WebkitOverflow\",\n  \"MSOverflow\",\n  \"OOverflow\",\n  \"overflowWrap\",\n  \"MozOverflowWrap\",\n  \"WebkitOverflowWrap\",\n  \"MSOverflowWrap\",\n  \"OOverflowWrap\",\n  \"overflowX\",\n  \"MozOverflowX\",\n  \"WebkitOverflowX\",\n  \"MSOverflowX\",\n  \"OOverflowX\",\n  \"overflowY\",\n  \"MozOverflowY\",\n  \"WebkitOverflowY\",\n  \"MSOverflowY\",\n  \"OOverflowY\",\n  \"padding\",\n  \"MozPadding\",\n  \"WebkitPadding\",\n  \"MSPadding\",\n  \"OPadding\",\n  \"paddingBlockEnd\",\n  \"MozPaddingBlockEnd\",\n  \"WebkitPaddingBlockEnd\",\n  \"MSPaddingBlockEnd\",\n  \"OPaddingBlockEnd\",\n  \"paddingBlockStart\",\n  \"MozPaddingBlockStart\",\n  \"WebkitPaddingBlockStart\",\n  \"MSPaddingBlockStart\",\n  \"OPaddingBlockStart\",\n  \"paddingBottom\",\n  \"MozPaddingBottom\",\n  \"WebkitPaddingBottom\",\n  \"MSPaddingBottom\",\n  \"OPaddingBottom\",\n  \"paddingInlineEnd\",\n  \"MozPaddingInlineEnd\",\n  \"WebkitPaddingInlineEnd\",\n  \"MSPaddingInlineEnd\",\n  \"OPaddingInlineEnd\",\n  \"paddingInlineStart\",\n  \"MozPaddingInlineStart\",\n  \"WebkitPaddingInlineStart\",\n  \"MSPaddingInlineStart\",\n  \"OPaddingInlineStart\",\n  \"paddingLeft\",\n  \"MozPaddingLeft\",\n  \"WebkitPaddingLeft\",\n  \"MSPaddingLeft\",\n  \"OPaddingLeft\",\n  \"paddingRight\",\n  \"MozPaddingRight\",\n  \"WebkitPaddingRight\",\n  \"MSPaddingRight\",\n  \"OPaddingRight\",\n  \"paddingTop\",\n  \"MozPaddingTop\",\n  \"WebkitPaddingTop\",\n  \"MSPaddingTop\",\n  \"OPaddingTop\",\n  \"pageBreakAfter\",\n  \"MozPageBreakAfter\",\n  \"WebkitPageBreakAfter\",\n  \"MSPageBreakAfter\",\n  \"OPageBreakAfter\",\n  \"pageBreakBefore\",\n  \"MozPageBreakBefore\",\n  \"WebkitPageBreakBefore\",\n  \"MSPageBreakBefore\",\n  \"OPageBreakBefore\",\n  \"pageBreakInside\",\n  \"MozPageBreakInside\",\n  \"WebkitPageBreakInside\",\n  \"MSPageBreakInside\",\n  \"OPageBreakInside\",\n  \"pc\",\n  \"MozPc\",\n  \"WebkitPc\",\n  \"MSPc\",\n  \"OPc\",\n  \"perspective\",\n  \"MozPerspective\",\n  \"WebkitPerspective\",\n  \"MSPerspective\",\n  \"OPerspective\",\n  \"perspectiveOrigin\",\n  \"MozPerspectiveOrigin\",\n  \"WebkitPerspectiveOrigin\",\n  \"MSPerspectiveOrigin\",\n  \"OPerspectiveOrigin\",\n  \"pointerEvents\",\n  \"MozPointerEvents\",\n  \"WebkitPointerEvents\",\n  \"MSPointerEvents\",\n  \"OPointerEvents\",\n  \"position\",\n  \"MozPosition\",\n  \"WebkitPosition\",\n  \"MSPosition\",\n  \"OPosition\",\n  \"pt\",\n  \"MozPt\",\n  \"WebkitPt\",\n  \"MSPt\",\n  \"OPt\",\n  \"px\",\n  \"MozPx\",\n  \"WebkitPx\",\n  \"MSPx\",\n  \"OPx\",\n  \"q\",\n  \"MozQ\",\n  \"WebkitQ\",\n  \"MSQ\",\n  \"OQ\",\n  \"quotes\",\n  \"MozQuotes\",\n  \"WebkitQuotes\",\n  \"MSQuotes\",\n  \"OQuotes\",\n  \"rad\",\n  \"MozRad\",\n  \"WebkitRad\",\n  \"MSRad\",\n  \"ORad\",\n  \"rem\",\n  \"MozRem\",\n  \"WebkitRem\",\n  \"MSRem\",\n  \"ORem\",\n  \"resize\",\n  \"MozResize\",\n  \"WebkitResize\",\n  \"MSResize\",\n  \"OResize\",\n  \"revert\",\n  \"MozRevert\",\n  \"WebkitRevert\",\n  \"MSRevert\",\n  \"ORevert\",\n  \"right\",\n  \"MozRight\",\n  \"WebkitRight\",\n  \"MSRight\",\n  \"ORight\",\n  \"rubyAlign\",\n  \"MozRubyAlign\",\n  \"WebkitRubyAlign\",\n  \"MSRubyAlign\",\n  \"ORubyAlign\",\n  \"rubyMerge\",\n  \"MozRubyMerge\",\n  \"WebkitRubyMerge\",\n  \"MSRubyMerge\",\n  \"ORubyMerge\",\n  \"rubyPosition\",\n  \"MozRubyPosition\",\n  \"WebkitRubyPosition\",\n  \"MSRubyPosition\",\n  \"ORubyPosition\",\n  \"s\",\n  \"MozS\",\n  \"WebkitS\",\n  \"MSS\",\n  \"OS\",\n  \"scrollBehavior\",\n  \"MozScrollBehavior\",\n  \"WebkitScrollBehavior\",\n  \"MSScrollBehavior\",\n  \"OScrollBehavior\",\n  \"scrollSnapCoordinate\",\n  \"MozScrollSnapCoordinate\",\n  \"WebkitScrollSnapCoordinate\",\n  \"MSScrollSnapCoordinate\",\n  \"OScrollSnapCoordinate\",\n  \"scrollSnapDestination\",\n  \"MozScrollSnapDestination\",\n  \"WebkitScrollSnapDestination\",\n  \"MSScrollSnapDestination\",\n  \"OScrollSnapDestination\",\n  \"scrollSnapType\",\n  \"MozScrollSnapType\",\n  \"WebkitScrollSnapType\",\n  \"MSScrollSnapType\",\n  \"OScrollSnapType\",\n  \"shapeImageThreshold\",\n  \"MozShapeImageThreshold\",\n  \"WebkitShapeImageThreshold\",\n  \"MSShapeImageThreshold\",\n  \"OShapeImageThreshold\",\n  \"shapeMargin\",\n  \"MozShapeMargin\",\n  \"WebkitShapeMargin\",\n  \"MSShapeMargin\",\n  \"OShapeMargin\",\n  \"shapeOutside\",\n  \"MozShapeOutside\",\n  \"WebkitShapeOutside\",\n  \"MSShapeOutside\",\n  \"OShapeOutside\",\n  \"tabSize\",\n  \"MozTabSize\",\n  \"WebkitTabSize\",\n  \"MSTabSize\",\n  \"OTabSize\",\n  \"tableLayout\",\n  \"MozTableLayout\",\n  \"WebkitTableLayout\",\n  \"MSTableLayout\",\n  \"OTableLayout\",\n  \"textAlign\",\n  \"MozTextAlign\",\n  \"WebkitTextAlign\",\n  \"MSTextAlign\",\n  \"OTextAlign\",\n  \"textAlignLast\",\n  \"MozTextAlignLast\",\n  \"WebkitTextAlignLast\",\n  \"MSTextAlignLast\",\n  \"OTextAlignLast\",\n  \"textCombineUpright\",\n  \"MozTextCombineUpright\",\n  \"WebkitTextCombineUpright\",\n  \"MSTextCombineUpright\",\n  \"OTextCombineUpright\",\n  \"textDecoration\",\n  \"MozTextDecoration\",\n  \"WebkitTextDecoration\",\n  \"MSTextDecoration\",\n  \"OTextDecoration\",\n  \"textDecorationColor\",\n  \"MozTextDecorationColor\",\n  \"WebkitTextDecorationColor\",\n  \"MSTextDecorationColor\",\n  \"OTextDecorationColor\",\n  \"textDecorationLine\",\n  \"MozTextDecorationLine\",\n  \"WebkitTextDecorationLine\",\n  \"MSTextDecorationLine\",\n  \"OTextDecorationLine\",\n  \"textDecorationStyle\",\n  \"MozTextDecorationStyle\",\n  \"WebkitTextDecorationStyle\",\n  \"MSTextDecorationStyle\",\n  \"OTextDecorationStyle\",\n  \"textEmphasis\",\n  \"MozTextEmphasis\",\n  \"WebkitTextEmphasis\",\n  \"MSTextEmphasis\",\n  \"OTextEmphasis\",\n  \"textEmphasisColor\",\n  \"MozTextEmphasisColor\",\n  \"WebkitTextEmphasisColor\",\n  \"MSTextEmphasisColor\",\n  \"OTextEmphasisColor\",\n  \"textEmphasisPosition\",\n  \"MozTextEmphasisPosition\",\n  \"WebkitTextEmphasisPosition\",\n  \"MSTextEmphasisPosition\",\n  \"OTextEmphasisPosition\",\n  \"textEmphasisStyle\",\n  \"MozTextEmphasisStyle\",\n  \"WebkitTextEmphasisStyle\",\n  \"MSTextEmphasisStyle\",\n  \"OTextEmphasisStyle\",\n  \"textIndent\",\n  \"MozTextIndent\",\n  \"WebkitTextIndent\",\n  \"MSTextIndent\",\n  \"OTextIndent\",\n  \"textOrientation\",\n  \"MozTextOrientation\",\n  \"WebkitTextOrientation\",\n  \"MSTextOrientation\",\n  \"OTextOrientation\",\n  \"textOverflow\",\n  \"MozTextOverflow\",\n  \"WebkitTextOverflow\",\n  \"MSTextOverflow\",\n  \"OTextOverflow\",\n  \"textRendering\",\n  \"MozTextRendering\",\n  \"WebkitTextRendering\",\n  \"MSTextRendering\",\n  \"OTextRendering\",\n  \"textShadow\",\n  \"MozTextShadow\",\n  \"WebkitTextShadow\",\n  \"MSTextShadow\",\n  \"OTextShadow\",\n  \"textTransform\",\n  \"MozTextTransform\",\n  \"WebkitTextTransform\",\n  \"MSTextTransform\",\n  \"OTextTransform\",\n  \"textUnderlinePosition\",\n  \"MozTextUnderlinePosition\",\n  \"WebkitTextUnderlinePosition\",\n  \"MSTextUnderlinePosition\",\n  \"OTextUnderlinePosition\",\n  \"top\",\n  \"MozTop\",\n  \"WebkitTop\",\n  \"MSTop\",\n  \"OTop\",\n  \"touchAction\",\n  \"MozTouchAction\",\n  \"WebkitTouchAction\",\n  \"MSTouchAction\",\n  \"OTouchAction\",\n  \"transform\",\n  \"MozTransform\",\n  \"WebkitTransform\",\n  \"msTransform\",\n  \"OTransform\",\n  \"transformBox\",\n  \"MozTransformBox\",\n  \"WebkitTransformBox\",\n  \"MSTransformBox\",\n  \"OTransformBox\",\n  \"transformOrigin\",\n  \"MozTransformOrigin\",\n  \"WebkitTransformOrigin\",\n  \"MSTransformOrigin\",\n  \"OTransformOrigin\",\n  \"transformStyle\",\n  \"MozTransformStyle\",\n  \"WebkitTransformStyle\",\n  \"MSTransformStyle\",\n  \"OTransformStyle\",\n  \"transition\",\n  \"MozTransition\",\n  \"WebkitTransition\",\n  \"MSTransition\",\n  \"OTransition\",\n  \"transitionDelay\",\n  \"MozTransitionDelay\",\n  \"WebkitTransitionDelay\",\n  \"MSTransitionDelay\",\n  \"OTransitionDelay\",\n  \"transitionDuration\",\n  \"MozTransitionDuration\",\n  \"WebkitTransitionDuration\",\n  \"MSTransitionDuration\",\n  \"OTransitionDuration\",\n  \"transitionProperty\",\n  \"MozTransitionProperty\",\n  \"WebkitTransitionProperty\",\n  \"MSTransitionProperty\",\n  \"OTransitionProperty\",\n  \"transitionTimingFunction\",\n  \"MozTransitionTimingFunction\",\n  \"WebkitTransitionTimingFunction\",\n  \"MSTransitionTimingFunction\",\n  \"OTransitionTimingFunction\",\n  \"turn\",\n  \"MozTurn\",\n  \"WebkitTurn\",\n  \"MSTurn\",\n  \"OTurn\",\n  \"unicodeBidi\",\n  \"MozUnicodeBidi\",\n  \"WebkitUnicodeBidi\",\n  \"MSUnicodeBidi\",\n  \"OUnicodeBidi\",\n  \"unset\",\n  \"MozUnset\",\n  \"WebkitUnset\",\n  \"MSUnset\",\n  \"OUnset\",\n  \"verticalAlign\",\n  \"MozVerticalAlign\",\n  \"WebkitVerticalAlign\",\n  \"MSVerticalAlign\",\n  \"OVerticalAlign\",\n  \"vh\",\n  \"MozVh\",\n  \"WebkitVh\",\n  \"MSVh\",\n  \"OVh\",\n  \"visibility\",\n  \"MozVisibility\",\n  \"WebkitVisibility\",\n  \"MSVisibility\",\n  \"OVisibility\",\n  \"vmax\",\n  \"MozVmax\",\n  \"WebkitVmax\",\n  \"MSVmax\",\n  \"OVmax\",\n  \"vmin\",\n  \"MozVmin\",\n  \"WebkitVmin\",\n  \"MSVmin\",\n  \"OVmin\",\n  \"vw\",\n  \"MozVw\",\n  \"WebkitVw\",\n  \"MSVw\",\n  \"OVw\",\n  \"whiteSpace\",\n  \"MozWhiteSpace\",\n  \"WebkitWhiteSpace\",\n  \"MSWhiteSpace\",\n  \"OWhiteSpace\",\n  \"widows\",\n  \"MozWidows\",\n  \"WebkitWidows\",\n  \"MSWidows\",\n  \"OWidows\",\n  \"width\",\n  \"MozWidth\",\n  \"WebkitWidth\",\n  \"MSWidth\",\n  \"OWidth\",\n  \"willChange\",\n  \"MozWillChange\",\n  \"WebkitWillChange\",\n  \"MSWillChange\",\n  \"OWillChange\",\n  \"wordBreak\",\n  \"MozWordBreak\",\n  \"WebkitWordBreak\",\n  \"MSWordBreak\",\n  \"OWordBreak\",\n  \"wordSpacing\",\n  \"MozWordSpacing\",\n  \"WebkitWordSpacing\",\n  \"MSWordSpacing\",\n  \"OWordSpacing\",\n  \"wordWrap\",\n  \"MozWordWrap\",\n  \"WebkitWordWrap\",\n  \"MSWordWrap\",\n  \"OWordWrap\",\n  \"writingMode\",\n  \"MozWritingMode\",\n  \"WebkitWritingMode\",\n  \"MSWritingMode\",\n  \"OWritingMode\",\n  \"zIndex\",\n  \"MozZIndex\",\n  \"WebkitZIndex\",\n  \"MSZIndex\",\n  \"OZIndex\",\n  \"fontSize\",\n  \"MozFontSize\",\n  \"WebkitFontSize\",\n  \"MSFontSize\",\n  \"OFontSize\",\n  \"flex\",\n  \"MozFlex\",\n  \"WebkitFlex\",\n  \"MSFlex\",\n  \"OFlex\",\n  \"fr\",\n  \"MozFr\",\n  \"WebkitFr\",\n  \"MSFr\",\n  \"OFr\"\n]\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _inlineStylePrefixer = require('inline-style-prefixer');\n\nvar _inlineStylePrefixer2 = _interopRequireDefault(_inlineStylePrefixer);\n\nvar _reactStyleProptype = require('react-style-proptype');\n\nvar _reactStyleProptype2 = _interopRequireDefault(_reactStyleProptype);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar USER_AGENT = 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.2 (KHTML, like Gecko) Safari/537.2';\n\nvar Pane = function (_Component) {\n    _inherits(Pane, _Component);\n\n    function Pane() {\n        var _ref;\n\n        _classCallCheck(this, Pane);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        var _this = _possibleConstructorReturn(this, (_ref = Pane.__proto__ || Object.getPrototypeOf(Pane)).call.apply(_ref, [this].concat(args)));\n\n        _this.state = { size: _this.props.size };\n        return _this;\n    }\n\n    _createClass(Pane, [{\n        key: 'render',\n        value: function render() {\n            var split = this.props.split;\n            var classes = ['Pane', split, this.props.className];\n\n            var style = _extends({}, this.props.style || {}, {\n                flex: 1,\n                position: 'relative',\n                outline: 'none'\n            });\n\n            if (this.state.size !== undefined) {\n                if (split === 'vertical') {\n                    style.width = this.state.size;\n                } else {\n                    style.height = this.state.size;\n                    style.display = 'flex';\n                }\n                style.flex = 'none';\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: classes.join(' '), style: this.props.prefixer.prefix(style) },\n                this.props.children\n            );\n        }\n    }]);\n\n    return Pane;\n}(_react.Component);\n\nPane.propTypes = {\n    split: _react.PropTypes.oneOf(['vertical', 'horizontal']),\n    className: _react.PropTypes.string.isRequired,\n    children: _react.PropTypes.node.isRequired,\n    prefixer: _react.PropTypes.instanceOf(_inlineStylePrefixer2.default).isRequired,\n    style: _reactStyleProptype2.default,\n    size: _react.PropTypes.oneOfType([_react2.default.PropTypes.string, _react2.default.PropTypes.number])\n};\n\nPane.defaultProps = {\n    prefixer: new _inlineStylePrefixer2.default({ userAgent: USER_AGENT })\n};\n\nexports.default = Pane;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _inlineStylePrefixer = require('inline-style-prefixer');\n\nvar _inlineStylePrefixer2 = _interopRequireDefault(_inlineStylePrefixer);\n\nvar _reactStyleProptype = require('react-style-proptype');\n\nvar _reactStyleProptype2 = _interopRequireDefault(_reactStyleProptype);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar USER_AGENT = 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.2 (KHTML, like Gecko) Safari/537.2';\n\nvar Resizer = function (_Component) {\n    _inherits(Resizer, _Component);\n\n    function Resizer() {\n        _classCallCheck(this, Resizer);\n\n        return _possibleConstructorReturn(this, (Resizer.__proto__ || Object.getPrototypeOf(Resizer)).apply(this, arguments));\n    }\n\n    _createClass(Resizer, [{\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                split = _props.split,\n                className = _props.className,\n                resizerClassName = _props.resizerClassName;\n\n            var classes = [resizerClassName, split, className];\n            return _react2.default.createElement('span', {\n                className: classes.join(' '),\n                style: this.props.prefixer.prefix(this.props.style) || {},\n                onMouseDown: function onMouseDown(event) {\n                    _this2.props.onMouseDown(event);\n                },\n                onTouchStart: function onTouchStart(event) {\n                    event.preventDefault();\n                    _this2.props.onTouchStart(event);\n                },\n                onTouchEnd: function onTouchEnd(event) {\n                    event.preventDefault();\n                    _this2.props.onTouchEnd(event);\n                }\n            });\n        }\n    }]);\n\n    return Resizer;\n}(_react.Component);\n\nResizer.propTypes = {\n    onMouseDown: _react.PropTypes.func.isRequired,\n    onTouchStart: _react.PropTypes.func.isRequired,\n    onTouchEnd: _react.PropTypes.func.isRequired,\n    prefixer: _react.PropTypes.instanceOf(_inlineStylePrefixer2.default).isRequired,\n    split: _react.PropTypes.oneOf(['vertical', 'horizontal']),\n    className: _react.PropTypes.string.isRequired,\n    resizerClassName: _react.PropTypes.string.isRequired,\n    style: _reactStyleProptype2.default\n};\n\nResizer.defaultProps = {\n    prefixer: new _inlineStylePrefixer2.default({ userAgent: USER_AGENT }),\n    resizerClassName: 'Resizer'\n};\n\nexports.default = Resizer;\nmodule.exports = exports['default'];","import { VoyagerConfig } from './models/config';\r\n\r\nexport const HISTORY_LIMIT = 20;\r\n\r\nexport const PLOT_HOVER_MIN_DURATION = 500;\r\n\r\n/**\r\n * Types of draggable items (for react-dnd).\r\n */\r\nexport const DraggableType = {\r\n  FIELD: 'field'\r\n};\r\n\r\n/**\r\n * Type of parent for Field Component\r\n */\r\nexport enum FieldParentType {\r\n  ENCODING_SHELF,\r\n  FIELD_LIST\r\n};\r\n\r\nconst BASE_DATA_DIR = (process.env.NODE_ENV === 'production') ? 'datasets/' : 'node_modules/vega-datasets/';\r\n\r\nexport const SPINNER_COLOR = '#4C78A8';\r\n\r\nexport const DEFAULT_DATASETS = [\r\n{\r\n  name: 'Barley',\r\n  description: 'Barley yield by variety across the upper midwest in 1931 and 1932',\r\n  url: 'data/barley.json',\r\n  id: 'barley',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Cars',\r\n  description: 'Automotive statistics for a variety of car models between 1970 & 1982',\r\n  url: 'data/cars.json',\r\n  id: 'cars',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Crimea',\r\n  url: 'data/crimea.json',\r\n  id: 'crimea',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Driving',\r\n  url: 'data/driving.json',\r\n  id: 'driving',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Iris',\r\n  url: 'data/iris.json',\r\n  id: 'iris',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Jobs',\r\n  url: 'data/jobs.json',\r\n  id: 'jobs',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Population',\r\n  url: 'data/population.json',\r\n  id: 'population',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Movies',\r\n  url: 'data/movies.json',\r\n  id: 'movies',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Birdstrikes',\r\n  url: 'data/birdstrikes.json',\r\n  id: 'birdstrikes',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Burtin',\r\n  url: 'data/burtin.json',\r\n  id: 'burtin',\r\n  group: 'sample'\r\n}, {\r\n  name: 'Campaigns',\r\n  url: 'data/weball26.json',\r\n  id: 'weball26',\r\n  group: 'sample'\r\n}].map(dataset => {\r\n  return {\r\n    ...dataset,\r\n    url: BASE_DATA_DIR + dataset.url\r\n  };\r\n});\r\n\r\nconst SERVER = process.env.SERVER;\r\n\r\nexport const VOYAGER_CONFIG: VoyagerConfig = {\r\n  showDataSourceSelector: true,\r\n  serverUrl: SERVER\r\n};\r\n","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {connect} from 'react-redux';\r\nimport {Dataset, State} from '../../models';\r\nimport {VoyagerConfig} from '../../models/config';\r\nimport {selectConfig, selectDataset} from '../../selectors/';\r\nimport {DataSelector} from '../data-selector';\r\nimport * as styles from './data-pane.scss';\r\nimport {FieldList, PresetWildcardFieldList} from './field-list';\r\n\r\nexport interface DataPanelProps {\r\n  data: Dataset;\r\n  config: VoyagerConfig;\r\n}\r\n\r\nexport class DataPaneBase extends React.PureComponent<DataPanelProps, {}> {\r\n  public render() {\r\n    const {name} = this.props.data;\r\n    const fieldCount = this.props.data.schema.fieldSchemas.length;\r\n    const {showDataSourceSelector, wildcards} = this.props.config;\r\n\r\n    const fields = fieldCount > 0 ? (\r\n      <div styleName=\"data-pane-section\">\r\n        <h3>Fields</h3>\r\n        <FieldList/>\r\n      </div>) : null;\r\n\r\n    const wildcardFields = wildcards !== 'disabled' && fieldCount > 0 && (\r\n      <div styleName=\"data-pane-section\">\r\n        <h3>Wildcard Fields</h3>\r\n        <PresetWildcardFieldList/>\r\n      </div>\r\n    );\r\n    return (\r\n      <div className=\"pane\" styleName=\"data-pane\">\r\n        <h2 styleName=\"data-pane-title\">Data</h2>\r\n        <div>\r\n          <span styleName=\"current-dataset\">\r\n            <i className=\"fa fa-database\"/>\r\n            {' '}\r\n            {name}\r\n          </span>\r\n          {/* <span className=\"right\">\r\n            {showDataSourceSelector ? <DataSelector title=\"Change\"/> : null}\r\n          </span> */}\r\n        </div>\r\n        {fields}\r\n        {wildcardFields}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const DataPane = connect(\r\n  (state: State) => {\r\n    return {\r\n      data: selectDataset(state),\r\n      config: selectConfig(state)\r\n    };\r\n  }\r\n)(CSSModules(DataPaneBase, styles));\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__394__;","// removed by extract-text-webpack-plugin\nmodule.exports = {\"data-pane\":\"data-pane__data-pane\",\"current-dataset\":\"data-pane__current-dataset\",\"data-pane-section\":\"data-pane__data-pane-section\",\"data-pane-title\":\"data-pane__data-pane-title\"};","import {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport {PrimitiveType, Schema} from 'compassql/build/src/schema';\r\nimport {isWildcard} from 'compassql/build/src/wildcard';\r\nimport * as stringify from 'json-stable-stringify';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {connect} from 'react-redux';\r\nimport {FieldOneOfPredicate, FieldRangePredicate} from 'vega-lite/build/src/predicate';\r\nimport {FilterAction} from '../../actions';\r\nimport {DatasetSchemaChangeFieldType} from '../../actions/dataset';\r\nimport {ActionHandler, createDispatchHandler} from '../../actions/redux-action';\r\nimport {SPEC_FIELD_AUTO_ADD, SpecFieldAutoAdd} from '../../actions/shelf';\r\nimport {FILTER_TOGGLE} from '../../actions/shelf/filter';\r\nimport {FieldParentType} from '../../constants';\r\nimport {VoyagerConfig} from '../../models/config';\r\nimport {State} from '../../models/index';\r\nimport {ShelfFieldDef} from '../../models/shelf';\r\nimport {createDefaultFilter, filterHasField} from '../../models/shelf/filter';\r\nimport {selectConfig, selectPresetWildcardFields, selectSchema, selectSchemaFieldDefs} from '../../selectors';\r\nimport {selectFilters} from '../../selectors/shelf';\r\nimport {Field} from '../field';\r\nimport * as styles from './field-list.scss';\r\nimport {TypeChanger} from './type-changer';\r\n\r\n\r\n\r\nexport interface FieldListProps extends ActionHandler<SpecFieldAutoAdd | DatasetSchemaChangeFieldType | FilterAction> {\r\n  config: VoyagerConfig;\r\n  fieldDefs: ShelfFieldDef[];\r\n  schema: Schema;\r\n  filters: Array<FieldRangePredicate | FieldOneOfPredicate>;\r\n}\r\n\r\nclass FieldListBase extends React.PureComponent<FieldListProps, {}> {\r\n\r\n  constructor(props: FieldListProps) {\r\n    super(props);\r\n\r\n    // Bind - https://facebook.github.io/react/docs/handling-events.html\r\n    this.onAdd = this.onAdd.bind(this);\r\n    this.onFilterToggle = this.onFilterToggle.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    const {config, fieldDefs, schema} = this.props;\r\n    const fieldItems = fieldDefs.map(fieldDef => {\r\n      let primitiveType;\r\n      if (!isWildcard(fieldDef.field)) {\r\n        primitiveType = schema.primitiveType(fieldDef.field);\r\n      }\r\n      const hideTypeChanger = this.getValidTypes(primitiveType).length < 2;\r\n      const key = isWildcard(fieldDef.field) ? stringify(fieldDef) : fieldDef.field;\r\n      return (\r\n        <div key={key} styleName='field-list-item'>\r\n          {this.renderComponent(fieldDef, hideTypeChanger, primitiveType)}\r\n        </div>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div styleName={(config.wildcards === 'disabled') ? 'field-list-no-wildcards' : 'field-list'}>\r\n        {fieldItems}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  protected onAdd(fieldDef: ShelfFieldDef) {\r\n    const {handleAction} = this.props;\r\n    handleAction({\r\n      type: SPEC_FIELD_AUTO_ADD,\r\n      payload: {fieldDef: fieldDef}\r\n    });\r\n  }\r\n\r\n  protected onFilterToggle(fieldDef: ShelfFieldDef): void {\r\n    const {handleAction} = this.props;\r\n    handleAction({\r\n      type: FILTER_TOGGLE,\r\n      payload: {\r\n        filter: this.getFilter(fieldDef)\r\n      }\r\n    });\r\n  }\r\n\r\n  private getFilter(fieldDef: ShelfFieldDef) {\r\n    const {schema} = this.props;\r\n    if (isWildcard(fieldDef.field)) {\r\n      return;\r\n    }\r\n    const domain = schema.domain({field: fieldDef.field});\r\n    return createDefaultFilter(fieldDef, domain);\r\n  }\r\n\r\n  private renderComponent(fieldDef: ShelfFieldDef, hideTypeChanger: boolean, primitiveType: PrimitiveType) {\r\n    if (hideTypeChanger) {\r\n      return this.renderField(fieldDef);\r\n    } else {\r\n      const popupComponent = this.renderTypeChanger(fieldDef, primitiveType);\r\n      return this.renderField(fieldDef, popupComponent);\r\n    }\r\n  }\r\n\r\n  private renderTypeChanger(fieldDef: ShelfFieldDef, primitiveType: PrimitiveType) {\r\n    const {handleAction} = this.props;\r\n    if (!isWildcard(fieldDef.field)) {\r\n      return (\r\n        <TypeChanger\r\n          field={fieldDef.field}\r\n          type={fieldDef.type}\r\n          validTypes={this.getValidTypes(primitiveType)}\r\n          handleAction={handleAction}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  private renderField(fieldDef: ShelfFieldDef, popupComponent?: JSX.Element) {\r\n    const {schema, filters} = this.props;\r\n    const filter = {\r\n      active: !isWildcard(fieldDef.field) && filterHasField(filters, fieldDef.field),\r\n      onToggle: this.onFilterToggle\r\n    };\r\n\r\n    return (\r\n      <Field\r\n        fieldDef={fieldDef}\r\n        isPill={true}\r\n        draggable={true}\r\n        filter={filter}\r\n        parentId={{type: FieldParentType.FIELD_LIST as FieldParentType.FIELD_LIST}}\r\n        caretShow={true}\r\n        popupComponent={popupComponent}\r\n        onDoubleClick={this.onAdd}\r\n        onAdd={this.onAdd}\r\n        schema={schema}\r\n      />\r\n    );\r\n  }\r\n\r\n  private getValidTypes(primitiveType: PrimitiveType): ExpandedType[] {\r\n    switch (primitiveType) {\r\n      case PrimitiveType.NUMBER:\r\n        return [ExpandedType.QUANTITATIVE, ExpandedType.NOMINAL];\r\n      case PrimitiveType.INTEGER:\r\n        return [ExpandedType.QUANTITATIVE, ExpandedType.NOMINAL];\r\n      case PrimitiveType.DATETIME:\r\n        return [ExpandedType.TEMPORAL];\r\n      case PrimitiveType.STRING:\r\n        return [ExpandedType.NOMINAL];\r\n      case PrimitiveType.BOOLEAN:\r\n        return [ExpandedType.NOMINAL];\r\n      default:\r\n        return [];\r\n    }\r\n  }\r\n}\r\n\r\nconst FieldListRenderer = CSSModules(FieldListBase, styles);\r\n\r\nexport const FieldList = connect(\r\n  (state: State) => {\r\n    return {\r\n      fieldDefs: selectSchemaFieldDefs(state).concat([\r\n        {fn: 'count', field: '*', type: 'quantitative'}\r\n      ]),\r\n      schema: selectSchema(state),\r\n      filters: selectFilters(state),\r\n      config: selectConfig(state)\r\n    };\r\n  },\r\n  createDispatchHandler<SpecFieldAutoAdd>()\r\n)(FieldListRenderer);\r\n\r\nexport const PresetWildcardFieldList = connect(\r\n  (state: State) => {\r\n    return {\r\n      fieldDefs: selectPresetWildcardFields(state),\r\n      schema: selectSchema(state),\r\n      config: selectConfig(state)\r\n    };\r\n  },\r\n  createDispatchHandler<SpecFieldAutoAdd>()\r\n)(FieldListRenderer);\r\n","import {Schema} from 'compassql/build/src/schema';\r\nimport {isWildcard} from 'compassql/build/src/wildcard';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {DragElementWrapper, DragSource, DragSourceCollector, DragSourceSpec} from 'react-dnd';\r\nimport * as TetherComponent from 'react-tether';\r\nimport {FieldOneOfPredicate, FieldRangePredicate} from 'vega-lite/build/src/predicate';\r\nimport {DraggableType, FieldParentType} from '../../constants';\r\nimport {ShelfId} from '../../models/shelf';\r\nimport {ShelfFieldDef} from '../../models/shelf';\r\nimport {createDefaultFilter} from '../../models/shelf/filter';\r\nimport * as styles from './field.scss';\r\n\r\n/**\r\n * Props for react-dnd of Field\r\n */\r\nexport interface FieldDragSourceProps {\r\n  // Call this function inside render()\r\n  // to let React DnD handle the drag events:\r\n  connectDragSource?: DragElementWrapper<any>;\r\n\r\n  // You can ask the monitor about the current drag state:\r\n  isDragging?: boolean;\r\n}\r\n\r\nexport interface FieldPropsBase {\r\n  fieldDef: ShelfFieldDef;\r\n\r\n  isPill: boolean;\r\n\r\n  isEnumeratedWildcardField?: boolean;\r\n\r\n  parentId?: FieldParentId;\r\n\r\n  draggable: boolean;\r\n\r\n  /**\r\n   * Add field event handler.  If not provided, add button will disappear.\r\n   */\r\n  onAdd?: (fieldDef: ShelfFieldDef) => void;\r\n\r\n  onDoubleClick?: (fieldDef: ShelfFieldDef) => void;\r\n\r\n  /** Remove field event handler.  If not provided, remove button will disappear. */\r\n  onRemove?: () => void;\r\n\r\n  /**\r\n   * If filter button is shown, we need to the status whether it is active and an event handler for onToggle\r\n   */\r\n  filter?: {\r\n    active: boolean,\r\n    onToggle: (fieldDef: ShelfFieldDef) => void\r\n  };\r\n\r\n  caretShow: boolean;\r\n\r\n  schema?: Schema;\r\n\r\n  /** If not provided, it does not have a popup */\r\n  popupComponent?: JSX.Element;\r\n};\r\n\r\nexport interface FieldProps extends FieldDragSourceProps, FieldPropsBase {};\r\n\r\nexport interface FieldState {\r\n  popupIsOpened: boolean;\r\n}\r\n\r\nclass FieldBase extends React.PureComponent<FieldProps, FieldState> {\r\n  private field: HTMLElement;\r\n  private popup: HTMLElement;\r\n\r\n  constructor(props: FieldProps) {\r\n    super(props);\r\n    this.state = ({\r\n      popupIsOpened: false\r\n    });\r\n\r\n    // Bind - https://facebook.github.io/react/docs/handling-events.html\r\n    this.onFilterToggle = this.onFilterToggle.bind(this);\r\n    this.onAdd = this.onAdd.bind(this);\r\n    this.onDoubleClick = this.onDoubleClick.bind(this);\r\n    this.togglePopup = this.togglePopup.bind(this);\r\n  }\r\n\r\n  public componentWillUpdate(nextProps: FieldProps, nextState: FieldState) {\r\n    if (!nextState) {\r\n      return;\r\n    }\r\n    if (nextState.popupIsOpened) {\r\n      document.addEventListener('click', this.handleClickOutside.bind(this), true);\r\n    } else if (this.state.popupIsOpened) {\r\n      document.removeEventListener('click', this.handleClickOutside.bind(this), true);\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const {connectDragSource, fieldDef, isPill, popupComponent} = this.props;\r\n    const {fn, field, description} = fieldDef;\r\n    const isWildcardField = isWildcard(field) || this.props.isEnumeratedWildcardField;\r\n\r\n    /** Whether the fieldDef has a function that involves field. (Count doesn't involve a specific field.) */\r\n    const isFieldFn = fn && fn !== 'count';\r\n\r\n    let fnName;\r\n    if (isWildcard(fn)) {\r\n      fnName = (fn.enum.length > 1) ? '?' : fn.enum[0];\r\n    } else {\r\n      fnName = fn;\r\n    }\r\n\r\n    const component = (\r\n      <span\r\n        styleName={isWildcardField ? 'wildcard-field-pill' : isPill ? 'field-pill' : 'field'}\r\n        onDoubleClick={this.onDoubleClick}\r\n      >\r\n        {this.renderCaretTypeSpan()}\r\n        {this.renderFuncSpan(fnName)}\r\n        <span styleName={isFieldFn ? 'fn-text' : 'text'}>\r\n          {isWildcard(field) ? description : field !== '*' ? field : ''}\r\n        </span>\r\n        {this.renderAddFilterSpan()}\r\n        {this.renderAddSpan()}\r\n        {this.renderRemoveSpan()}\r\n      </span>\r\n    );\r\n    // Wrap with connect dragSource if it is injected\r\n    if (!popupComponent) {\r\n      return connectDragSource ? connectDragSource(component) : component;\r\n    } else {\r\n      return (\r\n        <div ref={this.fieldRefHandler} >\r\n          <TetherComponent\r\n            attachment=\"top left\"\r\n            targetAttachment=\"bottom left\"\r\n          >\r\n            {connectDragSource ? connectDragSource(component) : component}\r\n            <div ref={this.popupRefHandler}>\r\n              {this.state.popupIsOpened && popupComponent}\r\n            </div>\r\n          </TetherComponent>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  protected onFilterToggle(): void {\r\n    const {filter, fieldDef} = this.props;\r\n    filter.onToggle(fieldDef);\r\n  }\r\n\r\n  private renderCaretTypeSpan() {\r\n    const {caretShow, fieldDef, popupComponent} = this.props;\r\n    const type = fieldDef.type;\r\n    const icon = TYPE_ICONS[type];\r\n    const title = TYPE_NAMES[type];\r\n    return (\r\n      <span styleName=\"caret-type\" onClick={this.togglePopup}>\r\n        {caretShow && <i className={(popupComponent ? '' : 'hidden ') + 'fa fa-caret-down'}/>}\r\n        {caretShow && ' '}\r\n        {type && <i className={'fa ' + icon} styleName=\"type\" title={title}/>}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  private renderAddSpan() {\r\n    return this.props.onAdd && (\r\n      <span><a onClick={this.onAdd}><i className=\"fa fa-plus\"/></a></span>\r\n    );\r\n  }\r\n\r\n  private renderRemoveSpan() {\r\n    const onRemove = this.props.onRemove;\r\n    return onRemove && (\r\n      <span><a onClick={onRemove}><i className=\"fa fa-times\"/></a></span>\r\n    );\r\n  }\r\n\r\n  private renderAddFilterSpan() {\r\n    const {filter, fieldDef} = this.props;\r\n    if (filter && !isWildcard(fieldDef.field)) {\r\n      const style = filter.active ? '' : 'filter-button-unadded';\r\n      return this.props.filter && (\r\n        <span styleName={style}>\r\n          <a onClick={this.onFilterToggle}>\r\n            <i className='fa fa-filter'/>\r\n          </a>\r\n        </span>\r\n      );\r\n    }\r\n  }\r\n\r\n  private renderFuncSpan(fnName: string) {\r\n    return (\r\n      <span styleName=\"func\" title={fnName}>\r\n        {fnName}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  private onAdd() {\r\n    this.props.onAdd(this.props.fieldDef);\r\n  }\r\n\r\n  private onDoubleClick() {\r\n    if (this.props.onDoubleClick) {\r\n      this.props.onDoubleClick(this.props.fieldDef);\r\n    }\r\n  }\r\n\r\n  private handleClickOutside(e: any) {\r\n    if (!this.field || this.field.contains(e.target) || this.popup.contains(e.target)) {\r\n      return;\r\n    }\r\n    this.closePopup();\r\n  }\r\n\r\n  private closePopup() {\r\n    if (this.props.popupComponent) {\r\n      this.setState ({\r\n        popupIsOpened: false\r\n      });\r\n    }\r\n  }\r\n\r\n  private togglePopup() {\r\n    if (this.props.popupComponent) {\r\n      this.setState({\r\n        popupIsOpened: !this.state.popupIsOpened\r\n      });\r\n    }\r\n  }\r\n\r\n  private fieldRefHandler = (ref: any) => {\r\n    this.field = ref;\r\n  }\r\n  private popupRefHandler = (ref: any) => {\r\n    this.popup = ref;\r\n  }\r\n};\r\n\r\n// FIXME add icon for key\r\nconst TYPE_NAMES = {\r\n  nominal: 'text',\r\n  ordinal: 'text-ordinal',\r\n  quantitative: 'number',\r\n  temporal: 'time',\r\n  geographic: 'geo'\r\n};\r\n\r\nconst TYPE_ICONS = {\r\n  nominal: 'fa-font',\r\n  ordinal: 'fa-font',\r\n  quantitative: 'fa-hashtag',\r\n  temporal: 'fa-calendar',\r\n};\r\n\r\n/**\r\n * Type and Identifier of Field's parent component\r\n */\r\nexport type FieldParentId = {\r\n  type: typeof FieldParentType.ENCODING_SHELF,\r\n  id: ShelfId\r\n} | {\r\n  type: typeof FieldParentType.FIELD_LIST\r\n};\r\n\r\nexport interface DraggedFieldIdentifier {\r\n  fieldDef: ShelfFieldDef;\r\n  parentId: FieldParentId;\r\n  filter: FieldRangePredicate | FieldOneOfPredicate;\r\n}\r\n\r\nconst fieldSource: DragSourceSpec<FieldProps> = {\r\n  beginDrag(props): DraggedFieldIdentifier {\r\n    const {fieldDef, parentId, schema} = props;\r\n\r\n    let domain;\r\n    if (!isWildcard(fieldDef.field) && fieldDef.field !== '*') {\r\n      domain = schema.domain({field: fieldDef.field});\r\n    }\r\n    const filter = createDefaultFilter(fieldDef, domain);\r\n    return {fieldDef, parentId, filter};\r\n  },\r\n  canDrag(props, monitor) {\r\n    return props.draggable;\r\n  }\r\n};\r\n\r\n/**\r\n * Specifies which props to inject into your component.\r\n */\r\nconst collect: DragSourceCollector = (connect, monitor): FieldDragSourceProps => {\r\n  return {\r\n    // Call this function inside render()\r\n    // to let React DnD handle the drag events:\r\n    connectDragSource: connect.dragSource(),\r\n\r\n    // You can ask the monitor about the current drag state:\r\n    isDragging: monitor.isDragging()\r\n  };\r\n};\r\n\r\n\r\n// HACK: do type casting to suppress compile error for: https://github.com/Microsoft/TypeScript/issues/13526\r\nexport const Field: () => React.PureComponent<FieldPropsBase, {}> =\r\n  DragSource(DraggableType.FIELD, fieldSource, collect)(\r\n    CSSModules(FieldBase, styles)\r\n  ) as any;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__399__;","// removed by extract-text-webpack-plugin\nmodule.exports = {\"field\":\"field__field\",\"field-pill\":\"field__field-pill\",\"wildcard-field-pill\":\"field__wildcard-field-pill\",\"func\":\"field__func\",\"caret-type\":\"field__caret-type\",\"type\":\"field__type\",\"text\":\"field__text\",\"fn-text\":\"field__fn-text\",\"filter-button-unadded\":\"field__filter-button-unadded\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"field-list\":\"field-list__field-list\",\"field-list-item\":\"field-list__field-list-item\",\"field-list-no-wildcards\":\"field-list__field-list-no-wildcards\"};","import {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {DATASET_SCHEMA_CHANGE_FIELD_TYPE, DatasetSchemaChangeFieldType} from '../../actions/dataset';\r\nimport {ActionHandler} from '../../actions/redux-action';\r\nimport * as styles from './type-changer.scss';\r\n\r\nexport interface TypeChangerProps extends ActionHandler<DatasetSchemaChangeFieldType> {\r\n  field: string;\r\n  type: ExpandedType;\r\n  validTypes: ExpandedType[];\r\n}\r\n\r\nexport class TypeChangerBase extends React.PureComponent<TypeChangerProps, {}> {\r\n  public render() {\r\n    const {validTypes} = this.props;\r\n    return (\r\n      <div styleName='type-changer'>\r\n        <h4>Type</h4>\r\n        {validTypes.map(validType => {\r\n          return (\r\n            <label key={validType}>\r\n              <input type='radio' value={validType} name='type'\r\n                onChange={this.onTypeChange.bind(this)}\r\n                checked={this.props.type === validType}\r\n              />\r\n              <span styleName='type'> {validType} </span>\r\n            </label>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  protected onTypeChange(e: any) {\r\n    const type = e.target.value;\r\n    const {handleAction, field} = this.props;\r\n    handleAction({\r\n      type: DATASET_SCHEMA_CHANGE_FIELD_TYPE,\r\n      payload: {\r\n        field: field,\r\n        type: type\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport const TypeChanger = CSSModules(TypeChangerBase, styles);\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"type-changer\":\"type-changer__type-changer\",\"type\":\"type-changer__type\",\"type-changer-pop-up\":\"type-changer__type-changer-pop-up\"};","import {Schema} from 'compassql/build/src/schema';\r\nimport {SHORT_WILDCARD} from 'compassql/build/src/wildcard';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {connect} from 'react-redux';\r\nimport {Channel} from 'vega-lite/build/src/channel';\r\nimport {FieldOneOfPredicate, FieldRangePredicate} from 'vega-lite/build/src/predicate';\r\nimport {FilterAction} from '../../actions';\r\nimport {ActionHandler} from '../../actions/index';\r\nimport {createDispatchHandler} from '../../actions/redux-action';\r\nimport {ResultAsyncAction} from '../../actions/result';\r\nimport {ShelfAction, SPEC_CLEAR} from '../../actions/shelf';\r\nimport {ShelfUnitSpec, State} from '../../models';\r\nimport {VoyagerConfig} from '../../models/config';\r\nimport {ShelfFieldDef} from '../../models/shelf';\r\nimport {selectConfig, selectDataset, selectShelfPreview} from '../../selectors';\r\nimport {selectSchemaFieldDefs} from '../../selectors/index';\r\nimport {selectFilters, selectShelfSpec} from '../../selectors/shelf';\r\nimport {FilterPane} from '../filter-pane';\r\nimport * as styles from './encoding-pane.scss';\r\nimport {EncodingShelf} from './encoding-shelf';\r\nimport {MarkPicker} from './mark-picker';\r\n\r\n\r\ninterface EncodingPanelProps extends ActionHandler<ShelfAction | ResultAsyncAction | FilterAction> {\r\n  spec: ShelfUnitSpec;\r\n\r\n  specPreview: ShelfUnitSpec;\r\n\r\n  filters: Array<FieldRangePredicate | FieldOneOfPredicate>;\r\n\r\n  schema: Schema;\r\n\r\n  fieldDefs: ShelfFieldDef[];\r\n\r\n  config: VoyagerConfig;\r\n}\r\n\r\nclass EncodingPanelBase extends React.PureComponent<EncodingPanelProps, {}> {\r\n  constructor(props: EncodingPanelProps) {\r\n    super(props);\r\n\r\n    // Bind - https://facebook.github.io/react/docs/handling-events.html\r\n    this.onClear = this.onClear.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    const {specPreview, spec} = this.props;\r\n    const {wildcards} = this.props.config;\r\n    const {anyEncodings} = specPreview || spec;\r\n\r\n    const positionShelves = ['x', 'y'].map(this.encodingShelf, this);\r\n    const facetShelves = ['row', 'column'].map(this.encodingShelf, this);\r\n    const nonPositionShelves = ['size', 'color', 'shape', 'detail', 'text'].map(this.encodingShelf, this);\r\n    const wildcardShelvesGroup = wildcards !== 'disabled' && (\r\n      <div styleName=\"shelf-group\">\r\n        <h3>Wildcard Shelves</h3>\r\n        {[...anyEncodings.map((_, i) => i),\r\n          -1 // map the empty placeholder to -1\r\n        ].map(this.wildcardShelf, this)}\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className=\"pane\" styleName=\"encoding-pane\">\r\n        <a className=\"right\" onClick={this.onClear}>\r\n          <i className=\"fa fa-eraser\"/>\r\n          {' '}\r\n          Clear\r\n        </a>\r\n\r\n        <h2>\r\n          Encoding\r\n          {specPreview && ' Preview'}\r\n        </h2>\r\n\r\n        <div styleName=\"shelf-group\">\r\n          {positionShelves}\r\n        </div>\r\n\r\n        <div styleName=\"shelf-group\">\r\n          <div className=\"right\">\r\n            {this.markPicker()}\r\n          </div>\r\n          <h3>Mark</h3>\r\n          {nonPositionShelves}\r\n        </div>\r\n\r\n        <div styleName=\"shelf-group\">\r\n          <h3>Facet</h3>\r\n          {facetShelves}\r\n        </div>\r\n\r\n        {/* TODO: correctly highlight field in the wildcard */}\r\n        {wildcardShelvesGroup}\r\n\r\n        <div styleName=\"shelf-group\">\r\n          <h3>Filter</h3>\r\n          {this.filterPane()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return encoding shelf for normal (non-wildcard channels).\r\n   */\r\n  private encodingShelf(channel: Channel) {\r\n    // This one can't be wildcard, thus we use VL's Channel, not our ShelfChannel\r\n\r\n    const {handleAction, spec, specPreview, schema} = this.props;\r\n    const {encoding} = specPreview || spec;\r\n    return (\r\n      <EncodingShelf\r\n        key={channel}\r\n        id={{channel}}\r\n        fieldDef={encoding[channel]}\r\n        schema={schema}\r\n        handleAction={handleAction}\r\n        valueDef={encoding[channel]}\r\n      />\r\n    );\r\n  }\r\n\r\n  private markPicker() {\r\n    const {handleAction, spec, specPreview} = this.props;\r\n    const {mark} = specPreview || spec;\r\n    return <MarkPicker\r\n      mark={mark}\r\n      handleAction={handleAction}\r\n    />;\r\n  }\r\n\r\n  private wildcardShelf(index: number) {\r\n    const {handleAction, spec, specPreview, schema} = this.props;\r\n    const {anyEncodings} = specPreview || spec;\r\n\r\n    const id = {\r\n      channel: SHORT_WILDCARD,\r\n      index\r\n    };\r\n\r\n    return (\r\n      <EncodingShelf\r\n        key={index}\r\n        id={id}\r\n        schema={schema}\r\n        fieldDef={anyEncodings[index]}\r\n        handleAction={handleAction}\r\n        valueDef={undefined} // don't support constant value for wildcard shelf\r\n      />\r\n    );\r\n  }\r\n\r\n  private filterPane() {\r\n    const {filters, schema, handleAction} = this.props;\r\n    return (\r\n      <FilterPane\r\n        filters={filters}\r\n        schema={schema}\r\n        handleAction={handleAction}\r\n      />\r\n    );\r\n  }\r\n\r\n  private onClear() {\r\n    this.props.handleAction({type: SPEC_CLEAR});\r\n  }\r\n}\r\n\r\nexport const EncodingPane = connect(\r\n  (state: State) => {\r\n    const presentUndoableState = state.undoable.present;\r\n    return {\r\n      spec: selectShelfSpec(state),\r\n      filters: selectFilters(state),\r\n      schema: selectDataset(state).schema,\r\n      fieldDefs: selectSchemaFieldDefs(state),\r\n      specPreview: selectShelfPreview(state).spec,\r\n      config: selectConfig(state)\r\n    };\r\n  },\r\n  createDispatchHandler<ShelfAction>()\r\n)(CSSModules(EncodingPanelBase, styles));\r\n","\r\nimport {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport {Schema} from 'compassql/build/src/schema';\r\nimport {isWildcard} from 'compassql/build/src/wildcard';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {ConnectDropTarget, DropTarget, DropTargetCollector, DropTargetSpec} from 'react-dnd';\r\nimport {\r\n  FieldOneOfPredicate,\r\n  FieldRangePredicate,\r\n  isFieldOneOfPredicate,\r\n  isFieldRangePredicate\r\n} from 'vega-lite/build/src/predicate';\r\nimport {TimeUnit} from 'vega-lite/build/src/timeunit';\r\nimport {FILTER_ADD, FILTER_MODIFY_TIME_UNIT,\r\n  FILTER_REMOVE, FilterAction} from '../../actions';\r\nimport {ActionHandler} from '../../actions/redux-action';\r\nimport {DraggableType} from '../../constants';\r\nimport {filterHasField, getDefaultList, getDefaultTimeRange} from '../../models/shelf/filter';\r\nimport {FunctionPicker} from '../encoding-pane/function-picker';\r\nimport {DraggedFieldIdentifier} from '../field';\r\nimport {Field} from '../field/index';\r\nimport * as styles from './filter-pane.scss';\r\nimport {OneOfFilterShelf} from './one-of-filter-shelf';\r\nimport {RangeFilterShelf} from './range-filter-shelf';\r\n\r\n\r\n/**\r\n * Props for react-dnd of FilterShelf\r\n */\r\nexport interface FilterPaneDropTargetProps {\r\n  connectDropTarget: ConnectDropTarget;\r\n\r\n  isOver: boolean;\r\n\r\n  item: Object;\r\n\r\n  canDrop: boolean;\r\n}\r\n\r\nexport interface FilterPanePropsBase extends ActionHandler<FilterAction> {\r\n  filters: Array<FieldRangePredicate | FieldOneOfPredicate>;\r\n  schema: Schema;\r\n}\r\n\r\ninterface FilterPaneProps extends FilterPaneDropTargetProps, FilterPanePropsBase {};\r\n\r\nclass FilterPaneBase extends React.PureComponent<FilterPaneProps, {}> {\r\n\r\n  public constructor(props: FilterPaneProps) {\r\n    super(props);\r\n    this.filterModifyTimeUnit = this.filterModifyTimeUnit.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    const {filters, connectDropTarget} = this.props;\r\n    const filterShelves = filters.map((filter, index) => {\r\n      return this.renderFilterShelf(filter, index);\r\n    });\r\n    return connectDropTarget(\r\n      <div styleName='filter-pane'>\r\n        {filterShelves}\r\n        {this.renderFieldPlaceholder()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  protected filterRemove(index: number) {\r\n    const {handleAction} = this.props;\r\n    handleAction({\r\n      type: FILTER_REMOVE,\r\n      payload: {\r\n        index: index\r\n      }\r\n    });\r\n  }\r\n\r\n  protected filterModifyTimeUnit(timeUnit: string, index: number) {\r\n    const {handleAction, schema, filters} = this.props;\r\n    const domain = schema.domain({field: filters[index].field});\r\n    if (timeUnit === '-') {\r\n      timeUnit = undefined;\r\n    }\r\n    handleAction({\r\n      type: FILTER_MODIFY_TIME_UNIT,\r\n      payload: {\r\n        index,\r\n        domain,\r\n        timeUnit: timeUnit as TimeUnit\r\n      }\r\n    });\r\n  }\r\n\r\n  private renderFilterShelf(filter: FieldRangePredicate | FieldOneOfPredicate, index: number) {\r\n    const {handleAction, schema} = this.props;\r\n    let domain = schema.domain({field: filter.field});\r\n    const {field, timeUnit} = filter;\r\n    const fieldSchema = schema.fieldSchema(filter.field);\r\n    const fieldDef = {\r\n      fn: timeUnit,\r\n      field,\r\n      type: fieldSchema.vlType\r\n    };\r\n    const onFunctionChange = (tu: TimeUnit) => {\r\n      this.filterModifyTimeUnit(tu, index);\r\n    };\r\n    const popupComponent =\r\n      fieldDef.type === ExpandedType.TEMPORAL &&\r\n      <FunctionPicker\r\n        fieldDefParts={{\r\n          fn: timeUnit,\r\n          type: ExpandedType.TEMPORAL\r\n        }}\r\n        onFunctionChange={onFunctionChange}\r\n      /> ;\r\n    let filterComponent;\r\n    if (isFieldRangePredicate(filter)) {\r\n      if (fieldDef.type === ExpandedType.TEMPORAL) {\r\n        domain = getDefaultTimeRange(domain, timeUnit);\r\n      }\r\n      filterComponent = (\r\n        <RangeFilterShelf\r\n          domain={domain}\r\n          filter={filter}\r\n          index={index}\r\n          renderDateTimePicker={this.renderDateTimePicker(fieldDef.type, timeUnit)}\r\n          handleAction={handleAction}\r\n        />\r\n      );\r\n    } else if (isFieldOneOfPredicate(filter)) {\r\n      if (timeUnit) {\r\n        domain = getDefaultList(timeUnit);\r\n      }\r\n      filterComponent = (\r\n        <OneOfFilterShelf\r\n          domain={domain}\r\n          index={index}\r\n          filter={filter}\r\n          handleAction={handleAction}\r\n        />\r\n      );\r\n    }\r\n    return (\r\n      <div styleName='filter-shelf' key={index}>\r\n        <Field\r\n          draggable={false}\r\n          fieldDef={fieldDef}\r\n          caretShow={true}\r\n          isPill={true}\r\n          onRemove={this.filterRemove.bind(this, index)}\r\n          popupComponent={popupComponent}\r\n        />\r\n        {filterComponent}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderFieldPlaceholder() {\r\n    const {item, isOver, canDrop} = this.props;\r\n    let styleName, text;\r\n    if (item && !canDrop) {\r\n      styleName = 'placeholder-disabled';\r\n      text = 'Cannot drop a field here';\r\n    } else {\r\n      styleName = isOver ? 'placeholder-over' : item ? 'placeholder-active' : 'placeholder';\r\n      text = 'Drop a field here';\r\n    }\r\n    return (\r\n      <span styleName={styleName}>\r\n        {text}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * returns whether we should render date time picker instead of normal number input\r\n   */\r\n  private renderDateTimePicker(type: ExpandedType, timeUnit: TimeUnit): boolean {\r\n    if (!timeUnit) {\r\n      if (type === ExpandedType.QUANTITATIVE) {\r\n        return false;\r\n      } else if (type === ExpandedType.TEMPORAL) {\r\n        return true;\r\n      }\r\n    }\r\n    switch (timeUnit) {\r\n      case TimeUnit.YEAR:\r\n      case TimeUnit.MONTH:\r\n      case TimeUnit.DAY:\r\n      case TimeUnit.DATE:\r\n      case TimeUnit.HOURS:\r\n      case TimeUnit.MINUTES:\r\n      case TimeUnit.SECONDS:\r\n      case TimeUnit.MILLISECONDS:\r\n        return false;\r\n      case TimeUnit.YEARMONTHDATE:\r\n        return true;\r\n      default:\r\n        throw new Error(timeUnit + ' is not supported');\r\n    }\r\n  }\r\n}\r\n\r\nconst filterShelfTarget: DropTargetSpec<FilterPaneProps> = {\r\n  drop(props, monitor) {\r\n    if (monitor.didDrop()) {\r\n      return;\r\n    }\r\n    const {filter} = monitor.getItem() as DraggedFieldIdentifier;\r\n    if (isWildcard(filter.field)) {\r\n      window.alert('Cannot add wildcard filter');\r\n      throw new Error('Cannot add wildcard filter');\r\n    }\r\n    if (filterHasField(props.filters, filter.field)) {\r\n      window.alert('Cannot add more than one filter of the same field');\r\n      return;\r\n    }\r\n    props.handleAction({\r\n      type: FILTER_ADD,\r\n      payload: {\r\n        filter\r\n      }\r\n    });\r\n  },\r\n  canDrop(props, monitor) {\r\n    const {fieldDef} = monitor.getItem() as DraggedFieldIdentifier;\r\n    return !isWildcard(fieldDef.field) && fieldDef.field !== '*';\r\n  }\r\n};\r\n\r\nconst collect: DropTargetCollector = (connect, monitor): FilterPaneDropTargetProps => {\r\n  return {\r\n    connectDropTarget: connect.dropTarget(),\r\n    isOver: monitor.isOver(),\r\n    item: monitor.getItem(),\r\n    canDrop: monitor.canDrop()\r\n  };\r\n};\r\n\r\n// HACK: do type casting to suppress compile error for: https://github.com/Microsoft/TypeScript/issues/13526\r\nexport const FilterPane: () => React.PureComponent<FilterPanePropsBase, {}> = DropTarget(\r\n  DraggableType.FIELD, filterShelfTarget, collect\r\n)(CSSModules(FilterPaneBase, styles)) as any;\r\n","import {isWildcard} from 'compassql/build/src/wildcard';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {TimeUnit} from 'vega-lite/build/src/timeunit';\r\nimport {contains} from 'vega-lite/build/src/util';\r\nimport {ShelfFunction} from '../../models/shelf';\r\nimport {ShelfFieldDef} from '../../models/shelf';\r\nimport {getSupportedFunction} from '../../models/shelf';\r\nimport * as styles from './function-picker.scss';\r\n\r\nexport interface FunctionPickerProps {\r\n  fieldDefParts: {\r\n    // Using Mapped Type to extract parts of ShelfFieldDef\r\n    [k in 'fn' | 'type']?: ShelfFieldDef[k]\r\n  };\r\n\r\n  onFunctionChange: (fn: ShelfFunction | TimeUnit) => void;\r\n\r\n  wildcardHandler?: FunctionPickerWildcardHandler;\r\n}\r\n\r\nexport interface FunctionPickerWildcardHandler {\r\n  onWildcardEnable: () => void;\r\n  onWildcardDisable: () => void;\r\n  onWildcardAdd: (fn: ShelfFunction) => void;\r\n  onWildcardRemove: (fn: ShelfFunction) => void;\r\n}\r\n\r\nexport class FunctionPickerBase extends React.PureComponent<FunctionPickerProps, any> {\r\n  constructor(props: FunctionPickerProps) {\r\n    super(props);\r\n\r\n    // Bind - https://facebook.github.io/react/docs/handling-events.html\r\n    this.onFunctionChange = this.onFunctionChange.bind(this);\r\n    this.onCheck = this.onCheck.bind(this);\r\n    this.onFunctionCheck = this.onFunctionCheck.bind(this);\r\n  }\r\n  public render() {\r\n    const {fieldDefParts, wildcardHandler} = this.props;\r\n\r\n    const {fn, type} = fieldDefParts;\r\n    const supportedFns = getSupportedFunction(type);\r\n    const fnIsWildcard = isWildcard(fn);\r\n\r\n    const checkboxradios = supportedFns.map(f => (\r\n      <label styleName=\"func-label\" key={f || '-'}>\r\n        <input\r\n          onChange={fnIsWildcard ? this.onFunctionCheck : this.onFunctionChange}\r\n          type={fnIsWildcard ? \"checkbox\" : \"radio\"}\r\n          checked={isWildcard(fn) ? contains(fn.enum, f) : (f === fn)}\r\n          value={f || '-'}\r\n        />\r\n        {' '}\r\n        {f || '-'}\r\n      </label>\r\n    ));\r\n\r\n    return checkboxradios.length > 0 && (\r\n      <div styleName=\"function-chooser\">\r\n        {\r\n          wildcardHandler && (\r\n          <label styleName=\"wildcard-button\">\r\n            <input type=\"checkbox\" onChange={this.onCheck}/> Wildcard\r\n          </label>\r\n        )}\r\n        <h4>Function</h4>\r\n        {checkboxradios}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private onFunctionChange(event: any) {\r\n    let shelfFunction = event.target.value;\r\n    if (shelfFunction === '-') {\r\n      shelfFunction = undefined;\r\n    }\r\n\r\n    this.props.onFunctionChange(shelfFunction);\r\n  }\r\n\r\n  private onFunctionCheck(event: any) {\r\n    const checked = event.target.checked;\r\n\r\n    let shelfFunction = event.target.value;\r\n    if (shelfFunction === '-') {\r\n      shelfFunction = undefined;\r\n    }\r\n\r\n    if (checked) {\r\n      this.props.wildcardHandler.onWildcardAdd(shelfFunction);\r\n    } else {\r\n      this.props.wildcardHandler.onWildcardRemove(shelfFunction);\r\n    }\r\n  }\r\n\r\n  private onCheck(event: any) {\r\n    const checked = event.target.checked;\r\n\r\n    if (checked) {\r\n      this.props.wildcardHandler.onWildcardEnable();\r\n    } else {\r\n      this.props.wildcardHandler.onWildcardDisable();\r\n    }\r\n  }\r\n}\r\n\r\nexport const FunctionPicker = CSSModules(FunctionPickerBase, styles);\r\n\r\n// FIXME: move this to other parts and expand with more rules and test?\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"popup-menu\":\"function-picker__popup-menu\",\"function-chooser\":\"function-picker__function-chooser\",\"func-label\":\"function-picker__func-label\",\"wildcard-button\":\"function-picker__wildcard-button\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"placeholder\":\"filter-pane__placeholder\",\"placeholder-over\":\"filter-pane__placeholder-over\",\"placeholder-active\":\"filter-pane__placeholder-active\",\"placeholder-disabled\":\"filter-pane__placeholder-disabled\",\"filter-shelf\":\"filter-pane__filter-shelf\",\"filter-pane\":\"filter-pane__filter-pane\"};","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {DateTime} from 'vega-lite/build/src/datetime';\r\nimport {FieldOneOfPredicate} from 'vega-lite/build/src/predicate';\r\nimport {FILTER_MODIFY_ONE_OF, FilterAction} from '../../actions';\r\nimport {insertItemToArray, removeItemFromArray} from '../../reducers/util';\r\nimport * as styles from './one-of-filter-shelf.scss';\r\n\r\n\r\nexport interface OneOfFilterShelfProps {\r\n  domain: string[] | number[] | boolean[] | DateTime[];\r\n  filter: FieldOneOfPredicate;\r\n  index: number;\r\n  handleAction: (action: FilterAction) => void;\r\n}\r\n\r\nexport interface OneOfFilterShelfState {\r\n  hideSearchBar: boolean;\r\n}\r\n\r\nexport class OneOfFilterShelfBase extends React.PureComponent<OneOfFilterShelfProps, OneOfFilterShelfState> {\r\n  constructor(props: OneOfFilterShelfProps) {\r\n    super(props);\r\n    this.state = ({\r\n      hideSearchBar: true\r\n    });\r\n  }\r\n\r\n  public render() {\r\n    const {domain, filter, index} = this.props;\r\n    const oneOfFilter = (domain as any[]).map(option => {\r\n      return (\r\n        <div key={option} className='option-div' styleName='option-row'>\r\n          <label>\r\n            <input\r\n              name={index.toString()}\r\n              value={option}\r\n              type='checkbox'\r\n              checked={(filter.oneOf as any[]).indexOf(option) !== -1}\r\n              onChange={this.toggleCheckbox.bind(this, option)}\r\n            /> {'' + option}\r\n          </label>\r\n          <span onClick={this.onSelectOne.bind(this, option)} styleName='keep-only'>\r\n            Keep Only\r\n          </span>\r\n        </div>\r\n      );\r\n    });\r\n    return (\r\n      <div id={index.toString()}>\r\n        <div styleName='below-header'>\r\n          <span>\r\n            <a styleName='select-all' onClick={this.onSelectAll.bind(this)}>\r\n              Select All\r\n            </a> /\r\n            <a styleName='clear-all' onClick={this.onClearAll.bind(this)}>\r\n              Clear All\r\n            </a>\r\n          </span>\r\n          {this.state.hideSearchBar ?\r\n            null :\r\n            <input type='text' onChange={this.onSearch.bind(this)} autoFocus={true}/>\r\n          }\r\n          <a styleName='search' onClick={this.onClickSearch.bind(this)}>\r\n            <i className='fa fa-search'/>\r\n          </a>\r\n        </div>\r\n        {oneOfFilter}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  protected filterModifyOneOf(index: number, oneOf: string[] | number[] | boolean[] | DateTime[]) {\r\n    const {handleAction} = this.props;\r\n    handleAction({\r\n      type: FILTER_MODIFY_ONE_OF,\r\n      payload: {\r\n        index,\r\n        oneOf\r\n      }\r\n    });\r\n  }\r\n\r\n  private toggleCheckbox(option: string | number | boolean | DateTime) {\r\n    const oneOf = this.props.filter.oneOf;\r\n    const valueIndex = (oneOf as any[]).indexOf(option);\r\n    let changedSelectedValues;\r\n    if (valueIndex === -1) {\r\n      changedSelectedValues = insertItemToArray(oneOf, oneOf.length, option);\r\n    } else {\r\n      changedSelectedValues = removeItemFromArray(oneOf, valueIndex).array;\r\n    }\r\n    this.filterModifyOneOf(this.props.index, changedSelectedValues);\r\n  }\r\n\r\n  private onSelectOne(value: string | number | boolean | DateTime) {\r\n    const {index} = this.props;\r\n    this.filterModifyOneOf(index, [value as any]);\r\n  }\r\n\r\n  private onSelectAll() {\r\n    const {domain, index} = this.props;\r\n    this.filterModifyOneOf(index, domain.slice());\r\n  }\r\n\r\n  private onClearAll() {\r\n    const {index} = this.props;\r\n    this.filterModifyOneOf(index, []);\r\n  }\r\n\r\n  private onClickSearch() {\r\n    if (!this.state.hideSearchBar) {\r\n      const divs = this.getDivs();\r\n      Array.prototype.forEach.call(divs, (div: HTMLDivElement) => {\r\n        div.style.display = 'block';\r\n      });\r\n    }\r\n    this.setState({\r\n      hideSearchBar: !this.state.hideSearchBar\r\n    });\r\n  }\r\n\r\n  private onSearch(e: any) {\r\n    const searchedDivs = this.getDivs();\r\n    Array.prototype.forEach.call(searchedDivs, (searchedDiv: HTMLDivElement) => {\r\n      // its first child is label, the label's child is checkbox input\r\n      const searchedOption = searchedDiv.childNodes[0].childNodes[0] as HTMLInputElement;\r\n      if (searchedOption.value.toLowerCase().indexOf(e.target.value.toLowerCase().trim()) === -1) {\r\n        searchedDiv.style.display = 'none';\r\n      } else {\r\n        searchedDiv.style.display = 'block';\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * returns all div nodes in current filter shelf\r\n   */\r\n  private getDivs() {\r\n    // select the current filter shelf\r\n    const container = document.getElementById(this.props.index.toString());\r\n    // select all divs\r\n    const divs = container.getElementsByClassName('option-div');\r\n    return divs;\r\n  }\r\n}\r\nexport const OneOfFilterShelf = CSSModules(OneOfFilterShelfBase, styles);\r\n","/**\r\n * Immutable array splice\r\n */\r\nexport function removeItemFromArray(array: ReadonlyArray<any>, index: number) {\r\n  return {\r\n    item: array[index],\r\n    array: [\r\n      ...array.slice(0, index),\r\n      ...array.slice(index + 1)\r\n    ]\r\n  };\r\n}\r\n\r\nexport function insertItemToArray<T>(array: ReadonlyArray<T>, index: number, item: T) {\r\n  return [\r\n    ...array.slice(0, index),\r\n    item,\r\n    ...array.slice(index)\r\n  ];\r\n}\r\n\r\nexport function modifyItemInArray<T>(array: ReadonlyArray<T>, index: number, modifier: (t: Readonly<T>) => T) {\r\n  return [\r\n    ...array.slice(0, index),\r\n    modifier(array[index]),\r\n    ...array.slice(index + 1)\r\n  ];\r\n}\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"select-all\":\"one-of-filter-shelf__select-all\",\"clear-all\":\"one-of-filter-shelf__clear-all\",\"keep-only\":\"one-of-filter-shelf__keep-only\",\"option-row\":\"one-of-filter-shelf__option-row\",\"search\":\"one-of-filter-shelf__search\",\"below-header\":\"one-of-filter-shelf__below-header\"};","\r\nimport * as Slider from 'rc-slider';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport * as DateTimePicker from 'react-datetime';\r\nimport * as TetherComponent from 'react-tether';\r\nimport {DateTime} from 'vega-lite/build/src/datetime';\r\nimport {FieldRangePredicate} from 'vega-lite/build/src/predicate';\r\nimport {TimeUnit} from 'vega-lite/build/src/timeunit';\r\nimport {FILTER_MODIFY_EXTENT, FILTER_MODIFY_MAX_BOUND, FILTER_MODIFY_MIN_BOUND,\r\n  FilterAction} from '../../actions';\r\nimport {ActionHandler} from '../../actions/redux-action';\r\nimport {convertToDateTimeObject, convertToTimestamp} from '../../models/shelf/filter';\r\nimport * as styles from './range-filter-shelf.scss';\r\n\r\nexport interface RangeFilterShelfProps extends ActionHandler<FilterAction> {\r\n  domain: number[] | DateTime[];\r\n  index: number;\r\n  filter: FieldRangePredicate;\r\n  renderDateTimePicker: boolean;\r\n}\r\n\r\nexport interface RangeFilterShelfState {\r\n  minDateTimePickerOpen: boolean;\r\n  maxDateTimePickerOpen: boolean;\r\n}\r\n\r\nexport class RangeFilterShelfBase extends React.PureComponent<RangeFilterShelfProps, RangeFilterShelfState> {\r\n\r\n  constructor(props: RangeFilterShelfProps) {\r\n    super(props);\r\n    this.state = ({\r\n      minDateTimePickerOpen: false,\r\n      maxDateTimePickerOpen: false\r\n    });\r\n    this.filterModifyExtent = this.filterModifyExtent.bind(this);\r\n    this.filterModifyMaxBound = this.filterModifyMaxBound.bind(this);\r\n    this.filterModifyMinBound = this.filterModifyMinBound.bind(this);\r\n    this.toggleMinDateTimePicker = this.toggleMinDateTimePicker.bind(this);\r\n    this.toggleMaxDateTimePicker = this.toggleMaxDateTimePicker.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    const {filter, domain, renderDateTimePicker} = this.props;\r\n    const createSliderWithTooltip = Slider.createSliderWithTooltip;\r\n    const Range = createSliderWithTooltip(Slider.Range);\r\n    let minInput, maxInput, currMin, currMax, lowerBound, upperBound;\r\n    if (renderDateTimePicker) {\r\n      // when render date time picker, it must be an temporal filter, thus the range must be DateTime[].\r\n      minInput = this.renderDateTimePicker(new Date(convertToTimestamp(filter.range[0] as DateTime)), 'min');\r\n      maxInput = this.renderDateTimePicker(new Date(convertToTimestamp(filter.range[1] as DateTime)), 'max');\r\n      currMin = convertToTimestamp(filter.range[0] as DateTime);\r\n      currMax = convertToTimestamp(filter.range[1] as DateTime);\r\n      lowerBound = Math.floor(convertToTimestamp(domain[0] as DateTime));\r\n      upperBound = Math.ceil(convertToTimestamp(domain[1] as DateTime));\r\n    } else {\r\n      minInput = this.renderNumberInput('min');\r\n      maxInput = this.renderNumberInput('max');\r\n      currMin = filter.range[0];\r\n      currMax = filter.range[1];\r\n      // Math.floor/ceil because the slider requires the the difference between max and min\r\n      // must be a multiple of step (which is 1 by default)\r\n      lowerBound = Math.floor(Number(domain[0]));\r\n      upperBound = Math.ceil(Number(domain[1]));\r\n    }\r\n    return (\r\n      <div styleName='range-filter-pane'>\r\n        <div>\r\n          <div styleName='bound'>\r\n            {minInput}\r\n          </div>\r\n          <div styleName='bound'>\r\n            {maxInput}\r\n          </div>\r\n        </div>\r\n        <Range\r\n          allowCross={false}\r\n          defaultValue={[currMin, currMax]}\r\n          min={lowerBound}\r\n          max={upperBound}\r\n          onAfterChange={this.filterModifyExtent.bind(this)}\r\n          tipFormatter={this.getFormat(renderDateTimePicker, filter.timeUnit)}\r\n          step={this.getStep(filter.timeUnit)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  protected filterModifyExtent(input: number[]) {\r\n    // filterModifyExtent is only triggered by slider, so input must be number[].\r\n    let range: DateTime[] | number[];\r\n    if (this.props.renderDateTimePicker) {\r\n      range = [convertToDateTimeObject(input[0]), convertToDateTimeObject(input[1])];\r\n    } else {\r\n      range = input;\r\n    }\r\n    if (range[0] > range[1]) {\r\n      window.alert('Invalid bound');\r\n      return;\r\n    }\r\n    const {handleAction, index} = this.props;\r\n    handleAction({\r\n      type: FILTER_MODIFY_EXTENT,\r\n      payload: {\r\n        index,\r\n        range\r\n      }\r\n    });\r\n  }\r\n\r\n  protected filterModifyMaxBound(e: any) {\r\n    let maxBound;\r\n    if (e.hasOwnProperty('target')) {\r\n      maxBound = Number(e.target.value);\r\n    } else {\r\n      maxBound = e;\r\n    }\r\n    const {handleAction, index} = this.props;\r\n    if (this.props.renderDateTimePicker) {\r\n      maxBound = convertToDateTimeObject(maxBound);\r\n    }\r\n    const minBound = this.props.filter.range[0];\r\n    if (maxBound < minBound) {\r\n      window.alert('Maximum bound cannot be smaller than minimum bound');\r\n      return;\r\n    }\r\n    handleAction({\r\n      type: FILTER_MODIFY_MAX_BOUND,\r\n      payload: {\r\n        index,\r\n        maxBound\r\n      }\r\n    });\r\n  }\r\n\r\n  protected filterModifyMinBound(e: any) {\r\n    let minBound;\r\n    if (e.hasOwnProperty('target')) {\r\n      minBound = Number(e.target.value);\r\n    } else {\r\n      minBound = e;\r\n    }\r\n    const {handleAction, index, renderDateTimePicker} = this.props;\r\n    if (renderDateTimePicker) {\r\n      minBound = convertToDateTimeObject(minBound);\r\n    }\r\n    const range = this.props.filter.range;\r\n    const maxBound = range[1];\r\n    if (minBound > maxBound) {\r\n      window.alert('Minimum bound cannot be greater than maximum bound');\r\n      return;\r\n    }\r\n    handleAction({\r\n      type: FILTER_MODIFY_MIN_BOUND,\r\n      payload: {\r\n        index,\r\n        minBound\r\n      }\r\n    });\r\n  }\r\n\r\n  private renderNumberInput(bound: 'min' | 'max') {\r\n    const {filter} = this.props;\r\n    let onChangeAction, value;\r\n    if (bound === 'min') {\r\n      onChangeAction = this.filterModifyMinBound;\r\n      value = filter.range[0];\r\n    } else if (bound === 'max') {\r\n      onChangeAction = this.filterModifyMaxBound;\r\n      value = filter.range[1];\r\n    }\r\n    return (\r\n      <div>\r\n      {bound}:\r\n        <a onClick={this.focusInput.bind(this, `${filter.field}_${bound}`)}><i className=\"fa fa-pencil\"/></a>\r\n        <input\r\n          id={`${filter.field}_${bound}`}\r\n          type='number'\r\n          value={value.toString()}\r\n          onChange={onChangeAction}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderDateTimePicker(date: Date, bound: 'min' | 'max') {\r\n    let onChangeAction, dateTimePickerOpen, dataTimePickerOpenAction;\r\n    if (bound === 'min') {\r\n      onChangeAction = this.filterModifyMinBound;\r\n      dateTimePickerOpen = this.state.minDateTimePickerOpen;\r\n      dataTimePickerOpenAction = this.toggleMinDateTimePicker;\r\n    } else if (bound === 'max') {\r\n      onChangeAction = this.filterModifyMaxBound;\r\n      dateTimePickerOpen = this.state.maxDateTimePickerOpen;\r\n      dataTimePickerOpenAction = this.toggleMaxDateTimePicker;\r\n    }\r\n    return (\r\n      <div>\r\n        <TetherComponent\r\n          attachment='bottom center'\r\n        >\r\n          <div styleName='bound'>\r\n            {bound}:\r\n            <a onClick={dataTimePickerOpenAction}><i className=\"fa fa-pencil\"/></a>\r\n            {date.toString()}\r\n          </div>\r\n          {dateTimePickerOpen &&\r\n            <div styleName='date-time-picker-wrapper'>\r\n              <DateTimePicker\r\n                defaultValue={date}\r\n                timeFormat={this.showTime(this.props.filter.timeUnit)}\r\n                open={false}\r\n                onChange={onChangeAction}\r\n                disableOnClickOutside={false}\r\n              />\r\n            </div>\r\n          }\r\n        </TetherComponent>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private focusInput(id: string) {\r\n    document.getElementById(id).focus();\r\n  }\r\n\r\n  private toggleMinDateTimePicker() {\r\n    this.setState({\r\n      minDateTimePickerOpen: !this.state.minDateTimePickerOpen\r\n    });\r\n  }\r\n\r\n  private toggleMaxDateTimePicker() {\r\n    this.setState({\r\n      maxDateTimePickerOpen: !this.state.maxDateTimePickerOpen\r\n    });\r\n  }\r\n\r\n  /**\r\n   * returns whether to show the time component in the date time picker\r\n   */\r\n  private showTime(timeUnit: TimeUnit): boolean {\r\n    switch (timeUnit) {\r\n      case undefined:\r\n      case TimeUnit.YEAR:\r\n      case TimeUnit.MONTH:\r\n      case TimeUnit.DAY:\r\n      case TimeUnit.DATE:\r\n      case TimeUnit.HOURS:\r\n      case TimeUnit.MINUTES:\r\n      case TimeUnit.SECONDS:\r\n      case TimeUnit.MILLISECONDS:\r\n        return true;\r\n      case TimeUnit.YEARMONTHDATE:\r\n        // hide time component as we do not care about it\r\n        return false;\r\n      default:\r\n        throw new Error(timeUnit + ' is not supported');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a function to format how the number is displayed in range filter for\r\n   * the given time unit.\r\n   */\r\n  private getFormat(renderDateTime: boolean, timeUnit: TimeUnit) {\r\n    if (!timeUnit) {\r\n      if (renderDateTime) {\r\n        // temporal filter without time unit\r\n        // TODO: https://github.com/vega/voyager/issues/443: use the time formatter Vega derives from D3\r\n        return (value: number) => {\r\n          return new Date(value).toString();\r\n        };\r\n      } else {\r\n        // quantitative filter\r\n        return;\r\n      }\r\n    }\r\n    switch (timeUnit) {\r\n      case TimeUnit.YEAR:\r\n      case TimeUnit.MONTH:\r\n      case TimeUnit.DAY:\r\n      case TimeUnit.DATE:\r\n      case TimeUnit.HOURS:\r\n      case TimeUnit.MINUTES:\r\n      case TimeUnit.SECONDS:\r\n      case TimeUnit.MILLISECONDS:\r\n        // do not need to format these time units.\r\n        return;\r\n      case TimeUnit.YEARMONTHDATE:\r\n        // TODO: https://github.com/vega/voyager/issues/443: use the time formatter Vega derives from D3\r\n        return (value: number) => {\r\n          return new Date(value).toString();\r\n        };\r\n      default:\r\n        throw new Error(timeUnit + ' is not supported');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the range filter step for the given time unit.\r\n   */\r\n  private getStep(timeUnit: TimeUnit) {\r\n    switch (timeUnit) {\r\n      case undefined:\r\n      case TimeUnit.YEAR:\r\n      case TimeUnit.MONTH:\r\n      case TimeUnit.DAY:\r\n      case TimeUnit.DATE:\r\n      case TimeUnit.HOURS:\r\n      case TimeUnit.MINUTES:\r\n      case TimeUnit.SECONDS:\r\n      case TimeUnit.MILLISECONDS:\r\n        return 1;\r\n      case TimeUnit.YEARMONTHDATE:\r\n        return 24 * 60 * 60 * 1000; // step is one day in timestamp\r\n      default:\r\n        throw new Error(timeUnit + ' is not supported');\r\n    }\r\n  }\r\n}\r\n\r\nexport const RangeFilterShelf = CSSModules(RangeFilterShelfBase, styles);\r\n","import Slider from './Slider';\nimport Range from './Range';\nimport Handle from './Handle';\nimport createSliderWithTooltip from './createSliderWithTooltip';\n\nSlider.Range = Range;\nSlider.Handle = Handle;\nSlider.createSliderWithTooltip = createSliderWithTooltip;\nexport default Slider;\nexport { Range, Handle, createSliderWithTooltip };","import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n/* eslint-disable react/prop-types */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport warning from 'warning';\nimport Track from './common/Track';\nimport createSlider from './common/createSlider';\nimport * as utils from './utils';\n\nvar Slider = function (_React$Component) {\n  _inherits(Slider, _React$Component);\n\n  function Slider(props) {\n    _classCallCheck(this, Slider);\n\n    var _this = _possibleConstructorReturn(this, (Slider.__proto__ || Object.getPrototypeOf(Slider)).call(this, props));\n\n    _this.onEnd = function () {\n      _this.setState({ dragging: false });\n      _this.removeDocumentEvents();\n      _this.props.onAfterChange(_this.getValue());\n    };\n\n    var defaultValue = props.defaultValue !== undefined ? props.defaultValue : props.min;\n    var value = props.value !== undefined ? props.value : defaultValue;\n\n    _this.state = {\n      value: _this.trimAlignValue(value),\n      dragging: false\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      warning(!('minimumTrackStyle' in props), 'minimumTrackStyle will be deprecate, please use trackStyle instead.');\n      warning(!('maximumTrackStyle' in props), 'maximumTrackStyle will be deprecate, please use railStyle instead.');\n    }\n    return _this;\n  }\n\n  _createClass(Slider, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (!('value' in nextProps || 'min' in nextProps || 'max' in nextProps)) return;\n\n      var prevValue = this.state.value;\n      var value = nextProps.value !== undefined ? nextProps.value : prevValue;\n      var nextValue = this.trimAlignValue(value, nextProps);\n      if (nextValue === prevValue) return;\n\n      this.setState({ value: nextValue });\n      if (utils.isValueOutOfRange(value, nextProps)) {\n        this.props.onChange(nextValue);\n      }\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange(state) {\n      var props = this.props;\n      var isNotControlled = !('value' in props);\n      if (isNotControlled) {\n        this.setState(state);\n      }\n\n      var changedValue = state.value;\n      props.onChange(changedValue);\n    }\n  }, {\n    key: 'onStart',\n    value: function onStart(position) {\n      this.setState({ dragging: true });\n      var props = this.props;\n      var prevValue = this.getValue();\n      props.onBeforeChange(prevValue);\n\n      var value = this.calcValueByPos(position);\n      this.startValue = value;\n      this.startPosition = position;\n\n      if (value === prevValue) return;\n\n      this.onChange({ value: value });\n    }\n  }, {\n    key: 'onMove',\n    value: function onMove(e, position) {\n      utils.pauseEvent(e);\n      var oldValue = this.state.value;\n\n      var value = this.calcValueByPos(position);\n      if (value === oldValue) return;\n\n      this.onChange({ value: value });\n    }\n  }, {\n    key: 'onKeyboard',\n    value: function onKeyboard(e) {\n      var valueMutator = utils.getKeyboardValueMutator(e);\n\n      if (valueMutator) {\n        utils.pauseEvent(e);\n        var state = this.state;\n        var oldValue = state.value;\n        var mutatedValue = valueMutator(oldValue, this.props);\n        var value = this.trimAlignValue(mutatedValue);\n        if (value === oldValue) return;\n\n        this.onChange({ value: value });\n      }\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      return this.state.value;\n    }\n  }, {\n    key: 'getLowerBound',\n    value: function getLowerBound() {\n      return this.props.min;\n    }\n  }, {\n    key: 'getUpperBound',\n    value: function getUpperBound() {\n      return this.state.value;\n    }\n  }, {\n    key: 'trimAlignValue',\n    value: function trimAlignValue(v) {\n      var nextProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var mergedProps = _extends({}, this.props, nextProps);\n      var val = utils.ensureValueInRange(v, mergedProps);\n      return utils.ensureValuePrecision(val, mergedProps);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          vertical = _props.vertical,\n          included = _props.included,\n          disabled = _props.disabled,\n          minimumTrackStyle = _props.minimumTrackStyle,\n          trackStyle = _props.trackStyle,\n          handleStyle = _props.handleStyle,\n          min = _props.min,\n          max = _props.max,\n          handleGenerator = _props.handle;\n      var _state = this.state,\n          value = _state.value,\n          dragging = _state.dragging;\n\n      var offset = this.calcOffset(value);\n      var handle = handleGenerator({\n        className: prefixCls + '-handle',\n        vertical: vertical,\n        offset: offset,\n        value: value,\n        dragging: dragging,\n        disabled: disabled,\n        min: min,\n        max: max,\n        style: handleStyle[0] || handleStyle,\n        ref: function ref(h) {\n          return _this2.saveHandle(0, h);\n        }\n      });\n\n      var _trackStyle = trackStyle[0] || trackStyle;\n      var track = React.createElement(Track, {\n        className: prefixCls + '-track',\n        vertical: vertical,\n        included: included,\n        offset: 0,\n        length: offset,\n        style: _extends({}, minimumTrackStyle, _trackStyle)\n      });\n\n      return { tracks: track, handles: handle };\n    }\n  }]);\n\n  return Slider;\n}(React.Component);\n\nSlider.propTypes = {\n  defaultValue: PropTypes.number,\n  value: PropTypes.number,\n  disabled: PropTypes.bool\n};\n\n\nexport default createSlider(Slider);","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');","exports.f = Object.getOwnPropertySymbols;","exports.f = {}.propertyIsEnumerable;","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};","module.exports = true;","module.exports = require('./_hide');","module.exports = {};","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};","module.exports = require('./_global').document && document.documentElement;","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = require('./_has')\n  , toObject    = require('./_to-object')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');","module.exports = function(){ /* empty */ };","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};","exports.f = require('./_wks');","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};","var global         = require('./_global')\n  , core           = require('./_core')\n  , LIBRARY        = require('./_library')\n  , wksExt         = require('./_wks-ext')\n  , defineProperty = require('./_object-dp').f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = require('./_object-keys-internal')\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};","var pIE            = require('./_object-pie')\n  , createDesc     = require('./_property-desc')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , has            = require('./_has')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};","require('./_wks-define')('asyncIterator');","require('./_wks-define')('observable');","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D){\n  return $Object.create(P, D);\n};","var $export = require('./_export')\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', {create: require('./_object-create')});","/**\n * Copyright 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar warning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n        '`warning(condition, format, ...args)` requires a warning ' +\n        'message argument'\n      );\n    }\n\n    if (format.length < 10 || (/^[s\\W]*$/).test(format)) {\n      throw new Error(\n        'The warning format should be able to uniquely identify this ' +\n        'warning. Please, use a more descriptive format than: ' + format\n      );\n    }\n\n    if (!condition) {\n      var argIndex = 0;\n      var message = 'Warning: ' +\n        format.replace(/%s/g, function() {\n          return args[argIndex++];\n        });\n      if (typeof console !== 'undefined') {\n        console.error(message);\n      }\n      try {\n        // This error was thrown as a convenience so that you can use this stack\n        // to find the callsite that caused this warning to fire.\n        throw new Error(message);\n      } catch(x) {}\n    }\n  };\n}\n\nmodule.exports = warning;\n","import _extends from 'babel-runtime/helpers/extends';\n/* eslint-disable react/prop-types */\nimport React from 'react';\n\nvar Track = function Track(props) {\n  var className = props.className,\n      included = props.included,\n      vertical = props.vertical,\n      offset = props.offset,\n      length = props.length,\n      style = props.style;\n\n\n  var positonStyle = vertical ? {\n    bottom: offset + '%',\n    height: length + '%'\n  } : {\n    left: offset + '%',\n    width: length + '%'\n  };\n\n  var elStyle = _extends({\n    visibility: included ? 'visible' : 'hidden'\n  }, style, positonStyle);\n  return React.createElement('div', { className: className, style: elStyle });\n};\n\nexport default Track;","import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _get from 'babel-runtime/helpers/get';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport addEventListener from 'rc-util/es/Dom/addEventListener';\nimport classNames from 'classnames';\nimport warning from 'warning';\nimport Steps from './Steps';\nimport Marks from './Marks';\nimport Handle from '../Handle';\nimport * as utils from '../utils';\n\nfunction noop() {}\n\nexport default function createSlider(Component) {\n  var _class, _temp;\n\n  return _temp = _class = function (_Component) {\n    _inherits(ComponentEnhancer, _Component);\n\n    function ComponentEnhancer(props) {\n      _classCallCheck(this, ComponentEnhancer);\n\n      var _this = _possibleConstructorReturn(this, (ComponentEnhancer.__proto__ || Object.getPrototypeOf(ComponentEnhancer)).call(this, props));\n\n      _this.onMouseDown = function (e) {\n        if (e.button !== 0) {\n          return;\n        }\n\n        var isVertical = _this.props.vertical;\n        var position = utils.getMousePosition(isVertical, e);\n        if (!utils.isEventFromHandle(e, _this.handlesRefs)) {\n          _this.dragOffset = 0;\n        } else {\n          var handlePosition = utils.getHandleCenterPosition(isVertical, e.target);\n          _this.dragOffset = position - handlePosition;\n          position = handlePosition;\n        }\n        _this.onStart(position);\n        _this.addDocumentMouseEvents();\n        utils.pauseEvent(e);\n      };\n\n      _this.onTouchStart = function (e) {\n        if (utils.isNotTouchEvent(e)) return;\n\n        var isVertical = _this.props.vertical;\n        var position = utils.getTouchPosition(isVertical, e);\n        if (!utils.isEventFromHandle(e, _this.handlesRefs)) {\n          _this.dragOffset = 0;\n        } else {\n          var handlePosition = utils.getHandleCenterPosition(isVertical, e.target);\n          _this.dragOffset = position - handlePosition;\n          position = handlePosition;\n        }\n        _this.onStart(position);\n        _this.addDocumentTouchEvents();\n        utils.pauseEvent(e);\n      };\n\n      _this.onFocus = function (e) {\n        var isVertical = _this.props.vertical;\n\n        if (utils.isEventFromHandle(e, _this.handlesRefs)) {\n          var handlePosition = utils.getHandleCenterPosition(isVertical, e.target);\n\n          _this.dragOffset = 0;\n          _this.onStart(handlePosition);\n          utils.pauseEvent(e);\n        }\n      };\n\n      _this.onBlur = function (e) {\n        _this.onEnd(e);\n      };\n\n      _this.onMouseMove = function (e) {\n        if (!_this.sliderRef) {\n          _this.onEnd();\n          return;\n        }\n        var position = utils.getMousePosition(_this.props.vertical, e);\n        _this.onMove(e, position - _this.dragOffset);\n      };\n\n      _this.onTouchMove = function (e) {\n        if (utils.isNotTouchEvent(e) || !_this.sliderRef) {\n          _this.onEnd();\n          return;\n        }\n\n        var position = utils.getTouchPosition(_this.props.vertical, e);\n        _this.onMove(e, position - _this.dragOffset);\n      };\n\n      _this.onKeyDown = function (e) {\n        if (_this.sliderRef && utils.isEventFromHandle(e, _this.handlesRefs)) {\n          _this.onKeyboard(e);\n        }\n      };\n\n      _this.saveSlider = function (slider) {\n        _this.sliderRef = slider;\n      };\n\n      if (process.env.NODE_ENV !== 'production') {\n        var step = props.step,\n            max = props.max,\n            min = props.min;\n\n        warning(step && Math.floor(step) === step ? (max - min) % step === 0 : true, 'Slider[max] - Slider[min] (%s) should be a multiple of Slider[step] (%s)', max - min, step);\n      }\n      _this.handlesRefs = {};\n      return _this;\n    }\n\n    _createClass(ComponentEnhancer, [{\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        if (_get(ComponentEnhancer.prototype.__proto__ || Object.getPrototypeOf(ComponentEnhancer.prototype), 'componentWillUnmount', this)) _get(ComponentEnhancer.prototype.__proto__ || Object.getPrototypeOf(ComponentEnhancer.prototype), 'componentWillUnmount', this).call(this);\n        this.removeDocumentEvents();\n      }\n    }, {\n      key: 'addDocumentTouchEvents',\n      value: function addDocumentTouchEvents() {\n                this.onTouchMoveListener = addEventListener(document, 'touchmove', this.onTouchMove);\n        this.onTouchUpListener = addEventListener(document, 'touchend', this.onEnd);\n      }\n    }, {\n      key: 'addDocumentMouseEvents',\n      value: function addDocumentMouseEvents() {\n        this.onMouseMoveListener = addEventListener(document, 'mousemove', this.onMouseMove);\n        this.onMouseUpListener = addEventListener(document, 'mouseup', this.onEnd);\n      }\n    }, {\n      key: 'removeDocumentEvents',\n      value: function removeDocumentEvents() {\n        \n        this.onTouchMoveListener && this.onTouchMoveListener.remove();\n        this.onTouchUpListener && this.onTouchUpListener.remove();\n\n        this.onMouseMoveListener && this.onMouseMoveListener.remove();\n        this.onMouseUpListener && this.onMouseUpListener.remove();\n        \n      }\n    }, {\n      key: 'getSliderStart',\n      value: function getSliderStart() {\n        var slider = this.sliderRef;\n        var rect = slider.getBoundingClientRect();\n\n        return this.props.vertical ? rect.top : rect.left;\n      }\n    }, {\n      key: 'getSliderLength',\n      value: function getSliderLength() {\n        var slider = this.sliderRef;\n        if (!slider) {\n          return 0;\n        }\n\n        var coords = slider.getBoundingClientRect();\n        return this.props.vertical ? coords.height : coords.width;\n      }\n    }, {\n      key: 'calcValue',\n      value: function calcValue(offset) {\n        var _props = this.props,\n            vertical = _props.vertical,\n            min = _props.min,\n            max = _props.max;\n\n        var ratio = Math.abs(Math.max(offset, 0) / this.getSliderLength());\n        var value = vertical ? (1 - ratio) * (max - min) + min : ratio * (max - min) + min;\n        return value;\n      }\n    }, {\n      key: 'calcValueByPos',\n      value: function calcValueByPos(position) {\n        var pixelOffset = position - this.getSliderStart();\n        var nextValue = this.trimAlignValue(this.calcValue(pixelOffset));\n        return nextValue;\n      }\n    }, {\n      key: 'calcOffset',\n      value: function calcOffset(value) {\n        var _props2 = this.props,\n            min = _props2.min,\n            max = _props2.max;\n\n        var ratio = (value - min) / (max - min);\n        return ratio * 100;\n      }\n    }, {\n      key: 'saveHandle',\n      value: function saveHandle(index, handle) {\n        this.handlesRefs[index] = handle;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _classNames;\n\n        var _props3 = this.props,\n            prefixCls = _props3.prefixCls,\n            className = _props3.className,\n            marks = _props3.marks,\n            dots = _props3.dots,\n            step = _props3.step,\n            included = _props3.included,\n            disabled = _props3.disabled,\n            vertical = _props3.vertical,\n            min = _props3.min,\n            max = _props3.max,\n            children = _props3.children,\n            maximumTrackStyle = _props3.maximumTrackStyle,\n            style = _props3.style,\n            railStyle = _props3.railStyle,\n            dotStyle = _props3.dotStyle,\n            activeDotStyle = _props3.activeDotStyle;\n\n        var _get$call = _get(ComponentEnhancer.prototype.__proto__ || Object.getPrototypeOf(ComponentEnhancer.prototype), 'render', this).call(this),\n            tracks = _get$call.tracks,\n            handles = _get$call.handles;\n\n        var sliderClassName = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, prefixCls + '-with-marks', Object.keys(marks).length), _defineProperty(_classNames, prefixCls + '-disabled', disabled), _defineProperty(_classNames, prefixCls + '-vertical', vertical), _defineProperty(_classNames, className, className), _classNames));\n        return React.createElement(\n          'div',\n          {\n            ref: this.saveSlider,\n            className: sliderClassName,\n            onTouchStart: disabled ? noop : this.onTouchStart,\n            onMouseDown: disabled ? noop : this.onMouseDown,\n            onKeyDown: disabled ? noop : this.onKeyDown,\n            onFocus: disabled ? noop : this.onFocus,\n            onBlur: disabled ? noop : this.onBlur,\n            style: style\n          },\n          React.createElement('div', {\n            className: prefixCls + '-rail',\n            style: _extends({}, maximumTrackStyle, railStyle)\n          }),\n          tracks,\n          React.createElement(Steps, {\n            prefixCls: prefixCls,\n            vertical: vertical,\n            marks: marks,\n            dots: dots,\n            step: step,\n            included: included,\n            lowerBound: this.getLowerBound(),\n            upperBound: this.getUpperBound(),\n            max: max,\n            min: min,\n            dotStyle: dotStyle,\n            activeDotStyle: activeDotStyle\n          }),\n          handles,\n          React.createElement(Marks, {\n            className: prefixCls + '-mark',\n            vertical: vertical,\n            marks: marks,\n            included: included,\n            lowerBound: this.getLowerBound(),\n            upperBound: this.getUpperBound(),\n            max: max,\n            min: min\n          }),\n          children\n        );\n      }\n    }]);\n\n    return ComponentEnhancer;\n  }(Component), _class.displayName = 'ComponentEnhancer(' + Component.displayName + ')', _class.propTypes = _extends({}, Component.propTypes, {\n    min: PropTypes.number,\n    max: PropTypes.number,\n    step: PropTypes.number,\n    marks: PropTypes.object,\n    included: PropTypes.bool,\n    className: PropTypes.string,\n    prefixCls: PropTypes.string,\n    disabled: PropTypes.bool,\n    children: PropTypes.any,\n    onBeforeChange: PropTypes.func,\n    onChange: PropTypes.func,\n    onAfterChange: PropTypes.func,\n    handle: PropTypes.func,\n    dots: PropTypes.bool,\n    vertical: PropTypes.bool,\n    style: PropTypes.object,\n    minimumTrackStyle: PropTypes.object,     maximumTrackStyle: PropTypes.object,     handleStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.arrayOf(PropTypes.object)]),\n    trackStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.arrayOf(PropTypes.object)]),\n    railStyle: PropTypes.object,\n    dotStyle: PropTypes.object,\n    activeDotStyle: PropTypes.object\n  }), _class.defaultProps = _extends({}, Component.defaultProps, {\n    prefixCls: 'rc-slider',\n    className: '',\n    min: 0,\n    max: 100,\n    step: 1,\n    marks: {},\n    handle: function handle(_ref) {\n      var index = _ref.index,\n          restProps = _objectWithoutProperties(_ref, ['index']);\n\n      delete restProps.dragging;\n      return React.createElement(Handle, _extends({}, restProps, { key: index }));\n    },\n\n    onBeforeChange: noop,\n    onChange: noop,\n    onAfterChange: noop,\n    included: true,\n    disabled: false,\n    dots: false,\n    vertical: false,\n    trackStyle: [{}],\n    handleStyle: [{}],\n    railStyle: {},\n    dotStyle: {},\n    activeDotStyle: {}\n  }), _temp;\n}","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject        = require('./_to-object')\n  , $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function(){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key){\n  return $Object.getOwnPropertyDescriptor(it, key);\n};","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject                 = require('./_to-iobject')\n  , $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function(){\n  return function getOwnPropertyDescriptor(it, key){\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});","import addDOMEventListener from 'add-dom-event-listener';\nimport ReactDOM from 'react-dom';\n\nexport default function addEventListenerWrap(target, eventType, cb) {\n  /* eslint camelcase: 2 */\n  var callback = ReactDOM.unstable_batchedUpdates ? function run(e) {\n    ReactDOM.unstable_batchedUpdates(cb, e);\n  } : cb;\n  return addDOMEventListener(target, eventType, callback);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = addEventListener;\n\nvar _EventObject = require('./EventObject');\n\nvar _EventObject2 = _interopRequireDefault(_EventObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction addEventListener(target, eventType, callback) {\n  function wrapCallback(e) {\n    var ne = new _EventObject2[\"default\"](e);\n    callback.call(target, ne);\n  }\n\n  if (target.addEventListener) {\n    target.addEventListener(eventType, wrapCallback, false);\n    return {\n      remove: function remove() {\n        target.removeEventListener(eventType, wrapCallback, false);\n      }\n    };\n  } else if (target.attachEvent) {\n    target.attachEvent('on' + eventType, wrapCallback);\n    return {\n      remove: function remove() {\n        target.detachEvent('on' + eventType, wrapCallback);\n      }\n    };\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _EventBaseObject = require('./EventBaseObject');\n\nvar _EventBaseObject2 = _interopRequireDefault(_EventBaseObject);\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * @ignore\n * event object for dom\n * @author yiminghe@gmail.com\n */\n\nvar TRUE = true;\nvar FALSE = false;\nvar commonProps = ['altKey', 'bubbles', 'cancelable', 'ctrlKey', 'currentTarget', 'eventPhase', 'metaKey', 'shiftKey', 'target', 'timeStamp', 'view', 'type'];\n\nfunction isNullOrUndefined(w) {\n  return w === null || w === undefined;\n}\n\nvar eventNormalizers = [{\n  reg: /^key/,\n  props: ['char', 'charCode', 'key', 'keyCode', 'which'],\n  fix: function fix(event, nativeEvent) {\n    if (isNullOrUndefined(event.which)) {\n      event.which = !isNullOrUndefined(nativeEvent.charCode) ? nativeEvent.charCode : nativeEvent.keyCode;\n    }\n\n    // add metaKey to non-Mac browsers (use ctrl for PC 's and Meta for Macs)\n    if (event.metaKey === undefined) {\n      event.metaKey = event.ctrlKey;\n    }\n  }\n}, {\n  reg: /^touch/,\n  props: ['touches', 'changedTouches', 'targetTouches']\n}, {\n  reg: /^hashchange$/,\n  props: ['newURL', 'oldURL']\n}, {\n  reg: /^gesturechange$/i,\n  props: ['rotation', 'scale']\n}, {\n  reg: /^(mousewheel|DOMMouseScroll)$/,\n  props: [],\n  fix: function fix(event, nativeEvent) {\n    var deltaX = void 0;\n    var deltaY = void 0;\n    var delta = void 0;\n    var wheelDelta = nativeEvent.wheelDelta;\n    var axis = nativeEvent.axis;\n    var wheelDeltaY = nativeEvent.wheelDeltaY;\n    var wheelDeltaX = nativeEvent.wheelDeltaX;\n    var detail = nativeEvent.detail;\n\n    // ie/webkit\n    if (wheelDelta) {\n      delta = wheelDelta / 120;\n    }\n\n    // gecko\n    if (detail) {\n      // press control e.detail == 1 else e.detail == 3\n      delta = 0 - (detail % 3 === 0 ? detail / 3 : detail);\n    }\n\n    // Gecko\n    if (axis !== undefined) {\n      if (axis === event.HORIZONTAL_AXIS) {\n        deltaY = 0;\n        deltaX = 0 - delta;\n      } else if (axis === event.VERTICAL_AXIS) {\n        deltaX = 0;\n        deltaY = delta;\n      }\n    }\n\n    // Webkit\n    if (wheelDeltaY !== undefined) {\n      deltaY = wheelDeltaY / 120;\n    }\n    if (wheelDeltaX !== undefined) {\n      deltaX = -1 * wheelDeltaX / 120;\n    }\n\n    //  deltaY (ie)\n    if (!deltaX && !deltaY) {\n      deltaY = delta;\n    }\n\n    if (deltaX !== undefined) {\n      /**\n       * deltaX of mousewheel event\n       * @property deltaX\n       * @member Event.DomEvent.Object\n       */\n      event.deltaX = deltaX;\n    }\n\n    if (deltaY !== undefined) {\n      /**\n       * deltaY of mousewheel event\n       * @property deltaY\n       * @member Event.DomEvent.Object\n       */\n      event.deltaY = deltaY;\n    }\n\n    if (delta !== undefined) {\n      /**\n       * delta of mousewheel event\n       * @property delta\n       * @member Event.DomEvent.Object\n       */\n      event.delta = delta;\n    }\n  }\n}, {\n  reg: /^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,\n  props: ['buttons', 'clientX', 'clientY', 'button', 'offsetX', 'relatedTarget', 'which', 'fromElement', 'toElement', 'offsetY', 'pageX', 'pageY', 'screenX', 'screenY'],\n  fix: function fix(event, nativeEvent) {\n    var eventDoc = void 0;\n    var doc = void 0;\n    var body = void 0;\n    var target = event.target;\n    var button = nativeEvent.button;\n\n    // Calculate pageX/Y if missing and clientX/Y available\n    if (target && isNullOrUndefined(event.pageX) && !isNullOrUndefined(nativeEvent.clientX)) {\n      eventDoc = target.ownerDocument || document;\n      doc = eventDoc.documentElement;\n      body = eventDoc.body;\n      event.pageX = nativeEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n      event.pageY = nativeEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n    }\n\n    // which for click: 1 === left; 2 === middle; 3 === right\n    // do not use button\n    if (!event.which && button !== undefined) {\n      if (button & 1) {\n        event.which = 1;\n      } else if (button & 2) {\n        event.which = 3;\n      } else if (button & 4) {\n        event.which = 2;\n      } else {\n        event.which = 0;\n      }\n    }\n\n    // add relatedTarget, if necessary\n    if (!event.relatedTarget && event.fromElement) {\n      event.relatedTarget = event.fromElement === target ? event.toElement : event.fromElement;\n    }\n\n    return event;\n  }\n}];\n\nfunction retTrue() {\n  return TRUE;\n}\n\nfunction retFalse() {\n  return FALSE;\n}\n\nfunction DomEventObject(nativeEvent) {\n  var type = nativeEvent.type;\n\n  var isNative = typeof nativeEvent.stopPropagation === 'function' || typeof nativeEvent.cancelBubble === 'boolean';\n\n  _EventBaseObject2[\"default\"].call(this);\n\n  this.nativeEvent = nativeEvent;\n\n  // in case dom event has been mark as default prevented by lower dom node\n  var isDefaultPrevented = retFalse;\n  if ('defaultPrevented' in nativeEvent) {\n    isDefaultPrevented = nativeEvent.defaultPrevented ? retTrue : retFalse;\n  } else if ('getPreventDefault' in nativeEvent) {\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=691151\n    isDefaultPrevented = nativeEvent.getPreventDefault() ? retTrue : retFalse;\n  } else if ('returnValue' in nativeEvent) {\n    isDefaultPrevented = nativeEvent.returnValue === FALSE ? retTrue : retFalse;\n  }\n\n  this.isDefaultPrevented = isDefaultPrevented;\n\n  var fixFns = [];\n  var fixFn = void 0;\n  var l = void 0;\n  var prop = void 0;\n  var props = commonProps.concat();\n\n  eventNormalizers.forEach(function (normalizer) {\n    if (type.match(normalizer.reg)) {\n      props = props.concat(normalizer.props);\n      if (normalizer.fix) {\n        fixFns.push(normalizer.fix);\n      }\n    }\n  });\n\n  l = props.length;\n\n  // clone properties of the original event object\n  while (l) {\n    prop = props[--l];\n    this[prop] = nativeEvent[prop];\n  }\n\n  // fix target property, if necessary\n  if (!this.target && isNative) {\n    this.target = nativeEvent.srcElement || document; // srcElement might not be defined either\n  }\n\n  // check if target is a text node (safari)\n  if (this.target && this.target.nodeType === 3) {\n    this.target = this.target.parentNode;\n  }\n\n  l = fixFns.length;\n\n  while (l) {\n    fixFn = fixFns[--l];\n    fixFn(this, nativeEvent);\n  }\n\n  this.timeStamp = nativeEvent.timeStamp || Date.now();\n}\n\nvar EventBaseObjectProto = _EventBaseObject2[\"default\"].prototype;\n\n(0, _objectAssign2[\"default\"])(DomEventObject.prototype, EventBaseObjectProto, {\n  constructor: DomEventObject,\n\n  preventDefault: function preventDefault() {\n    var e = this.nativeEvent;\n\n    // if preventDefault exists run it on the original event\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      // otherwise set the returnValue property of the original event to FALSE (IE)\n      e.returnValue = FALSE;\n    }\n\n    EventBaseObjectProto.preventDefault.call(this);\n  },\n  stopPropagation: function stopPropagation() {\n    var e = this.nativeEvent;\n\n    // if stopPropagation exists run it on the original event\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    } else {\n      // otherwise set the cancelBubble property of the original event to TRUE (IE)\n      e.cancelBubble = TRUE;\n    }\n\n    EventBaseObjectProto.stopPropagation.call(this);\n  }\n});\n\nexports[\"default\"] = DomEventObject;\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * @ignore\n * base event object for custom and dom event.\n * @author yiminghe@gmail.com\n */\n\nfunction returnFalse() {\n  return false;\n}\n\nfunction returnTrue() {\n  return true;\n}\n\nfunction EventBaseObject() {\n  this.timeStamp = Date.now();\n  this.target = undefined;\n  this.currentTarget = undefined;\n}\n\nEventBaseObject.prototype = {\n  isEventObject: 1,\n\n  constructor: EventBaseObject,\n\n  isDefaultPrevented: returnFalse,\n\n  isPropagationStopped: returnFalse,\n\n  isImmediatePropagationStopped: returnFalse,\n\n  preventDefault: function preventDefault() {\n    this.isDefaultPrevented = returnTrue;\n  },\n  stopPropagation: function stopPropagation() {\n    this.isPropagationStopped = returnTrue;\n  },\n  stopImmediatePropagation: function stopImmediatePropagation() {\n    this.isImmediatePropagationStopped = returnTrue;\n    // fixed 1.2\n    // call stopPropagation implicitly\n    this.stopPropagation();\n  },\n  halt: function halt(immediate) {\n    if (immediate) {\n      this.stopImmediatePropagation();\n    } else {\n      this.stopPropagation();\n    }\n    this.preventDefault();\n  }\n};\n\nexports[\"default\"] = EventBaseObject;\nmodule.exports = exports['default'];","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport classNames from 'classnames';\nimport warning from 'warning';\n\nvar calcPoints = function calcPoints(vertical, marks, dots, step, min, max) {\n  warning(dots ? step > 0 : true, '`Slider[step]` should be a positive number in order to make Slider[dots] work.');\n  var points = Object.keys(marks).map(parseFloat);\n  if (dots) {\n    for (var i = min; i <= max; i = i + step) {\n      if (points.indexOf(i) >= 0) continue;\n      points.push(i);\n    }\n  }\n  return points;\n};\n\nvar Steps = function Steps(_ref) {\n  var prefixCls = _ref.prefixCls,\n      vertical = _ref.vertical,\n      marks = _ref.marks,\n      dots = _ref.dots,\n      step = _ref.step,\n      included = _ref.included,\n      lowerBound = _ref.lowerBound,\n      upperBound = _ref.upperBound,\n      max = _ref.max,\n      min = _ref.min,\n      dotStyle = _ref.dotStyle,\n      activeDotStyle = _ref.activeDotStyle;\n\n  var range = max - min;\n  var elements = calcPoints(vertical, marks, dots, step, min, max).map(function (point) {\n    var _classNames;\n\n    var offset = Math.abs(point - min) / range * 100 + '%';\n\n    var isActived = !included && point === upperBound || included && point <= upperBound && point >= lowerBound;\n    var style = vertical ? _extends({ bottom: offset }, dotStyle) : _extends({ left: offset }, dotStyle);\n    if (isActived) {\n      style = _extends({}, style, activeDotStyle);\n    }\n\n    var pointClassName = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls + '-dot', true), _defineProperty(_classNames, prefixCls + '-dot-active', isActived), _classNames));\n\n    return React.createElement('span', { className: pointClassName, style: style, key: point });\n  });\n\n  return React.createElement(\n    'div',\n    { className: prefixCls + '-step' },\n    elements\n  );\n};\n\nexport default Steps;","import _extends from 'babel-runtime/helpers/extends';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport React from 'react';\nimport classNames from 'classnames';\n\nvar Marks = function Marks(_ref) {\n  var className = _ref.className,\n      vertical = _ref.vertical,\n      marks = _ref.marks,\n      included = _ref.included,\n      upperBound = _ref.upperBound,\n      lowerBound = _ref.lowerBound,\n      max = _ref.max,\n      min = _ref.min;\n\n  var marksKeys = Object.keys(marks);\n  var marksCount = marksKeys.length;\n  var unit = marksCount > 1 ? 100 / (marksCount - 1) : 100;\n  var markWidth = unit * 0.9;\n\n  var range = max - min;\n  var elements = marksKeys.map(parseFloat).sort(function (a, b) {\n    return a - b;\n  }).map(function (point) {\n    var _classNames;\n\n    var isActive = !included && point === upperBound || included && point <= upperBound && point >= lowerBound;\n    var markClassName = classNames((_classNames = {}, _defineProperty(_classNames, className + '-text', true), _defineProperty(_classNames, className + '-text-active', isActive), _classNames));\n\n    var bottomStyle = {\n      marginBottom: '-50%',\n      bottom: (point - min) / range * 100 + '%'\n    };\n\n    var leftStyle = {\n      width: markWidth + '%',\n      marginLeft: -markWidth / 2 + '%',\n      left: (point - min) / range * 100 + '%'\n    };\n\n    var style = vertical ? bottomStyle : leftStyle;\n\n    var markPoint = marks[point];\n    var markPointIsObject = (typeof markPoint === 'undefined' ? 'undefined' : _typeof(markPoint)) === 'object' && !React.isValidElement(markPoint);\n    var markLabel = markPointIsObject ? markPoint.label : markPoint;\n    var markStyle = markPointIsObject ? _extends({}, style, markPoint.style) : style;\n    return React.createElement(\n      'span',\n      {\n        className: markClassName,\n        style: markStyle,\n        key: point\n      },\n      markLabel\n    );\n  });\n\n  return React.createElement(\n    'div',\n    { className: className },\n    elements\n  );\n};\n\nexport default Marks;","import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nvar Handle = function (_React$Component) {\n  _inherits(Handle, _React$Component);\n\n  function Handle() {\n    _classCallCheck(this, Handle);\n\n    return _possibleConstructorReturn(this, (Handle.__proto__ || Object.getPrototypeOf(Handle)).apply(this, arguments));\n  }\n\n  _createClass(Handle, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          className = _props.className,\n          vertical = _props.vertical,\n          offset = _props.offset,\n          style = _props.style,\n          disabled = _props.disabled,\n          min = _props.min,\n          max = _props.max,\n          value = _props.value,\n          restProps = _objectWithoutProperties(_props, ['className', 'vertical', 'offset', 'style', 'disabled', 'min', 'max', 'value']);\n\n      var postionStyle = vertical ? { bottom: offset + '%' } : { left: offset + '%' };\n      var elStyle = _extends({}, style, postionStyle);\n      var ariaProps = {};\n      if (value !== undefined) {\n        ariaProps = _extends({}, ariaProps, {\n          'aria-valuemin': min,\n          'aria-valuemax': max,\n          'aria-valuenow': value,\n          'aria-disabled': !!disabled\n        });\n      }\n      return React.createElement('div', _extends({\n        role: 'slider',\n        tabIndex: '0'\n      }, ariaProps, restProps, {\n        className: className,\n        style: elStyle\n      }));\n    }\n  }]);\n\n  return Handle;\n}(React.Component);\n\nexport default Handle;\n\n\nHandle.propTypes = {\n  className: PropTypes.string,\n  vertical: PropTypes.bool,\n  offset: PropTypes.number,\n  style: PropTypes.object,\n  disabled: PropTypes.bool,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  value: PropTypes.number\n};","import _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport { findDOMNode } from 'react-dom';\nimport keyCode from 'rc-util/es/KeyCode';\n\nexport function isEventFromHandle(e, handles) {\n  return Object.keys(handles).some(function (key) {\n    return e.target === findDOMNode(handles[key]);\n  });\n}\n\nexport function isValueOutOfRange(value, _ref) {\n  var min = _ref.min,\n      max = _ref.max;\n\n  return value < min || value > max;\n}\n\nexport function isNotTouchEvent(e) {\n  return e.touches.length > 1 || e.type.toLowerCase() === 'touchend' && e.touches.length > 0;\n}\n\nexport function getClosestPoint(val, _ref2) {\n  var marks = _ref2.marks,\n      step = _ref2.step,\n      min = _ref2.min;\n\n  var points = Object.keys(marks).map(parseFloat);\n  if (step !== null) {\n    var closestStep = Math.round((val - min) / step) * step + min;\n    points.push(closestStep);\n  }\n  var diffs = points.map(function (point) {\n    return Math.abs(val - point);\n  });\n  return points[diffs.indexOf(Math.min.apply(Math, _toConsumableArray(diffs)))];\n}\n\nexport function getPrecision(step) {\n  var stepString = step.toString();\n  var precision = 0;\n  if (stepString.indexOf('.') >= 0) {\n    precision = stepString.length - stepString.indexOf('.') - 1;\n  }\n  return precision;\n}\n\nexport function getMousePosition(vertical, e) {\n  return vertical ? e.clientY : e.pageX;\n}\n\nexport function getTouchPosition(vertical, e) {\n  return vertical ? e.touches[0].clientY : e.touches[0].pageX;\n}\n\nexport function getHandleCenterPosition(vertical, handle) {\n  var coords = handle.getBoundingClientRect();\n  return vertical ? coords.top + coords.height * 0.5 : coords.left + coords.width * 0.5;\n}\n\nexport function ensureValueInRange(val, _ref3) {\n  var max = _ref3.max,\n      min = _ref3.min;\n\n  if (val <= min) {\n    return min;\n  }\n  if (val >= max) {\n    return max;\n  }\n  return val;\n}\n\nexport function ensureValuePrecision(val, props) {\n  var step = props.step;\n\n  var closestPoint = getClosestPoint(val, props);\n  return step === null ? closestPoint : parseFloat(closestPoint.toFixed(getPrecision(step)));\n}\n\nexport function pauseEvent(e) {\n  e.stopPropagation();\n  e.preventDefault();\n}\n\nexport function getKeyboardValueMutator(e) {\n  switch (e.keyCode) {\n    case keyCode.UP:\n    case keyCode.RIGHT:\n      return function (value, props) {\n        return value + props.step;\n      };\n\n    case keyCode.DOWN:\n    case keyCode.LEFT:\n      return function (value, props) {\n        return value - props.step;\n      };\n\n    case keyCode.END:\n      return function (value, props) {\n        return props.max;\n      };\n    case keyCode.HOME:\n      return function (value, props) {\n        return props.min;\n      };\n    case keyCode.PAGE_UP:\n      return function (value, props) {\n        return value + props.step * 2;\n      };\n    case keyCode.PAGE_DOWN:\n      return function (value, props) {\n        return value - props.step * 2;\n      };\n\n    default:\n      return undefined;\n  }\n}","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};","'use strict';\nvar $defineProperty = require('./_object-dp')\n  , createDesc      = require('./_property-desc');\n\nmodule.exports = function(object, index, value){\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};","/**\n * @ignore\n * some key-codes definition and utils from closure-library\n * @author yiminghe@gmail.com\n */\n\nvar KeyCode = {\n  /**\n   * MAC_ENTER\n   */\n  MAC_ENTER: 3,\n  /**\n   * BACKSPACE\n   */\n  BACKSPACE: 8,\n  /**\n   * TAB\n   */\n  TAB: 9,\n  /**\n   * NUMLOCK on FF/Safari Mac\n   */\n  NUM_CENTER: 12, // NUMLOCK on FF/Safari Mac\n  /**\n   * ENTER\n   */\n  ENTER: 13,\n  /**\n   * SHIFT\n   */\n  SHIFT: 16,\n  /**\n   * CTRL\n   */\n  CTRL: 17,\n  /**\n   * ALT\n   */\n  ALT: 18,\n  /**\n   * PAUSE\n   */\n  PAUSE: 19,\n  /**\n   * CAPS_LOCK\n   */\n  CAPS_LOCK: 20,\n  /**\n   * ESC\n   */\n  ESC: 27,\n  /**\n   * SPACE\n   */\n  SPACE: 32,\n  /**\n   * PAGE_UP\n   */\n  PAGE_UP: 33, // also NUM_NORTH_EAST\n  /**\n   * PAGE_DOWN\n   */\n  PAGE_DOWN: 34, // also NUM_SOUTH_EAST\n  /**\n   * END\n   */\n  END: 35, // also NUM_SOUTH_WEST\n  /**\n   * HOME\n   */\n  HOME: 36, // also NUM_NORTH_WEST\n  /**\n   * LEFT\n   */\n  LEFT: 37, // also NUM_WEST\n  /**\n   * UP\n   */\n  UP: 38, // also NUM_NORTH\n  /**\n   * RIGHT\n   */\n  RIGHT: 39, // also NUM_EAST\n  /**\n   * DOWN\n   */\n  DOWN: 40, // also NUM_SOUTH\n  /**\n   * PRINT_SCREEN\n   */\n  PRINT_SCREEN: 44,\n  /**\n   * INSERT\n   */\n  INSERT: 45, // also NUM_INSERT\n  /**\n   * DELETE\n   */\n  DELETE: 46, // also NUM_DELETE\n  /**\n   * ZERO\n   */\n  ZERO: 48,\n  /**\n   * ONE\n   */\n  ONE: 49,\n  /**\n   * TWO\n   */\n  TWO: 50,\n  /**\n   * THREE\n   */\n  THREE: 51,\n  /**\n   * FOUR\n   */\n  FOUR: 52,\n  /**\n   * FIVE\n   */\n  FIVE: 53,\n  /**\n   * SIX\n   */\n  SIX: 54,\n  /**\n   * SEVEN\n   */\n  SEVEN: 55,\n  /**\n   * EIGHT\n   */\n  EIGHT: 56,\n  /**\n   * NINE\n   */\n  NINE: 57,\n  /**\n   * QUESTION_MARK\n   */\n  QUESTION_MARK: 63, // needs localization\n  /**\n   * A\n   */\n  A: 65,\n  /**\n   * B\n   */\n  B: 66,\n  /**\n   * C\n   */\n  C: 67,\n  /**\n   * D\n   */\n  D: 68,\n  /**\n   * E\n   */\n  E: 69,\n  /**\n   * F\n   */\n  F: 70,\n  /**\n   * G\n   */\n  G: 71,\n  /**\n   * H\n   */\n  H: 72,\n  /**\n   * I\n   */\n  I: 73,\n  /**\n   * J\n   */\n  J: 74,\n  /**\n   * K\n   */\n  K: 75,\n  /**\n   * L\n   */\n  L: 76,\n  /**\n   * M\n   */\n  M: 77,\n  /**\n   * N\n   */\n  N: 78,\n  /**\n   * O\n   */\n  O: 79,\n  /**\n   * P\n   */\n  P: 80,\n  /**\n   * Q\n   */\n  Q: 81,\n  /**\n   * R\n   */\n  R: 82,\n  /**\n   * S\n   */\n  S: 83,\n  /**\n   * T\n   */\n  T: 84,\n  /**\n   * U\n   */\n  U: 85,\n  /**\n   * V\n   */\n  V: 86,\n  /**\n   * W\n   */\n  W: 87,\n  /**\n   * X\n   */\n  X: 88,\n  /**\n   * Y\n   */\n  Y: 89,\n  /**\n   * Z\n   */\n  Z: 90,\n  /**\n   * META\n   */\n  META: 91, // WIN_KEY_LEFT\n  /**\n   * WIN_KEY_RIGHT\n   */\n  WIN_KEY_RIGHT: 92,\n  /**\n   * CONTEXT_MENU\n   */\n  CONTEXT_MENU: 93,\n  /**\n   * NUM_ZERO\n   */\n  NUM_ZERO: 96,\n  /**\n   * NUM_ONE\n   */\n  NUM_ONE: 97,\n  /**\n   * NUM_TWO\n   */\n  NUM_TWO: 98,\n  /**\n   * NUM_THREE\n   */\n  NUM_THREE: 99,\n  /**\n   * NUM_FOUR\n   */\n  NUM_FOUR: 100,\n  /**\n   * NUM_FIVE\n   */\n  NUM_FIVE: 101,\n  /**\n   * NUM_SIX\n   */\n  NUM_SIX: 102,\n  /**\n   * NUM_SEVEN\n   */\n  NUM_SEVEN: 103,\n  /**\n   * NUM_EIGHT\n   */\n  NUM_EIGHT: 104,\n  /**\n   * NUM_NINE\n   */\n  NUM_NINE: 105,\n  /**\n   * NUM_MULTIPLY\n   */\n  NUM_MULTIPLY: 106,\n  /**\n   * NUM_PLUS\n   */\n  NUM_PLUS: 107,\n  /**\n   * NUM_MINUS\n   */\n  NUM_MINUS: 109,\n  /**\n   * NUM_PERIOD\n   */\n  NUM_PERIOD: 110,\n  /**\n   * NUM_DIVISION\n   */\n  NUM_DIVISION: 111,\n  /**\n   * F1\n   */\n  F1: 112,\n  /**\n   * F2\n   */\n  F2: 113,\n  /**\n   * F3\n   */\n  F3: 114,\n  /**\n   * F4\n   */\n  F4: 115,\n  /**\n   * F5\n   */\n  F5: 116,\n  /**\n   * F6\n   */\n  F6: 117,\n  /**\n   * F7\n   */\n  F7: 118,\n  /**\n   * F8\n   */\n  F8: 119,\n  /**\n   * F9\n   */\n  F9: 120,\n  /**\n   * F10\n   */\n  F10: 121,\n  /**\n   * F11\n   */\n  F11: 122,\n  /**\n   * F12\n   */\n  F12: 123,\n  /**\n   * NUMLOCK\n   */\n  NUMLOCK: 144,\n  /**\n   * SEMICOLON\n   */\n  SEMICOLON: 186, // needs localization\n  /**\n   * DASH\n   */\n  DASH: 189, // needs localization\n  /**\n   * EQUALS\n   */\n  EQUALS: 187, // needs localization\n  /**\n   * COMMA\n   */\n  COMMA: 188, // needs localization\n  /**\n   * PERIOD\n   */\n  PERIOD: 190, // needs localization\n  /**\n   * SLASH\n   */\n  SLASH: 191, // needs localization\n  /**\n   * APOSTROPHE\n   */\n  APOSTROPHE: 192, // needs localization\n  /**\n   * SINGLE_QUOTE\n   */\n  SINGLE_QUOTE: 222, // needs localization\n  /**\n   * OPEN_SQUARE_BRACKET\n   */\n  OPEN_SQUARE_BRACKET: 219, // needs localization\n  /**\n   * BACKSLASH\n   */\n  BACKSLASH: 220, // needs localization\n  /**\n   * CLOSE_SQUARE_BRACKET\n   */\n  CLOSE_SQUARE_BRACKET: 221, // needs localization\n  /**\n   * WIN_KEY\n   */\n  WIN_KEY: 224,\n  /**\n   * MAC_FF_META\n   */\n  MAC_FF_META: 224, // Firefox (Gecko) fires this for the meta key instead of 91\n  /**\n   * WIN_IME\n   */\n  WIN_IME: 229\n};\n\n/*\n whether text and modified key is entered at the same time.\n */\nKeyCode.isTextModifyingKeyEvent = function isTextModifyingKeyEvent(e) {\n  var keyCode = e.keyCode;\n  if (e.altKey && !e.ctrlKey || e.metaKey ||\n  // Function keys don't generate text\n  keyCode >= KeyCode.F1 && keyCode <= KeyCode.F12) {\n    return false;\n  }\n\n  // The following keys are quite harmless, even in combination with\n  // CTRL, ALT or SHIFT.\n  switch (keyCode) {\n    case KeyCode.ALT:\n    case KeyCode.CAPS_LOCK:\n    case KeyCode.CONTEXT_MENU:\n    case KeyCode.CTRL:\n    case KeyCode.DOWN:\n    case KeyCode.END:\n    case KeyCode.ESC:\n    case KeyCode.HOME:\n    case KeyCode.INSERT:\n    case KeyCode.LEFT:\n    case KeyCode.MAC_FF_META:\n    case KeyCode.META:\n    case KeyCode.NUMLOCK:\n    case KeyCode.NUM_CENTER:\n    case KeyCode.PAGE_DOWN:\n    case KeyCode.PAGE_UP:\n    case KeyCode.PAUSE:\n    case KeyCode.PRINT_SCREEN:\n    case KeyCode.RIGHT:\n    case KeyCode.SHIFT:\n    case KeyCode.UP:\n    case KeyCode.WIN_KEY:\n    case KeyCode.WIN_KEY_RIGHT:\n      return false;\n    default:\n      return true;\n  }\n};\n\n/*\n whether character is entered.\n */\nKeyCode.isCharacterKey = function isCharacterKey(keyCode) {\n  if (keyCode >= KeyCode.ZERO && keyCode <= KeyCode.NINE) {\n    return true;\n  }\n\n  if (keyCode >= KeyCode.NUM_ZERO && keyCode <= KeyCode.NUM_MULTIPLY) {\n    return true;\n  }\n\n  if (keyCode >= KeyCode.A && keyCode <= KeyCode.Z) {\n    return true;\n  }\n\n  // Safari sends zero key code for non-latin characters.\n  if (window.navigation.userAgent.indexOf('WebKit') !== -1 && keyCode === 0) {\n    return true;\n  }\n\n  switch (keyCode) {\n    case KeyCode.SPACE:\n    case KeyCode.QUESTION_MARK:\n    case KeyCode.NUM_PLUS:\n    case KeyCode.NUM_MINUS:\n    case KeyCode.NUM_PERIOD:\n    case KeyCode.NUM_DIVISION:\n    case KeyCode.SEMICOLON:\n    case KeyCode.DASH:\n    case KeyCode.EQUALS:\n    case KeyCode.COMMA:\n    case KeyCode.PERIOD:\n    case KeyCode.SLASH:\n    case KeyCode.APOSTROPHE:\n    case KeyCode.SINGLE_QUOTE:\n    case KeyCode.OPEN_SQUARE_BRACKET:\n    case KeyCode.BACKSLASH:\n    case KeyCode.CLOSE_SQUARE_BRACKET:\n      return true;\n    default:\n      return false;\n  }\n};\n\nexport default KeyCode;","import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n/* eslint-disable react/prop-types */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shallowEqual from 'shallowequal';\nimport warning from 'warning';\nimport Track from './common/Track';\nimport createSlider from './common/createSlider';\nimport * as utils from './utils';\n\nvar Range = function (_React$Component) {\n  _inherits(Range, _React$Component);\n\n  function Range(props) {\n    _classCallCheck(this, Range);\n\n    var _this = _possibleConstructorReturn(this, (Range.__proto__ || Object.getPrototypeOf(Range)).call(this, props));\n\n    _this.onEnd = function () {\n      _this.setState({ handle: null });\n      _this.removeDocumentEvents();\n      _this.props.onAfterChange(_this.getValue());\n    };\n\n    var count = props.count,\n        min = props.min,\n        max = props.max;\n\n    var initialValue = Array.apply(null, Array(count + 1)).map(function () {\n      return min;\n    });\n    var defaultValue = 'defaultValue' in props ? props.defaultValue : initialValue;\n    var value = props.value !== undefined ? props.value : defaultValue;\n    var bounds = value.map(function (v) {\n      return _this.trimAlignValue(v);\n    });\n    var recent = bounds[0] === max ? 0 : bounds.length - 1;\n\n    _this.state = {\n      handle: null,\n      recent: recent,\n      bounds: bounds\n    };\n    return _this;\n  }\n\n  _createClass(Range, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      if (!('value' in nextProps || 'min' in nextProps || 'max' in nextProps)) return;\n      if (this.props.min === nextProps.min && this.props.max === nextProps.max && shallowEqual(this.props.value, nextProps.value)) {\n        return;\n      }\n      var bounds = this.state.bounds;\n\n      var value = nextProps.value || bounds;\n      var nextBounds = value.map(function (v) {\n        return _this2.trimAlignValue(v, nextProps);\n      });\n      if (nextBounds.length === bounds.length && nextBounds.every(function (v, i) {\n        return v === bounds[i];\n      })) return;\n\n      this.setState({ bounds: nextBounds });\n      if (bounds.some(function (v) {\n        return utils.isValueOutOfRange(v, nextProps);\n      })) {\n        this.props.onChange(nextBounds);\n      }\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange(state) {\n      var props = this.props;\n      var isNotControlled = !('value' in props);\n      if (isNotControlled) {\n        this.setState(state);\n      } else if (state.handle !== undefined) {\n        this.setState({ handle: state.handle });\n      }\n\n      var data = _extends({}, this.state, state);\n      var changedValue = data.bounds;\n      props.onChange(changedValue);\n    }\n  }, {\n    key: 'onStart',\n    value: function onStart(position) {\n      var props = this.props;\n      var state = this.state;\n      var bounds = this.getValue();\n      props.onBeforeChange(bounds);\n\n      var value = this.calcValueByPos(position);\n      this.startValue = value;\n      this.startPosition = position;\n\n      var closestBound = this.getClosestBound(value);\n      var boundNeedMoving = this.getBoundNeedMoving(value, closestBound);\n\n      this.setState({\n        handle: boundNeedMoving,\n        recent: boundNeedMoving\n      });\n\n      var prevValue = bounds[boundNeedMoving];\n      if (value === prevValue) return;\n\n      var nextBounds = [].concat(_toConsumableArray(state.bounds));\n      nextBounds[boundNeedMoving] = value;\n      this.onChange({ bounds: nextBounds });\n    }\n  }, {\n    key: 'onMove',\n    value: function onMove(e, position) {\n      utils.pauseEvent(e);\n      var props = this.props;\n      var state = this.state;\n\n      var value = this.calcValueByPos(position);\n      var oldValue = state.bounds[state.handle];\n      if (value === oldValue) return;\n\n      var nextBounds = [].concat(_toConsumableArray(state.bounds));\n      nextBounds[state.handle] = value;\n      var nextHandle = state.handle;\n      if (props.pushable !== false) {\n        var originalValue = state.bounds[nextHandle];\n        this.pushSurroundingHandles(nextBounds, nextHandle, originalValue);\n      } else if (props.allowCross) {\n        nextBounds.sort(function (a, b) {\n          return a - b;\n        });\n        nextHandle = nextBounds.indexOf(value);\n      }\n      this.onChange({\n        handle: nextHandle,\n        bounds: nextBounds\n      });\n    }\n  }, {\n    key: 'onKeyboard',\n    value: function onKeyboard() {\n      warning(true, 'Keyboard support is not yet supported for ranges.');\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      return this.state.bounds;\n    }\n  }, {\n    key: 'getClosestBound',\n    value: function getClosestBound(value) {\n      var bounds = this.state.bounds;\n\n      var closestBound = 0;\n      for (var i = 1; i < bounds.length - 1; ++i) {\n        if (value > bounds[i]) {\n          closestBound = i;\n        }\n      }\n      if (Math.abs(bounds[closestBound + 1] - value) < Math.abs(bounds[closestBound] - value)) {\n        closestBound = closestBound + 1;\n      }\n      return closestBound;\n    }\n  }, {\n    key: 'getBoundNeedMoving',\n    value: function getBoundNeedMoving(value, closestBound) {\n      var _state = this.state,\n          bounds = _state.bounds,\n          recent = _state.recent;\n\n      var boundNeedMoving = closestBound;\n      var isAtTheSamePoint = bounds[closestBound + 1] === bounds[closestBound];\n      if (isAtTheSamePoint) {\n        boundNeedMoving = recent;\n      }\n\n      if (isAtTheSamePoint && value !== bounds[closestBound + 1]) {\n        boundNeedMoving = value < bounds[closestBound + 1] ? closestBound : closestBound + 1;\n      }\n      return boundNeedMoving;\n    }\n  }, {\n    key: 'getLowerBound',\n    value: function getLowerBound() {\n      return this.state.bounds[0];\n    }\n  }, {\n    key: 'getUpperBound',\n    value: function getUpperBound() {\n      var bounds = this.state.bounds;\n\n      return bounds[bounds.length - 1];\n    }\n\n    /**\n     * Returns an array of possible slider points, taking into account both\n     * `marks` and `step`. The result is cached.\n     */\n\n  }, {\n    key: 'getPoints',\n    value: function getPoints() {\n      var _props = this.props,\n          marks = _props.marks,\n          step = _props.step,\n          min = _props.min,\n          max = _props.max;\n\n      var cache = this._getPointsCache;\n      if (!cache || cache.marks !== marks || cache.step !== step) {\n        var pointsObject = _extends({}, marks);\n        if (step !== null) {\n          for (var point = min; point <= max; point += step) {\n            pointsObject[point] = point;\n          }\n        }\n        var points = Object.keys(pointsObject).map(parseFloat);\n        points.sort(function (a, b) {\n          return a - b;\n        });\n        this._getPointsCache = { marks: marks, step: step, points: points };\n      }\n      return this._getPointsCache.points;\n    }\n  }, {\n    key: 'pushSurroundingHandles',\n    value: function pushSurroundingHandles(bounds, handle, originalValue) {\n      var threshold = this.props.pushable;\n\n      var value = bounds[handle];\n\n      var direction = 0;\n      if (bounds[handle + 1] - value < threshold) {\n        direction = +1; // push to right\n      }\n      if (value - bounds[handle - 1] < threshold) {\n        direction = -1; // push to left\n      }\n\n      if (direction === 0) {\n        return;\n      }\n\n      var nextHandle = handle + direction;\n      var diffToNext = direction * (bounds[nextHandle] - value);\n      if (!this.pushHandle(bounds, nextHandle, direction, threshold - diffToNext)) {\n        // revert to original value if pushing is impossible\n        bounds[handle] = originalValue;\n      }\n    }\n  }, {\n    key: 'pushHandle',\n    value: function pushHandle(bounds, handle, direction, amount) {\n      var originalValue = bounds[handle];\n      var currentValue = bounds[handle];\n      while (direction * (currentValue - originalValue) < amount) {\n        if (!this.pushHandleOnePoint(bounds, handle, direction)) {\n          // can't push handle enough to create the needed `amount` gap, so we\n          // revert its position to the original value\n          bounds[handle] = originalValue;\n          return false;\n        }\n        currentValue = bounds[handle];\n      }\n      // the handle was pushed enough to create the needed `amount` gap\n      return true;\n    }\n  }, {\n    key: 'pushHandleOnePoint',\n    value: function pushHandleOnePoint(bounds, handle, direction) {\n      var points = this.getPoints();\n      var pointIndex = points.indexOf(bounds[handle]);\n      var nextPointIndex = pointIndex + direction;\n      if (nextPointIndex >= points.length || nextPointIndex < 0) {\n        // reached the minimum or maximum available point, can't push anymore\n        return false;\n      }\n      var nextHandle = handle + direction;\n      var nextValue = points[nextPointIndex];\n      var threshold = this.props.pushable;\n\n      var diffToNext = direction * (bounds[nextHandle] - nextValue);\n      if (!this.pushHandle(bounds, nextHandle, direction, threshold - diffToNext)) {\n        // couldn't push next handle, so we won't push this one either\n        return false;\n      }\n      // push the handle\n      bounds[handle] = nextValue;\n      return true;\n    }\n  }, {\n    key: 'trimAlignValue',\n    value: function trimAlignValue(v) {\n      var nextProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var mergedProps = _extends({}, this.props, nextProps);\n      var valInRange = utils.ensureValueInRange(v, mergedProps);\n      var valNotConflict = this.ensureValueNotConflict(valInRange, mergedProps);\n      return utils.ensureValuePrecision(valNotConflict, mergedProps);\n    }\n  }, {\n    key: 'ensureValueNotConflict',\n    value: function ensureValueNotConflict(val, _ref) {\n      var allowCross = _ref.allowCross;\n\n      var state = this.state || {};\n      var handle = state.handle,\n          bounds = state.bounds;\n      /* eslint-disable eqeqeq */\n\n      if (!allowCross && handle != null) {\n        if (handle > 0 && val <= bounds[handle - 1]) {\n          return bounds[handle - 1];\n        }\n        if (handle < bounds.length - 1 && val >= bounds[handle + 1]) {\n          return bounds[handle + 1];\n        }\n      }\n      /* eslint-enable eqeqeq */\n      return val;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var _state2 = this.state,\n          handle = _state2.handle,\n          bounds = _state2.bounds;\n      var _props2 = this.props,\n          prefixCls = _props2.prefixCls,\n          vertical = _props2.vertical,\n          included = _props2.included,\n          disabled = _props2.disabled,\n          min = _props2.min,\n          max = _props2.max,\n          handleGenerator = _props2.handle,\n          trackStyle = _props2.trackStyle,\n          handleStyle = _props2.handleStyle;\n\n\n      var offsets = bounds.map(function (v) {\n        return _this3.calcOffset(v);\n      });\n\n      var handleClassName = prefixCls + '-handle';\n      var handles = bounds.map(function (v, i) {\n        var _classNames;\n\n        return handleGenerator({\n          className: classNames((_classNames = {}, _defineProperty(_classNames, handleClassName, true), _defineProperty(_classNames, handleClassName + '-' + (i + 1), true), _classNames)),\n          vertical: vertical,\n          offset: offsets[i],\n          value: v,\n          dragging: handle === i,\n          index: i,\n          min: min,\n          max: max,\n          disabled: disabled,\n          style: handleStyle[i],\n          ref: function ref(h) {\n            return _this3.saveHandle(i, h);\n          }\n        });\n      });\n\n      var tracks = bounds.slice(0, -1).map(function (_, index) {\n        var _classNames2;\n\n        var i = index + 1;\n        var trackClassName = classNames((_classNames2 = {}, _defineProperty(_classNames2, prefixCls + '-track', true), _defineProperty(_classNames2, prefixCls + '-track-' + i, true), _classNames2));\n        return React.createElement(Track, {\n          className: trackClassName,\n          vertical: vertical,\n          included: included,\n          offset: offsets[i - 1],\n          length: offsets[i] - offsets[i - 1],\n          style: trackStyle[index],\n          key: i\n        });\n      });\n\n      return { tracks: tracks, handles: handles };\n    }\n  }]);\n\n  return Range;\n}(React.Component);\n\nRange.displayName = 'Range';\nRange.propTypes = {\n  defaultValue: PropTypes.arrayOf(PropTypes.number),\n  value: PropTypes.arrayOf(PropTypes.number),\n  count: PropTypes.number,\n  pushable: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  allowCross: PropTypes.bool,\n  disabled: PropTypes.bool\n};\nRange.defaultProps = {\n  count: 1,\n  allowCross: true,\n  pushable: false\n};\n\n\nexport default createSlider(Range);","module.exports = function shallowEqual(objA, objB, compare, compareContext) {\n\n    var ret = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n    if(ret !== void 0) {\n        return !!ret;\n    }\n\n    if(objA === objB) {\n        return true;\n    }\n\n    if(typeof objA !== 'object' || !objA ||\n       typeof objB !== 'object' || !objB) {\n        return false;\n    }\n\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB);\n\n    if(keysA.length !== keysB.length) {\n        return false;\n    }\n\n    var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n    // Test for A's keys different from B.\n    for(var idx = 0; idx < keysA.length; idx++) {\n\n        var key = keysA[idx];\n\n        if(!bHasOwnProperty(key)) {\n            return false;\n        }\n\n        var valueA = objA[key];\n        var valueB = objB[key];\n\n        ret = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n        if(ret === false ||\n           ret === void 0 && valueA !== valueB) {\n            return false;\n        }\n\n    }\n\n    return true;\n\n};\n","import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from 'rc-tooltip';\nimport Handle from './Handle';\n\nexport default function createSliderWithTooltip(Component) {\n  var _class, _temp;\n\n  return _temp = _class = function (_React$Component) {\n    _inherits(ComponentWrapper, _React$Component);\n\n    function ComponentWrapper(props) {\n      _classCallCheck(this, ComponentWrapper);\n\n      var _this = _possibleConstructorReturn(this, (ComponentWrapper.__proto__ || Object.getPrototypeOf(ComponentWrapper)).call(this, props));\n\n      _this.handleTooltipVisibleChange = function (index, visible) {\n        _this.setState(function (prevState) {\n          return {\n            visibles: _extends({}, prevState.visibles, _defineProperty({}, index, visible))\n          };\n        });\n      };\n\n      _this.handleWithTooltip = function (_ref) {\n        var value = _ref.value,\n            dragging = _ref.dragging,\n            index = _ref.index,\n            disabled = _ref.disabled,\n            restProps = _objectWithoutProperties(_ref, ['value', 'dragging', 'index', 'disabled']);\n\n        var _this$props = _this.props,\n            tipFormatter = _this$props.tipFormatter,\n            tipProps = _this$props.tipProps,\n            handleStyle = _this$props.handleStyle;\n\n        var _tipProps$prefixCls = tipProps.prefixCls,\n            prefixCls = _tipProps$prefixCls === undefined ? 'rc-slider-tooltip' : _tipProps$prefixCls,\n            _tipProps$overlay = tipProps.overlay,\n            overlay = _tipProps$overlay === undefined ? tipFormatter(value) : _tipProps$overlay,\n            _tipProps$placement = tipProps.placement,\n            placement = _tipProps$placement === undefined ? 'top' : _tipProps$placement,\n            restTooltipProps = _objectWithoutProperties(tipProps, ['prefixCls', 'overlay', 'placement']);\n\n        return React.createElement(\n          Tooltip,\n          _extends({}, restTooltipProps, {\n            prefixCls: prefixCls,\n            overlay: overlay,\n            placement: placement,\n            visible: !disabled && (_this.state.visibles[index] || dragging),\n            key: index\n          }),\n          React.createElement(Handle, _extends({}, restProps, {\n            style: _extends({}, handleStyle[0]),\n            value: value,\n            onMouseEnter: function onMouseEnter() {\n              return _this.handleTooltipVisibleChange(index, true);\n            },\n            onMouseLeave: function onMouseLeave() {\n              return _this.handleTooltipVisibleChange(index, false);\n            }\n          }))\n        );\n      };\n\n      _this.state = { visibles: {} };\n      return _this;\n    }\n\n    _createClass(ComponentWrapper, [{\n      key: 'render',\n      value: function render() {\n        return React.createElement(Component, _extends({}, this.props, { handle: this.handleWithTooltip }));\n      }\n    }]);\n\n    return ComponentWrapper;\n  }(React.Component), _class.propTypes = {\n    tipFormatter: PropTypes.func,\n    handleStyle: PropTypes.arrayOf(PropTypes.object),\n    tipProps: PropTypes.object\n  }, _class.defaultProps = {\n    tipFormatter: function tipFormatter(value) {\n      return value;\n    },\n\n    handleStyle: [{}],\n    tipProps: {}\n  }, _temp;\n}","import Tooltip from './Tooltip';\n\nexport default Tooltip;","import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Trigger from 'rc-trigger';\nimport { placements } from './placements';\n\nvar Tooltip = function (_Component) {\n  _inherits(Tooltip, _Component);\n\n  function Tooltip() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Tooltip);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Tooltip.__proto__ || Object.getPrototypeOf(Tooltip)).call.apply(_ref, [this].concat(args))), _this), _this.getPopupElement = function () {\n      var _this$props = _this.props,\n          arrowContent = _this$props.arrowContent,\n          overlay = _this$props.overlay,\n          prefixCls = _this$props.prefixCls;\n\n      return [React.createElement(\n        'div',\n        { className: prefixCls + '-arrow', key: 'arrow' },\n        arrowContent\n      ), React.createElement(\n        'div',\n        { className: prefixCls + '-inner', key: 'content' },\n        typeof overlay === 'function' ? overlay() : overlay\n      )];\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Tooltip, [{\n    key: 'getPopupDomNode',\n    value: function getPopupDomNode() {\n      return this.refs.trigger.getPopupDomNode();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          overlayClassName = _props.overlayClassName,\n          trigger = _props.trigger,\n          mouseEnterDelay = _props.mouseEnterDelay,\n          mouseLeaveDelay = _props.mouseLeaveDelay,\n          overlayStyle = _props.overlayStyle,\n          prefixCls = _props.prefixCls,\n          children = _props.children,\n          onVisibleChange = _props.onVisibleChange,\n          afterVisibleChange = _props.afterVisibleChange,\n          transitionName = _props.transitionName,\n          animation = _props.animation,\n          placement = _props.placement,\n          align = _props.align,\n          destroyTooltipOnHide = _props.destroyTooltipOnHide,\n          defaultVisible = _props.defaultVisible,\n          getTooltipContainer = _props.getTooltipContainer,\n          restProps = _objectWithoutProperties(_props, ['overlayClassName', 'trigger', 'mouseEnterDelay', 'mouseLeaveDelay', 'overlayStyle', 'prefixCls', 'children', 'onVisibleChange', 'afterVisibleChange', 'transitionName', 'animation', 'placement', 'align', 'destroyTooltipOnHide', 'defaultVisible', 'getTooltipContainer']);\n\n      var extraProps = _extends({}, restProps);\n      if ('visible' in this.props) {\n        extraProps.popupVisible = this.props.visible;\n      }\n      return React.createElement(\n        Trigger,\n        _extends({\n          popupClassName: overlayClassName,\n          ref: 'trigger',\n          prefixCls: prefixCls,\n          popup: this.getPopupElement,\n          action: trigger,\n          builtinPlacements: placements,\n          popupPlacement: placement,\n          popupAlign: align,\n          getPopupContainer: getTooltipContainer,\n          onPopupVisibleChange: onVisibleChange,\n          afterPopupVisibleChange: afterVisibleChange,\n          popupTransitionName: transitionName,\n          popupAnimation: animation,\n          defaultPopupVisible: defaultVisible,\n          destroyPopupOnHide: destroyTooltipOnHide,\n          mouseLeaveDelay: mouseLeaveDelay,\n          popupStyle: overlayStyle,\n          mouseEnterDelay: mouseEnterDelay\n        }, extraProps),\n        children\n      );\n    }\n  }]);\n\n  return Tooltip;\n}(Component);\n\nTooltip.propTypes = {\n  trigger: PropTypes.any,\n  children: PropTypes.any,\n  defaultVisible: PropTypes.bool,\n  visible: PropTypes.bool,\n  placement: PropTypes.string,\n  transitionName: PropTypes.string,\n  animation: PropTypes.any,\n  onVisibleChange: PropTypes.func,\n  afterVisibleChange: PropTypes.func,\n  overlay: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  overlayStyle: PropTypes.object,\n  overlayClassName: PropTypes.string,\n  prefixCls: PropTypes.string,\n  mouseEnterDelay: PropTypes.number,\n  mouseLeaveDelay: PropTypes.number,\n  getTooltipContainer: PropTypes.func,\n  destroyTooltipOnHide: PropTypes.bool,\n  align: PropTypes.object,\n  arrowContent: PropTypes.any\n};\nTooltip.defaultProps = {\n  prefixCls: 'rc-tooltip',\n  mouseEnterDelay: 0,\n  destroyTooltipOnHide: false,\n  mouseLeaveDelay: 0.1,\n  align: {},\n  placement: 'right',\n  trigger: ['hover'],\n  arrowContent: null\n};\n\n\nexport default Tooltip;","import _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport createReactClass from 'create-react-class';\nimport contains from 'rc-util/es/Dom/contains';\nimport addEventListener from 'rc-util/lib/Dom/addEventListener';\nimport Popup from './Popup';\nimport { getAlignFromPlacement, getPopupClassNameFromAlign as _getPopupClassNameFromAlign } from './utils';\nimport getContainerRenderMixin from 'rc-util/lib/getContainerRenderMixin';\n\nfunction noop() {}\n\nfunction returnEmptyString() {\n  return '';\n}\n\nfunction returnDocument() {\n  return window.document;\n}\n\nvar ALL_HANDLERS = ['onClick', 'onMouseDown', 'onTouchStart', 'onMouseEnter', 'onMouseLeave', 'onFocus', 'onBlur'];\n\nvar Trigger = createReactClass({\n  displayName: 'Trigger',\n  propTypes: {\n    children: PropTypes.any,\n    action: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n    showAction: PropTypes.any,\n    hideAction: PropTypes.any,\n    getPopupClassNameFromAlign: PropTypes.any,\n    onPopupVisibleChange: PropTypes.func,\n    afterPopupVisibleChange: PropTypes.func,\n    popup: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n    popupStyle: PropTypes.object,\n    prefixCls: PropTypes.string,\n    popupClassName: PropTypes.string,\n    popupPlacement: PropTypes.string,\n    builtinPlacements: PropTypes.object,\n    popupTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    popupAnimation: PropTypes.any,\n    mouseEnterDelay: PropTypes.number,\n    mouseLeaveDelay: PropTypes.number,\n    zIndex: PropTypes.number,\n    focusDelay: PropTypes.number,\n    blurDelay: PropTypes.number,\n    getPopupContainer: PropTypes.func,\n    getDocument: PropTypes.func,\n    destroyPopupOnHide: PropTypes.bool,\n    mask: PropTypes.bool,\n    maskClosable: PropTypes.bool,\n    onPopupAlign: PropTypes.func,\n    popupAlign: PropTypes.object,\n    popupVisible: PropTypes.bool,\n    maskTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    maskAnimation: PropTypes.string\n  },\n\n  mixins: [getContainerRenderMixin({\n    autoMount: false,\n\n    isVisible: function isVisible(instance) {\n      return instance.state.popupVisible;\n    },\n    getContainer: function getContainer(instance) {\n      var props = instance.props;\n\n      var popupContainer = document.createElement('div');\n                  popupContainer.style.position = 'absolute';\n      popupContainer.style.top = '0';\n      popupContainer.style.left = '0';\n      popupContainer.style.width = '100%';\n      var mountNode = props.getPopupContainer ? props.getPopupContainer(findDOMNode(instance)) : props.getDocument().body;\n      mountNode.appendChild(popupContainer);\n      return popupContainer;\n    }\n  })],\n\n  getDefaultProps: function getDefaultProps() {\n    return {\n      prefixCls: 'rc-trigger-popup',\n      getPopupClassNameFromAlign: returnEmptyString,\n      getDocument: returnDocument,\n      onPopupVisibleChange: noop,\n      afterPopupVisibleChange: noop,\n      onPopupAlign: noop,\n      popupClassName: '',\n      mouseEnterDelay: 0,\n      mouseLeaveDelay: 0.1,\n      focusDelay: 0,\n      blurDelay: 0.15,\n      popupStyle: {},\n      destroyPopupOnHide: false,\n      popupAlign: {},\n      defaultPopupVisible: false,\n      mask: false,\n      maskClosable: true,\n      action: [],\n      showAction: [],\n      hideAction: []\n    };\n  },\n  getInitialState: function getInitialState() {\n    var props = this.props;\n    var popupVisible = void 0;\n    if ('popupVisible' in props) {\n      popupVisible = !!props.popupVisible;\n    } else {\n      popupVisible = !!props.defaultPopupVisible;\n    }\n    return {\n      popupVisible: popupVisible\n    };\n  },\n  componentWillMount: function componentWillMount() {\n    var _this = this;\n\n    ALL_HANDLERS.forEach(function (h) {\n      _this['fire' + h] = function (e) {\n        _this.fireEvents(h, e);\n      };\n    });\n  },\n  componentDidMount: function componentDidMount() {\n    this.componentDidUpdate({}, {\n      popupVisible: this.state.popupVisible\n    });\n  },\n  componentWillReceiveProps: function componentWillReceiveProps(_ref) {\n    var popupVisible = _ref.popupVisible;\n\n    if (popupVisible !== undefined) {\n      this.setState({\n        popupVisible: popupVisible\n      });\n    }\n  },\n  componentDidUpdate: function componentDidUpdate(_, prevState) {\n    var props = this.props;\n    var state = this.state;\n    this.renderComponent(null, function () {\n      if (prevState.popupVisible !== state.popupVisible) {\n        props.afterPopupVisibleChange(state.popupVisible);\n      }\n    });\n\n                    if (state.popupVisible) {\n      var currentDocument = void 0;\n      if (!this.clickOutsideHandler && this.isClickToHide()) {\n        currentDocument = props.getDocument();\n        this.clickOutsideHandler = addEventListener(currentDocument, 'mousedown', this.onDocumentClick);\n      }\n            if (!this.touchOutsideHandler) {\n        currentDocument = currentDocument || props.getDocument();\n        this.touchOutsideHandler = addEventListener(currentDocument, 'touchstart', this.onDocumentClick);\n      }\n      return;\n    }\n\n    this.clearOutsideHandler();\n  },\n  componentWillUnmount: function componentWillUnmount() {\n    this.clearDelayTimer();\n    this.clearOutsideHandler();\n  },\n  onMouseEnter: function onMouseEnter(e) {\n    this.fireEvents('onMouseEnter', e);\n    this.delaySetPopupVisible(true, this.props.mouseEnterDelay);\n  },\n  onMouseLeave: function onMouseLeave(e) {\n    this.fireEvents('onMouseLeave', e);\n    this.delaySetPopupVisible(false, this.props.mouseLeaveDelay);\n  },\n  onPopupMouseEnter: function onPopupMouseEnter() {\n    this.clearDelayTimer();\n  },\n  onPopupMouseLeave: function onPopupMouseLeave(e) {\n            if (e.relatedTarget && !e.relatedTarget.setTimeout && this._component && contains(this._component.getPopupDomNode(), e.relatedTarget)) {\n      return;\n    }\n    this.delaySetPopupVisible(false, this.props.mouseLeaveDelay);\n  },\n  onFocus: function onFocus(e) {\n    this.fireEvents('onFocus', e);\n        this.clearDelayTimer();\n    if (this.isFocusToShow()) {\n      this.focusTime = Date.now();\n      this.delaySetPopupVisible(true, this.props.focusDelay);\n    }\n  },\n  onMouseDown: function onMouseDown(e) {\n    this.fireEvents('onMouseDown', e);\n    this.preClickTime = Date.now();\n  },\n  onTouchStart: function onTouchStart(e) {\n    this.fireEvents('onTouchStart', e);\n    this.preTouchTime = Date.now();\n  },\n  onBlur: function onBlur(e) {\n    this.fireEvents('onBlur', e);\n    this.clearDelayTimer();\n    if (this.isBlurToHide()) {\n      this.delaySetPopupVisible(false, this.props.blurDelay);\n    }\n  },\n  onClick: function onClick(event) {\n    this.fireEvents('onClick', event);\n        if (this.focusTime) {\n      var preTime = void 0;\n      if (this.preClickTime && this.preTouchTime) {\n        preTime = Math.min(this.preClickTime, this.preTouchTime);\n      } else if (this.preClickTime) {\n        preTime = this.preClickTime;\n      } else if (this.preTouchTime) {\n        preTime = this.preTouchTime;\n      }\n      if (Math.abs(preTime - this.focusTime) < 20) {\n        return;\n      }\n      this.focusTime = 0;\n    }\n    this.preClickTime = 0;\n    this.preTouchTime = 0;\n    event.preventDefault();\n    var nextVisible = !this.state.popupVisible;\n    if (this.isClickToHide() && !nextVisible || nextVisible && this.isClickToShow()) {\n      this.setPopupVisible(!this.state.popupVisible);\n    }\n  },\n  onDocumentClick: function onDocumentClick(event) {\n    if (this.props.mask && !this.props.maskClosable) {\n      return;\n    }\n    var target = event.target;\n    var root = findDOMNode(this);\n    var popupNode = this.getPopupDomNode();\n    if (!contains(root, target) && !contains(popupNode, target)) {\n      this.close();\n    }\n  },\n  getPopupDomNode: function getPopupDomNode() {\n        if (this._component && this._component.getPopupDomNode) {\n      return this._component.getPopupDomNode();\n    }\n    return null;\n  },\n  getRootDomNode: function getRootDomNode() {\n    return findDOMNode(this);\n  },\n  getPopupClassNameFromAlign: function getPopupClassNameFromAlign(align) {\n    var className = [];\n    var props = this.props;\n    var popupPlacement = props.popupPlacement,\n        builtinPlacements = props.builtinPlacements,\n        prefixCls = props.prefixCls;\n\n    if (popupPlacement && builtinPlacements) {\n      className.push(_getPopupClassNameFromAlign(builtinPlacements, prefixCls, align));\n    }\n    if (props.getPopupClassNameFromAlign) {\n      className.push(props.getPopupClassNameFromAlign(align));\n    }\n    return className.join(' ');\n  },\n  getPopupAlign: function getPopupAlign() {\n    var props = this.props;\n    var popupPlacement = props.popupPlacement,\n        popupAlign = props.popupAlign,\n        builtinPlacements = props.builtinPlacements;\n\n    if (popupPlacement && builtinPlacements) {\n      return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);\n    }\n    return popupAlign;\n  },\n  getComponent: function getComponent() {\n    var props = this.props,\n        state = this.state;\n\n    var mouseProps = {};\n    if (this.isMouseEnterToShow()) {\n      mouseProps.onMouseEnter = this.onPopupMouseEnter;\n    }\n    if (this.isMouseLeaveToHide()) {\n      mouseProps.onMouseLeave = this.onPopupMouseLeave;\n    }\n    return React.createElement(\n      Popup,\n      _extends({\n        prefixCls: props.prefixCls,\n        destroyPopupOnHide: props.destroyPopupOnHide,\n        visible: state.popupVisible,\n        className: props.popupClassName,\n        action: props.action,\n        align: this.getPopupAlign(),\n        onAlign: props.onPopupAlign,\n        animation: props.popupAnimation,\n        getClassNameFromAlign: this.getPopupClassNameFromAlign\n      }, mouseProps, {\n        getRootDomNode: this.getRootDomNode,\n        style: props.popupStyle,\n        mask: props.mask,\n        zIndex: props.zIndex,\n        transitionName: props.popupTransitionName,\n        maskAnimation: props.maskAnimation,\n        maskTransitionName: props.maskTransitionName\n      }),\n      typeof props.popup === 'function' ? props.popup() : props.popup\n    );\n  },\n  setPopupVisible: function setPopupVisible(popupVisible) {\n    this.clearDelayTimer();\n    if (this.state.popupVisible !== popupVisible) {\n      if (!('popupVisible' in this.props)) {\n        this.setState({\n          popupVisible: popupVisible\n        });\n      }\n      this.props.onPopupVisibleChange(popupVisible);\n    }\n  },\n  delaySetPopupVisible: function delaySetPopupVisible(visible, delayS) {\n    var _this2 = this;\n\n    var delay = delayS * 1000;\n    this.clearDelayTimer();\n    if (delay) {\n      this.delayTimer = setTimeout(function () {\n        _this2.setPopupVisible(visible);\n        _this2.clearDelayTimer();\n      }, delay);\n    } else {\n      this.setPopupVisible(visible);\n    }\n  },\n  clearDelayTimer: function clearDelayTimer() {\n    if (this.delayTimer) {\n      clearTimeout(this.delayTimer);\n      this.delayTimer = null;\n    }\n  },\n  clearOutsideHandler: function clearOutsideHandler() {\n    if (this.clickOutsideHandler) {\n      this.clickOutsideHandler.remove();\n      this.clickOutsideHandler = null;\n    }\n\n    if (this.touchOutsideHandler) {\n      this.touchOutsideHandler.remove();\n      this.touchOutsideHandler = null;\n    }\n  },\n  createTwoChains: function createTwoChains(event) {\n    var childPros = this.props.children.props;\n    var props = this.props;\n    if (childPros[event] && props[event]) {\n      return this['fire' + event];\n    }\n    return childPros[event] || props[event];\n  },\n  isClickToShow: function isClickToShow() {\n    var _props = this.props,\n        action = _props.action,\n        showAction = _props.showAction;\n\n    return action.indexOf('click') !== -1 || showAction.indexOf('click') !== -1;\n  },\n  isClickToHide: function isClickToHide() {\n    var _props2 = this.props,\n        action = _props2.action,\n        hideAction = _props2.hideAction;\n\n    return action.indexOf('click') !== -1 || hideAction.indexOf('click') !== -1;\n  },\n  isMouseEnterToShow: function isMouseEnterToShow() {\n    var _props3 = this.props,\n        action = _props3.action,\n        showAction = _props3.showAction;\n\n    return action.indexOf('hover') !== -1 || showAction.indexOf('mouseEnter') !== -1;\n  },\n  isMouseLeaveToHide: function isMouseLeaveToHide() {\n    var _props4 = this.props,\n        action = _props4.action,\n        hideAction = _props4.hideAction;\n\n    return action.indexOf('hover') !== -1 || hideAction.indexOf('mouseLeave') !== -1;\n  },\n  isFocusToShow: function isFocusToShow() {\n    var _props5 = this.props,\n        action = _props5.action,\n        showAction = _props5.showAction;\n\n    return action.indexOf('focus') !== -1 || showAction.indexOf('focus') !== -1;\n  },\n  isBlurToHide: function isBlurToHide() {\n    var _props6 = this.props,\n        action = _props6.action,\n        hideAction = _props6.hideAction;\n\n    return action.indexOf('focus') !== -1 || hideAction.indexOf('blur') !== -1;\n  },\n  forcePopupAlign: function forcePopupAlign() {\n    if (this.state.popupVisible && this._component && this._component.alignInstance) {\n      this._component.alignInstance.forceAlign();\n    }\n  },\n  fireEvents: function fireEvents(type, e) {\n    var childCallback = this.props.children.props[type];\n    if (childCallback) {\n      childCallback(e);\n    }\n    var callback = this.props[type];\n    if (callback) {\n      callback(e);\n    }\n  },\n  close: function close() {\n    this.setPopupVisible(false);\n  },\n  render: function render() {\n    var props = this.props;\n    var children = props.children;\n    var child = React.Children.only(children);\n    var newChildProps = {};\n    if (this.isClickToHide() || this.isClickToShow()) {\n      newChildProps.onClick = this.onClick;\n      newChildProps.onMouseDown = this.onMouseDown;\n      newChildProps.onTouchStart = this.onTouchStart;\n    } else {\n      newChildProps.onClick = this.createTwoChains('onClick');\n      newChildProps.onMouseDown = this.createTwoChains('onMouseDown');\n      newChildProps.onTouchStart = this.createTwoChains('onTouchStart');\n    }\n    if (this.isMouseEnterToShow()) {\n      newChildProps.onMouseEnter = this.onMouseEnter;\n    } else {\n      newChildProps.onMouseEnter = this.createTwoChains('onMouseEnter');\n    }\n    if (this.isMouseLeaveToHide()) {\n      newChildProps.onMouseLeave = this.onMouseLeave;\n    } else {\n      newChildProps.onMouseLeave = this.createTwoChains('onMouseLeave');\n    }\n    if (this.isFocusToShow() || this.isBlurToHide()) {\n      newChildProps.onFocus = this.onFocus;\n      newChildProps.onBlur = this.onBlur;\n    } else {\n      newChildProps.onFocus = this.createTwoChains('onFocus');\n      newChildProps.onBlur = this.createTwoChains('onBlur');\n    }\n\n    return React.cloneElement(child, newChildProps);\n  }\n});\n\nexport default Trigger;","/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n */\n\n'use strict';\n\nvar React = require('react');\nvar factory = require('./factory');\n\nif (typeof React === 'undefined') {\n  throw Error(\n    'create-react-class could not find the React object. If you are using script tags, ' +\n      'make sure that React is being loaded before create-react-class.'\n  );\n}\n\n// Hack to grab NoopUpdateQueue from isomorphic React\nvar ReactNoopUpdateQueue = new React.Component().updater;\n\nmodule.exports = factory(\n  React.Component,\n  React.isValidElement,\n  ReactNoopUpdateQueue\n);\n","/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n */\n\n'use strict';\n\nvar _assign = require('object-assign');\n\nvar emptyObject = require('fbjs/lib/emptyObject');\nvar _invariant = require('fbjs/lib/invariant');\n\nif (process.env.NODE_ENV !== 'production') {\n  var warning = require('fbjs/lib/warning');\n}\n\nvar MIXINS_KEY = 'mixins';\n\n// Helper function to allow the creation of anonymous functions which do not\n// have .name set to the name of the variable being assigned to.\nfunction identity(fn) {\n  return fn;\n}\n\nvar ReactPropTypeLocationNames;\nif (process.env.NODE_ENV !== 'production') {\n  ReactPropTypeLocationNames = {\n    prop: 'prop',\n    context: 'context',\n    childContext: 'child context'\n  };\n} else {\n  ReactPropTypeLocationNames = {};\n}\n\nfunction factory(ReactComponent, isValidElement, ReactNoopUpdateQueue) {\n  /**\n   * Policies that describe methods in `ReactClassInterface`.\n   */\n\n  var injectedMixins = [];\n\n  /**\n   * Composite components are higher-level components that compose other composite\n   * or host components.\n   *\n   * To create a new type of `ReactClass`, pass a specification of\n   * your new class to `React.createClass`. The only requirement of your class\n   * specification is that you implement a `render` method.\n   *\n   *   var MyComponent = React.createClass({\n   *     render: function() {\n   *       return <div>Hello World</div>;\n   *     }\n   *   });\n   *\n   * The class specification supports a specific protocol of methods that have\n   * special meaning (e.g. `render`). See `ReactClassInterface` for\n   * more the comprehensive protocol. Any other properties and methods in the\n   * class specification will be available on the prototype.\n   *\n   * @interface ReactClassInterface\n   * @internal\n   */\n  var ReactClassInterface = {\n    /**\n     * An array of Mixin objects to include when defining your component.\n     *\n     * @type {array}\n     * @optional\n     */\n    mixins: 'DEFINE_MANY',\n\n    /**\n     * An object containing properties and methods that should be defined on\n     * the component's constructor instead of its prototype (static methods).\n     *\n     * @type {object}\n     * @optional\n     */\n    statics: 'DEFINE_MANY',\n\n    /**\n     * Definition of prop types for this component.\n     *\n     * @type {object}\n     * @optional\n     */\n    propTypes: 'DEFINE_MANY',\n\n    /**\n     * Definition of context types for this component.\n     *\n     * @type {object}\n     * @optional\n     */\n    contextTypes: 'DEFINE_MANY',\n\n    /**\n     * Definition of context types this component sets for its children.\n     *\n     * @type {object}\n     * @optional\n     */\n    childContextTypes: 'DEFINE_MANY',\n\n    // ==== Definition methods ====\n\n    /**\n     * Invoked when the component is mounted. Values in the mapping will be set on\n     * `this.props` if that prop is not specified (i.e. using an `in` check).\n     *\n     * This method is invoked before `getInitialState` and therefore cannot rely\n     * on `this.state` or use `this.setState`.\n     *\n     * @return {object}\n     * @optional\n     */\n    getDefaultProps: 'DEFINE_MANY_MERGED',\n\n    /**\n     * Invoked once before the component is mounted. The return value will be used\n     * as the initial value of `this.state`.\n     *\n     *   getInitialState: function() {\n     *     return {\n     *       isOn: false,\n     *       fooBaz: new BazFoo()\n     *     }\n     *   }\n     *\n     * @return {object}\n     * @optional\n     */\n    getInitialState: 'DEFINE_MANY_MERGED',\n\n    /**\n     * @return {object}\n     * @optional\n     */\n    getChildContext: 'DEFINE_MANY_MERGED',\n\n    /**\n     * Uses props from `this.props` and state from `this.state` to render the\n     * structure of the component.\n     *\n     * No guarantees are made about when or how often this method is invoked, so\n     * it must not have side effects.\n     *\n     *   render: function() {\n     *     var name = this.props.name;\n     *     return <div>Hello, {name}!</div>;\n     *   }\n     *\n     * @return {ReactComponent}\n     * @required\n     */\n    render: 'DEFINE_ONCE',\n\n    // ==== Delegate methods ====\n\n    /**\n     * Invoked when the component is initially created and about to be mounted.\n     * This may have side effects, but any external subscriptions or data created\n     * by this method must be cleaned up in `componentWillUnmount`.\n     *\n     * @optional\n     */\n    componentWillMount: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component has been mounted and has a DOM representation.\n     * However, there is no guarantee that the DOM node is in the document.\n     *\n     * Use this as an opportunity to operate on the DOM when the component has\n     * been mounted (initialized and rendered) for the first time.\n     *\n     * @param {DOMElement} rootNode DOM element representing the component.\n     * @optional\n     */\n    componentDidMount: 'DEFINE_MANY',\n\n    /**\n     * Invoked before the component receives new props.\n     *\n     * Use this as an opportunity to react to a prop transition by updating the\n     * state using `this.setState`. Current props are accessed via `this.props`.\n     *\n     *   componentWillReceiveProps: function(nextProps, nextContext) {\n     *     this.setState({\n     *       likesIncreasing: nextProps.likeCount > this.props.likeCount\n     *     });\n     *   }\n     *\n     * NOTE: There is no equivalent `componentWillReceiveState`. An incoming prop\n     * transition may cause a state change, but the opposite is not true. If you\n     * need it, you are probably looking for `componentWillUpdate`.\n     *\n     * @param {object} nextProps\n     * @optional\n     */\n    componentWillReceiveProps: 'DEFINE_MANY',\n\n    /**\n     * Invoked while deciding if the component should be updated as a result of\n     * receiving new props, state and/or context.\n     *\n     * Use this as an opportunity to `return false` when you're certain that the\n     * transition to the new props/state/context will not require a component\n     * update.\n     *\n     *   shouldComponentUpdate: function(nextProps, nextState, nextContext) {\n     *     return !equal(nextProps, this.props) ||\n     *       !equal(nextState, this.state) ||\n     *       !equal(nextContext, this.context);\n     *   }\n     *\n     * @param {object} nextProps\n     * @param {?object} nextState\n     * @param {?object} nextContext\n     * @return {boolean} True if the component should update.\n     * @optional\n     */\n    shouldComponentUpdate: 'DEFINE_ONCE',\n\n    /**\n     * Invoked when the component is about to update due to a transition from\n     * `this.props`, `this.state` and `this.context` to `nextProps`, `nextState`\n     * and `nextContext`.\n     *\n     * Use this as an opportunity to perform preparation before an update occurs.\n     *\n     * NOTE: You **cannot** use `this.setState()` in this method.\n     *\n     * @param {object} nextProps\n     * @param {?object} nextState\n     * @param {?object} nextContext\n     * @param {ReactReconcileTransaction} transaction\n     * @optional\n     */\n    componentWillUpdate: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component's DOM representation has been updated.\n     *\n     * Use this as an opportunity to operate on the DOM when the component has\n     * been updated.\n     *\n     * @param {object} prevProps\n     * @param {?object} prevState\n     * @param {?object} prevContext\n     * @param {DOMElement} rootNode DOM element representing the component.\n     * @optional\n     */\n    componentDidUpdate: 'DEFINE_MANY',\n\n    /**\n     * Invoked when the component is about to be removed from its parent and have\n     * its DOM representation destroyed.\n     *\n     * Use this as an opportunity to deallocate any external resources.\n     *\n     * NOTE: There is no `componentDidUnmount` since your component will have been\n     * destroyed by that point.\n     *\n     * @optional\n     */\n    componentWillUnmount: 'DEFINE_MANY',\n\n    // ==== Advanced methods ====\n\n    /**\n     * Updates the component's currently mounted DOM representation.\n     *\n     * By default, this implements React's rendering and reconciliation algorithm.\n     * Sophisticated clients may wish to override this.\n     *\n     * @param {ReactReconcileTransaction} transaction\n     * @internal\n     * @overridable\n     */\n    updateComponent: 'OVERRIDE_BASE'\n  };\n\n  /**\n   * Mapping from class specification keys to special processing functions.\n   *\n   * Although these are declared like instance properties in the specification\n   * when defining classes using `React.createClass`, they are actually static\n   * and are accessible on the constructor instead of the prototype. Despite\n   * being static, they must be defined outside of the \"statics\" key under\n   * which all other static methods are defined.\n   */\n  var RESERVED_SPEC_KEYS = {\n    displayName: function(Constructor, displayName) {\n      Constructor.displayName = displayName;\n    },\n    mixins: function(Constructor, mixins) {\n      if (mixins) {\n        for (var i = 0; i < mixins.length; i++) {\n          mixSpecIntoComponent(Constructor, mixins[i]);\n        }\n      }\n    },\n    childContextTypes: function(Constructor, childContextTypes) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateTypeDef(Constructor, childContextTypes, 'childContext');\n      }\n      Constructor.childContextTypes = _assign(\n        {},\n        Constructor.childContextTypes,\n        childContextTypes\n      );\n    },\n    contextTypes: function(Constructor, contextTypes) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateTypeDef(Constructor, contextTypes, 'context');\n      }\n      Constructor.contextTypes = _assign(\n        {},\n        Constructor.contextTypes,\n        contextTypes\n      );\n    },\n    /**\n     * Special case getDefaultProps which should move into statics but requires\n     * automatic merging.\n     */\n    getDefaultProps: function(Constructor, getDefaultProps) {\n      if (Constructor.getDefaultProps) {\n        Constructor.getDefaultProps = createMergedResultFunction(\n          Constructor.getDefaultProps,\n          getDefaultProps\n        );\n      } else {\n        Constructor.getDefaultProps = getDefaultProps;\n      }\n    },\n    propTypes: function(Constructor, propTypes) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateTypeDef(Constructor, propTypes, 'prop');\n      }\n      Constructor.propTypes = _assign({}, Constructor.propTypes, propTypes);\n    },\n    statics: function(Constructor, statics) {\n      mixStaticSpecIntoComponent(Constructor, statics);\n    },\n    autobind: function() {}\n  };\n\n  function validateTypeDef(Constructor, typeDef, location) {\n    for (var propName in typeDef) {\n      if (typeDef.hasOwnProperty(propName)) {\n        // use a warning instead of an _invariant so components\n        // don't show up in prod but only in __DEV__\n        if (process.env.NODE_ENV !== 'production') {\n          warning(\n            typeof typeDef[propName] === 'function',\n            '%s: %s type `%s` is invalid; it must be a function, usually from ' +\n              'React.PropTypes.',\n            Constructor.displayName || 'ReactClass',\n            ReactPropTypeLocationNames[location],\n            propName\n          );\n        }\n      }\n    }\n  }\n\n  function validateMethodOverride(isAlreadyDefined, name) {\n    var specPolicy = ReactClassInterface.hasOwnProperty(name)\n      ? ReactClassInterface[name]\n      : null;\n\n    // Disallow overriding of base class methods unless explicitly allowed.\n    if (ReactClassMixin.hasOwnProperty(name)) {\n      _invariant(\n        specPolicy === 'OVERRIDE_BASE',\n        'ReactClassInterface: You are attempting to override ' +\n          '`%s` from your class specification. Ensure that your method names ' +\n          'do not overlap with React methods.',\n        name\n      );\n    }\n\n    // Disallow defining methods more than once unless explicitly allowed.\n    if (isAlreadyDefined) {\n      _invariant(\n        specPolicy === 'DEFINE_MANY' || specPolicy === 'DEFINE_MANY_MERGED',\n        'ReactClassInterface: You are attempting to define ' +\n          '`%s` on your component more than once. This conflict may be due ' +\n          'to a mixin.',\n        name\n      );\n    }\n  }\n\n  /**\n   * Mixin helper which handles policy validation and reserved\n   * specification keys when building React classes.\n   */\n  function mixSpecIntoComponent(Constructor, spec) {\n    if (!spec) {\n      if (process.env.NODE_ENV !== 'production') {\n        var typeofSpec = typeof spec;\n        var isMixinValid = typeofSpec === 'object' && spec !== null;\n\n        if (process.env.NODE_ENV !== 'production') {\n          warning(\n            isMixinValid,\n            \"%s: You're attempting to include a mixin that is either null \" +\n              'or not an object. Check the mixins included by the component, ' +\n              'as well as any mixins they include themselves. ' +\n              'Expected object but got %s.',\n            Constructor.displayName || 'ReactClass',\n            spec === null ? null : typeofSpec\n          );\n        }\n      }\n\n      return;\n    }\n\n    _invariant(\n      typeof spec !== 'function',\n      \"ReactClass: You're attempting to \" +\n        'use a component class or function as a mixin. Instead, just use a ' +\n        'regular object.'\n    );\n    _invariant(\n      !isValidElement(spec),\n      \"ReactClass: You're attempting to \" +\n        'use a component as a mixin. Instead, just use a regular object.'\n    );\n\n    var proto = Constructor.prototype;\n    var autoBindPairs = proto.__reactAutoBindPairs;\n\n    // By handling mixins before any other properties, we ensure the same\n    // chaining order is applied to methods with DEFINE_MANY policy, whether\n    // mixins are listed before or after these methods in the spec.\n    if (spec.hasOwnProperty(MIXINS_KEY)) {\n      RESERVED_SPEC_KEYS.mixins(Constructor, spec.mixins);\n    }\n\n    for (var name in spec) {\n      if (!spec.hasOwnProperty(name)) {\n        continue;\n      }\n\n      if (name === MIXINS_KEY) {\n        // We have already handled mixins in a special case above.\n        continue;\n      }\n\n      var property = spec[name];\n      var isAlreadyDefined = proto.hasOwnProperty(name);\n      validateMethodOverride(isAlreadyDefined, name);\n\n      if (RESERVED_SPEC_KEYS.hasOwnProperty(name)) {\n        RESERVED_SPEC_KEYS[name](Constructor, property);\n      } else {\n        // Setup methods on prototype:\n        // The following member methods should not be automatically bound:\n        // 1. Expected ReactClass methods (in the \"interface\").\n        // 2. Overridden methods (that were mixed in).\n        var isReactClassMethod = ReactClassInterface.hasOwnProperty(name);\n        var isFunction = typeof property === 'function';\n        var shouldAutoBind =\n          isFunction &&\n          !isReactClassMethod &&\n          !isAlreadyDefined &&\n          spec.autobind !== false;\n\n        if (shouldAutoBind) {\n          autoBindPairs.push(name, property);\n          proto[name] = property;\n        } else {\n          if (isAlreadyDefined) {\n            var specPolicy = ReactClassInterface[name];\n\n            // These cases should already be caught by validateMethodOverride.\n            _invariant(\n              isReactClassMethod &&\n                (specPolicy === 'DEFINE_MANY_MERGED' ||\n                  specPolicy === 'DEFINE_MANY'),\n              'ReactClass: Unexpected spec policy %s for key %s ' +\n                'when mixing in component specs.',\n              specPolicy,\n              name\n            );\n\n            // For methods which are defined more than once, call the existing\n            // methods before calling the new property, merging if appropriate.\n            if (specPolicy === 'DEFINE_MANY_MERGED') {\n              proto[name] = createMergedResultFunction(proto[name], property);\n            } else if (specPolicy === 'DEFINE_MANY') {\n              proto[name] = createChainedFunction(proto[name], property);\n            }\n          } else {\n            proto[name] = property;\n            if (process.env.NODE_ENV !== 'production') {\n              // Add verbose displayName to the function, which helps when looking\n              // at profiling tools.\n              if (typeof property === 'function' && spec.displayName) {\n                proto[name].displayName = spec.displayName + '_' + name;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function mixStaticSpecIntoComponent(Constructor, statics) {\n    if (!statics) {\n      return;\n    }\n    for (var name in statics) {\n      var property = statics[name];\n      if (!statics.hasOwnProperty(name)) {\n        continue;\n      }\n\n      var isReserved = name in RESERVED_SPEC_KEYS;\n      _invariant(\n        !isReserved,\n        'ReactClass: You are attempting to define a reserved ' +\n          'property, `%s`, that shouldn\\'t be on the \"statics\" key. Define it ' +\n          'as an instance property instead; it will still be accessible on the ' +\n          'constructor.',\n        name\n      );\n\n      var isInherited = name in Constructor;\n      _invariant(\n        !isInherited,\n        'ReactClass: You are attempting to define ' +\n          '`%s` on your component more than once. This conflict may be ' +\n          'due to a mixin.',\n        name\n      );\n      Constructor[name] = property;\n    }\n  }\n\n  /**\n   * Merge two objects, but throw if both contain the same key.\n   *\n   * @param {object} one The first object, which is mutated.\n   * @param {object} two The second object\n   * @return {object} one after it has been mutated to contain everything in two.\n   */\n  function mergeIntoWithNoDuplicateKeys(one, two) {\n    _invariant(\n      one && two && typeof one === 'object' && typeof two === 'object',\n      'mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.'\n    );\n\n    for (var key in two) {\n      if (two.hasOwnProperty(key)) {\n        _invariant(\n          one[key] === undefined,\n          'mergeIntoWithNoDuplicateKeys(): ' +\n            'Tried to merge two objects with the same key: `%s`. This conflict ' +\n            'may be due to a mixin; in particular, this may be caused by two ' +\n            'getInitialState() or getDefaultProps() methods returning objects ' +\n            'with clashing keys.',\n          key\n        );\n        one[key] = two[key];\n      }\n    }\n    return one;\n  }\n\n  /**\n   * Creates a function that invokes two functions and merges their return values.\n   *\n   * @param {function} one Function to invoke first.\n   * @param {function} two Function to invoke second.\n   * @return {function} Function that invokes the two argument functions.\n   * @private\n   */\n  function createMergedResultFunction(one, two) {\n    return function mergedResult() {\n      var a = one.apply(this, arguments);\n      var b = two.apply(this, arguments);\n      if (a == null) {\n        return b;\n      } else if (b == null) {\n        return a;\n      }\n      var c = {};\n      mergeIntoWithNoDuplicateKeys(c, a);\n      mergeIntoWithNoDuplicateKeys(c, b);\n      return c;\n    };\n  }\n\n  /**\n   * Creates a function that invokes two functions and ignores their return vales.\n   *\n   * @param {function} one Function to invoke first.\n   * @param {function} two Function to invoke second.\n   * @return {function} Function that invokes the two argument functions.\n   * @private\n   */\n  function createChainedFunction(one, two) {\n    return function chainedFunction() {\n      one.apply(this, arguments);\n      two.apply(this, arguments);\n    };\n  }\n\n  /**\n   * Binds a method to the component.\n   *\n   * @param {object} component Component whose method is going to be bound.\n   * @param {function} method Method to be bound.\n   * @return {function} The bound method.\n   */\n  function bindAutoBindMethod(component, method) {\n    var boundMethod = method.bind(component);\n    if (process.env.NODE_ENV !== 'production') {\n      boundMethod.__reactBoundContext = component;\n      boundMethod.__reactBoundMethod = method;\n      boundMethod.__reactBoundArguments = null;\n      var componentName = component.constructor.displayName;\n      var _bind = boundMethod.bind;\n      boundMethod.bind = function(newThis) {\n        for (\n          var _len = arguments.length,\n            args = Array(_len > 1 ? _len - 1 : 0),\n            _key = 1;\n          _key < _len;\n          _key++\n        ) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        // User is trying to bind() an autobound method; we effectively will\n        // ignore the value of \"this\" that the user is trying to use, so\n        // let's warn.\n        if (newThis !== component && newThis !== null) {\n          if (process.env.NODE_ENV !== 'production') {\n            warning(\n              false,\n              'bind(): React component methods may only be bound to the ' +\n                'component instance. See %s',\n              componentName\n            );\n          }\n        } else if (!args.length) {\n          if (process.env.NODE_ENV !== 'production') {\n            warning(\n              false,\n              'bind(): You are binding a component method to the component. ' +\n                'React does this for you automatically in a high-performance ' +\n                'way, so you can safely remove this call. See %s',\n              componentName\n            );\n          }\n          return boundMethod;\n        }\n        var reboundMethod = _bind.apply(boundMethod, arguments);\n        reboundMethod.__reactBoundContext = component;\n        reboundMethod.__reactBoundMethod = method;\n        reboundMethod.__reactBoundArguments = args;\n        return reboundMethod;\n      };\n    }\n    return boundMethod;\n  }\n\n  /**\n   * Binds all auto-bound methods in a component.\n   *\n   * @param {object} component Component whose method is going to be bound.\n   */\n  function bindAutoBindMethods(component) {\n    var pairs = component.__reactAutoBindPairs;\n    for (var i = 0; i < pairs.length; i += 2) {\n      var autoBindKey = pairs[i];\n      var method = pairs[i + 1];\n      component[autoBindKey] = bindAutoBindMethod(component, method);\n    }\n  }\n\n  var IsMountedPreMixin = {\n    componentDidMount: function() {\n      this.__isMounted = true;\n    }\n  };\n\n  var IsMountedPostMixin = {\n    componentWillUnmount: function() {\n      this.__isMounted = false;\n    }\n  };\n\n  /**\n   * Add more to the ReactClass base class. These are all legacy features and\n   * therefore not already part of the modern ReactComponent.\n   */\n  var ReactClassMixin = {\n    /**\n     * TODO: This will be deprecated because state should always keep a consistent\n     * type signature and the only use case for this, is to avoid that.\n     */\n    replaceState: function(newState, callback) {\n      this.updater.enqueueReplaceState(this, newState, callback);\n    },\n\n    /**\n     * Checks whether or not this composite component is mounted.\n     * @return {boolean} True if mounted, false otherwise.\n     * @protected\n     * @final\n     */\n    isMounted: function() {\n      if (process.env.NODE_ENV !== 'production') {\n        warning(\n          this.__didWarnIsMounted,\n          '%s: isMounted is deprecated. Instead, make sure to clean up ' +\n            'subscriptions and pending requests in componentWillUnmount to ' +\n            'prevent memory leaks.',\n          (this.constructor && this.constructor.displayName) ||\n            this.name ||\n            'Component'\n        );\n        this.__didWarnIsMounted = true;\n      }\n      return !!this.__isMounted;\n    }\n  };\n\n  var ReactClassComponent = function() {};\n  _assign(\n    ReactClassComponent.prototype,\n    ReactComponent.prototype,\n    ReactClassMixin\n  );\n\n  /**\n   * Creates a composite component class given a class specification.\n   * See https://facebook.github.io/react/docs/top-level-api.html#react.createclass\n   *\n   * @param {object} spec Class specification (which must define `render`).\n   * @return {function} Component constructor function.\n   * @public\n   */\n  function createClass(spec) {\n    // To keep our warnings more understandable, we'll use a little hack here to\n    // ensure that Constructor.name !== 'Constructor'. This makes sure we don't\n    // unnecessarily identify a class without displayName as 'Constructor'.\n    var Constructor = identity(function(props, context, updater) {\n      // This constructor gets overridden by mocks. The argument is used\n      // by mocks to assert on what gets mounted.\n\n      if (process.env.NODE_ENV !== 'production') {\n        warning(\n          this instanceof Constructor,\n          'Something is calling a React component directly. Use a factory or ' +\n            'JSX instead. See: https://fb.me/react-legacyfactory'\n        );\n      }\n\n      // Wire up auto-binding\n      if (this.__reactAutoBindPairs.length) {\n        bindAutoBindMethods(this);\n      }\n\n      this.props = props;\n      this.context = context;\n      this.refs = emptyObject;\n      this.updater = updater || ReactNoopUpdateQueue;\n\n      this.state = null;\n\n      // ReactClasses doesn't have constructors. Instead, they use the\n      // getInitialState and componentWillMount methods for initialization.\n\n      var initialState = this.getInitialState ? this.getInitialState() : null;\n      if (process.env.NODE_ENV !== 'production') {\n        // We allow auto-mocks to proceed as if they're returning null.\n        if (\n          initialState === undefined &&\n          this.getInitialState._isMockFunction\n        ) {\n          // This is probably bad practice. Consider warning here and\n          // deprecating this convenience.\n          initialState = null;\n        }\n      }\n      _invariant(\n        typeof initialState === 'object' && !Array.isArray(initialState),\n        '%s.getInitialState(): must return an object or null',\n        Constructor.displayName || 'ReactCompositeComponent'\n      );\n\n      this.state = initialState;\n    });\n    Constructor.prototype = new ReactClassComponent();\n    Constructor.prototype.constructor = Constructor;\n    Constructor.prototype.__reactAutoBindPairs = [];\n\n    injectedMixins.forEach(mixSpecIntoComponent.bind(null, Constructor));\n\n    mixSpecIntoComponent(Constructor, IsMountedPreMixin);\n    mixSpecIntoComponent(Constructor, spec);\n    mixSpecIntoComponent(Constructor, IsMountedPostMixin);\n\n    // Initialize the defaultProps property after all mixins have been merged.\n    if (Constructor.getDefaultProps) {\n      Constructor.defaultProps = Constructor.getDefaultProps();\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      // This is a tag to indicate that the use of these method names is ok,\n      // since it's used with createClass. If it's not, then it's likely a\n      // mistake so we'll warn you to use the static property, property\n      // initializer or constructor respectively.\n      if (Constructor.getDefaultProps) {\n        Constructor.getDefaultProps.isReactClassApproved = {};\n      }\n      if (Constructor.prototype.getInitialState) {\n        Constructor.prototype.getInitialState.isReactClassApproved = {};\n      }\n    }\n\n    _invariant(\n      Constructor.prototype.render,\n      'createClass(...): Class specification must implement a `render` method.'\n    );\n\n    if (process.env.NODE_ENV !== 'production') {\n      warning(\n        !Constructor.prototype.componentShouldUpdate,\n        '%s has a method called ' +\n          'componentShouldUpdate(). Did you mean shouldComponentUpdate()? ' +\n          'The name is phrased as a question because the function is ' +\n          'expected to return a value.',\n        spec.displayName || 'A component'\n      );\n      warning(\n        !Constructor.prototype.componentWillRecieveProps,\n        '%s has a method called ' +\n          'componentWillRecieveProps(). Did you mean componentWillReceiveProps()?',\n        spec.displayName || 'A component'\n      );\n    }\n\n    // Reduce time spent doing lookups by setting these on the prototype.\n    for (var methodName in ReactClassInterface) {\n      if (!Constructor.prototype[methodName]) {\n        Constructor.prototype[methodName] = null;\n      }\n    }\n\n    return Constructor;\n  }\n\n  return createClass;\n}\n\nmodule.exports = factory;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n */\n\n'use strict';\n\nvar emptyObject = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  Object.freeze(emptyObject);\n}\n\nmodule.exports = emptyObject;","export default function contains(root, n) {\n  var node = n;\n  while (node) {\n    if (node === root) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n\n  return false;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = addEventListenerWrap;\n\nvar _addDomEventListener = require('add-dom-event-listener');\n\nvar _addDomEventListener2 = _interopRequireDefault(_addDomEventListener);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction addEventListenerWrap(target, eventType, cb) {\n  /* eslint camelcase: 2 */\n  var callback = _reactDom2['default'].unstable_batchedUpdates ? function run(e) {\n    _reactDom2['default'].unstable_batchedUpdates(cb, e);\n  } : cb;\n  return (0, _addDomEventListener2['default'])(target, eventType, callback);\n}\nmodule.exports = exports['default'];","import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport Align from 'rc-align';\nimport Animate from 'rc-animate';\nimport PopupInner from './PopupInner';\nimport LazyRenderBox from './LazyRenderBox';\nimport { saveRef } from './utils';\n\nvar Popup = function (_Component) {\n  _inherits(Popup, _Component);\n\n  function Popup(props) {\n    _classCallCheck(this, Popup);\n\n    var _this = _possibleConstructorReturn(this, (Popup.__proto__ || Object.getPrototypeOf(Popup)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.savePopupRef = saveRef.bind(_this, 'popupInstance');\n    _this.saveAlignRef = saveRef.bind(_this, 'alignInstance');\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.rootNode = this.getPopupDomNode();\n    }\n  }, {\n    key: 'getPopupDomNode',\n    value: function getPopupDomNode() {\n      return ReactDOM.findDOMNode(this.popupInstance);\n    }\n  }, {\n    key: 'getMaskTransitionName',\n    value: function getMaskTransitionName() {\n      var props = this.props;\n      var transitionName = props.maskTransitionName;\n      var animation = props.maskAnimation;\n      if (!transitionName && animation) {\n        transitionName = props.prefixCls + '-' + animation;\n      }\n      return transitionName;\n    }\n  }, {\n    key: 'getTransitionName',\n    value: function getTransitionName() {\n      var props = this.props;\n      var transitionName = props.transitionName;\n      if (!transitionName && props.animation) {\n        transitionName = props.prefixCls + '-' + props.animation;\n      }\n      return transitionName;\n    }\n  }, {\n    key: 'getClassName',\n    value: function getClassName(currentAlignClassName) {\n      return this.props.prefixCls + ' ' + this.props.className + ' ' + currentAlignClassName;\n    }\n  }, {\n    key: 'getPopupElement',\n    value: function getPopupElement() {\n      var savePopupRef = this.savePopupRef,\n          props = this.props;\n      var align = props.align,\n          style = props.style,\n          visible = props.visible,\n          prefixCls = props.prefixCls,\n          destroyPopupOnHide = props.destroyPopupOnHide;\n\n      var className = this.getClassName(this.currentAlignClassName || props.getClassNameFromAlign(align));\n      var hiddenClassName = prefixCls + '-hidden';\n      if (!visible) {\n        this.currentAlignClassName = null;\n      }\n      var newStyle = _extends({}, style, this.getZIndexStyle());\n      var popupInnerProps = {\n        className: className,\n        prefixCls: prefixCls,\n        ref: savePopupRef,\n        onMouseEnter: props.onMouseEnter,\n        onMouseLeave: props.onMouseLeave,\n        style: newStyle\n      };\n      if (destroyPopupOnHide) {\n        return React.createElement(\n          Animate,\n          {\n            component: '',\n            exclusive: true,\n            transitionAppear: true,\n            transitionName: this.getTransitionName()\n          },\n          visible ? React.createElement(\n            Align,\n            {\n              target: this.getTarget,\n              key: 'popup',\n              ref: this.saveAlignRef,\n              monitorWindowResize: true,\n              align: align,\n              onAlign: this.onAlign\n            },\n            React.createElement(\n              PopupInner,\n              _extends({\n                visible: true\n              }, popupInnerProps),\n              props.children\n            )\n          ) : null\n        );\n      }\n      return React.createElement(\n        Animate,\n        {\n          component: '',\n          exclusive: true,\n          transitionAppear: true,\n          transitionName: this.getTransitionName(),\n          showProp: 'xVisible'\n        },\n        React.createElement(\n          Align,\n          {\n            target: this.getTarget,\n            key: 'popup',\n            ref: this.saveAlignRef,\n            monitorWindowResize: true,\n            xVisible: visible,\n            childrenProps: { visible: 'xVisible' },\n            disabled: !visible,\n            align: align,\n            onAlign: this.onAlign\n          },\n          React.createElement(\n            PopupInner,\n            _extends({\n              hiddenClassName: hiddenClassName\n            }, popupInnerProps),\n            props.children\n          )\n        )\n      );\n    }\n  }, {\n    key: 'getZIndexStyle',\n    value: function getZIndexStyle() {\n      var style = {};\n      var props = this.props;\n      if (props.zIndex !== undefined) {\n        style.zIndex = props.zIndex;\n      }\n      return style;\n    }\n  }, {\n    key: 'getMaskElement',\n    value: function getMaskElement() {\n      var props = this.props;\n      var maskElement = void 0;\n      if (props.mask) {\n        var maskTransition = this.getMaskTransitionName();\n        maskElement = React.createElement(LazyRenderBox, {\n          style: this.getZIndexStyle(),\n          key: 'mask',\n          className: props.prefixCls + '-mask',\n          hiddenClassName: props.prefixCls + '-mask-hidden',\n          visible: props.visible\n        });\n        if (maskTransition) {\n          maskElement = React.createElement(\n            Animate,\n            {\n              key: 'mask',\n              showProp: 'visible',\n              transitionAppear: true,\n              component: '',\n              transitionName: maskTransition\n            },\n            maskElement\n          );\n        }\n      }\n      return maskElement;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return React.createElement(\n        'div',\n        null,\n        this.getMaskElement(),\n        this.getPopupElement()\n      );\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nPopup.propTypes = {\n  visible: PropTypes.bool,\n  style: PropTypes.object,\n  getClassNameFromAlign: PropTypes.func,\n  onAlign: PropTypes.func,\n  getRootDomNode: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  align: PropTypes.any,\n  destroyPopupOnHide: PropTypes.bool,\n  className: PropTypes.string,\n  prefixCls: PropTypes.string,\n  onMouseLeave: PropTypes.func\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onAlign = function (popupDomNode, align) {\n    var props = _this2.props;\n    var currentAlignClassName = props.getClassNameFromAlign(align);\n    // FIX: https://github.com/react-component/trigger/issues/56\n    // FIX: https://github.com/react-component/tooltip/issues/79\n    if (_this2.currentAlignClassName !== currentAlignClassName) {\n      _this2.currentAlignClassName = currentAlignClassName;\n      popupDomNode.className = _this2.getClassName(currentAlignClassName);\n    }\n    props.onAlign(popupDomNode, align);\n  };\n\n  this.getTarget = function () {\n    return _this2.props.getRootDomNode();\n  };\n};\n\nexport default Popup;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Align = require('./Align');\n\nvar _Align2 = _interopRequireDefault(_Align);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nexports[\"default\"] = _Align2[\"default\"]; // export this package's api\n\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _domAlign = require('dom-align');\n\nvar _domAlign2 = _interopRequireDefault(_domAlign);\n\nvar _addEventListener = require('rc-util/lib/Dom/addEventListener');\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nvar _isWindow = require('./isWindow');\n\nvar _isWindow2 = _interopRequireDefault(_isWindow);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nfunction buffer(fn, ms) {\n  var timer = void 0;\n\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  }\n\n  function bufferFn() {\n    clear();\n    timer = setTimeout(fn, ms);\n  }\n\n  bufferFn.clear = clear;\n\n  return bufferFn;\n}\n\nvar Align = function (_Component) {\n  _inherits(Align, _Component);\n\n  function Align() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Align);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.forceAlign = function () {\n      var props = _this.props;\n      if (!props.disabled) {\n        var source = _reactDom2[\"default\"].findDOMNode(_this);\n        props.onAlign(source, (0, _domAlign2[\"default\"])(source, props.target(), props.align));\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Align.prototype.componentDidMount = function componentDidMount() {\n    var props = this.props;\n    // if parent ref not attached .... use document.getElementById\n    this.forceAlign();\n    if (!props.disabled && props.monitorWindowResize) {\n      this.startMonitorWindowResize();\n    }\n  };\n\n  Align.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var reAlign = false;\n    var props = this.props;\n\n    if (!props.disabled) {\n      if (prevProps.disabled || prevProps.align !== props.align) {\n        reAlign = true;\n      } else {\n        var lastTarget = prevProps.target();\n        var currentTarget = props.target();\n        if ((0, _isWindow2[\"default\"])(lastTarget) && (0, _isWindow2[\"default\"])(currentTarget)) {\n          reAlign = false;\n        } else if (lastTarget !== currentTarget) {\n          reAlign = true;\n        }\n      }\n    }\n\n    if (reAlign) {\n      this.forceAlign();\n    }\n\n    if (props.monitorWindowResize && !props.disabled) {\n      this.startMonitorWindowResize();\n    } else {\n      this.stopMonitorWindowResize();\n    }\n  };\n\n  Align.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.stopMonitorWindowResize();\n  };\n\n  Align.prototype.startMonitorWindowResize = function startMonitorWindowResize() {\n    if (!this.resizeHandler) {\n      this.bufferMonitor = buffer(this.forceAlign, this.props.monitorBufferTime);\n      this.resizeHandler = (0, _addEventListener2[\"default\"])(window, 'resize', this.bufferMonitor);\n    }\n  };\n\n  Align.prototype.stopMonitorWindowResize = function stopMonitorWindowResize() {\n    if (this.resizeHandler) {\n      this.bufferMonitor.clear();\n      this.resizeHandler.remove();\n      this.resizeHandler = null;\n    }\n  };\n\n  Align.prototype.render = function render() {\n    var _props = this.props,\n        childrenProps = _props.childrenProps,\n        children = _props.children;\n\n    var child = _react2[\"default\"].Children.only(children);\n    if (childrenProps) {\n      var newProps = {};\n      for (var prop in childrenProps) {\n        if (childrenProps.hasOwnProperty(prop)) {\n          newProps[prop] = this.props[childrenProps[prop]];\n        }\n      }\n      return _react2[\"default\"].cloneElement(child, newProps);\n    }\n    return child;\n  };\n\n  return Align;\n}(_react.Component);\n\nAlign.propTypes = {\n  childrenProps: _propTypes2[\"default\"].object,\n  align: _propTypes2[\"default\"].object.isRequired,\n  target: _propTypes2[\"default\"].func,\n  onAlign: _propTypes2[\"default\"].func,\n  monitorBufferTime: _propTypes2[\"default\"].number,\n  monitorWindowResize: _propTypes2[\"default\"].bool,\n  disabled: _propTypes2[\"default\"].bool,\n  children: _propTypes2[\"default\"].any\n};\nAlign.defaultProps = {\n  target: function target() {\n    return window;\n  },\n  onAlign: function onAlign() {},\n  monitorBufferTime: 50,\n  monitorWindowResize: false,\n  disabled: false\n};\nexports[\"default\"] = Align;\nmodule.exports = exports['default'];","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * align dom node flexibly\n * @author yiminghe@gmail.com\n */\n\nimport utils from './utils';\nimport getOffsetParent from './getOffsetParent';\nimport getVisibleRectForElement from './getVisibleRectForElement';\nimport adjustForViewport from './adjustForViewport';\nimport getRegion from './getRegion';\nimport getElFuturePos from './getElFuturePos';\nimport getAlignOffset from './getAlignOffset';\n\n// http://yiminghe.iteye.com/blog/1124720\n\nfunction isFailX(elFuturePos, elRegion, visibleRect) {\n  return elFuturePos.left < visibleRect.left || elFuturePos.left + elRegion.width > visibleRect.right;\n}\n\nfunction isFailY(elFuturePos, elRegion, visibleRect) {\n  return elFuturePos.top < visibleRect.top || elFuturePos.top + elRegion.height > visibleRect.bottom;\n}\n\nfunction isCompleteFailX(elFuturePos, elRegion, visibleRect) {\n  return elFuturePos.left > visibleRect.right || elFuturePos.left + elRegion.width < visibleRect.left;\n}\n\nfunction isCompleteFailY(elFuturePos, elRegion, visibleRect) {\n  return elFuturePos.top > visibleRect.bottom || elFuturePos.top + elRegion.height < visibleRect.top;\n}\n\nfunction isOutOfVisibleRect(target) {\n  var visibleRect = getVisibleRectForElement(target);\n  var targetRegion = getRegion(target);\n\n  return !visibleRect || targetRegion.left + targetRegion.width <= visibleRect.left || targetRegion.top + targetRegion.height <= visibleRect.top || targetRegion.left >= visibleRect.right || targetRegion.top >= visibleRect.bottom;\n}\n\nfunction flip(points, reg, map) {\n  var ret = [];\n  utils.each(points, function (p) {\n    ret.push(p.replace(reg, function (m) {\n      return map[m];\n    }));\n  });\n  return ret;\n}\n\nfunction flipOffset(offset, index) {\n  offset[index] = -offset[index];\n  return offset;\n}\n\nfunction convertOffset(str, offsetLen) {\n  var n = void 0;\n  if (/%$/.test(str)) {\n    n = parseInt(str.substring(0, str.length - 1), 10) / 100 * offsetLen;\n  } else {\n    n = parseInt(str, 10);\n  }\n  return n || 0;\n}\n\nfunction ySize(region) {\n  return region.bottom - region.top;\n}\n\nfunction xSize(region) {\n  return region.right - region.left;\n}\n\nfunction normalizeOffset(offset, el) {\n  offset[0] = convertOffset(offset[0], el.width);\n  offset[1] = convertOffset(offset[1], el.height);\n}\n\nfunction domAlign(el, refNode, align) {\n  var points = align.points;\n  var offset = align.offset || [0, 0];\n  var targetOffset = align.targetOffset || [0, 0];\n  var overflow = align.overflow;\n  var target = align.target || refNode;\n  var source = align.source || el;\n  offset = [].concat(offset);\n  targetOffset = [].concat(targetOffset);\n  overflow = overflow || {};\n  var newOverflowCfg = {};\n  var fail = 0;\n  // \n  var visibleRect = getVisibleRectForElement(source);\n  // , left/top/width/height\n  var elRegion = getRegion(source);\n  // , left/top/width/height\n  var refNodeRegion = getRegion(target);\n  //  offset \n  normalizeOffset(offset, elRegion);\n  normalizeOffset(targetOffset, refNodeRegion);\n  // \n  var elFuturePos = getElFuturePos(elRegion, refNodeRegion, points, offset, targetOffset);\n  // \n  var newElRegion = utils.merge(elRegion, elFuturePos);\n\n  var isTargetNotOutOfVisible = !isOutOfVisibleRect(target);\n  var refNodeOffset = utils.merge(refNodeRegion, getAlignOffset(refNodeRegion, points[1]));\n\n  var Xregion = void 0;\n  var YRegion = void 0;\n  var xRefPoint = points[0].charAt(1);\n  // TODO if visibleRect.xx < refNodeOffset.left ??\n  if (xRefPoint === 'c') {\n    Xregion = utils.merge(visibleRect, {\n      left: refNodeOffset.left - elRegion.width / 2\n    });\n  } else {\n    Xregion = utils.merge(visibleRect, _defineProperty({}, xRefPoint === 'l' ? 'left' : 'right', refNodeOffset.left + offset[0]));\n  }\n\n  var yRefPoint = points[0].charAt(0);\n  if (yRefPoint === 'c') {\n    YRegion = utils.merge(visibleRect, {\n      top: refNodeOffset.top - elRegion.height / 2\n    });\n  } else {\n    YRegion = utils.merge(visibleRect, _defineProperty({}, yRefPoint === 't' ? 'top' : 'bottom', refNodeOffset.top + offset[1]));\n  }\n\n  var realXRegion = Xregion;\n  var realYRegion = YRegion;\n  // \n  if (visibleRect && (overflow.adjustX || overflow.adjustY) && isTargetNotOutOfVisible) {\n    if (overflow.adjustX) {\n      // \n      if (isFailX(elFuturePos, elRegion, visibleRect)) {\n        // \n        var newPoints = flip(points, /[lr]/ig, {\n          l: 'r',\n          r: 'l'\n        });\n        // \n        var newOffset = flipOffset(offset, 0);\n        var newTargetOffset = flipOffset(targetOffset, 0);\n        var newElFuturePos = getElFuturePos(elRegion, refNodeRegion, newPoints, newOffset, newTargetOffset);\n\n        var XregionReversal = utils.merge(visibleRect, _defineProperty({}, newPoints[0].charAt(1) === 'l' ? 'left' : 'right', getAlignOffset(refNodeRegion, newPoints[1]).left));\n        var canXFlip = xSize(XregionReversal) > xSize(Xregion);\n        if (canXFlip && !isCompleteFailX(newElFuturePos, elRegion, visibleRect)) {\n          fail = 1;\n          points = newPoints;\n          offset = newOffset;\n          targetOffset = newTargetOffset;\n          realXRegion = XregionReversal;\n        }\n      }\n    }\n\n    if (overflow.adjustY) {\n      // \n      if (isFailY(elFuturePos, elRegion, visibleRect)) {\n        // \n        var _newPoints = flip(points, /[tb]/ig, {\n          t: 'b',\n          b: 't'\n        });\n        // \n        var _newOffset = flipOffset(offset, 1);\n        var _newTargetOffset = flipOffset(targetOffset, 1);\n        var _newElFuturePos = getElFuturePos(elRegion, refNodeRegion, _newPoints, _newOffset, _newTargetOffset);\n\n        var YRegionReversal = utils.merge(visibleRect, _defineProperty({}, _newPoints[0].charAt(0) === 't' ? 'top' : 'bottom', getAlignOffset(refNodeRegion, _newPoints[1]).top));\n        var canYFlip = ySize(YRegionReversal) > ySize(YRegion);\n\n        if (canYFlip && !isCompleteFailY(_newElFuturePos, elRegion, visibleRect)) {\n          fail = 1;\n          points = _newPoints;\n          offset = _newOffset;\n          targetOffset = _newTargetOffset;\n          realYRegion = YRegionReversal;\n        }\n      }\n    }\n\n    // \n    if (fail) {\n      elFuturePos = getElFuturePos(elRegion, refNodeRegion, points, offset, targetOffset);\n      utils.mix(newElRegion, elFuturePos);\n    }\n\n    newOverflowCfg.resizeHeight = overflow.resizeHeight;\n    newOverflowCfg.resizeWidth = overflow.resizeWidth;\n    // \n    // \n    newOverflowCfg.adjustX = overflow.adjustX && isFailX(elFuturePos, elRegion, realXRegion);\n\n    newOverflowCfg.adjustY = overflow.adjustY && isFailY(elFuturePos, elRegion, realYRegion);\n\n    // \n    if (newOverflowCfg.adjustX || newOverflowCfg.adjustY) {\n      newElRegion = adjustForViewport(elFuturePos, elRegion, realXRegion, realYRegion, newOverflowCfg);\n    }\n  }\n\n  // need judge to in case set fixed with in css on height auto element\n  if (newElRegion.width !== elRegion.width) {\n    utils.css(source, 'width', utils.width(source) + newElRegion.width - elRegion.width);\n  }\n\n  if (newElRegion.height !== elRegion.height) {\n    utils.css(source, 'height', utils.height(source) + newElRegion.height - elRegion.height);\n  }\n\n  // https://github.com/kissyteam/kissy/issues/190\n  //  left/top \n  //  <div 'relative'><el absolute></div>\n  utils.offset(source, {\n    left: newElRegion.left,\n    top: newElRegion.top\n  }, {\n    useCssRight: align.useCssRight,\n    useCssBottom: align.useCssBottom,\n    useCssTransform: align.useCssTransform\n  });\n\n  return {\n    points: points,\n    offset: offset,\n    targetOffset: targetOffset,\n    overflow: newOverflowCfg\n  };\n}\n\ndomAlign.__getOffsetParent = getOffsetParent;\n\ndomAlign.__getVisibleRectForElement = getVisibleRectForElement;\n\nexport default domAlign;\n/**\n *  2012-04-26 yiminghe@gmail.com\n *   - \n *   -  resizeXX\n *\n *  2011-07-13 yiminghe@gmail.com note:\n *   - \n **/","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nimport { setTransitionProperty, getTransitionProperty, getTransformXY, setTransformXY, getTransformName } from './propertyUtils';\n\nvar RE_NUM = /[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source;\n\nvar getComputedStyleX = void 0;\n\nfunction force(x, y) {\n  return x + y;\n}\n\nfunction css(el, name, v) {\n  var value = v;\n  if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n    for (var i in name) {\n      if (name.hasOwnProperty(i)) {\n        css(el, i, name[i]);\n      }\n    }\n    return undefined;\n  }\n  if (typeof value !== 'undefined') {\n    if (typeof value === 'number') {\n      value = value + 'px';\n    }\n    el.style[name] = value;\n    return undefined;\n  }\n  return getComputedStyleX(el, name);\n}\n\nfunction getClientPosition(elem) {\n  var box = void 0;\n  var x = void 0;\n  var y = void 0;\n  var doc = elem.ownerDocument;\n  var body = doc.body;\n  var docElem = doc && doc.documentElement;\n  //  GBS A-Grade Browsers  getBoundingClientRect \n  box = elem.getBoundingClientRect();\n\n  // jQuery  docElem.clientLeft/clientTop\n  //  html  body /\n  // ie6  html  margin  html  margin\n\n  x = box.left;\n  y = box.top;\n\n  // In IE, most of the time, 2 extra pixels are added to the top and left\n  // due to the implicit 2-pixel inset border.  In IE6/7 quirks mode and\n  // IE6 standards mode, this border can be overridden by setting the\n  // document element's border to zero -- thus, we cannot rely on the\n  // offset always being 2 pixels.\n\n  // In quirks mode, the offset can be determined by querying the body's\n  // clientLeft/clientTop, but in standards mode, it is found by querying\n  // the document element's clientLeft/clientTop.  Since we already called\n  // getClientBoundingRect we have already forced a reflow, so it is not\n  // too expensive just to query them all.\n\n  // ie  absolute \n  //  documentElement ,quirks  body\n  //  body  html   ie < 9 html  2px \n  //  ie body html  ,ie  html,body \n  //  ie  docElem.clientTop  border-top\n  // ie7 html  2\n  //  firefox/chrome/ie9  docElem.clientTop  border-top  0\n\n  x -= docElem.clientLeft || body.clientLeft || 0;\n  y -= docElem.clientTop || body.clientTop || 0;\n\n  return {\n    left: x,\n    top: y\n  };\n}\n\nfunction getScroll(w, top) {\n  var ret = w['page' + (top ? 'Y' : 'X') + 'Offset'];\n  var method = 'scroll' + (top ? 'Top' : 'Left');\n  if (typeof ret !== 'number') {\n    var d = w.document;\n    // ie6,7,8 standard mode\n    ret = d.documentElement[method];\n    if (typeof ret !== 'number') {\n      // quirks mode\n      ret = d.body[method];\n    }\n  }\n  return ret;\n}\n\nfunction getScrollLeft(w) {\n  return getScroll(w);\n}\n\nfunction getScrollTop(w) {\n  return getScroll(w, true);\n}\n\nfunction getOffset(el) {\n  var pos = getClientPosition(el);\n  var doc = el.ownerDocument;\n  var w = doc.defaultView || doc.parentWindow;\n  pos.left += getScrollLeft(w);\n  pos.top += getScrollTop(w);\n  return pos;\n}\n\n/**\n * A crude way of determining if an object is a window\n * @member util\n */\nfunction isWindow(obj) {\n  // must use == for ie8\n  /* eslint eqeqeq:0 */\n  return obj !== null && obj !== undefined && obj == obj.window;\n}\n\nfunction getDocument(node) {\n  if (isWindow(node)) {\n    return node.document;\n  }\n  if (node.nodeType === 9) {\n    return node;\n  }\n  return node.ownerDocument;\n}\n\nfunction _getComputedStyle(elem, name, cs) {\n  var computedStyle = cs;\n  var val = '';\n  var d = getDocument(elem);\n  computedStyle = computedStyle || d.defaultView.getComputedStyle(elem, null);\n\n  // https://github.com/kissyteam/kissy/issues/61\n  if (computedStyle) {\n    val = computedStyle.getPropertyValue(name) || computedStyle[name];\n  }\n\n  return val;\n}\n\nvar _RE_NUM_NO_PX = new RegExp('^(' + RE_NUM + ')(?!px)[a-z%]+$', 'i');\nvar RE_POS = /^(top|right|bottom|left)$/;\nvar CURRENT_STYLE = 'currentStyle';\nvar RUNTIME_STYLE = 'runtimeStyle';\nvar LEFT = 'left';\nvar PX = 'px';\n\nfunction _getComputedStyleIE(elem, name) {\n  // currentStyle maybe null\n  // http://msdn.microsoft.com/en-us/library/ms535231.aspx\n  var ret = elem[CURRENT_STYLE] && elem[CURRENT_STYLE][name];\n\n  //  width/height  pixelLeft  width/height \n  // ! CUSTOM_STYLE.height,CUSTOM_STYLE.width ,cssHook @2011-08-19\n  //  ie  offset \n  // borderWidth  borderWidth \n\n  // From the awesome hack by Dean Edwards\n  // http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n  // If we're not dealing with a regular pixel number\n  // but a number that has a weird ending, we need to convert it to pixels\n  // exclude left right for relativity\n  if (_RE_NUM_NO_PX.test(ret) && !RE_POS.test(name)) {\n    // Remember the original values\n    var style = elem.style;\n    var left = style[LEFT];\n    var rsLeft = elem[RUNTIME_STYLE][LEFT];\n\n    // prevent flashing of content\n    elem[RUNTIME_STYLE][LEFT] = elem[CURRENT_STYLE][LEFT];\n\n    // Put in the new values to get a computed value out\n    style[LEFT] = name === 'fontSize' ? '1em' : ret || 0;\n    ret = style.pixelLeft + PX;\n\n    // Revert the changed values\n    style[LEFT] = left;\n\n    elem[RUNTIME_STYLE][LEFT] = rsLeft;\n  }\n  return ret === '' ? 'auto' : ret;\n}\n\nif (typeof window !== 'undefined') {\n  getComputedStyleX = window.getComputedStyle ? _getComputedStyle : _getComputedStyleIE;\n}\n\nfunction getOffsetDirection(dir, option) {\n  if (dir === 'left') {\n    return option.useCssRight ? 'right' : dir;\n  }\n  return option.useCssBottom ? 'bottom' : dir;\n}\n\nfunction oppositeOffsetDirection(dir) {\n  if (dir === 'left') {\n    return 'right';\n  } else if (dir === 'right') {\n    return 'left';\n  } else if (dir === 'top') {\n    return 'bottom';\n  } else if (dir === 'bottom') {\n    return 'top';\n  }\n}\n\n//  elem  elem.ownerDocument \nfunction setLeftTop(elem, offset, option) {\n  // set position first, in-case top/left are set even on static elem\n  if (css(elem, 'position') === 'static') {\n    elem.style.position = 'relative';\n  }\n  var presetH = -999;\n  var presetV = -999;\n  var horizontalProperty = getOffsetDirection('left', option);\n  var verticalProperty = getOffsetDirection('top', option);\n  var oppositeHorizontalProperty = oppositeOffsetDirection(horizontalProperty);\n  var oppositeVerticalProperty = oppositeOffsetDirection(verticalProperty);\n\n  if (horizontalProperty !== 'left') {\n    presetH = 999;\n  }\n\n  if (verticalProperty !== 'top') {\n    presetV = 999;\n  }\n  var originalTransition = '';\n  var originalOffset = getOffset(elem);\n  if ('left' in offset || 'top' in offset) {\n    originalTransition = getTransitionProperty(elem) || '';\n    setTransitionProperty(elem, 'none');\n  }\n  if ('left' in offset) {\n    elem.style[oppositeHorizontalProperty] = '';\n    elem.style[horizontalProperty] = presetH + 'px';\n  }\n  if ('top' in offset) {\n    elem.style[oppositeVerticalProperty] = '';\n    elem.style[verticalProperty] = presetV + 'px';\n  }\n  var old = getOffset(elem);\n  var originalStyle = {};\n  for (var key in offset) {\n    if (offset.hasOwnProperty(key)) {\n      var dir = getOffsetDirection(key, option);\n      var preset = key === 'left' ? presetH : presetV;\n      var off = originalOffset[key] - old[key];\n      if (dir === key) {\n        originalStyle[dir] = preset + off;\n      } else {\n        originalStyle[dir] = preset - off;\n      }\n    }\n  }\n  css(elem, originalStyle);\n  // force relayout\n  force(elem.offsetTop, elem.offsetLeft);\n  if ('left' in offset || 'top' in offset) {\n    setTransitionProperty(elem, originalTransition);\n  }\n  var ret = {};\n  for (var _key in offset) {\n    if (offset.hasOwnProperty(_key)) {\n      var _dir = getOffsetDirection(_key, option);\n      var _off = offset[_key] - originalOffset[_key];\n      if (_key === _dir) {\n        ret[_dir] = originalStyle[_dir] + _off;\n      } else {\n        ret[_dir] = originalStyle[_dir] - _off;\n      }\n    }\n  }\n  css(elem, ret);\n}\n\nfunction setTransform(elem, offset) {\n  var originalOffset = getOffset(elem);\n  var originalXY = getTransformXY(elem);\n  var resultXY = { x: originalXY.x, y: originalXY.y };\n  if ('left' in offset) {\n    resultXY.x = originalXY.x + offset.left - originalOffset.left;\n  }\n  if ('top' in offset) {\n    resultXY.y = originalXY.y + offset.top - originalOffset.top;\n  }\n  setTransformXY(elem, resultXY);\n}\n\nfunction setOffset(elem, offset, option) {\n  if (option.useCssRight || option.useCssBottom) {\n    setLeftTop(elem, offset, option);\n  } else if (option.useCssTransform && getTransformName() in document.body.style) {\n    setTransform(elem, offset, option);\n  } else {\n    setLeftTop(elem, offset, option);\n  }\n}\n\nfunction each(arr, fn) {\n  for (var i = 0; i < arr.length; i++) {\n    fn(arr[i]);\n  }\n}\n\nfunction isBorderBoxFn(elem) {\n  return getComputedStyleX(elem, 'boxSizing') === 'border-box';\n}\n\nvar BOX_MODELS = ['margin', 'border', 'padding'];\nvar CONTENT_INDEX = -1;\nvar PADDING_INDEX = 2;\nvar BORDER_INDEX = 1;\nvar MARGIN_INDEX = 0;\n\nfunction swap(elem, options, callback) {\n  var old = {};\n  var style = elem.style;\n  var name = void 0;\n\n  // Remember the old values, and insert the new ones\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      old[name] = style[name];\n      style[name] = options[name];\n    }\n  }\n\n  callback.call(elem);\n\n  // Revert the old values\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      style[name] = old[name];\n    }\n  }\n}\n\nfunction getPBMWidth(elem, props, which) {\n  var value = 0;\n  var prop = void 0;\n  var j = void 0;\n  var i = void 0;\n  for (j = 0; j < props.length; j++) {\n    prop = props[j];\n    if (prop) {\n      for (i = 0; i < which.length; i++) {\n        var cssProp = void 0;\n        if (prop === 'border') {\n          cssProp = '' + prop + which[i] + 'Width';\n        } else {\n          cssProp = prop + which[i];\n        }\n        value += parseFloat(getComputedStyleX(elem, cssProp)) || 0;\n      }\n    }\n  }\n  return value;\n}\n\nvar domUtils = {};\n\neach(['Width', 'Height'], function (name) {\n  domUtils['doc' + name] = function (refWin) {\n    var d = refWin.document;\n    return Math.max(\n    // firefox chrome documentElement.scrollHeight< body.scrollHeight\n    // ie standard mode : documentElement.scrollHeight> body.scrollHeight\n    d.documentElement['scroll' + name],\n    // quirks : documentElement.scrollHeight \n    d.body['scroll' + name], domUtils['viewport' + name](d));\n  };\n\n  domUtils['viewport' + name] = function (win) {\n    // pc browser includes scrollbar in window.innerWidth\n    var prop = 'client' + name;\n    var doc = win.document;\n    var body = doc.body;\n    var documentElement = doc.documentElement;\n    var documentElementProp = documentElement[prop];\n    //  documentElement\n    // backcompat  body\n    return doc.compatMode === 'CSS1Compat' && documentElementProp || body && body[prop] || documentElementProp;\n  };\n});\n\n/*\n \n @param elem\n @param name\n @param {String} [extra]  'padding' : (css width) + padding\n 'border' : (css width) + padding + border\n 'margin' : (css width) + padding + border + margin\n */\nfunction getWH(elem, name, ex) {\n  var extra = ex;\n  if (isWindow(elem)) {\n    return name === 'width' ? domUtils.viewportWidth(elem) : domUtils.viewportHeight(elem);\n  } else if (elem.nodeType === 9) {\n    return name === 'width' ? domUtils.docWidth(elem) : domUtils.docHeight(elem);\n  }\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n  var borderBoxValue = name === 'width' ? elem.offsetWidth : elem.offsetHeight;\n  var computedStyle = getComputedStyleX(elem);\n  var isBorderBox = isBorderBoxFn(elem, computedStyle);\n  var cssBoxValue = 0;\n  if (borderBoxValue === null || borderBoxValue === undefined || borderBoxValue <= 0) {\n    borderBoxValue = undefined;\n    // Fall back to computed then un computed css if necessary\n    cssBoxValue = getComputedStyleX(elem, name);\n    if (cssBoxValue === null || cssBoxValue === undefined || Number(cssBoxValue) < 0) {\n      cssBoxValue = elem.style[name] || 0;\n    }\n    // Normalize '', auto, and prepare for extra\n    cssBoxValue = parseFloat(cssBoxValue) || 0;\n  }\n  if (extra === undefined) {\n    extra = isBorderBox ? BORDER_INDEX : CONTENT_INDEX;\n  }\n  var borderBoxValueOrIsBorderBox = borderBoxValue !== undefined || isBorderBox;\n  var val = borderBoxValue || cssBoxValue;\n  if (extra === CONTENT_INDEX) {\n    if (borderBoxValueOrIsBorderBox) {\n      return val - getPBMWidth(elem, ['border', 'padding'], which, computedStyle);\n    }\n    return cssBoxValue;\n  } else if (borderBoxValueOrIsBorderBox) {\n    if (extra === BORDER_INDEX) {\n      return val;\n    }\n    return val + (extra === PADDING_INDEX ? -getPBMWidth(elem, ['border'], which, computedStyle) : getPBMWidth(elem, ['margin'], which, computedStyle));\n  }\n  return cssBoxValue + getPBMWidth(elem, BOX_MODELS.slice(extra), which, computedStyle);\n}\n\nvar cssShow = {\n  position: 'absolute',\n  visibility: 'hidden',\n  display: 'block'\n};\n\n// fix #119 : https://github.com/kissyteam/kissy/issues/119\nfunction getWHIgnoreDisplay() {\n  for (var _len = arguments.length, args = Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  var val = void 0;\n  var elem = args[0];\n  // in case elem is window\n  // elem.offsetWidth === undefined\n  if (elem.offsetWidth !== 0) {\n    val = getWH.apply(undefined, args);\n  } else {\n    swap(elem, cssShow, function () {\n      val = getWH.apply(undefined, args);\n    });\n  }\n  return val;\n}\n\neach(['width', 'height'], function (name) {\n  var first = name.charAt(0).toUpperCase() + name.slice(1);\n  domUtils['outer' + first] = function (el, includeMargin) {\n    return el && getWHIgnoreDisplay(el, name, includeMargin ? MARGIN_INDEX : BORDER_INDEX);\n  };\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n\n  domUtils[name] = function (elem, v) {\n    var val = v;\n    if (val !== undefined) {\n      if (elem) {\n        var computedStyle = getComputedStyleX(elem);\n        var isBorderBox = isBorderBoxFn(elem);\n        if (isBorderBox) {\n          val += getPBMWidth(elem, ['padding', 'border'], which, computedStyle);\n        }\n        return css(elem, name, val);\n      }\n      return undefined;\n    }\n    return elem && getWHIgnoreDisplay(elem, name, CONTENT_INDEX);\n  };\n});\n\nfunction mix(to, from) {\n  for (var i in from) {\n    if (from.hasOwnProperty(i)) {\n      to[i] = from[i];\n    }\n  }\n  return to;\n}\n\nvar utils = {\n  getWindow: function getWindow(node) {\n    if (node && node.document && node.setTimeout) {\n      return node;\n    }\n    var doc = node.ownerDocument || node;\n    return doc.defaultView || doc.parentWindow;\n  },\n\n  getDocument: getDocument,\n  offset: function offset(el, value, option) {\n    if (typeof value !== 'undefined') {\n      setOffset(el, value, option || {});\n    } else {\n      return getOffset(el);\n    }\n  },\n\n  isWindow: isWindow,\n  each: each,\n  css: css,\n  clone: function clone(obj) {\n    var i = void 0;\n    var ret = {};\n    for (i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        ret[i] = obj[i];\n      }\n    }\n    var overflow = obj.overflow;\n    if (overflow) {\n      for (i in obj) {\n        if (obj.hasOwnProperty(i)) {\n          ret.overflow[i] = obj.overflow[i];\n        }\n      }\n    }\n    return ret;\n  },\n\n  mix: mix,\n  getWindowScrollLeft: function getWindowScrollLeft(w) {\n    return getScrollLeft(w);\n  },\n  getWindowScrollTop: function getWindowScrollTop(w) {\n    return getScrollTop(w);\n  },\n  merge: function merge() {\n    var ret = {};\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      utils.mix(ret, args[i]);\n    }\n    return ret;\n  },\n\n  viewportWidth: 0,\n  viewportHeight: 0\n};\n\nmix(utils, domUtils);\n\nexport default utils;","var vendorPrefix = void 0;\n\nvar jsCssMap = {\n  Webkit: '-webkit-',\n  Moz: '-moz-',\n  // IE did it wrong again ...\n  ms: '-ms-',\n  O: '-o-'\n};\n\nfunction getVendorPrefix() {\n  if (vendorPrefix !== undefined) {\n    return vendorPrefix;\n  }\n  vendorPrefix = '';\n  var style = document.createElement('p').style;\n  var testProp = 'Transform';\n  for (var key in jsCssMap) {\n    if (key + testProp in style) {\n      vendorPrefix = key;\n    }\n  }\n  return vendorPrefix;\n}\n\nfunction getTransitionName() {\n  return getVendorPrefix() ? getVendorPrefix() + 'TransitionProperty' : 'transitionProperty';\n}\n\nexport function getTransformName() {\n  return getVendorPrefix() ? getVendorPrefix() + 'Transform' : 'transform';\n}\n\nexport function setTransitionProperty(node, value) {\n  var name = getTransitionName();\n  if (name) {\n    node.style[name] = value;\n    if (name !== 'transitionProperty') {\n      node.style.transitionProperty = value;\n    }\n  }\n}\n\nfunction setTransform(node, value) {\n  var name = getTransformName();\n  if (name) {\n    node.style[name] = value;\n    if (name !== 'transform') {\n      node.style.transform = value;\n    }\n  }\n}\n\nexport function getTransitionProperty(node) {\n  return node.style.transitionProperty || node.style[getTransitionName()];\n}\n\nexport function getTransformXY(node) {\n  var style = window.getComputedStyle(node, null);\n  var transform = style.getPropertyValue('transform') || style.getPropertyValue(getTransformName());\n  if (transform && transform !== 'none') {\n    var matrix = transform.replace(/[^0-9\\-.,]/g, '').split(',');\n    return { x: parseFloat(matrix[12] || matrix[4], 0), y: parseFloat(matrix[13] || matrix[5], 0) };\n  }\n  return {\n    x: 0,\n    y: 0\n  };\n}\n\nvar matrix2d = /matrix\\((.*)\\)/;\nvar matrix3d = /matrix3d\\((.*)\\)/;\n\nexport function setTransformXY(node, xy) {\n  var style = window.getComputedStyle(node, null);\n  var transform = style.getPropertyValue('transform') || style.getPropertyValue(getTransformName());\n  if (transform && transform !== 'none') {\n    var arr = void 0;\n    var match2d = transform.match(matrix2d);\n    if (match2d) {\n      match2d = match2d[1];\n      arr = match2d.split(',').map(function (item) {\n        return parseFloat(item, 10);\n      });\n      arr[4] = xy.x;\n      arr[5] = xy.y;\n      setTransform(node, 'matrix(' + arr.join(',') + ')');\n    } else {\n      var match3d = transform.match(matrix3d)[1];\n      arr = match3d.split(',').map(function (item) {\n        return parseFloat(item, 10);\n      });\n      arr[12] = xy.x;\n      arr[13] = xy.y;\n      setTransform(node, 'matrix3d(' + arr.join(',') + ')');\n    }\n  } else {\n    setTransform(node, 'translateX(' + xy.x + 'px) translateY(' + xy.y + 'px) translateZ(0)');\n  }\n}","import utils from './utils';\n\n/**\n * \n */\n\nfunction getOffsetParent(element) {\n  if (utils.isWindow(element) || element.nodeType === 9) {\n    return null;\n  }\n  // ie \n  /*\n   <div style=\"width: 50px;height: 100px;overflow: hidden\">\n   <div style=\"width: 50px;height: 100px;position: relative;\" id=\"d6\">\n    6  100px  50px<br/>\n   </div>\n   </div>\n   */\n  // element.offsetParent does the right thing in ie7 and below. Return parent with layout!\n  //  In other browsers it only includes elements with position absolute, relative or\n  // fixed, not elements with overflow set to auto or scroll.\n  //        if (UA.ie && ieMode < 8) {\n  //            return element.offsetParent;\n  //        }\n  //  offsetParent \n  var doc = utils.getDocument(element);\n  var body = doc.body;\n  var parent = void 0;\n  var positionStyle = utils.css(element, 'position');\n  var skipStatic = positionStyle === 'fixed' || positionStyle === 'absolute';\n\n  if (!skipStatic) {\n    return element.nodeName.toLowerCase() === 'html' ? null : element.parentNode;\n  }\n\n  for (parent = element.parentNode; parent && parent !== body; parent = parent.parentNode) {\n    positionStyle = utils.css(parent, 'position');\n    if (positionStyle !== 'static') {\n      return parent;\n    }\n  }\n  return null;\n}\n\nexport default getOffsetParent;","import utils from './utils';\nimport getOffsetParent from './getOffsetParent';\n\n/**\n * \n */\nfunction getVisibleRectForElement(element) {\n  var visibleRect = {\n    left: 0,\n    right: Infinity,\n    top: 0,\n    bottom: Infinity\n  };\n  var el = getOffsetParent(element);\n  var scrollX = void 0;\n  var scrollY = void 0;\n  var winSize = void 0;\n  var doc = utils.getDocument(element);\n  var win = doc.defaultView || doc.parentWindow;\n  var body = doc.body;\n  var documentElement = doc.documentElement;\n\n  // Determine the size of the visible rect by climbing the dom accounting for\n  // all scrollable containers.\n  while (el) {\n    // clientWidth is zero for inline block elements in ie.\n    if ((navigator.userAgent.indexOf('MSIE') === -1 || el.clientWidth !== 0) &&\n    // body may have overflow set on it, yet we still get the entire\n    // viewport. In some browsers, el.offsetParent may be\n    // document.documentElement, so check for that too.\n    el !== body && el !== documentElement && utils.css(el, 'overflow') !== 'visible') {\n      var pos = utils.offset(el);\n      // add border\n      pos.left += el.clientLeft;\n      pos.top += el.clientTop;\n      visibleRect.top = Math.max(visibleRect.top, pos.top);\n      visibleRect.right = Math.min(visibleRect.right,\n      // consider area without scrollBar\n      pos.left + el.clientWidth);\n      visibleRect.bottom = Math.min(visibleRect.bottom, pos.top + el.clientHeight);\n      visibleRect.left = Math.max(visibleRect.left, pos.left);\n    } else if (el === body || el === documentElement) {\n      break;\n    }\n    el = getOffsetParent(el);\n  }\n\n  // Clip by window's viewport.\n  scrollX = utils.getWindowScrollLeft(win);\n  scrollY = utils.getWindowScrollTop(win);\n  visibleRect.left = Math.max(visibleRect.left, scrollX);\n  visibleRect.top = Math.max(visibleRect.top, scrollY);\n  winSize = {\n    width: utils.viewportWidth(win),\n    height: utils.viewportHeight(win)\n  };\n  visibleRect.right = Math.min(visibleRect.right, scrollX + winSize.width);\n  visibleRect.bottom = Math.min(visibleRect.bottom, scrollY + winSize.height);\n  return visibleRect.top >= 0 && visibleRect.left >= 0 && visibleRect.bottom > visibleRect.top && visibleRect.right > visibleRect.left ? visibleRect : null;\n}\n\nexport default getVisibleRectForElement;","import utils from './utils';\n\nfunction adjustForViewport(elFuturePos, elRegion, xRect, yRect, overflow) {\n  var pos = utils.clone(elFuturePos);\n  var size = {\n    width: elRegion.width,\n    height: elRegion.height\n  };\n\n  if (overflow.adjustX && pos.left < xRect.left) {\n    pos.left = xRect.left;\n  }\n\n  // Left edge inside and right edge outside viewport, try to resize it.\n  if (overflow.resizeWidth && pos.left >= xRect.left && pos.left + size.width > xRect.right) {\n    size.width -= pos.left + size.width - xRect.right;\n  }\n\n  // Right edge outside viewport, try to move it.\n  if (overflow.adjustX && pos.left + size.width > xRect.right) {\n    // \n    pos.left = Math.max(xRect.right - size.width, xRect.left);\n  }\n\n  // Top edge outside viewport, try to move it.\n  if (overflow.adjustY && pos.top < yRect.top) {\n    pos.top = yRect.top;\n  }\n\n  // Top edge inside and bottom edge outside viewport, try to resize it.\n  if (overflow.resizeHeight && pos.top >= yRect.top && pos.top + size.height > yRect.bottom) {\n    size.height -= pos.top + size.height - yRect.bottom;\n  }\n\n  // Bottom edge outside viewport, try to move it.\n  if (overflow.adjustY && pos.top + size.height > yRect.bottom) {\n    // \n    pos.top = Math.max(yRect.bottom - size.height, yRect.top);\n  }\n\n  return utils.mix(pos, size);\n}\n\nexport default adjustForViewport;","import utils from './utils';\n\nfunction getRegion(node) {\n  var offset = void 0;\n  var w = void 0;\n  var h = void 0;\n  if (!utils.isWindow(node) && node.nodeType !== 9) {\n    offset = utils.offset(node);\n    w = utils.outerWidth(node);\n    h = utils.outerHeight(node);\n  } else {\n    var win = utils.getWindow(node);\n    offset = {\n      left: utils.getWindowScrollLeft(win),\n      top: utils.getWindowScrollTop(win)\n    };\n    w = utils.viewportWidth(win);\n    h = utils.viewportHeight(win);\n  }\n  offset.width = w;\n  offset.height = h;\n  return offset;\n}\n\nexport default getRegion;","import getAlignOffset from './getAlignOffset';\n\nfunction getElFuturePos(elRegion, refNodeRegion, points, offset, targetOffset) {\n  var xy = void 0;\n  var diff = void 0;\n  var p1 = void 0;\n  var p2 = void 0;\n\n  xy = {\n    left: elRegion.left,\n    top: elRegion.top\n  };\n\n  p1 = getAlignOffset(refNodeRegion, points[1]);\n  p2 = getAlignOffset(elRegion, points[0]);\n\n  diff = [p2.left - p1.left, p2.top - p1.top];\n\n  return {\n    left: xy.left - diff[0] + offset[0] - targetOffset[0],\n    top: xy.top - diff[1] + offset[1] - targetOffset[1]\n  };\n}\n\nexport default getElFuturePos;","/**\n *  node  align  \n */\n\nfunction getAlignOffset(region, align) {\n  var V = align.charAt(0);\n  var H = align.charAt(1);\n  var w = region.width;\n  var h = region.height;\n  var x = void 0;\n  var y = void 0;\n\n  x = region.left;\n  y = region.top;\n\n  if (V === 'c') {\n    y += h / 2;\n  } else if (V === 'b') {\n    y += h;\n  }\n\n  if (H === 'c') {\n    x += w / 2;\n  } else if (H === 'r') {\n    x += w;\n  }\n\n  return {\n    left: x,\n    top: y\n  };\n}\n\nexport default getAlignOffset;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = isWindow;\nfunction isWindow(obj) {\n  /* eslint no-eq-null: 0 */\n  /* eslint eqeqeq: 0 */\n  return obj != null && obj == obj.window;\n}\nmodule.exports = exports['default'];","import _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { toArrayChildren, mergeChildren, findShownChildInChildrenByKey, findChildInChildrenByKey, isSameChildren } from './ChildrenUtils';\nimport AnimateChild from './AnimateChild';\nvar defaultKey = 'rc_animate_' + Date.now();\nimport animUtil from './util';\n\nfunction getChildrenFromProps(props) {\n  var children = props.children;\n  if (React.isValidElement(children)) {\n    if (!children.key) {\n      return React.cloneElement(children, {\n        key: defaultKey\n      });\n    }\n  }\n  return children;\n}\n\nfunction noop() {}\n\nvar Animate = function (_React$Component) {\n  _inherits(Animate, _React$Component);\n\n  function Animate(props) {\n    _classCallCheck(this, Animate);\n\n    var _this = _possibleConstructorReturn(this, (Animate.__proto__ || Object.getPrototypeOf(Animate)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.currentlyAnimatingKeys = {};\n    _this.keysToEnter = [];\n    _this.keysToLeave = [];\n\n    _this.state = {\n      children: toArrayChildren(getChildrenFromProps(_this.props))\n    };\n\n    _this.childrenRefs = {};\n    return _this;\n  }\n\n  _createClass(Animate, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var showProp = this.props.showProp;\n      var children = this.state.children;\n      if (showProp) {\n        children = children.filter(function (child) {\n          return !!child.props[showProp];\n        });\n      }\n      children.forEach(function (child) {\n        if (child) {\n          _this2.performAppear(child.key);\n        }\n      });\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n\n      this.nextProps = nextProps;\n      var nextChildren = toArrayChildren(getChildrenFromProps(nextProps));\n      var props = this.props;\n      // exclusive needs immediate response\n      if (props.exclusive) {\n        Object.keys(this.currentlyAnimatingKeys).forEach(function (key) {\n          _this3.stop(key);\n        });\n      }\n      var showProp = props.showProp;\n      var currentlyAnimatingKeys = this.currentlyAnimatingKeys;\n      // last props children if exclusive\n      var currentChildren = props.exclusive ? toArrayChildren(getChildrenFromProps(props)) : this.state.children;\n      // in case destroy in showProp mode\n      var newChildren = [];\n      if (showProp) {\n        currentChildren.forEach(function (currentChild) {\n          var nextChild = currentChild && findChildInChildrenByKey(nextChildren, currentChild.key);\n          var newChild = void 0;\n          if ((!nextChild || !nextChild.props[showProp]) && currentChild.props[showProp]) {\n            newChild = React.cloneElement(nextChild || currentChild, _defineProperty({}, showProp, true));\n          } else {\n            newChild = nextChild;\n          }\n          if (newChild) {\n            newChildren.push(newChild);\n          }\n        });\n        nextChildren.forEach(function (nextChild) {\n          if (!nextChild || !findChildInChildrenByKey(currentChildren, nextChild.key)) {\n            newChildren.push(nextChild);\n          }\n        });\n      } else {\n        newChildren = mergeChildren(currentChildren, nextChildren);\n      }\n\n      // need render to avoid update\n      this.setState({\n        children: newChildren\n      });\n\n      nextChildren.forEach(function (child) {\n        var key = child && child.key;\n        if (child && currentlyAnimatingKeys[key]) {\n          return;\n        }\n        var hasPrev = child && findChildInChildrenByKey(currentChildren, key);\n        if (showProp) {\n          var showInNext = child.props[showProp];\n          if (hasPrev) {\n            var showInNow = findShownChildInChildrenByKey(currentChildren, key, showProp);\n            if (!showInNow && showInNext) {\n              _this3.keysToEnter.push(key);\n            }\n          } else if (showInNext) {\n            _this3.keysToEnter.push(key);\n          }\n        } else if (!hasPrev) {\n          _this3.keysToEnter.push(key);\n        }\n      });\n\n      currentChildren.forEach(function (child) {\n        var key = child && child.key;\n        if (child && currentlyAnimatingKeys[key]) {\n          return;\n        }\n        var hasNext = child && findChildInChildrenByKey(nextChildren, key);\n        if (showProp) {\n          var showInNow = child.props[showProp];\n          if (hasNext) {\n            var showInNext = findShownChildInChildrenByKey(nextChildren, key, showProp);\n            if (!showInNext && showInNow) {\n              _this3.keysToLeave.push(key);\n            }\n          } else if (showInNow) {\n            _this3.keysToLeave.push(key);\n          }\n        } else if (!hasNext) {\n          _this3.keysToLeave.push(key);\n        }\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var keysToEnter = this.keysToEnter;\n      this.keysToEnter = [];\n      keysToEnter.forEach(this.performEnter);\n      var keysToLeave = this.keysToLeave;\n      this.keysToLeave = [];\n      keysToLeave.forEach(this.performLeave);\n    }\n  }, {\n    key: 'isValidChildByKey',\n    value: function isValidChildByKey(currentChildren, key) {\n      var showProp = this.props.showProp;\n      if (showProp) {\n        return findShownChildInChildrenByKey(currentChildren, key, showProp);\n      }\n      return findChildInChildrenByKey(currentChildren, key);\n    }\n  }, {\n    key: 'stop',\n    value: function stop(key) {\n      delete this.currentlyAnimatingKeys[key];\n      var component = this.childrenRefs[key];\n      if (component) {\n        component.stop();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var props = this.props;\n      this.nextProps = props;\n      var stateChildren = this.state.children;\n      var children = null;\n      if (stateChildren) {\n        children = stateChildren.map(function (child) {\n          if (child === null || child === undefined) {\n            return child;\n          }\n          if (!child.key) {\n            throw new Error('must set key for <rc-animate> children');\n          }\n          return React.createElement(\n            AnimateChild,\n            {\n              key: child.key,\n              ref: function ref(node) {\n                return _this4.childrenRefs[child.key] = node;\n              },\n              animation: props.animation,\n              transitionName: props.transitionName,\n              transitionEnter: props.transitionEnter,\n              transitionAppear: props.transitionAppear,\n              transitionLeave: props.transitionLeave\n            },\n            child\n          );\n        });\n      }\n      var Component = props.component;\n      if (Component) {\n        var passedProps = props;\n        if (typeof Component === 'string') {\n          passedProps = _extends({\n            className: props.className,\n            style: props.style\n          }, props.componentProps);\n        }\n        return React.createElement(\n          Component,\n          passedProps,\n          children\n        );\n      }\n      return children[0] || null;\n    }\n  }]);\n\n  return Animate;\n}(React.Component);\n\nAnimate.propTypes = {\n  component: PropTypes.any,\n  componentProps: PropTypes.object,\n  animation: PropTypes.object,\n  transitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  transitionEnter: PropTypes.bool,\n  transitionAppear: PropTypes.bool,\n  exclusive: PropTypes.bool,\n  transitionLeave: PropTypes.bool,\n  onEnd: PropTypes.func,\n  onEnter: PropTypes.func,\n  onLeave: PropTypes.func,\n  onAppear: PropTypes.func,\n  showProp: PropTypes.string\n};\nAnimate.defaultProps = {\n  animation: {},\n  component: 'span',\n  componentProps: {},\n  transitionEnter: true,\n  transitionLeave: true,\n  transitionAppear: false,\n  onEnd: noop,\n  onEnter: noop,\n  onLeave: noop,\n  onAppear: noop\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.performEnter = function (key) {\n    // may already remove by exclusive\n    if (_this5.childrenRefs[key]) {\n      _this5.currentlyAnimatingKeys[key] = true;\n      _this5.childrenRefs[key].componentWillEnter(_this5.handleDoneAdding.bind(_this5, key, 'enter'));\n    }\n  };\n\n  this.performAppear = function (key) {\n    if (_this5.childrenRefs[key]) {\n      _this5.currentlyAnimatingKeys[key] = true;\n      _this5.childrenRefs[key].componentWillAppear(_this5.handleDoneAdding.bind(_this5, key, 'appear'));\n    }\n  };\n\n  this.handleDoneAdding = function (key, type) {\n    var props = _this5.props;\n    delete _this5.currentlyAnimatingKeys[key];\n    // if update on exclusive mode, skip check\n    if (props.exclusive && props !== _this5.nextProps) {\n      return;\n    }\n    var currentChildren = toArrayChildren(getChildrenFromProps(props));\n    if (!_this5.isValidChildByKey(currentChildren, key)) {\n      // exclusive will not need this\n      _this5.performLeave(key);\n    } else {\n      if (type === 'appear') {\n        if (animUtil.allowAppearCallback(props)) {\n          props.onAppear(key);\n          props.onEnd(key, true);\n        }\n      } else {\n        if (animUtil.allowEnterCallback(props)) {\n          props.onEnter(key);\n          props.onEnd(key, true);\n        }\n      }\n    }\n  };\n\n  this.performLeave = function (key) {\n    // may already remove by exclusive\n    if (_this5.childrenRefs[key]) {\n      _this5.currentlyAnimatingKeys[key] = true;\n      _this5.childrenRefs[key].componentWillLeave(_this5.handleDoneLeaving.bind(_this5, key));\n    }\n  };\n\n  this.handleDoneLeaving = function (key) {\n    var props = _this5.props;\n    delete _this5.currentlyAnimatingKeys[key];\n    // if update on exclusive mode, skip check\n    if (props.exclusive && props !== _this5.nextProps) {\n      return;\n    }\n    var currentChildren = toArrayChildren(getChildrenFromProps(props));\n    // in case state change is too fast\n    if (_this5.isValidChildByKey(currentChildren, key)) {\n      _this5.performEnter(key);\n    } else {\n      var end = function end() {\n        if (animUtil.allowLeaveCallback(props)) {\n          props.onLeave(key);\n          props.onEnd(key, false);\n        }\n      };\n      if (!isSameChildren(_this5.state.children, currentChildren, props.showProp)) {\n        _this5.setState({\n          children: currentChildren\n        }, end);\n      } else {\n        end();\n      }\n    }\n  };\n};\n\nexport default Animate;","import React from 'react';\n\nexport function toArrayChildren(children) {\n  var ret = [];\n  React.Children.forEach(children, function (child) {\n    ret.push(child);\n  });\n  return ret;\n}\n\nexport function findChildInChildrenByKey(children, key) {\n  var ret = null;\n  if (children) {\n    children.forEach(function (child) {\n      if (ret) {\n        return;\n      }\n      if (child && child.key === key) {\n        ret = child;\n      }\n    });\n  }\n  return ret;\n}\n\nexport function findShownChildInChildrenByKey(children, key, showProp) {\n  var ret = null;\n  if (children) {\n    children.forEach(function (child) {\n      if (child && child.key === key && child.props[showProp]) {\n        if (ret) {\n          throw new Error('two child with same key for <rc-animate> children');\n        }\n        ret = child;\n      }\n    });\n  }\n  return ret;\n}\n\nexport function findHiddenChildInChildrenByKey(children, key, showProp) {\n  var found = 0;\n  if (children) {\n    children.forEach(function (child) {\n      if (found) {\n        return;\n      }\n      found = child && child.key === key && !child.props[showProp];\n    });\n  }\n  return found;\n}\n\nexport function isSameChildren(c1, c2, showProp) {\n  var same = c1.length === c2.length;\n  if (same) {\n    c1.forEach(function (child, index) {\n      var child2 = c2[index];\n      if (child && child2) {\n        if (child && !child2 || !child && child2) {\n          same = false;\n        } else if (child.key !== child2.key) {\n          same = false;\n        } else if (showProp && child.props[showProp] !== child2.props[showProp]) {\n          same = false;\n        }\n      }\n    });\n  }\n  return same;\n}\n\nexport function mergeChildren(prev, next) {\n  var ret = [];\n\n  // For each key of `next`, the list of keys to insert before that key in\n  // the combined list\n  var nextChildrenPending = {};\n  var pendingChildren = [];\n  prev.forEach(function (child) {\n    if (child && findChildInChildrenByKey(next, child.key)) {\n      if (pendingChildren.length) {\n        nextChildrenPending[child.key] = pendingChildren;\n        pendingChildren = [];\n      }\n    } else {\n      pendingChildren.push(child);\n    }\n  });\n\n  next.forEach(function (child) {\n    if (child && nextChildrenPending.hasOwnProperty(child.key)) {\n      ret = ret.concat(nextChildrenPending[child.key]);\n    }\n    ret.push(child);\n  });\n\n  ret = ret.concat(pendingChildren);\n\n  return ret;\n}","import _typeof from 'babel-runtime/helpers/typeof';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport cssAnimate, { isCssAnimationSupported } from 'css-animation';\nimport animUtil from './util';\n\nvar transitionMap = {\n  enter: 'transitionEnter',\n  appear: 'transitionAppear',\n  leave: 'transitionLeave'\n};\n\nvar AnimateChild = function (_React$Component) {\n  _inherits(AnimateChild, _React$Component);\n\n  function AnimateChild() {\n    _classCallCheck(this, AnimateChild);\n\n    return _possibleConstructorReturn(this, (AnimateChild.__proto__ || Object.getPrototypeOf(AnimateChild)).apply(this, arguments));\n  }\n\n  _createClass(AnimateChild, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.stop();\n    }\n  }, {\n    key: 'componentWillEnter',\n    value: function componentWillEnter(done) {\n      if (animUtil.isEnterSupported(this.props)) {\n        this.transition('enter', done);\n      } else {\n        done();\n      }\n    }\n  }, {\n    key: 'componentWillAppear',\n    value: function componentWillAppear(done) {\n      if (animUtil.isAppearSupported(this.props)) {\n        this.transition('appear', done);\n      } else {\n        done();\n      }\n    }\n  }, {\n    key: 'componentWillLeave',\n    value: function componentWillLeave(done) {\n      if (animUtil.isLeaveSupported(this.props)) {\n        this.transition('leave', done);\n      } else {\n        // always sync, do not interupt with react component life cycle\n        // update hidden -> animate hidden ->\n        // didUpdate -> animate leave -> unmount (if animate is none)\n        done();\n      }\n    }\n  }, {\n    key: 'transition',\n    value: function transition(animationType, finishCallback) {\n      var _this2 = this;\n\n      var node = ReactDOM.findDOMNode(this);\n      var props = this.props;\n      var transitionName = props.transitionName;\n      var nameIsObj = (typeof transitionName === 'undefined' ? 'undefined' : _typeof(transitionName)) === 'object';\n      this.stop();\n      var end = function end() {\n        _this2.stopper = null;\n        finishCallback();\n      };\n      if ((isCssAnimationSupported || !props.animation[animationType]) && transitionName && props[transitionMap[animationType]]) {\n        var name = nameIsObj ? transitionName[animationType] : transitionName + '-' + animationType;\n        var activeName = name + '-active';\n        if (nameIsObj && transitionName[animationType + 'Active']) {\n          activeName = transitionName[animationType + 'Active'];\n        }\n        this.stopper = cssAnimate(node, {\n          name: name,\n          active: activeName\n        }, end);\n      } else {\n        this.stopper = props.animation[animationType](node, end);\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var stopper = this.stopper;\n      if (stopper) {\n        this.stopper = null;\n        stopper.stop();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return this.props.children;\n    }\n  }]);\n\n  return AnimateChild;\n}(React.Component);\n\nAnimateChild.propTypes = {\n  children: PropTypes.any\n};\nexport default AnimateChild;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _Event = require('./Event');\n\nvar _Event2 = _interopRequireDefault(_Event);\n\nvar _componentClasses = require('component-classes');\n\nvar _componentClasses2 = _interopRequireDefault(_componentClasses);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar isCssAnimationSupported = _Event2[\"default\"].endEvents.length !== 0;\n\n\nvar capitalPrefixes = ['Webkit', 'Moz', 'O',\n// ms is special .... !\n'ms'];\nvar prefixes = ['-webkit-', '-moz-', '-o-', 'ms-', ''];\n\nfunction getStyleProperty(node, name) {\n  // old ff need null, https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle\n  var style = window.getComputedStyle(node, null);\n  var ret = '';\n  for (var i = 0; i < prefixes.length; i++) {\n    ret = style.getPropertyValue(prefixes[i] + name);\n    if (ret) {\n      break;\n    }\n  }\n  return ret;\n}\n\nfunction fixBrowserByTimeout(node) {\n  if (isCssAnimationSupported) {\n    var transitionDelay = parseFloat(getStyleProperty(node, 'transition-delay')) || 0;\n    var transitionDuration = parseFloat(getStyleProperty(node, 'transition-duration')) || 0;\n    var animationDelay = parseFloat(getStyleProperty(node, 'animation-delay')) || 0;\n    var animationDuration = parseFloat(getStyleProperty(node, 'animation-duration')) || 0;\n    var time = Math.max(transitionDuration + transitionDelay, animationDuration + animationDelay);\n    // sometimes, browser bug\n    node.rcEndAnimTimeout = setTimeout(function () {\n      node.rcEndAnimTimeout = null;\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    }, time * 1000 + 200);\n  }\n}\n\nfunction clearBrowserBugTimeout(node) {\n  if (node.rcEndAnimTimeout) {\n    clearTimeout(node.rcEndAnimTimeout);\n    node.rcEndAnimTimeout = null;\n  }\n}\n\nvar cssAnimation = function cssAnimation(node, transitionName, endCallback) {\n  var nameIsObj = (typeof transitionName === 'undefined' ? 'undefined' : _typeof(transitionName)) === 'object';\n  var className = nameIsObj ? transitionName.name : transitionName;\n  var activeClassName = nameIsObj ? transitionName.active : transitionName + '-active';\n  var end = endCallback;\n  var start = void 0;\n  var active = void 0;\n  var nodeClasses = (0, _componentClasses2[\"default\"])(node);\n\n  if (endCallback && Object.prototype.toString.call(endCallback) === '[object Object]') {\n    end = endCallback.end;\n    start = endCallback.start;\n    active = endCallback.active;\n  }\n\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = function (e) {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      clearTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n\n    nodeClasses.remove(className);\n    nodeClasses.remove(activeClassName);\n\n    _Event2[\"default\"].removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null;\n\n    // Usually this optional end is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n    if (end) {\n      end();\n    }\n  };\n\n  _Event2[\"default\"].addEndEventListener(node, node.rcEndListener);\n\n  if (start) {\n    start();\n  }\n  nodeClasses.add(className);\n\n  node.rcAnimTimeout = setTimeout(function () {\n    node.rcAnimTimeout = null;\n    nodeClasses.add(activeClassName);\n    if (active) {\n      setTimeout(active, 0);\n    }\n    fixBrowserByTimeout(node);\n    // 30ms for firefox\n  }, 30);\n\n  return {\n    stop: function stop() {\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    }\n  };\n};\n\ncssAnimation.style = function (node, style, callback) {\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = function (e) {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      clearTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n\n    _Event2[\"default\"].removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null;\n\n    // Usually this optional callback is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n    if (callback) {\n      callback();\n    }\n  };\n\n  _Event2[\"default\"].addEndEventListener(node, node.rcEndListener);\n\n  node.rcAnimTimeout = setTimeout(function () {\n    for (var s in style) {\n      if (style.hasOwnProperty(s)) {\n        node.style[s] = style[s];\n      }\n    }\n    node.rcAnimTimeout = null;\n    fixBrowserByTimeout(node);\n  }, 0);\n};\n\ncssAnimation.setTransition = function (node, p, value) {\n  var property = p;\n  var v = value;\n  if (value === undefined) {\n    v = property;\n    property = '';\n  }\n  property = property || '';\n  capitalPrefixes.forEach(function (prefix) {\n    node.style[prefix + 'Transition' + property] = v;\n  });\n};\n\ncssAnimation.isCssAnimationSupported = isCssAnimationSupported;\n\nexports[\"default\"] = cssAnimation;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar EVENT_NAME_MAP = {\n  transitionend: {\n    transition: 'transitionend',\n    WebkitTransition: 'webkitTransitionEnd',\n    MozTransition: 'mozTransitionEnd',\n    OTransition: 'oTransitionEnd',\n    msTransition: 'MSTransitionEnd'\n  },\n\n  animationend: {\n    animation: 'animationend',\n    WebkitAnimation: 'webkitAnimationEnd',\n    MozAnimation: 'mozAnimationEnd',\n    OAnimation: 'oAnimationEnd',\n    msAnimation: 'MSAnimationEnd'\n  }\n};\n\nvar endEvents = [];\n\nfunction detectEvents() {\n  var testEl = document.createElement('div');\n  var style = testEl.style;\n\n  if (!('AnimationEvent' in window)) {\n    delete EVENT_NAME_MAP.animationend.animation;\n  }\n\n  if (!('TransitionEvent' in window)) {\n    delete EVENT_NAME_MAP.transitionend.transition;\n  }\n\n  for (var baseEventName in EVENT_NAME_MAP) {\n    if (EVENT_NAME_MAP.hasOwnProperty(baseEventName)) {\n      var baseEvents = EVENT_NAME_MAP[baseEventName];\n      for (var styleName in baseEvents) {\n        if (styleName in style) {\n          endEvents.push(baseEvents[styleName]);\n          break;\n        }\n      }\n    }\n  }\n}\n\nif (typeof window !== 'undefined' && typeof document !== 'undefined') {\n  detectEvents();\n}\n\nfunction addEventListener(node, eventName, eventListener) {\n  node.addEventListener(eventName, eventListener, false);\n}\n\nfunction removeEventListener(node, eventName, eventListener) {\n  node.removeEventListener(eventName, eventListener, false);\n}\n\nvar TransitionEvents = {\n  addEndEventListener: function addEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      window.setTimeout(eventListener, 0);\n      return;\n    }\n    endEvents.forEach(function (endEvent) {\n      addEventListener(node, endEvent, eventListener);\n    });\n  },\n\n\n  endEvents: endEvents,\n\n  removeEndEventListener: function removeEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      return;\n    }\n    endEvents.forEach(function (endEvent) {\n      removeEventListener(node, endEvent, eventListener);\n    });\n  }\n};\n\nexports[\"default\"] = TransitionEvents;\nmodule.exports = exports['default'];","/**\n * Module dependencies.\n */\n\ntry {\n  var index = require('indexof');\n} catch (err) {\n  var index = require('component-indexof');\n}\n\n/**\n * Whitespace regexp.\n */\n\nvar re = /\\s+/;\n\n/**\n * toString reference.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Wrap `el` in a `ClassList`.\n *\n * @param {Element} el\n * @return {ClassList}\n * @api public\n */\n\nmodule.exports = function(el){\n  return new ClassList(el);\n};\n\n/**\n * Initialize a new ClassList for `el`.\n *\n * @param {Element} el\n * @api private\n */\n\nfunction ClassList(el) {\n  if (!el || !el.nodeType) {\n    throw new Error('A DOM element reference is required');\n  }\n  this.el = el;\n  this.list = el.classList;\n}\n\n/**\n * Add class `name` if not already present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.add = function(name){\n  // classList\n  if (this.list) {\n    this.list.add(name);\n    return this;\n  }\n\n  // fallback\n  var arr = this.array();\n  var i = index(arr, name);\n  if (!~i) arr.push(name);\n  this.el.className = arr.join(' ');\n  return this;\n};\n\n/**\n * Remove class `name` when present, or\n * pass a regular expression to remove\n * any which match.\n *\n * @param {String|RegExp} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.remove = function(name){\n  if ('[object RegExp]' == toString.call(name)) {\n    return this.removeMatching(name);\n  }\n\n  // classList\n  if (this.list) {\n    this.list.remove(name);\n    return this;\n  }\n\n  // fallback\n  var arr = this.array();\n  var i = index(arr, name);\n  if (~i) arr.splice(i, 1);\n  this.el.className = arr.join(' ');\n  return this;\n};\n\n/**\n * Remove all classes matching `re`.\n *\n * @param {RegExp} re\n * @return {ClassList}\n * @api private\n */\n\nClassList.prototype.removeMatching = function(re){\n  var arr = this.array();\n  for (var i = 0; i < arr.length; i++) {\n    if (re.test(arr[i])) {\n      this.remove(arr[i]);\n    }\n  }\n  return this;\n};\n\n/**\n * Toggle class `name`, can force state via `force`.\n *\n * For browsers that support classList, but do not support `force` yet,\n * the mistake will be detected and corrected.\n *\n * @param {String} name\n * @param {Boolean} force\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.toggle = function(name, force){\n  // classList\n  if (this.list) {\n    if (\"undefined\" !== typeof force) {\n      if (force !== this.list.toggle(name, force)) {\n        this.list.toggle(name); // toggle again to correct\n      }\n    } else {\n      this.list.toggle(name);\n    }\n    return this;\n  }\n\n  // fallback\n  if (\"undefined\" !== typeof force) {\n    if (!force) {\n      this.remove(name);\n    } else {\n      this.add(name);\n    }\n  } else {\n    if (this.has(name)) {\n      this.remove(name);\n    } else {\n      this.add(name);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return an array of classes.\n *\n * @return {Array}\n * @api public\n */\n\nClassList.prototype.array = function(){\n  var className = this.el.getAttribute('class') || '';\n  var str = className.replace(/^\\s+|\\s+$/g, '');\n  var arr = str.split(re);\n  if ('' === arr[0]) arr.shift();\n  return arr;\n};\n\n/**\n * Check if class `name` is present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.has =\nClassList.prototype.contains = function(name){\n  return this.list\n    ? this.list.contains(name)\n    : !! ~index(this.array(), name);\n};\n","module.exports = function(arr, obj){\n  if (arr.indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","var util = {\n  isAppearSupported: function isAppearSupported(props) {\n    return props.transitionName && props.transitionAppear || props.animation.appear;\n  },\n  isEnterSupported: function isEnterSupported(props) {\n    return props.transitionName && props.transitionEnter || props.animation.enter;\n  },\n  isLeaveSupported: function isLeaveSupported(props) {\n    return props.transitionName && props.transitionLeave || props.animation.leave;\n  },\n  allowAppearCallback: function allowAppearCallback(props) {\n    return props.transitionAppear || props.animation.appear;\n  },\n  allowEnterCallback: function allowEnterCallback(props) {\n    return props.transitionEnter || props.animation.enter;\n  },\n  allowLeaveCallback: function allowLeaveCallback(props) {\n    return props.transitionLeave || props.animation.leave;\n  }\n};\nexport default util;","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport LazyRenderBox from './LazyRenderBox';\n\nvar PopupInner = function (_Component) {\n  _inherits(PopupInner, _Component);\n\n  function PopupInner() {\n    _classCallCheck(this, PopupInner);\n\n    return _possibleConstructorReturn(this, (PopupInner.__proto__ || Object.getPrototypeOf(PopupInner)).apply(this, arguments));\n  }\n\n  _createClass(PopupInner, [{\n    key: 'render',\n    value: function render() {\n      var props = this.props;\n      var className = props.className;\n      if (!props.visible) {\n        className += ' ' + props.hiddenClassName;\n      }\n      return React.createElement(\n        'div',\n        {\n          className: className,\n          onMouseEnter: props.onMouseEnter,\n          onMouseLeave: props.onMouseLeave,\n          style: props.style\n        },\n        React.createElement(\n          LazyRenderBox,\n          { className: props.prefixCls + '-content', visible: props.visible },\n          props.children\n        )\n      );\n    }\n  }]);\n\n  return PopupInner;\n}(Component);\n\nPopupInner.propTypes = {\n  hiddenClassName: PropTypes.string,\n  className: PropTypes.string,\n  prefixCls: PropTypes.string,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  children: PropTypes.any\n};\n\n\nexport default PopupInner;","import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nvar LazyRenderBox = function (_Component) {\n  _inherits(LazyRenderBox, _Component);\n\n  function LazyRenderBox() {\n    _classCallCheck(this, LazyRenderBox);\n\n    return _possibleConstructorReturn(this, (LazyRenderBox.__proto__ || Object.getPrototypeOf(LazyRenderBox)).apply(this, arguments));\n  }\n\n  _createClass(LazyRenderBox, [{\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps) {\n      return nextProps.hiddenClassName || nextProps.visible;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          hiddenClassName = _props.hiddenClassName,\n          visible = _props.visible,\n          props = _objectWithoutProperties(_props, ['hiddenClassName', 'visible']);\n\n      if (hiddenClassName || React.Children.count(props.children) > 1) {\n        if (!visible && hiddenClassName) {\n          props.className += ' ' + hiddenClassName;\n        }\n        return React.createElement('div', props);\n      }\n\n      return React.Children.only(props.children);\n    }\n  }]);\n\n  return LazyRenderBox;\n}(Component);\n\nLazyRenderBox.propTypes = {\n  children: PropTypes.any,\n  className: PropTypes.string,\n  visible: PropTypes.bool,\n  hiddenClassName: PropTypes.string\n};\n\n\nexport default LazyRenderBox;","import _extends from 'babel-runtime/helpers/extends';\nfunction isPointsEq(a1, a2) {\n  return a1[0] === a2[0] && a1[1] === a2[1];\n}\n\nexport function getAlignFromPlacement(builtinPlacements, placementStr, align) {\n  var baseAlign = builtinPlacements[placementStr] || {};\n  return _extends({}, baseAlign, align);\n}\n\nexport function getPopupClassNameFromAlign(builtinPlacements, prefixCls, align) {\n  var points = align.points;\n  for (var placement in builtinPlacements) {\n    if (builtinPlacements.hasOwnProperty(placement)) {\n      if (isPointsEq(builtinPlacements[placement].points, points)) {\n        return prefixCls + '-placement-' + placement;\n      }\n    }\n  }\n  return '';\n}\n\nexport function saveRef(name, component) {\n  this[name] = component;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nexports['default'] = getContainerRenderMixin;\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction defaultGetContainer() {\n  var container = document.createElement('div');\n  document.body.appendChild(container);\n  return container;\n}\n\nfunction getContainerRenderMixin(config) {\n  var _config$autoMount = config.autoMount,\n      autoMount = _config$autoMount === undefined ? true : _config$autoMount,\n      _config$autoDestroy = config.autoDestroy,\n      autoDestroy = _config$autoDestroy === undefined ? true : _config$autoDestroy,\n      isVisible = config.isVisible,\n      getComponent = config.getComponent,\n      _config$getContainer = config.getContainer,\n      getContainer = _config$getContainer === undefined ? defaultGetContainer : _config$getContainer;\n\n\n  var mixin = void 0;\n\n  function _renderComponent(instance, componentArg, ready) {\n    if (!isVisible || instance._component || isVisible(instance)) {\n      if (!instance._container) {\n        instance._container = getContainer(instance);\n      }\n      var component = void 0;\n      if (instance.getComponent) {\n        component = instance.getComponent(componentArg);\n      } else {\n        component = getComponent(instance, componentArg);\n      }\n      _reactDom2['default'].unstable_renderSubtreeIntoContainer(instance, component, instance._container, function callback() {\n        instance._component = this;\n        if (ready) {\n          ready.call(this);\n        }\n      });\n    }\n  }\n\n  if (autoMount) {\n    mixin = (0, _extends3['default'])({}, mixin, {\n      componentDidMount: function componentDidMount() {\n        _renderComponent(this);\n      },\n      componentDidUpdate: function componentDidUpdate() {\n        _renderComponent(this);\n      }\n    });\n  }\n\n  if (!autoMount || !autoDestroy) {\n    mixin = (0, _extends3['default'])({}, mixin, {\n      renderComponent: function renderComponent(componentArg, ready) {\n        _renderComponent(this, componentArg, ready);\n      }\n    });\n  }\n\n  function _removeContainer(instance) {\n    if (instance._container) {\n      var container = instance._container;\n      _reactDom2['default'].unmountComponentAtNode(container);\n      container.parentNode.removeChild(container);\n      instance._container = null;\n    }\n  }\n\n  if (autoDestroy) {\n    mixin = (0, _extends3['default'])({}, mixin, {\n      componentWillUnmount: function componentWillUnmount() {\n        _removeContainer(this);\n      }\n    });\n  } else {\n    mixin = (0, _extends3['default'])({}, mixin, {\n      removeContainer: function removeContainer() {\n        _removeContainer(this);\n      }\n    });\n  }\n\n  return mixin;\n}\nmodule.exports = exports['default'];","var autoAdjustOverflow = {\n  adjustX: 1,\n  adjustY: 1\n};\n\nvar targetOffset = [0, 0];\n\nexport var placements = {\n  left: {\n    points: ['cr', 'cl'],\n    overflow: autoAdjustOverflow,\n    offset: [-4, 0],\n    targetOffset: targetOffset\n  },\n  right: {\n    points: ['cl', 'cr'],\n    overflow: autoAdjustOverflow,\n    offset: [4, 0],\n    targetOffset: targetOffset\n  },\n  top: {\n    points: ['bc', 'tc'],\n    overflow: autoAdjustOverflow,\n    offset: [0, -4],\n    targetOffset: targetOffset\n  },\n  bottom: {\n    points: ['tc', 'bc'],\n    overflow: autoAdjustOverflow,\n    offset: [0, 4],\n    targetOffset: targetOffset\n  },\n  topLeft: {\n    points: ['bl', 'tl'],\n    overflow: autoAdjustOverflow,\n    offset: [0, -4],\n    targetOffset: targetOffset\n  },\n  leftTop: {\n    points: ['tr', 'tl'],\n    overflow: autoAdjustOverflow,\n    offset: [-4, 0],\n    targetOffset: targetOffset\n  },\n  topRight: {\n    points: ['br', 'tr'],\n    overflow: autoAdjustOverflow,\n    offset: [0, -4],\n    targetOffset: targetOffset\n  },\n  rightTop: {\n    points: ['tl', 'tr'],\n    overflow: autoAdjustOverflow,\n    offset: [4, 0],\n    targetOffset: targetOffset\n  },\n  bottomRight: {\n    points: ['tr', 'br'],\n    overflow: autoAdjustOverflow,\n    offset: [0, 4],\n    targetOffset: targetOffset\n  },\n  rightBottom: {\n    points: ['bl', 'br'],\n    overflow: autoAdjustOverflow,\n    offset: [4, 0],\n    targetOffset: targetOffset\n  },\n  bottomLeft: {\n    points: ['tl', 'bl'],\n    overflow: autoAdjustOverflow,\n    offset: [0, 4],\n    targetOffset: targetOffset\n  },\n  leftBottom: {\n    points: ['br', 'bl'],\n    overflow: autoAdjustOverflow,\n    offset: [-4, 0],\n    targetOffset: targetOffset\n  }\n};\n\nexport default placements;","'use strict';\n\nvar assign = require('object-assign'),\n\tPropTypes = require('prop-types'),\n    createClass = require('create-react-class'),\n\tmoment = require('moment'),\n\tReact = require('react'),\n\tCalendarContainer = require('./src/CalendarContainer')\n;\n\nvar TYPES = PropTypes;\nvar Datetime = createClass({\n\tpropTypes: {\n\t\t// value: TYPES.object | TYPES.string,\n\t\t// defaultValue: TYPES.object | TYPES.string,\n\t\tonFocus: TYPES.func,\n\t\tonBlur: TYPES.func,\n\t\tonChange: TYPES.func,\n\t\tonViewModeChange: TYPES.func,\n\t\tlocale: TYPES.string,\n\t\tutc: TYPES.bool,\n\t\tinput: TYPES.bool,\n\t\t// dateFormat: TYPES.string | TYPES.bool,\n\t\t// timeFormat: TYPES.string | TYPES.bool,\n\t\tinputProps: TYPES.object,\n\t\ttimeConstraints: TYPES.object,\n\t\tviewMode: TYPES.oneOf(['years', 'months', 'days', 'time']),\n\t\tisValidDate: TYPES.func,\n\t\topen: TYPES.bool,\n\t\tstrictParsing: TYPES.bool,\n\t\tcloseOnSelect: TYPES.bool,\n\t\tcloseOnTab: TYPES.bool\n\t},\n\n\tgetDefaultProps: function() {\n\t\tvar nof = function() {};\n\t\treturn {\n\t\t\tclassName: '',\n\t\t\tdefaultValue: '',\n\t\t\tinputProps: {},\n\t\t\tinput: true,\n\t\t\tonFocus: nof,\n\t\t\tonBlur: nof,\n\t\t\tonChange: nof,\n\t\t\tonViewModeChange: nof,\n\t\t\ttimeFormat: true,\n\t\t\ttimeConstraints: {},\n\t\t\tdateFormat: true,\n\t\t\tstrictParsing: true,\n\t\t\tcloseOnSelect: false,\n\t\t\tcloseOnTab: true,\n\t\t\tutc: false\n\t\t};\n\t},\n\n\tgetInitialState: function() {\n\t\tvar state = this.getStateFromProps( this.props );\n\n\t\tif ( state.open === undefined )\n\t\t\tstate.open = !this.props.input;\n\n\t\tstate.currentView = this.props.dateFormat ? (this.props.viewMode || state.updateOn || 'days') : 'time';\n\n\t\treturn state;\n\t},\n\n\tgetStateFromProps: function( props ) {\n\t\tvar formats = this.getFormats( props ),\n\t\t\tdate = props.value || props.defaultValue,\n\t\t\tselectedDate, viewDate, updateOn, inputValue\n\t\t;\n\n\t\tif ( date && typeof date === 'string' )\n\t\t\tselectedDate = this.localMoment( date, formats.datetime );\n\t\telse if ( date )\n\t\t\tselectedDate = this.localMoment( date );\n\n\t\tif ( selectedDate && !selectedDate.isValid() )\n\t\t\tselectedDate = null;\n\n\t\tviewDate = selectedDate ?\n\t\t\tselectedDate.clone().startOf('month') :\n\t\t\tthis.localMoment().startOf('month')\n\t\t;\n\n\t\tupdateOn = this.getUpdateOn(formats);\n\n\t\tif ( selectedDate )\n\t\t\tinputValue = selectedDate.format(formats.datetime);\n\t\telse if ( date.isValid && !date.isValid() )\n\t\t\tinputValue = '';\n\t\telse\n\t\t\tinputValue = date || '';\n\n\t\treturn {\n\t\t\tupdateOn: updateOn,\n\t\t\tinputFormat: formats.datetime,\n\t\t\tviewDate: viewDate,\n\t\t\tselectedDate: selectedDate,\n\t\t\tinputValue: inputValue,\n\t\t\topen: props.open\n\t\t};\n\t},\n\n\tgetUpdateOn: function( formats ) {\n        if ( formats.date.match(/[lLD]/) ) {\n\t\t\treturn 'days';\n\t\t} else if ( formats.date.indexOf('M') !== -1 ) {\n\t\t\treturn 'months';\n\t\t} else if ( formats.date.indexOf('Y') !== -1 ) {\n\t\t\treturn 'years';\n\t\t}\n\n\t\treturn 'days';\n\t},\n\n\tgetFormats: function( props ) {\n\t\tvar formats = {\n\t\t\t\tdate: props.dateFormat || '',\n\t\t\t\ttime: props.timeFormat || ''\n\t\t\t},\n\t\t\tlocale = this.localMoment( props.date, null, props ).localeData()\n\t\t;\n\n\t\tif ( formats.date === true ) {\n\t\t\tformats.date = locale.longDateFormat('L');\n\t\t}\n\t\telse if ( this.getUpdateOn(formats) !== 'days' ) {\n\t\t\tformats.time = '';\n\t\t}\n\n\t\tif ( formats.time === true ) {\n\t\t\tformats.time = locale.longDateFormat('LT');\n\t\t}\n\n\t\tformats.datetime = formats.date && formats.time ?\n\t\t\tformats.date + ' ' + formats.time :\n\t\t\tformats.date || formats.time\n\t\t;\n\n\t\treturn formats;\n\t},\n\n\tcomponentWillReceiveProps: function( nextProps ) {\n\t\tvar formats = this.getFormats( nextProps ),\n\t\t\tupdatedState = {}\n\t\t;\n\n\t\tif ( nextProps.value !== this.props.value ||\n\t\t\tformats.datetime !== this.getFormats( this.props ).datetime ) {\n\t\t\tupdatedState = this.getStateFromProps( nextProps );\n\t\t}\n\n\t\tif ( updatedState.open === undefined ) {\n\t\t\tif ( this.props.closeOnSelect && this.state.currentView !== 'time' ) {\n\t\t\t\tupdatedState.open = false;\n\t\t\t} else {\n\t\t\t\tupdatedState.open = this.state.open;\n\t\t\t}\n\t\t}\n\n\t\tif ( nextProps.viewMode !== this.props.viewMode ) {\n\t\t\tupdatedState.currentView = nextProps.viewMode;\n\t\t}\n\n\t\tif ( nextProps.locale !== this.props.locale ) {\n\t\t\tif ( this.state.viewDate ) {\n\t\t\t\tvar updatedViewDate = this.state.viewDate.clone().locale( nextProps.locale );\n\t\t\t\tupdatedState.viewDate = updatedViewDate;\n\t\t\t}\n\t\t\tif ( this.state.selectedDate ) {\n\t\t\t\tvar updatedSelectedDate = this.state.selectedDate.clone().locale( nextProps.locale );\n\t\t\t\tupdatedState.selectedDate = updatedSelectedDate;\n\t\t\t\tupdatedState.inputValue = updatedSelectedDate.format( formats.datetime );\n\t\t\t}\n\t\t}\n\n\t\tif ( nextProps.utc !== this.props.utc ) {\n\t\t\tif ( nextProps.utc ) {\n\t\t\t\tif ( this.state.viewDate )\n\t\t\t\t\tupdatedState.viewDate = this.state.viewDate.clone().utc();\n\t\t\t\tif ( this.state.selectedDate ) {\n\t\t\t\t\tupdatedState.selectedDate = this.state.selectedDate.clone().utc();\n\t\t\t\t\tupdatedState.inputValue = updatedState.selectedDate.format( formats.datetime );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( this.state.viewDate )\n\t\t\t\t\tupdatedState.viewDate = this.state.viewDate.clone().local();\n\t\t\t\tif ( this.state.selectedDate ) {\n\t\t\t\t\tupdatedState.selectedDate = this.state.selectedDate.clone().local();\n\t\t\t\t\tupdatedState.inputValue = updatedState.selectedDate.format(formats.datetime);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.setState( updatedState );\n\t},\n\n\tonInputChange: function( e ) {\n\t\tvar value = e.target === null ? e : e.target.value,\n\t\t\tlocalMoment = this.localMoment( value, this.state.inputFormat ),\n\t\t\tupdate = { inputValue: value }\n\t\t;\n\n\t\tif ( localMoment.isValid() && !this.props.value ) {\n\t\t\tupdate.selectedDate = localMoment;\n\t\t\tupdate.viewDate = localMoment.clone().startOf('month');\n\t\t} else {\n\t\t\tupdate.selectedDate = null;\n\t\t}\n\n\t\treturn this.setState( update, function() {\n\t\t\treturn this.props.onChange( localMoment.isValid() ? localMoment : this.state.inputValue );\n\t\t});\n\t},\n\n\tonInputKey: function( e ) {\n\t\tif ( e.which === 9 && this.props.closeOnTab ) {\n\t\t\tthis.closeCalendar();\n\t\t}\n\t},\n\n\tshowView: function( view ) {\n\t\tvar me = this;\n\t\treturn function() {\n\t\t\tme.state.currentView !== view && me.props.onViewModeChange( view );\n\t\t\tme.setState({ currentView: view });\n\t\t};\n\t},\n\n\tsetDate: function( type ) {\n\t\tvar me = this,\n\t\t\tnextViews = {\n\t\t\t\tmonth: 'days',\n\t\t\t\tyear: 'months'\n\t\t\t}\n\t\t;\n\t\treturn function( e ) {\n\t\t\tme.setState({\n\t\t\t\tviewDate: me.state.viewDate.clone()[ type ]( parseInt(e.target.getAttribute('data-value'), 10) ).startOf( type ),\n\t\t\t\tcurrentView: nextViews[ type ]\n\t\t\t});\n\t\t\tme.props.onViewModeChange( nextViews[ type ] );\n\t\t};\n\t},\n\n\taddTime: function( amount, type, toSelected ) {\n\t\treturn this.updateTime( 'add', amount, type, toSelected );\n\t},\n\n\tsubtractTime: function( amount, type, toSelected ) {\n\t\treturn this.updateTime( 'subtract', amount, type, toSelected );\n\t},\n\n\tupdateTime: function( op, amount, type, toSelected ) {\n\t\tvar me = this;\n\n\t\treturn function() {\n\t\t\tvar update = {},\n\t\t\t\tdate = toSelected ? 'selectedDate' : 'viewDate'\n\t\t\t;\n\n\t\t\tupdate[ date ] = me.state[ date ].clone()[ op ]( amount, type );\n\n\t\t\tme.setState( update );\n\t\t};\n\t},\n\n\tallowedSetTime: ['hours', 'minutes', 'seconds', 'milliseconds'],\n\tsetTime: function( type, value ) {\n\t\tvar index = this.allowedSetTime.indexOf( type ) + 1,\n\t\t\tstate = this.state,\n\t\t\tdate = (state.selectedDate || state.viewDate).clone(),\n\t\t\tnextType\n\t\t;\n\n\t\t// It is needed to set all the time properties\n\t\t// to not to reset the time\n\t\tdate[ type ]( value );\n\t\tfor (; index < this.allowedSetTime.length; index++) {\n\t\t\tnextType = this.allowedSetTime[index];\n\t\t\tdate[ nextType ]( date[nextType]() );\n\t\t}\n\n\t\tif ( !this.props.value ) {\n\t\t\tthis.setState({\n\t\t\t\tselectedDate: date,\n\t\t\t\tinputValue: date.format( state.inputFormat )\n\t\t\t});\n\t\t}\n\t\tthis.props.onChange( date );\n\t},\n\n\tupdateSelectedDate: function( e, close ) {\n\t\tvar target = e.target,\n\t\t\tmodifier = 0,\n\t\t\tviewDate = this.state.viewDate,\n\t\t\tcurrentDate = this.state.selectedDate || viewDate,\n\t\t\tdate\n\t\t;\n\n\t\tif (target.className.indexOf('rdtDay') !== -1) {\n\t\t\tif (target.className.indexOf('rdtNew') !== -1)\n\t\t\t\tmodifier = 1;\n\t\t\telse if (target.className.indexOf('rdtOld') !== -1)\n\t\t\t\tmodifier = -1;\n\n\t\t\tdate = viewDate.clone()\n\t\t\t\t.month( viewDate.month() + modifier )\n\t\t\t\t.date( parseInt( target.getAttribute('data-value'), 10 ) );\n\t\t} else if (target.className.indexOf('rdtMonth') !== -1) {\n\t\t\tdate = viewDate.clone()\n\t\t\t\t.month( parseInt( target.getAttribute('data-value'), 10 ) )\n\t\t\t\t.date( currentDate.date() );\n\t\t} else if (target.className.indexOf('rdtYear') !== -1) {\n\t\t\tdate = viewDate.clone()\n\t\t\t\t.month( currentDate.month() )\n\t\t\t\t.date( currentDate.date() )\n\t\t\t\t.year( parseInt( target.getAttribute('data-value'), 10 ) );\n\t\t}\n\n\t\tdate.hours( currentDate.hours() )\n\t\t\t.minutes( currentDate.minutes() )\n\t\t\t.seconds( currentDate.seconds() )\n\t\t\t.milliseconds( currentDate.milliseconds() );\n\n\t\tif ( !this.props.value ) {\n\t\t\tvar open = !( this.props.closeOnSelect && close );\n\t\t\tif ( !open ) {\n\t\t\t\tthis.props.onBlur( date );\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tselectedDate: date,\n\t\t\t\tviewDate: date.clone().startOf('month'),\n\t\t\t\tinputValue: date.format( this.state.inputFormat ),\n\t\t\t\topen: open\n\t\t\t});\n\t\t} else {\n\t\t\tif ( this.props.closeOnSelect && close ) {\n\t\t\t\tthis.closeCalendar();\n\t\t\t}\n\t\t}\n\n\t\tthis.props.onChange( date );\n\t},\n\n\topenCalendar: function() {\n\t\tif (!this.state.open) {\n\t\t\tthis.setState({ open: true }, function() {\n\t\t\t\tthis.props.onFocus();\n\t\t\t});\n\t\t}\n\t},\n\n\tcloseCalendar: function() {\n\t\tthis.setState({ open: false }, function () {\n\t\t\tthis.props.onBlur( this.state.selectedDate || this.state.inputValue );\n\t\t});\n\t},\n\n\thandleClickOutside: function() {\n\t\tif ( this.props.input && this.state.open && !this.props.open ) {\n\t\t\tthis.setState({ open: false }, function() {\n\t\t\t\tthis.props.onBlur( this.state.selectedDate || this.state.inputValue );\n\t\t\t});\n\t\t}\n\t},\n\n\tlocalMoment: function( date, format, props ) {\n\t\tprops = props || this.props;\n\t\tvar momentFn = props.utc ? moment.utc : moment;\n\t\tvar m = momentFn( date, format, props.strictParsing );\n\t\tif ( props.locale )\n\t\t\tm.locale( props.locale );\n\t\treturn m;\n\t},\n\n\tcomponentProps: {\n\t\tfromProps: ['value', 'isValidDate', 'renderDay', 'renderMonth', 'renderYear', 'timeConstraints'],\n\t\tfromState: ['viewDate', 'selectedDate', 'updateOn'],\n\t\tfromThis: ['setDate', 'setTime', 'showView', 'addTime', 'subtractTime', 'updateSelectedDate', 'localMoment', 'handleClickOutside']\n\t},\n\n\tgetComponentProps: function() {\n\t\tvar me = this,\n\t\t\tformats = this.getFormats( this.props ),\n\t\t\tprops = {dateFormat: formats.date, timeFormat: formats.time}\n\t\t;\n\n\t\tthis.componentProps.fromProps.forEach( function( name ) {\n\t\t\tprops[ name ] = me.props[ name ];\n\t\t});\n\t\tthis.componentProps.fromState.forEach( function( name ) {\n\t\t\tprops[ name ] = me.state[ name ];\n\t\t});\n\t\tthis.componentProps.fromThis.forEach( function( name ) {\n\t\t\tprops[ name ] = me[ name ];\n\t\t});\n\n\t\treturn props;\n\t},\n\n\trender: function() {\n\t\tvar className = 'rdt' + (this.props.className ?\n                  ( Array.isArray( this.props.className ) ?\n                  ' ' + this.props.className.join( ' ' ) : ' ' + this.props.className) : ''),\n\t\t\tchildren = []\n\t\t;\n\n\t\tif ( this.props.input ) {\n\t\t\tchildren = [ React.createElement('input', assign({\n\t\t\t\tkey: 'i',\n\t\t\t\ttype: 'text',\n\t\t\t\tclassName: 'form-control',\n\t\t\t\tonFocus: this.openCalendar,\n\t\t\t\tonChange: this.onInputChange,\n\t\t\t\tonKeyDown: this.onInputKey,\n\t\t\t\tvalue: this.state.inputValue\n\t\t\t}, this.props.inputProps ))];\n\t\t} else {\n\t\t\tclassName += ' rdtStatic';\n\t\t}\n\n\t\tif ( this.state.open )\n\t\t\tclassName += ' rdtOpen';\n\n\t\treturn React.createElement('div', {className: className}, children.concat(\n\t\t\tReact.createElement('div',\n\t\t\t\t{ key: 'dt', className: 'rdtPicker' },\n\t\t\t\tReact.createElement( CalendarContainer, {view: this.state.currentView, viewProps: this.getComponentProps(), onClickOutside: this.handleClickOutside })\n\t\t\t)\n\t\t));\n\t}\n});\n\n// Make moment accessible through the Datetime class\nDatetime.moment = moment;\n\nmodule.exports = Datetime;\n","'use strict';\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction ToObject(val) {\n\tif (val == null) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction ownEnumerableKeys(obj) {\n\tvar keys = Object.getOwnPropertyNames(obj);\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tkeys = keys.concat(Object.getOwnPropertySymbols(obj));\n\t}\n\n\treturn keys.filter(function (key) {\n\t\treturn propIsEnumerable.call(obj, key);\n\t});\n}\n\nmodule.exports = Object.assign || function (target, source) {\n\tvar from;\n\tvar keys;\n\tvar to = ToObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = arguments[s];\n\t\tkeys = ownEnumerableKeys(Object(from));\n\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tto[keys[i]] = from[keys[i]];\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__581__;","'use strict';\n\nvar React = require('react'),\n  createClass = require('create-react-class'),\n  DaysView = require('./DaysView'),\n  MonthsView = require('./MonthsView'),\n  YearsView = require('./YearsView'),\n  TimeView = require('./TimeView')\n;\n\nvar CalendarContainer = createClass({\n\tviewComponents: {\n\t\tdays: DaysView,\n\t\tmonths: MonthsView,\n\t\tyears: YearsView,\n\t\ttime: TimeView\n\t},\n\n  render: function() {\n    return React.createElement( this.viewComponents[ this.props.view ], this.props.viewProps );\n  }\n});\n\nmodule.exports = CalendarContainer;\n","'use strict';\n\nvar React = require('react'),\n    createClass = require('create-react-class'),\n\tmoment = require('moment'),\n\tonClickOutside = require('react-onclickoutside')\n;\n\nvar DateTimePickerDays = onClickOutside( createClass({\n\trender: function() {\n\t\tvar footer = this.renderFooter(),\n\t\t\tdate = this.props.viewDate,\n\t\t\tlocale = date.localeData(),\n\t\t\ttableChildren\n\t\t;\n\n\t\ttableChildren = [\n\t\t\tReact.createElement('thead', { key: 'th' }, [\n\t\t\t\tReact.createElement('tr', { key: 'h' }, [\n\t\t\t\t\tReact.createElement('th', { key: 'p', className: 'rdtPrev', onClick: this.props.subtractTime( 1, 'months' )}, React.createElement('span', {}, '' )),\n\t\t\t\t\tReact.createElement('th', { key: 's', className: 'rdtSwitch', onClick: this.props.showView( 'months' ), colSpan: 5, 'data-value': this.props.viewDate.month() }, locale.months( date ) + ' ' + date.year() ),\n\t\t\t\t\tReact.createElement('th', { key: 'n', className: 'rdtNext', onClick: this.props.addTime( 1, 'months' )}, React.createElement('span', {}, '' ))\n\t\t\t\t]),\n\t\t\t\tReact.createElement('tr', { key: 'd'}, this.getDaysOfWeek( locale ).map( function( day, index ) { return React.createElement('th', { key: day + index, className: 'dow'}, day ); }) )\n\t\t\t]),\n\t\t\tReact.createElement('tbody', { key: 'tb' }, this.renderDays())\n\t\t];\n\n\t\tif ( footer )\n\t\t\ttableChildren.push( footer );\n\n\t\treturn React.createElement('div', { className: 'rdtDays' },\n\t\t\tReact.createElement('table', {}, tableChildren )\n\t\t);\n\t},\n\n\t/**\n\t * Get a list of the days of the week\n\t * depending on the current locale\n\t * @return {array} A list with the shortname of the days\n\t */\n\tgetDaysOfWeek: function( locale ) {\n\t\tvar days = locale._weekdaysMin,\n\t\t\tfirst = locale.firstDayOfWeek(),\n\t\t\tdow = [],\n\t\t\ti = 0\n\t\t;\n\n\t\tdays.forEach( function( day ) {\n\t\t\tdow[ (7 + ( i++ ) - first) % 7 ] = day;\n\t\t});\n\n\t\treturn dow;\n\t},\n\n\trenderDays: function() {\n\t\tvar date = this.props.viewDate,\n\t\t\tselected = this.props.selectedDate && this.props.selectedDate.clone(),\n\t\t\tprevMonth = date.clone().subtract( 1, 'months' ),\n\t\t\tcurrentYear = date.year(),\n\t\t\tcurrentMonth = date.month(),\n\t\t\tweeks = [],\n\t\t\tdays = [],\n\t\t\trenderer = this.props.renderDay || this.renderDay,\n\t\t\tisValid = this.props.isValidDate || this.alwaysValidDate,\n\t\t\tclasses, isDisabled, dayProps, currentDate\n\t\t;\n\n\t\t// Go to the last week of the previous month\n\t\tprevMonth.date( prevMonth.daysInMonth() ).startOf( 'week' );\n\t\tvar lastDay = prevMonth.clone().add( 42, 'd' );\n\n\t\twhile ( prevMonth.isBefore( lastDay ) ) {\n\t\t\tclasses = 'rdtDay';\n\t\t\tcurrentDate = prevMonth.clone();\n\n\t\t\tif ( ( prevMonth.year() === currentYear && prevMonth.month() < currentMonth ) || ( prevMonth.year() < currentYear ) )\n\t\t\t\tclasses += ' rdtOld';\n\t\t\telse if ( ( prevMonth.year() === currentYear && prevMonth.month() > currentMonth ) || ( prevMonth.year() > currentYear ) )\n\t\t\t\tclasses += ' rdtNew';\n\n\t\t\tif ( selected && prevMonth.isSame( selected, 'day' ) )\n\t\t\t\tclasses += ' rdtActive';\n\n\t\t\tif ( prevMonth.isSame( moment(), 'day' ) )\n\t\t\t\tclasses += ' rdtToday';\n\n\t\t\tisDisabled = !isValid( currentDate, selected );\n\t\t\tif ( isDisabled )\n\t\t\t\tclasses += ' rdtDisabled';\n\n\t\t\tdayProps = {\n\t\t\t\tkey: prevMonth.format( 'M_D' ),\n\t\t\t\t'data-value': prevMonth.date(),\n\t\t\t\tclassName: classes\n\t\t\t};\n\n\t\t\tif ( !isDisabled )\n\t\t\t\tdayProps.onClick = this.updateSelectedDate;\n\n\t\t\tdays.push( renderer( dayProps, currentDate, selected ) );\n\n\t\t\tif ( days.length === 7 ) {\n\t\t\t\tweeks.push( React.createElement('tr', { key: prevMonth.format( 'M_D' )}, days ) );\n\t\t\t\tdays = [];\n\t\t\t}\n\n\t\t\tprevMonth.add( 1, 'd' );\n\t\t}\n\n\t\treturn weeks;\n\t},\n\n\tupdateSelectedDate: function( event ) {\n\t\tthis.props.updateSelectedDate( event, true );\n\t},\n\n\trenderDay: function( props, currentDate ) {\n\t\treturn React.createElement('td',  props, currentDate.date() );\n\t},\n\n\trenderFooter: function() {\n\t\tif ( !this.props.timeFormat )\n\t\t\treturn '';\n\n\t\tvar date = this.props.selectedDate || this.props.viewDate;\n\n\t\treturn React.createElement('tfoot', { key: 'tf'},\n\t\t\tReact.createElement('tr', {},\n\t\t\t\tReact.createElement('td', { onClick: this.props.showView( 'time' ), colSpan: 7, className: 'rdtTimeToggle' }, date.format( this.props.timeFormat ))\n\t\t\t)\n\t\t);\n\t},\n\n\talwaysValidDate: function() {\n\t\treturn 1;\n\t},\n\n  handleClickOutside: function() {\n    this.props.handleClickOutside();\n  }\n}));\n\nmodule.exports = DateTimePickerDays;\n","/**\n * A higher-order-component for handling onClickOutside for React components.\n */\n(function(root) {\n\n  // administrative\n  var registeredComponents = [];\n  var handlers = [];\n  var IGNORE_CLASS = 'ignore-react-onclickoutside';\n  var DEFAULT_EVENTS = ['mousedown', 'touchstart'];\n\n  /**\n   * Check whether some DOM node is our Component's node.\n   */\n  var isNodeFound = function(current, componentNode, ignoreClass) {\n    if (current === componentNode) {\n      return true;\n    }\n    // SVG <use/> elements do not technically reside in the rendered DOM, so\n    // they do not have classList directly, but they offer a link to their\n    // corresponding element, which can have classList. This extra check is for\n    // that case.\n    // See: http://www.w3.org/TR/SVG11/struct.html#InterfaceSVGUseElement\n    // Discussion: https://github.com/Pomax/react-onclickoutside/pull/17\n    if (current.correspondingElement) {\n      return current.correspondingElement.classList.contains(ignoreClass);\n    }\n    return current.classList.contains(ignoreClass);\n  };\n\n  /**\n   * Try to find our node in a hierarchy of nodes, returning the document\n   * node as highest noode if our node is not found in the path up.\n   */\n  var findHighest = function(current, componentNode, ignoreClass) {\n    if (current === componentNode) {\n      return true;\n    }\n\n    // If source=local then this event came from 'somewhere'\n    // inside and should be ignored. We could handle this with\n    // a layered approach, too, but that requires going back to\n    // thinking in terms of Dom node nesting, running counter\n    // to React's 'you shouldn't care about the DOM' philosophy.\n    while(current.parentNode) {\n      if (isNodeFound(current, componentNode, ignoreClass)) {\n        return true;\n      }\n      current = current.parentNode;\n    }\n    return current;\n  };\n\n  /**\n   * Check if the browser scrollbar was clicked\n   */\n  var clickedScrollbar = function(evt) {\n    return document.documentElement.clientWidth <= evt.clientX || document.documentElement.clientHeight <= evt.clientY;\n  };\n\n  /**\n   * Generate the event handler that checks whether a clicked DOM node\n   * is inside of, or lives outside of, our Component's node tree.\n   */\n  var generateOutsideCheck = function(componentNode, componentInstance, eventHandler, ignoreClass, excludeScrollbar, preventDefault, stopPropagation) {\n    return function(evt) {\n      if (preventDefault) {\n        evt.preventDefault();\n      }\n      if (stopPropagation) {\n        evt.stopPropagation();\n      }\n      var current = evt.target;\n      if((excludeScrollbar && clickedScrollbar(evt)) || (findHighest(current, componentNode, ignoreClass) !== document)) {\n        return;\n      }\n      eventHandler(evt);\n    };\n  };\n\n  /**\n   * This function generates the HOC function that you'll use\n   * in order to impart onOutsideClick listening to an\n   * arbitrary component. It gets called at the end of the\n   * bootstrapping code to yield an instance of the\n   * onClickOutsideHOC function defined inside setupHOC().\n   */\n  function setupHOC(root, React, ReactDOM, createReactClass) {\n\n    // The actual Component-wrapping HOC:\n    return function onClickOutsideHOC(Component, config) {\n      var wrapComponentWithOnClickOutsideHandling = createReactClass({\n        statics: {\n          /**\n           * Access the wrapped Component's class.\n           */\n          getClass: function() {\n            if (Component.getClass) {\n              return Component.getClass();\n            }\n            return Component;\n          }\n        },\n\n        /**\n         * Access the wrapped Component's instance.\n         */\n        getInstance: function() {\n          return Component.prototype.isReactComponent ? this.refs.instance : this;\n        },\n\n        // this is given meaning in componentDidMount\n        __outsideClickHandler: function() {},\n\n        getDefaultProps: function() {\n          return {\n            excludeScrollbar: config && config.excludeScrollbar\n          };\n        },\n\n        /**\n         * Add click listeners to the current document,\n         * linked to this component's state.\n         */\n        componentDidMount: function() {\n          // If we are in an environment without a DOM such\n          // as shallow rendering or snapshots then we exit\n          // early to prevent any unhandled errors being thrown.\n          if (typeof document === 'undefined' || !document.createElement){\n            return;\n          }\n\n          var instance = this.getInstance();\n          var clickOutsideHandler;\n\n          if(config && typeof config.handleClickOutside === 'function') {\n            clickOutsideHandler = config.handleClickOutside(instance);\n            if(typeof clickOutsideHandler !== 'function') {\n              throw new Error('Component lacks a function for processing outside click events specified by the handleClickOutside config option.');\n            }\n          } else if(typeof instance.handleClickOutside === 'function') {\n            if (React.Component.prototype.isPrototypeOf(instance)) {\n              clickOutsideHandler = instance.handleClickOutside.bind(instance);\n            } else {\n              clickOutsideHandler = instance.handleClickOutside;\n            }\n          } else if(typeof instance.props.handleClickOutside === 'function') {\n            clickOutsideHandler = instance.props.handleClickOutside;\n          } else {\n            throw new Error('Component lacks a handleClickOutside(event) function for processing outside click events.');\n          }\n\n          var componentNode = ReactDOM.findDOMNode(instance);\n          if (componentNode === null) {\n            console.warn('Antipattern warning: there was no DOM node associated with the component that is being wrapped by outsideClick.');\n            console.warn([\n              'This is typically caused by having a component that starts life with a render function that',\n              'returns `null` (due to a state or props value), so that the component \\'exist\\' in the React',\n              'chain of components, but not in the DOM.\\n\\nInstead, you need to refactor your code so that the',\n              'decision of whether or not to show your component is handled by the parent, in their render()',\n              'function.\\n\\nIn code, rather than:\\n\\n  A{render(){return check? <.../> : null;}\\n  B{render(){<A check=... />}\\n\\nmake sure that you',\n              'use:\\n\\n  A{render(){return <.../>}\\n  B{render(){return <...>{ check ? <A/> : null }<...>}}\\n\\nThat is:',\n              'the parent is always responsible for deciding whether or not to render any of its children.',\n              'It is not the child\\'s responsibility to decide whether a render instruction from above should',\n              'get ignored or not by returning `null`.\\n\\nWhen any component gets its render() function called,',\n              'that is the signal that it should be rendering its part of the UI. It may in turn decide not to',\n              'render all of *its* children, but it should never return `null` for itself. It is not responsible',\n              'for that decision.'\n            ].join(' '));\n          }\n\n          var fn = this.__outsideClickHandler = generateOutsideCheck(\n            componentNode,\n            instance,\n            clickOutsideHandler,\n            this.props.outsideClickIgnoreClass || IGNORE_CLASS,\n            this.props.excludeScrollbar, // fallback not needed, prop always exists because of getDefaultProps\n            this.props.preventDefault || false,\n            this.props.stopPropagation || false\n          );\n\n          var pos = registeredComponents.length;\n          registeredComponents.push(this);\n          handlers[pos] = fn;\n\n          // If there is a truthy disableOnClickOutside property for this\n          // component, don't immediately start listening for outside events.\n          if (!this.props.disableOnClickOutside) {\n            this.enableOnClickOutside();\n          }\n        },\n\n        /**\n        * Track for disableOnClickOutside props changes and enable/disable click outside\n        */\n        componentWillReceiveProps: function(nextProps) {\n          if (this.props.disableOnClickOutside && !nextProps.disableOnClickOutside) {\n            this.enableOnClickOutside();\n          } else if (!this.props.disableOnClickOutside && nextProps.disableOnClickOutside) {\n            this.disableOnClickOutside();\n          }\n        },\n\n        /**\n         * Remove the document's event listeners\n         */\n        componentWillUnmount: function() {\n          this.disableOnClickOutside();\n          this.__outsideClickHandler = false;\n          var pos = registeredComponents.indexOf(this);\n          if( pos>-1) {\n            // clean up so we don't leak memory\n            if (handlers[pos]) { handlers.splice(pos, 1); }\n            registeredComponents.splice(pos, 1);\n          }\n        },\n\n        /**\n         * Can be called to explicitly enable event listening\n         * for clicks and touches outside of this element.\n         */\n        enableOnClickOutside: function() {\n          var fn = this.__outsideClickHandler;\n          if (typeof document !== 'undefined') {\n            var events = this.props.eventTypes || DEFAULT_EVENTS;\n            if (!events.forEach) {\n              events = [events];\n            }\n            events.forEach(function (eventName) {\n              document.addEventListener(eventName, fn);\n            });\n          }\n        },\n\n        /**\n         * Can be called to explicitly disable event listening\n         * for clicks and touches outside of this element.\n         */\n        disableOnClickOutside: function() {\n          var fn = this.__outsideClickHandler;\n          if (typeof document !== 'undefined') {\n            var events = this.props.eventTypes || DEFAULT_EVENTS;\n            if (!events.forEach) {\n              events = [events];\n            }\n            events.forEach(function (eventName) {\n              document.removeEventListener(eventName, fn);\n            });\n          }\n        },\n\n        /**\n         * Pass-through render\n         */\n        render: function() {\n          var passedProps = this.props;\n          var props = {};\n          Object.keys(this.props).forEach(function(key) {\n            if (key !== 'excludeScrollbar') {\n              props[key] = passedProps[key];\n            }\n          });\n          if (Component.prototype.isReactComponent) {\n            props.ref = 'instance';\n          }\n          props.disableOnClickOutside = this.disableOnClickOutside;\n          props.enableOnClickOutside = this.enableOnClickOutside;\n          return React.createElement(Component, props);\n        }\n      });\n\n      // Add display name for React devtools\n      (function bindWrappedComponentName(c, wrapper) {\n        var componentName = c.displayName || c.name || 'Component';\n        wrapper.displayName = 'OnClickOutside(' + componentName + ')';\n      }(Component, wrapComponentWithOnClickOutsideHandling));\n\n      return wrapComponentWithOnClickOutsideHandling;\n    };\n  }\n\n  /**\n   * This function sets up the library in ways that\n   * work with the various modulde loading solutions\n   * used in JavaScript land today.\n   */\n  function setupBinding(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      // AMD. Register as an anonymous module.\n      define(['react','react-dom','create-react-class'], function(React, ReactDom, createReactClass) {\n        if (!createReactClass) createReactClass = React.createClass;\n        return factory(root, React, ReactDom, createReactClass);\n      });\n    } else if (typeof exports === 'object') {\n      // Node. Note that this does not work with strict\n      // CommonJS, but only CommonJS-like environments\n      // that support module.exports\n      module.exports = factory(root, require('react'), require('react-dom'), require('create-react-class'));\n    } else {\n      // Browser globals (root is window)\n      var createReactClass = React.createClass ? React.createClass : window.createReactClass;\n      root.onClickOutside = factory(root, React, ReactDOM, createReactClass);\n    }\n  }\n\n  // Make it all happen\n  setupBinding(root, setupHOC);\n\n}(this));\n","'use strict';\n\nvar React = require('react'),\n    createClass = require('create-react-class'),\n\tonClickOutside = require('react-onclickoutside')\n;\n\nvar DateTimePickerMonths = onClickOutside( createClass({\n\trender: function() {\n\t\treturn React.createElement('div', { className: 'rdtMonths' }, [\n\t\t\tReact.createElement('table', { key: 'a' }, React.createElement('thead', {}, React.createElement('tr', {}, [\n\t\t\t\tReact.createElement('th', { key: 'prev', className: 'rdtPrev', onClick: this.props.subtractTime( 1, 'years' )}, React.createElement('span', {}, '' )),\n\t\t\t\tReact.createElement('th', { key: 'year', className: 'rdtSwitch', onClick: this.props.showView( 'years' ), colSpan: 2, 'data-value': this.props.viewDate.year() }, this.props.viewDate.year() ),\n\t\t\t\tReact.createElement('th', { key: 'next', className: 'rdtNext', onClick: this.props.addTime( 1, 'years' )}, React.createElement('span', {}, '' ))\n\t\t\t]))),\n\t\t\tReact.createElement('table', { key: 'months' }, React.createElement('tbody', { key: 'b' }, this.renderMonths()))\n\t\t]);\n\t},\n\n\trenderMonths: function() {\n\t\tvar date = this.props.selectedDate,\n\t\t\tmonth = this.props.viewDate.month(),\n\t\t\tyear = this.props.viewDate.year(),\n\t\t\trows = [],\n\t\t\ti = 0,\n\t\t\tmonths = [],\n\t\t\trenderer = this.props.renderMonth || this.renderMonth,\n\t\t\tisValid = this.props.isValidDate || this.alwaysValidDate,\n\t\t\tclasses, props, currentMonth, isDisabled, noOfDaysInMonth, daysInMonth, validDay,\n\t\t\t// Date is irrelevant because we're only interested in month\n\t\t\tirrelevantDate = 1\n\t\t;\n\n\t\twhile (i < 12) {\n\t\t\tclasses = 'rdtMonth';\n\t\t\tcurrentMonth =\n\t\t\t\tthis.props.viewDate.clone().set({ year: year, month: i, date: irrelevantDate });\n\n\t\t\tnoOfDaysInMonth = currentMonth.endOf( 'month' ).format( 'D' );\n\t\t\tdaysInMonth = Array.from({ length: noOfDaysInMonth }, function( e, i ) {\n\t\t\t\treturn i + 1;\n\t\t\t});\n\n\t\t\tvalidDay = daysInMonth.find(function( d ) {\n\t\t\t\tvar day = currentMonth.clone().set( 'date', d );\n\t\t\t\treturn isValid( day );\n\t\t\t});\n\n\t\t\tisDisabled = ( validDay === undefined );\n\n\t\t\tif ( isDisabled )\n\t\t\t\tclasses += ' rdtDisabled';\n\n\t\t\tif ( date && i === date.month() && year === date.year() )\n\t\t\t\tclasses += ' rdtActive';\n\n\t\t\tprops = {\n\t\t\t\tkey: i,\n\t\t\t\t'data-value': i,\n\t\t\t\tclassName: classes\n\t\t\t};\n\n\t\t\tif ( !isDisabled )\n\t\t\t\tprops.onClick = ( this.props.updateOn === 'months' ?\n\t\t\t\t\tthis.updateSelectedMonth : this.props.setDate( 'month' ) );\n\n\t\t\tmonths.push( renderer( props, i, year, date && date.clone() ) );\n\n\t\t\tif ( months.length === 4 ) {\n\t\t\t\trows.push( React.createElement('tr', { key: month + '_' + rows.length }, months ) );\n\t\t\t\tmonths = [];\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\n\t\treturn rows;\n\t},\n\n\tupdateSelectedMonth: function( event ) {\n\t\tthis.props.updateSelectedDate( event );\n\t},\n\n\trenderMonth: function( props, month ) {\n\t\tvar localMoment = this.props.viewDate;\n\t\tvar monthStr = localMoment.localeData().monthsShort( localMoment.month( month ) );\n\t\tvar strLength = 3;\n\t\t// Because some months are up to 5 characters long, we want to\n\t\t// use a fixed string length for consistency\n\t\tvar monthStrFixedLength = monthStr.substring( 0, strLength );\n\t\treturn React.createElement('td', props, capitalize( monthStrFixedLength ) );\n\t},\n\n\talwaysValidDate: function() {\n\t\treturn 1;\n\t},\n\n  handleClickOutside: function() {\n    this.props.handleClickOutside();\n  }\n}));\n\nfunction capitalize( str ) {\n\treturn str.charAt( 0 ).toUpperCase() + str.slice( 1 );\n}\n\nmodule.exports = DateTimePickerMonths;\n","'use strict';\n\nvar React = require('react'),\n    createClass = require('create-react-class'),\n\tonClickOutside = require('react-onclickoutside')\n;\n\nvar DateTimePickerYears = onClickOutside( createClass({\n\trender: function() {\n\t\tvar year = parseInt( this.props.viewDate.year() / 10, 10 ) * 10;\n\n\t\treturn React.createElement('div', { className: 'rdtYears' }, [\n\t\t\tReact.createElement('table', { key: 'a' }, React.createElement('thead', {}, React.createElement('tr', {}, [\n\t\t\t\tReact.createElement('th', { key: 'prev', className: 'rdtPrev', onClick: this.props.subtractTime( 10, 'years' )}, React.createElement('span', {}, '' )),\n\t\t\t\tReact.createElement('th', { key: 'year', className: 'rdtSwitch', onClick: this.props.showView( 'years' ), colSpan: 2 }, year + '-' + ( year + 9 ) ),\n\t\t\t\tReact.createElement('th', { key: 'next', className: 'rdtNext', onClick: this.props.addTime( 10, 'years' )}, React.createElement('span', {}, '' ))\n\t\t\t\t]))),\n\t\t\tReact.createElement('table', { key: 'years' }, React.createElement('tbody',  {}, this.renderYears( year )))\n\t\t]);\n\t},\n\n\trenderYears: function( year ) {\n\t\tvar years = [],\n\t\t\ti = -1,\n\t\t\trows = [],\n\t\t\trenderer = this.props.renderYear || this.renderYear,\n\t\t\tselectedDate = this.props.selectedDate,\n\t\t\tisValid = this.props.isValidDate || this.alwaysValidDate,\n\t\t\tclasses, props, currentYear, isDisabled, noOfDaysInYear, daysInYear, validDay,\n\t\t\t// Month and date are irrelevant here because\n\t\t\t// we're only interested in the year\n\t\t\tirrelevantMonth = 0,\n\t\t\tirrelevantDate = 1\n\t\t;\n\n\t\tyear--;\n\t\twhile (i < 11) {\n\t\t\tclasses = 'rdtYear';\n\t\t\tcurrentYear = this.props.viewDate.clone().set(\n\t\t\t\t{ year: year, month: irrelevantMonth, date: irrelevantDate } );\n\n\t\t\t// Not sure what 'rdtOld' is for, commenting out for now as it's not working properly\n\t\t\t// if ( i === -1 | i === 10 )\n\t\t\t\t// classes += ' rdtOld';\n\n\t\t\tnoOfDaysInYear = currentYear.endOf( 'year' ).format( 'DDD' );\n\t\t\tdaysInYear = Array.from({ length: noOfDaysInYear }, function( e, i ) {\n\t\t\t\treturn i + 1;\n\t\t\t});\n\n\t\t\tvalidDay = daysInYear.find(function( d ) {\n\t\t\t\tvar day = currentYear.clone().dayOfYear( d );\n\t\t\t\treturn isValid( day );\n\t\t\t});\n\n\t\t\tisDisabled = ( validDay === undefined );\n\n\t\t\tif ( isDisabled )\n\t\t\t\tclasses += ' rdtDisabled';\n\n\t\t\tif ( selectedDate && selectedDate.year() === year )\n\t\t\t\tclasses += ' rdtActive';\n\n\t\t\tprops = {\n\t\t\t\tkey: year,\n\t\t\t\t'data-value': year,\n\t\t\t\tclassName: classes\n\t\t\t};\n\n\t\t\tif ( !isDisabled )\n\t\t\t\tprops.onClick = ( this.props.updateOn === 'years' ?\n\t\t\t\t\tthis.updateSelectedYear : this.props.setDate('year') );\n\n\t\t\tyears.push( renderer( props, year, selectedDate && selectedDate.clone() ));\n\n\t\t\tif ( years.length === 4 ) {\n\t\t\t\trows.push( React.createElement('tr', { key: i }, years ) );\n\t\t\t\tyears = [];\n\t\t\t}\n\n\t\t\tyear++;\n\t\t\ti++;\n\t\t}\n\n\t\treturn rows;\n\t},\n\n\tupdateSelectedYear: function( event ) {\n\t\tthis.props.updateSelectedDate( event );\n\t},\n\n\trenderYear: function( props, year ) {\n\t\treturn React.createElement('td',  props, year );\n\t},\n\n\talwaysValidDate: function() {\n\t\treturn 1;\n\t},\n\n  handleClickOutside: function() {\n    this.props.handleClickOutside();\n  }\n}));\n\nmodule.exports = DateTimePickerYears;\n","'use strict';\n\nvar React = require('react'),\n    createClass = require('create-react-class'),\n\tassign = require('object-assign'),\n  onClickOutside = require('react-onclickoutside')\n;\n\nvar DateTimePickerTime = onClickOutside( createClass({\n\tgetInitialState: function() {\n\t\treturn this.calculateState( this.props );\n\t},\n\n\tcalculateState: function( props ) {\n\t\tvar date = props.selectedDate || props.viewDate,\n\t\t\tformat = props.timeFormat,\n\t\t\tcounters = []\n\t\t;\n\n\t\tif ( format.toLowerCase().indexOf('h') !== -1 ) {\n\t\t\tcounters.push('hours');\n\t\t\tif ( format.indexOf('m') !== -1 ) {\n\t\t\t\tcounters.push('minutes');\n\t\t\t\tif ( format.indexOf('s') !== -1 ) {\n\t\t\t\t\tcounters.push('seconds');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar daypart = false;\n\t\tif ( this.state !== null && this.props.timeFormat.toLowerCase().indexOf( ' a' ) !== -1 ) {\n\t\t\tif ( this.props.timeFormat.indexOf( ' A' ) !== -1 ) {\n\t\t\t\tdaypart = ( this.state.hours >= 12 ) ? 'PM' : 'AM';\n\t\t\t} else {\n\t\t\t\tdaypart = ( this.state.hours >= 12 ) ? 'pm' : 'am';\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\thours: date.format( 'H' ),\n\t\t\tminutes: date.format( 'mm' ),\n\t\t\tseconds: date.format( 'ss' ),\n\t\t\tmilliseconds: date.format( 'SSS' ),\n\t\t\tdaypart: daypart,\n\t\t\tcounters: counters\n\t\t};\n\t},\n\n\trenderCounter: function( type ) {\n\t\tif ( type !== 'daypart' ) {\n\t\t\tvar value = this.state[ type ];\n\t\t\tif ( type === 'hours' && this.props.timeFormat.toLowerCase().indexOf( ' a' ) !== -1 ) {\n\t\t\t\tvalue = ( value - 1 ) % 12 + 1;\n\n\t\t\t\tif ( value === 0 ) {\n\t\t\t\t\tvalue = 12;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn React.createElement('div', { key: type, className: 'rdtCounter' }, [\n\t\t\t\tReact.createElement('span', { key: 'up', className: 'rdtBtn', onMouseDown: this.onStartClicking( 'increase', type ) }, '' ),\n\t\t\t\tReact.createElement('div', { key: 'c', className: 'rdtCount' }, value ),\n\t\t\t\tReact.createElement('span', { key: 'do', className: 'rdtBtn', onMouseDown: this.onStartClicking( 'decrease', type ) }, '' )\n\t\t\t]);\n\t\t}\n\t\treturn '';\n\t},\n\n\trenderDayPart: function() {\n\t\treturn React.createElement('div', { key: 'dayPart', className: 'rdtCounter' }, [\n\t\t\tReact.createElement('span', { key: 'up', className: 'rdtBtn', onMouseDown: this.onStartClicking( 'toggleDayPart', 'hours') }, '' ),\n\t\t\tReact.createElement('div', { key: this.state.daypart, className: 'rdtCount' }, this.state.daypart ),\n\t\t\tReact.createElement('span', { key: 'do', className: 'rdtBtn', onMouseDown: this.onStartClicking( 'toggleDayPart', 'hours') }, '' )\n\t\t]);\n\t},\n\n\trender: function() {\n\t\tvar me = this,\n\t\t\tcounters = []\n\t\t;\n\n\t\tthis.state.counters.forEach( function( c ) {\n\t\t\tif ( counters.length )\n\t\t\t\tcounters.push( React.createElement('div', { key: 'sep' + counters.length, className: 'rdtCounterSeparator' }, ':' ) );\n\t\t\tcounters.push( me.renderCounter( c ) );\n\t\t});\n\n\t\tif ( this.state.daypart !== false ) {\n\t\t\tcounters.push( me.renderDayPart() );\n\t\t}\n\n\t\tif ( this.state.counters.length === 3 && this.props.timeFormat.indexOf( 'S' ) !== -1 ) {\n\t\t\tcounters.push( React.createElement('div', { className: 'rdtCounterSeparator', key: 'sep5' }, ':' ) );\n\t\t\tcounters.push(\n\t\t\t\tReact.createElement('div', { className: 'rdtCounter rdtMilli', key: 'm' },\n\t\t\t\t\tReact.createElement('input', { value: this.state.milliseconds, type: 'text', onChange: this.updateMilli } )\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t}\n\n\t\treturn React.createElement('div', { className: 'rdtTime' },\n\t\t\tReact.createElement('table', {}, [\n\t\t\t\tthis.renderHeader(),\n\t\t\t\tReact.createElement('tbody', { key: 'b'}, React.createElement('tr', {}, React.createElement('td', {},\n\t\t\t\t\tReact.createElement('div', { className: 'rdtCounters' }, counters )\n\t\t\t\t)))\n\t\t\t])\n\t\t);\n\t},\n\n\tcomponentWillMount: function() {\n\t\tvar me = this;\n\t\tme.timeConstraints = {\n\t\t\thours: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 23,\n\t\t\t\tstep: 1\n\t\t\t},\n\t\t\tminutes: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 59,\n\t\t\t\tstep: 1\n\t\t\t},\n\t\t\tseconds: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 59,\n\t\t\t\tstep: 1\n\t\t\t},\n\t\t\tmilliseconds: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 999,\n\t\t\t\tstep: 1\n\t\t\t}\n\t\t};\n\t\t['hours', 'minutes', 'seconds', 'milliseconds'].forEach( function( type ) {\n\t\t\tassign(me.timeConstraints[ type ], me.props.timeConstraints[ type ]);\n\t\t});\n\t\tthis.setState( this.calculateState( this.props ) );\n\t},\n\n\tcomponentWillReceiveProps: function( nextProps ) {\n\t\tthis.setState( this.calculateState( nextProps ) );\n\t},\n\n\tupdateMilli: function( e ) {\n\t\tvar milli = parseInt( e.target.value, 10 );\n\t\tif ( milli === e.target.value && milli >= 0 && milli < 1000 ) {\n\t\t\tthis.props.setTime( 'milliseconds', milli );\n\t\t\tthis.setState( { milliseconds: milli } );\n\t\t}\n\t},\n\n\trenderHeader: function() {\n\t\tif ( !this.props.dateFormat )\n\t\t\treturn null;\n\n\t\tvar date = this.props.selectedDate || this.props.viewDate;\n\t\treturn React.createElement('thead', { key: 'h' }, React.createElement('tr', {},\n\t\t\tReact.createElement('th', { className: 'rdtSwitch', colSpan: 4, onClick: this.props.showView( 'days' ) }, date.format( this.props.dateFormat ) )\n\t\t));\n\t},\n\n\tonStartClicking: function( action, type ) {\n\t\tvar me = this;\n\n\t\treturn function() {\n\t\t\tvar update = {};\n\t\t\tupdate[ type ] = me[ action ]( type );\n\t\t\tme.setState( update );\n\n\t\t\tme.timer = setTimeout( function() {\n\t\t\t\tme.increaseTimer = setInterval( function() {\n\t\t\t\t\tupdate[ type ] = me[ action ]( type );\n\t\t\t\t\tme.setState( update );\n\t\t\t\t}, 70);\n\t\t\t}, 500);\n\n\t\t\tme.mouseUpListener = function() {\n\t\t\t\tclearTimeout( me.timer );\n\t\t\t\tclearInterval( me.increaseTimer );\n\t\t\t\tme.props.setTime( type, me.state[ type ] );\n\t\t\t\tdocument.body.removeEventListener( 'mouseup', me.mouseUpListener );\n\t\t\t};\n\n\t\t\tdocument.body.addEventListener( 'mouseup', me.mouseUpListener );\n\t\t};\n\t},\n\n\tpadValues: {\n\t\thours: 1,\n\t\tminutes: 2,\n\t\tseconds: 2,\n\t\tmilliseconds: 3\n\t},\n\n\ttoggleDayPart: function( type ) { // type is always 'hours'\n\t\tvar value = parseInt( this.state[ type ], 10) + 12;\n\t\tif ( value > this.timeConstraints[ type ].max )\n\t\t\tvalue = this.timeConstraints[ type ].min + ( value - ( this.timeConstraints[ type ].max + 1 ) );\n\t\treturn this.pad( type, value );\n\t},\n\n\tincrease: function( type ) {\n\t\tvar value = parseInt( this.state[ type ], 10) + this.timeConstraints[ type ].step;\n\t\tif ( value > this.timeConstraints[ type ].max )\n\t\t\tvalue = this.timeConstraints[ type ].min + ( value - ( this.timeConstraints[ type ].max + 1 ) );\n\t\treturn this.pad( type, value );\n\t},\n\n\tdecrease: function( type ) {\n\t\tvar value = parseInt( this.state[ type ], 10) - this.timeConstraints[ type ].step;\n\t\tif ( value < this.timeConstraints[ type ].min )\n\t\t\tvalue = this.timeConstraints[ type ].max + 1 - ( this.timeConstraints[ type ].min - value );\n\t\treturn this.pad( type, value );\n\t},\n\n\tpad: function( type, value ) {\n\t\tvar str = value + '';\n\t\twhile ( str.length < this.padValues[ type ] )\n\t\t\tstr = '0' + str;\n\t\treturn str;\n\t},\n\n  handleClickOutside: function() {\n    this.props.handleClickOutside();\n  }\n}));\n\nmodule.exports = DateTimePickerTime;\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"range-filter-pane\":\"range-filter-shelf__range-filter-pane\",\"bound\":\"range-filter-shelf__bound\",\"date-time-picker-wrapper\":\"range-filter-shelf__date-time-picker-wrapper\",\"rcSliderTooltipZoomDownIn\":\"range-filter-shelf__rcSliderTooltipZoomDownIn\",\"rcSliderTooltipZoomDownOut\":\"range-filter-shelf__rcSliderTooltipZoomDownOut\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"encoding-pane\":\"encoding-pane__encoding-pane\",\"shelf-group\":\"encoding-pane__shelf-group\"};","import {Schema} from 'compassql/build/src/schema';\r\nimport {isWildcard} from 'compassql/build/src/wildcard';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {ConnectDropTarget, DropTarget, DropTargetCollector, DropTargetSpec} from 'react-dnd';\r\nimport * as TetherComponent from 'react-tether';\r\nimport {contains} from 'vega-lite/build/src/util';\r\nimport {ActionHandler} from '../../actions/index';\r\nimport {\r\n  SPEC_FIELD_ADD, SPEC_FIELD_MOVE, SPEC_FIELD_REMOVE, SPEC_FUNCTION_ADD_WILDCARD,\r\n  SPEC_FUNCTION_CHANGE, SPEC_FUNCTION_DISABLE_WILDCARD, SPEC_FUNCTION_ENABLE_WILDCARD,\r\n  SPEC_FUNCTION_REMOVE_WILDCARD, SpecEncodingAction\r\n} from '../../actions/shelf';\r\nimport {DraggableType, FieldParentType} from '../../constants';\r\nimport {ShelfFieldDef, ShelfId} from '../../models';\r\nimport {ShelfFunction} from '../../models/shelf';\r\nimport {ShelfValueDef} from '../../models/shelf/spec';\r\nimport {isWildcardChannelId} from '../../models/shelf/spec/encoding';\r\nimport {DraggedFieldIdentifier, Field} from '../field/index';\r\nimport * as styles from './encoding-shelf.scss';\r\nimport {FieldCustomizer} from './field-customizer';\r\nimport {FunctionPicker, FunctionPickerWildcardHandler} from './function-picker';\r\nimport {CUSTOMIZABLE_ENCODING_CHANNELS} from './property-editor-schema';\r\n\r\n/**\r\n * Props for react-dnd of EncodingShelf\r\n */\r\nexport interface EncodingShelfDropTargetProps {\r\n  connectDropTarget: ConnectDropTarget;\r\n\r\n  isOver: boolean;\r\n\r\n  item: Object;\r\n}\r\n\r\nexport interface EncodingShelfPropsBase extends ActionHandler<SpecEncodingAction> {\r\n  id: ShelfId;\r\n\r\n  fieldDef: ShelfFieldDef;\r\n\r\n  valueDef: ShelfValueDef;\r\n\r\n  schema: Schema;\r\n}\r\n\r\ninterface EncodingShelfProps extends EncodingShelfPropsBase, EncodingShelfDropTargetProps {};\r\n\r\nexport interface EncodingShelfState {\r\n  customizerIsOpened: boolean;\r\n}\r\nclass EncodingShelfBase extends React.PureComponent<\r\n  EncodingShelfProps, EncodingShelfState\r\n> implements FunctionPickerWildcardHandler {\r\n  private fieldCustomizer: HTMLElement;\r\n  private encodingShelf: HTMLElement;\r\n\r\n  constructor(props: EncodingShelfProps) {\r\n    super(props);\r\n    this.state = {\r\n      customizerIsOpened: false\r\n    };\r\n\r\n    this.onWildcardAdd = this.onWildcardAdd.bind(this);\r\n    this.onWildcardRemove = this.onWildcardRemove.bind(this);\r\n    this.onWildcardDisable = this.onWildcardDisable.bind(this);\r\n    this.onWildcardEnable = this.onWildcardEnable.bind(this);\r\n    this.toggleCustomizer = this.toggleCustomizer.bind(this);\r\n  }\r\n\r\n  public componentWillUpdate(nextProps: EncodingShelfProps, nextState: EncodingShelfState) {\r\n    if (!nextState) {\r\n      return;\r\n    }\r\n    if (nextState.customizerIsOpened) {\r\n      document.addEventListener('click', this.handleClickOutside.bind(this), true);\r\n    } else if (this.state.customizerIsOpened) {\r\n      document.removeEventListener('click', this.handleClickOutside.bind(this), true);\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const {id, connectDropTarget, fieldDef, handleAction} = this.props;\r\n\r\n    const isWildcardShelf = isWildcard(id.channel);\r\n    const channelName = isWildcardShelf ? 'any' : id.channel;\r\n\r\n    return connectDropTarget(\r\n      <div styleName={isWildcardShelf ? 'wildcard-shelf' : 'encoding-shelf'}>\r\n        <div styleName=\"shelf-label\">\r\n          <TetherComponent\r\n            attachment=\"top left\"\r\n            targetAttachment=\"bottom left\"\r\n          >\r\n            {(fieldDef && !isWildcardChannelId(id) && contains(CUSTOMIZABLE_ENCODING_CHANNELS, id.channel)) ?\r\n              <span onClick={this.toggleCustomizer} ref={this.fieldHandler}>\r\n                {channelName}{' '} <i className={'fa fa-caret-down'}/>\r\n              </span> :\r\n              <span>\r\n                {channelName}\r\n              </span>\r\n            }\r\n\r\n            {this.state.customizerIsOpened &&\r\n            <div ref={this.popupRefHandler}>\r\n              <FieldCustomizer\r\n                shelfId={id}\r\n                fieldDef={fieldDef}\r\n                handleAction={handleAction}\r\n              />\r\n            </div>\r\n            }\r\n          </TetherComponent>\r\n        </div>\r\n        {fieldDef ? this.renderField() : this.renderFieldPlaceholder()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public onWildcardEnable() {\r\n    const {id, handleAction} = this.props;\r\n\r\n    handleAction({\r\n      type: SPEC_FUNCTION_ENABLE_WILDCARD,\r\n      payload: {\r\n        shelfId: id\r\n      }\r\n    });\r\n  }\r\n\r\n  public onWildcardDisable() {\r\n    const {id, handleAction} = this.props;\r\n\r\n    handleAction({\r\n      type: SPEC_FUNCTION_DISABLE_WILDCARD,\r\n      payload: {\r\n        shelfId: id\r\n      }\r\n    });\r\n  }\r\n\r\n  public onWildcardAdd(fn: ShelfFunction) {\r\n    const {id, handleAction} = this.props;\r\n    handleAction({\r\n      type: SPEC_FUNCTION_ADD_WILDCARD,\r\n      payload: {\r\n        shelfId: id,\r\n        fn\r\n      }\r\n    });\r\n  }\r\n\r\n  public onWildcardRemove(fn: ShelfFunction) {\r\n    const {id, handleAction} = this.props;\r\n    handleAction({\r\n      type: SPEC_FUNCTION_REMOVE_WILDCARD,\r\n      payload: {\r\n        shelfId: id,\r\n        fn\r\n      }\r\n    });\r\n  }\r\n\r\n  protected onFunctionChange(fn: ShelfFunction) {\r\n    const {id, handleAction} = this.props;\r\n    handleAction({\r\n      type: SPEC_FUNCTION_CHANGE,\r\n      payload: {\r\n        shelfId: id,\r\n        fn: fn\r\n      }\r\n    });\r\n  }\r\n\r\n  protected onRemove() {\r\n    const {id, handleAction} = this.props;\r\n    this.closePopup();\r\n    handleAction({\r\n      type: SPEC_FIELD_REMOVE,\r\n      payload: id\r\n    });\r\n  }\r\n\r\n  private renderField() {\r\n    const {id, fieldDef, schema} = this.props;\r\n    const renderFunctionPicker = fieldDef.type === 'quantitative' || fieldDef.type === 'temporal';\r\n\r\n    const functionPicker = renderFunctionPicker ?\r\n      <FunctionPicker\r\n        fieldDefParts={fieldDef}\r\n        onFunctionChange={this.onFunctionChange.bind(this)}\r\n        wildcardHandler={this}\r\n      /> : null;\r\n    return (\r\n      <div styleName='field-wrapper'>\r\n        <Field\r\n          draggable={true}\r\n          fieldDef={fieldDef}\r\n          caretShow={true}\r\n          isPill={true}\r\n          schema={schema}\r\n          popupComponent={functionPicker}\r\n          onRemove={this.onRemove.bind(this)}\r\n          parentId={{type: FieldParentType.ENCODING_SHELF as FieldParentType.ENCODING_SHELF, id: id}}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderFieldPlaceholder() {\r\n    const {item, isOver} = this.props;\r\n    return (\r\n      <span styleName={isOver ? 'placeholder-over' : item ? 'placeholder-active' : 'placeholder'}>\r\n        Drop a field here\r\n      </span>\r\n    );\r\n  }\r\n\r\n  private popupRefHandler = (ref: any) => {\r\n    this.fieldCustomizer = ref;\r\n  }\r\n\r\n  private fieldHandler = (ref: any) => {\r\n    this.encodingShelf = ref;\r\n  }\r\n\r\n  private handleClickOutside(e: any) {\r\n    if (this.fieldCustomizer && this.encodingShelf && (this.fieldCustomizer.contains(e.target) ||\r\n      this.encodingShelf.contains(e.target))) {\r\n      return;\r\n    }\r\n    this.closePopup();\r\n  }\r\n\r\n  private closePopup() {\r\n    this.setState({\r\n      customizerIsOpened: false\r\n    });\r\n  }\r\n\r\n  private toggleCustomizer() {\r\n    this.setState({\r\n      customizerIsOpened: !this.state.customizerIsOpened\r\n    });\r\n  }\r\n}\r\n\r\nconst encodingShelfTarget: DropTargetSpec<EncodingShelfProps> = {\r\n  // TODO: add canDrop\r\n  drop(props, monitor) {\r\n    // Don't drop twice for nested drop target\r\n    if (monitor.didDrop()) {\r\n      return;\r\n    }\r\n\r\n    const {fieldDef, parentId} = monitor.getItem() as DraggedFieldIdentifier;\r\n    switch (parentId.type) {\r\n      case FieldParentType.FIELD_LIST:\r\n        props.handleAction({\r\n          type: SPEC_FIELD_ADD,\r\n          // TODO(https://github.com/vega/voyager/issues/428):\r\n          // support inserting a field between two existing fields on the wildcard shelf (replace = false)\r\n          payload: {shelfId: props.id, fieldDef, replace: true}\r\n        });\r\n        break;\r\n      case FieldParentType.ENCODING_SHELF:\r\n        props.handleAction({\r\n          type: SPEC_FIELD_MOVE,\r\n          payload: {from: parentId.id, to: props.id}\r\n        });\r\n        break;\r\n      default:\r\n        throw new Error('Field dragged from unregistered source type to EncodingShelf');\r\n    }\r\n  }\r\n};\r\n\r\nconst collect: DropTargetCollector = (connect, monitor): EncodingShelfDropTargetProps => {\r\n  return {\r\n    connectDropTarget: connect.dropTarget(),\r\n    isOver: monitor.isOver(),\r\n    item: monitor.getItem()\r\n  };\r\n};\r\n\r\n// HACK: do type casting to suppress compile error for: https://github.com/Microsoft/TypeScript/issues/13526\r\nexport const EncodingShelf: () => React.PureComponent<EncodingShelfPropsBase, {}> =\r\n  DropTarget(DraggableType.FIELD, encodingShelfTarget, collect)(\r\n    CSSModules(EncodingShelfBase, styles)\r\n  ) as any;\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"placeholder\":\"encoding-shelf__placeholder\",\"placeholder-over\":\"encoding-shelf__placeholder-over\",\"placeholder-active\":\"encoding-shelf__placeholder-active\",\"placeholder-disabled\":\"encoding-shelf__placeholder-disabled\",\"encoding-shelf\":\"encoding-shelf__encoding-shelf\",\"wildcard-shelf\":\"encoding-shelf__wildcard-shelf\",\"field-wrapper\":\"encoding-shelf__field-wrapper\",\"shelf-label\":\"encoding-shelf__shelf-label\",\"overlay-screen\":\"encoding-shelf__overlay-screen\"};","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {Tab, TabList, TabPanel, Tabs} from 'react-tabs'; // eslint-disable-line\r\nimport {ActionHandler} from '../../actions';\r\nimport {SpecEncodingAction} from '../../actions/shelf';\r\nimport {ShelfFieldDef, ShelfId} from '../../models/shelf/spec';\r\nimport * as styles from './field-customizer.scss';\r\nimport {PropertyEditor} from './property-editor';\r\nimport {getFieldPropertyGroupIndex} from './property-editor-schema';\r\n\r\nexport interface FieldCustomizerProps extends ActionHandler<SpecEncodingAction> {\r\n  shelfId: ShelfId;\r\n  fieldDef: ShelfFieldDef;\r\n}\r\n\r\nexport interface CustomProp {\r\n  prop: string;\r\n  nestedProp?: string;\r\n}\r\n\r\nexport class FieldCustomizerBase extends React.PureComponent<FieldCustomizerProps, {}> {\r\n  public render() {\r\n    const {shelfId, handleAction, fieldDef} = this.props;\r\n    const propertyGroupIndex = getFieldPropertyGroupIndex(shelfId, fieldDef);\r\n    const keys = propertyGroupIndex ? Object.keys(propertyGroupIndex) : undefined;\r\n    return (\r\n      <div styleName='field-customizer'>\r\n        {keys && (\r\n          <Tabs>\r\n            <TabList>\r\n              {\r\n                keys.map((encodingType, i) => {\r\n                  return (\r\n                    <Tab key={'tab' + i}>{encodingType}</Tab>\r\n                  );\r\n                })\r\n              }\r\n            </TabList>\r\n            <div>\r\n              {\r\n                keys.map((encodingType, i) => {\r\n                  const customProps: CustomProp[] = propertyGroupIndex[encodingType];\r\n                  return (\r\n                    <TabPanel key={'tabPanel' + encodingType + i}>\r\n                      {\r\n                        customProps.map(customizableProp => {\r\n                          const {prop, nestedProp} = customizableProp;\r\n                          return (\r\n                            <PropertyEditor\r\n                              key={prop + '_' + nestedProp + i}\r\n                              prop={prop}\r\n                              nestedProp={nestedProp}\r\n                              shelfId={shelfId}\r\n                              fieldDef={fieldDef}\r\n                              handleAction={handleAction}\r\n                              propTab={encodingType}\r\n                            />\r\n                          );\r\n                        })\r\n                      }\r\n                    </TabPanel>\r\n                  );\r\n                })}\r\n            </div>\r\n          </Tabs>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const FieldCustomizer = CSSModules(FieldCustomizerBase, styles);\r\n","export { default as Tabs } from './components/Tabs';\nexport { default as TabList } from './components/TabList';\nexport { default as Tab } from './components/Tab';\nexport { default as TabPanel } from './components/TabPanel';\nexport { reset as resetIdCounter } from './helpers/uuid';","function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { childrenPropType, onSelectPropType, selectedIndexPropType } from '../helpers/propTypes';\nimport UncontrolledTabs from './UncontrolledTabs';\nimport { getTabsCount } from '../helpers/count';\nvar MODE_CONTROLLED = 0;\nvar MODE_UNCONTROLLED = 1;\n\nvar Tabs = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Tabs, _Component);\n\n  function Tabs(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.handleSelected = function (index, last, event) {\n      var onSelect = _this.props.onSelect;\n      var mode = _this.state.mode; // Call change event handler\n\n      if (typeof onSelect === 'function') {\n        // Check if the change event handler cancels the tab change\n        if (onSelect(index, last, event) === false) return;\n      }\n\n      var state = {\n        // Set focus if the change was triggered from the keyboard\n        focus: event.type === 'keydown'\n      };\n\n      if (mode === MODE_UNCONTROLLED) {\n        // Update selected index\n        state.selectedIndex = index;\n      }\n\n      _this.setState(state);\n    };\n\n    _this.state = Tabs.copyPropsToState(_this.props, {}, props.defaultFocus);\n    return _this;\n  }\n\n  Tabs.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n    return Tabs.copyPropsToState(props, state);\n  };\n\n  Tabs.getModeFromProps = function getModeFromProps(props) {\n    return props.selectedIndex === null ? MODE_UNCONTROLLED : MODE_CONTROLLED;\n  };\n\n  // preserve the existing selectedIndex from state.\n  // If the state has not selectedIndex, default to the defaultIndex or 0\n  Tabs.copyPropsToState = function copyPropsToState(props, state, focus) {\n    if (focus === void 0) {\n      focus = false;\n    }\n\n    if (process.env.NODE_ENV !== 'production' && state.mode !== undefined && state.mode !== Tabs.getModeFromProps(props)) {\n      throw new Error(\"Switching between controlled mode (by using `selectedIndex`) and uncontrolled mode is not supported in `Tabs`.\\nFor more information about controlled and uncontrolled mode of react-tabs see https://github.com/reactjs/react-tabs#controlled-vs-uncontrolled-mode.\");\n    }\n\n    var newState = {\n      focus: focus,\n      mode: Tabs.getModeFromProps(props)\n    };\n\n    if (newState.mode === MODE_UNCONTROLLED) {\n      var maxTabIndex = Math.max(0, getTabsCount(props.children) - 1);\n      var selectedIndex = null;\n\n      if (state.selectedIndex != null) {\n        selectedIndex = Math.min(state.selectedIndex, maxTabIndex);\n      } else {\n        selectedIndex = props.defaultIndex || 0;\n      }\n\n      newState.selectedIndex = selectedIndex;\n    }\n\n    return newState;\n  };\n\n  var _proto = Tabs.prototype;\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        children = _this$props.children,\n        defaultIndex = _this$props.defaultIndex,\n        defaultFocus = _this$props.defaultFocus,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"children\", \"defaultIndex\", \"defaultFocus\"]);\n\n    var _this$state = this.state,\n        focus = _this$state.focus,\n        selectedIndex = _this$state.selectedIndex;\n    props.focus = focus;\n    props.onSelect = this.handleSelected;\n\n    if (selectedIndex != null) {\n      props.selectedIndex = selectedIndex;\n    }\n\n    return /*#__PURE__*/React.createElement(UncontrolledTabs, props, children);\n  };\n\n  return Tabs;\n}(Component);\n\nTabs.defaultProps = {\n  defaultFocus: false,\n  forceRenderTabPanel: false,\n  selectedIndex: null,\n  defaultIndex: null,\n  environment: null,\n  disableUpDownKeys: false\n};\nexport { Tabs as default };\nTabs.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: childrenPropType,\n  direction: PropTypes.oneOf(['rtl', 'ltr']),\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.object]),\n  defaultFocus: PropTypes.bool,\n  defaultIndex: PropTypes.number,\n  disabledTabClassName: PropTypes.string,\n  disableUpDownKeys: PropTypes.bool,\n  domRef: PropTypes.func,\n  forceRenderTabPanel: PropTypes.bool,\n  onSelect: onSelectPropType,\n  selectedIndex: selectedIndexPropType,\n  selectedTabClassName: PropTypes.string,\n  selectedTabPanelClassName: PropTypes.string,\n  environment: PropTypes.object\n} : {};\nTabs.tabsRole = 'Tabs';","import { deepForEach } from './childrenDeepMap';\nimport { isTab, isTabList, isTabPanel } from './elementTypes';\nexport function childrenPropType(props, propName, componentName) {\n  var error;\n  var tabsCount = 0;\n  var panelsCount = 0;\n  var tabListFound = false;\n  var listTabs = [];\n  var children = props[propName];\n  deepForEach(children, function (child) {\n    if (isTabList(child)) {\n      if (child.props && child.props.children && typeof child.props.children === 'object') {\n        deepForEach(child.props.children, function (listChild) {\n          return listTabs.push(listChild);\n        });\n      }\n\n      if (tabListFound) {\n        error = new Error(\"Found multiple 'TabList' components inside 'Tabs'. Only one is allowed.\");\n      }\n\n      tabListFound = true;\n    }\n\n    if (isTab(child)) {\n      if (!tabListFound || listTabs.indexOf(child) === -1) {\n        error = new Error(\"Found a 'Tab' component outside of the 'TabList' component. 'Tab' components \" + \"have to be inside the 'TabList' component.\");\n      }\n\n      tabsCount++;\n    } else if (isTabPanel(child)) {\n      panelsCount++;\n    }\n  });\n\n  if (!error && tabsCount !== panelsCount) {\n    error = new Error(\"There should be an equal number of 'Tab' and 'TabPanel' in `\" + componentName + \"`. \" + (\"Received \" + tabsCount + \" 'Tab' and \" + panelsCount + \" 'TabPanel'.\"));\n  }\n\n  return error;\n}\nexport function onSelectPropType(props, propName, componentName, location, propFullName) {\n  var prop = props[propName];\n  var name = propFullName || propName;\n  var error = null;\n\n  if (prop && typeof prop !== 'function') {\n    error = new Error(\"Invalid \" + location + \" `\" + name + \"` of type `\" + typeof prop + \"` supplied \" + (\"to `\" + componentName + \"`, expected `function`.\"));\n  } else if (props.selectedIndex != null && prop == null) {\n    error = new Error(\"The \" + location + \" `\" + name + \"` is marked as required in `\" + componentName + \"`, but \" + \"its value is `undefined` or `null`.\\n\" + \"`onSelect` is required when `selectedIndex` is also set. Not doing so will \" + \"make the tabs not do anything, as `selectedIndex` indicates that you want to \" + \"handle the selected tab yourself.\\n\" + \"If you only want to set the inital tab replace `selectedIndex` with `defaultIndex`.\");\n  }\n\n  return error;\n}\nexport function selectedIndexPropType(props, propName, componentName, location, propFullName) {\n  var prop = props[propName];\n  var name = propFullName || propName;\n  var error = null;\n\n  if (prop != null && typeof prop !== 'number') {\n    error = new Error(\"Invalid \" + location + \" `\" + name + \"` of type `\" + typeof prop + \"` supplied to \" + (\"`\" + componentName + \"`, expected `number`.\"));\n  } else if (props.defaultIndex != null && prop != null) {\n    return new Error(\"The \" + location + \" `\" + name + \"` cannot be used together with `defaultIndex` \" + (\"in `\" + componentName + \"`.\\n\") + (\"Either remove `\" + name + \"` to let `\" + componentName + \"` handle the selected \") + \"tab internally or remove `defaultIndex` to handle it yourself.\");\n  }\n\n  return error;\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { Children, cloneElement } from 'react';\nimport { isTabPanel, isTab, isTabList } from './elementTypes';\n\nfunction isTabChild(child) {\n  return isTab(child) || isTabList(child) || isTabPanel(child);\n}\n\nexport function deepMap(children, callback) {\n  return Children.map(children, function (child) {\n    // null happens when conditionally rendering TabPanel/Tab\n    // see https://github.com/reactjs/react-tabs/issues/37\n    if (child === null) return null;\n\n    if (isTabChild(child)) {\n      return callback(child);\n    }\n\n    if (child.props && child.props.children && typeof child.props.children === 'object') {\n      // Clone the child that has children and map them too\n      return /*#__PURE__*/cloneElement(child, _extends({}, child.props, {\n        children: deepMap(child.props.children, callback)\n      }));\n    }\n\n    return child;\n  });\n}\nexport function deepForEach(children, callback) {\n  return Children.forEach(children, function (child) {\n    // null happens when conditionally rendering TabPanel/Tab\n    // see https://github.com/reactjs/react-tabs/issues/37\n    if (child === null) return;\n\n    if (isTab(child) || isTabPanel(child)) {\n      callback(child);\n    } else if (child.props && child.props.children && typeof child.props.children === 'object') {\n      if (isTabList(child)) callback(child);\n      deepForEach(child.props.children, callback);\n    }\n  });\n}","function makeTypeChecker(tabsRole) {\n  return function (element) {\n    return !!element.type && element.type.tabsRole === tabsRole;\n  };\n}\n\nexport var isTab = makeTypeChecker('Tab');\nexport var isTabList = makeTypeChecker('TabList');\nexport var isTabPanel = makeTypeChecker('TabPanel');","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport PropTypes from 'prop-types';\nimport React, { cloneElement, Component } from 'react';\nimport cx from 'clsx';\nimport uuid from '../helpers/uuid';\nimport { childrenPropType } from '../helpers/propTypes';\nimport { getPanelsCount as _getPanelsCount, getTabsCount as _getTabsCount } from '../helpers/count';\nimport { deepMap } from '../helpers/childrenDeepMap';\nimport { isTabList, isTabPanel, isTab } from '../helpers/elementTypes';\n\nfunction isNode(node) {\n  return node && 'getAttribute' in node;\n} // Determine if a node from event.target is a Tab element\n\n\nfunction isTabNode(node) {\n  return isNode(node) && node.getAttribute('role') === 'tab';\n} // Determine if a tab node is disabled\n\n\nfunction isTabDisabled(node) {\n  return isNode(node) && node.getAttribute('aria-disabled') === 'true';\n}\n\nvar canUseActiveElement;\n\nfunction determineCanUseActiveElement(environment) {\n  var env = environment || (typeof window !== 'undefined' ? window : undefined);\n\n  try {\n    canUseActiveElement = !!(typeof env !== 'undefined' && env.document && env.document.activeElement);\n  } catch (e) {\n    // Work around for IE bug when accessing document.activeElement in an iframe\n    // Refer to the following resources:\n    // http://stackoverflow.com/a/10982960/369687\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12733599\n    canUseActiveElement = false;\n  }\n}\n\nvar UncontrolledTabs = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(UncontrolledTabs, _Component);\n\n  function UncontrolledTabs() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n    _this.tabNodes = [];\n\n    _this.handleKeyDown = function (e) {\n      var _this$props = _this.props,\n          direction = _this$props.direction,\n          disableUpDownKeys = _this$props.disableUpDownKeys;\n\n      if (_this.isTabFromContainer(e.target)) {\n        var index = _this.props.selectedIndex;\n        var preventDefault = false;\n        var useSelectedIndex = false;\n\n        if (e.keyCode === 32 || e.keyCode === 13) {\n          preventDefault = true;\n          useSelectedIndex = false;\n\n          _this.handleClick(e);\n        }\n\n        if (e.keyCode === 37 || !disableUpDownKeys && e.keyCode === 38) {\n          // Select next tab to the left, validate if up arrow is not disabled\n          if (direction === 'rtl') {\n            index = _this.getNextTab(index);\n          } else {\n            index = _this.getPrevTab(index);\n          }\n\n          preventDefault = true;\n          useSelectedIndex = true;\n        } else if (e.keyCode === 39 || !disableUpDownKeys && e.keyCode === 40) {\n          // Select next tab to the right, validate if down arrow is not disabled\n          if (direction === 'rtl') {\n            index = _this.getPrevTab(index);\n          } else {\n            index = _this.getNextTab(index);\n          }\n\n          preventDefault = true;\n          useSelectedIndex = true;\n        } else if (e.keyCode === 35) {\n          // Select last tab (End key)\n          index = _this.getLastTab();\n          preventDefault = true;\n          useSelectedIndex = true;\n        } else if (e.keyCode === 36) {\n          // Select first tab (Home key)\n          index = _this.getFirstTab();\n          preventDefault = true;\n          useSelectedIndex = true;\n        } // This prevents scrollbars from moving around\n\n\n        if (preventDefault) {\n          e.preventDefault();\n        } // Only use the selected index in the state if we're not using the tabbed index\n\n\n        if (useSelectedIndex) {\n          _this.setSelected(index, e);\n        }\n      }\n    };\n\n    _this.handleClick = function (e) {\n      var node = e.target;\n\n      do {\n        if (_this.isTabFromContainer(node)) {\n          if (isTabDisabled(node)) {\n            return;\n          }\n\n          var index = [].slice.call(node.parentNode.children).filter(isTabNode).indexOf(node);\n\n          _this.setSelected(index, e);\n\n          return;\n        }\n      } while ((node = node.parentNode) != null);\n    };\n\n    return _this;\n  }\n\n  var _proto = UncontrolledTabs.prototype;\n\n  _proto.setSelected = function setSelected(index, event) {\n    // Check index boundary\n    if (index < 0 || index >= this.getTabsCount()) return;\n    var _this$props2 = this.props,\n        onSelect = _this$props2.onSelect,\n        selectedIndex = _this$props2.selectedIndex; // Call change event handler\n\n    onSelect(index, selectedIndex, event);\n  };\n\n  _proto.getNextTab = function getNextTab(index) {\n    var count = this.getTabsCount(); // Look for non-disabled tab from index to the last tab on the right\n\n    for (var i = index + 1; i < count; i++) {\n      if (!isTabDisabled(this.getTab(i))) {\n        return i;\n      }\n    } // If no tab found, continue searching from first on left to index\n\n\n    for (var _i = 0; _i < index; _i++) {\n      if (!isTabDisabled(this.getTab(_i))) {\n        return _i;\n      }\n    } // No tabs are disabled, return index\n\n\n    return index;\n  };\n\n  _proto.getPrevTab = function getPrevTab(index) {\n    var i = index; // Look for non-disabled tab from index to first tab on the left\n\n    while (i--) {\n      if (!isTabDisabled(this.getTab(i))) {\n        return i;\n      }\n    } // If no tab found, continue searching from last tab on right to index\n\n\n    i = this.getTabsCount();\n\n    while (i-- > index) {\n      if (!isTabDisabled(this.getTab(i))) {\n        return i;\n      }\n    } // No tabs are disabled, return index\n\n\n    return index;\n  };\n\n  _proto.getFirstTab = function getFirstTab() {\n    var count = this.getTabsCount(); // Look for non disabled tab from the first tab\n\n    for (var i = 0; i < count; i++) {\n      if (!isTabDisabled(this.getTab(i))) {\n        return i;\n      }\n    }\n\n    return null;\n  };\n\n  _proto.getLastTab = function getLastTab() {\n    var i = this.getTabsCount(); // Look for non disabled tab from the last tab\n\n    while (i--) {\n      if (!isTabDisabled(this.getTab(i))) {\n        return i;\n      }\n    }\n\n    return null;\n  };\n\n  _proto.getTabsCount = function getTabsCount() {\n    var children = this.props.children;\n    return _getTabsCount(children);\n  };\n\n  _proto.getPanelsCount = function getPanelsCount() {\n    var children = this.props.children;\n    return _getPanelsCount(children);\n  };\n\n  _proto.getTab = function getTab(index) {\n    return this.tabNodes[\"tabs-\" + index];\n  };\n\n  _proto.getChildren = function getChildren() {\n    var _this2 = this;\n\n    var index = 0;\n    var _this$props3 = this.props,\n        children = _this$props3.children,\n        disabledTabClassName = _this$props3.disabledTabClassName,\n        focus = _this$props3.focus,\n        forceRenderTabPanel = _this$props3.forceRenderTabPanel,\n        selectedIndex = _this$props3.selectedIndex,\n        selectedTabClassName = _this$props3.selectedTabClassName,\n        selectedTabPanelClassName = _this$props3.selectedTabPanelClassName,\n        environment = _this$props3.environment;\n    this.tabIds = this.tabIds || [];\n    this.panelIds = this.panelIds || [];\n    var diff = this.tabIds.length - this.getTabsCount(); // Add ids if new tabs have been added\n    // Don't bother removing ids, just keep them in case they are added again\n    // This is more efficient, and keeps the uuid counter under control\n\n    while (diff++ < 0) {\n      this.tabIds.push(uuid());\n      this.panelIds.push(uuid());\n    } // Map children to dynamically setup refs\n\n\n    return deepMap(children, function (child) {\n      var result = child; // Clone TabList and Tab components to have refs\n\n      if (isTabList(child)) {\n        var listIndex = 0; // Figure out if the current focus in the DOM is set on a Tab\n        // If it is we should keep the focus on the next selected tab\n\n        var wasTabFocused = false;\n\n        if (canUseActiveElement == null) {\n          determineCanUseActiveElement(environment);\n        }\n\n        if (canUseActiveElement) {\n          wasTabFocused = React.Children.toArray(child.props.children).filter(isTab).some(function (tab, i) {\n            var env = environment || (typeof window !== 'undefined' ? window : undefined);\n            return env && env.document.activeElement === _this2.getTab(i);\n          });\n        }\n\n        result = /*#__PURE__*/cloneElement(child, {\n          children: deepMap(child.props.children, function (tab) {\n            var key = \"tabs-\" + listIndex;\n            var selected = selectedIndex === listIndex;\n            var props = {\n              tabRef: function tabRef(node) {\n                _this2.tabNodes[key] = node;\n              },\n              id: _this2.tabIds[listIndex],\n              panelId: _this2.panelIds[listIndex],\n              selected: selected,\n              focus: selected && (focus || wasTabFocused)\n            };\n            if (selectedTabClassName) props.selectedClassName = selectedTabClassName;\n            if (disabledTabClassName) props.disabledClassName = disabledTabClassName;\n            listIndex++;\n            return /*#__PURE__*/cloneElement(tab, props);\n          })\n        });\n      } else if (isTabPanel(child)) {\n        var props = {\n          id: _this2.panelIds[index],\n          tabId: _this2.tabIds[index],\n          selected: selectedIndex === index\n        };\n        if (forceRenderTabPanel) props.forceRender = forceRenderTabPanel;\n        if (selectedTabPanelClassName) props.selectedClassName = selectedTabPanelClassName;\n        index++;\n        result = /*#__PURE__*/cloneElement(child, props);\n      }\n\n      return result;\n    });\n  };\n\n  /**\n   * Determine if a node from event.target is a Tab element for the current Tabs container.\n   * If the clicked element is not a Tab, it returns false.\n   * If it finds another Tabs container between the Tab and `this`, it returns false.\n   */\n  _proto.isTabFromContainer = function isTabFromContainer(node) {\n    // return immediately if the clicked element is not a Tab.\n    if (!isTabNode(node)) {\n      return false;\n    } // Check if the first occurrence of a Tabs container is `this` one.\n\n\n    var nodeAncestor = node.parentElement;\n\n    do {\n      if (nodeAncestor === this.node) return true;\n      if (nodeAncestor.getAttribute('data-tabs')) break;\n      nodeAncestor = nodeAncestor.parentElement;\n    } while (nodeAncestor);\n\n    return false;\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    // Delete all known props, so they don't get added to DOM\n    var _this$props4 = this.props,\n        children = _this$props4.children,\n        className = _this$props4.className,\n        disabledTabClassName = _this$props4.disabledTabClassName,\n        domRef = _this$props4.domRef,\n        focus = _this$props4.focus,\n        forceRenderTabPanel = _this$props4.forceRenderTabPanel,\n        onSelect = _this$props4.onSelect,\n        selectedIndex = _this$props4.selectedIndex,\n        selectedTabClassName = _this$props4.selectedTabClassName,\n        selectedTabPanelClassName = _this$props4.selectedTabPanelClassName,\n        environment = _this$props4.environment,\n        disableUpDownKeys = _this$props4.disableUpDownKeys,\n        attributes = _objectWithoutPropertiesLoose(_this$props4, [\"children\", \"className\", \"disabledTabClassName\", \"domRef\", \"focus\", \"forceRenderTabPanel\", \"onSelect\", \"selectedIndex\", \"selectedTabClassName\", \"selectedTabPanelClassName\", \"environment\", \"disableUpDownKeys\"]);\n\n    return /*#__PURE__*/React.createElement(\"div\", _extends({}, attributes, {\n      className: cx(className),\n      onClick: this.handleClick,\n      onKeyDown: this.handleKeyDown,\n      ref: function ref(node) {\n        _this3.node = node;\n        if (domRef) domRef(node);\n      },\n      \"data-tabs\": true\n    }), this.getChildren());\n  };\n\n  return UncontrolledTabs;\n}(Component);\n\nUncontrolledTabs.defaultProps = {\n  className: 'react-tabs',\n  focus: false\n};\nexport { UncontrolledTabs as default };\nUncontrolledTabs.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: childrenPropType,\n  direction: PropTypes.oneOf(['rtl', 'ltr']),\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.object]),\n  disabledTabClassName: PropTypes.string,\n  disableUpDownKeys: PropTypes.bool,\n  domRef: PropTypes.func,\n  focus: PropTypes.bool,\n  forceRenderTabPanel: PropTypes.bool,\n  onSelect: PropTypes.func.isRequired,\n  selectedIndex: PropTypes.number.isRequired,\n  selectedTabClassName: PropTypes.string,\n  selectedTabPanelClassName: PropTypes.string,\n  environment: PropTypes.object\n} : {};","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","// Get a universally unique identifier\nvar count = 0;\nexport default function uuid() {\n  return \"react-tabs-\" + count++;\n}\nexport function reset() {\n  count = 0;\n}","import { deepForEach } from './childrenDeepMap';\nimport { isTab, isTabPanel } from './elementTypes';\nexport function getTabsCount(children) {\n  var tabCount = 0;\n  deepForEach(children, function (child) {\n    if (isTab(child)) tabCount++;\n  });\n  return tabCount;\n}\nexport function getPanelsCount(children) {\n  var panelCount = 0;\n  deepForEach(children, function (child) {\n    if (isTabPanel(child)) panelCount++;\n  });\n  return panelCount;\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport cx from 'clsx';\n\nvar TabList = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(TabList, _Component);\n\n  function TabList() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = TabList.prototype;\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        children = _this$props.children,\n        className = _this$props.className,\n        attributes = _objectWithoutPropertiesLoose(_this$props, [\"children\", \"className\"]);\n\n    return /*#__PURE__*/React.createElement(\"ul\", _extends({}, attributes, {\n      className: cx(className),\n      role: \"tablist\"\n    }), children);\n  };\n\n  return TabList;\n}(Component);\n\nTabList.defaultProps = {\n  className: 'react-tabs__tab-list'\n};\nexport { TabList as default };\nTabList.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.object])\n} : {};\nTabList.tabsRole = 'TabList';","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport cx from 'clsx';\nvar DEFAULT_CLASS = 'react-tabs__tab';\n\nvar Tab = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Tab, _Component);\n\n  function Tab() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Tab.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.checkFocus();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    this.checkFocus();\n  };\n\n  _proto.checkFocus = function checkFocus() {\n    var _this$props = this.props,\n        selected = _this$props.selected,\n        focus = _this$props.focus;\n\n    if (selected && focus) {\n      this.node.focus();\n    }\n  };\n\n  _proto.render = function render() {\n    var _cx,\n        _this = this;\n\n    var _this$props2 = this.props,\n        children = _this$props2.children,\n        className = _this$props2.className,\n        disabled = _this$props2.disabled,\n        disabledClassName = _this$props2.disabledClassName,\n        focus = _this$props2.focus,\n        id = _this$props2.id,\n        panelId = _this$props2.panelId,\n        selected = _this$props2.selected,\n        selectedClassName = _this$props2.selectedClassName,\n        tabIndex = _this$props2.tabIndex,\n        tabRef = _this$props2.tabRef,\n        attributes = _objectWithoutPropertiesLoose(_this$props2, [\"children\", \"className\", \"disabled\", \"disabledClassName\", \"focus\", \"id\", \"panelId\", \"selected\", \"selectedClassName\", \"tabIndex\", \"tabRef\"]);\n\n    return /*#__PURE__*/React.createElement(\"li\", _extends({}, attributes, {\n      className: cx(className, (_cx = {}, _cx[selectedClassName] = selected, _cx[disabledClassName] = disabled, _cx)),\n      ref: function ref(node) {\n        _this.node = node;\n        if (tabRef) tabRef(node);\n      },\n      role: \"tab\",\n      id: id,\n      \"aria-selected\": selected ? 'true' : 'false',\n      \"aria-disabled\": disabled ? 'true' : 'false',\n      \"aria-controls\": panelId,\n      tabIndex: tabIndex || (selected ? '0' : null)\n    }), children);\n  };\n\n  return Tab;\n}(Component);\n\nTab.defaultProps = {\n  className: DEFAULT_CLASS,\n  disabledClassName: DEFAULT_CLASS + \"--disabled\",\n  focus: false,\n  id: null,\n  panelId: null,\n  selected: false,\n  selectedClassName: DEFAULT_CLASS + \"--selected\"\n};\nexport { Tab as default };\nTab.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object, PropTypes.string]),\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.object]),\n  disabled: PropTypes.bool,\n  tabIndex: PropTypes.string,\n  disabledClassName: PropTypes.string,\n  focus: PropTypes.bool,\n  // private\n  id: PropTypes.string,\n  // private\n  panelId: PropTypes.string,\n  // private\n  selected: PropTypes.bool,\n  // private\n  selectedClassName: PropTypes.string,\n  tabRef: PropTypes.func // private\n\n} : {};\nTab.tabsRole = 'Tab';","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport cx from 'clsx';\nvar DEFAULT_CLASS = 'react-tabs__tab-panel';\n\nvar TabPanel = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(TabPanel, _Component);\n\n  function TabPanel() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = TabPanel.prototype;\n\n  _proto.render = function render() {\n    var _cx;\n\n    var _this$props = this.props,\n        children = _this$props.children,\n        className = _this$props.className,\n        forceRender = _this$props.forceRender,\n        id = _this$props.id,\n        selected = _this$props.selected,\n        selectedClassName = _this$props.selectedClassName,\n        tabId = _this$props.tabId,\n        attributes = _objectWithoutPropertiesLoose(_this$props, [\"children\", \"className\", \"forceRender\", \"id\", \"selected\", \"selectedClassName\", \"tabId\"]);\n\n    return /*#__PURE__*/React.createElement(\"div\", _extends({}, attributes, {\n      className: cx(className, (_cx = {}, _cx[selectedClassName] = selected, _cx)),\n      role: \"tabpanel\",\n      id: id,\n      \"aria-labelledby\": tabId\n    }), forceRender || selected ? children : null);\n  };\n\n  return TabPanel;\n}(Component);\n\nTabPanel.defaultProps = {\n  className: DEFAULT_CLASS,\n  forceRender: false,\n  selectedClassName: DEFAULT_CLASS + \"--selected\"\n};\nexport { TabPanel as default };\nTabPanel.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.object]),\n  forceRender: PropTypes.bool,\n  id: PropTypes.string,\n  // private\n  selected: PropTypes.bool,\n  // private\n  selectedClassName: PropTypes.string,\n  tabId: PropTypes.string // private\n\n} : {};\nTabPanel.tabsRole = 'TabPanel';","// removed by extract-text-webpack-plugin\nmodule.exports = {\"field-customizer\":\"field-customizer__field-customizer\"};","import {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport Form from 'react-jsonschema-form';\r\nimport {debounce} from 'throttle-debounce';\r\nimport {Channel} from 'vega-lite/build/src/channel';\r\nimport {ActionHandler} from '../../actions';\r\nimport {SPEC_FIELD_NESTED_PROP_CHANGE, SPEC_FIELD_PROP_CHANGE, SpecEncodingAction} from '../../actions/shelf';\r\nimport {isWildcardChannelId, ShelfFieldDef, ShelfId} from '../../models/shelf/spec';\r\nimport {generateFormData, generatePropertyEditorSchema, isContinuous} from './property-editor-schema';\r\nimport * as styles from './property-editor.scss';\r\n\r\nexport interface PropertyEditorProps extends ActionHandler<SpecEncodingAction> {\r\n  prop: string;\r\n  nestedProp: string;\r\n  propTab: string;\r\n  shelfId: ShelfId;\r\n  fieldDef: ShelfFieldDef;\r\n}\r\n\r\nexport class PropertyEditorBase extends React.PureComponent<PropertyEditorProps, {}> {\r\n\r\n  constructor(props: PropertyEditorProps) {\r\n    super(props);\r\n    this.changeFieldProperty = this.changeFieldProperty.bind(this);\r\n    this.changeFieldProperty = debounce(500, this.changeFieldProperty);\r\n  }\r\n\r\n  public render() {\r\n    const {prop, nestedProp, propTab, shelfId, fieldDef} = this.props;\r\n    if (!isWildcardChannelId(shelfId)) {\r\n      const {schema, uiSchema} = generatePropertyEditorSchema(prop, nestedProp, propTab, fieldDef,\r\n        shelfId.channel as Channel);\r\n      const formData = generateFormData(shelfId, fieldDef);\r\n      return (\r\n        <div styleName=\"property-editor\">\r\n          <Form\r\n            schema={schema}\r\n            uiSchema={uiSchema}\r\n            formData={formData}\r\n            onChange={this.changeFieldProperty}\r\n          >\r\n            <button type=\"submit\" style={{display: 'none'}}>Submit</button>\r\n            {/* hide required submit button */}\r\n          </Form>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  protected changeFieldProperty(result: any) {\r\n    const {prop, nestedProp, shelfId, handleAction} = this.props;\r\n    const value = this.parseFormDataResult(result.formData[Object.keys(result.formData)[0]]);\r\n    if (nestedProp) {\r\n      handleAction({\r\n        type: SPEC_FIELD_NESTED_PROP_CHANGE,\r\n        payload: {\r\n          shelfId,\r\n          prop,\r\n          nestedProp,\r\n          value\r\n        }\r\n      });\r\n    } else {\r\n      handleAction({\r\n        type: SPEC_FIELD_PROP_CHANGE,\r\n        payload: {\r\n          shelfId,\r\n          prop,\r\n          value\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private parseFormDataResult(result: string) {\r\n    const {fieldDef, prop, nestedProp} = this.props;\r\n    const reg = /\\s*,\\s*/; // regex for parsing comma delimited strings\r\n    if (result === '') {\r\n      return undefined;\r\n    }\r\n    if (prop === 'scale') {\r\n      if (nestedProp === 'range') {\r\n        const range = result.split(reg);\r\n        if (isContinuous(fieldDef) && range.length !== 2) {\r\n          throw new Error('Invalid format for range. Must follow format: Min Number, Max Number');\r\n        }\r\n        return result === '' ? undefined : range;\r\n      } else if (nestedProp === 'domain') {\r\n        const domain = result.split(reg);\r\n        if (fieldDef.type === ExpandedType.QUANTITATIVE && domain.length !== 2) {\r\n          throw new Error('Invalid format for domain. Must follow format: Min Number, Max Number');\r\n        } else if (fieldDef.type === ExpandedType.TEMPORAL) {\r\n          // TODO: Not supported yet\r\n          throw new Error('Voyager does not currently support temporal domain values');\r\n        }\r\n        return result === '' ? undefined : domain;\r\n      }\r\n    }\r\n\r\n    // if form data is empty, default to auto suggested view, which is ? in compass\r\n    return result === '' ? undefined : result;\r\n  }\r\n\r\n}\r\n\r\nexport const PropertyEditor = CSSModules(PropertyEditorBase, styles);\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Form = require(\"./components/Form\");\n\nvar _Form2 = _interopRequireDefault(_Form);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Form2.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ErrorList = require(\"./ErrorList\");\n\nvar _ErrorList2 = _interopRequireDefault(_ErrorList);\n\nvar _utils = require(\"../utils\");\n\nvar _validate = require(\"../validate\");\n\nvar _validate2 = _interopRequireDefault(_validate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Form = function (_Component) {\n  _inherits(Form, _Component);\n\n  function Form(props) {\n    _classCallCheck(this, Form);\n\n    var _this = _possibleConstructorReturn(this, (Form.__proto__ || Object.getPrototypeOf(Form)).call(this, props));\n\n    _this.onChange = function (formData) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { validate: false };\n\n      var mustValidate = !_this.props.noValidate && (_this.props.liveValidate || options.validate);\n      var state = { status: \"editing\", formData: formData };\n      if (mustValidate) {\n        var _this$validate = _this.validate(formData),\n            errors = _this$validate.errors,\n            errorSchema = _this$validate.errorSchema;\n\n        state = _extends({}, state, { errors: errors, errorSchema: errorSchema });\n      }\n      (0, _utils.setState)(_this, state, function () {\n        if (_this.props.onChange) {\n          _this.props.onChange(_this.state);\n        }\n      });\n    };\n\n    _this.onBlur = function () {\n      if (_this.props.onBlur) {\n        var _this$props;\n\n        (_this$props = _this.props).onBlur.apply(_this$props, arguments);\n      }\n    };\n\n    _this.onSubmit = function (event) {\n      event.preventDefault();\n      _this.setState({ status: \"submitted\" });\n\n      if (!_this.props.noValidate) {\n        var _this$validate2 = _this.validate(_this.state.formData),\n            errors = _this$validate2.errors,\n            errorSchema = _this$validate2.errorSchema;\n\n        if (Object.keys(errors).length > 0) {\n          (0, _utils.setState)(_this, { errors: errors, errorSchema: errorSchema }, function () {\n            if (_this.props.onError) {\n              _this.props.onError(errors);\n            } else {\n              console.error(\"Form validation failed\", errors);\n            }\n          });\n          return;\n        }\n      }\n\n      if (_this.props.onSubmit) {\n        _this.props.onSubmit(_this.state);\n      }\n      _this.setState({ status: \"initial\", errors: [], errorSchema: {} });\n    };\n\n    _this.state = _this.getStateFromProps(props);\n    return _this;\n  }\n\n  _createClass(Form, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.setState(this.getStateFromProps(nextProps));\n    }\n  }, {\n    key: \"getStateFromProps\",\n    value: function getStateFromProps(props) {\n      var state = this.state || {};\n      var schema = \"schema\" in props ? props.schema : this.props.schema;\n      var uiSchema = \"uiSchema\" in props ? props.uiSchema : this.props.uiSchema;\n      var edit = typeof props.formData !== \"undefined\";\n      var liveValidate = props.liveValidate || this.props.liveValidate;\n      var mustValidate = edit && !props.noValidate && liveValidate;\n      var definitions = schema.definitions;\n\n      var formData = (0, _utils.getDefaultFormState)(schema, props.formData, definitions);\n\n      var _ref = mustValidate ? this.validate(formData, schema) : {\n        errors: state.errors || [],\n        errorSchema: state.errorSchema || {}\n      },\n          errors = _ref.errors,\n          errorSchema = _ref.errorSchema;\n\n      var idSchema = (0, _utils.toIdSchema)(schema, uiSchema[\"ui:rootFieldId\"], definitions);\n      return {\n        status: \"initial\",\n        schema: schema,\n        uiSchema: uiSchema,\n        idSchema: idSchema,\n        formData: formData,\n        edit: edit,\n        errors: errors,\n        errorSchema: errorSchema\n      };\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return (0, _utils.shouldRender)(this, nextProps, nextState);\n    }\n  }, {\n    key: \"validate\",\n    value: function validate(formData, schema) {\n      var _props = this.props,\n          validate = _props.validate,\n          transformErrors = _props.transformErrors;\n\n      return (0, _validate2.default)(formData, schema || this.props.schema, validate, transformErrors);\n    }\n  }, {\n    key: \"renderErrors\",\n    value: function renderErrors() {\n      var _state = this.state,\n          status = _state.status,\n          errors = _state.errors;\n      var _props2 = this.props,\n          ErrorList = _props2.ErrorList,\n          showErrorList = _props2.showErrorList;\n\n\n      if (status !== \"editing\" && errors.length && showErrorList != false) {\n        return _react2.default.createElement(ErrorList, { errors: errors });\n      }\n      return null;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      // For BC, accept passed SchemaField and TitleField props and pass them to\n      // the \"fields\" registry one.\n      var _getDefaultRegistry = (0, _utils.getDefaultRegistry)(),\n          fields = _getDefaultRegistry.fields,\n          widgets = _getDefaultRegistry.widgets;\n\n      return {\n        fields: _extends({}, fields, this.props.fields),\n        widgets: _extends({}, widgets, this.props.widgets),\n        ArrayFieldTemplate: this.props.ArrayFieldTemplate,\n        FieldTemplate: this.props.FieldTemplate,\n        definitions: this.props.schema.definitions || {},\n        formContext: this.props.formContext || {}\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props3 = this.props,\n          children = _props3.children,\n          safeRenderCompletion = _props3.safeRenderCompletion,\n          id = _props3.id,\n          className = _props3.className,\n          name = _props3.name,\n          method = _props3.method,\n          target = _props3.target,\n          action = _props3.action,\n          autocomplete = _props3.autocomplete,\n          enctype = _props3.enctype,\n          acceptcharset = _props3.acceptcharset,\n          noHtml5Validate = _props3.noHtml5Validate;\n      var _state2 = this.state,\n          schema = _state2.schema,\n          uiSchema = _state2.uiSchema,\n          formData = _state2.formData,\n          errorSchema = _state2.errorSchema,\n          idSchema = _state2.idSchema;\n\n      var registry = this.getRegistry();\n      var _SchemaField = registry.fields.SchemaField;\n\n      return _react2.default.createElement(\n        \"form\",\n        {\n          className: className ? className : \"rjsf\",\n          id: id,\n          name: name,\n          method: method,\n          target: target,\n          action: action,\n          autoComplete: autocomplete,\n          encType: enctype,\n          acceptCharset: acceptcharset,\n          noValidate: noHtml5Validate,\n          onSubmit: this.onSubmit },\n        this.renderErrors(),\n        _react2.default.createElement(_SchemaField, {\n          schema: schema,\n          uiSchema: uiSchema,\n          errorSchema: errorSchema,\n          idSchema: idSchema,\n          formData: formData,\n          onChange: this.onChange,\n          onBlur: this.onBlur,\n          registry: registry,\n          safeRenderCompletion: safeRenderCompletion\n        }),\n        children ? children : _react2.default.createElement(\n          \"p\",\n          null,\n          _react2.default.createElement(\n            \"button\",\n            { type: \"submit\", className: \"btn btn-info\" },\n            \"Submit\"\n          )\n        )\n      );\n    }\n  }]);\n\n  return Form;\n}(_react.Component);\n\nForm.defaultProps = {\n  uiSchema: {},\n  noValidate: false,\n  liveValidate: false,\n  safeRenderCompletion: false,\n  noHtml5Validate: false,\n  ErrorList: _ErrorList2.default\n};\nexports.default = Form;\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  Form.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    uiSchema: _propTypes2.default.object,\n    formData: _propTypes2.default.any,\n    widgets: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.object])),\n    fields: _propTypes2.default.objectOf(_propTypes2.default.func),\n    ArrayFieldTemplate: _propTypes2.default.func,\n    FieldTemplate: _propTypes2.default.func,\n    ErrorList: _propTypes2.default.func,\n    onChange: _propTypes2.default.func,\n    onError: _propTypes2.default.func,\n    showErrorList: _propTypes2.default.bool,\n    onSubmit: _propTypes2.default.func,\n    id: _propTypes2.default.string,\n    className: _propTypes2.default.string,\n    name: _propTypes2.default.string,\n    method: _propTypes2.default.string,\n    target: _propTypes2.default.string,\n    action: _propTypes2.default.string,\n    autocomplete: _propTypes2.default.string,\n    enctype: _propTypes2.default.string,\n    acceptcharset: _propTypes2.default.string,\n    noValidate: _propTypes2.default.bool,\n    noHtml5Validate: _propTypes2.default.bool,\n    liveValidate: _propTypes2.default.bool,\n    validate: _propTypes2.default.func,\n    transformErrors: _propTypes2.default.func,\n    safeRenderCompletion: _propTypes2.default.bool,\n    formContext: _propTypes2.default.object\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ErrorList;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ErrorList(props) {\n  var errors = props.errors;\n\n  return _react2.default.createElement(\n    \"div\",\n    { className: \"panel panel-danger errors\" },\n    _react2.default.createElement(\n      \"div\",\n      { className: \"panel-heading\" },\n      _react2.default.createElement(\n        \"h3\",\n        { className: \"panel-title\" },\n        \"Errors\"\n      )\n    ),\n    _react2.default.createElement(\n      \"ul\",\n      { className: \"list-group\" },\n      errors.map(function (error, i) {\n        return _react2.default.createElement(\n          \"li\",\n          { key: i, className: \"list-group-item text-danger\" },\n          error.stack\n        );\n      })\n    )\n  );\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.getDefaultRegistry = getDefaultRegistry;\nexports.getWidget = getWidget;\nexports.getDefaultFormState = getDefaultFormState;\nexports.getUiOptions = getUiOptions;\nexports.isObject = isObject;\nexports.mergeObjects = mergeObjects;\nexports.asNumber = asNumber;\nexports.orderProperties = orderProperties;\nexports.isMultiSelect = isMultiSelect;\nexports.isFilesArray = isFilesArray;\nexports.isFixedItems = isFixedItems;\nexports.allowAdditionalItems = allowAdditionalItems;\nexports.optionsList = optionsList;\nexports.retrieveSchema = retrieveSchema;\nexports.deepEquals = deepEquals;\nexports.shouldRender = shouldRender;\nexports.toIdSchema = toIdSchema;\nexports.parseDateString = parseDateString;\nexports.toDateString = toDateString;\nexports.pad = pad;\nexports.setState = setState;\nexports.dataURItoBlob = dataURItoBlob;\nexports.rangeSpec = rangeSpec;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nrequire(\"setimmediate\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar widgetMap = {\n  boolean: {\n    checkbox: \"CheckboxWidget\",\n    radio: \"RadioWidget\",\n    select: \"SelectWidget\",\n    hidden: \"HiddenWidget\"\n  },\n  string: {\n    text: \"TextWidget\",\n    password: \"PasswordWidget\",\n    email: \"EmailWidget\",\n    hostname: \"TextWidget\",\n    ipv4: \"TextWidget\",\n    ipv6: \"TextWidget\",\n    uri: \"URLWidget\",\n    \"data-url\": \"FileWidget\",\n    radio: \"RadioWidget\",\n    select: \"SelectWidget\",\n    textarea: \"TextareaWidget\",\n    hidden: \"HiddenWidget\",\n    date: \"DateWidget\",\n    datetime: \"DateTimeWidget\",\n    \"date-time\": \"DateTimeWidget\",\n    \"alt-date\": \"AltDateWidget\",\n    \"alt-datetime\": \"AltDateTimeWidget\",\n    color: \"ColorWidget\",\n    file: \"FileWidget\"\n  },\n  number: {\n    text: \"TextWidget\",\n    select: \"SelectWidget\",\n    updown: \"UpDownWidget\",\n    range: \"RangeWidget\",\n    radio: \"RadioWidget\",\n    hidden: \"HiddenWidget\"\n  },\n  integer: {\n    text: \"TextWidget\",\n    select: \"SelectWidget\",\n    updown: \"UpDownWidget\",\n    range: \"RangeWidget\",\n    radio: \"RadioWidget\",\n    hidden: \"HiddenWidget\"\n  },\n  array: {\n    select: \"SelectWidget\",\n    checkboxes: \"CheckboxesWidget\",\n    files: \"FileWidget\"\n  }\n};\n\nfunction getDefaultRegistry() {\n  return {\n    fields: require(\"./components/fields\").default,\n    widgets: require(\"./components/widgets\").default,\n    definitions: {},\n    formContext: {}\n  };\n}\n\nfunction getWidget(schema, widget) {\n  var registeredWidgets = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var type = schema.type;\n\n\n  function mergeOptions(Widget) {\n    // cache return value as property of widget for proper react reconciliation\n    if (!Widget.MergedWidget) {\n      var defaultOptions = Widget.defaultProps && Widget.defaultProps.options || {};\n      Widget.MergedWidget = function (_ref) {\n        var _ref$options = _ref.options,\n            options = _ref$options === undefined ? {} : _ref$options,\n            props = _objectWithoutProperties(_ref, [\"options\"]);\n\n        return _react2.default.createElement(Widget, _extends({ options: _extends({}, defaultOptions, options) }, props));\n      };\n    }\n    return Widget.MergedWidget;\n  }\n\n  if (typeof widget === \"function\") {\n    return mergeOptions(widget);\n  }\n\n  if (typeof widget !== \"string\") {\n    throw new Error(\"Unsupported widget definition: \" + (typeof widget === \"undefined\" ? \"undefined\" : _typeof(widget)));\n  }\n\n  if (registeredWidgets.hasOwnProperty(widget)) {\n    var registeredWidget = registeredWidgets[widget];\n    return getWidget(schema, registeredWidget, registeredWidgets);\n  }\n\n  if (!widgetMap.hasOwnProperty(type)) {\n    throw new Error(\"No widget for type \\\"\" + type + \"\\\"\");\n  }\n\n  if (widgetMap[type].hasOwnProperty(widget)) {\n    var _registeredWidget = registeredWidgets[widgetMap[type][widget]];\n    return getWidget(schema, _registeredWidget, registeredWidgets);\n  }\n\n  throw new Error(\"No widget \\\"\" + widget + \"\\\" for type \\\"\" + type + \"\\\"\");\n}\n\nfunction computeDefaults(schema, parentDefaults) {\n  var definitions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  // Compute the defaults recursively: give highest priority to deepest nodes.\n  var defaults = parentDefaults;\n  if (isObject(defaults) && isObject(schema.default)) {\n    // For object defaults, only override parent defaults that are defined in\n    // schema.default.\n    defaults = mergeObjects(defaults, schema.default);\n  } else if (\"default\" in schema) {\n    // Use schema defaults for this node.\n    defaults = schema.default;\n  } else if (\"$ref\" in schema) {\n    // Use referenced schema defaults for this node.\n    var refSchema = findSchemaDefinition(schema.$ref, definitions);\n    return computeDefaults(refSchema, defaults, definitions);\n  } else if (isFixedItems(schema)) {\n    defaults = schema.items.map(function (itemSchema) {\n      return computeDefaults(itemSchema, undefined, definitions);\n    });\n  }\n  // Not defaults defined for this node, fallback to generic typed ones.\n  if (typeof defaults === \"undefined\") {\n    defaults = schema.default;\n  }\n\n  switch (schema.type) {\n    // We need to recur for object schema inner default values.\n    case \"object\":\n      return Object.keys(schema.properties || {}).reduce(function (acc, key) {\n        // Compute the defaults for this node, with the parent defaults we might\n        // have from a previous run: defaults[key].\n        acc[key] = computeDefaults(schema.properties[key], (defaults || {})[key], definitions);\n        return acc;\n      }, {});\n\n    case \"array\":\n      if (schema.minItems) {\n        return new Array(schema.minItems).fill(computeDefaults(schema.items, defaults, definitions));\n      }\n  }\n  return defaults;\n}\n\nfunction getDefaultFormState(_schema, formData) {\n  var definitions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (!isObject(_schema)) {\n    throw new Error(\"Invalid schema: \" + _schema);\n  }\n  var schema = retrieveSchema(_schema, definitions);\n  var defaults = computeDefaults(schema, _schema.default, definitions);\n  if (typeof formData === \"undefined\") {\n    // No form data? Use schema defaults.\n    return defaults;\n  }\n  if (isObject(formData)) {\n    // Override schema defaults with form data.\n    return mergeObjects(defaults, formData);\n  }\n  return formData || defaults;\n}\n\nfunction getUiOptions(uiSchema) {\n  // get all passed options from ui:widget, ui:options, and ui:<optionName>\n  return Object.keys(uiSchema).filter(function (key) {\n    return key.indexOf(\"ui:\") === 0;\n  }).reduce(function (options, key) {\n    var value = uiSchema[key];\n\n    if (key === \"ui:widget\" && isObject(value)) {\n      console.warn(\"Setting options via ui:widget object is deprecated, use ui:options instead\");\n      return _extends({}, options, value.options || {}, {\n        widget: value.component\n      });\n    }\n    if (key === \"ui:options\" && isObject(value)) {\n      return _extends({}, options, value);\n    }\n    return _extends({}, options, _defineProperty({}, key.substring(3), value));\n  }, {});\n}\n\nfunction isObject(thing) {\n  return (typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === \"object\" && thing !== null && !Array.isArray(thing);\n}\n\nfunction mergeObjects(obj1, obj2) {\n  var concatArrays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  // Recursively merge deeply nested objects.\n  var acc = Object.assign({}, obj1); // Prevent mutation of source object.\n  return Object.keys(obj2).reduce(function (acc, key) {\n    var left = obj1[key],\n        right = obj2[key];\n    if (obj1.hasOwnProperty(key) && isObject(right)) {\n      acc[key] = mergeObjects(left, right, concatArrays);\n    } else if (concatArrays && Array.isArray(left) && Array.isArray(right)) {\n      acc[key] = left.concat(right);\n    } else {\n      acc[key] = right;\n    }\n    return acc;\n  }, acc);\n}\n\nfunction asNumber(value) {\n  if (value === \"\") {\n    return undefined;\n  }\n  if (/\\.$/.test(value)) {\n    // \"3.\" can't really be considered a number even if it parses in js. The\n    // user is most likely entering a float.\n    return value;\n  }\n  if (/\\.0$/.test(value)) {\n    // we need to return this as a string here, to allow for input like 3.07\n    return value;\n  }\n  var n = Number(value);\n  var valid = typeof n === \"number\" && !Number.isNaN(n);\n\n  if (/\\.\\d*0$/.test(value)) {\n    // It's a number, that's cool - but we need it as a string so it doesn't screw\n    // with the user when entering dollar amounts or other values (such as those with\n    // specific precision or number of significant digits)\n    return value;\n  }\n\n  return valid ? n : value;\n}\n\nfunction orderProperties(properties, order) {\n  if (!Array.isArray(order)) {\n    return properties;\n  }\n\n  var arrayToHash = function arrayToHash(arr) {\n    return arr.reduce(function (prev, curr) {\n      prev[curr] = true;\n      return prev;\n    }, {});\n  };\n  var errorPropList = function errorPropList(arr) {\n    return arr.length > 1 ? \"properties '\" + arr.join(\"', '\") + \"'\" : \"property '\" + arr[0] + \"'\";\n  };\n  var propertyHash = arrayToHash(properties);\n  var orderHash = arrayToHash(order);\n  var extraneous = order.filter(function (prop) {\n    return prop !== \"*\" && !propertyHash[prop];\n  });\n  if (extraneous.length) {\n    throw new Error(\"uiSchema order list contains extraneous \" + errorPropList(extraneous));\n  }\n  var rest = properties.filter(function (prop) {\n    return !orderHash[prop];\n  });\n  var restIndex = order.indexOf(\"*\");\n  if (restIndex === -1) {\n    if (rest.length) {\n      throw new Error(\"uiSchema order list does not contain \" + errorPropList(rest));\n    }\n    return order;\n  }\n  if (restIndex !== order.lastIndexOf(\"*\")) {\n    throw new Error(\"uiSchema order list contains more than one wildcard item\");\n  }\n\n  var complete = [].concat(_toConsumableArray(order));\n  complete.splice.apply(complete, [restIndex, 1].concat(_toConsumableArray(rest)));\n  return complete;\n}\n\nfunction isMultiSelect(schema) {\n  return schema.items ? Array.isArray(schema.items.enum) && schema.uniqueItems : false;\n}\n\nfunction isFilesArray(schema, uiSchema) {\n  return schema.items && schema.items.type === \"string\" && schema.items.format === \"data-url\" || uiSchema[\"ui:widget\"] === \"files\";\n}\n\nfunction isFixedItems(schema) {\n  return Array.isArray(schema.items) && schema.items.length > 0 && schema.items.every(function (item) {\n    return isObject(item);\n  });\n}\n\nfunction allowAdditionalItems(schema) {\n  if (schema.additionalItems === true) {\n    console.warn(\"additionalItems=true is currently not supported\");\n  }\n  return isObject(schema.additionalItems);\n}\n\nfunction optionsList(schema) {\n  return schema.enum.map(function (value, i) {\n    var label = schema.enumNames && schema.enumNames[i] || String(value);\n    return { label: label, value: value };\n  });\n}\n\nfunction findSchemaDefinition($ref) {\n  var definitions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  // Extract and use the referenced definition if we have it.\n  var match = /^#\\/definitions\\/(.*)$/.exec($ref);\n  if (match && match[1]) {\n    var parts = match[1].split(\"/\");\n    var current = definitions;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = parts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var part = _step.value;\n\n        part = part.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n        if (current.hasOwnProperty(part)) {\n          current = current[part];\n        } else {\n          // No matching definition found, that's an error (bogus schema?)\n          throw new Error(\"Could not find a definition for \" + $ref + \".\");\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return current;\n  }\n\n  // No matching definition found, that's an error (bogus schema?)\n  throw new Error(\"Could not find a definition for \" + $ref + \".\");\n}\n\nfunction retrieveSchema(schema) {\n  var definitions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  // No $ref attribute found, returning the original schema.\n  if (!schema.hasOwnProperty(\"$ref\")) {\n    return schema;\n  }\n  // Retrieve the referenced schema definition.\n  var $refSchema = findSchemaDefinition(schema.$ref, definitions);\n  // Drop the $ref property of the source schema.\n\n  var $ref = schema.$ref,\n      localSchema = _objectWithoutProperties(schema, [\"$ref\"]);\n  // Update referenced schema definition with local schema properties.\n\n\n  return _extends({}, $refSchema, localSchema);\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) === \"[object Arguments]\";\n}\n\nfunction deepEquals(a, b) {\n  var ca = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var cb = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n  // Partially extracted from node-deeper and adapted to exclude comparison\n  // checks for functions.\n  // https://github.com/othiym23/node-deeper\n  if (a === b) {\n    return true;\n  } else if (typeof a === \"function\" || typeof b === \"function\") {\n    // Assume all functions are equivalent\n    // see https://github.com/mozilla-services/react-jsonschema-form/issues/255\n    return true;\n  } else if ((typeof a === \"undefined\" ? \"undefined\" : _typeof(a)) !== \"object\" || (typeof b === \"undefined\" ? \"undefined\" : _typeof(b)) !== \"object\") {\n    return false;\n  } else if (a === null || b === null) {\n    return false;\n  } else if (a instanceof Date && b instanceof Date) {\n    return a.getTime() === b.getTime();\n  } else if (a instanceof RegExp && b instanceof RegExp) {\n    return a.source === b.source && a.global === b.global && a.multiline === b.multiline && a.lastIndex === b.lastIndex && a.ignoreCase === b.ignoreCase;\n  } else if (isArguments(a) || isArguments(b)) {\n    if (!(isArguments(a) && isArguments(b))) {\n      return false;\n    }\n    var slice = Array.prototype.slice;\n    return deepEquals(slice.call(a), slice.call(b), ca, cb);\n  } else {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    var ka = Object.keys(a);\n    var kb = Object.keys(b);\n    // don't bother with stack acrobatics if there's nothing there\n    if (ka.length === 0 && kb.length === 0) {\n      return true;\n    }\n    if (ka.length !== kb.length) {\n      return false;\n    }\n\n    var cal = ca.length;\n    while (cal--) {\n      if (ca[cal] === a) {\n        return cb[cal] === b;\n      }\n    }\n    ca.push(a);\n    cb.push(b);\n\n    ka.sort();\n    kb.sort();\n    for (var j = ka.length - 1; j >= 0; j--) {\n      if (ka[j] !== kb[j]) {\n        return false;\n      }\n    }\n\n    var key = void 0;\n    for (var k = ka.length - 1; k >= 0; k--) {\n      key = ka[k];\n      if (!deepEquals(a[key], b[key], ca, cb)) {\n        return false;\n      }\n    }\n\n    ca.pop();\n    cb.pop();\n\n    return true;\n  }\n}\n\nfunction shouldRender(comp, nextProps, nextState) {\n  var props = comp.props,\n      state = comp.state;\n\n  return !deepEquals(props, nextProps) || !deepEquals(state, nextState);\n}\n\nfunction toIdSchema(schema, id, definitions) {\n  var idSchema = {\n    $id: id || \"root\"\n  };\n  if (\"$ref\" in schema) {\n    var _schema = retrieveSchema(schema, definitions);\n    return toIdSchema(_schema, id, definitions);\n  }\n  if (\"items\" in schema && !schema.items.$ref) {\n    return toIdSchema(schema.items, id, definitions);\n  }\n  if (schema.type !== \"object\") {\n    return idSchema;\n  }\n  for (var name in schema.properties || {}) {\n    var field = schema.properties[name];\n    var fieldId = idSchema.$id + \"_\" + name;\n    idSchema[name] = toIdSchema(field, fieldId, definitions);\n  }\n  return idSchema;\n}\n\nfunction parseDateString(dateString) {\n  var includeTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (!dateString) {\n    return {\n      year: -1,\n      month: -1,\n      day: -1,\n      hour: includeTime ? -1 : 0,\n      minute: includeTime ? -1 : 0,\n      second: includeTime ? -1 : 0\n    };\n  }\n  var date = new Date(dateString);\n  if (Number.isNaN(date.getTime())) {\n    throw new Error(\"Unable to parse date \" + dateString);\n  }\n  return {\n    year: date.getUTCFullYear(),\n    month: date.getUTCMonth() + 1, // oh you, javascript.\n    day: date.getUTCDate(),\n    hour: includeTime ? date.getUTCHours() : 0,\n    minute: includeTime ? date.getUTCMinutes() : 0,\n    second: includeTime ? date.getUTCSeconds() : 0\n  };\n}\n\nfunction toDateString(_ref2) {\n  var year = _ref2.year,\n      month = _ref2.month,\n      day = _ref2.day,\n      _ref2$hour = _ref2.hour,\n      hour = _ref2$hour === undefined ? 0 : _ref2$hour,\n      _ref2$minute = _ref2.minute,\n      minute = _ref2$minute === undefined ? 0 : _ref2$minute,\n      _ref2$second = _ref2.second,\n      second = _ref2$second === undefined ? 0 : _ref2$second;\n  var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  var utcTime = Date.UTC(year, month - 1, day, hour, minute, second);\n  var datetime = new Date(utcTime).toJSON();\n  return time ? datetime : datetime.slice(0, 10);\n}\n\nfunction pad(num, size) {\n  var s = String(num);\n  while (s.length < size) {\n    s = \"0\" + s;\n  }\n  return s;\n}\n\nfunction setState(instance, state, callback) {\n  var safeRenderCompletion = instance.props.safeRenderCompletion;\n\n  if (safeRenderCompletion) {\n    instance.setState(state, callback);\n  } else {\n    instance.setState(state);\n    setImmediate(callback);\n  }\n}\n\nfunction dataURItoBlob(dataURI) {\n  // Split metadata from data\n  var splitted = dataURI.split(\",\");\n  // Split params\n  var params = splitted[0].split(\";\");\n  // Get mime-type from params\n  var type = params[0].replace(\"data:\", \"\");\n  // Filter the name property from params\n  var properties = params.filter(function (param) {\n    return param.split(\"=\")[0] === \"name\";\n  });\n  // Look for the name and use unknown if no name property.\n  var name = void 0;\n  if (properties.length !== 1) {\n    name = \"unknown\";\n  } else {\n    // Because we filtered out the other property,\n    // we only have the name case here.\n    name = properties[0].split(\"=\")[1];\n  }\n\n  // Built the Uint8Array Blob parameter from the base64 string.\n  var binary = atob(splitted[1]);\n  var array = [];\n  for (var i = 0; i < binary.length; i++) {\n    array.push(binary.charCodeAt(i));\n  }\n  // Create the blob object\n  var blob = new window.Blob([new Uint8Array(array)], { type: type });\n\n  return { blob: blob, name: name };\n}\n\nfunction rangeSpec(schema) {\n  var spec = {};\n  if (schema.multipleOf) {\n    spec.step = schema.multipleOf;\n  }\n  if (schema.minimum || schema.minimum === 0) {\n    spec.min = schema.minimum;\n  }\n  if (schema.maximum || schema.maximum === 0) {\n    spec.max = schema.maximum;\n  }\n  return spec;\n}","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ArrayField = require(\"./ArrayField\");\n\nvar _ArrayField2 = _interopRequireDefault(_ArrayField);\n\nvar _BooleanField = require(\"./BooleanField\");\n\nvar _BooleanField2 = _interopRequireDefault(_BooleanField);\n\nvar _DescriptionField = require(\"./DescriptionField\");\n\nvar _DescriptionField2 = _interopRequireDefault(_DescriptionField);\n\nvar _NumberField = require(\"./NumberField\");\n\nvar _NumberField2 = _interopRequireDefault(_NumberField);\n\nvar _ObjectField = require(\"./ObjectField\");\n\nvar _ObjectField2 = _interopRequireDefault(_ObjectField);\n\nvar _SchemaField = require(\"./SchemaField\");\n\nvar _SchemaField2 = _interopRequireDefault(_SchemaField);\n\nvar _StringField = require(\"./StringField\");\n\nvar _StringField2 = _interopRequireDefault(_StringField);\n\nvar _TitleField = require(\"./TitleField\");\n\nvar _TitleField2 = _interopRequireDefault(_TitleField);\n\nvar _UnsupportedField = require(\"./UnsupportedField\");\n\nvar _UnsupportedField2 = _interopRequireDefault(_UnsupportedField);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  ArrayField: _ArrayField2.default,\n  BooleanField: _BooleanField2.default,\n  DescriptionField: _DescriptionField2.default,\n  NumberField: _NumberField2.default,\n  ObjectField: _ObjectField2.default,\n  SchemaField: _SchemaField2.default,\n  StringField: _StringField2.default,\n  TitleField: _TitleField2.default,\n  UnsupportedField: _UnsupportedField2.default\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction ArrayFieldTitle(_ref) {\n  var TitleField = _ref.TitleField,\n      idSchema = _ref.idSchema,\n      title = _ref.title,\n      required = _ref.required;\n\n  if (!title) {\n    // See #312: Ensure compatibility with old versions of React.\n    return _react2.default.createElement(\"div\", null);\n  }\n  var id = idSchema.$id + \"__title\";\n  return _react2.default.createElement(TitleField, { id: id, title: title, required: required });\n}\n\nfunction ArrayFieldDescription(_ref2) {\n  var DescriptionField = _ref2.DescriptionField,\n      idSchema = _ref2.idSchema,\n      description = _ref2.description;\n\n  if (!description) {\n    // See #312: Ensure compatibility with old versions of React.\n    return _react2.default.createElement(\"div\", null);\n  }\n  var id = idSchema.$id + \"__description\";\n  return _react2.default.createElement(DescriptionField, { id: id, description: description });\n}\n\nfunction IconBtn(props) {\n  var _props$type = props.type,\n      type = _props$type === undefined ? \"default\" : _props$type,\n      icon = props.icon,\n      className = props.className,\n      otherProps = _objectWithoutProperties(props, [\"type\", \"icon\", \"className\"]);\n\n  return _react2.default.createElement(\n    \"button\",\n    _extends({\n      type: \"button\",\n      className: \"btn btn-\" + type + \" \" + className\n    }, otherProps),\n    _react2.default.createElement(\"i\", { className: \"glyphicon glyphicon-\" + icon })\n  );\n}\n\n// Used in the two templates\nfunction DefaultArrayItem(props) {\n  var btnStyle = {\n    flex: 1,\n    paddingLeft: 6,\n    paddingRight: 6,\n    fontWeight: \"bold\"\n  };\n  return _react2.default.createElement(\n    \"div\",\n    { key: props.index, className: props.className },\n    _react2.default.createElement(\n      \"div\",\n      { className: props.hasToolbar ? \"col-xs-9\" : \"col-xs-12\" },\n      props.children\n    ),\n    props.hasToolbar && _react2.default.createElement(\n      \"div\",\n      { className: \"col-xs-3 array-item-toolbox\" },\n      _react2.default.createElement(\n        \"div\",\n        {\n          className: \"btn-group\",\n          style: { display: \"flex\", justifyContent: \"space-around\" } },\n        (props.hasMoveUp || props.hasMoveDown) && _react2.default.createElement(IconBtn, {\n          icon: \"arrow-up\",\n          className: \"array-item-move-up\",\n          tabIndex: \"-1\",\n          style: btnStyle,\n          disabled: props.disabled || props.readonly || !props.hasMoveUp,\n          onClick: props.onReorderClick(props.index, props.index - 1)\n        }),\n        (props.hasMoveUp || props.hasMoveDown) && _react2.default.createElement(IconBtn, {\n          icon: \"arrow-down\",\n          className: \"array-item-move-down\",\n          tabIndex: \"-1\",\n          style: btnStyle,\n          disabled: props.disabled || props.readonly || !props.hasMoveDown,\n          onClick: props.onReorderClick(props.index, props.index + 1)\n        }),\n        props.hasRemove && _react2.default.createElement(IconBtn, {\n          type: \"danger\",\n          icon: \"remove\",\n          className: \"array-item-remove\",\n          tabIndex: \"-1\",\n          style: btnStyle,\n          disabled: props.disabled || props.readonly,\n          onClick: props.onDropIndexClick(props.index)\n        })\n      )\n    )\n  );\n}\n\nfunction DefaultFixedArrayFieldTemplate(props) {\n  return _react2.default.createElement(\n    \"fieldset\",\n    { className: props.className },\n    _react2.default.createElement(ArrayFieldTitle, {\n      key: \"array-field-title-\" + props.idSchema.$id,\n      TitleField: props.TitleField,\n      idSchema: props.idSchema,\n      title: props.title,\n      required: props.required\n    }),\n    props.schema.description && _react2.default.createElement(\n      \"div\",\n      {\n        className: \"field-description\",\n        key: \"field-description-\" + props.idSchema.$id },\n      props.schema.description\n    ),\n    _react2.default.createElement(\n      \"div\",\n      {\n        className: \"row array-item-list\",\n        key: \"array-item-list-\" + props.idSchema.$id },\n      props.items && props.items.map(DefaultArrayItem)\n    ),\n    props.canAdd && _react2.default.createElement(AddButton, {\n      onClick: props.onAddClick,\n      disabled: props.disabled || props.readonly\n    })\n  );\n}\n\nfunction DefaultNormalArrayFieldTemplate(props) {\n  return _react2.default.createElement(\n    \"fieldset\",\n    { className: props.className },\n    _react2.default.createElement(ArrayFieldTitle, {\n      key: \"array-field-title-\" + props.idSchema.$id,\n      TitleField: props.TitleField,\n      idSchema: props.idSchema,\n      title: props.title,\n      required: props.required\n    }),\n    props.schema.description && _react2.default.createElement(ArrayFieldDescription, {\n      key: \"array-field-description-\" + props.idSchema.$id,\n      DescriptionField: props.DescriptionField,\n      idSchema: props.idSchema,\n      description: props.schema.description\n    }),\n    _react2.default.createElement(\n      \"div\",\n      {\n        className: \"row array-item-list\",\n        key: \"array-item-list-\" + props.idSchema.$id },\n      props.items && props.items.map(function (p) {\n        return DefaultArrayItem(p);\n      })\n    ),\n    props.canAdd && _react2.default.createElement(AddButton, {\n      onClick: props.onAddClick,\n      disabled: props.disabled || props.readonly\n    })\n  );\n}\n\nvar ArrayField = function (_Component) {\n  _inherits(ArrayField, _Component);\n\n  function ArrayField() {\n    var _ref3;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, ArrayField);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref3 = ArrayField.__proto__ || Object.getPrototypeOf(ArrayField)).call.apply(_ref3, [this].concat(args))), _this), _this.onAddClick = function (event) {\n      event.preventDefault();\n      var _this$props = _this.props,\n          schema = _this$props.schema,\n          formData = _this$props.formData,\n          _this$props$registry = _this$props.registry,\n          registry = _this$props$registry === undefined ? (0, _utils.getDefaultRegistry)() : _this$props$registry;\n      var definitions = registry.definitions;\n\n      var itemSchema = schema.items;\n      if ((0, _utils.isFixedItems)(schema) && (0, _utils.allowAdditionalItems)(schema)) {\n        itemSchema = schema.additionalItems;\n      }\n      _this.props.onChange([].concat(_toConsumableArray(formData), [(0, _utils.getDefaultFormState)(itemSchema, undefined, definitions)]), { validate: false });\n    }, _this.onDropIndexClick = function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n        var _this$props2 = _this.props,\n            formData = _this$props2.formData,\n            onChange = _this$props2.onChange;\n        // refs #195: revalidate to ensure properly reindexing errors\n\n        onChange(formData.filter(function (_, i) {\n          return i !== index;\n        }), { validate: true });\n      };\n    }, _this.onReorderClick = function (index, newIndex) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n          event.target.blur();\n        }\n        var _this$props3 = _this.props,\n            formData = _this$props3.formData,\n            onChange = _this$props3.onChange;\n\n        onChange(formData.map(function (item, i) {\n          if (i === newIndex) {\n            return formData[index];\n          } else if (i === index) {\n            return formData[newIndex];\n          } else {\n            return item;\n          }\n        }), { validate: true });\n      };\n    }, _this.onChangeForIndex = function (index) {\n      return function (value) {\n        var _this$props4 = _this.props,\n            formData = _this$props4.formData,\n            onChange = _this$props4.onChange;\n\n        var newFormData = formData.map(function (item, i) {\n          // We need to treat undefined items as nulls to have validation.\n          // See https://github.com/tdegrunt/jsonschema/issues/206\n          var jsonValue = typeof value === \"undefined\" ? null : value;\n          return index === i ? jsonValue : item;\n        });\n        onChange(newFormData, { validate: false });\n      };\n    }, _this.onSelectChange = function (value) {\n      _this.props.onChange(value, { validate: false });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(ArrayField, [{\n    key: \"isItemRequired\",\n    value: function isItemRequired(itemSchema) {\n      if (Array.isArray(itemSchema.type)) {\n        // While we don't yet support composite/nullable jsonschema types, it's\n        // future-proof to check for requirement against these.\n        return !itemSchema.type.includes(\"null\");\n      }\n      // All non-null array item types are inherently required by design\n      return itemSchema.type !== \"null\";\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          schema = _props.schema,\n          uiSchema = _props.uiSchema;\n\n      if ((0, _utils.isFilesArray)(schema, uiSchema)) {\n        return this.renderFiles();\n      }\n      if ((0, _utils.isFixedItems)(schema)) {\n        return this.renderFixedArray();\n      }\n      if ((0, _utils.isMultiSelect)(schema)) {\n        return this.renderMultiSelect();\n      }\n      return this.renderNormalArray();\n    }\n  }, {\n    key: \"renderNormalArray\",\n    value: function renderNormalArray() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          schema = _props2.schema,\n          uiSchema = _props2.uiSchema,\n          formData = _props2.formData,\n          errorSchema = _props2.errorSchema,\n          idSchema = _props2.idSchema,\n          name = _props2.name,\n          required = _props2.required,\n          disabled = _props2.disabled,\n          readonly = _props2.readonly,\n          autofocus = _props2.autofocus,\n          _props2$registry = _props2.registry,\n          registry = _props2$registry === undefined ? (0, _utils.getDefaultRegistry)() : _props2$registry,\n          formContext = _props2.formContext,\n          onBlur = _props2.onBlur;\n\n      var title = schema.title === undefined ? name : schema.title;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          definitions = registry.definitions,\n          fields = registry.fields;\n      var TitleField = fields.TitleField,\n          DescriptionField = fields.DescriptionField;\n\n      var itemsSchema = (0, _utils.retrieveSchema)(schema.items, definitions);\n\n      var _getUiOptions = (0, _utils.getUiOptions)(uiSchema),\n          _getUiOptions$addable = _getUiOptions.addable,\n          addable = _getUiOptions$addable === undefined ? true : _getUiOptions$addable;\n\n      var arrayProps = {\n        canAdd: addable,\n        items: formData.map(function (item, index) {\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = (0, _utils.toIdSchema)(itemsSchema, itemIdPrefix, definitions);\n          return _this2.renderArrayFieldItem({\n            index: index,\n            canMoveUp: index > 0,\n            canMoveDown: index < formData.length - 1,\n            itemSchema: itemsSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            itemData: formData[index],\n            itemUiSchema: uiSchema.items,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur\n          });\n        }),\n        className: \"field field-array field-array-of-\" + itemsSchema.type,\n        DescriptionField: DescriptionField,\n        disabled: disabled,\n        idSchema: idSchema,\n        uiSchema: uiSchema,\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        title: title,\n        TitleField: TitleField,\n        formContext: formContext\n      };\n\n      // Check if a custom render function was passed in\n      var Component = ArrayFieldTemplate || DefaultNormalArrayFieldTemplate;\n      return _react2.default.createElement(Component, arrayProps);\n    }\n  }, {\n    key: \"renderMultiSelect\",\n    value: function renderMultiSelect() {\n      var _props3 = this.props,\n          schema = _props3.schema,\n          idSchema = _props3.idSchema,\n          uiSchema = _props3.uiSchema,\n          disabled = _props3.disabled,\n          readonly = _props3.readonly,\n          autofocus = _props3.autofocus,\n          onBlur = _props3.onBlur,\n          _props3$registry = _props3.registry,\n          registry = _props3$registry === undefined ? (0, _utils.getDefaultRegistry)() : _props3$registry;\n\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          definitions = registry.definitions,\n          formContext = registry.formContext;\n\n      var itemsSchema = (0, _utils.retrieveSchema)(schema.items, definitions);\n      var enumOptions = (0, _utils.optionsList)(itemsSchema);\n\n      var _getUiOptions$enumOpt = _extends({}, (0, _utils.getUiOptions)(uiSchema), {\n        enumOptions: enumOptions\n      }),\n          _getUiOptions$enumOpt2 = _getUiOptions$enumOpt.widget,\n          widget = _getUiOptions$enumOpt2 === undefined ? \"select\" : _getUiOptions$enumOpt2,\n          options = _objectWithoutProperties(_getUiOptions$enumOpt, [\"widget\"]);\n\n      var Widget = (0, _utils.getWidget)(schema, widget, widgets);\n      return _react2.default.createElement(Widget, {\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        options: options,\n        schema: schema,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        formContext: formContext,\n        autofocus: autofocus\n      });\n    }\n  }, {\n    key: \"renderFiles\",\n    value: function renderFiles() {\n      var _props4 = this.props,\n          schema = _props4.schema,\n          uiSchema = _props4.uiSchema,\n          idSchema = _props4.idSchema,\n          name = _props4.name,\n          disabled = _props4.disabled,\n          readonly = _props4.readonly,\n          autofocus = _props4.autofocus,\n          onBlur = _props4.onBlur,\n          _props4$registry = _props4.registry,\n          registry = _props4$registry === undefined ? (0, _utils.getDefaultRegistry)() : _props4$registry;\n\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          formContext = registry.formContext;\n\n      var _getUiOptions2 = (0, _utils.getUiOptions)(uiSchema),\n          _getUiOptions2$widget = _getUiOptions2.widget,\n          widget = _getUiOptions2$widget === undefined ? \"files\" : _getUiOptions2$widget,\n          options = _objectWithoutProperties(_getUiOptions2, [\"widget\"]);\n\n      var Widget = (0, _utils.getWidget)(schema, widget, widgets);\n      return _react2.default.createElement(Widget, {\n        options: options,\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        schema: schema,\n        title: title,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        formContext: formContext,\n        autofocus: autofocus\n      });\n    }\n  }, {\n    key: \"renderFixedArray\",\n    value: function renderFixedArray() {\n      var _this3 = this;\n\n      var _props5 = this.props,\n          schema = _props5.schema,\n          uiSchema = _props5.uiSchema,\n          errorSchema = _props5.errorSchema,\n          idSchema = _props5.idSchema,\n          name = _props5.name,\n          required = _props5.required,\n          disabled = _props5.disabled,\n          readonly = _props5.readonly,\n          autofocus = _props5.autofocus,\n          _props5$registry = _props5.registry,\n          registry = _props5$registry === undefined ? (0, _utils.getDefaultRegistry)() : _props5$registry,\n          onBlur = _props5.onBlur;\n\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          definitions = registry.definitions,\n          fields = registry.fields;\n      var TitleField = fields.TitleField;\n\n      var itemSchemas = schema.items.map(function (item) {\n        return (0, _utils.retrieveSchema)(item, definitions);\n      });\n      var additionalSchema = (0, _utils.allowAdditionalItems)(schema) ? (0, _utils.retrieveSchema)(schema.additionalItems, definitions) : null;\n\n      var _getUiOptions3 = (0, _utils.getUiOptions)(uiSchema),\n          _getUiOptions3$addabl = _getUiOptions3.addable,\n          addable = _getUiOptions3$addabl === undefined ? true : _getUiOptions3$addabl;\n\n      var canAdd = addable && additionalSchema;\n\n      if (!items || items.length < itemSchemas.length) {\n        // to make sure at least all fixed items are generated\n        items = items || [];\n        items = items.concat(new Array(itemSchemas.length - items.length));\n      }\n\n      // These are the props passed into the render function\n      var arrayProps = {\n        canAdd: canAdd,\n        className: \"field field-array field-array-fixed-items\",\n        disabled: disabled,\n        idSchema: idSchema,\n        items: items.map(function (item, index) {\n          var additional = index >= itemSchemas.length;\n          var itemSchema = additional ? additionalSchema : itemSchemas[index];\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = (0, _utils.toIdSchema)(itemSchema, itemIdPrefix, definitions);\n          var itemUiSchema = additional ? uiSchema.additionalItems || {} : Array.isArray(uiSchema.items) ? uiSchema.items[index] : uiSchema.items || {};\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n\n          return _this3.renderArrayFieldItem({\n            index: index,\n            canRemove: additional,\n            canMoveUp: index >= itemSchemas.length + 1,\n            canMoveDown: additional && index < items.length - 1,\n            itemSchema: itemSchema,\n            itemData: item,\n            itemUiSchema: itemUiSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur\n          });\n        }),\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        uiSchema: uiSchema,\n        title: title,\n        TitleField: TitleField\n      };\n\n      // Check if a custom template template was passed in\n      var Template = ArrayFieldTemplate || DefaultFixedArrayFieldTemplate;\n      return _react2.default.createElement(Template, arrayProps);\n    }\n  }, {\n    key: \"renderArrayFieldItem\",\n    value: function renderArrayFieldItem(props) {\n      var index = props.index,\n          _props$canRemove = props.canRemove,\n          canRemove = _props$canRemove === undefined ? true : _props$canRemove,\n          _props$canMoveUp = props.canMoveUp,\n          canMoveUp = _props$canMoveUp === undefined ? true : _props$canMoveUp,\n          _props$canMoveDown = props.canMoveDown,\n          canMoveDown = _props$canMoveDown === undefined ? true : _props$canMoveDown,\n          itemSchema = props.itemSchema,\n          itemData = props.itemData,\n          itemUiSchema = props.itemUiSchema,\n          itemIdSchema = props.itemIdSchema,\n          itemErrorSchema = props.itemErrorSchema,\n          autofocus = props.autofocus,\n          onBlur = props.onBlur;\n      var _props6 = this.props,\n          disabled = _props6.disabled,\n          readonly = _props6.readonly,\n          uiSchema = _props6.uiSchema,\n          _props6$registry = _props6.registry,\n          registry = _props6$registry === undefined ? (0, _utils.getDefaultRegistry)() : _props6$registry;\n      var SchemaField = registry.fields.SchemaField;\n\n      var _orderable$removable$ = _extends({\n        orderable: true,\n        removable: true\n      }, uiSchema[\"ui:options\"]),\n          orderable = _orderable$removable$.orderable,\n          removable = _orderable$removable$.removable;\n\n      var has = {\n        moveUp: orderable && canMoveUp,\n        moveDown: orderable && canMoveDown,\n        remove: removable && canRemove\n      };\n      has.toolbar = Object.keys(has).some(function (key) {\n        return has[key];\n      });\n\n      return {\n        children: _react2.default.createElement(SchemaField, {\n          schema: itemSchema,\n          uiSchema: itemUiSchema,\n          formData: itemData,\n          errorSchema: itemErrorSchema,\n          idSchema: itemIdSchema,\n          required: this.isItemRequired(itemSchema),\n          onChange: this.onChangeForIndex(index),\n          onBlur: onBlur,\n          registry: this.props.registry,\n          disabled: this.props.disabled,\n          readonly: this.props.readonly,\n          autofocus: autofocus\n        }),\n        className: \"array-item\",\n        disabled: disabled,\n        hasToolbar: has.toolbar,\n        hasMoveUp: has.moveUp,\n        hasMoveDown: has.moveDown,\n        hasRemove: has.remove,\n        index: index,\n        onDropIndexClick: this.onDropIndexClick,\n        onReorderClick: this.onReorderClick,\n        readonly: readonly\n      };\n    }\n  }, {\n    key: \"itemTitle\",\n    get: function get() {\n      var schema = this.props.schema;\n\n      return schema.items.title || schema.items.description || \"Item\";\n    }\n  }]);\n\n  return ArrayField;\n}(_react.Component);\n\nArrayField.defaultProps = {\n  uiSchema: {},\n  formData: [],\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n};\n\n\nfunction AddButton(_ref4) {\n  var onClick = _ref4.onClick,\n      disabled = _ref4.disabled;\n\n  return _react2.default.createElement(\n    \"div\",\n    { className: \"row\" },\n    _react2.default.createElement(\n      \"p\",\n      { className: \"col-xs-3 col-xs-offset-9 array-item-add text-right\" },\n      _react2.default.createElement(IconBtn, {\n        type: \"info\",\n        icon: \"plus\",\n        className: \"btn-add col-xs-12\",\n        tabIndex: \"0\",\n        onClick: onClick,\n        disabled: disabled\n      })\n    )\n  );\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  ArrayField.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    uiSchema: _propTypes2.default.shape({\n      \"ui:options\": _propTypes2.default.shape({\n        addable: _propTypes2.default.bool,\n        orderable: _propTypes2.default.bool,\n        removable: _propTypes2.default.bool\n      })\n    }),\n    idSchema: _propTypes2.default.object,\n    errorSchema: _propTypes2.default.object,\n    onChange: _propTypes2.default.func.isRequired,\n    onBlur: _propTypes2.default.func,\n    formData: _propTypes2.default.array,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    registry: _propTypes2.default.shape({\n      widgets: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.object])).isRequired,\n      fields: _propTypes2.default.objectOf(_propTypes2.default.func).isRequired,\n      definitions: _propTypes2.default.object.isRequired,\n      formContext: _propTypes2.default.object.isRequired\n    })\n  };\n}\n\nexports.default = ArrayField;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction BooleanField(props) {\n  var schema = props.schema,\n      name = props.name,\n      uiSchema = props.uiSchema,\n      idSchema = props.idSchema,\n      formData = props.formData,\n      _props$registry = props.registry,\n      registry = _props$registry === undefined ? (0, _utils.getDefaultRegistry)() : _props$registry,\n      required = props.required,\n      disabled = props.disabled,\n      readonly = props.readonly,\n      autofocus = props.autofocus,\n      onChange = props.onChange;\n  var title = schema.title;\n  var widgets = registry.widgets,\n      formContext = registry.formContext;\n\n  var _getUiOptions = (0, _utils.getUiOptions)(uiSchema),\n      _getUiOptions$widget = _getUiOptions.widget,\n      widget = _getUiOptions$widget === undefined ? \"checkbox\" : _getUiOptions$widget,\n      options = _objectWithoutProperties(_getUiOptions, [\"widget\"]);\n\n  var Widget = (0, _utils.getWidget)(schema, widget, widgets);\n  var enumOptions = (0, _utils.optionsList)({\n    enum: [true, false],\n    enumNames: schema.enumNames || [\"yes\", \"no\"]\n  });\n  return _react2.default.createElement(Widget, {\n    options: _extends({}, options, { enumOptions: enumOptions }),\n    schema: schema,\n    id: idSchema && idSchema.$id,\n    onChange: onChange,\n    label: title === undefined ? name : title,\n    value: formData,\n    required: required,\n    disabled: disabled,\n    readonly: readonly,\n    registry: registry,\n    formContext: formContext,\n    autofocus: autofocus\n  });\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  BooleanField.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    uiSchema: _propTypes2.default.object,\n    idSchema: _propTypes2.default.object,\n    onChange: _propTypes2.default.func.isRequired,\n    formData: _propTypes2.default.bool,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    registry: _propTypes2.default.shape({\n      widgets: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.object])).isRequired,\n      fields: _propTypes2.default.objectOf(_propTypes2.default.func).isRequired,\n      definitions: _propTypes2.default.object.isRequired,\n      formContext: _propTypes2.default.object.isRequired\n    })\n  };\n}\n\nBooleanField.defaultProps = {\n  uiSchema: {},\n  disabled: false,\n  readonly: false,\n  autofocus: false\n};\n\nexports.default = BooleanField;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction DescriptionField(props) {\n  var id = props.id,\n      description = props.description;\n\n  if (!description) {\n    // See #312: Ensure compatibility with old versions of React.\n    return _react2.default.createElement(\"div\", null);\n  }\n  if (typeof description === \"string\") {\n    return _react2.default.createElement(\n      \"p\",\n      { id: id, className: \"field-description\" },\n      description\n    );\n  } else {\n    return _react2.default.createElement(\n      \"div\",\n      { id: id, className: \"field-description\" },\n      description\n    );\n  }\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  DescriptionField.propTypes = {\n    id: _propTypes2.default.string,\n    description: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.element])\n  };\n}\n\nexports.default = DescriptionField;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction NumberField(props) {\n  var StringField = props.registry.fields.StringField;\n\n  return _react2.default.createElement(StringField, _extends({}, props, {\n    onChange: function onChange(value) {\n      return props.onChange((0, _utils.asNumber)(value));\n    }\n  }));\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  NumberField.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    uiSchema: _propTypes2.default.object,\n    idSchema: _propTypes2.default.object,\n    onChange: _propTypes2.default.func.isRequired,\n    formData: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n    required: _propTypes2.default.bool,\n    formContext: _propTypes2.default.object.isRequired\n  };\n}\n\nNumberField.defaultProps = {\n  uiSchema: {}\n};\n\nexports.default = NumberField;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ObjectField = function (_Component) {\n  _inherits(ObjectField, _Component);\n\n  function ObjectField() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, ObjectField);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ObjectField.__proto__ || Object.getPrototypeOf(ObjectField)).call.apply(_ref, [this].concat(args))), _this), _this.onPropertyChange = function (name) {\n      return function (value, options) {\n        var newFormData = _extends({}, _this.props.formData, _defineProperty({}, name, value));\n        _this.props.onChange(newFormData, options);\n      };\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(ObjectField, [{\n    key: \"isRequired\",\n    value: function isRequired(name) {\n      var schema = this.props.schema;\n      return Array.isArray(schema.required) && schema.required.indexOf(name) !== -1;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          uiSchema = _props.uiSchema,\n          formData = _props.formData,\n          errorSchema = _props.errorSchema,\n          idSchema = _props.idSchema,\n          name = _props.name,\n          required = _props.required,\n          disabled = _props.disabled,\n          readonly = _props.readonly,\n          onBlur = _props.onBlur,\n          _props$registry = _props.registry,\n          registry = _props$registry === undefined ? (0, _utils.getDefaultRegistry)() : _props$registry;\n      var definitions = registry.definitions,\n          fields = registry.fields,\n          formContext = registry.formContext;\n      var SchemaField = fields.SchemaField,\n          TitleField = fields.TitleField,\n          DescriptionField = fields.DescriptionField;\n\n      var schema = (0, _utils.retrieveSchema)(this.props.schema, definitions);\n      var title = schema.title === undefined ? name : schema.title;\n      var orderedProperties = void 0;\n      try {\n        var properties = Object.keys(schema.properties);\n        orderedProperties = (0, _utils.orderProperties)(properties, uiSchema[\"ui:order\"]);\n      } catch (err) {\n        return _react2.default.createElement(\n          \"div\",\n          null,\n          _react2.default.createElement(\n            \"p\",\n            { className: \"config-error\", style: { color: \"red\" } },\n            \"Invalid \",\n            name || \"root\",\n            \" object field configuration:\",\n            _react2.default.createElement(\n              \"em\",\n              null,\n              err.message\n            ),\n            \".\"\n          ),\n          _react2.default.createElement(\n            \"pre\",\n            null,\n            JSON.stringify(schema)\n          )\n        );\n      }\n      return _react2.default.createElement(\n        \"fieldset\",\n        null,\n        title && _react2.default.createElement(TitleField, {\n          id: idSchema.$id + \"__title\",\n          title: title,\n          required: required,\n          formContext: formContext\n        }),\n        schema.description && _react2.default.createElement(DescriptionField, {\n          id: idSchema.$id + \"__description\",\n          description: schema.description,\n          formContext: formContext\n        }),\n        orderedProperties.map(function (name, index) {\n          return _react2.default.createElement(SchemaField, {\n            key: index,\n            name: name,\n            required: _this2.isRequired(name),\n            schema: schema.properties[name],\n            uiSchema: uiSchema[name],\n            errorSchema: errorSchema[name],\n            idSchema: idSchema[name],\n            formData: formData[name],\n            onChange: _this2.onPropertyChange(name),\n            onBlur: onBlur,\n            registry: registry,\n            disabled: disabled,\n            readonly: readonly\n          });\n        })\n      );\n    }\n  }]);\n\n  return ObjectField;\n}(_react.Component);\n\nObjectField.defaultProps = {\n  uiSchema: {},\n  formData: {},\n  errorSchema: {},\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false\n};\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  ObjectField.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    uiSchema: _propTypes2.default.object,\n    errorSchema: _propTypes2.default.object,\n    idSchema: _propTypes2.default.object,\n    onChange: _propTypes2.default.func.isRequired,\n    formData: _propTypes2.default.object,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    registry: _propTypes2.default.shape({\n      widgets: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.object])).isRequired,\n      fields: _propTypes2.default.objectOf(_propTypes2.default.func).isRequired,\n      definitions: _propTypes2.default.object.isRequired,\n      formContext: _propTypes2.default.object.isRequired\n    })\n  };\n}\n\nexports.default = ObjectField;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nvar _UnsupportedField = require(\"./UnsupportedField\");\n\nvar _UnsupportedField2 = _interopRequireDefault(_UnsupportedField);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar REQUIRED_FIELD_SYMBOL = \"*\";\nvar COMPONENT_TYPES = {\n  array: \"ArrayField\",\n  boolean: \"BooleanField\",\n  integer: \"NumberField\",\n  number: \"NumberField\",\n  object: \"ObjectField\",\n  string: \"StringField\"\n};\n\nfunction getFieldComponent(schema, uiSchema, fields) {\n  var field = uiSchema[\"ui:field\"];\n  if (typeof field === \"function\") {\n    return field;\n  }\n  if (typeof field === \"string\" && field in fields) {\n    return fields[field];\n  }\n  var componentName = COMPONENT_TYPES[schema.type];\n  return componentName in fields ? fields[componentName] : _UnsupportedField2.default;\n}\n\nfunction Label(props) {\n  var label = props.label,\n      required = props.required,\n      id = props.id;\n\n  if (!label) {\n    // See #312: Ensure compatibility with old versions of React.\n    return _react2.default.createElement(\"div\", null);\n  }\n  return _react2.default.createElement(\n    \"label\",\n    { className: \"control-label\", htmlFor: id },\n    required ? label + REQUIRED_FIELD_SYMBOL : label\n  );\n}\n\nfunction Help(props) {\n  var help = props.help;\n\n  if (!help) {\n    // See #312: Ensure compatibility with old versions of React.\n    return _react2.default.createElement(\"div\", null);\n  }\n  if (typeof help === \"string\") {\n    return _react2.default.createElement(\n      \"p\",\n      { className: \"help-block\" },\n      help\n    );\n  }\n  return _react2.default.createElement(\n    \"div\",\n    { className: \"help-block\" },\n    help\n  );\n}\n\nfunction ErrorList(props) {\n  var _props$errors = props.errors,\n      errors = _props$errors === undefined ? [] : _props$errors;\n\n  if (errors.length === 0) {\n    return _react2.default.createElement(\"div\", null);\n  }\n  return _react2.default.createElement(\n    \"div\",\n    null,\n    _react2.default.createElement(\"p\", null),\n    _react2.default.createElement(\n      \"ul\",\n      { className: \"error-detail bs-callout bs-callout-info\" },\n      errors.map(function (error, index) {\n        return _react2.default.createElement(\n          \"li\",\n          { className: \"text-danger\", key: index },\n          error\n        );\n      })\n    )\n  );\n}\n\nfunction DefaultTemplate(props) {\n  var id = props.id,\n      classNames = props.classNames,\n      label = props.label,\n      children = props.children,\n      errors = props.errors,\n      help = props.help,\n      description = props.description,\n      hidden = props.hidden,\n      required = props.required,\n      displayLabel = props.displayLabel;\n\n  if (hidden) {\n    return children;\n  }\n\n  return _react2.default.createElement(\n    \"div\",\n    { className: classNames },\n    displayLabel && _react2.default.createElement(Label, { label: label, required: required, id: id }),\n    displayLabel && description ? description : null,\n    children,\n    errors,\n    help\n  );\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  DefaultTemplate.propTypes = {\n    id: _propTypes2.default.string,\n    classNames: _propTypes2.default.string,\n    label: _propTypes2.default.string,\n    children: _propTypes2.default.node.isRequired,\n    errors: _propTypes2.default.element,\n    rawErrors: _propTypes2.default.arrayOf(_propTypes2.default.string),\n    help: _propTypes2.default.element,\n    rawHelp: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.element]),\n    description: _propTypes2.default.element,\n    rawDescription: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.element]),\n    hidden: _propTypes2.default.bool,\n    required: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    displayLabel: _propTypes2.default.bool,\n    fields: _propTypes2.default.object,\n    formContext: _propTypes2.default.object\n  };\n}\n\nDefaultTemplate.defaultProps = {\n  hidden: false,\n  readonly: false,\n  required: false,\n  displayLabel: true\n};\n\nfunction SchemaFieldRender(props) {\n  var uiSchema = props.uiSchema,\n      errorSchema = props.errorSchema,\n      idSchema = props.idSchema,\n      name = props.name,\n      required = props.required,\n      _props$registry = props.registry,\n      registry = _props$registry === undefined ? (0, _utils.getDefaultRegistry)() : _props$registry;\n  var definitions = registry.definitions,\n      fields = registry.fields,\n      formContext = registry.formContext,\n      _registry$FieldTempla = registry.FieldTemplate,\n      FieldTemplate = _registry$FieldTempla === undefined ? DefaultTemplate : _registry$FieldTempla;\n\n  var schema = (0, _utils.retrieveSchema)(props.schema, definitions);\n  var FieldComponent = getFieldComponent(schema, uiSchema, fields);\n  var DescriptionField = fields.DescriptionField;\n\n  var disabled = Boolean(props.disabled || uiSchema[\"ui:disabled\"]);\n  var readonly = Boolean(props.readonly || uiSchema[\"ui:readonly\"]);\n  var autofocus = Boolean(props.autofocus || uiSchema[\"ui:autofocus\"]);\n\n  if (Object.keys(schema).length === 0) {\n    // See #312: Ensure compatibility with old versions of React.\n    return _react2.default.createElement(\"div\", null);\n  }\n\n  var uiOptions = (0, _utils.getUiOptions)(uiSchema);\n  var _uiOptions$label = uiOptions.label,\n      displayLabel = _uiOptions$label === undefined ? true : _uiOptions$label;\n\n  if (schema.type === \"array\") {\n    displayLabel = (0, _utils.isMultiSelect)(schema) || (0, _utils.isFilesArray)(schema, uiSchema);\n  }\n  if (schema.type === \"object\") {\n    displayLabel = false;\n  }\n  if (schema.type === \"boolean\" && !uiSchema[\"ui:widget\"]) {\n    displayLabel = false;\n  }\n  if (uiSchema[\"ui:field\"]) {\n    displayLabel = false;\n  }\n\n  var __errors = errorSchema.__errors,\n      fieldErrorSchema = _objectWithoutProperties(errorSchema, [\"__errors\"]);\n\n  // See #439: uiSchema: Don't pass consumed class names to child components\n\n\n  var field = _react2.default.createElement(FieldComponent, _extends({}, props, {\n    schema: schema,\n    uiSchema: _extends({}, uiSchema, { classNames: undefined }),\n    disabled: disabled,\n    readonly: readonly,\n    autofocus: autofocus,\n    errorSchema: fieldErrorSchema,\n    formContext: formContext\n  }));\n\n  var type = schema.type;\n\n  var id = idSchema.$id;\n  var label = uiSchema[\"ui:title\"] || props.schema.title || schema.title || name;\n  var description = uiSchema[\"ui:description\"] || props.schema.description || schema.description;\n  var errors = __errors;\n  var help = uiSchema[\"ui:help\"];\n  var hidden = uiSchema[\"ui:widget\"] === \"hidden\";\n  var classNames = [\"form-group\", \"field\", \"field-\" + type, errors && errors.length > 0 ? \"field-error has-error has-danger\" : \"\", uiSchema.classNames].join(\" \").trim();\n\n  var fieldProps = {\n    description: _react2.default.createElement(DescriptionField, {\n      id: id + \"__description\",\n      description: description,\n      formContext: formContext\n    }),\n    rawDescription: description,\n    help: _react2.default.createElement(Help, { help: help }),\n    rawHelp: typeof help === \"string\" ? help : undefined,\n    errors: _react2.default.createElement(ErrorList, { errors: errors }),\n    rawErrors: errors,\n    id: id,\n    label: label,\n    hidden: hidden,\n    required: required,\n    readonly: readonly,\n    displayLabel: displayLabel,\n    classNames: classNames,\n    formContext: formContext,\n    fields: fields,\n    schema: schema,\n    uiSchema: uiSchema\n  };\n\n  return _react2.default.createElement(\n    FieldTemplate,\n    fieldProps,\n    field\n  );\n}\n\nvar SchemaField = function (_React$Component) {\n  _inherits(SchemaField, _React$Component);\n\n  function SchemaField() {\n    _classCallCheck(this, SchemaField);\n\n    return _possibleConstructorReturn(this, (SchemaField.__proto__ || Object.getPrototypeOf(SchemaField)).apply(this, arguments));\n  }\n\n  _createClass(SchemaField, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      // if schemas are equal idSchemas will be equal as well,\n      // so it is not necessary to compare\n      return !(0, _utils.deepEquals)(_extends({}, this.props, { idSchema: undefined }), _extends({}, nextProps, { idSchema: undefined }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return SchemaFieldRender(this.props);\n    }\n  }]);\n\n  return SchemaField;\n}(_react2.default.Component);\n\nSchemaField.defaultProps = {\n  uiSchema: {},\n  errorSchema: {},\n  idSchema: {},\n  disabled: false,\n  readonly: false,\n  autofocus: false\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  SchemaField.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    uiSchema: _propTypes2.default.object,\n    idSchema: _propTypes2.default.object,\n    formData: _propTypes2.default.any,\n    errorSchema: _propTypes2.default.object,\n    registry: _propTypes2.default.shape({\n      widgets: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.object])).isRequired,\n      fields: _propTypes2.default.objectOf(_propTypes2.default.func).isRequired,\n      definitions: _propTypes2.default.object.isRequired,\n      ArrayFieldTemplate: _propTypes2.default.func,\n      FieldTemplate: _propTypes2.default.func,\n      formContext: _propTypes2.default.object.isRequired\n    })\n  };\n}\n\nexports.default = SchemaField;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = UnsupportedField;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction UnsupportedField(_ref) {\n  var schema = _ref.schema;\n\n  // XXX render json as string so dev can inspect faulty subschema\n  return _react2.default.createElement(\n    \"div\",\n    { className: \"unsupported-field\" },\n    \"Unsupported field schema \",\n    JSON.stringify(schema, null, 2),\n    \".\"\n  );\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction StringField(props) {\n  var schema = props.schema,\n      name = props.name,\n      uiSchema = props.uiSchema,\n      idSchema = props.idSchema,\n      formData = props.formData,\n      required = props.required,\n      disabled = props.disabled,\n      readonly = props.readonly,\n      autofocus = props.autofocus,\n      onChange = props.onChange,\n      onBlur = props.onBlur,\n      _props$registry = props.registry,\n      registry = _props$registry === undefined ? (0, _utils.getDefaultRegistry)() : _props$registry;\n  var title = schema.title,\n      format = schema.format;\n  var widgets = registry.widgets,\n      formContext = registry.formContext;\n\n  var enumOptions = Array.isArray(schema.enum) && (0, _utils.optionsList)(schema);\n  var defaultWidget = format || (enumOptions ? \"select\" : \"text\");\n\n  var _getUiOptions = (0, _utils.getUiOptions)(uiSchema),\n      _getUiOptions$widget = _getUiOptions.widget,\n      widget = _getUiOptions$widget === undefined ? defaultWidget : _getUiOptions$widget,\n      _getUiOptions$placeho = _getUiOptions.placeholder,\n      placeholder = _getUiOptions$placeho === undefined ? \"\" : _getUiOptions$placeho,\n      options = _objectWithoutProperties(_getUiOptions, [\"widget\", \"placeholder\"]);\n\n  var Widget = (0, _utils.getWidget)(schema, widget, widgets);\n\n  return _react2.default.createElement(Widget, {\n    options: _extends({}, options, { enumOptions: enumOptions }),\n    schema: schema,\n    id: idSchema && idSchema.$id,\n    label: title === undefined ? name : title,\n    value: formData,\n    onChange: onChange,\n    onBlur: onBlur,\n    required: required,\n    disabled: disabled,\n    readonly: readonly,\n    formContext: formContext,\n    autofocus: autofocus,\n    registry: registry,\n    placeholder: placeholder\n  });\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  StringField.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    uiSchema: _propTypes2.default.object.isRequired,\n    idSchema: _propTypes2.default.object,\n    onChange: _propTypes2.default.func.isRequired,\n    onBlur: _propTypes2.default.func,\n    formData: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n    registry: _propTypes2.default.shape({\n      widgets: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.object])).isRequired,\n      fields: _propTypes2.default.objectOf(_propTypes2.default.func).isRequired,\n      definitions: _propTypes2.default.object.isRequired,\n      formContext: _propTypes2.default.object.isRequired\n    }),\n    formContext: _propTypes2.default.object.isRequired,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool\n  };\n}\n\nStringField.defaultProps = {\n  uiSchema: {},\n  disabled: false,\n  readonly: false,\n  autofocus: false\n};\n\nexports.default = StringField;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar REQUIRED_FIELD_SYMBOL = \"*\";\n\nfunction TitleField(props) {\n  var id = props.id,\n      title = props.title,\n      required = props.required;\n\n  var legend = required ? title + REQUIRED_FIELD_SYMBOL : title;\n  return _react2.default.createElement(\n    \"legend\",\n    { id: id },\n    legend\n  );\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  TitleField.propTypes = {\n    id: _propTypes2.default.string,\n    title: _propTypes2.default.string,\n    required: _propTypes2.default.bool\n  };\n}\n\nexports.default = TitleField;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _AltDateWidget = require(\"./AltDateWidget\");\n\nvar _AltDateWidget2 = _interopRequireDefault(_AltDateWidget);\n\nvar _AltDateTimeWidget = require(\"./AltDateTimeWidget\");\n\nvar _AltDateTimeWidget2 = _interopRequireDefault(_AltDateTimeWidget);\n\nvar _CheckboxWidget = require(\"./CheckboxWidget\");\n\nvar _CheckboxWidget2 = _interopRequireDefault(_CheckboxWidget);\n\nvar _CheckboxesWidget = require(\"./CheckboxesWidget\");\n\nvar _CheckboxesWidget2 = _interopRequireDefault(_CheckboxesWidget);\n\nvar _ColorWidget = require(\"./ColorWidget\");\n\nvar _ColorWidget2 = _interopRequireDefault(_ColorWidget);\n\nvar _DateWidget = require(\"./DateWidget\");\n\nvar _DateWidget2 = _interopRequireDefault(_DateWidget);\n\nvar _DateTimeWidget = require(\"./DateTimeWidget\");\n\nvar _DateTimeWidget2 = _interopRequireDefault(_DateTimeWidget);\n\nvar _EmailWidget = require(\"./EmailWidget\");\n\nvar _EmailWidget2 = _interopRequireDefault(_EmailWidget);\n\nvar _FileWidget = require(\"./FileWidget\");\n\nvar _FileWidget2 = _interopRequireDefault(_FileWidget);\n\nvar _HiddenWidget = require(\"./HiddenWidget\");\n\nvar _HiddenWidget2 = _interopRequireDefault(_HiddenWidget);\n\nvar _PasswordWidget = require(\"./PasswordWidget\");\n\nvar _PasswordWidget2 = _interopRequireDefault(_PasswordWidget);\n\nvar _RadioWidget = require(\"./RadioWidget\");\n\nvar _RadioWidget2 = _interopRequireDefault(_RadioWidget);\n\nvar _RangeWidget = require(\"./RangeWidget\");\n\nvar _RangeWidget2 = _interopRequireDefault(_RangeWidget);\n\nvar _SelectWidget = require(\"./SelectWidget\");\n\nvar _SelectWidget2 = _interopRequireDefault(_SelectWidget);\n\nvar _TextareaWidget = require(\"./TextareaWidget\");\n\nvar _TextareaWidget2 = _interopRequireDefault(_TextareaWidget);\n\nvar _TextWidget = require(\"./TextWidget\");\n\nvar _TextWidget2 = _interopRequireDefault(_TextWidget);\n\nvar _URLWidget = require(\"./URLWidget\");\n\nvar _URLWidget2 = _interopRequireDefault(_URLWidget);\n\nvar _UpDownWidget = require(\"./UpDownWidget\");\n\nvar _UpDownWidget2 = _interopRequireDefault(_UpDownWidget);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  PasswordWidget: _PasswordWidget2.default,\n  RadioWidget: _RadioWidget2.default,\n  UpDownWidget: _UpDownWidget2.default,\n  RangeWidget: _RangeWidget2.default,\n  SelectWidget: _SelectWidget2.default,\n  TextWidget: _TextWidget2.default,\n  DateWidget: _DateWidget2.default,\n  DateTimeWidget: _DateTimeWidget2.default,\n  AltDateWidget: _AltDateWidget2.default,\n  AltDateTimeWidget: _AltDateTimeWidget2.default,\n  EmailWidget: _EmailWidget2.default,\n  URLWidget: _URLWidget2.default,\n  TextareaWidget: _TextareaWidget2.default,\n  HiddenWidget: _HiddenWidget2.default,\n  ColorWidget: _ColorWidget2.default,\n  FileWidget: _FileWidget2.default,\n  CheckboxWidget: _CheckboxWidget2.default,\n  CheckboxesWidget: _CheckboxesWidget2.default\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction rangeOptions(start, stop) {\n  var options = [];\n  for (var i = start; i <= stop; i++) {\n    options.push({ value: i, label: (0, _utils.pad)(i, 2) });\n  }\n  return options;\n}\n\nfunction readyForChange(state) {\n  return Object.keys(state).every(function (key) {\n    return state[key] !== -1;\n  });\n}\n\nfunction DateElement(props) {\n  var type = props.type,\n      range = props.range,\n      value = props.value,\n      select = props.select,\n      rootId = props.rootId,\n      disabled = props.disabled,\n      readonly = props.readonly,\n      autofocus = props.autofocus,\n      registry = props.registry,\n      onBlur = props.onBlur;\n\n  var id = rootId + \"_\" + type;\n  var SelectWidget = registry.widgets.SelectWidget;\n\n  return _react2.default.createElement(SelectWidget, {\n    schema: { type: \"integer\" },\n    id: id,\n    className: \"form-control\",\n    options: { enumOptions: rangeOptions(range[0], range[1]) },\n    placeholder: type,\n    value: value,\n    disabled: disabled,\n    readonly: readonly,\n    autofocus: autofocus,\n    onChange: function onChange(value) {\n      return select(type, value);\n    },\n    onBlur: onBlur\n  });\n}\n\nvar AltDateWidget = function (_Component) {\n  _inherits(AltDateWidget, _Component);\n\n  function AltDateWidget(props) {\n    _classCallCheck(this, AltDateWidget);\n\n    var _this = _possibleConstructorReturn(this, (AltDateWidget.__proto__ || Object.getPrototypeOf(AltDateWidget)).call(this, props));\n\n    _this.onChange = function (property, value) {\n      _this.setState(_defineProperty({}, property, typeof value === \"undefined\" ? -1 : value), function () {\n        // Only propagate to parent state if we have a complete date{time}\n        if (readyForChange(_this.state)) {\n          _this.props.onChange((0, _utils.toDateString)(_this.state, _this.props.time));\n        }\n      });\n    };\n\n    _this.setNow = function (event) {\n      event.preventDefault();\n      var _this$props = _this.props,\n          time = _this$props.time,\n          disabled = _this$props.disabled,\n          readonly = _this$props.readonly,\n          onChange = _this$props.onChange;\n\n      if (disabled || readonly) {\n        return;\n      }\n      var nowDateObj = (0, _utils.parseDateString)(new Date().toJSON(), time);\n      _this.setState(nowDateObj, function () {\n        return onChange((0, _utils.toDateString)(_this.state, time));\n      });\n    };\n\n    _this.clear = function (event) {\n      event.preventDefault();\n      var _this$props2 = _this.props,\n          time = _this$props2.time,\n          disabled = _this$props2.disabled,\n          readonly = _this$props2.readonly,\n          onChange = _this$props2.onChange;\n\n      if (disabled || readonly) {\n        return;\n      }\n      _this.setState((0, _utils.parseDateString)(\"\", time), function () {\n        return onChange(undefined);\n      });\n    };\n\n    _this.state = (0, _utils.parseDateString)(props.value, props.time);\n    return _this;\n  }\n\n  _createClass(AltDateWidget, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.setState((0, _utils.parseDateString)(nextProps.value, nextProps.time));\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return (0, _utils.shouldRender)(this, nextProps, nextState);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          id = _props.id,\n          disabled = _props.disabled,\n          readonly = _props.readonly,\n          autofocus = _props.autofocus,\n          registry = _props.registry,\n          onBlur = _props.onBlur;\n\n      return _react2.default.createElement(\n        \"ul\",\n        { className: \"list-inline\" },\n        this.dateElementProps.map(function (elemProps, i) {\n          return _react2.default.createElement(\n            \"li\",\n            { key: i },\n            _react2.default.createElement(DateElement, _extends({\n              rootId: id,\n              select: _this2.onChange\n            }, elemProps, {\n              disabled: disabled,\n              readonly: readonly,\n              registry: registry,\n              onBlur: onBlur,\n              autofocus: autofocus && i === 0\n            }))\n          );\n        }),\n        _react2.default.createElement(\n          \"li\",\n          null,\n          _react2.default.createElement(\n            \"a\",\n            { href: \"#\", className: \"btn btn-info btn-now\", onClick: this.setNow },\n            \"Now\"\n          )\n        ),\n        _react2.default.createElement(\n          \"li\",\n          null,\n          _react2.default.createElement(\n            \"a\",\n            {\n              href: \"#\",\n              className: \"btn btn-warning btn-clear\",\n              onClick: this.clear },\n            \"Clear\"\n          )\n        )\n      );\n    }\n  }, {\n    key: \"dateElementProps\",\n    get: function get() {\n      var time = this.props.time;\n      var _state = this.state,\n          year = _state.year,\n          month = _state.month,\n          day = _state.day,\n          hour = _state.hour,\n          minute = _state.minute,\n          second = _state.second;\n\n      var data = [{ type: \"year\", range: [1900, 2020], value: year }, { type: \"month\", range: [1, 12], value: month }, { type: \"day\", range: [1, 31], value: day }];\n      if (time) {\n        data.push({ type: \"hour\", range: [0, 23], value: hour }, { type: \"minute\", range: [0, 59], value: minute }, { type: \"second\", range: [0, 59], value: second });\n      }\n      return data;\n    }\n  }]);\n\n  return AltDateWidget;\n}(_react.Component);\n\nAltDateWidget.defaultProps = {\n  time: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n};\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  AltDateWidget.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    id: _propTypes2.default.string.isRequired,\n    value: _propTypes2.default.string,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func,\n    onBlur: _propTypes2.default.func,\n    time: _propTypes2.default.bool\n  };\n}\n\nexports.default = AltDateWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction AltDateTimeWidget(props) {\n  var AltDateWidget = props.registry.widgets.AltDateWidget;\n\n  return _react2.default.createElement(AltDateWidget, _extends({ time: true }, props));\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  AltDateTimeWidget.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    id: _propTypes2.default.string.isRequired,\n    value: _propTypes2.default.string,\n    required: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func\n  };\n}\n\nexports.default = AltDateTimeWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _DescriptionField = require(\"../fields/DescriptionField.js\");\n\nvar _DescriptionField2 = _interopRequireDefault(_DescriptionField);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction CheckboxWidget(props) {\n  var schema = props.schema,\n      id = props.id,\n      value = props.value,\n      required = props.required,\n      disabled = props.disabled,\n      readonly = props.readonly,\n      label = props.label,\n      autofocus = props.autofocus,\n      _onChange = props.onChange;\n\n  return _react2.default.createElement(\n    \"div\",\n    { className: \"checkbox \" + (disabled || readonly ? \"disabled\" : \"\") },\n    schema.description && _react2.default.createElement(_DescriptionField2.default, { description: schema.description }),\n    _react2.default.createElement(\n      \"label\",\n      null,\n      _react2.default.createElement(\"input\", {\n        type: \"checkbox\",\n        id: id,\n        checked: typeof value === \"undefined\" ? false : value,\n        required: required,\n        disabled: disabled || readonly,\n        autoFocus: autofocus,\n        onChange: function onChange(event) {\n          return _onChange(event.target.checked);\n        }\n      }),\n      _react2.default.createElement(\n        \"span\",\n        null,\n        label\n      )\n    )\n  );\n}\n\nCheckboxWidget.defaultProps = {\n  autofocus: false\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  CheckboxWidget.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    id: _propTypes2.default.string.isRequired,\n    value: _propTypes2.default.bool,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func\n  };\n}\n\nexports.default = CheckboxWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction selectValue(value, selected, all) {\n  var at = all.indexOf(value);\n  var updated = selected.slice(0, at).concat(value, selected.slice(at));\n  // As inserting values at predefined index positions doesn't work with empty\n  // arrays, we need to reorder the updated selection to match the initial order\n  return updated.sort(function (a, b) {\n    return all.indexOf(a) > all.indexOf(b);\n  });\n}\n\nfunction deselectValue(value, selected) {\n  return selected.filter(function (v) {\n    return v !== value;\n  });\n}\n\nfunction CheckboxesWidget(props) {\n  var id = props.id,\n      disabled = props.disabled,\n      options = props.options,\n      value = props.value,\n      autofocus = props.autofocus,\n      readonly = props.readonly,\n      _onChange = props.onChange;\n  var enumOptions = options.enumOptions,\n      inline = options.inline;\n\n  return _react2.default.createElement(\n    \"div\",\n    { className: \"checkboxes\", id: id },\n    enumOptions.map(function (option, index) {\n      var checked = value.indexOf(option.value) !== -1;\n      var disabledCls = disabled || readonly ? \"disabled\" : \"\";\n      var checkbox = _react2.default.createElement(\n        \"span\",\n        null,\n        _react2.default.createElement(\"input\", {\n          type: \"checkbox\",\n          id: id + \"_\" + index,\n          checked: checked,\n          disabled: disabled || readonly,\n          autoFocus: autofocus && index === 0,\n          onChange: function onChange(event) {\n            var all = enumOptions.map(function (_ref) {\n              var value = _ref.value;\n              return value;\n            });\n            if (event.target.checked) {\n              _onChange(selectValue(option.value, value, all));\n            } else {\n              _onChange(deselectValue(option.value, value));\n            }\n          }\n        }),\n        _react2.default.createElement(\n          \"span\",\n          null,\n          option.label\n        )\n      );\n      return inline ? _react2.default.createElement(\n        \"label\",\n        { key: index, className: \"checkbox-inline \" + disabledCls },\n        checkbox\n      ) : _react2.default.createElement(\n        \"div\",\n        { key: index, className: \"checkbox \" + disabledCls },\n        _react2.default.createElement(\n          \"label\",\n          null,\n          checkbox\n        )\n      );\n    })\n  );\n}\n\nCheckboxesWidget.defaultProps = {\n  autofocus: false,\n  options: {\n    inline: false\n  }\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  CheckboxesWidget.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    id: _propTypes2.default.string.isRequired,\n    options: _propTypes2.default.shape({\n      enumOptions: _propTypes2.default.array,\n      inline: _propTypes2.default.bool\n    }).isRequired,\n    value: _propTypes2.default.any,\n    required: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    multiple: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func\n  };\n}\n\nexports.default = CheckboxesWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _BaseInput = require(\"./BaseInput\");\n\nvar _BaseInput2 = _interopRequireDefault(_BaseInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ColorWidget(props) {\n  var disabled = props.disabled,\n      readonly = props.readonly;\n\n  return _react2.default.createElement(_BaseInput2.default, _extends({ type: \"color\" }, props, { disabled: disabled || readonly }));\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  ColorWidget.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    id: _propTypes2.default.string.isRequired,\n    value: _propTypes2.default.string,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func\n  };\n}\n\nexports.default = ColorWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction BaseInput(props) {\n  // Note: since React 15.2.0 we can't forward unknown element attributes, so we\n  // exclude the \"options\" and \"schema\" ones here.\n  var value = props.value,\n      readonly = props.readonly,\n      disabled = props.disabled,\n      autofocus = props.autofocus,\n      onBlur = props.onBlur,\n      options = props.options,\n      schema = props.schema,\n      formContext = props.formContext,\n      registry = props.registry,\n      inputProps = _objectWithoutProperties(props, [\"value\", \"readonly\", \"disabled\", \"autofocus\", \"onBlur\", \"options\", \"schema\", \"formContext\", \"registry\"]);\n\n  inputProps.type = options.inputType || inputProps.type || \"text\";\n  var _onChange = function _onChange(_ref) {\n    var value = _ref.target.value;\n\n    return props.onChange(value === \"\" ? options.emptyValue : value);\n  };\n  return _react2.default.createElement(\"input\", _extends({\n    className: \"form-control\",\n    readOnly: readonly,\n    disabled: disabled,\n    autoFocus: autofocus,\n    value: value == null ? \"\" : value\n  }, inputProps, {\n    onChange: _onChange,\n    onBlur: onBlur && function (event) {\n      return onBlur(inputProps.id, event.target.value);\n    }\n  }));\n}\n\nBaseInput.defaultProps = {\n  type: \"text\",\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  BaseInput.propTypes = {\n    id: _propTypes2.default.string.isRequired,\n    placeholder: _propTypes2.default.string,\n    value: _propTypes2.default.any,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func,\n    onBlur: _propTypes2.default.func\n  };\n}\n\nexports.default = BaseInput;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _BaseInput = require(\"./BaseInput\");\n\nvar _BaseInput2 = _interopRequireDefault(_BaseInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction DateWidget(props) {\n  var _onChange = props.onChange;\n\n  return _react2.default.createElement(_BaseInput2.default, _extends({\n    type: \"date\"\n  }, props, {\n    onChange: function onChange(value) {\n      return _onChange(value || undefined);\n    }\n  }));\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  DateWidget.propTypes = {\n    value: _propTypes2.default.string\n  };\n}\n\nexports.default = DateWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _BaseInput = require(\"./BaseInput\");\n\nvar _BaseInput2 = _interopRequireDefault(_BaseInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction fromJSONDate(jsonDate) {\n  return jsonDate ? jsonDate.slice(0, 19) : \"\";\n}\n\nfunction toJSONDate(dateString) {\n  if (dateString) {\n    return new Date(dateString).toJSON();\n  }\n}\n\nfunction DateTimeWidget(props) {\n  var value = props.value,\n      _onChange = props.onChange;\n\n  return _react2.default.createElement(_BaseInput2.default, _extends({\n    type: \"datetime-local\"\n  }, props, {\n    value: fromJSONDate(value),\n    onChange: function onChange(value) {\n      return _onChange(toJSONDate(value));\n    }\n  }));\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  DateTimeWidget.propTypes = {\n    value: _propTypes2.default.string\n  };\n}\n\nexports.default = DateTimeWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _BaseInput = require(\"./BaseInput\");\n\nvar _BaseInput2 = _interopRequireDefault(_BaseInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction EmailWidget(props) {\n  return _react2.default.createElement(_BaseInput2.default, _extends({ type: \"email\" }, props));\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  EmailWidget.propTypes = {\n    value: _propTypes2.default.string\n  };\n}\n\nexports.default = EmailWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction addNameToDataURL(dataURL, name) {\n  return dataURL.replace(\";base64\", \";name=\" + name + \";base64\");\n}\n\nfunction processFile(file) {\n  var name = file.name,\n      size = file.size,\n      type = file.type;\n\n  return new Promise(function (resolve, reject) {\n    var reader = new window.FileReader();\n    reader.onload = function (event) {\n      resolve({\n        dataURL: addNameToDataURL(event.target.result, name),\n        name: name,\n        size: size,\n        type: type\n      });\n    };\n    reader.readAsDataURL(file);\n  });\n}\n\nfunction processFiles(files) {\n  return Promise.all([].map.call(files, processFile));\n}\n\nfunction FilesInfo(props) {\n  var filesInfo = props.filesInfo;\n\n  if (filesInfo.length === 0) {\n    return null;\n  }\n  return _react2.default.createElement(\n    \"ul\",\n    { className: \"file-info\" },\n    filesInfo.map(function (fileInfo, key) {\n      var name = fileInfo.name,\n          size = fileInfo.size,\n          type = fileInfo.type;\n\n      return _react2.default.createElement(\n        \"li\",\n        { key: key },\n        _react2.default.createElement(\n          \"strong\",\n          null,\n          name\n        ),\n        \" (\",\n        type,\n        \", \",\n        size,\n        \" bytes)\"\n      );\n    })\n  );\n}\n\nfunction extractFileInfo(dataURLs) {\n  return dataURLs.filter(function (dataURL) {\n    return typeof dataURL !== \"undefined\";\n  }).map(function (dataURL) {\n    var _dataURItoBlob = (0, _utils.dataURItoBlob)(dataURL),\n        blob = _dataURItoBlob.blob,\n        name = _dataURItoBlob.name;\n\n    return {\n      name: name,\n      size: blob.size,\n      type: blob.type\n    };\n  });\n}\n\nvar FileWidget = function (_Component) {\n  _inherits(FileWidget, _Component);\n\n  function FileWidget(props) {\n    _classCallCheck(this, FileWidget);\n\n    var _this = _possibleConstructorReturn(this, (FileWidget.__proto__ || Object.getPrototypeOf(FileWidget)).call(this, props));\n\n    _this.defaultProps = {\n      multiple: false\n    };\n\n    _this.onChange = function (event) {\n      var _this$props = _this.props,\n          multiple = _this$props.multiple,\n          onChange = _this$props.onChange;\n\n      processFiles(event.target.files).then(function (filesInfo) {\n        var state = {\n          values: filesInfo.map(function (fileInfo) {\n            return fileInfo.dataURL;\n          }),\n          filesInfo: filesInfo\n        };\n        (0, _utils.setState)(_this, state, function () {\n          if (multiple) {\n            onChange(state.values);\n          } else {\n            onChange(state.values[0]);\n          }\n        });\n      });\n    };\n\n    var value = props.value;\n\n    var values = Array.isArray(value) ? value : [value];\n    _this.state = { values: values, filesInfo: extractFileInfo(values) };\n    return _this;\n  }\n\n  _createClass(FileWidget, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return (0, _utils.shouldRender)(this, nextProps, nextState);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          multiple = _props.multiple,\n          id = _props.id,\n          readonly = _props.readonly,\n          disabled = _props.disabled,\n          autofocus = _props.autofocus;\n      var filesInfo = this.state.filesInfo;\n\n      return _react2.default.createElement(\n        \"div\",\n        null,\n        _react2.default.createElement(\n          \"p\",\n          null,\n          _react2.default.createElement(\"input\", {\n            ref: function ref(_ref) {\n              return _this2.inputRef = _ref;\n            },\n            id: id,\n            type: \"file\",\n            disabled: readonly || disabled,\n            onChange: this.onChange,\n            defaultValue: \"\",\n            autoFocus: autofocus,\n            multiple: multiple\n          })\n        ),\n        _react2.default.createElement(FilesInfo, { filesInfo: filesInfo })\n      );\n    }\n  }]);\n\n  return FileWidget;\n}(_react.Component);\n\nFileWidget.defaultProps = {\n  autofocus: false\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  FileWidget.propTypes = {\n    multiple: _propTypes2.default.bool,\n    value: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.arrayOf(_propTypes2.default.string)]),\n    autofocus: _propTypes2.default.bool\n  };\n}\n\nexports.default = FileWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction HiddenWidget(_ref) {\n  var id = _ref.id,\n      value = _ref.value;\n\n  return _react2.default.createElement(\"input\", {\n    type: \"hidden\",\n    id: id,\n    value: typeof value === \"undefined\" ? \"\" : value\n  });\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  HiddenWidget.propTypes = {\n    id: _propTypes2.default.string.isRequired,\n    value: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.bool])\n  };\n}\n\nexports.default = HiddenWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _BaseInput = require(\"./BaseInput\");\n\nvar _BaseInput2 = _interopRequireDefault(_BaseInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction PasswordWidget(props) {\n  return _react2.default.createElement(_BaseInput2.default, _extends({ type: \"password\" }, props));\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  PasswordWidget.propTypes = {\n    value: _propTypes2.default.string\n  };\n}\n\nexports.default = PasswordWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction RadioWidget(props) {\n  var options = props.options,\n      value = props.value,\n      required = props.required,\n      disabled = props.disabled,\n      readonly = props.readonly,\n      autofocus = props.autofocus,\n      _onChange = props.onChange;\n  // Generating a unique field name to identify this set of radio buttons\n\n  var name = Math.random().toString();\n  var enumOptions = options.enumOptions,\n      inline = options.inline;\n  // checked={checked} has been moved above name={name}, As mentioned in #349;\n  // this is a temporary fix for radio button rendering bug in React, facebook/react#7630.\n\n  return _react2.default.createElement(\n    \"div\",\n    { className: \"field-radio-group\" },\n    enumOptions.map(function (option, i) {\n      var checked = option.value === value;\n      var disabledCls = disabled || readonly ? \"disabled\" : \"\";\n      var radio = _react2.default.createElement(\n        \"span\",\n        null,\n        _react2.default.createElement(\"input\", {\n          type: \"radio\",\n          checked: checked,\n          name: name,\n          required: required,\n          value: option.value,\n          disabled: disabled || readonly,\n          autoFocus: autofocus && i === 0,\n          onChange: function onChange(_) {\n            return _onChange(option.value);\n          }\n        }),\n        _react2.default.createElement(\n          \"span\",\n          null,\n          option.label\n        )\n      );\n\n      return inline ? _react2.default.createElement(\n        \"label\",\n        { key: i, className: \"radio-inline \" + disabledCls },\n        radio\n      ) : _react2.default.createElement(\n        \"div\",\n        { key: i, className: \"radio \" + disabledCls },\n        _react2.default.createElement(\n          \"label\",\n          null,\n          radio\n        )\n      );\n    })\n  );\n}\n\nRadioWidget.defaultProps = {\n  autofocus: false\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  RadioWidget.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    id: _propTypes2.default.string.isRequired,\n    options: _propTypes2.default.shape({\n      enumOptions: _propTypes2.default.array,\n      inline: _propTypes2.default.bool\n    }).isRequired,\n    value: _propTypes2.default.any,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func\n  };\n}\nexports.default = RadioWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nvar _BaseInput = require(\"./BaseInput\");\n\nvar _BaseInput2 = _interopRequireDefault(_BaseInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction RangeWidget(props) {\n  var schema = props.schema,\n      value = props.value;\n\n  return _react2.default.createElement(\n    \"div\",\n    { className: \"field-range-wrapper\" },\n    _react2.default.createElement(_BaseInput2.default, _extends({ type: \"range\" }, props, (0, _utils.rangeSpec)(schema))),\n    _react2.default.createElement(\n      \"span\",\n      { className: \"range-view\" },\n      value\n    )\n  );\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  RangeWidget.propTypes = {\n    value: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number])\n  };\n}\n\nexports.default = RangeWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * This is a silly limitation in the DOM where option change event values are\n * always retrieved as strings.\n */\nfunction processValue(_ref, value) {\n  var type = _ref.type,\n      items = _ref.items;\n\n  if (value === \"\") {\n    return undefined;\n  } else if (type === \"array\" && items && [\"number\", \"integer\"].includes(items.type)) {\n    return value.map(_utils.asNumber);\n  } else if (type === \"boolean\") {\n    return value === \"true\";\n  } else if (type === \"number\") {\n    return (0, _utils.asNumber)(value);\n  }\n  return value;\n}\n\nfunction getValue(event, multiple) {\n  if (multiple) {\n    return [].slice.call(event.target.options).filter(function (o) {\n      return o.selected;\n    }).map(function (o) {\n      return o.value;\n    });\n  } else {\n    return event.target.value;\n  }\n}\n\nfunction SelectWidget(props) {\n  var schema = props.schema,\n      id = props.id,\n      options = props.options,\n      value = props.value,\n      required = props.required,\n      disabled = props.disabled,\n      readonly = props.readonly,\n      multiple = props.multiple,\n      autofocus = props.autofocus,\n      _onChange = props.onChange,\n      onBlur = props.onBlur,\n      placeholder = props.placeholder;\n  var enumOptions = options.enumOptions;\n\n  var emptyValue = multiple ? [] : \"\";\n  return _react2.default.createElement(\n    \"select\",\n    {\n      id: id,\n      multiple: multiple,\n      className: \"form-control\",\n      value: typeof value === \"undefined\" ? emptyValue : value,\n      required: required,\n      disabled: disabled || readonly,\n      autoFocus: autofocus,\n      onBlur: onBlur && function (event) {\n        var newValue = getValue(event, multiple);\n        onBlur(id, processValue(schema, newValue));\n      },\n      onChange: function onChange(event) {\n        var newValue = getValue(event, multiple);\n        _onChange(processValue(schema, newValue));\n      } },\n    !multiple && !schema.default && _react2.default.createElement(\n      \"option\",\n      { value: \"\" },\n      placeholder\n    ),\n    enumOptions.map(function (_ref2, i) {\n      var value = _ref2.value,\n          label = _ref2.label;\n\n      return _react2.default.createElement(\n        \"option\",\n        { key: i, value: value },\n        label\n      );\n    })\n  );\n}\n\nSelectWidget.defaultProps = {\n  autofocus: false\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  SelectWidget.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    id: _propTypes2.default.string.isRequired,\n    options: _propTypes2.default.shape({\n      enumOptions: _propTypes2.default.array\n    }).isRequired,\n    value: _propTypes2.default.any,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    multiple: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func,\n    onBlur: _propTypes2.default.func\n  };\n}\n\nexports.default = SelectWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction TextareaWidget(props) {\n  var id = props.id,\n      options = props.options,\n      placeholder = props.placeholder,\n      value = props.value,\n      required = props.required,\n      disabled = props.disabled,\n      readonly = props.readonly,\n      autofocus = props.autofocus,\n      onChange = props.onChange,\n      onBlur = props.onBlur;\n\n  var _onChange = function _onChange(_ref) {\n    var value = _ref.target.value;\n\n    return onChange(value === \"\" ? options.emptyValue : value);\n  };\n  return _react2.default.createElement(\"textarea\", {\n    id: id,\n    className: \"form-control\",\n    value: typeof value === \"undefined\" ? \"\" : value,\n    placeholder: placeholder,\n    required: required,\n    disabled: disabled,\n    readOnly: readonly,\n    autoFocus: autofocus,\n    rows: options.rows,\n    onBlur: onBlur && function (event) {\n      return onBlur(id, event.target.value);\n    },\n    onChange: _onChange\n  });\n}\n\nTextareaWidget.defaultProps = {\n  autofocus: false,\n  options: {}\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  TextareaWidget.propTypes = {\n    schema: _propTypes2.default.object.isRequired,\n    id: _propTypes2.default.string.isRequired,\n    placeholder: _propTypes2.default.string,\n    options: _propTypes2.default.shape({\n      rows: _propTypes2.default.number\n    }),\n    value: _propTypes2.default.string,\n    required: _propTypes2.default.bool,\n    disabled: _propTypes2.default.bool,\n    readonly: _propTypes2.default.bool,\n    autofocus: _propTypes2.default.bool,\n    onChange: _propTypes2.default.func,\n    onBlur: _propTypes2.default.func\n  };\n}\n\nexports.default = TextareaWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _BaseInput = require(\"./BaseInput\");\n\nvar _BaseInput2 = _interopRequireDefault(_BaseInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction TextWidget(props) {\n  return _react2.default.createElement(_BaseInput2.default, props);\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  TextWidget.propTypes = {\n    value: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number])\n  };\n}\n\nexports.default = TextWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _BaseInput = require(\"./BaseInput\");\n\nvar _BaseInput2 = _interopRequireDefault(_BaseInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction URLWidget(props) {\n  return _react2.default.createElement(_BaseInput2.default, _extends({ type: \"url\" }, props));\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  URLWidget.propTypes = {\n    value: _propTypes2.default.string\n  };\n}\n\nexports.default = URLWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require(\"../../utils\");\n\nvar _BaseInput = require(\"./BaseInput\");\n\nvar _BaseInput2 = _interopRequireDefault(_BaseInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction UpDownWidget(props) {\n  return _react2.default.createElement(_BaseInput2.default, _extends({ type: \"number\" }, props, (0, _utils.rangeSpec)(props.schema)));\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  UpDownWidget.propTypes = {\n    value: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n  };\n}\n\nexports.default = UpDownWidget;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.toErrorList = toErrorList;\nexports.default = validateFormData;\n\nvar _lodash = require(\"lodash.topath\");\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _jsonschema = require(\"jsonschema\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction toErrorSchema(errors) {\n  // Transforms a jsonschema validation errors list:\n  // [\n  //   {property: \"instance.level1.level2[2].level3\", message: \"err a\"},\n  //   {property: \"instance.level1.level2[2].level3\", message: \"err b\"},\n  //   {property: \"instance.level1.level2[4].level3\", message: \"err b\"},\n  // ]\n  // Into an error tree:\n  // {\n  //   level1: {\n  //     level2: {\n  //       2: {level3: {errors: [\"err a\", \"err b\"]}},\n  //       4: {level3: {errors: [\"err b\"]}},\n  //     }\n  //   }\n  // };\n  if (!errors.length) {\n    return {};\n  }\n  return errors.reduce(function (errorSchema, error) {\n    var property = error.property,\n        message = error.message;\n\n    var path = (0, _lodash2.default)(property);\n    var parent = errorSchema;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = path.slice(1)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var segment = _step.value;\n\n        if (!(segment in parent)) {\n          parent[segment] = {};\n        }\n        parent = parent[segment];\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    if (Array.isArray(parent.__errors)) {\n      // We store the list of errors for this node in a property named __errors\n      // to avoid name collision with a possible sub schema field named\n      // \"errors\" (see `validate.createErrorHandler`).\n      parent.__errors = parent.__errors.concat(message);\n    } else {\n      parent.__errors = [message];\n    }\n    return errorSchema;\n  }, {});\n}\n\nfunction toErrorList(errorSchema) {\n  var fieldName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"root\";\n\n  // XXX: We should transform fieldName as a full field path string.\n  var errorList = [];\n  if (\"__errors\" in errorSchema) {\n    errorList = errorList.concat(errorSchema.__errors.map(function (stack) {\n      return {\n        stack: fieldName + \": \" + stack\n      };\n    }));\n  }\n  return Object.keys(errorSchema).reduce(function (acc, key) {\n    if (key !== \"__errors\") {\n      acc = acc.concat(toErrorList(errorSchema[key], key));\n    }\n    return acc;\n  }, errorList);\n}\n\nfunction createErrorHandler(formData) {\n  var handler = {\n    // We store the list of errors for this node in a property named __errors\n    // to avoid name collision with a possible sub schema field named\n    // \"errors\" (see `utils.toErrorSchema`).\n    __errors: [],\n    addError: function addError(message) {\n      this.__errors.push(message);\n    }\n  };\n  if ((0, _utils.isObject)(formData)) {\n    return Object.keys(formData).reduce(function (acc, key) {\n      return _extends({}, acc, _defineProperty({}, key, createErrorHandler(formData[key])));\n    }, handler);\n  }\n  if (Array.isArray(formData)) {\n    return formData.reduce(function (acc, value, key) {\n      return _extends({}, acc, _defineProperty({}, key, createErrorHandler(value)));\n    }, handler);\n  }\n  return handler;\n}\n\nfunction unwrapErrorHandler(errorHandler) {\n  return Object.keys(errorHandler).reduce(function (acc, key) {\n    if (key === \"addError\") {\n      return acc;\n    } else if (key === \"__errors\") {\n      return _extends({}, acc, _defineProperty({}, key, errorHandler[key]));\n    }\n    return _extends({}, acc, _defineProperty({}, key, unwrapErrorHandler(errorHandler[key])));\n  }, {});\n}\n\n/**\n * This function processes the formData with a user `validate` contributed\n * function, which receives the form data and an `errorHandler` object that\n * will be used to add custom validation errors for each field.\n */\nfunction validateFormData(formData, schema, customValidate, transformErrors) {\n  var _jsonValidate = (0, _jsonschema.validate)(formData, schema),\n      errors = _jsonValidate.errors;\n\n  if (typeof transformErrors === \"function\") {\n    errors = transformErrors(errors);\n  }\n  var errorSchema = toErrorSchema(errors);\n\n  if (typeof customValidate !== \"function\") {\n    return { errors: errors, errorSchema: errorSchema };\n  }\n\n  var errorHandler = customValidate(formData, createErrorHandler(formData));\n  var userErrorSchema = unwrapErrorHandler(errorHandler);\n  var newErrorSchema = (0, _utils.mergeObjects)(errorSchema, userErrorSchema, true);\n  // XXX: The errors list produced is not fully compliant with the format\n  // exposed by the jsonschema lib, which contains full field paths and other\n  // properties.\n  var newErrors = toErrorList(newErrorSchema);\n\n  return { errors: newErrors, errorSchema: newErrorSchema };\n}","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Converts `value` to a property path array.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {*} value The value to convert.\n * @returns {Array} Returns the new property path array.\n * @example\n *\n * _.toPath('a.b.c');\n * // => ['a', 'b', 'c']\n *\n * _.toPath('a[0].b.c');\n * // => ['a', '0', 'b', 'c']\n */\nfunction toPath(value) {\n  if (isArray(value)) {\n    return arrayMap(value, toKey);\n  }\n  return isSymbol(value) ? [value] : copyArray(stringToPath(value));\n}\n\nmodule.exports = toPath;\n","'use strict';\n\nvar Validator = module.exports.Validator = require('./validator');\n\nmodule.exports.ValidatorResult = require('./helpers').ValidatorResult;\nmodule.exports.ValidationError = require('./helpers').ValidationError;\nmodule.exports.SchemaError = require('./helpers').SchemaError;\n\nmodule.exports.validate = function (instance, schema, options) {\n  var v = new Validator();\n  return v.validate(instance, schema, options);\n};\n","'use strict';\n\nvar urilib = require('url');\n\nvar attribute = require('./attribute');\nvar helpers = require('./helpers');\nvar ValidatorResult = helpers.ValidatorResult;\nvar SchemaError = helpers.SchemaError;\nvar SchemaContext = helpers.SchemaContext;\n\n/**\n * Creates a new Validator object\n * @name Validator\n * @constructor\n */\nvar Validator = function Validator () {\n  // Allow a validator instance to override global custom formats or to have their\n  // own custom formats.\n  this.customFormats = Object.create(Validator.prototype.customFormats);\n  this.schemas = {};\n  this.unresolvedRefs = [];\n\n  // Use Object.create to make this extensible without Validator instances stepping on each other's toes.\n  this.types = Object.create(types);\n  this.attributes = Object.create(attribute.validators);\n};\n\n// Allow formats to be registered globally.\nValidator.prototype.customFormats = {};\n\n// Hint at the presence of a property\nValidator.prototype.schemas = null;\nValidator.prototype.types = null;\nValidator.prototype.attributes = null;\nValidator.prototype.unresolvedRefs = null;\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param schema\n * @param urn\n * @return {Object}\n */\nValidator.prototype.addSchema = function addSchema (schema, uri) {\n  if (!schema) {\n    return null;\n  }\n  var ourUri = uri || schema.id;\n  this.addSubSchema(ourUri, schema);\n  if (ourUri) {\n    this.schemas[ourUri] = schema;\n  }\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchema = function addSubSchema(baseuri, schema) {\n  if(!schema || typeof schema!='object') return;\n  // Mark all referenced schemas so we can tell later which schemas are referred to, but never defined\n  if(schema.$ref){\n    var resolvedUri = urilib.resolve(baseuri, schema.$ref);\n    // Only mark unknown schemas as unresolved\n    if (this.schemas[resolvedUri] === undefined) {\n      this.schemas[resolvedUri] = null;\n      this.unresolvedRefs.push(resolvedUri);\n    }\n    return;\n  }\n  var ourUri = schema.id && urilib.resolve(baseuri, schema.id);\n  var ourBase = ourUri || baseuri;\n  if (ourUri) {\n    if(this.schemas[ourUri]){\n      if(!helpers.deepCompareStrict(this.schemas[ourUri], schema)){\n        throw new Error('Schema <'+schema+'> already exists with different definition');\n      }\n      return this.schemas[ourUri];\n    }\n    this.schemas[ourUri] = schema;\n    var documentUri = ourUri.replace(/^([^#]*)#$/, '$1');\n    this.schemas[documentUri] = schema;\n  }\n  this.addSubSchemaArray(ourBase, ((schema.items instanceof Array)?schema.items:[schema.items]));\n  this.addSubSchemaArray(ourBase, ((schema.extends instanceof Array)?schema.extends:[schema.extends]));\n  this.addSubSchema(ourBase, schema.additionalItems);\n  this.addSubSchemaObject(ourBase, schema.properties);\n  this.addSubSchema(ourBase, schema.additionalProperties);\n  this.addSubSchemaObject(ourBase, schema.definitions);\n  this.addSubSchemaObject(ourBase, schema.patternProperties);\n  this.addSubSchemaObject(ourBase, schema.dependencies);\n  this.addSubSchemaArray(ourBase, schema.disallow);\n  this.addSubSchemaArray(ourBase, schema.allOf);\n  this.addSubSchemaArray(ourBase, schema.anyOf);\n  this.addSubSchemaArray(ourBase, schema.oneOf);\n  this.addSubSchema(ourBase, schema.not);\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchemaArray = function addSubSchemaArray(baseuri, schemas) {\n  if(!(schemas instanceof Array)) return;\n  for(var i=0; i<schemas.length; i++){\n    this.addSubSchema(baseuri, schemas[i]);\n  }\n};\n\nValidator.prototype.addSubSchemaObject = function addSubSchemaArray(baseuri, schemas) {\n  if(!schemas || typeof schemas!='object') return;\n  for(var p in schemas){\n    this.addSubSchema(baseuri, schemas[p]);\n  }\n};\n\n\n\n/**\n * Sets all the schemas of the Validator instance.\n * @param schemas\n */\nValidator.prototype.setSchemas = function setSchemas (schemas) {\n  this.schemas = schemas;\n};\n\n/**\n * Returns the schema of a certain urn\n * @param urn\n */\nValidator.prototype.getSchema = function getSchema (urn) {\n  return this.schemas[urn];\n};\n\n/**\n * Validates instance against the provided schema\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {Array}\n */\nValidator.prototype.validate = function validate (instance, schema, options, ctx) {\n  if (!options) {\n    options = {};\n  }\n  var propertyName = options.propertyName || 'instance';\n  // This will work so long as the function at uri.resolve() will resolve a relative URI to a relative URI\n  var base = urilib.resolve(options.base||'/', schema.id||'');\n  if(!ctx){\n    ctx = new SchemaContext(schema, options, propertyName, base, Object.create(this.schemas));\n    if (!ctx.schemas[base]) {\n      ctx.schemas[base] = schema;\n    }\n  }\n  if (schema) {\n    var result = this.validateSchema(instance, schema, options, ctx);\n    if (!result) {\n      throw new Error('Result undefined');\n    }\n    return result;\n  }\n  throw new SchemaError('no schema specified', schema);\n};\n\n/**\n* @param Object schema\n* @return mixed schema uri or false\n*/\nfunction shouldResolve(schema) {\n  var ref = (typeof schema === 'string') ? schema : schema.$ref;\n  if (typeof ref=='string') return ref;\n  return false;\n}\n\n/**\n * Validates an instance against the schema (the actual work horse)\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @private\n * @return {ValidatorResult}\n */\nValidator.prototype.validateSchema = function validateSchema (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema) {\n    throw new Error(\"schema is undefined\");\n  }\n\n  if (schema['extends']) {\n    if (schema['extends'] instanceof Array) {\n      var schemaobj = {schema: schema, ctx: ctx};\n      schema['extends'].forEach(this.schemaTraverser.bind(this, schemaobj));\n      schema = schemaobj.schema;\n      schemaobj.schema = null;\n      schemaobj.ctx = null;\n      schemaobj = null;\n    } else {\n      schema = helpers.deepMerge(schema, this.superResolve(schema['extends'], ctx));\n    }\n  }\n\n  var switchSchema;\n  if (switchSchema = shouldResolve(schema)) {\n    var resolved = this.resolve(schema, switchSchema, ctx);\n    var subctx = new SchemaContext(resolved.subschema, options, ctx.propertyPath, resolved.switchSchema, ctx.schemas);\n    return this.validateSchema(instance, resolved.subschema, options, subctx);\n  }\n\n  var skipAttributes = options && options.skipAttributes || [];\n  // Validate each schema attribute against the instance\n  for (var key in schema) {\n    if (!attribute.ignoreProperties[key] && skipAttributes.indexOf(key) < 0) {\n      var validatorErr = null;\n      var validator = this.attributes[key];\n      if (validator) {\n        validatorErr = validator.call(this, instance, schema, options, ctx);\n      } else if (options.allowUnknownAttributes === false) {\n        // This represents an error with the schema itself, not an invalid instance\n        throw new SchemaError(\"Unsupported attribute: \" + key, schema);\n      }\n      if (validatorErr) {\n        result.importErrors(validatorErr);\n      }\n    }\n  }\n\n  if (typeof options.rewrite == 'function') {\n    var value = options.rewrite.call(this, instance, schema, options, ctx);\n    result.instance = value;\n  }\n  return result;\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.schemaTraverser = function schemaTraverser (schemaobj, s) {\n  schemaobj.schema = helpers.deepMerge(schemaobj.schema, this.superResolve(s, schemaobj.ctx));\n}\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.superResolve = function superResolve (schema, ctx) {\n  var ref;\n  if(ref = shouldResolve(schema)) {\n    return this.resolve(schema, ref, ctx).subschema;\n  }\n  return schema;\n}\n\n/**\n* @private\n* @param Object schema\n* @param Object switchSchema\n* @param SchemaContext ctx\n* @return Object resolved schemas {subschema:String, switchSchema: String}\n* @throws SchemaError\n*/\nValidator.prototype.resolve = function resolve (schema, switchSchema, ctx) {\n  switchSchema = ctx.resolve(switchSchema);\n  // First see if the schema exists under the provided URI\n  if (ctx.schemas[switchSchema]) {\n    return {subschema: ctx.schemas[switchSchema], switchSchema: switchSchema};\n  }\n  // Else try walking the property pointer\n  var parsed = urilib.parse(switchSchema);\n  var fragment = parsed && parsed.hash;\n  var document = fragment && fragment.length && switchSchema.substr(0, switchSchema.length - fragment.length);\n  if (!document || !ctx.schemas[document]) {\n    throw new SchemaError(\"no such schema <\" + switchSchema + \">\", schema);\n  }\n  var subschema = helpers.objectGetPath(ctx.schemas[document], fragment.substr(1));\n  if(subschema===undefined){\n    throw new SchemaError(\"no such schema \" + fragment + \" located in <\" + document + \">\", schema);\n  }\n  return {subschema: subschema, switchSchema: switchSchema};\n};\n\n/**\n * Tests whether the instance if of a certain type.\n * @private\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @param type\n * @return {boolean}\n */\nValidator.prototype.testType = function validateType (instance, schema, options, ctx, type) {\n  if (typeof this.types[type] == 'function') {\n    return this.types[type].call(this, instance);\n  }\n  if (type && typeof type == 'object') {\n    var res = this.validateSchema(instance, type, options, ctx);\n    return res === undefined || !(res && res.errors.length);\n  }\n  // Undefined or properties not on the list are acceptable, same as not being defined\n  return true;\n};\n\nvar types = Validator.prototype.types = {};\ntypes.string = function testString (instance) {\n  return typeof instance == 'string';\n};\ntypes.number = function testNumber (instance) {\n  // isFinite returns false for NaN, Infinity, and -Infinity\n  return typeof instance == 'number' && isFinite(instance);\n};\ntypes.integer = function testInteger (instance) {\n  return (typeof instance == 'number') && instance % 1 === 0;\n};\ntypes.boolean = function testBoolean (instance) {\n  return typeof instance == 'boolean';\n};\ntypes.array = function testArray (instance) {\n  return Array.isArray(instance);\n};\ntypes['null'] = function testNull (instance) {\n  return instance === null;\n};\ntypes.date = function testDate (instance) {\n  return instance instanceof Date;\n};\ntypes.any = function testAny (instance) {\n  return true;\n};\ntypes.object = function testObject (instance) {\n  // TODO: fix this - see #15\n  return instance && (typeof instance) === 'object' && !(instance instanceof Array) && !(instance instanceof Date);\n};\n\nmodule.exports = Validator;\n","'use strict';\n\nvar helpers = require('./helpers');\n\n/** @type ValidatorResult */\nvar ValidatorResult = helpers.ValidatorResult;\n/** @type SchemaError */\nvar SchemaError = helpers.SchemaError;\n\nvar attribute = {};\n\nattribute.ignoreProperties = {\n  // informative properties\n  'id': true,\n  'default': true,\n  'description': true,\n  'title': true,\n  // arguments to other properties\n  'exclusiveMinimum': true,\n  'exclusiveMaximum': true,\n  'additionalItems': true,\n  // special-handled properties\n  '$schema': true,\n  '$ref': true,\n  'extends': true\n};\n\n/**\n * @name validators\n */\nvar validators = attribute.validators = {};\n\n/**\n * Validates whether the instance if of a certain type\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.type = function validateType (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var types = Array.isArray(schema.type) ? schema.type : [schema.type];\n  if (!types.some(this.testType.bind(this, instance, schema, options, ctx))) {\n    var list = types.map(function (v) {\n      return v.id && ('<' + v.id + '>') || (v+'');\n    });\n    result.addError({\n      name: 'type',\n      argument: list,\n      message: \"is not of a type(s) \" + list,\n    });\n  }\n  return result;\n};\n\nfunction testSchema(instance, options, ctx, callback, schema){\n  var res = this.validateSchema(instance, schema, options, ctx);\n  if (! res.valid && callback instanceof Function) {\n    callback(res);\n  }\n  return res.valid;\n}\n\n/**\n * Validates whether the instance matches some of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.anyOf = function validateAnyOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  if (!Array.isArray(schema.anyOf)){\n    throw new SchemaError(\"anyOf must be an array\");\n  }\n  if (!schema.anyOf.some(\n    testSchema.bind(\n      this, instance, options, ctx, function(res){inner.importErrors(res);}\n      ))) {\n    var list = schema.anyOf.map(function (v, i) {\n      return (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n    });\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'anyOf',\n      argument: list,\n      message: \"is not any of \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance matches every given schema\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.allOf = function validateAllOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.allOf)){\n    throw new SchemaError(\"allOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var self = this;\n  schema.allOf.forEach(function(v, i){\n    var valid = self.validateSchema(instance, v, options, ctx);\n    if(!valid.valid){\n      var msg = (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n      result.addError({\n        name: 'allOf',\n        argument: { id: msg, length: valid.errors.length, valid: valid },\n        message: 'does not match allOf schema ' + msg + ' with ' + valid.errors.length + ' error[s]:',\n      });\n      result.importErrors(valid);\n    }\n  });\n  return result;\n};\n\n/**\n * Validates whether the instance matches exactly one of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.oneOf = function validateOneOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.oneOf)){\n    throw new SchemaError(\"oneOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  var count = schema.oneOf.filter(\n    testSchema.bind(\n      this, instance, options, ctx, function(res) {inner.importErrors(res);}\n      ) ).length;\n  var list = schema.oneOf.map(function (v, i) {\n    return (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n  });\n  if (count!==1) {\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'oneOf',\n      argument: list,\n      message: \"is not exactly one from \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates properties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.properties = function validateProperties (instance, schema, options, ctx) {\n  if(instance === undefined || !(instance instanceof Object)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var properties = schema.properties || {};\n  for (var property in properties) {\n    var prop = (instance || undefined) && instance[property];\n    var res = this.validateSchema(prop, properties[property], options, ctx.makeChild(properties[property], property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n  return result;\n};\n\n/**\n * Test a specific property within in instance against the additionalProperties schema attribute\n * This ignores properties with definitions in the properties schema attribute, but no other attributes.\n * If too many more types of property-existance tests pop up they may need their own class of tests (like `type` has)\n * @private\n * @return {boolean}\n */\nfunction testAdditionalProperty (instance, schema, options, ctx, property, result) {\n  if (schema.properties && schema.properties[property] !== undefined) {\n    return;\n  }\n  if (schema.additionalProperties === false) {\n    result.addError({\n      name: 'additionalProperties',\n      argument: property,\n      message: \"additionalProperty \" + JSON.stringify(property) + \" exists in instance when not allowed\",\n    });\n  } else {\n    var additionalProperties = schema.additionalProperties || {};\n    var res = this.validateSchema(instance[property], additionalProperties, options, ctx.makeChild(additionalProperties, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n}\n\n/**\n * Validates patternProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.patternProperties = function validatePatternProperties (instance, schema, options, ctx) {\n  if(instance === undefined) return;\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var patternProperties = schema.patternProperties || {};\n\n  for (var property in instance) {\n    var test = true;\n    for (var pattern in patternProperties) {\n      var expr = new RegExp(pattern);\n      if (!expr.test(property)) {\n        continue;\n      }\n      test = false;\n      var res = this.validateSchema(instance[property], patternProperties[pattern], options, ctx.makeChild(patternProperties[pattern], property));\n      if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n      result.importErrors(res);\n    }\n    if (test) {\n      testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates additionalProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.additionalProperties = function validateAdditionalProperties (instance, schema, options, ctx) {\n  if(instance === undefined) return;\n  if(!this.types.object(instance)) return;\n  // if patternProperties is defined then we'll test when that one is called instead\n  if (schema.patternProperties) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in instance) {\n    testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minProperties = function validateMinProperties (instance, schema, options, ctx) {\n  if (!instance || typeof instance !== 'object') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length >= schema.minProperties)) {\n    result.addError({\n      name: 'minProperties',\n      argument: schema.minProperties,\n      message: \"does not meet minimum property length of \" + schema.minProperties,\n    })\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxProperties = function validateMaxProperties (instance, schema, options, ctx) {\n  if (!instance || typeof instance !== 'object') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length <= schema.maxProperties)) {\n    result.addError({\n      name: 'maxProperties',\n      argument: schema.maxProperties,\n      message: \"does not meet maximum property length of \" + schema.maxProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates items when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.items = function validateItems (instance, schema, options, ctx) {\n  if (!Array.isArray(instance)) {\n    return null;\n  }\n  var self = this;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined || !schema.items) {\n    return result;\n  }\n  instance.every(function (value, i) {\n    var items = Array.isArray(schema.items) ? (schema.items[i] || schema.additionalItems) : schema.items;\n    if (items === undefined) {\n      return true;\n    }\n    if (items === false) {\n      result.addError({\n        name: 'items',\n        message: \"additionalItems not permitted\",\n      });\n      return false;\n    }\n    var res = self.validateSchema(value, items, options, ctx.makeChild(items, i));\n    if(res.instance !== result.instance[i]) result.instance[i] = res.instance;\n    result.importErrors(res);\n    return true;\n  });\n  return result;\n};\n\n/**\n * Validates minimum and exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minimum = function validateMinimum (instance, schema, options, ctx) {\n  if (typeof instance !== 'number') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = true;\n  if (schema.exclusiveMinimum && schema.exclusiveMinimum === true) {\n    valid = instance > schema.minimum;\n  } else {\n    valid = instance >= schema.minimum;\n  }\n  if (!valid) {\n    result.addError({\n      name: 'minimum',\n      argument: schema.minimum,\n      message: \"must have a minimum value of \" + schema.minimum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates maximum and exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maximum = function validateMaximum (instance, schema, options, ctx) {\n  if (typeof instance !== 'number') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid;\n  if (schema.exclusiveMaximum && schema.exclusiveMaximum === true) {\n    valid = instance < schema.maximum;\n  } else {\n    valid = instance <= schema.maximum;\n  }\n  if (!valid) {\n    result.addError({\n      name: 'maximum',\n      argument: schema.maximum,\n      message: \"must have a maximum value of \" + schema.maximum,\n    });\n  }\n  return result;\n};\n\n/**\n * Perform validation for multipleOf and divisibleBy, which are essentially the same.\n * @param instance\n * @param schema\n * @param validationType\n * @param errorMessage\n * @returns {String|null}\n */\nvar validateMultipleOfOrDivisbleBy = function validateMultipleOfOrDivisbleBy (instance, schema, options, ctx, validationType, errorMessage) {\n  if (typeof instance !== 'number') {\n    return null;\n  }\n\n  var validationArgument = schema[validationType];\n  if (validationArgument == 0) {\n    throw new SchemaError(validationType + \" cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  var instanceDecimals = helpers.getDecimalPlaces(instance);\n  var divisorDecimals = helpers.getDecimalPlaces(validationArgument);\n\n  var maxDecimals = Math.max(instanceDecimals , divisorDecimals);\n  var multiplier = Math.pow(10, maxDecimals);\n\n  if (Math.round(instance * multiplier) % Math.round(validationArgument * multiplier) !== 0) {\n    result.addError({\n      name: validationType,\n      argument:  validationArgument,\n      message: errorMessage + JSON.stringify(validationArgument)\n    });\n  }\n\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.multipleOf = function validateMultipleOf (instance, schema, options, ctx) {\n return validateMultipleOfOrDivisbleBy(instance, schema, options, ctx, \"multipleOf\", \"is not a multiple of (divisible by) \");\n};\n\n/**\n * Validates multipleOf when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.divisibleBy = function validateDivisibleBy (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy(instance, schema, options, ctx, \"divisibleBy\", \"is not divisible by (multiple of) \");\n};\n\n/**\n * Validates whether the instance value is present.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.required = function validateRequired (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined && schema.required === true) {\n    // A boolean form is implemented for reverse-compatability with schemas written against older drafts\n    result.addError({\n      name: 'required',\n      message: \"is required\"\n    });\n  } else if (instance && typeof instance==='object' && Array.isArray(schema.required)) {\n    schema.required.forEach(function(n){\n      if(instance[n]===undefined){\n        result.addError({\n          name: 'required',\n          argument: n,\n          message: \"requires property \" + JSON.stringify(n),\n        });\n      }\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value matches the regular expression, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.pattern = function validatePattern (instance, schema, options, ctx) {\n  if (typeof instance !== 'string') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.match(schema.pattern)) {\n    result.addError({\n      name: 'pattern',\n      argument: schema.pattern,\n      message: \"does not match pattern \" + JSON.stringify(schema.pattern),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is of a certain defined format or a custom\n * format.\n * The following formats are supported for string types:\n *   - date-time\n *   - date\n *   - time\n *   - ip-address\n *   - ipv6\n *   - uri\n *   - color\n *   - host-name\n *   - alpha\n *   - alpha-numeric\n *   - utc-millisec\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {String|null}\n */\nvalidators.format = function validateFormat (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!result.disableFormat && !helpers.isFormat(instance, schema.format, this)) {\n    result.addError({\n      name: 'format',\n      argument: schema.format,\n      message: \"does not conform to the \" + JSON.stringify(schema.format) + \" format\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minLength = function validateMinLength (instance, schema, options, ctx) {\n  if (!(typeof instance === 'string')) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minLength)) {\n    result.addError({\n      name: 'minLength',\n      argument: schema.minLength,\n      message: \"does not meet minimum length of \" + schema.minLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxLength = function validateMaxLength (instance, schema, options, ctx) {\n  if (!(typeof instance === 'string')) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxLength)) {\n    result.addError({\n      name: 'maxLength',\n      argument: schema.maxLength,\n      message: \"does not meet maximum length of \" + schema.maxLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains at least a minimum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minItems = function validateMinItems (instance, schema, options, ctx) {\n  if (!Array.isArray(instance)) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minItems)) {\n    result.addError({\n      name: 'minItems',\n      argument: schema.minItems,\n      message: \"does not meet minimum length of \" + schema.minItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains no more than a maximum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxItems = function validateMaxItems (instance, schema, options, ctx) {\n  if (!Array.isArray(instance)) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxItems)) {\n    result.addError({\n      name: 'maxItems',\n      argument: schema.maxItems,\n      message: \"does not meet maximum length of \" + schema.maxItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates that every item in an instance array is unique, when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!Array.isArray(instance)) {\n    return result;\n  }\n  function testArrays (v, i, a) {\n    for (var j = i + 1; j < a.length; j++) if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n    return true;\n  }\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Deep compares arrays for duplicates\n * @param v\n * @param i\n * @param a\n * @private\n * @return {boolean}\n */\nfunction testArrays (v, i, a) {\n  var j, len = a.length;\n  for (j = i + 1, len; j < len; j++) {\n    if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Validates whether there are no duplicates, when the instance is an Array.\n * @param instance\n * @return {String|null}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (!Array.isArray(instance)) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validate for the presence of dependency properties, if the instance is an object.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.dependencies = function validateDependencies (instance, schema, options, ctx) {\n  if (!instance || typeof instance != 'object') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in schema.dependencies) {\n    if (instance[property] === undefined) {\n      continue;\n    }\n    var dep = schema.dependencies[property];\n    var childContext = ctx.makeChild(dep, property);\n    if (typeof dep == 'string') {\n      dep = [dep];\n    }\n    if (Array.isArray(dep)) {\n      dep.forEach(function (prop) {\n        if (instance[prop] === undefined) {\n          result.addError({\n            // FIXME there's two different \"dependencies\" errors here with slightly different outputs\n            // Can we make these the same? Or should we create different error types?\n            name: 'dependencies',\n            argument: childContext.propertyPath,\n            message: \"property \" + prop + \" not found, required by \" + childContext.propertyPath,\n          });\n        }\n      });\n    } else {\n      var res = this.validateSchema(instance, dep, options, childContext);\n      if(result.instance !== res.instance) result.instance = res.instance;\n      if (res && res.errors.length) {\n        result.addError({\n          name: 'dependencies',\n          argument: childContext.propertyPath,\n          message: \"does not meet dependency required by \" + childContext.propertyPath,\n        });\n        result.importErrors(res);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is one of the enumerated values.\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['enum'] = function validateEnum (instance, schema, options, ctx) {\n  if (!Array.isArray(schema['enum'])) {\n    throw new SchemaError(\"enum expects an array\", schema);\n  }\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema['enum'].some(helpers.deepCompareStrict.bind(null, instance))) {\n    result.addError({\n      name: 'enum',\n      argument: schema['enum'],\n      message: \"is not one of enum values: \" + schema['enum'].join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance exactly matches a given value\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['const'] = function validateEnum (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!helpers.deepCompareStrict(schema['const'], instance)) {\n    result.addError({\n      name: 'const',\n      argument: schema['const'],\n      message: \"does not exactly match expected constant: \" + schema['const'],\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance if of a prohibited type.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.not = validators.disallow = function validateNot (instance, schema, options, ctx) {\n  var self = this;\n  if(instance===undefined) return null;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var notTypes = schema.not || schema.disallow;\n  if(!notTypes) return null;\n  if(!Array.isArray(notTypes)) notTypes=[notTypes];\n  notTypes.forEach(function (type) {\n    if (self.testType(instance, schema, options, ctx, type)) {\n      var schemaId = type && type.id && ('<' + type.id + '>') || type;\n      result.addError({\n        name: 'not',\n        argument: schemaId,\n        message: \"is of prohibited type \" + schemaId,\n      });\n    }\n  });\n  return result;\n};\n\nmodule.exports = attribute;\n","'use strict';\n\nvar uri = require('url');\n\nvar ValidationError = exports.ValidationError = function ValidationError (message, instance, schema, propertyPath, name, argument) {\n  if (propertyPath) {\n    this.property = propertyPath;\n  }\n  if (message) {\n    this.message = message;\n  }\n  if (schema) {\n    if (schema.id) {\n      this.schema = schema.id;\n    } else {\n      this.schema = schema;\n    }\n  }\n  if (instance) {\n    this.instance = instance;\n  }\n  this.name = name;\n  this.argument = argument;\n  this.stack = this.toString();\n};\n\nValidationError.prototype.toString = function toString() {\n  return this.property + ' ' + this.message;\n};\n\nvar ValidatorResult = exports.ValidatorResult = function ValidatorResult(instance, schema, options, ctx) {\n  this.instance = instance;\n  this.schema = schema;\n  this.propertyPath = ctx.propertyPath;\n  this.errors = [];\n  this.throwError = options && options.throwError;\n  this.disableFormat = options && options.disableFormat === true;\n};\n\nValidatorResult.prototype.addError = function addError(detail) {\n  var err;\n  if (typeof detail == 'string') {\n    err = new ValidationError(detail, this.instance, this.schema, this.propertyPath);\n  } else {\n    if (!detail) throw new Error('Missing error detail');\n    if (!detail.message) throw new Error('Missing error message');\n    if (!detail.name) throw new Error('Missing validator type');\n    err = new ValidationError(detail.message, this.instance, this.schema, this.propertyPath, detail.name, detail.argument);\n  }\n\n  if (this.throwError) {\n    throw err;\n  }\n  this.errors.push(err);\n  return err;\n};\n\nValidatorResult.prototype.importErrors = function importErrors(res) {\n  if (typeof res == 'string' || (res && res.validatorType)) {\n    this.addError(res);\n  } else if (res && res.errors) {\n    Array.prototype.push.apply(this.errors, res.errors);\n  }\n};\n\nfunction stringizer (v,i){\n  return i+': '+v.toString()+'\\n';\n}\nValidatorResult.prototype.toString = function toString(res) {\n  return this.errors.map(stringizer).join('');\n};\n\nObject.defineProperty(ValidatorResult.prototype, \"valid\", { get: function() {\n  return !this.errors.length;\n} });\n\n/**\n * Describes a problem with a Schema which prevents validation of an instance\n * @name SchemaError\n * @constructor\n */\nvar SchemaError = exports.SchemaError = function SchemaError (msg, schema) {\n  this.message = msg;\n  this.schema = schema;\n  Error.call(this, msg);\n  Error.captureStackTrace(this, SchemaError);\n};\nSchemaError.prototype = Object.create(Error.prototype,\n  { constructor: {value: SchemaError, enumerable: false}\n  , name: {value: 'SchemaError', enumerable: false}\n  });\n\nvar SchemaContext = exports.SchemaContext = function SchemaContext (schema, options, propertyPath, base, schemas) {\n  this.schema = schema;\n  this.options = options;\n  this.propertyPath = propertyPath;\n  this.base = base;\n  this.schemas = schemas;\n};\n\nSchemaContext.prototype.resolve = function resolve (target) {\n  return uri.resolve(this.base, target);\n};\n\nSchemaContext.prototype.makeChild = function makeChild(schema, propertyName){\n  var propertyPath = (propertyName===undefined) ? this.propertyPath : this.propertyPath+makeSuffix(propertyName);\n  var base = uri.resolve(this.base, schema.id||'');\n  var ctx = new SchemaContext(schema, this.options, propertyPath, base, Object.create(this.schemas));\n  if(schema.id && !ctx.schemas[base]){\n    ctx.schemas[base] = schema;\n  }\n  return ctx;\n}\n\nvar FORMAT_REGEXPS = exports.FORMAT_REGEXPS = {\n  'date-time': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\\.\\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,\n  'date': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,\n  'time': /^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,\n\n  'email': /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/,\n  'ip-address': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n  'ipv6': /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/,\n  'uri': /^[a-zA-Z][a-zA-Z0-9+-.]*:[^\\s]*$/,\n\n  'color': /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/,\n\n  // hostname regex from: http://stackoverflow.com/a/1420225/5628\n  'hostname': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n  'host-name': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n\n  'alpha': /^[a-zA-Z]+$/,\n  'alphanumeric': /^[a-zA-Z0-9]+$/,\n  'utc-millisec': function (input) {\n    return (typeof input === 'string') && parseFloat(input) === parseInt(input, 10) && !isNaN(input);\n  },\n  'regex': function (input) {\n    var result = true;\n    try {\n      new RegExp(input);\n    } catch (e) {\n      result = false;\n    }\n    return result;\n  },\n  'style': /\\s*(.+?):\\s*([^;]+);?/g,\n  'phone': /^\\+(?:[0-9] ?){6,14}[0-9]$/\n};\n\nFORMAT_REGEXPS.regexp = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.pattern = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.ipv4 = FORMAT_REGEXPS['ip-address'];\n\nexports.isFormat = function isFormat (input, format, validator) {\n  if (typeof input === 'string' && FORMAT_REGEXPS[format] !== undefined) {\n    if (FORMAT_REGEXPS[format] instanceof RegExp) {\n      return FORMAT_REGEXPS[format].test(input);\n    }\n    if (typeof FORMAT_REGEXPS[format] === 'function') {\n      return FORMAT_REGEXPS[format](input);\n    }\n  } else if (validator && validator.customFormats &&\n      typeof validator.customFormats[format] === 'function') {\n    return validator.customFormats[format](input);\n  }\n  return true;\n};\n\nvar makeSuffix = exports.makeSuffix = function makeSuffix (key) {\n  key = key.toString();\n  // This function could be capable of outputting valid a ECMAScript string, but the\n  // resulting code for testing which form to use would be tens of thousands of characters long\n  // That means this will use the name form for some illegal forms\n  if (!key.match(/[.\\s\\[\\]]/) && !key.match(/^[\\d]/)) {\n    return '.' + key;\n  }\n  if (key.match(/^\\d+$/)) {\n    return '[' + key + ']';\n  }\n  return '[' + JSON.stringify(key) + ']';\n};\n\nexports.deepCompareStrict = function deepCompareStrict (a, b) {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a instanceof Array) {\n    if (!(b instanceof Array)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    return a.every(function (v, i) {\n      return deepCompareStrict(a[i], b[i]);\n    });\n  }\n  if (typeof a === 'object') {\n    if (!a || !b) {\n      return a === b;\n    }\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    return aKeys.every(function (v) {\n      return deepCompareStrict(a[v], b[v]);\n    });\n  }\n  return a === b;\n};\n\nfunction deepMerger (target, dst, e, i) {\n  if (typeof e === 'object') {\n    dst[i] = deepMerge(target[i], e)\n  } else {\n    if (target.indexOf(e) === -1) {\n      dst.push(e)\n    }\n  }\n}\n\nfunction copyist (src, dst, key) {\n  dst[key] = src[key];\n}\n\nfunction copyistWithDeepMerge (target, src, dst, key) {\n  if (typeof src[key] !== 'object' || !src[key]) {\n    dst[key] = src[key];\n  }\n  else {\n    if (!target[key]) {\n      dst[key] = src[key];\n    } else {\n      dst[key] = deepMerge(target[key], src[key])\n    }\n  }\n}\n\nfunction deepMerge (target, src) {\n  var array = Array.isArray(src);\n  var dst = array && [] || {};\n\n  if (array) {\n    target = target || [];\n    dst = dst.concat(target);\n    src.forEach(deepMerger.bind(null, target, dst));\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(copyist.bind(null, target, dst));\n    }\n    Object.keys(src).forEach(copyistWithDeepMerge.bind(null, target, src, dst));\n  }\n\n  return dst;\n};\n\nmodule.exports.deepMerge = deepMerge;\n\n/**\n * Validates instance against the provided schema\n * Implements URI+JSON Pointer encoding, e.g. \"%7e\"=\"~0\"=>\"~\", \"~1\"=\"%2f\"=>\"/\"\n * @param o\n * @param s The path to walk o along\n * @return any\n */\nexports.objectGetPath = function objectGetPath(o, s) {\n  var parts = s.split('/').slice(1);\n  var k;\n  while (typeof (k=parts.shift()) == 'string') {\n    var n = decodeURIComponent(k.replace(/~0/,'~').replace(/~1/g,'/'));\n    if (!(n in o)) return;\n    o = o[n];\n  }\n  return o;\n};\n\nfunction pathEncoder (v) {\n  return '/'+encodeURIComponent(v).replace(/~/g,'%7E');\n}\n/**\n * Accept an Array of property names and return a JSON Pointer URI fragment\n * @param Array a\n * @return {String}\n */\nexports.encodePath = function encodePointer(a){\n\t// ~ must be encoded explicitly because hacks\n\t// the slash is encoded by encodeURIComponent\n\treturn a.map(pathEncoder).join('');\n};\n\n\n/**\n * Calculate the number of decimal places a number uses\n * We need this to get correct results out of multipleOf and divisibleBy\n * when either figure is has decimal places, due to IEEE-754 float issues.\n * @param number\n * @returns {number}\n */\nexports.getDecimalPlaces = function getDecimalPlaces(number) {\n\n  var decimalPlaces = 0;\n  if (isNaN(number)) return decimalPlaces;\n\n  if (typeof number !== 'number') {\n    number = Number(number);\n  }\n\n  var parts = number.toString().split('e');\n  if (parts.length === 2) {\n    if (parts[1][0] !== '-') {\n      return decimalPlaces;\n    } else {\n      decimalPlaces = Number(parts[1].slice(1));\n    }\n  }\n\n  var decimalParts = parts[0].split('.');\n  if (decimalParts.length === 2) {\n    decimalPlaces += decimalParts[1].length;\n  }\n\n  return decimalPlaces;\n};\n\n","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {number}    delay -          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {boolean}   [noTrailing] -   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset).\n * @param  {Function}  callback -       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {boolean}   [debounceMode] - If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @returns {Function}  A new, throttled, function.\n */\nexport default function (delay, noTrailing, callback, debounceMode) {\n\t/*\n\t * After wrapper has stopped being called, this timeout ensures that\n\t * `callback` is executed at the proper times in `throttle` and `end`\n\t * debounce modes.\n\t */\n\tlet timeoutID;\n\tlet cancelled = false;\n\n\t// Keep track of the last time `callback` was executed.\n\tlet lastExec = 0;\n\n\t// Function to clear existing timeout\n\tfunction clearExistingTimeout() {\n\t\tif (timeoutID) {\n\t\t\tclearTimeout(timeoutID);\n\t\t}\n\t}\n\n\t// Function to cancel next exec\n\tfunction cancel() {\n\t\tclearExistingTimeout();\n\t\tcancelled = true;\n\t}\n\n\t// `noTrailing` defaults to falsy.\n\tif (typeof noTrailing !== 'boolean') {\n\t\tdebounceMode = callback;\n\t\tcallback = noTrailing;\n\t\tnoTrailing = undefined;\n\t}\n\n\t/*\n\t * The `wrapper` function encapsulates all of the throttling / debouncing\n\t * functionality and when executed will limit the rate at which `callback`\n\t * is executed.\n\t */\n\tfunction wrapper(...arguments_) {\n\t\tlet self = this;\n\t\tlet elapsed = Date.now() - lastExec;\n\n\t\tif (cancelled) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Execute `callback` and update the `lastExec` timestamp.\n\t\tfunction exec() {\n\t\t\tlastExec = Date.now();\n\t\t\tcallback.apply(self, arguments_);\n\t\t}\n\n\t\t/*\n\t\t * If `debounceMode` is true (at begin) this is used to clear the flag\n\t\t * to allow future `callback` executions.\n\t\t */\n\t\tfunction clear() {\n\t\t\ttimeoutID = undefined;\n\t\t}\n\n\t\tif (debounceMode && !timeoutID) {\n\t\t\t/*\n\t\t\t * Since `wrapper` is being called for the first time and\n\t\t\t * `debounceMode` is true (at begin), execute `callback`.\n\t\t\t */\n\t\t\texec();\n\t\t}\n\n\t\tclearExistingTimeout();\n\n\t\tif (debounceMode === undefined && elapsed > delay) {\n\t\t\t/*\n\t\t\t * In throttle mode, if `delay` time has been exceeded, execute\n\t\t\t * `callback`.\n\t\t\t */\n\t\t\texec();\n\t\t} else if (noTrailing !== true) {\n\t\t\t/*\n\t\t\t * In trailing throttle mode, since `delay` time has not been\n\t\t\t * exceeded, schedule `callback` to execute `delay` ms after most\n\t\t\t * recent execution.\n\t\t\t *\n\t\t\t * If `debounceMode` is true (at begin), schedule `clear` to execute\n\t\t\t * after `delay` ms.\n\t\t\t *\n\t\t\t * If `debounceMode` is false (at end), schedule `callback` to\n\t\t\t * execute after `delay` ms.\n\t\t\t */\n\t\t\ttimeoutID = setTimeout(\n\t\t\t\tdebounceMode ? clear : exec,\n\t\t\t\tdebounceMode === undefined ? delay - elapsed : delay\n\t\t\t);\n\t\t}\n\t}\n\n\twrapper.cancel = cancel;\n\n\t// Return the wrapper function.\n\treturn wrapper;\n}\n","/* eslint-disable no-undefined */\n\nimport throttle from './throttle';\n\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {number}   delay -         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {boolean}  [atBegin] -     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback -      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @returns {Function} A new, debounced function.\n */\nexport default function (delay, atBegin, callback) {\n\treturn callback === undefined\n\t\t? throttle(delay, atBegin, false)\n\t\t: throttle(delay, callback, atBegin !== false);\n}\n","import {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport {Axis} from 'vega-lite/build/src/axis';\r\nimport {Channel} from 'vega-lite/build/src/channel';\r\nimport {Legend} from 'vega-lite/build/src/legend';\r\nimport {Scale} from 'vega-lite/build/src/scale';\r\nimport {contains} from 'vega-lite/build/src/util';\r\nimport * as vlSchema from 'vega-lite/build/vega-lite-schema.json';\r\nimport {ShelfFieldDef, ShelfId} from '../../models/shelf/spec';\r\n\r\n// ------------------------------------------------------------------------------\r\n// Schema Interfaces\r\n// ------------------------------------------------------------------------------\r\nexport interface SchemaProperties {\r\n  [key: string]: SchemaProperty;\r\n}\r\n\r\nexport interface ObjectSchema {\r\n  type: 'object';\r\n  title?: string;\r\n  properties: SchemaProperties;\r\n}\r\n\r\nexport interface StringSchema {\r\n  type: 'string';\r\n  title: string;\r\n  enum?: string[];\r\n  default?: string;\r\n}\r\n\r\nexport interface IntegerSchema {\r\n  type: 'number';\r\n  title: string;\r\n  minimum: number;\r\n  maximum: number;\r\n  multipleOf: number;\r\n}\r\n\r\nexport function isStringSchema(schema: SchemaProperty): schema is StringSchema {\r\n  return schema.type === 'string';\r\n}\r\n\r\nexport type SchemaProperty = ObjectSchema | StringSchema | IntegerSchema;\r\n\r\nexport interface UISchema {\r\n  [key: string]: UISchemaItem;\r\n}\r\n\r\n// NOTE: keys for these interfaces follow the requirement for react-jsonSchema form\r\n// (https://mozilla-services.github.io/react-jsonschema-form/)\r\nexport interface UISchemaItem {\r\n  'ui:widget'?: string;\r\n  'ui:placeholder'?: string;\r\n  'ui:emptyValue'?: string;\r\n}\r\n\r\nexport interface PropertyEditorSchema {\r\n  uiSchema: UISchema;\r\n  schema: ObjectSchema;\r\n}\r\n\r\n// Currently supported customizble encoding channels that display caret in customizer UI\r\nexport const CUSTOMIZABLE_ENCODING_CHANNELS = [Channel.X, Channel.Y, Channel.COLOR, Channel.SIZE, Channel.SHAPE];\r\n\r\n// ------------------------------------------------------------------------------\r\n// Channel-Field Indexes for custom encoding\r\n// Key is Tab name, value is list of fieldDef properties\r\n// ------------------------------------------------------------------------------\r\n\r\nconst AXIS_ORIENT_TITLE = ['title', 'orient'].map(p => ({prop: 'axis', nestedProp: p}));\r\nconst LEGEND_ORIENT_TITLE = ['orient', 'title'].map(p => ({prop: 'legend', nestedProp: p}));\r\n\r\nconst POSITION_FIELD_NOMINAL_INDEX = {\r\n  'Common': [\r\n    {\r\n      prop: 'scale',\r\n      nestedProp: 'type'\r\n    },\r\n    ...AXIS_ORIENT_TITLE\r\n  ]\r\n};\r\n\r\nconst POSITION_FIELD_TEMPORAL_INDEX = POSITION_FIELD_NOMINAL_INDEX;\r\n\r\nconst POSITION_FIELD_QUANTITATIVE_INDEX = {\r\n  'Common': [\r\n    ...POSITION_FIELD_NOMINAL_INDEX.Common,\r\n    {prop: 'stack'}\r\n  ]\r\n};\r\n\r\nconst COLOR_CHANNEL_FIELD_INDEX = {\r\n  'Legend': ['orient', 'title', 'type'].map(p => ({prop: 'legend', nestedProp: p})),\r\n  'Scale': ['type', 'domain', 'scheme'].map(p => ({prop: 'scale', nestedProp: p}))\r\n};\r\n\r\nconst SIZE_CHANNEL_FIELD_INDEX = {\r\n  'Legend': ['orient', 'title'].map(p => ({prop: 'legend', nestedProp: p})),\r\n  'Scale': ['type', 'domain', 'range'].map(p => ({prop: 'scale', nestedProp: p}))\r\n};\r\n\r\nconst SHAPE_CHANNEL_FIELD_INDEX = {\r\n  'Legend': LEGEND_ORIENT_TITLE,\r\n  'Scale': ['domain', 'range'].map(p => ({prop: 'scale', nestedProp: p}))\r\n};\r\n\r\n// ------------------------------------------------------------------------------\r\n// Color Scheme Constants\r\n// ------------------------------------------------------------------------------\r\nexport const CATEGORICAL_COLOR_SCHEMES = ['accent', 'category10', 'category20', 'category20b', 'category20c', 'dark2',\r\n  'paired', 'pastel1', 'pastel1', 'set1', 'set2', 'set3', 'tableau10', 'tableau20'];\r\n\r\nexport const SEQUENTIAL_COLOR_SCHEMES = ['blues', 'greens', 'greys', 'purples', 'reds', 'oranges', 'viridis', 'inferno',\r\n  'magma', 'plasma', 'bluegreen', 'bluepurple', 'greenblue', 'orangered', 'blueorange'];\r\n\r\n// ------------------------------------------------------------------------------\r\n// Generator/Factory Methods\r\n// ------------------------------------------------------------------------------\r\nexport function generatePropertyEditorSchema(prop: string, nestedProp: string, propTab: string,\r\n                                             fieldDef: ShelfFieldDef, channel: Channel): PropertyEditorSchema {\r\n  const title = generateTitle(prop, nestedProp, propTab);\r\n  const propertyKey = nestedProp ? prop + '_' + nestedProp : prop;\r\n  switch (prop) {\r\n    case 'scale':\r\n      const scaleTypes: string[] = getSupportedScaleTypes(channel, fieldDef);\r\n      return generateScaleEditorSchema(nestedProp as keyof Scale, scaleTypes, fieldDef, title, propertyKey);\r\n\r\n    case 'axis':\r\n      return generateAxisEditorSchema(nestedProp as keyof Axis, channel, title, propertyKey);\r\n\r\n    case 'stack':\r\n      return generateSelectSchema('stack', (vlSchema as any).definitions.StackOffset.enum, title);\r\n\r\n    case 'legend':\r\n      return generateLegendEditorSchema(nestedProp as keyof Legend, title, propertyKey);\r\n\r\n    case 'format':\r\n      return generateTextBoxSchema('format', '', title, 'string');\r\n\r\n    default:\r\n      throw new Error('Property combination not recognized');\r\n  }\r\n}\r\n\r\nfunction generateLegendEditorSchema(legendProp: keyof Legend, title: string, propertyKey: string) {\r\n  switch (legendProp) {\r\n    case 'orient':\r\n      return generateSelectSchema(propertyKey, (vlSchema as any).definitions.LegendOrient.enum, title);\r\n\r\n    case 'title':\r\n      return generateTextBoxSchema(propertyKey, '', title, 'string');\r\n\r\n    case 'type':\r\n      return generateSelectSchema(propertyKey, (vlSchema as any).definitions.Legend.properties.type.enum, title);\r\n\r\n    default:\r\n      throw new Error('Property combination not recognized');\r\n  }\r\n}\r\n\r\nfunction generateAxisEditorSchema(axisProp: keyof Axis, channel: Channel, title: string, propertyKey: string) {\r\n  switch (axisProp) {\r\n    case 'orient':\r\n      return generateSelectSchema(propertyKey, channel === 'y' ? ['left', 'right'] : ['top', 'bottom'], title);\r\n\r\n    case 'title':\r\n      return generateTextBoxSchema(propertyKey, '', title, 'string');\r\n\r\n    default:\r\n      throw new Error('Property combination not recognized');\r\n  }\r\n}\r\n\r\nfunction generateScaleEditorSchema(scaleProp: keyof Scale, scaleTypes: string[], fieldDef: ShelfFieldDef,\r\n                                   title: string, propertyKey: string) {\r\n  switch (scaleProp) {\r\n    case 'type':\r\n      return generateSelectSchema(propertyKey, scaleTypes, title);\r\n\r\n    case 'scheme':\r\n      return generateSelectSchema(propertyKey, isContinuous(fieldDef) ? SEQUENTIAL_COLOR_SCHEMES :\r\n        CATEGORICAL_COLOR_SCHEMES, title);\r\n\r\n    case 'range':\r\n    case 'domain':\r\n      return generateTextBoxSchema(propertyKey, isDiscrete(fieldDef) ?\r\n        'a, b, c, ...' : 'Min Number, Max Number', title, 'string');\r\n\r\n    default:\r\n      throw new Error('Provided property is not supported');\r\n  }\r\n}\r\n\r\n// TODO: Eventually refactor to Vega-Lite\r\nfunction getSupportedScaleTypes(channel: Channel, fieldDef: ShelfFieldDef): string[] {\r\n  switch (fieldDef.type) {\r\n    case ExpandedType.QUANTITATIVE:\r\n      if (contains([Channel.X, Channel.Y], channel)) {\r\n        return [\"linear\", \"log\", \"pow\", \"sqrt\"];\r\n      } else if (channel === Channel.COLOR) {\r\n        return [\"linear\", \"pow\", \"sqrt\", \"log\", \"sequential\"];\r\n      } else if (channel === Channel.SIZE) {\r\n        return [\"linear\", \"pow\", \"sqrt\", \"log\"];\r\n      } else {\r\n        return [];\r\n      }\r\n\r\n    case ExpandedType.ORDINAL:\r\n    case ExpandedType.NOMINAL:\r\n      if (contains([Channel.X, Channel.Y], channel)) {\r\n        return [\"point\", \"band\"];\r\n      } else if (channel === Channel.COLOR) {\r\n        return [\"ordinal\"];\r\n      } else if (channel === Channel.SIZE) {\r\n        return [\"point\", \"band\"];\r\n      } else {\r\n        return [];\r\n      }\r\n\r\n    case ExpandedType.TEMPORAL:\r\n      if (contains([Channel.X, Channel.Y], channel)) {\r\n        return [\"time\", \"utc\"];\r\n      } else if (channel === Channel.COLOR) {\r\n        return [\"time\", \"utc\", \"sequential\"];\r\n      } else if (channel === Channel.SIZE) {\r\n        return [\"time\", \"utc\"];\r\n      } else {\r\n        return [];\r\n      }\r\n\r\n    default:\r\n      return [];\r\n  }\r\n}\r\n\r\nfunction generateSelectSchema(propertyKey: string, enumVals: string[], title: string) {\r\n  const schema: ObjectSchema = {\r\n    type: 'object',\r\n    properties: {\r\n      [propertyKey]: {\r\n        type: 'string',\r\n        title: title,\r\n        enum: enumVals\r\n      }\r\n    }\r\n  };\r\n\r\n  const uiSchema: UISchema = {\r\n    [propertyKey]: {\r\n      'ui:widget': 'select',\r\n      'ui:placeholder': 'auto',\r\n      'ui:emptyValue': 'auto'\r\n    }\r\n  };\r\n\r\n  return {schema, uiSchema};\r\n}\r\n\r\nfunction generateTextBoxSchema(propKey: string, placeHolderText: string, title: string,\r\n                               primitiveType: 'string' | 'number') {\r\n  const schema: ObjectSchema = {\r\n    type: 'object',\r\n    properties: {\r\n      [propKey]: {\r\n        title: title,\r\n        type: primitiveType\r\n      } as SchemaProperty\r\n    }\r\n  };\r\n  const uiSchema: UISchema = {\r\n    [propKey]: {\r\n      'ui:emptyValue': '',\r\n      'ui:placeholder': placeHolderText\r\n    }\r\n  };\r\n\r\n  return {schema, uiSchema};\r\n}\r\n\r\nexport function getFieldPropertyGroupIndex(shelfId: ShelfId, fieldDef: ShelfFieldDef) {\r\n  if (fieldDef && (shelfId.channel === Channel.X || shelfId.channel === Channel.Y)) {\r\n    switch (fieldDef.type) {\r\n      case ExpandedType.QUANTITATIVE:\r\n        if (!isContinuous(fieldDef)) {\r\n          return POSITION_FIELD_QUANTITATIVE_INDEX.Common.filter(t => {\r\n            return t.prop !== \"stack\";\r\n          });\r\n        }\r\n        return POSITION_FIELD_QUANTITATIVE_INDEX;\r\n\r\n      case ExpandedType.ORDINAL:\r\n        return POSITION_FIELD_NOMINAL_INDEX;\r\n\r\n      case ExpandedType.NOMINAL:\r\n        return POSITION_FIELD_NOMINAL_INDEX;\r\n\r\n      case ExpandedType.TEMPORAL:\r\n        return POSITION_FIELD_TEMPORAL_INDEX;\r\n\r\n    }\r\n  } else if (shelfId.channel === Channel.COLOR) {\r\n    return COLOR_CHANNEL_FIELD_INDEX;\r\n  } else if (shelfId.channel === Channel.SIZE) {\r\n    return SIZE_CHANNEL_FIELD_INDEX;\r\n  } else if (shelfId.channel === Channel.SHAPE) {\r\n    return SHAPE_CHANNEL_FIELD_INDEX;\r\n  }\r\n}\r\n\r\nexport function generateFormData(shelfId: ShelfId, fieldDef: ShelfFieldDef) {\r\n  const index = getFieldPropertyGroupIndex(shelfId, fieldDef);\r\n  const formDataIndex = {};\r\n  for (const key of Object.keys(index)) {\r\n    for (const customProp of index[key]) {\r\n      const prop = customProp.prop;\r\n      const nestedProp = customProp.nestedProp;\r\n      const propertyKey = nestedProp ? prop + '_' + nestedProp : prop;\r\n      const formData = fieldDef[prop] ? nestedProp ? fieldDef[prop][nestedProp] : fieldDef[prop] : undefined;\r\n      // Display empty string when '?' is passed in to retrieve default value\r\n      // '?' is passed when formData is empty to avoid passing in empty string as a property/nestedProp value\r\n      formDataIndex[propertyKey] = formData === undefined ? '' : formData;\r\n    }\r\n  }\r\n\r\n  return formDataIndex;\r\n}\r\n\r\n// ------------------------------------------------------------------------------\r\n// General-Purpose Helper Methods\r\n// ------------------------------------------------------------------------------\r\nexport function isContinuous(fieldDef: ShelfFieldDef) {\r\n  return contains([ExpandedType.ORDINAL, ExpandedType.TEMPORAL, ExpandedType.QUANTITATIVE], fieldDef.type);\r\n}\r\n\r\nexport function isDiscrete(fieldDef: ShelfFieldDef) {\r\n  return !isContinuous(fieldDef);\r\n}\r\n\r\n// Capitalize first letter for aesthetic purposes in form\r\nfunction toTitleCase(str: string) {\r\n  return str.replace(/\\w\\S*/g, txt => {\r\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\r\n  });\r\n}\r\n\r\n// Generate title for react-form with appropriate casing, prop, nestedProp\r\nfunction generateTitle(prop: string, nestedProp: string, propTab: string): string {\r\n  let title;\r\n  if (propTab === 'Common') {\r\n    title = nestedProp ? prop + ' ' + nestedProp : prop;\r\n  } else {\r\n    title = nestedProp || prop;\r\n  }\r\n\r\n  return toTitleCase(title);\r\n}\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"property-editor\":\"property-editor__property-editor\"};","import {isWildcard, SHORT_WILDCARD} from 'compassql/build/src/wildcard';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {PRIMITIVE_MARKS} from 'vega-lite/build/src/mark';\r\n\r\nimport * as styles from './mark-picker.scss';\r\n\r\nimport {ActionHandler, SPEC_MARK_CHANGE_TYPE, SpecMarkChangeType} from '../../actions';\r\nimport {ShelfMark} from '../../models';\r\n\r\nconst ALL_MARKS = [SHORT_WILDCARD, ...PRIMITIVE_MARKS];\r\n\r\nconst options = ALL_MARKS.map(mark => (\r\n  <option key={mark} value={mark}>\r\n    {mark === SHORT_WILDCARD ? 'auto' : mark}\r\n  </option>\r\n));\r\n\r\nexport interface MarkPickerProps extends ActionHandler<SpecMarkChangeType> {\r\n  mark: ShelfMark;\r\n}\r\n\r\n/**\r\n * Control for selecting mark type\r\n */\r\nexport class MarkPickerBase extends React.PureComponent<MarkPickerProps, {}> {\r\n  constructor(props: MarkPickerProps) {\r\n    super(props);\r\n\r\n    // Bind - https://facebook.github.io/react/docs/handling-events.html\r\n    this.onMarkChange = this.onMarkChange.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    const {mark} = this.props;\r\n    return (\r\n      <select\r\n        styleName={isWildcard(mark) ? 'mark-picker-any' : 'mark-picker'}\r\n        value={mark}\r\n        onChange={this.onMarkChange}\r\n      >\r\n        {options}\r\n      </select>\r\n    );\r\n  }\r\n  private onMarkChange(event: any) {\r\n    this.props.handleAction({\r\n      type: SPEC_MARK_CHANGE_TYPE,\r\n      payload: event.target.value as ShelfMark\r\n    });\r\n  }\r\n}\r\n\r\nexport const MarkPicker = CSSModules(MarkPickerBase, styles);\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"mark-picker\":\"mark-picker__mark-picker\",\"mark-picker-any\":\"mark-picker__mark-picker-any\"};","import * as Papa from 'papaparse';\r\nimport * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport * as fileDownload from 'react-file-download';\r\nimport {constructLogString} from '../../models/export-logs';\r\nimport {actionLogs} from '../../store/index';\r\nimport * as styles from './footer.scss';\r\n\r\n\r\nexport class FooterBase extends React.PureComponent<{}, {}> {\r\n  public render() {\r\n    return (\r\n      <div styleName='footer'>\r\n        <a onClick={this.exportLogs}>Download logs</a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private exportLogs() {\r\n    const logs = constructLogString(actionLogs.getLog().actions);\r\n    const csv = Papa.unparse(logs);\r\n    const fileName = `Logs_voyager_${new Date()}.csv`;\r\n    fileDownload(csv, fileName);\r\n  }\r\n}\r\n\r\nexport const Footer = CSSModules(FooterBase, styles);\r\n","/* @license\nPapa Parse\nv5.3.1\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n!function(e,t){\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof module&&\"undefined\"!=typeof exports?module.exports=t():e.Papa=t()}(this,function s(){\"use strict\";var f=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==f?f:{};var n=!f.document&&!!f.postMessage,o=n&&/blob:/i.test((f.location||{}).protocol),a={},h=0,b={parse:function(e,t){var i=(t=t||{}).dynamicTyping||!1;M(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!M(t.transform)&&t.transform,t.worker&&b.WORKERS_SUPPORTED){var r=function(){if(!b.WORKERS_SUPPORTED)return!1;var e=(i=f.URL||f.webkitURL||null,r=s.toString(),b.BLOB_URL||(b.BLOB_URL=i.createObjectURL(new Blob([\"(\",r,\")();\"],{type:\"text/javascript\"})))),t=new f.Worker(e);var i,r;return t.onmessage=_,t.id=h++,a[t.id]=t}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=M(t.step),t.chunk=M(t.chunk),t.complete=M(t.complete),t.error=M(t.error),delete t.worker,void r.postMessage({input:e,config:t,workerId:r.id})}var n=null;b.NODE_STREAM_INPUT,\"string\"==typeof e?n=t.download?new l(t):new p(t):!0===e.readable&&M(e.read)&&M(e.on)?n=new g(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new c(t));return n.stream(e)},unparse:function(e,t){var n=!1,_=!0,m=\",\",y=\"\\r\\n\",s='\"',a=s+s,i=!1,r=null,o=!1;!function(){if(\"object\"!=typeof t)return;\"string\"!=typeof t.delimiter||b.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(m=t.delimiter);(\"boolean\"==typeof t.quotes||\"function\"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes);\"boolean\"!=typeof t.skipEmptyLines&&\"string\"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines);\"string\"==typeof t.newline&&(y=t.newline);\"string\"==typeof t.quoteChar&&(s=t.quoteChar);\"boolean\"==typeof t.header&&(_=t.header);if(Array.isArray(t.columns)){if(0===t.columns.length)throw new Error(\"Option columns is empty\");r=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s);\"boolean\"==typeof t.escapeFormulae&&(o=t.escapeFormulae)}();var h=new RegExp(j(s),\"g\");\"string\"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return u(null,e,i);if(\"object\"==typeof e[0])return u(r||Object.keys(e[0]),e,i)}else if(\"object\"==typeof e)return\"string\"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:\"object\"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||\"object\"==typeof e.data[0]||(e.data=[e.data])),u(e.fields||[],e.data||[],i);throw new Error(\"Unable to serialize unrecognized input\");function u(e,t,i){var r=\"\";\"string\"==typeof e&&(e=JSON.parse(e)),\"string\"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(r+=m),r+=v(e[a],a);0<t.length&&(r+=y)}for(var o=0;o<t.length;o++){var h=n?e.length:t[o].length,u=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u=\"greedy\"===i?\"\"===t[o].join(\"\").trim():1===t[o].length&&0===t[o][0].length),\"greedy\"===i&&n){for(var d=[],l=0;l<h;l++){var c=s?e[l]:l;d.push(t[o][c])}u=\"\"===d.join(\"\").trim()}if(!u){for(var p=0;p<h;p++){0<p&&!f&&(r+=m);var g=n&&s?e[p]:p;r+=v(t[o][g],p)}o<t.length-1&&(!i||0<h&&!f)&&(r+=y)}}return r}function v(e,t){if(null==e)return\"\";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===o&&\"string\"==typeof e&&null!==e.match(/^[=+\\-@].*$/)&&(e=\"'\"+e);var i=e.toString().replace(h,a),r=\"boolean\"==typeof n&&n||\"function\"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1}(i,b.BAD_DELIMITERS)||-1<i.indexOf(m)||\" \"===i.charAt(0)||\" \"===i.charAt(i.length-1);return r?s+i+s:i}}};if(b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK=\"\\ufeff\",b.BAD_DELIMITERS=[\"\\r\",\"\\n\",'\"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!n&&!!f.Worker,b.NODE_STREAM_INPUT=1,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=\",\",b.Parser=E,b.ParserHandle=i,b.NetworkStreamer=l,b.FileStreamer=c,b.StringStreamer=p,b.ReadableStreamStreamer=g,f.jQuery){var d=f.jQuery;d.fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!(\"INPUT\"===d(this).prop(\"tagName\").toUpperCase()&&\"file\"===d(this).attr(\"type\").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)})}),e(),this;function e(){if(0!==h.length){var e,t,i,r,n=h[0];if(M(o.before)){var s=o.before(n.file,n.inputElem);if(\"object\"==typeof s){if(\"abort\"===s.action)return e=\"AbortError\",t=n.file,i=n.inputElem,r=s.reason,void(M(o.error)&&o.error({name:e},t,i,r));if(\"skip\"===s.action)return void u();\"object\"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config))}else if(\"skip\"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){M(a)&&a(e,n.file,n.inputElem),u()},b.parse(n.file,n.instanceConfig)}else M(o.complete)&&o.complete()}function u(){h.splice(0,1),e()}}}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine=\"\",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=w(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new i(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&M(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+e;this._partialLine=\"\";var n=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=n.meta.cursor;this._finished||(this._partialLine=r.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)f.postMessage({results:n,workerId:b.WORKER_ID,finished:a});else if(M(this._config.chunk)&&!t){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);n=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!M(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(e){M(this._config.error)?this._config.error(e):o&&this._config.error&&f.postMessage({workerId:b.WORKER_ID,error:e,finished:!1})}}function l(e){var r;(e=e||{}).chunkSize||(e.chunkSize=b.RemoteChunkSize),u.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),n||(r.onload=v(this._chunkLoaded,this),r.onerror=v(this._chunkError,this)),r.open(this._config.downloadRequestBody?\"POST\":\"GET\",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)r.setRequestHeader(t,e[t])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;r.setRequestHeader(\"Range\",\"bytes=\"+this._start+\"-\"+i)}try{r.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===r.status&&this._chunkError()}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:r.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader(\"Content-Range\");if(null===t)return-1;return parseInt(t.substring(t.lastIndexOf(\"/\")+1))}(r),this.parseChunk(r.responseText)))},this._chunkError=function(e){var t=r.statusText||e;this._sendError(new Error(t))}}function c(e){var r,n;(e=e||{}).chunkSize||(e.chunkSize=b.LocalChunkSize),u.call(this,e);var s=\"undefined\"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((r=new FileReader).onload=v(this._chunkLoaded,this),r.onerror=v(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var t=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,t)}var i=r.readAsText(e,this._config.encoding);s||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(r.error)}}function p(e){var i;u.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,t=this._config.chunkSize;return t?(e=i.substring(0,t),i=i.substring(t)):(e=i,i=\"\"),this._finished=!i,this.parseChunk(e)}}}function g(e){u.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on(\"data\",this._streamData),this._input.on(\"end\",this._streamEnd),this._input.on(\"error\",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=v(function(e){try{t.push(\"string\"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=v(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=v(function(){this._streamCleanUp(),r=!0,this._streamData(\"\")},this),this._streamCleanUp=v(function(){this._input.removeListener(\"data\",this._streamData),this._input.removeListener(\"end\",this._streamEnd),this._input.removeListener(\"error\",this._streamError)},this)}function i(m){var a,o,h,r=Math.pow(2,53),n=-r,s=/^\\s*-?(\\d+\\.?|\\.\\d+|\\d+\\.\\d+)([eE][-+]?\\d+)?\\s*$/,u=/^(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))$/,t=this,i=0,f=0,d=!1,e=!1,l=[],c={data:[],errors:[],meta:{}};if(M(m.step)){var p=m.step;m.step=function(e){if(c=e,_())g();else{if(g(),0===c.data.length)return;i+=e.data.length,m.preview&&i>m.preview?o.abort():(c.data=c.data[0],p(c,t))}}}function y(e){return\"greedy\"===m.skipEmptyLines?\"\"===e.join(\"\").trim():1===e.length&&0===e[0].length}function g(){if(c&&h&&(k(\"Delimiter\",\"UndetectableDelimiter\",\"Unable to auto-detect delimiting character; defaulted to '\"+b.DefaultDelimiter+\"'\"),h=!1),m.skipEmptyLines)for(var e=0;e<c.data.length;e++)y(c.data[e])&&c.data.splice(e--,1);return _()&&function(){if(!c)return;function e(e,t){M(m.transformHeader)&&(e=m.transformHeader(e,t)),l.push(e)}if(Array.isArray(c.data[0])){for(var t=0;_()&&t<c.data.length;t++)c.data[t].forEach(e);c.data.splice(0,1)}else c.data.forEach(e)}(),function(){if(!c||!m.header&&!m.dynamicTyping&&!m.transform)return c;function e(e,t){var i,r=m.header?{}:[];for(i=0;i<e.length;i++){var n=i,s=e[i];m.header&&(n=i>=l.length?\"__parsed_extra\":l[i]),m.transform&&(s=m.transform(s,n)),s=v(n,s),\"__parsed_extra\"===n?(r[n]=r[n]||[],r[n].push(s)):r[n]=s}return m.header&&(i>l.length?k(\"FieldMismatch\",\"TooManyFields\",\"Too many fields: expected \"+l.length+\" fields but parsed \"+i,f+t):i<l.length&&k(\"FieldMismatch\",\"TooFewFields\",\"Too few fields: expected \"+l.length+\" fields but parsed \"+i,f+t)),r}var t=1;!c.data.length||Array.isArray(c.data[0])?(c.data=c.data.map(e),t=c.data.length):c.data=e(c.data,0);m.header&&c.meta&&(c.meta.fields=l);return f+=t,c}()}function _(){return m.header&&0===l.length}function v(e,t){return i=e,m.dynamicTypingFunction&&void 0===m.dynamicTyping[i]&&(m.dynamicTyping[i]=m.dynamicTypingFunction(i)),!0===(m.dynamicTyping[i]||m.dynamicTyping)?\"true\"===t||\"TRUE\"===t||\"false\"!==t&&\"FALSE\"!==t&&(function(e){if(s.test(e)){var t=parseFloat(e);if(n<t&&t<r)return!0}return!1}(t)?parseFloat(t):u.test(t)?new Date(t):\"\"===t?null:t):t;var i}function k(e,t,i,r){var n={type:e,code:t,message:i};void 0!==r&&(n.row=r),c.errors.push(n)}this.parse=function(e,t,i){var r=m.quoteChar||'\"';if(m.newline||(m.newline=function(e,t){e=e.substring(0,1048576);var i=new RegExp(j(t)+\"([^]*?)\"+j(t),\"gm\"),r=(e=e.replace(i,\"\")).split(\"\\r\"),n=e.split(\"\\n\"),s=1<n.length&&n[0].length<r[0].length;if(1===r.length||s)return\"\\n\";for(var a=0,o=0;o<r.length;o++)\"\\n\"===r[o][0]&&a++;return a>=r.length/2?\"\\r\\n\":\"\\r\"}(e,r)),h=!1,m.delimiter)M(m.delimiter)&&(m.delimiter=m.delimiter(e),c.meta.delimiter=m.delimiter);else{var n=function(e,t,i,r,n){var s,a,o,h;n=n||[\",\",\"\\t\",\"|\",\";\",b.RECORD_SEP,b.UNIT_SEP];for(var u=0;u<n.length;u++){var f=n[u],d=0,l=0,c=0;o=void 0;for(var p=new E({comments:r,delimiter:f,newline:t,preview:10}).parse(e),g=0;g<p.data.length;g++)if(i&&y(p.data[g]))c++;else{var _=p.data[g].length;l+=_,void 0!==o?0<_&&(d+=Math.abs(_-o),o=_):o=_}0<p.data.length&&(l/=p.data.length-c),(void 0===a||d<=a)&&(void 0===h||h<l)&&1.99<l&&(a=d,s=f,h=l)}return{successful:!!(m.delimiter=s),bestDelimiter:s}}(e,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess);n.successful?m.delimiter=n.bestDelimiter:(h=!0,m.delimiter=b.DefaultDelimiter),c.meta.delimiter=m.delimiter}var s=w(m);return m.preview&&m.header&&s.preview++,a=e,o=new E(s),c=o.parse(a,t,i),g(),d?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,o.abort(),a=M(m.chunk)?\"\":a.substring(o.getCharIndex())},this.resume=function(){t.streamer._halted?(d=!1,t.streamer.parseChunk(a,!0)):setTimeout(t.resume,3)},this.aborted=function(){return e},this.abort=function(){e=!0,o.abort(),c.meta.aborted=!0,M(m.complete)&&m.complete(c),a=\"\"}}function j(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")}function E(e){var S,O=(e=e||{}).delimiter,x=e.newline,I=e.comments,T=e.step,D=e.preview,A=e.fastMode,L=S=void 0===e.quoteChar?'\"':e.quoteChar;if(void 0!==e.escapeChar&&(L=e.escapeChar),(\"string\"!=typeof O||-1<b.BAD_DELIMITERS.indexOf(O))&&(O=\",\"),I===O)throw new Error(\"Comment character same as delimiter\");!0===I?I=\"#\":(\"string\"!=typeof I||-1<b.BAD_DELIMITERS.indexOf(I))&&(I=!1),\"\\n\"!==x&&\"\\r\"!==x&&\"\\r\\n\"!==x&&(x=\"\\n\");var F=0,z=!1;this.parse=function(r,t,i){if(\"string\"!=typeof r)throw new Error(\"Input must be a string\");var n=r.length,e=O.length,s=x.length,a=I.length,o=M(T),h=[],u=[],f=[],d=F=0;if(!r)return C();if(A||!1!==A&&-1===r.indexOf(S)){for(var l=r.split(x),c=0;c<l.length;c++){if(f=l[c],F+=f.length,c!==l.length-1)F+=x.length;else if(i)return C();if(!I||f.substring(0,a)!==I){if(o){if(h=[],k(f.split(O)),R(),z)return C()}else k(f.split(O));if(D&&D<=c)return h=h.slice(0,D),C(!0)}}return C()}for(var p=r.indexOf(O,F),g=r.indexOf(x,F),_=new RegExp(j(L)+j(S),\"g\"),m=r.indexOf(S,F);;)if(r[F]!==S)if(I&&0===f.length&&r.substring(F,F+a)===I){if(-1===g)return C();F=g+s,g=r.indexOf(x,F),p=r.indexOf(O,F)}else if(-1!==p&&(p<g||-1===g))f.push(r.substring(F,p)),F=p+e,p=r.indexOf(O,F);else{if(-1===g)break;if(f.push(r.substring(F,g)),w(g+s),o&&(R(),z))return C();if(D&&h.length>=D)return C(!0)}else for(m=F,F++;;){if(-1===(m=r.indexOf(S,m+1)))return i||u.push({type:\"Quotes\",code:\"MissingQuotes\",message:\"Quoted field unterminated\",row:h.length,index:F}),E();if(m===n-1)return E(r.substring(F,m).replace(_,S));if(S!==L||r[m+1]!==L){if(S===L||0===m||r[m-1]!==L){-1!==p&&p<m+1&&(p=r.indexOf(O,m+1)),-1!==g&&g<m+1&&(g=r.indexOf(x,m+1));var y=b(-1===g?p:Math.min(p,g));if(r[m+1+y]===O){f.push(r.substring(F,m).replace(_,S)),r[F=m+1+y+e]!==S&&(m=r.indexOf(S,F)),p=r.indexOf(O,F),g=r.indexOf(x,F);break}var v=b(g);if(r.substring(m+1+v,m+1+v+s)===x){if(f.push(r.substring(F,m).replace(_,S)),w(m+1+v+s),p=r.indexOf(O,F),m=r.indexOf(S,F),o&&(R(),z))return C();if(D&&h.length>=D)return C(!0);break}u.push({type:\"Quotes\",code:\"InvalidQuotes\",message:\"Trailing quote on quoted field is malformed\",row:h.length,index:F}),m++}}else m++}return E();function k(e){h.push(e),d=F}function b(e){var t=0;if(-1!==e){var i=r.substring(m+1,e);i&&\"\"===i.trim()&&(t=i.length)}return t}function E(e){return i||(void 0===e&&(e=r.substring(F)),f.push(e),F=n,k(f),o&&R()),C()}function w(e){F=e,k(f),f=[],g=r.indexOf(x,F)}function C(e){return{data:h,errors:u,meta:{delimiter:O,linebreak:x,aborted:z,truncated:!!e,cursor:d+(t||0)}}}function R(){T(C()),h=[],u=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return F}}function _(e){var t=e.data,i=a[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,m(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(M(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results}else M(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!r&&m(t.workerId,t.results)}function m(e,t){var i=a[e];M(i.userComplete)&&i.userComplete(t),i.terminate(),delete a[e]}function y(){throw new Error(\"Not implemented.\")}function w(e){if(\"object\"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var i in e)t[i]=w(e[i]);return t}function v(e,t){return function(){e.apply(t,arguments)}}function M(e){return\"function\"==typeof e}return o&&(f.onmessage=function(e){var t=e.data;void 0===b.WORKER_ID&&t&&(b.WORKER_ID=t.workerId);if(\"string\"==typeof t.input)f.postMessage({workerId:b.WORKER_ID,results:b.parse(t.input,t.config),finished:!0});else if(f.File&&t.input instanceof File||t.input instanceof Object){var i=b.parse(t.input,t.config);i&&f.postMessage({workerId:b.WORKER_ID,results:i,finished:!0})}}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,b});","module.exports = function(data, filename, mime) {\n    var blob = new Blob([data], {type: mime || 'application/octet-stream'});\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were \n        // revoked by closing the blob for which they were created. \n        // These URLs will no longer resolve as the data backing \n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    }\n    else {\n        var blobURL = window.URL.createObjectURL(blob);\n        var tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename); \n        \n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking \n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n        \n        document.body.appendChild(tempLink);\n        tempLink.click();\n        document.body.removeChild(tempLink);\n        window.URL.revokeObjectURL(blobURL);\n    }\n}\n","import {isInlineData} from 'vega-lite/build/src/data';\r\nimport {DATASET_RECEIVE} from '../actions/dataset';\r\n\r\n\r\nexport function constructLogString(inputLogs: Array<{action: {type: string, payload: any}, timestamp: number}>):\r\n  Array<{type: string, timestamp: number, ISOString: string, payload: string}> {\r\n  const outputLogs = [];\r\n  for (const inputLog of inputLogs) {\r\n    const type = inputLog.action.type;\r\n    let payload: any = inputLog.action.payload;\r\n    if (type === DATASET_RECEIVE && isInlineData(payload.data)) {\r\n      // don't output inline data because it might make the log file too big\r\n      payload = {\r\n        ...payload,\r\n        data: {name: 'source'}\r\n      };\r\n    }\r\n    outputLogs.push({\r\n      timestamp: inputLog.timestamp,\r\n      ISOString: new Date(inputLog.timestamp).toISOString(),\r\n      type,\r\n      payload: JSON.stringify(payload)\r\n    });\r\n  }\r\n  return outputLogs;\r\n};\r\n","// Imports to satisfy --declarations build requirements\r\n// https://github.com/Microsoft/TypeScript/issues/9944\r\n// tslint:disable:no-unused-variable\r\nimport {Store} from 'redux';\r\nimport {GenericState, UndoableStateBase} from '../models/index';\r\n// tslint:enable:no-unused-variable\r\n\r\nimport {applyMiddleware, compose, createStore, Middleware, StoreEnhancer} from 'redux';\r\nimport {createActionLog} from 'redux-action-log';\r\nimport {createLogger} from 'redux-logger';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport {DEFAULT_STATE, State} from '../models';\r\nimport {rootReducer} from '../reducers';\r\nimport {createQueryListener} from './listener';\r\n\r\nconst loggerMiddleware = createLogger({\r\n  collapsed: true,\r\n  level: 'debug'\r\n});\r\n\r\n// define which middleware to use depending on environment\r\nlet composeEnhancers = compose;\r\nconst middleware: Middleware[] = [thunkMiddleware];\r\n\r\n// when not in production enable redux tools and add logger middleware\r\nif (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test') {\r\n  composeEnhancers =\r\n    (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n  middleware.push(loggerMiddleware);\r\n}\r\n\r\nexport let actionLogs: any;\r\nexport function configureStore(initialState = DEFAULT_STATE) {\r\n  actionLogs = createActionLog({limit: null});\r\n\r\n  const store: Store<State> = createStore<State>(\r\n    rootReducer,\r\n    initialState,\r\n    composeEnhancers(applyMiddleware(...middleware), actionLogs.enhancer) as StoreEnhancer<any>\r\n    // HACK: cast to any to supress typescript complaint\r\n  );\r\n\r\n\r\n  if (module.hot) {\r\n    // Enable webpack hot module replacement for reducers\r\n    module.hot.accept(\r\n      '../reducers', () => {\r\n        const nextRootReducer = require('../reducers').rootReducer;\r\n        store.replaceReducer(nextRootReducer);\r\n      }\r\n    );\r\n  }\r\n\r\n  store.subscribe(createQueryListener(store));\r\n  return store;\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__666__;","/* @flow */\n\nexport type RecordLogOptions = {\n  limit?: ?number;\n  snapshotInterval?: ?number;\n};\n\nexport type Log = {\n  initialState: any;\n  skipped: number;\n  actions: Array<ActionEntry>;\n};\n\nexport type ActionEntry = {\n  action: any;\n  timestamp: number;\n};\n\ntype Chunk = {\n  state: any;\n  actions: Array<ActionEntry>;\n};\n\nexport function createActionLog(options: RecordLogOptions) {\n  const {snapshotInterval=20} = options;\n  let {limit=200} = options;\n\n  let store;\n  let chunks: Chunk[] = [];\n  let skipped = 0;\n\n  function countActionsInChunks() {\n    return (chunks.length-1)*(snapshotInterval||0) +\n      chunks[chunks.length-1].actions.length;\n  }\n\n  function cull() {\n    if (limit == null || snapshotInterval == null) return;\n    const extraActionsCount = countActionsInChunks() - limit;\n    const firstNecessaryChunk = Math.floor(extraActionsCount/snapshotInterval);\n    if (firstNecessaryChunk > 0) {\n      chunks.splice(0, firstNecessaryChunk);\n      skipped += firstNecessaryChunk*snapshotInterval;\n    }\n  }\n\n  const enhancer = function(createStore: Function) {\n    return function(reducer: Function, initialState: any, enhancer?: Function) {\n      if (store) throw new Error('redux-action-log enhancer can not be re-used');\n      store = createStore(reducer, initialState, enhancer);\n      const {dispatch} = store;\n      chunks.push({\n        state: initialState,\n        actions: []\n      });\n      return {\n        ...store,\n        dispatch(action) {\n          const lastChunk = chunks[chunks.length-1];\n          const actionEntry = {action, timestamp: Date.now()};\n          if (lastChunk.actions.length === snapshotInterval) {\n            chunks.push({\n              state: store.getState(),\n              actions: [actionEntry]\n            });\n          } else {\n            lastChunk.actions.push(actionEntry);\n          }\n          cull();\n          return dispatch(action);\n        }\n      };\n    };\n  };\n\n  return {\n    enhancer,\n    setLimit(n: ?number) {\n      limit = n;\n      cull();\n    },\n    getLog(): Log {\n      return {\n        initialState: chunks[0].state,\n        skipped,\n        actions: [].concat(...chunks.map(c => c.actions))\n      };\n    },\n    clear() {\n      skipped += countActionsInChunks();\n      chunks = [{\n        state: store.getState(),\n        actions: []\n      }];\n    }\n  };\n}\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t(e.reduxLogger=e.reduxLogger||{})}(this,function(e){\"use strict\";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,\"kind\",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,\"path\",{value:t,enumerable:!0})}function n(e,t,r){n.super_.call(this,\"E\",e),Object.defineProperty(this,\"lhs\",{value:t,enumerable:!0}),Object.defineProperty(this,\"rhs\",{value:r,enumerable:!0})}function o(e,t){o.super_.call(this,\"N\",e),Object.defineProperty(this,\"rhs\",{value:t,enumerable:!0})}function i(e,t){i.super_.call(this,\"D\",e),Object.defineProperty(this,\"lhs\",{value:t,enumerable:!0})}function a(e,t,r){a.super_.call(this,\"A\",e),Object.defineProperty(this,\"index\",{value:t,enumerable:!0}),Object.defineProperty(this,\"item\",{value:r,enumerable:!0})}function f(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function u(e){var t=\"undefined\"==typeof e?\"undefined\":N(e);return\"object\"!==t?t:e===Math?\"math\":null===e?\"null\":Array.isArray(e)?\"array\":\"[object Date]\"===Object.prototype.toString.call(e)?\"date\":\"function\"==typeof e.toString&&/^\\/.*\\//.test(e.toString())?\"regexp\":\"object\"}function l(e,t,r,c,s,d,p){s=s||[],p=p||[];var g=s.slice(0);if(\"undefined\"!=typeof d){if(c){if(\"function\"==typeof c&&c(g,d))return;if(\"object\"===(\"undefined\"==typeof c?\"undefined\":N(c))){if(c.prefilter&&c.prefilter(g,d))return;if(c.normalize){var h=c.normalize(g,d,e,t);h&&(e=h[0],t=h[1])}}}g.push(d)}\"regexp\"===u(e)&&\"regexp\"===u(t)&&(e=e.toString(),t=t.toString());var y=\"undefined\"==typeof e?\"undefined\":N(e),v=\"undefined\"==typeof t?\"undefined\":N(t),b=\"undefined\"!==y||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(d),m=\"undefined\"!==v||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(d);if(!b&&m)r(new o(g,t));else if(!m&&b)r(new i(g,e));else if(u(e)!==u(t))r(new n(g,e,t));else if(\"date\"===u(e)&&e-t!==0)r(new n(g,e,t));else if(\"object\"===y&&null!==e&&null!==t)if(p.filter(function(t){return t.lhs===e}).length)e!==t&&r(new n(g,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var w;e.length;for(w=0;w<e.length;w++)w>=t.length?r(new a(g,w,new i(void 0,e[w]))):l(e[w],t[w],r,c,g,w,p);for(;w<t.length;)r(new a(g,w,new o(void 0,t[w++])))}else{var x=Object.keys(e),S=Object.keys(t);x.forEach(function(n,o){var i=S.indexOf(n);i>=0?(l(e[n],t[n],r,c,g,n,p),S=f(S,i)):l(e[n],void 0,r,c,g,n,p)}),S.forEach(function(e){l(void 0,t[e],r,c,g,e,p)})}p.length=p.length-1}else e!==t&&(\"number\"===y&&isNaN(e)&&isNaN(t)||r(new n(g,e,t)))}function c(e,t,r,n){return n=n||[],l(e,t,function(e){e&&n.push(e)},r),n.length?n:void 0}function s(e,t,r){if(r.path&&r.path.length){var n,o=e[t],i=r.path.length-1;for(n=0;n<i;n++)o=o[r.path[n]];switch(r.kind){case\"A\":s(o[r.path[n]],r.index,r.item);break;case\"D\":delete o[r.path[n]];break;case\"E\":case\"N\":o[r.path[n]]=r.rhs}}else switch(r.kind){case\"A\":s(e[t],r.index,r.item);break;case\"D\":e=f(e,t);break;case\"E\":case\"N\":e[t]=r.rhs}return e}function d(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,o=-1,i=r.path?r.path.length-1:0;++o<i;)\"undefined\"==typeof n[r.path[o]]&&(n[r.path[o]]=\"number\"==typeof r.path[o]?[]:{}),n=n[r.path[o]];switch(r.kind){case\"A\":s(r.path?n[r.path[o]]:n,r.index,r.item);break;case\"D\":delete n[r.path[o]];break;case\"E\":case\"N\":n[r.path[o]]=r.rhs}}}function p(e,t,r){if(r.path&&r.path.length){var n,o=e[t],i=r.path.length-1;for(n=0;n<i;n++)o=o[r.path[n]];switch(r.kind){case\"A\":p(o[r.path[n]],r.index,r.item);break;case\"D\":o[r.path[n]]=r.lhs;break;case\"E\":o[r.path[n]]=r.lhs;break;case\"N\":delete o[r.path[n]]}}else switch(r.kind){case\"A\":p(e[t],r.index,r.item);break;case\"D\":e[t]=r.lhs;break;case\"E\":e[t]=r.lhs;break;case\"N\":e=f(e,t)}return e}function g(e,t,r){if(e&&t&&r&&r.kind){var n,o,i=e;for(o=r.path.length-1,n=0;n<o;n++)\"undefined\"==typeof i[r.path[n]]&&(i[r.path[n]]={}),i=i[r.path[n]];switch(r.kind){case\"A\":p(i[r.path[n]],r.index,r.item);break;case\"D\":i[r.path[n]]=r.lhs;break;case\"E\":i[r.path[n]]=r.lhs;break;case\"N\":delete i[r.path[n]]}}}function h(e,t,r){if(e&&t){var n=function(n){r&&!r(e,t,n)||d(e,t,n)};l(e,t,n)}}function y(e){return\"color: \"+F[e].color+\"; font-weight: bold\"}function v(e){var t=e.kind,r=e.path,n=e.lhs,o=e.rhs,i=e.index,a=e.item;switch(t){case\"E\":return[r.join(\".\"),n,\"\",o];case\"N\":return[r.join(\".\"),o];case\"D\":return[r.join(\".\")];case\"A\":return[r.join(\".\")+\"[\"+i+\"]\",a];default:return[]}}function b(e,t,r,n){var o=c(e,t);try{n?r.groupCollapsed(\"diff\"):r.group(\"diff\")}catch(e){r.log(\"diff\")}o?o.forEach(function(e){var t=e.kind,n=v(e);r.log.apply(r,[\"%c \"+F[t].text,y(t)].concat(P(n)))}):r.log(\" no diff \");try{r.groupEnd()}catch(e){r.log(\" diff end  \")}}function m(e,t,r,n){switch(\"undefined\"==typeof e?\"undefined\":N(e)){case\"object\":return\"function\"==typeof e[n]?e[n].apply(e,P(r)):e[n];case\"function\":return e(t);default:return e}}function w(e){var t=e.timestamp,r=e.duration;return function(e,n,o){var i=[\"action\"];return i.push(\"%c\"+String(e.type)),t&&i.push(\"%c@ \"+n),r&&i.push(\"%c(in \"+o.toFixed(2)+\" ms)\"),i.join(\" \")}}function x(e,t){var r=t.logger,n=t.actionTransformer,o=t.titleFormatter,i=void 0===o?w(t):o,a=t.collapsed,f=t.colors,u=t.level,l=t.diff,c=\"undefined\"==typeof t.titleFormatter;e.forEach(function(o,s){var d=o.started,p=o.startedTime,g=o.action,h=o.prevState,y=o.error,v=o.took,w=o.nextState,x=e[s+1];x&&(w=x.prevState,v=x.started-d);var S=n(g),k=\"function\"==typeof a?a(function(){return w},g,o):a,j=D(p),E=f.title?\"color: \"+f.title(S)+\";\":\"\",A=[\"color: gray; font-weight: lighter;\"];A.push(E),t.timestamp&&A.push(\"color: gray; font-weight: lighter;\"),t.duration&&A.push(\"color: gray; font-weight: lighter;\");var O=i(S,j,v);try{k?f.title&&c?r.groupCollapsed.apply(r,[\"%c \"+O].concat(A)):r.groupCollapsed(O):f.title&&c?r.group.apply(r,[\"%c \"+O].concat(A)):r.group(O)}catch(e){r.log(O)}var N=m(u,S,[h],\"prevState\"),P=m(u,S,[S],\"action\"),C=m(u,S,[y,h],\"error\"),F=m(u,S,[w],\"nextState\");if(N)if(f.prevState){var L=\"color: \"+f.prevState(h)+\"; font-weight: bold\";r[N](\"%c prev state\",L,h)}else r[N](\"prev state\",h);if(P)if(f.action){var T=\"color: \"+f.action(S)+\"; font-weight: bold\";r[P](\"%c action    \",T,S)}else r[P](\"action    \",S);if(y&&C)if(f.error){var M=\"color: \"+f.error(y,h)+\"; font-weight: bold;\";r[C](\"%c error     \",M,y)}else r[C](\"error     \",y);if(F)if(f.nextState){var _=\"color: \"+f.nextState(w)+\"; font-weight: bold\";r[F](\"%c next state\",_,w)}else r[F](\"next state\",w);l&&b(h,w,r,k);try{r.groupEnd()}catch(e){r.log(\" log end \")}})}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},L,e),r=t.logger,n=t.stateTransformer,o=t.errorTransformer,i=t.predicate,a=t.logErrors,f=t.diffPredicate;if(\"undefined\"==typeof r)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error(\"[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\\n// Logger with default options\\nimport { logger } from 'redux-logger'\\nconst store = createStore(\\n  reducer,\\n  applyMiddleware(logger)\\n)\\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\\nimport createLogger from 'redux-logger'\\nconst logger = createLogger({\\n  // ...options\\n});\\nconst store = createStore(\\n  reducer,\\n  applyMiddleware(logger)\\n)\\n\"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var r=e.getState;return function(e){return function(l){if(\"function\"==typeof i&&!i(r,l))return e(l);var c={};u.push(c),c.started=O.now(),c.startedTime=new Date,c.prevState=n(r()),c.action=l;var s=void 0;if(a)try{s=e(l)}catch(e){c.error=o(e)}else s=e(l);c.took=O.now()-c.started,c.nextState=n(r());var d=t.diff&&\"function\"==typeof f?f(r,l):t.diff;if(x(u,Object.assign({},t,{diff:d})),u.length=0,c.error)throw c.error;return s}}}}var k,j,E=function(e,t){return new Array(t+1).join(e)},A=function(e,t){return E(\"0\",t-e.toString().length)+e},D=function(e){return A(e.getHours(),2)+\":\"+A(e.getMinutes(),2)+\":\"+A(e.getSeconds(),2)+\".\"+A(e.getMilliseconds(),3)},O=\"undefined\"!=typeof performance&&null!==performance&&\"function\"==typeof performance.now?performance:Date,N=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},P=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},C=[];k=\"object\"===(\"undefined\"==typeof global?\"undefined\":N(global))&&global?global:\"undefined\"!=typeof window?window:{},j=k.DeepDiff,j&&C.push(function(){\"undefined\"!=typeof j&&k.DeepDiff===c&&(k.DeepDiff=j,j=void 0)}),t(n,r),t(o,r),t(i,r),t(a,r),Object.defineProperties(c,{diff:{value:c,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:h,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:g,enumerable:!0},isConflict:{value:function(){return\"undefined\"!=typeof j},enumerable:!0},noConflict:{value:function(){return C&&(C.forEach(function(e){e()}),C=null),c},enumerable:!0}});var F={E:{color:\"#2196F3\",text:\"CHANGED:\"},N:{color:\"#4CAF50\",text:\"ADDED:\"},D:{color:\"#F44336\",text:\"DELETED:\"},A:{color:\"#2196F3\",text:\"ARRAY:\"}},L={level:\"log\",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return\"inherit\"},prevState:function(){return\"#9E9E9E\"},action:function(){return\"#03A9F4\"},nextState:function(){return\"#4CAF50\"},error:function(){return\"#F20404\"}},diff:!1,diffPredicate:void 0,transformer:void 0},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,r=e.getState;return\"function\"==typeof t||\"function\"==typeof r?S()({dispatch:t,getState:r}):void console.error(\"\\n[redux-logger v3] BREAKING CHANGE\\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\\n[redux-logger v3] Change\\n[redux-logger v3] import createLogger from 'redux-logger'\\n[redux-logger v3] to\\n[redux-logger v3] import { createLogger } from 'redux-logger'\\n\")};e.defaults=L,e.createLogger=S,e.logger=T,e.default=T,Object.defineProperty(e,\"__esModule\",{value:!0})});\n","module.exports = __WEBPACK_EXTERNAL_MODULE__669__;","import {FieldSchema, Schema, TableSchema} from 'compassql/build/src/schema';\r\nimport {StateWithHistory} from 'redux-undo';\r\nimport {Bookmark, DEFAULT_BOOKMARK} from './bookmark';\r\nimport {DEFAULT_VOYAGER_CONFIG, VoyagerConfig} from './config';\r\nimport {CustomWildcardField, DEFAULT_CUSTOM_WILDCARD_FIELDS} from './custom-wildcard-field';\r\nimport {Dataset, DatasetWithoutSchema, DEFAULT_DATASET} from './dataset';\r\nimport {DEFAULT_LOG, Log} from './log';\r\nimport {DEFAULT_RELATED_VIEWS, RelatedViews} from './related-views';\r\nimport {DEFAULT_SHELF_PREVIEW, ShelfPreview} from './shelf-preview';\r\nimport {DEFAULT_TAB, Tab} from './tab';\r\n\r\nexport * from './bookmark';\r\nexport * from './dataset';\r\nexport * from './shelf';\r\nexport * from './result';\r\nexport * from './config';\r\nexport * from './tab';\r\n\r\n/**\r\n * Application state.\r\n */\r\nexport interface PersistentState {\r\n  bookmark: Bookmark;\r\n  config: VoyagerConfig;\r\n  log: Log;\r\n  relatedViews: RelatedViews;\r\n  shelfPreview: ShelfPreview;\r\n}\r\n\r\nexport interface UndoableStateBaseWithoutDataset {\r\n  customWildcardFields: CustomWildcardField[];\r\n  tab: Tab;\r\n}\r\n\r\nexport interface UndoableStateBase extends UndoableStateBaseWithoutDataset {\r\n  dataset: Dataset;\r\n}\r\n\r\n/**\r\n * Application state (wrapped with redux-undo's StateWithHistory interface).\r\n */\r\nexport interface GenericState<U extends UndoableStateBase> {\r\n  persistent: PersistentState;\r\n  undoable: StateWithHistory<U>;\r\n};\r\n\r\nexport type State = GenericState<UndoableStateBase>;\r\n\r\nexport const DEFAULT_UNDOABLE_STATE_BASE: UndoableStateBase = {\r\n  customWildcardFields: DEFAULT_CUSTOM_WILDCARD_FIELDS,\r\n  dataset: DEFAULT_DATASET,\r\n  tab: DEFAULT_TAB,\r\n};\r\n\r\nexport const DEFAULT_UNDOABLE_STATE: StateWithHistory<UndoableStateBase> = {\r\n  past: [],\r\n  present: DEFAULT_UNDOABLE_STATE_BASE,\r\n  future: [],\r\n  _latestUnfiltered: null,\r\n  group: null,\r\n  index: null,\r\n  limit: 30\r\n};\r\n\r\nexport const DEFAULT_PERSISTENT_STATE: PersistentState = {\r\n  bookmark: DEFAULT_BOOKMARK,\r\n  config: DEFAULT_VOYAGER_CONFIG,\r\n  log: DEFAULT_LOG,\r\n  relatedViews: DEFAULT_RELATED_VIEWS,\r\n  shelfPreview: DEFAULT_SHELF_PREVIEW\r\n};\r\n\r\nexport const DEFAULT_STATE: State = {\r\n  persistent: DEFAULT_PERSISTENT_STATE,\r\n  undoable: DEFAULT_UNDOABLE_STATE\r\n};\r\n\r\nexport interface SerializableState extends PersistentState, UndoableStateBaseWithoutDataset {\r\n  dataset: DatasetWithoutSchema;\r\n  tableschema: TableSchema<FieldSchema>;\r\n}\r\n\r\nexport function toSerializable(state: Readonly<State>): SerializableState {\r\n  const {dataset, ...undoableStateBaseWithoutDataset} = state.undoable.present;\r\n  const {schema, ...datasetWithoutSchema} = dataset;\r\n\r\n  return {\r\n    ...state.persistent,\r\n    ...undoableStateBaseWithoutDataset,\r\n    dataset: datasetWithoutSchema,\r\n    tableschema: schema.tableSchema(),\r\n  };\r\n}\r\n\r\nexport function fromSerializable(serializable: SerializableState): Readonly<State> {\r\n  const {\r\n    // Data\r\n    dataset: datasetWithoutSchema,\r\n    tableschema,\r\n    // Persistent\r\n    bookmark,\r\n    config,\r\n    log,\r\n    relatedViews,\r\n    shelfPreview,\r\n    // Then the rest should be UndoableStateBaseWithoutDataset\r\n    ...undoableStateBaseWithoutDataset\r\n  } = serializable;\r\n\r\n  const persistent: PersistentState = {bookmark, config, relatedViews, shelfPreview, log};\r\n\r\n  const undoableBase: UndoableStateBase = {\r\n    ...undoableStateBaseWithoutDataset,\r\n    dataset: {\r\n      ...datasetWithoutSchema,\r\n      schema : new Schema(serializable.tableschema)\r\n    }\r\n  };\r\n\r\n  return {\r\n    persistent,\r\n    undoable: {\r\n      ...DEFAULT_UNDOABLE_STATE,\r\n      present: undoableBase\r\n    }\r\n  };\r\n}\r\n","import {ResultPlot} from '../models/result';\r\n\r\nexport interface BookmarkItem {\r\n  plot: ResultPlot;\r\n  note: string;\r\n}\r\n\r\nexport interface Bookmark {\r\n  dict: {[key: string]: BookmarkItem};\r\n  count: number;\r\n  list: string[];\r\n}\r\n\r\nexport const DEFAULT_BOOKMARK: Bookmark = {\r\n  dict: {},\r\n  count: 0,\r\n  list: []\r\n};\r\n","export interface VoyagerConfig {\r\n  showDataSourceSelector?: boolean;\r\n  serverUrl?: string | null;\r\n  hideHeader?: boolean;\r\n  hideFooter?: boolean;\r\n  relatedViews?: 'initiallyCollapsed' | 'initiallyShown' | 'disabled';\r\n  wildcards?: 'enabled' | 'disabled';\r\n};\r\n\r\nexport const DEFAULT_VOYAGER_CONFIG: VoyagerConfig = {\r\n  showDataSourceSelector: true,\r\n  serverUrl: null,\r\n  hideHeader: false,\r\n  hideFooter: false,\r\n  relatedViews: 'initiallyShown',\r\n  wildcards: 'enabled'\r\n};\r\n","import {ShelfFieldDef} from './shelf/spec/encoding';\r\n\r\nexport type CustomWildcardField = {\r\n  fields: string[];\r\n} & Pick<ShelfFieldDef, 'type' | 'description'>;\r\n\r\nexport const DEFAULT_CUSTOM_WILDCARD_FIELDS: CustomWildcardField[] = [];\r\n","import {Schema} from 'compassql/build/src/schema';\r\nimport {InlineData} from 'vega-lite/build/src/data';\r\nexport {FieldSchema, Schema} from 'compassql/build/src/schema';\r\n\r\nexport interface DatasetWithoutSchema {\r\n  isLoading: boolean;\r\n\r\n  name: string;\r\n\r\n  data: InlineData;\r\n}\r\n\r\nexport interface Dataset extends DatasetWithoutSchema {\r\n  schema: Schema;\r\n}\r\n\r\nexport const DEFAULT_DATASET: Dataset = {\r\n  isLoading: false,\r\n  name: 'Empty',\r\n  schema: new Schema({fields: []}),\r\n  data: null\r\n};\r\n","export type WarningLevel = 'warn' | 'debug' | 'info';\r\n\r\nexport interface Log {\r\n  errors: string[];\r\n  warnings: {\r\n    warn: string[],\r\n    info: string[],\r\n    debug: string[]\r\n  };\r\n};\r\n\r\nexport const DEFAULT_LOG: Log = {\r\n  errors: [],\r\n  warnings: {\r\n    warn: [],\r\n    info: [],\r\n    debug: []\r\n  }\r\n};\r\n","export interface RelatedViews {\r\n  isCollapsed: boolean;\r\n};\r\n\r\nexport const DEFAULT_RELATED_VIEWS: RelatedViews = {\r\n  isCollapsed: undefined\r\n};\r\n\r\n","import {ShelfUnitSpec} from './shelf/spec';\r\n\r\nexport interface ShelfPreview {\r\n  spec: ShelfUnitSpec;\r\n};\r\n\r\nexport const DEFAULT_SHELF_PREVIEW: ShelfPreview = {\r\n  spec: null\r\n};\r\n","import {DEFAULT_RESULT_INDEX, ResultIndex} from './result';\r\nimport {DEFAULT_SHELF, Shelf} from './shelf';\r\n\r\nexport const DEFAULT_TAB_TITLE = 'untitled';\r\n\r\nexport interface PlotTabState {\r\n  title: string;\r\n  shelf: Shelf;\r\n  result: ResultIndex;\r\n}\r\n\r\nexport const DEFAULT_PLOT_TAB_STATE = {\r\n  title: DEFAULT_TAB_TITLE,\r\n  shelf: DEFAULT_SHELF,\r\n  result: DEFAULT_RESULT_INDEX\r\n};\r\n\r\nexport interface Tab {\r\n  activeTabID: number;\r\n  list: PlotTabState[];\r\n}\r\n\r\nexport const DEFAULT_ACTIVE_TAB_ID = 0;\r\n\r\nexport const DEFAULT_TAB = {\r\n  activeTabID: DEFAULT_ACTIVE_TAB_ID,\r\n  list: [DEFAULT_PLOT_TAB_STATE]\r\n};\r\n","import undoable, {excludeAction, StateWithHistory} from 'redux-undo';\r\nimport {toSet} from 'vega-util';\r\n\r\nimport {Action, REDO, UNDO} from '../actions';\r\nimport {HISTORY_LIMIT} from '../constants';\r\nimport {DEFAULT_STATE, DEFAULT_UNDOABLE_STATE_BASE, PlotTabState} from '../models';\r\n\r\nimport {SET_CONFIG} from '../actions/config';\r\n\r\n// tslint:disable:no-unused-variable\r\nimport {Action as BaseReduxAction, combineReducers, Reducer} from 'redux';\r\nimport {GenericState} from '../models';\r\n// tslint:enable:no-unused-variable\r\n\r\nimport {\r\n  BOOKMARK_ADD_PLOT,\r\n  BOOKMARK_CLEAR_ALL,\r\n  BOOKMARK_MODIFY_NOTE,\r\n  BOOKMARK_REMOVE_PLOT,\r\n  CUSTOM_WILDCARD_ADD,\r\n  CUSTOM_WILDCARD_ADD_FIELD,\r\n  CUSTOM_WILDCARD_REMOVE,\r\n  CUSTOM_WILDCARD_REMOVE_FIELD,\r\n  DATASET_RECEIVE,\r\n  DATASET_REQUEST,\r\n  DATASET_SCHEMA_CHANGE_FIELD_TYPE,\r\n  DATASET_SCHEMA_CHANGE_ORDINAL_DOMAIN,\r\n  FILTER_ADD,\r\n  FILTER_CLEAR,\r\n  FILTER_MODIFY_EXTENT,\r\n  FILTER_MODIFY_MAX_BOUND,\r\n  FILTER_MODIFY_MIN_BOUND,\r\n  FILTER_MODIFY_ONE_OF,\r\n  FILTER_MODIFY_TIME_UNIT,\r\n  FILTER_REMOVE,\r\n  FILTER_TOGGLE,\r\n  RESULT_RECEIVE,\r\n  RESULT_REQUEST,\r\n  SET_APPLICATION_STATE,\r\n  SHELF_LOAD_QUERY,\r\n  SHELF_PREVIEW_DISABLE,\r\n  SHELF_PREVIEW_SPEC,\r\n  SPEC_CLEAR,\r\n  SPEC_FIELD_ADD,\r\n  SPEC_FIELD_AUTO_ADD,\r\n  SPEC_FIELD_MOVE,\r\n  SPEC_FIELD_REMOVE,\r\n  SPEC_FUNCTION_ADD_WILDCARD,\r\n  SPEC_FUNCTION_CHANGE,\r\n  SPEC_FUNCTION_DISABLE_WILDCARD,\r\n  SPEC_FUNCTION_ENABLE_WILDCARD,\r\n  SPEC_FUNCTION_REMOVE_WILDCARD,\r\n  SPEC_LOAD,\r\n  SPEC_MARK_CHANGE_TYPE,\r\n  SPEC_VALUE_CHANGE,\r\n  TAB_ADD,\r\n  TAB_REMOVE,\r\n  TAB_SWITCH,\r\n  TAB_TITLE_UPDATE\r\n} from '../actions';\r\n\r\nimport {ActionType} from '../actions';\r\nimport {CUSTOM_WILDCARD_MODIFY_DESCRIPTION} from '../actions/custom-wildcard-field';\r\nimport {LOG_ERRORS_ADD, LOG_ERRORS_CLEAR, LOG_WARNINGS_ADD, LOG_WARNINGS_CLEAR} from '../actions/log';\r\nimport {RELATED_VIEWS_HIDE_TOGGLE} from '../actions/related-views';\r\nimport {RESET} from '../actions/reset';\r\nimport {RESULT_LIMIT_INCREASE, RESULT_MODIFY_FIELD_PROP, RESULT_MODIFY_NESTED_FIELD_PROP} from '../actions/result';\r\nimport {SHELF_PREVIEW_QUERY} from '../actions/shelf-preview';\r\nimport {SHELF_AUTO_ADD_COUNT_CHANGE, SHELF_GROUP_BY_CHANGE} from '../actions/shelf/index';\r\nimport {SPEC_FIELD_NESTED_PROP_CHANGE, SPEC_FIELD_PROP_CHANGE} from '../actions/shelf/spec';\r\nimport {\r\n  DEFAULT_PERSISTENT_STATE,\r\n  PersistentState,\r\n  State,\r\n  UndoableStateBase\r\n} from '../models/index';\r\nimport {bookmarkReducer} from './bookmark';\r\nimport {configReducer} from './config';\r\nimport {customWildcardFieldReducer} from './custom-wildcard-field';\r\nimport {datasetReducer} from './dataset';\r\nimport {logReducer} from './log';\r\nimport {relatedViewsReducer} from './related-views';\r\nimport {makeResetReducer, ResetIndex} from './reset';\r\nimport {shelfPreviewReducer} from './shelf-preview';\r\nimport {shelfSpecFieldAutoAddReducer} from './shelf/spec';\r\nimport {stateReducer} from './state';\r\nimport {tabReducer} from './tab';\r\n\r\nimport {modifyItemInArray} from './util';\r\n\r\n/**\r\n * Whether to reset a particular property of the persistent state during RESET action\r\n */\r\nconst persistentStateToReset: ResetIndex<PersistentState> = {\r\n  bookmark: true,\r\n  config: false,\r\n  log: false,\r\n  relatedViews: true,\r\n  shelfPreview: true\r\n};\r\n\r\nexport const persistentReducer = makeResetReducer(\r\n  combineReducers<PersistentState>({\r\n    bookmark: bookmarkReducer,\r\n    config: configReducer,\r\n    relatedViews: relatedViewsReducer,\r\n    log: logReducer,\r\n    shelfPreview: shelfPreviewReducer\r\n  }),\r\n  persistentStateToReset,\r\n  DEFAULT_PERSISTENT_STATE\r\n);\r\n\r\n/**\r\n * Exclude these actions from the history completely.\r\n */\r\nexport const ACTIONS_EXCLUDED_FROM_HISTORY: ActionType[] = [\r\n  // Bookmark Actions\r\n  BOOKMARK_ADD_PLOT,\r\n  BOOKMARK_CLEAR_ALL,\r\n  BOOKMARK_MODIFY_NOTE,\r\n  BOOKMARK_REMOVE_PLOT,\r\n\r\n  // Log Actions\r\n  LOG_ERRORS_ADD,\r\n  LOG_ERRORS_CLEAR,\r\n  LOG_WARNINGS_ADD,\r\n  LOG_WARNINGS_CLEAR,\r\n\r\n  // These actions are automatically re-triggered by some of the shelf components after\r\n  // every state change. Including UNDO/REDO.\r\n  RESULT_RECEIVE,\r\n  RESULT_REQUEST,\r\n  // These actions are not (at least at the moment) trigerrable from a user action.\r\n  // They are either initialization options or triggered by an api call when embedding voyager.\r\n  SET_CONFIG,\r\n\r\n  // Preview Action should not be a part of the undo stack\r\n  SHELF_PREVIEW_SPEC,\r\n  SHELF_PREVIEW_QUERY,\r\n  SHELF_PREVIEW_DISABLE,\r\n\r\n  // Undo and Redo actions will not be put in the history, but listing them here\r\n  // allows to check that every action is put in one of these lists.\r\n  UNDO,\r\n  REDO,\r\n  // Reset app state completely\r\n  RESET,\r\n  SET_APPLICATION_STATE,\r\n];\r\n\r\n/**\r\n * A list of actions that can be initiated by a user.\r\n *\r\n * Each of these will start a new 'undo group'. Non-user actions will be put into the group\r\n * of the preceding user action if one is available. If none is available it will be put\r\n * into its own group.\r\n */\r\nexport const USER_ACTIONS: ActionType[] = [\r\n  // Custom Wildcard Actions\r\n  CUSTOM_WILDCARD_ADD,\r\n  CUSTOM_WILDCARD_ADD_FIELD,\r\n  CUSTOM_WILDCARD_MODIFY_DESCRIPTION,\r\n  CUSTOM_WILDCARD_REMOVE,\r\n  CUSTOM_WILDCARD_REMOVE_FIELD,\r\n\r\n  // Dataset Actions\r\n  DATASET_SCHEMA_CHANGE_FIELD_TYPE,\r\n  DATASET_SCHEMA_CHANGE_ORDINAL_DOMAIN,\r\n  DATASET_REQUEST,\r\n  // Filter Actions\r\n  FILTER_ADD,\r\n  FILTER_CLEAR,\r\n  FILTER_MODIFY_EXTENT,\r\n  FILTER_MODIFY_MAX_BOUND,\r\n  FILTER_MODIFY_MIN_BOUND,\r\n  FILTER_MODIFY_ONE_OF,\r\n  FILTER_MODIFY_TIME_UNIT,\r\n  FILTER_REMOVE,\r\n  FILTER_TOGGLE,\r\n\r\n  // Toggle Related View Actions\r\n  RELATED_VIEWS_HIDE_TOGGLE,\r\n\r\n  // Result Actions,\r\n  RESULT_LIMIT_INCREASE,\r\n  RESULT_MODIFY_FIELD_PROP,\r\n  RESULT_MODIFY_NESTED_FIELD_PROP,\r\n\r\n  // Shelf Actions,\r\n  SHELF_AUTO_ADD_COUNT_CHANGE,\r\n  SHELF_GROUP_BY_CHANGE,\r\n  SHELF_LOAD_QUERY,\r\n\r\n  SPEC_CLEAR,\r\n  SPEC_MARK_CHANGE_TYPE,\r\n  SPEC_FIELD_ADD,\r\n  SPEC_FIELD_AUTO_ADD,\r\n  SPEC_FIELD_REMOVE,\r\n  SPEC_FIELD_MOVE,\r\n  SPEC_FIELD_PROP_CHANGE,\r\n  SPEC_FIELD_NESTED_PROP_CHANGE,\r\n\r\n  SPEC_FUNCTION_CHANGE,\r\n  SPEC_FUNCTION_ADD_WILDCARD,\r\n  SPEC_FUNCTION_DISABLE_WILDCARD,\r\n  SPEC_FUNCTION_ENABLE_WILDCARD,\r\n  SPEC_FUNCTION_REMOVE_WILDCARD,\r\n  SPEC_LOAD,\r\n  SPEC_VALUE_CHANGE,\r\n\r\n  // Tab Actions\r\n  TAB_ADD,\r\n  TAB_SWITCH,\r\n  TAB_REMOVE,\r\n  TAB_TITLE_UPDATE\r\n];\r\n\r\n\r\nexport const USER_ACTION_INDEX: Object = toSet(USER_ACTIONS);\r\n\r\n/**\r\n * Actions that are to be grouped with actions that precede them. (Usually for async actions.)\r\n */\r\n\r\nexport const GROUPED_ACTIONS: ActionType[] = [\r\n  DATASET_RECEIVE // Should be grouped with DATASET_REQUEST\r\n];\r\n\r\nlet _groupId = 0;\r\nfunction getNextGroupId(): number {\r\n  _groupId += 1;\r\n  return _groupId;\r\n}\r\n\r\nfunction groupAction(action: Action, currentState: UndoableStateBase,\r\n                     previousHistory: StateWithHistory<UndoableStateBase>): any {\r\n  const currentActionType = action.type;\r\n\r\n  if (USER_ACTION_INDEX[currentActionType]) {\r\n    const nextGroupID = currentActionType + getNextGroupId();\r\n    return nextGroupID;\r\n  } else {\r\n    const lastGroup = previousHistory.group;\r\n    return lastGroup;\r\n  }\r\n};\r\n\r\n/**\r\n * Whether to reset a particular property of the undoable state during RESET action\r\n */\r\nexport const undoableStateToReset: ResetIndex<UndoableStateBase> = {\r\n  customWildcardFields: true,\r\n  dataset: true,\r\n  tab: true\r\n};\r\n\r\nconst combinedUndoableReducer = combineReducers<UndoableStateBase>({\r\n  customWildcardFields: customWildcardFieldReducer,\r\n  dataset: datasetReducer,\r\n  tab: tabReducer,\r\n});\r\n\r\nexport const undoableReducerBase = makeResetReducer(\r\n  (state: Readonly<UndoableStateBase> = DEFAULT_UNDOABLE_STATE_BASE, action: Action): UndoableStateBase => {\r\n    switch (action.type) {\r\n      // SPEC_FIELD_AUTO_ADD is a special case that requires schema as a parameter\r\n      case SPEC_FIELD_AUTO_ADD:\r\n        return {\r\n          ...state,\r\n          tab: {\r\n            ...state.tab,\r\n            list: modifyItemInArray(state.tab.list,\r\n              state.tab.activeTabID,\r\n              (plotTabState: PlotTabState) => {\r\n                return {\r\n                  ...plotTabState,\r\n                  shelf: {\r\n                    ...plotTabState.shelf,\r\n                    spec: shelfSpecFieldAutoAddReducer(plotTabState.shelf.spec, action, state.dataset.schema)\r\n                  }\r\n                };\r\n              }\r\n            )\r\n          }\r\n        };\r\n    }\r\n\r\n    return combinedUndoableReducer(state, action);\r\n  },\r\n  undoableStateToReset,\r\n  DEFAULT_UNDOABLE_STATE_BASE\r\n);\r\n\r\nconst undoableReducer = undoable<UndoableStateBase>(undoableReducerBase, {\r\n  limit: HISTORY_LIMIT,\r\n  undoType: UNDO,\r\n  redoType: REDO,\r\n  groupBy: groupAction as any, // Typescript seems dumb about it\r\n  filter: excludeAction(ACTIONS_EXCLUDED_FROM_HISTORY),\r\n});\r\n\r\nconst rootBase = combineReducers<State>({\r\n  persistent: persistentReducer,\r\n  undoable: undoableReducer\r\n});\r\n\r\nexport function rootReducer(state: Readonly<State> = DEFAULT_STATE, action: Action) {\r\n  if (action.type === SET_APPLICATION_STATE) {\r\n    return stateReducer(state, action);\r\n  } else {\r\n    return rootBase(state, action);\r\n  }\r\n}\r\n","import {Action, BOOKMARK_ADD_PLOT, BOOKMARK_CLEAR_ALL, BOOKMARK_MODIFY_NOTE, BOOKMARK_REMOVE_PLOT} from '../actions';\r\nimport {Bookmark, DEFAULT_BOOKMARK} from '../models';\r\n\r\n\r\nexport function bookmarkReducer(bookmark: Bookmark = DEFAULT_BOOKMARK, action: Action): Bookmark {\r\n  const {count, dict, list} = bookmark;\r\n\r\n  switch (action.type) {\r\n    case BOOKMARK_ADD_PLOT: {\r\n      const {plot} = action.payload;\r\n      const specKey = JSON.stringify(plot.spec);\r\n\r\n      return {\r\n        dict: {\r\n          ...dict,\r\n          [specKey]: {\r\n            plot: plot,\r\n            note: '',\r\n          }\r\n        },\r\n        count: count + 1,\r\n        list: list.concat([specKey])\r\n      };\r\n    }\r\n\r\n    case BOOKMARK_MODIFY_NOTE: {\r\n      const {note, spec} = action.payload;\r\n      const specKey = JSON.stringify(spec);\r\n      return {\r\n        dict: {\r\n          ...dict,\r\n          [specKey]: {\r\n            ...dict[specKey],\r\n            note\r\n          }\r\n        },\r\n        count,\r\n        list\r\n      };\r\n    }\r\n\r\n    case BOOKMARK_REMOVE_PLOT: {\r\n      const {spec} = action.payload;\r\n\r\n      const specKey = JSON.stringify(spec);\r\n      const {[specKey]: _, ...newDict} = dict;\r\n      return {\r\n        dict: newDict,\r\n        count: count - 1,\r\n        list: list.filter(item => item !== specKey)\r\n      };\r\n    }\r\n\r\n    case BOOKMARK_CLEAR_ALL: {\r\n      return DEFAULT_BOOKMARK;\r\n    }\r\n  }\r\n\r\n  return bookmark;\r\n}\r\n","import {\r\n  Action,\r\n  SET_CONFIG,\r\n} from '../actions';\r\nimport {DEFAULT_VOYAGER_CONFIG, VoyagerConfig} from '../models/config';\r\n\r\nexport function configReducer(state: Readonly<VoyagerConfig> = DEFAULT_VOYAGER_CONFIG, action: Action): VoyagerConfig {\r\n  switch (action.type) {\r\n    case SET_CONFIG:\r\n      const {config} = action.payload;\r\n      const res = {\r\n        ...state,\r\n        ...config,\r\n      };\r\n      return res;\r\n  }\r\n  return state;\r\n}\r\n\r\n","\r\nimport {toMap} from 'compassql/build/src/util';\r\nimport {Action} from '../actions';\r\nimport {CUSTOM_WILDCARD_ADD, CUSTOM_WILDCARD_ADD_FIELD, CUSTOM_WILDCARD_MODIFY_DESCRIPTION,\r\n        CUSTOM_WILDCARD_REMOVE, CUSTOM_WILDCARD_REMOVE_FIELD} from '../actions/custom-wildcard-field';\r\nimport {CustomWildcardField} from '../models/custom-wildcard-field';\r\nimport {insertItemToArray, modifyItemInArray, removeItemFromArray} from './util';\r\n\r\nfunction modifyFieldsProperty(fields: string[]) {\r\n  return (customWildcardField: CustomWildcardField) => {\r\n    return {\r\n      ...customWildcardField,\r\n      fields\r\n    };\r\n  };\r\n}\r\n\r\nexport function customWildcardFieldReducer(\r\n  customWildcardFields: Readonly<CustomWildcardField[]> = [],\r\n  action: Action\r\n): Readonly<CustomWildcardField[]> {\r\n  switch (action.type) {\r\n    case CUSTOM_WILDCARD_ADD: {\r\n      const {fields, type} = action.payload;\r\n\r\n      let index = action.payload.index;\r\n      if (!index) {\r\n        index = customWildcardFields.length;\r\n      }\r\n\r\n      return insertItemToArray(customWildcardFields, index, {\r\n        fields,\r\n        type,\r\n        description: null\r\n      });\r\n    }\r\n\r\n    case CUSTOM_WILDCARD_REMOVE: {\r\n      const {index} = action.payload;\r\n      return removeItemFromArray(customWildcardFields, index).array;\r\n    }\r\n\r\n    case CUSTOM_WILDCARD_ADD_FIELD: {\r\n      const {index, fields} = action.payload;\r\n\r\n      const originalFields: string[] = customWildcardFields[index].fields;\r\n      const originalFieldsIndex = toMap(originalFields);\r\n      const addedFields: string[] = fields.filter(field => !originalFieldsIndex[field]);\r\n\r\n      if (addedFields.length > 0) {\r\n        return modifyItemInArray(customWildcardFields, index, modifyFieldsProperty(\r\n          originalFields.concat(addedFields)\r\n        ));\r\n      }\r\n\r\n      return customWildcardFields;\r\n    }\r\n\r\n    case CUSTOM_WILDCARD_REMOVE_FIELD: {\r\n      const {index, field} = action.payload;\r\n      const originalFields: string[] = customWildcardFields[index].fields;\r\n      const updatedFields = originalFields.filter(originalField => originalField !== field);\r\n\r\n      return modifyItemInArray(customWildcardFields, index, modifyFieldsProperty(updatedFields));\r\n    }\r\n\r\n    case CUSTOM_WILDCARD_MODIFY_DESCRIPTION: {\r\n      const {index, description} = action.payload;\r\n      const modifyTitle = (customWildcardField: CustomWildcardField) => {\r\n        return {\r\n          ...customWildcardField,\r\n          description\r\n        };\r\n      };\r\n      return modifyItemInArray(customWildcardFields, index, modifyTitle);\r\n    }\r\n  }\r\n\r\n  return customWildcardFields;\r\n}\r\n","import {\r\n  Action,\r\n  DATASET_RECEIVE,\r\n  DATASET_REQUEST,\r\n  DATASET_SCHEMA_CHANGE_FIELD_TYPE,\r\n  DATASET_SCHEMA_CHANGE_ORDINAL_DOMAIN,\r\n} from '../actions';\r\nimport {Dataset, DEFAULT_DATASET} from '../models';\r\n\r\nimport {ExpandedType} from 'compassql/build/src/query/expandedtype';\r\nimport {FieldSchema, Schema} from 'compassql/build/src/schema';\r\n\r\nexport function datasetReducer(dataset: Readonly<Dataset> = DEFAULT_DATASET, action: Action): Dataset {\r\n  switch (action.type) {\r\n    case DATASET_REQUEST: {\r\n      return {\r\n        ...dataset,\r\n        isLoading: true\r\n      };\r\n    }\r\n\r\n    case DATASET_RECEIVE: {\r\n      const { name, data, schema } = action.payload;\r\n      return {\r\n        ...dataset,\r\n        isLoading: false,\r\n        name,\r\n        schema,\r\n        data,\r\n      };\r\n    }\r\n  }\r\n\r\n  const schema = schemaReducer(dataset.schema, action);\r\n  if (dataset.schema !== schema) {\r\n    return {\r\n      ...dataset,\r\n      schema\r\n    };\r\n  } else {\r\n    return dataset;\r\n  }\r\n}\r\n\r\nexport function schemaReducer(schema = DEFAULT_DATASET.schema, action: Action): Schema {\r\n  switch (action.type) {\r\n    case DATASET_SCHEMA_CHANGE_FIELD_TYPE: {\r\n      const {field, type} = action.payload;\r\n      return changeFieldType(schema, field, type);\r\n    }\r\n\r\n    case DATASET_SCHEMA_CHANGE_ORDINAL_DOMAIN: {\r\n      const {field, domain} = action.payload;\r\n      return changeOrdinalDomain(schema, field, domain);\r\n    }\r\n  }\r\n\r\n  return schema;\r\n}\r\n\r\nfunction updateSchema(schema: Schema, field: string, changedFieldSchema: FieldSchema) {\r\n  const originalTableSchema = schema.tableSchema();\r\n  const updatedTableSchemaFields: FieldSchema[] = originalTableSchema.fields.map(fieldSchema => {\r\n    if (fieldSchema.name !== field) {\r\n      return fieldSchema;\r\n    }\r\n    return changedFieldSchema;\r\n  });\r\n\r\n  return new Schema({\r\n    ...originalTableSchema,\r\n    fields: updatedTableSchemaFields\r\n  });\r\n}\r\n\r\nexport function changeFieldType(schema: Schema, field: string, type: ExpandedType) {\r\n  return updateSchema(schema, field, {...schema.fieldSchema(field), vlType: type});\r\n}\r\n\r\nexport function changeOrdinalDomain(schema: Schema, field: string, domain: string[]) {\r\n  return updateSchema(schema, field, {...schema.fieldSchema(field), ordinalDomain: domain});\r\n}\r\n","import {contains} from 'vega-lite/build/src/util';\r\nimport {Action} from '../actions/index';\r\nimport {LOG_ERRORS_ADD, LOG_ERRORS_CLEAR, LOG_WARNINGS_ADD, LOG_WARNINGS_CLEAR} from '../actions/log';\r\nimport {isSpecAction} from '../actions/shelf/spec';\r\nimport {DEFAULT_LOG, Log, WarningLevel} from '../models/log';\r\n\r\n\r\nexport function logReducer(log: Log = DEFAULT_LOG, action: Action): Log {\r\n  if (isSpecAction(action)) {\r\n    return {\r\n      errors: [],\r\n      warnings: {\r\n        warn: [],\r\n        info: [],\r\n        debug: []\r\n      }\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case LOG_ERRORS_ADD:\r\n      const {errors} = action.payload;\r\n      const newUniqueErrors = errors.filter(error => !contains(log.errors, error));\r\n      if (newUniqueErrors) {\r\n        return {\r\n          ...log,\r\n          errors: log.errors.concat(newUniqueErrors)\r\n        };\r\n      }\r\n      return log;\r\n    case LOG_WARNINGS_ADD:\r\n      const {warnings, level} = action.payload;\r\n      return logWarningsInLevel(log, warnings, level);\r\n    case LOG_WARNINGS_CLEAR:\r\n      return {\r\n        ...log,\r\n        warnings: {\r\n          warn: [],\r\n          info: [],\r\n          debug: []\r\n        }\r\n      };\r\n    case LOG_ERRORS_CLEAR:\r\n      return {\r\n        ...log,\r\n        errors: []\r\n      };\r\n    default:\r\n      return log;\r\n  }\r\n}\r\n\r\nfunction logWarningsInLevel(log: Log, warnings: string[], level: WarningLevel): Log {\r\n  const preWarnings = log.warnings;\r\n  const newUniqueWarnings = warnings.filter(warning => !contains(preWarnings[level], warning));\r\n  if (newUniqueWarnings) {\r\n    return {\r\n      ...log,\r\n      warnings: {\r\n        ...preWarnings,\r\n        [level]: preWarnings[level].concat(newUniqueWarnings)\r\n      }\r\n    };\r\n  }\r\n  return log;\r\n}\r\n","import { Action } from '../actions/index';\r\nimport { RELATED_VIEWS_HIDE_TOGGLE } from '../actions/related-views';\r\nimport { DEFAULT_RELATED_VIEWS, RelatedViews } from '../models/related-views';\r\n\r\nexport function relatedViewsReducer(\r\n  relatedViewToggler: RelatedViews = DEFAULT_RELATED_VIEWS, action: Action): RelatedViews {\r\n  switch (action.type) {\r\n    case RELATED_VIEWS_HIDE_TOGGLE: {\r\n      const {newIsCollapsed} = action.payload;\r\n      return {\r\n        isCollapsed: newIsCollapsed\r\n      };\r\n    }\r\n  }\r\n\r\n  return relatedViewToggler;\r\n}\r\n","import {Reducer} from 'redux';\r\nimport {Action} from '../actions/index';\r\nimport {RESET} from '../actions/reset';\r\n\r\nexport type ResetIndex<T extends object> = {[K in keyof T]: boolean};\r\n\r\nexport function makeResetReducer<T extends object>(\r\n  r: Reducer<T>, resetIndex: ResetIndex<T>, defaultValue: T\r\n): Reducer<T> {\r\n\r\n  return (state: Readonly<T>, action: Action) => {\r\n    if (action.type === RESET) {\r\n      // Need to cast as object as TS somehow doesn't know that T extends object already\r\n      const newState = {...state as object} as T;\r\n      Object.keys(resetIndex).forEach((key: Extract<keyof T, string>) => {\r\n        newState[key] = defaultValue[key];\r\n      });\r\n      return newState;\r\n    } else {\r\n      return r(state, action);\r\n    }\r\n  };\r\n}\r\n","import {fromSpec} from 'compassql/build/src/query/spec';\r\nimport {Action} from '../actions/index';\r\nimport {SHELF_PREVIEW_DISABLE, SHELF_PREVIEW_QUERY, SHELF_PREVIEW_SPEC} from '../actions/shelf-preview';\r\nimport {SHELF_LOAD_QUERY} from '../actions/shelf/index';\r\nimport {SPEC_LOAD} from '../actions/shelf/spec';\r\nimport {DEFAULT_SHELF_PREVIEW, ShelfPreview} from '../models/shelf-preview';\r\nimport {fromSpecQuery} from '../models/shelf/spec';\r\n\r\n\r\nexport function shelfPreviewReducer(preview: ShelfPreview = DEFAULT_SHELF_PREVIEW,\r\n                                    action: Action): ShelfPreview {\r\n  switch (action.type) {\r\n    case SHELF_PREVIEW_QUERY:\r\n      const {query} = action.payload;\r\n      return {\r\n        spec: fromSpecQuery(query.spec)\r\n      };\r\n    case SHELF_PREVIEW_SPEC:\r\n      const {transform: _t, ...specWithoutTransform} = action.payload.spec;\r\n      const specQ = fromSpec(specWithoutTransform);\r\n      return {\r\n        spec: fromSpecQuery(specQ)\r\n      };\r\n\r\n    // Spec Loading should also clear shelf preview\r\n    case SPEC_LOAD:\r\n    case SHELF_LOAD_QUERY:\r\n    case SHELF_PREVIEW_DISABLE:\r\n      return {spec: null};\r\n  }\r\n  return preview;\r\n}\r\n","import {recommend} from 'compassql/build/src/recommend';\r\nimport {getTopResultTreeItem} from 'compassql/build/src/result';\r\nimport {Schema} from 'compassql/build/src/schema';\r\nimport {isWildcard, SHORT_WILDCARD} from 'compassql/build/src/wildcard';\r\nimport {FieldDef} from 'vega-lite/build/src/fielddef';\r\nimport {Action} from '../../actions';\r\nimport {\r\n  SPEC_CLEAR, SPEC_FIELD_ADD, SPEC_FIELD_MOVE,\r\n  SPEC_FIELD_REMOVE, SPEC_FUNCTION_CHANGE, SPEC_FUNCTION_ENABLE_WILDCARD, SPEC_MARK_CHANGE_TYPE, SPEC_VALUE_CHANGE\r\n} from '../../actions/shelf';\r\nimport {\r\n  SPEC_FUNCTION_ADD_WILDCARD, SPEC_FUNCTION_DISABLE_WILDCARD,\r\n  SPEC_FUNCTION_REMOVE_WILDCARD\r\n} from '../../actions/shelf';\r\nimport {SPEC_FIELD_NESTED_PROP_CHANGE, SPEC_FIELD_PROP_CHANGE, SpecFieldAutoAdd} from '../../actions/shelf/spec';\r\nimport {isWildcardChannelId} from '../../models';\r\nimport {ShelfAnyEncodingDef, ShelfFieldDef, ShelfId, ShelfUnitSpec} from '../../models/shelf';\r\nimport {sortFunctions} from '../../models/shelf';\r\nimport {autoAddFieldQuery} from '../../models/shelf';\r\nimport {DEFAULT_SHELF_UNIT_SPEC, fromSpecQuery} from '../../models/shelf/spec';\r\nimport {insertItemToArray, modifyItemInArray, removeItemFromArray} from '../util';\r\n\r\nexport function shelfSpecFieldAutoAddReducer(\r\n  shelfSpec: Readonly<ShelfUnitSpec>, action: SpecFieldAutoAdd, schema: Schema\r\n): ShelfUnitSpec {\r\n  const {fieldDef} = action.payload;\r\n\r\n  if (shelfSpec.anyEncodings.length > 0 || isWildcard(fieldDef.field)) {\r\n    // If there was an encoding shelf or if the field is a wildcard, just add to wildcard shelf\r\n    return {\r\n      ...shelfSpec,\r\n      anyEncodings: [\r\n        ...shelfSpec.anyEncodings,\r\n        {\r\n          channel: SHORT_WILDCARD,\r\n          ...fieldDef\r\n        }\r\n      ]\r\n    };\r\n  } else {\r\n    // Otherwise, query for the best encoding if there is no wildcard channel\r\n    const query = autoAddFieldQuery(shelfSpec, fieldDef);\r\n    const rec = recommend(query, schema);\r\n    const topSpecQuery = getTopResultTreeItem(rec.result).specQuery;\r\n\r\n    return {\r\n      ...fromSpecQuery(topSpecQuery, shelfSpec.config),\r\n      // retain auto-mark if mark is previously auto\r\n      ...(isWildcard(shelfSpec.mark) ? {mark: shelfSpec.mark} : {})\r\n    };\r\n  }\r\n}\r\n\r\nexport function shelfSpecReducer(\r\n  shelfSpec: Readonly<ShelfUnitSpec> = DEFAULT_SHELF_UNIT_SPEC,\r\n  action: Action\r\n): ShelfUnitSpec {\r\n  switch (action.type) {\r\n    case SPEC_CLEAR:\r\n      return DEFAULT_SHELF_UNIT_SPEC;\r\n\r\n    case SPEC_MARK_CHANGE_TYPE: {\r\n      const mark = action.payload;\r\n      return {\r\n        ...shelfSpec,\r\n        mark\r\n      };\r\n    }\r\n\r\n    case SPEC_FIELD_ADD: {\r\n      const {shelfId, fieldDef, replace} = action.payload;\r\n      return addEncoding(shelfSpec, shelfId, fieldDef, replace);\r\n    }\r\n\r\n    case SPEC_FIELD_REMOVE:\r\n      return removeEncoding(shelfSpec, action.payload).shelf;\r\n\r\n    case SPEC_FIELD_MOVE: {\r\n      const {to, from} = action.payload;\r\n\r\n      const {fieldDef: fieldDefFrom, shelf: removedShelf1} = removeEncoding(shelfSpec, from);\r\n      const {fieldDef: fieldDefTo, shelf: removedShelf2} = removeEncoding(removedShelf1, to);\r\n\r\n      const addedShelf1 = addEncoding(removedShelf2, to, fieldDefFrom, false);\r\n      const addedShelf2 = addEncoding(addedShelf1, from, fieldDefTo, false);\r\n\r\n      return addedShelf2;\r\n    }\r\n\r\n    case SPEC_FIELD_PROP_CHANGE: {\r\n      const {shelfId, prop, value} = action.payload;\r\n      return modifyEncoding(shelfSpec, shelfId, (fieldDef: Readonly<ShelfFieldDef | ShelfAnyEncodingDef>) => {\r\n        return modifyFieldProp(fieldDef, prop, value);\r\n      });\r\n    }\r\n\r\n    case SPEC_FIELD_NESTED_PROP_CHANGE: {\r\n      const {shelfId, prop, nestedProp, value} = action.payload;\r\n      return modifyEncoding(shelfSpec, shelfId, (fieldDef: Readonly<ShelfFieldDef | ShelfAnyEncodingDef>) => {\r\n        return modifyNestedFieldProp(fieldDef, prop, nestedProp, value);\r\n      });\r\n    }\r\n\r\n    case SPEC_FUNCTION_CHANGE: {\r\n      const {shelfId, fn} = action.payload;\r\n\r\n      return modifyEncoding(shelfSpec, shelfId, (fieldDef: Readonly<ShelfFieldDef | ShelfAnyEncodingDef>) => {\r\n        return {\r\n          ...fieldDef,\r\n          fn: fn\r\n        };\r\n      });\r\n    }\r\n\r\n    case SPEC_FUNCTION_ADD_WILDCARD: {\r\n      const {shelfId, fn} = action.payload;\r\n      return modifyEncoding(shelfSpec, shelfId, (fieldDef: Readonly<ShelfFieldDef | ShelfAnyEncodingDef>) => {\r\n        const {fn: oldFn, ...fieldDefWithoutFn} = fieldDef;\r\n\r\n        return {\r\n          ...fieldDefWithoutFn,\r\n          fn: {\r\n            enum: sortFunctions(oldFn['enum'].concat(fn))\r\n          }\r\n        };\r\n      });\r\n    }\r\n\r\n    case SPEC_FUNCTION_DISABLE_WILDCARD: {\r\n      const {shelfId} = action.payload;\r\n      return modifyEncoding(shelfSpec, shelfId, (fieldDef: Readonly<ShelfFieldDef | ShelfAnyEncodingDef>) => {\r\n        const {fn, ...fieldDefWithoutFn} = fieldDef;\r\n\r\n        if (isWildcard(fn)) {\r\n          return {\r\n            ...fieldDefWithoutFn,\r\n            ...fn.enum.length > 0 ? {fn: fn.enum[0]} : {}\r\n          };\r\n        } else {\r\n          throw Error('fn must be a wildcard to disable wildcard');\r\n        }\r\n      });\r\n    }\r\n\r\n    case SPEC_FUNCTION_ENABLE_WILDCARD: {\r\n      const {shelfId} = action.payload;\r\n      return modifyEncoding(shelfSpec, shelfId, (fieldDef: Readonly<ShelfFieldDef | ShelfAnyEncodingDef>) => {\r\n        const {fn, ...fieldDefWithoutFn} = fieldDef;\r\n        return {\r\n          ...fieldDefWithoutFn,\r\n          fn: {\r\n            enum: [fn]\r\n          }\r\n        };\r\n      });\r\n    }\r\n\r\n    case SPEC_FUNCTION_REMOVE_WILDCARD: {\r\n      const {shelfId, fn} = action.payload;\r\n      return modifyEncoding(shelfSpec, shelfId, (fieldDef: Readonly<ShelfFieldDef | ShelfAnyEncodingDef>) => {\r\n        const {fn: oldFn, ...fieldDefWithoutFn} = fieldDef;\r\n\r\n        if (isWildcard(oldFn)) {\r\n          return {\r\n            ...fieldDefWithoutFn,\r\n            fn: {\r\n              enum: oldFn.enum.filter(shelfFunc => shelfFunc !== fn)\r\n            }\r\n          };\r\n        } else {\r\n          throw Error('fn must be a wildcard to remove a wildcard');\r\n        }\r\n      });\r\n    }\r\n\r\n    case SPEC_VALUE_CHANGE: {\r\n      const {shelfId, valueDef} = action.payload;\r\n\r\n      if (isWildcardChannelId(shelfId)) {\r\n        throw Error('constant value cannot be assigned to a wildcard channel');\r\n      } else {\r\n        return {\r\n          ...shelfSpec,\r\n          encoding: {\r\n            ...shelfSpec.encoding,\r\n            [shelfId.channel as any]: {value: valueDef.value}\r\n          }\r\n        };\r\n      }\r\n    }\r\n  }\r\n  return shelfSpec;\r\n}\r\n\r\nfunction addEncoding(shelf: Readonly<ShelfUnitSpec>, shelfId: ShelfId, fieldDef: ShelfFieldDef, replace: boolean) {\r\n  if (!fieldDef) {\r\n    return shelf;\r\n  } else if (isWildcardChannelId(shelfId)) {\r\n    const index = shelfId.index;\r\n\r\n    if (replace && shelf.anyEncodings[index]) {\r\n      return {\r\n        ...shelf,\r\n        anyEncodings: modifyItemInArray<ShelfAnyEncodingDef>(shelf.anyEncodings, index, () => {\r\n          return {\r\n            channel: SHORT_WILDCARD,\r\n            ...fieldDef\r\n          };\r\n        })\r\n      };\r\n    }\r\n\r\n    // insert between two pills (not replace!)\r\n    return {\r\n      ...shelf,\r\n      anyEncodings: insertItemToArray<ShelfAnyEncodingDef>(shelf.anyEncodings, index, {\r\n        channel: SHORT_WILDCARD,\r\n        ...fieldDef\r\n      })\r\n    };\r\n  } else {\r\n    return {\r\n      ...shelf,\r\n      encoding: {\r\n        ...shelf.encoding,\r\n        [shelfId.channel]: fieldDef\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\ntype ShelfFieldDefModifier<T extends ShelfFieldDef> = (fieldDef: Readonly<T>) => T;\r\n\r\nfunction modifyEncoding(shelf: Readonly<ShelfUnitSpec>, shelfId: ShelfId, modifier: ShelfFieldDefModifier<any>) {\r\n  if (isWildcardChannelId(shelfId)) {\r\n    return {\r\n      ...shelf,\r\n      anyEncodings: modifyItemInArray<ShelfAnyEncodingDef>(shelf.anyEncodings, shelfId.index, modifier)\r\n    };\r\n  } else {\r\n    return {\r\n      ...shelf,\r\n      encoding: {\r\n        ...shelf.encoding,\r\n        [shelfId.channel]: modifier(shelf.encoding[shelfId.channel])\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\n\r\nfunction removeEncoding(shelf: Readonly<ShelfUnitSpec>, shelfId: ShelfId):\r\n  { fieldDef: ShelfFieldDef, shelf: Readonly<ShelfUnitSpec> } {\r\n\r\n  if (isWildcardChannelId(shelfId)) {\r\n    const index = shelfId.index;\r\n    const {array: anyEncodings, item} = removeItemFromArray(shelf.anyEncodings, index);\r\n\r\n    if (item) {\r\n      // Remove channel from the removed EncodingQuery if the removed shelf is not empty.\r\n      const {channel: _, ...fieldDef} = item;\r\n\r\n      return {\r\n        fieldDef,\r\n        shelf: {\r\n          ...shelf,\r\n          anyEncodings\r\n        }\r\n      };\r\n    } else {\r\n      return {\r\n        fieldDef: undefined,\r\n        shelf: {\r\n          ...shelf,\r\n          anyEncodings\r\n        }\r\n      };\r\n    }\r\n  } else {\r\n    const {[shelfId.channel]: fieldDef, ...encoding} = shelf.encoding;\r\n    return {\r\n      fieldDef,\r\n      shelf: {\r\n        ...shelf,\r\n        encoding: encoding\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nexport type AnyFieldDef = ShelfFieldDef | ShelfAnyEncodingDef | FieldDef<any>;\r\n\r\nexport function modifyFieldProp(\r\n  fieldDef: Readonly<AnyFieldDef>,\r\n  prop: keyof AnyFieldDef,\r\n  value: any\r\n): Readonly<AnyFieldDef> {\r\n  const {[prop]: _oldProp, ...fieldDefWithoutProp} = fieldDef;\r\n  return {\r\n    ...fieldDefWithoutProp,\r\n    ...(value !== undefined ? {[prop]: value} : {})\r\n  };\r\n}\r\n\r\nexport function modifyNestedFieldProp(\r\n  fieldDef: Readonly<AnyFieldDef>,\r\n  prop: keyof AnyFieldDef,\r\n  nestedProp: string,\r\n  value: any\r\n): Readonly<AnyFieldDef> {\r\n  const {[prop]: oldParent, ...fieldDefWithoutProp} = fieldDef;\r\n  const {[nestedProp]: _oldValue, ...parentWithoutNestedProp} = oldParent || {};\r\n  const parent = {\r\n    ...parentWithoutNestedProp,\r\n    ...(value !== undefined ? {[nestedProp]: value} : {})\r\n  };\r\n  return {\r\n    ...fieldDefWithoutProp,\r\n    ...(Object.keys(parent).length > 0 ? {[prop]: parent} : {})\r\n  };\r\n}\r\n","import {\r\n  Action,\r\n  SET_APPLICATION_STATE,\r\n} from '../actions';\r\nimport {DEFAULT_STATE, State} from '../models/index';\r\n\r\n/**\r\n * Reducer used to set the _entire_ application state tree.\r\n *\r\n * @export\r\n * @param {Readonly<State>} state\r\n * @param {Action} action\r\n * @returns {Readonly<State>}\r\n */\r\nexport function stateReducer(state: Readonly<State> = DEFAULT_STATE, action: Action): Readonly<State> {\r\n  switch (action.type) {\r\n    case SET_APPLICATION_STATE:\r\n      return action.payload.state;\r\n  }\r\n  return state;\r\n}\r\n\r\n","import {combineReducers} from 'redux';\r\nimport {Action,\r\n  TAB_ADD,\r\n  TAB_REMOVE,\r\n  TAB_SWITCH,\r\n  TAB_TITLE_UPDATE\r\n} from '../actions';\r\nimport {DEFAULT_PLOT_TAB_STATE, DEFAULT_TAB, DEFAULT_TAB_TITLE, PlotTabState, Tab} from '../models';\r\nimport {resultIndexReducer} from './result';\r\nimport {shelfReducer} from './shelf';\r\nimport {modifyItemInArray, removeItemFromArray} from './util';\r\n\r\nconst combinedPlotTabReducer = combineReducers<PlotTabState>({\r\n  title: titleReducer,\r\n  shelf: shelfReducer,\r\n  result: resultIndexReducer\r\n});\r\n\r\nexport function titleReducer(title: Readonly<string> = DEFAULT_TAB_TITLE, action: Action): string {\r\n  switch (action.type) {\r\n    case TAB_TITLE_UPDATE:\r\n      return action.payload.title;\r\n  }\r\n\r\n  return title;\r\n}\r\n\r\nexport function tabReducer(tab: Readonly<Tab> = DEFAULT_TAB, action: Action): Tab {\r\n  const {activeTabID, list} = tab;\r\n\r\n  switch (action.type) {\r\n    case TAB_ADD:\r\n      return {\r\n        ...tab,\r\n        activeTabID: list.length, // activate the new tab\r\n        list: [...list, DEFAULT_PLOT_TAB_STATE]\r\n      };\r\n\r\n    case TAB_REMOVE:\r\n      if (list.length === 1) { // if only one tab, don't remove\r\n        return tab;\r\n      }\r\n      const newActiveTabID = activeTabID < list.length - 1 ?\r\n        activeTabID : // activate next tab by default.\r\n        activeTabID - 1; // except for last tab in the list, activate previous tab.\r\n      return {\r\n        ...tab,\r\n        activeTabID: newActiveTabID,\r\n        list: removeItemFromArray(list, activeTabID).array\r\n      };\r\n\r\n    case TAB_SWITCH:\r\n      if (activeTabID === action.payload.tabID) {\r\n        return tab;\r\n      }\r\n      return {\r\n        ...tab,\r\n        activeTabID: action.payload.tabID\r\n      };\r\n  }\r\n\r\n  return {\r\n    ...tab,\r\n    list: modifyItemInArray(tab.list, tab.activeTabID,\r\n      (plotTabState: PlotTabState) => combinedPlotTabReducer(plotTabState, action))\r\n  };\r\n}\r\n","import {isArray} from 'util';\r\nimport {EncodingWithFacet} from 'vega-lite/build/src/encoding';\r\nimport {FieldDef, isFieldDef} from 'vega-lite/build/src/fielddef';\r\nimport {\r\n  Action,\r\n  RESULT_RECEIVE,\r\n  RESULT_REQUEST,\r\n} from '../actions';\r\nimport {\r\n  isResultAction,\r\n  RESULT_LIMIT_INCREASE,\r\n  RESULT_MODIFY_FIELD_PROP,\r\n  RESULT_MODIFY_NESTED_FIELD_PROP,\r\n  ResultAction,\r\n  ResultModifyAction\r\n} from '../actions/result';\r\nimport {DEFAULT_RESULT, DEFAULT_RESULT_INDEX, Result, ResultIndex} from '../models';\r\nimport {ResultType} from '../models/result';\r\nimport {ResultPlot} from '../models/result/plot';\r\nimport {modifyFieldProp, modifyNestedFieldProp} from './shelf/spec';\r\nimport {modifyItemInArray} from './util';\r\n\r\nexport const DEFAULT_LIMIT: {[K in ResultType]: number} = {\r\n  main: 12,\r\n  addCategoricalField: 4,\r\n  addQuantitativeField: 4,\r\n  addTemporalField: 2,\r\n  alternativeEncodings: 2,\r\n  summaries: 2,\r\n  histograms: 12\r\n};\r\n\r\nfunction resultReducer(state: Readonly<Result> = DEFAULT_RESULT, action: ResultAction, resultType: ResultType): Result {\r\n  switch (action.type) {\r\n    case RESULT_REQUEST:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        plots: undefined,\r\n        query: undefined,\r\n        limit: DEFAULT_LIMIT[resultType]\r\n      };\r\n    case RESULT_RECEIVE: {\r\n      const {plots, query} = action.payload;\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        plots,\r\n        query\r\n      };\r\n    }\r\n    case RESULT_LIMIT_INCREASE:\r\n      const {increment} = action.payload;\r\n      return {\r\n        ...state,\r\n        limit: state.limit + increment\r\n      };\r\n\r\n    case RESULT_MODIFY_FIELD_PROP:\r\n    case RESULT_MODIFY_NESTED_FIELD_PROP: {\r\n      const {index} = action.payload;\r\n      return {\r\n        ...state,\r\n        plots: modifyItemInArray<ResultPlot>(state.plots, index, (p: ResultPlot) => {\r\n          return {\r\n            ...p,\r\n            spec: {\r\n              ...p.spec,\r\n              encoding: resultPlotSpecModifyFieldReducer(p.spec.encoding, action)\r\n            }\r\n          };\r\n        })\r\n      };\r\n    }\r\n  }\r\n  return state;\r\n}\r\n\r\nfunction resultPlotSpecModifyFieldReducer(encoding: EncodingWithFacet<any>, action: ResultModifyAction) {\r\n  const {channel, prop, value} = action.payload;\r\n  const channelDef = encoding[channel];\r\n  if (!channelDef) {\r\n    console.error(`${action.type} no working for channel ${channel} without field.`);\r\n  } else if (isArray(channelDef)) {\r\n    console.error(`${action.type}  not supported for detail and order`);\r\n    return encoding;\r\n  } else if (!isFieldDef<any>(channelDef)) {\r\n    console.error(`${action.type}  not supported for detail and order`);\r\n    return encoding;\r\n  }\r\n  const fieldDef = encoding[channel] as FieldDef<any>;\r\n  switch (action.type) {\r\n    case RESULT_MODIFY_FIELD_PROP:\r\n      return {\r\n        ...encoding,\r\n        [channel]: modifyFieldProp(fieldDef, prop, value)\r\n      };\r\n\r\n    case RESULT_MODIFY_NESTED_FIELD_PROP: {\r\n      const {nestedProp} = action.payload;\r\n      return {\r\n        ...encoding,\r\n        [channel]: modifyNestedFieldProp(fieldDef, prop, nestedProp, value)\r\n      };\r\n    }\r\n  }\r\n\r\n  return encoding;\r\n}\r\n\r\nexport function resultIndexReducer(state: Readonly<ResultIndex> = DEFAULT_RESULT_INDEX, action: Action): ResultIndex {\r\n  if (isResultAction(action)) {\r\n    const {resultType} = action.payload;\r\n    return {\r\n      ...(\r\n        action.type === RESULT_REQUEST && resultType === 'main' ?\r\n          // When making a main query result request, reset all other results\r\n          // as the older related views results will be outdated anyway.\r\n          DEFAULT_RESULT_INDEX :\r\n          state\r\n      ),\r\n      [resultType]: resultReducer(state[resultType], action, resultType)\r\n    };\r\n  }\r\n  return state;\r\n}\r\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","\r\nimport {fromSpec} from 'compassql/build/src/query/spec';\r\nimport {isWildcard, SHORT_WILDCARD} from 'compassql/build/src/wildcard';\r\nimport * as stringify from 'json-stable-stringify';\r\nimport {combineReducers} from 'redux';\r\nimport {Action} from '../../actions';\r\nimport {SHELF_AUTO_ADD_COUNT_CHANGE, SHELF_GROUP_BY_CHANGE, SHELF_LOAD_QUERY} from '../../actions/shelf/index';\r\nimport {SPEC_LOAD} from '../../actions/shelf/spec';\r\nimport {Shelf} from '../../models';\r\nimport {DEFAULT_SHELF} from '../../models/shelf';\r\nimport {fromTransforms} from '../../models/shelf/filter';\r\nimport {getDefaultGroupBy, isShelfGroupBy, ShelfGroupBy} from '../../models/shelf/index';\r\nimport {fromSpecQuery, hasWildcards} from '../../models/shelf/spec/index';\r\nimport {filterReducer} from './filter';\r\nimport {shelfSpecReducer} from './spec';\r\n\r\nfunction groupByReducer(state: Readonly<ShelfGroupBy> = DEFAULT_SHELF.groupBy, action: Action) {\r\n  switch (action.type) {\r\n    case SHELF_GROUP_BY_CHANGE:\r\n      const {groupBy} = action.payload;\r\n      return groupBy;\r\n  }\r\n  return state;\r\n}\r\n\r\nfunction autoAddCountReducer(state: Readonly<boolean> = DEFAULT_SHELF.autoAddCount, action: Action) {\r\n  switch (action.type) {\r\n    case SHELF_AUTO_ADD_COUNT_CHANGE:\r\n      const {autoAddCount} = action.payload;\r\n      return autoAddCount;\r\n  }\r\n  return state;\r\n}\r\n\r\nconst shelfReducerBase = combineReducers<Shelf>({\r\n  spec: shelfSpecReducer,\r\n  autoAddCount: autoAddCountReducer,\r\n  groupBy: groupByReducer,\r\n  filters: filterReducer\r\n});\r\n\r\nexport function shelfReducer(shelf: Readonly<Shelf> = DEFAULT_SHELF, action: Action): Shelf {\r\n  switch (action.type) {\r\n    case SHELF_LOAD_QUERY: {\r\n      const {query} = action.payload;\r\n\r\n      const spec = fromSpecQuery(query.spec, shelf.spec.config);\r\n\r\n      // If the groupBy is equivalent to \"auto\", let's set to auto for more flexibility.\r\n      const defaultGroupBy = getDefaultGroupBy(hasWildcards(query.spec));\r\n      const groupBy = query.groupBy === defaultGroupBy ? 'auto' : query.groupBy;\r\n\r\n      const {autoAddCount} = query.config || {autoAddCount: false};\r\n\r\n      /* istanbul ignore else: it should reach else */\r\n      if (isShelfGroupBy(groupBy)) {\r\n        return {\r\n          ...shelf,\r\n          spec,\r\n          groupBy,\r\n          ...(autoAddCount ? {autoAddCount} : {})\r\n          // TODO: load other query components too, once we have them in the model\r\n        };\r\n      } else {\r\n        throw new Error(`SHELF_LOAD_QUERY does not support groupBy ${JSON.stringify(groupBy)}`);\r\n      }\r\n    }\r\n\r\n    case SPEC_LOAD:\r\n      const {keepWildcardMark} = action.payload;\r\n      const {transform, ...specWithoutTransform} = action.payload.spec;\r\n\r\n      const specQ = {\r\n        ...fromSpec(specWithoutTransform),\r\n\r\n        // Restore wildcard mark if the shelf previously has wildcard mark.\r\n        // and keepWildcardMark is true\r\n        ...(keepWildcardMark && isWildcard(shelf.spec.mark) ? {\r\n          mark: SHORT_WILDCARD\r\n        } : {})\r\n      };\r\n\r\n      const spec = fromSpecQuery(specQ, shelf.spec.config);\r\n\r\n      const newFilters = fromTransforms(transform);\r\n      const filters = stringify(newFilters) !== stringify(shelf.filters) ?\r\n        // Use newFilters only if it is different\r\n        newFilters : shelf.filters;\r\n\r\n      return {...DEFAULT_SHELF, spec, filters};\r\n  }\r\n\r\n  return shelfReducerBase(shelf, action);\r\n}\r\n","\r\nimport {FieldOneOfPredicate, FieldRangePredicate} from 'vega-lite/build/src/predicate';\r\nimport {TimeUnit} from 'vega-lite/build/src/timeunit';\r\nimport {\r\n  FILTER_ADD, FILTER_CLEAR, FILTER_MODIFY_EXTENT, FILTER_MODIFY_MAX_BOUND, FILTER_MODIFY_MIN_BOUND,\r\n  FILTER_MODIFY_ONE_OF, FILTER_MODIFY_TIME_UNIT, FILTER_REMOVE, FILTER_TOGGLE\r\n} from '../../actions';\r\nimport {Action} from '../../actions/index';\r\nimport {filterIndexOf, getDefaultList, getDefaultTimeRange, ShelfFilter} from '../../models/shelf/filter';\r\nimport {insertItemToArray, modifyItemInArray, removeItemFromArray} from '../util';\r\n\r\n\r\nexport function filterReducer(\r\n  filters: Array<FieldRangePredicate | FieldOneOfPredicate> = [],\r\n  action: Action\r\n): Array<FieldRangePredicate | FieldOneOfPredicate> {\r\n  switch (action.type) {\r\n    case FILTER_ADD: {\r\n      const {filter} = action.payload;\r\n      let index = action.payload.index;\r\n      if (!index) {\r\n        index = filters.length;\r\n      }\r\n      return insertItemToArray(filters, index, filter);\r\n    }\r\n\r\n    case FILTER_CLEAR: {\r\n      return [];\r\n    }\r\n\r\n    case FILTER_REMOVE: {\r\n      const {index} = action.payload;\r\n      return removeItemFromArray(filters, index).array;\r\n    }\r\n\r\n    case FILTER_TOGGLE: {\r\n      const {filter} = action.payload;\r\n      const index = filterIndexOf(filters, filter.field);\r\n      if (index === -1) {\r\n        // add filter\r\n        return insertItemToArray(filters, filters.length, filter);\r\n      } else {\r\n        return removeItemFromArray(filters, index).array;\r\n      }\r\n    }\r\n\r\n    case FILTER_MODIFY_EXTENT: {\r\n      const {index, range} = action.payload;\r\n      const modifyExtent = (filter: FieldRangePredicate) => {\r\n        return {\r\n          ...filter,\r\n          range\r\n        };\r\n      };\r\n      return modifyItemInArray(filters, index, modifyExtent);\r\n    }\r\n\r\n    case FILTER_MODIFY_MAX_BOUND: {\r\n      const {index, maxBound} = action.payload;\r\n      const modifyMaxBound = (filter: FieldRangePredicate) => {\r\n        return {\r\n          ...filter,\r\n          range: [filter.range[0], maxBound]\r\n        };\r\n      };\r\n      return modifyItemInArray(filters, index, modifyMaxBound);\r\n    }\r\n\r\n    case FILTER_MODIFY_MIN_BOUND: {\r\n      const {index, minBound} = action.payload;\r\n      const modifyMinBound = (filter: FieldRangePredicate) => {\r\n        return {\r\n          ...filter,\r\n          range: [minBound, filter.range[1]]\r\n        };\r\n      };\r\n      return modifyItemInArray(filters, index, modifyMinBound);\r\n    }\r\n\r\n    case FILTER_MODIFY_ONE_OF: {\r\n      const {index, oneOf} = action.payload;\r\n      const modifyOneOf = (filter: FieldOneOfPredicate) => {\r\n        return {\r\n          ...filter,\r\n          oneOf: oneOf\r\n        };\r\n      };\r\n      return modifyItemInArray(filters, index, modifyOneOf);\r\n    }\r\n\r\n    case FILTER_MODIFY_TIME_UNIT: {\r\n      const {index, timeUnit, domain} = action.payload;\r\n      return modifyItemInArray(filters, index, getModifyTimeUnitFunction(timeUnit, domain));\r\n    }\r\n\r\n    default: {\r\n      return filters;\r\n    }\r\n  }\r\n}\r\n\r\nfunction getModifyTimeUnitFunction(timeUnit: TimeUnit, domain: number[]) {\r\n  if (timeUnit === TimeUnit.MONTH || timeUnit === TimeUnit.DAY) {\r\n    return (filter: ShelfFilter): FieldOneOfPredicate => {\r\n      return {\r\n        field: filter.field,\r\n        timeUnit,\r\n        oneOf: getDefaultList(timeUnit)\r\n      };\r\n    };\r\n  } else {\r\n    return (filter: ShelfFilter): FieldRangePredicate => {\r\n      return {\r\n        field: filter.field,\r\n        ...timeUnit ? {timeUnit} : {},\r\n        range: getDefaultTimeRange(domain, timeUnit)\r\n      };\r\n    };\r\n  }\r\n}\r\n","import {Query} from 'compassql/build/src/query/query';\r\nimport {Store} from 'redux';\r\nimport {Data} from 'vega-lite/build/src/data';\r\nimport {State} from '../models/index';\r\nimport {RelatedViews} from '../models/related-views';\r\nimport {dispatchQueries} from '../queries/index';\r\nimport {selectData, selectQuery, selectRelatedViews} from '../selectors/index';\r\n\r\nexport function createQueryListener(store: Store<State>) {\r\n  let data: Data;\r\n  let query: Query;\r\n  let relatedViews: RelatedViews;\r\n  return () => {\r\n    const state = store.getState();\r\n    const previousQuery = query;\r\n    query = selectQuery(state);\r\n\r\n    const previousData = data;\r\n    data = selectData(state);\r\n\r\n    const previousRelatedViews = relatedViews;\r\n    relatedViews = selectRelatedViews(state);\r\n\r\n\r\n    if (!data) {\r\n      return;\r\n    }\r\n\r\n    // Check if either query or data has changed, need to submit a new query.\r\n    if (previousQuery !== query || previousData !== data || previousRelatedViews !== relatedViews) {\r\n      dispatchQueries(store, query);\r\n    }\r\n  };\r\n}\r\n","/**\r\n * Namespace for creating CompassQL query specifications.\r\n */\r\n\r\nimport {getGroupByKey} from 'compassql/build/src/nest';\r\nimport {Query} from 'compassql/build/src/query/query';\r\nimport {isAggregate, SpecQuery} from 'compassql/build/src/query/spec';\r\nimport {contains} from 'compassql/build/src/util';\r\nimport {Store} from 'redux';\r\nimport {isString} from 'util';\r\nimport {NONPOSITION_SCALE_CHANNELS} from 'vega-lite/build/src/channel';\r\nimport {resultRequest} from '../actions/result';\r\nimport {State} from '../models/index';\r\nimport {ResultType} from '../models/result';\r\nimport {selectIsQuerySpecific} from '../selectors/index';\r\nimport {selectIsQueryEmpty} from '../selectors/shelf';\r\nimport {alternativeEncodings} from './alternative-encodings';\r\nimport {QueryCreator} from './base';\r\nimport {addCategoricalField, addQuantitativeField, addTemporalField} from './field-suggestions';\r\nimport {histograms} from './histograms';\r\nimport {summaries} from './summaries';\r\n\r\n\r\nexport const RELATED_VIEWS_INDEX: {[k in ResultType]: QueryCreator} = {\r\n  main: undefined,\r\n  addCategoricalField,\r\n  addQuantitativeField,\r\n  addTemporalField,\r\n  alternativeEncodings,\r\n  summaries,\r\n  histograms,\r\n};\r\n\r\nconst RELATED_VIEWS_PRIORITY: {[k in ResultType]: number} = {\r\n  main: undefined,\r\n  histograms: 0,\r\n  summaries: 1,\r\n  addQuantitativeField: 2,\r\n  addCategoricalField: 3,\r\n  addTemporalField: 4,\r\n  alternativeEncodings: 5\r\n};\r\n\r\nexport const RELATED_VIEWS_TYPES = Object.keys(RELATED_VIEWS_INDEX)\r\n  .filter(type => type !== 'main')\r\n  .sort((t1, t2) => RELATED_VIEWS_PRIORITY[t1] - RELATED_VIEWS_PRIORITY[t2]) as ResultType[];\r\n\r\nexport function dispatchQueries(store: Store<State>, query: Query) {\r\n  const state = store.getState();\r\n\r\n  const isQueryEmpty = selectIsQueryEmpty(state);\r\n  const isQuerySpecific = selectIsQuerySpecific(state);\r\n  store.dispatch(resultRequest('main', query, null));\r\n\r\n  if (state.persistent.config.relatedViews === 'disabled' || state.persistent.relatedViews.isCollapsed) {\r\n    return;\r\n  }\r\n  if (isQueryEmpty) {\r\n    store.dispatch(relatedViewResultRequest(histograms, query));\r\n  } else {\r\n    if (isQuerySpecific) {\r\n      makeRelatedViewQueries(store, query);\r\n    }\r\n  }\r\n}\r\n\r\nfunction relatedViewResultRequest(queryCreator: QueryCreator, mainQuery: Query) {\r\n  const query = queryCreator.createQuery(mainQuery);\r\n\r\n  let mainQueryKey;\r\n\r\n  if (queryCreator.filterSpecifiedView) {\r\n    if (!isString(query.groupBy)) {\r\n      throw new Error('Cannot get key if query.groupBy is not string');\r\n    }\r\n    mainQueryKey = getGroupByKey(mainQuery.spec, query.groupBy);\r\n  }\r\n  return resultRequest(queryCreator.type, query, mainQueryKey);\r\n}\r\n\r\n\r\n\r\nfunction getFeaturesForRelatedViewRules(spec: SpecQuery) {\r\n  let hasOpenPosition = false;\r\n  let hasStyleChannel = false;\r\n  let hasOpenFacet = false;\r\n\r\n  spec.encodings.forEach(encQ => {\r\n    if (encQ.channel === 'x' || encQ.channel === 'y') {\r\n      hasOpenPosition = true;\r\n    } else if (encQ.channel === 'row' || encQ.channel === 'column') {\r\n      hasOpenFacet = true;\r\n    } else if (contains(NONPOSITION_SCALE_CHANNELS, encQ.channel)) {\r\n      hasStyleChannel = true;\r\n    }\r\n  });\r\n\r\n  return {\r\n    hasOpenPosition,\r\n    hasStyleChannel,\r\n    hasOpenFacet,\r\n    isSpecAggregate: isAggregate(spec)\r\n  };\r\n}\r\n\r\nexport function makeRelatedViewQueries(store: Store<State>, query: Query) {\r\n  const {hasOpenPosition, hasStyleChannel, hasOpenFacet, isSpecAggregate} = getFeaturesForRelatedViewRules(query.spec);\r\n\r\n  if (!isSpecAggregate) {\r\n    store.dispatch(relatedViewResultRequest(summaries, query));\r\n  }\r\n\r\n  if (hasOpenPosition || hasStyleChannel) {\r\n    store.dispatch(relatedViewResultRequest(addQuantitativeField, query));\r\n  }\r\n\r\n  if (hasOpenPosition || hasStyleChannel || hasOpenFacet) {\r\n    store.dispatch(relatedViewResultRequest(addCategoricalField, query));\r\n  }\r\n\r\n  if (hasOpenPosition) {\r\n    store.dispatch(relatedViewResultRequest(addTemporalField, query));\r\n  }\r\n\r\n  store.dispatch(relatedViewResultRequest(alternativeEncodings, query));\r\n}\r\n","\r\nimport {Query} from 'compassql/build/src/query/query';\r\nimport {isWildcard, SHORT_WILDCARD} from 'compassql/build/src/wildcard';\r\nimport {QueryCreator} from './base';\r\nimport {makeWildcard} from './common';\r\n\r\nexport const alternativeEncodings: QueryCreator = {\r\n  type: 'alternativeEncodings',\r\n  title: 'Alternative Encodings',\r\n  filterSpecifiedView: true,\r\n  createQuery(query: Query): Query {\r\n    const {spec} = query;\r\n    const {mark, encodings} = spec;\r\n    return {\r\n      spec: {\r\n        ...query.spec,\r\n        mark: makeWildcard(mark),\r\n        encodings: encodings.map(encQ => {\r\n          if (isWildcard(encQ.channel)) {\r\n            return encQ;\r\n          }\r\n          return {\r\n            ...encQ,\r\n            channel: SHORT_WILDCARD\r\n          };\r\n        })\r\n      },\r\n      groupBy: 'encoding',\r\n      // fieldOrder, aggregationQuality should be the same, since we have similar fields and aggregates\r\n      orderBy: ['fieldOrder', 'aggregationQuality', 'effectiveness'],\r\n      chooseBy: ['aggregationQuality', 'effectiveness']\r\n    };\r\n  }\r\n};\r\n","import {isWildcard, SHORT_WILDCARD, WildcardProperty} from 'compassql/build/src/wildcard';\r\n\r\nexport function makeWildcard<T>(val: WildcardProperty<T>): WildcardProperty<T> {\r\n  return isWildcard(val) ? val : SHORT_WILDCARD;\r\n}\r\n","\r\nimport {FieldQuery} from 'compassql/build/src/query/encoding';\r\nimport {Query} from 'compassql/build/src/query/query';\r\nimport {SHORT_WILDCARD} from 'compassql/build/src/wildcard';\r\nimport {ResultIndex} from '../models/result';\r\nimport {QueryCreator} from './base';\r\n\r\nfunction makeFieldSuggestionQueryCreator(params: {\r\n  type: keyof ResultIndex,\r\n  title: string,\r\n  additionalFieldQuery: FieldQuery\r\n}): QueryCreator {\r\n  const {type, title, additionalFieldQuery} = params;\r\n  return {\r\n    type,\r\n    title,\r\n    filterSpecifiedView: undefined,\r\n    createQuery(query: Query): Query {\r\n      return {\r\n        spec: {\r\n          ...query.spec,\r\n          encodings: [\r\n            ...query.spec.encodings,\r\n            additionalFieldQuery\r\n          ]\r\n        },\r\n        groupBy: 'field',\r\n        // FieldOrder should dominates everything else\r\n        orderBy: ['fieldOrder', 'aggregationQuality', 'effectiveness'],\r\n        // aggregationQuality should be the same\r\n        chooseBy: ['aggregationQuality', 'effectiveness'],\r\n        config: { autoAddCount: true }\r\n      };\r\n    }\r\n  };\r\n}\r\n\r\nexport const addCategoricalField = makeFieldSuggestionQueryCreator({\r\n  type: 'addCategoricalField',\r\n  title: 'Add Categorical Field',\r\n  additionalFieldQuery: {\r\n    channel: SHORT_WILDCARD,\r\n    field: SHORT_WILDCARD,\r\n    type: 'nominal',\r\n    description: 'Categorical Fields'\r\n  }\r\n});\r\n\r\nexport const addQuantitativeField = makeFieldSuggestionQueryCreator({\r\n  type: 'addQuantitativeField',\r\n  title: 'Add Quantitative Field',\r\n  additionalFieldQuery: {\r\n    channel: SHORT_WILDCARD,\r\n    bin: SHORT_WILDCARD,\r\n    aggregate: SHORT_WILDCARD,\r\n    field: SHORT_WILDCARD,\r\n    type: 'quantitative',\r\n    description: 'Quantitative Fields'\r\n  }\r\n});\r\n\r\nexport const addTemporalField = makeFieldSuggestionQueryCreator({\r\n  type: 'addTemporalField',\r\n  title: 'Add Temporal Field',\r\n  additionalFieldQuery: {\r\n    channel: SHORT_WILDCARD,\r\n    hasFn: true, // Do not show raw time in the summary\r\n    timeUnit: SHORT_WILDCARD,\r\n    field: SHORT_WILDCARD,\r\n    type: 'temporal',\r\n    description: 'Temporal Fields'\r\n  }\r\n});\r\n","\r\nimport {Query} from 'compassql/build/src/query/query';\r\nimport {SHORT_WILDCARD} from 'compassql/build/src/wildcard';\r\nimport {QueryCreator} from './base';\r\n\r\nexport const histograms: QueryCreator = {\r\n  type: 'histograms',\r\n  title: 'Univariate Summaries',\r\n  filterSpecifiedView: undefined,\r\n  createQuery(query: Query): Query {\r\n    return {\r\n      spec: {\r\n        data: query.spec.data,\r\n        mark: SHORT_WILDCARD,\r\n        transform: query.spec.transform,\r\n        encodings: [\r\n          {\r\n            channel: SHORT_WILDCARD,\r\n            bin: SHORT_WILDCARD, timeUnit: SHORT_WILDCARD,\r\n            field: SHORT_WILDCARD,\r\n            type: SHORT_WILDCARD\r\n          },\r\n          {\r\n            channel: SHORT_WILDCARD,\r\n            aggregate: 'count',\r\n            field: '*',\r\n            type: 'quantitative'\r\n          }\r\n        ]\r\n      },\r\n      groupBy: 'fieldTransform',\r\n      // FieldOrder should dominates everything else\r\n      orderBy: ['fieldOrder', 'aggregationQuality', 'effectiveness'],\r\n      // aggregationQuality should be the same\r\n      chooseBy: ['aggregationQuality', 'effectiveness'],\r\n      config: { autoAddCount: false }\r\n    };\r\n  }\r\n};\r\n","import {isFieldQuery} from 'compassql/build/src/query/encoding';\r\nimport {Query} from 'compassql/build/src/query/query';\r\nimport {QueryCreator} from './base';\r\nimport {makeWildcard} from './common';\r\n\r\nexport const summaries: QueryCreator = {\r\n  type: 'summaries',\r\n  title: 'Related Summaries',\r\n  filterSpecifiedView: true,\r\n  createQuery(query: Query): Query {\r\n    const {spec} = query;\r\n    const newSpec = {\r\n      ...spec,\r\n      mark: makeWildcard(spec.mark),\r\n      encodings: spec.encodings.reduce((encodings, encQ) => {\r\n        if (isFieldQuery(encQ)) {\r\n          switch (encQ.type) {\r\n            case 'quantitative':\r\n              if (encQ.aggregate === 'count') {\r\n                // Skip count, so that it can be added back as autoCount or omitted\r\n                return encodings;\r\n              } else {\r\n                // For other Q, it should be either aggregate or binned\r\n                return encodings.concat({\r\n                  ...encQ,\r\n                  aggregate: makeWildcard(encQ.aggregate),\r\n                  bin: makeWildcard(encQ.bin as any),  // HACK as TS somehow incorrectly infer types here\r\n                  hasFn: true\r\n                });\r\n              }\r\n            case 'temporal':\r\n              // TODO: only year and periodic timeUnit\r\n              return encodings.concat({\r\n                ...encQ,\r\n                timeUnit: makeWildcard(encQ.timeUnit)\r\n              });\r\n            case 'nominal':\r\n            case 'ordinal':\r\n            case 'key':\r\n              return encodings.concat(encQ);\r\n          }\r\n          throw new Error('Unsupported type in related summaries query creator.');\r\n        }\r\n        return encodings;\r\n      }, [])\r\n    };\r\n\r\n    // TODO: extend config\r\n    return {\r\n      spec: newSpec,\r\n      groupBy: 'fieldTransform',\r\n      // fieldOrder should be the same, since we have similar fields\r\n      orderBy: ['fieldOrder', 'aggregationQuality', 'effectiveness'],\r\n      // aggregationQuality should be the same with group with similar transform\r\n      chooseBy: ['aggregationQuality', 'effectiveness'],\r\n      config: {\r\n        autoAddCount: true,\r\n        omitRaw: true\r\n      }\r\n    };\r\n  }\r\n};\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"footer\":\"footer__footer\"};","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {connect} from 'react-redux';\r\nimport {InlineData} from 'vega-lite/build/src/data';\r\nimport * as idlLogo from '../../../images/idl-h56.png';\r\nimport * as logo from '../../../images/logo.png';\r\nimport {State} from '../../models/index';\r\nimport {selectData} from '../../selectors/dataset';\r\nimport {Controls} from './controls';\r\nimport * as styles from './header.scss';\r\n\r\nexport interface HeaderProps {\r\n  data: InlineData;\r\n}\r\n\r\nexport class HeaderBase extends React.PureComponent<HeaderProps, {}> {\r\n  public render() {\r\n    const {data} = this.props;\r\n\r\n    return (\r\n      <div styleName='header'>\r\n        <img styleName='voyager-logo' src={logo}/>\r\n        {data && <Controls/>}\r\n        <a styleName='idl-logo' onClick={this.openLink}>\r\n          <img src={idlLogo}/>\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private openLink() {\r\n    window.open('https://idl.cs.washington.edu/');\r\n  }\r\n}\r\n\r\nexport const Header = connect(\r\n  (state: State) => {\r\n    return {\r\n      data: selectData(state)\r\n    };\r\n  }\r\n)(CSSModules(HeaderBase, styles));\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAA4CAYAAABqtn+aAAAAAXNSR0IArs4c6QAABDFJREFUeAHtm8lrFFEQxqt6JmNEjCuIChrBRDEacvHi2ZugHlxQT4IJJJpxOakXI4Lbxcy4RMf1oKD+AYpH9SAiqBcFg4i7N5eEaOxMT1lt6GG67dfVD4wLVEPo9+r7ul6/32xd/Tp4/GQfgbARwev8ts65gm1M5PbmwiNEbJOSe0Plaeff7voY53tyPbcRwbkSp9XGGMThlnXDe2pjUtuRDKonE1CAyXxEVQGKiJINCjCZj6gqQBFRskEBJvMRVQUoIko2KMBkPqKa9S+SJRcCvJM8Y6fjBwCaKuXP5FzP6KnAEDnyPIkqn405VBgbAvzm+re3LU2FzQ7CDOksXfdT76WXPcNxPi7lFnF8ZZxWG/Ogcq91Xfl2bUxqZyXD39YRIQ8pauFMuaHE5xoLkONtXAsfkuaSAecwgB1A/RGRqAq6AhQASbIClAgJugIUAEmyApQICboCFABJsgKUCAm6AhQASfJ/cCFNBwFwujSR9/XZIZMHR/AB1FGXSa/GvcrDalsbf4YA8rKmeAeCgN7kt3YtMZ1SR3PxMWuNJj2Il/rzU3iZcjUCXgxipj1BpXC2f8e+9ubiHS7YW02+IO66XuOllztj58K18Boe81zgNe2J6FjLene/SY+L+x/hSXFCKEb4JdSPdHg9tYFrVjkP9CC/GDle5xW9XLuOHx2GJnItLPozZb5hZd5y/DUg5uBx6s0p4pWkQeOP0GiIgAIM4bDvKEB7ZqEjFGAIh31HAdozCx2hAEM47DsK0J5Z6Aj/OjDxGu+nG2kgdFSkwxe6A0Ap8kAPIRTcNF6+kP42OgwOpvF7WaxETqu26/LSqDxPItOaSm0ubf9OAlg80dcpJUSiwe7urssmX/v84ibMQINJD+KlZ/m+oJ1237Ggdy2AI95MeOPBhZvP89/j8j69Mq4J6mB5nFYbI76Z0LJh5H5tTGpnuQQ7JZkI8DV7jADBgQOsz5PyAPSc4b+kj9ovKYhwL59j2y9CJDBruHyNQ7EAqY6WcmkozhMyGV7WtAOoPyKRF8K2qwBtiUX8CjACxLarAG2JRfwKMALEtqsAbYlF/AowAsS2qwBtiUX8fi2c5n/DkutIoqOcZ3Ikd0zX7iLaT8CPIBcRSHzA0ssOfI0ZMAg95tpanKf/gGVwgO7/EAG/Fn4ljcV3W951b+tcZvJ1NBfuAsIckx7ES8+2N7Y39a5AB08GMdOe33mnz/ZvP8TLmjcQqcXkq8ZHvrWWXuyO/aQ8uZpbBY5TrHoNDX7I/NTi9e6Rp9fH3eLydaHBVg1/Ghxe7NfC4sR5MokbDzabIYt5uA5Gvp81gddoRS+f15TRQWkmL0mKfs/NZYwn6fhjpjg/dIKvoZlp/PUT+WUxDqpCKgIKMBUms0kBmtmkUhRgKkxmkwI0s0mlKMBUmMwmBWhmk0pRgKkwmU0/APS09G59i6H6AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {BookmarkPane} from '../bookmark';\r\nimport * as styles from './controls.scss';\r\nimport { UndoRedo } from './undo-redo';\r\n\r\nexport class ControlsBase extends React.PureComponent<{}, {}> {\r\n  public render() {\r\n    return (\r\n      <div styleName='controls'>\r\n        <BookmarkPane/>\r\n        <UndoRedo/>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport const Controls = CSSModules(ControlsBase, styles);\r\n","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport Modal from 'react-modal';\r\nimport {connect} from 'react-redux';\r\nimport {InlineData} from 'vega-lite/build/src/data';\r\nimport {BOOKMARK_CLEAR_ALL, BookmarkAction} from '../../actions/bookmark';\r\nimport {ActionHandler, createDispatchHandler} from '../../actions/redux-action';\r\nimport {State} from '../../models';\r\nimport {Bookmark} from '../../models/bookmark';\r\nimport {ResultPlot} from '../../models/result';\r\nimport {selectData} from '../../selectors/dataset';\r\nimport {selectBookmark} from '../../selectors/index';\r\nimport {Plot} from '../plot';\r\nimport * as styles from './bookmark.scss';\r\n\r\n\r\nexport interface BookmarkProps extends ActionHandler<BookmarkAction> {\r\n  bookmark: Bookmark;\r\n  data: InlineData;\r\n}\r\n\r\nexport class BookmarkBase extends React.PureComponent<BookmarkProps, any> {\r\n  constructor(props: BookmarkProps) {\r\n    super(props);\r\n\r\n    this.state = {modalIsOpen: false};\r\n    this.openModal = this.openModal.bind(this);\r\n    this.closeModal = this.closeModal.bind(this);\r\n    this.onClearAll = this.onClearAll.bind(this);\r\n    this.onExport = this.onExport.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div>\r\n        <button onClick={this.openModal}>\r\n          <i className=\"fa fa-bookmark\" /> Bookmarks ({this.props.bookmark.count})\r\n        </button>\r\n\r\n        <Modal\r\n          isOpen={this.state.modalIsOpen}\r\n          onRequestClose={this.closeModal}\r\n          contentLabel=\"Bookmark Selector\"\r\n          styleName=\"modal\"\r\n          className=\"voyager\"\r\n        >\r\n          <div className=\"modal-header\">\r\n            <a className=\"right\" onClick={this.closeModal}>Close</a>\r\n            <h3>Bookmarks ({this.props.bookmark.count})</h3>\r\n            <a styleName=\"bookmark-list-util\" onClick={this.onClearAll}>\r\n              <i className=\"fa fa-trash-o\"/>\r\n              {' '}\r\n              Clear all\r\n            </a>\r\n            <a styleName=\"bookmark-list-util\" onClick={this.onExport}>\r\n              <i className=\"fa fa-clipboard\"/>\r\n              {' '}\r\n              Export\r\n            </a>\r\n          </div>\r\n\r\n          {this.renderBookmarks(this.props.bookmark)}\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private onExport() {\r\n    const {bookmark} = this.props;\r\n\r\n    const specs = [];\r\n    for (const specKey of bookmark.list) {\r\n      const bookmarkItem = bookmark.dict[specKey];\r\n      specs.push({\r\n        ...bookmarkItem.plot.spec,\r\n        description: bookmarkItem.note\r\n      });\r\n    }\r\n\r\n    const exportWindow = window.open();\r\n    exportWindow.document.write(\r\n      \"<html><body><pre>\" +\r\n      JSON.stringify(specs, null, 2) +\r\n      \"</pre></body></html>\"\r\n    );\r\n    exportWindow.document.close();\r\n  }\r\n\r\n  private onClearAll() {\r\n    this.props.handleAction({type: BOOKMARK_CLEAR_ALL});\r\n  }\r\n\r\n  private openModal() {\r\n    this.setState({modalIsOpen: true});\r\n  }\r\n\r\n  private closeModal() {\r\n    this.setState({modalIsOpen: false});\r\n  }\r\n\r\n  private renderBookmarks(bookmark: Bookmark) {\r\n    const {data} = this.props;\r\n    const plots: ResultPlot[] = bookmark.list.map(key => bookmark.dict[key].plot);\r\n\r\n    const bookmarkPlotListItems = plots.map((plot, index) => {\r\n      const {spec, fieldInfos} = plot;\r\n      return (\r\n        <Plot\r\n          bookmark={this.props.bookmark}\r\n          closeModal={this.closeModal.bind(this)}\r\n          data={data}\r\n          filters={[]} /* Bookmark specs already have filters included */\r\n          key={index}\r\n          fieldInfos={fieldInfos}\r\n          handleAction={this.props.handleAction}\r\n          isPlotListItem={true}\r\n          showBookmarkButton={true}\r\n          showSpecifyButton={true}\r\n          spec={spec}\r\n        />\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        {\r\n          (bookmarkPlotListItems.length > 0) ?\r\n           bookmarkPlotListItems :\r\n           <div styleName=\"vis-list-empty\">You have no bookmarks</div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst BookmarkRenderer = CSSModules(BookmarkBase, styles);\r\n\r\nexport const BookmarkPane = connect(\r\n  (state: State) => {\r\n    return {\r\n      bookmark: selectBookmark(state),\r\n      data: selectData(state)\r\n    };\r\n  },\r\n  createDispatchHandler<BookmarkAction>()\r\n)(BookmarkRenderer);\r\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Modal = require('./components/Modal');\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Modal2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _exenv = require('exenv');\n\nvar _exenv2 = _interopRequireDefault(_exenv);\n\nvar _elementClass = require('element-class');\n\nvar _elementClass2 = _interopRequireDefault(_elementClass);\n\nvar _ModalPortal = require('./ModalPortal');\n\nvar _ModalPortal2 = _interopRequireDefault(_ModalPortal);\n\nvar _ariaAppHider = require('../helpers/ariaAppHider');\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _refCount = require('../helpers/refCount');\n\nvar refCount = _interopRequireWildcard(_refCount);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EE = _exenv2.default;\nvar renderSubtreeIntoContainer = _reactDom2.default.unstable_renderSubtreeIntoContainer;\n\nvar SafeHTMLElement = EE.canUseDOM ? window.HTMLElement : {};\nvar AppElement = EE.canUseDOM ? document.body : {\n  appendChild: function appendChild() {}\n};\n\nfunction getParentElement(parentSelector) {\n  return parentSelector();\n}\n\nvar Modal = function (_Component) {\n  _inherits(Modal, _Component);\n\n  function Modal() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Modal.__proto__ || Object.getPrototypeOf(Modal)).call.apply(_ref, [this].concat(args))), _this), _this.removePortal = function () {\n      _reactDom2.default.unmountComponentAtNode(_this.node);\n      var parent = getParentElement(_this.props.parentSelector);\n      parent.removeChild(_this.node);\n\n      if (refCount.count() === 0) {\n        (0, _elementClass2.default)(document.body).remove(_this.props.bodyOpenClassName);\n      }\n    }, _this.renderPortal = function (props) {\n      if (props.isOpen || refCount.count() > 0) {\n        (0, _elementClass2.default)(document.body).add(_this.props.bodyOpenClassName);\n      } else {\n        (0, _elementClass2.default)(document.body).remove(_this.props.bodyOpenClassName);\n      }\n\n      if (props.ariaHideApp) {\n        ariaAppHider.toggle(props.isOpen, props.appElement);\n      }\n\n      _this.portal = renderSubtreeIntoContainer(_this, _react2.default.createElement(_ModalPortal2.default, _extends({ defaultStyles: Modal.defaultStyles }, props)), _this.node);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Modal, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.node = document.createElement('div');\n      this.node.className = this.props.portalClassName;\n\n      if (this.props.isOpen) refCount.add(this);\n\n      var parent = getParentElement(this.props.parentSelector);\n      parent.appendChild(this.node);\n      this.renderPortal(this.props);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(newProps) {\n      var isOpen = newProps.isOpen;\n      // Stop unnecessary renders if modal is remaining closed\n\n      if (!this.props.isOpen && !isOpen) return;\n\n      if (isOpen) refCount.add(this);\n      if (!isOpen) refCount.remove(this);\n      var currentParent = getParentElement(this.props.parentSelector);\n      var newParent = getParentElement(newProps.parentSelector);\n\n      if (newParent !== currentParent) {\n        currentParent.removeChild(this.node);\n        newParent.appendChild(this.node);\n      }\n\n      this.renderPortal(newProps);\n    }\n  }, {\n    key: 'componentWillUpdate',\n    value: function componentWillUpdate(newProps) {\n      if (newProps.portalClassName !== this.props.portalClassName) {\n        this.node.className = newProps.portalClassName;\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var _this2 = this;\n\n      if (!this.node) return;\n\n      refCount.remove(this);\n\n      if (this.props.ariaHideApp) {\n        ariaAppHider.show(this.props.appElement);\n      }\n\n      var state = this.portal.state;\n      var now = Date.now();\n      var closesAt = state.isOpen && this.props.closeTimeoutMS && (state.closesAt || now + this.props.closeTimeoutMS);\n\n      if (closesAt) {\n        if (!state.beforeClose) {\n          this.portal.closeWithTimeout();\n        }\n\n        setTimeout(function () {\n          return _this2.removePortal;\n        }, closesAt - now);\n      } else {\n        this.removePortal();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }], [{\n    key: 'setAppElement',\n    value: function setAppElement(element) {\n      ariaAppHider.setElement(element || AppElement);\n    }\n\n    /* eslint-disable no-console */\n\n  }, {\n    key: 'injectCSS',\n    value: function injectCSS() {\n      process.env.NODE_ENV !== \"production\" && console.warn('React-Modal: injectCSS has been deprecated ' + 'and no longer has any effect. It will be removed in a later version');\n    }\n    /* eslint-enable no-console */\n\n    /* eslint-disable react/no-unused-prop-types */\n\n    /* eslint-enable react/no-unused-prop-types */\n\n  }]);\n\n  return Modal;\n}(_react.Component);\n\nModal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  portalClassName: _propTypes2.default.string,\n  bodyOpenClassName: _propTypes2.default.string,\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  appElement: _propTypes2.default.instanceOf(SafeHTMLElement),\n  onAfterOpen: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  ariaHideApp: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  parentSelector: _propTypes2.default.func,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string.isRequired\n};\nModal.defaultProps = {\n  isOpen: false,\n  portalClassName: 'ReactModalPortal',\n  bodyOpenClassName: 'ReactModal__Body--open',\n  ariaHideApp: true,\n  closeTimeoutMS: 0,\n  shouldCloseOnOverlayClick: true,\n  parentSelector: function parentSelector() {\n    return document.body;\n  }\n};\nModal.defaultStyles = {\n  overlay: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(255, 255, 255, 0.75)'\n  },\n  content: {\n    position: 'absolute',\n    top: '40px',\n    left: '40px',\n    right: '40px',\n    bottom: '40px',\n    border: '1px solid #ccc',\n    background: '#fff',\n    overflow: 'auto',\n    WebkitOverflowScrolling: 'touch',\n    borderRadius: '4px',\n    outline: 'none',\n    padding: '20px'\n  }\n};\nexports.default = Modal;","/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n","module.exports = function(opts) {\n  return new ElementClass(opts)\n}\n\nfunction indexOf(arr, prop) {\n  if (arr.indexOf) return arr.indexOf(prop)\n  for (var i = 0, len = arr.length; i < len; i++)\n    if (arr[i] === prop) return i\n  return -1\n}\n\nfunction ElementClass(opts) {\n  if (!(this instanceof ElementClass)) return new ElementClass(opts)\n  var self = this\n  if (!opts) opts = {}\n\n  // similar doing instanceof HTMLElement but works in IE8\n  if (opts.nodeType) opts = {el: opts}\n\n  this.opts = opts\n  this.el = opts.el || document.body\n  if (typeof this.el !== 'object') this.el = document.querySelector(this.el)\n}\n\nElementClass.prototype.add = function(className) {\n  var el = this.el\n  if (!el) return\n  if (el.className === \"\") return el.className = className\n  var classes = el.className.split(' ')\n  if (indexOf(classes, className) > -1) return classes\n  classes.push(className)\n  el.className = classes.join(' ')\n  return classes\n}\n\nElementClass.prototype.remove = function(className) {\n  var el = this.el\n  if (!el) return\n  if (el.className === \"\") return\n  var classes = el.className.split(' ')\n  var idx = indexOf(classes, className)\n  if (idx > -1) classes.splice(idx, 1)\n  el.className = classes.join(' ')\n  return classes\n}\n\nElementClass.prototype.has = function(className) {\n  var el = this.el\n  if (!el) return\n  var classes = el.className.split(' ')\n  return indexOf(classes, className) > -1\n}\n\nElementClass.prototype.toggle = function(className) {\n  var el = this.el\n  if (!el) return\n  if (this.has(className)) this.remove(className)\n  else this.add(className)\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _focusManager = require('../helpers/focusManager');\n\nvar focusManager = _interopRequireWildcard(_focusManager);\n\nvar _scopeTab = require('../helpers/scopeTab');\n\nvar _scopeTab2 = _interopRequireDefault(_scopeTab);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// so that our CSS is statically analyzable\nvar CLASS_NAMES = {\n  overlay: 'ReactModal__Overlay',\n  content: 'ReactModal__Content'\n};\n\nvar TAB_KEY = 9;\nvar ESC_KEY = 27;\n\nvar ModalPortal = function (_Component) {\n  _inherits(ModalPortal, _Component);\n\n  function ModalPortal(props) {\n    _classCallCheck(this, ModalPortal);\n\n    var _this = _possibleConstructorReturn(this, (ModalPortal.__proto__ || Object.getPrototypeOf(ModalPortal)).call(this, props));\n\n    _this.setFocusAfterRender = function (focus) {\n      _this.focusAfterRender = focus;\n    };\n\n    _this.setOverlayRef = function (overlay) {\n      _this.overlay = overlay;\n    };\n\n    _this.setContentRef = function (content) {\n      _this.content = content;\n    };\n\n    _this.afterClose = function () {\n      focusManager.returnFocus();\n      focusManager.teardownScopedFocus();\n    };\n\n    _this.open = function () {\n      if (_this.state.afterOpen && _this.state.beforeClose) {\n        clearTimeout(_this.closeTimer);\n        _this.setState({ beforeClose: false });\n      } else {\n        focusManager.setupScopedFocus(_this.node);\n        focusManager.markForFocusLater();\n        _this.setState({ isOpen: true }, function () {\n          _this.setState({ afterOpen: true });\n\n          if (_this.props.isOpen && _this.props.onAfterOpen) {\n            _this.props.onAfterOpen();\n          }\n        });\n      }\n    };\n\n    _this.close = function () {\n      if (_this.props.closeTimeoutMS > 0) {\n        _this.closeWithTimeout();\n      } else {\n        _this.closeWithoutTimeout();\n      }\n    };\n\n    _this.focusContent = function () {\n      return _this.content && !_this.contentHasFocus() && _this.content.focus();\n    };\n\n    _this.closeWithTimeout = function () {\n      var closesAt = Date.now() + _this.props.closeTimeoutMS;\n      _this.setState({ beforeClose: true, closesAt: closesAt }, function () {\n        _this.closeTimer = setTimeout(_this.closeWithoutTimeout, _this.state.closesAt - Date.now());\n      });\n    };\n\n    _this.closeWithoutTimeout = function () {\n      _this.setState({\n        beforeClose: false,\n        isOpen: false,\n        afterOpen: false,\n        closesAt: null\n      }, _this.afterClose);\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (event.keyCode === TAB_KEY) {\n        (0, _scopeTab2.default)(_this.content, event);\n      }\n      if (event.keyCode === ESC_KEY) {\n        event.preventDefault();\n        _this.requestClose(event);\n      }\n    };\n\n    _this.handleOverlayOnClick = function (event) {\n      if (_this.shouldClose === null) {\n        _this.shouldClose = true;\n      }\n\n      if (_this.shouldClose && _this.props.shouldCloseOnOverlayClick) {\n        if (_this.ownerHandlesClose()) {\n          _this.requestClose(event);\n        } else {\n          _this.focusContent();\n        }\n      }\n      _this.shouldClose = null;\n    };\n\n    _this.handleContentOnClick = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.requestClose = function (event) {\n      return _this.ownerHandlesClose() && _this.props.onRequestClose(event);\n    };\n\n    _this.ownerHandlesClose = function () {\n      return _this.props.onRequestClose;\n    };\n\n    _this.shouldBeClosed = function () {\n      return !_this.state.isOpen && !_this.state.beforeClose;\n    };\n\n    _this.contentHasFocus = function () {\n      return document.activeElement === _this.content || _this.content.contains(document.activeElement);\n    };\n\n    _this.buildClassName = function (which, additional) {\n      var classNames = (typeof additional === 'undefined' ? 'undefined' : _typeof(additional)) === 'object' ? additional : {\n        base: CLASS_NAMES[which],\n        afterOpen: CLASS_NAMES[which] + '--after-open',\n        beforeClose: CLASS_NAMES[which] + '--before-close'\n      };\n      var className = classNames.base;\n      if (_this.state.afterOpen) {\n        className = className + ' ' + classNames.afterOpen;\n      }\n      if (_this.state.beforeClose) {\n        className = className + ' ' + classNames.beforeClose;\n      }\n      return typeof additional === 'string' && additional ? className + ' ' + additional : className;\n    };\n\n    _this.state = {\n      afterOpen: false,\n      beforeClose: false\n    };\n\n    _this.shouldClose = null;\n    return _this;\n  }\n\n  _createClass(ModalPortal, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Focus needs to be set when mounting and already open\n      if (this.props.isOpen) {\n        this.setFocusAfterRender(true);\n        this.open();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(newProps) {\n      // Focus only needs to be set once when the modal is being opened\n      if (!this.props.isOpen && newProps.isOpen) {\n        this.setFocusAfterRender(true);\n        this.open();\n      } else if (this.props.isOpen && !newProps.isOpen) {\n        this.close();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.focusAfterRender) {\n        this.focusContent();\n        this.setFocusAfterRender(false);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this.closeTimer);\n    }\n\n    // Don't steal focus from inner elements\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          className = _props.className,\n          overlayClassName = _props.overlayClassName,\n          defaultStyles = _props.defaultStyles;\n\n      var contentStyles = className ? {} : defaultStyles.content;\n      var overlayStyles = overlayClassName ? {} : defaultStyles.overlay;\n\n      return this.shouldBeClosed() ? _react2.default.createElement('div', null) : _react2.default.createElement(\n        'div',\n        {\n          ref: this.setOverlayRef,\n          className: this.buildClassName('overlay', overlayClassName),\n          style: _extends({}, overlayStyles, this.props.style.overlay),\n          onClick: this.handleOverlayOnClick },\n        _react2.default.createElement(\n          'div',\n          {\n            ref: this.setContentRef,\n            style: _extends({}, contentStyles, this.props.style.content),\n            className: this.buildClassName('content', className),\n            tabIndex: '-1',\n            onKeyDown: this.handleKeyDown,\n            onClick: this.handleContentOnClick,\n            role: this.props.role,\n            'aria-label': this.props.contentLabel },\n          this.props.children\n        )\n      );\n    }\n  }]);\n\n  return ModalPortal;\n}(_react.Component);\n\nModalPortal.defaultProps = {\n  style: {\n    overlay: {},\n    content: {}\n  }\n};\nModalPortal.propTypes = {\n  isOpen: _propTypes.PropTypes.bool.isRequired,\n  defaultStyles: _propTypes.PropTypes.shape({\n    content: _propTypes.PropTypes.object,\n    overlay: _propTypes.PropTypes.object\n  }),\n  style: _propTypes.PropTypes.shape({\n    content: _propTypes.PropTypes.object,\n    overlay: _propTypes.PropTypes.object\n  }),\n  className: _propTypes.PropTypes.oneOfType([_propTypes.PropTypes.string, _propTypes.PropTypes.object]),\n  overlayClassName: _propTypes.PropTypes.oneOfType([_propTypes.PropTypes.string, _propTypes.PropTypes.object]),\n  onAfterOpen: _propTypes.PropTypes.func,\n  onRequestClose: _propTypes.PropTypes.func,\n  closeTimeoutMS: _propTypes.PropTypes.number,\n  shouldCloseOnOverlayClick: _propTypes.PropTypes.bool,\n  role: _propTypes.PropTypes.string,\n  contentLabel: _propTypes.PropTypes.string,\n  children: _propTypes.PropTypes.node\n};\nexports.default = ModalPortal;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleBlur = handleBlur;\nexports.handleFocus = handleFocus;\nexports.markForFocusLater = markForFocusLater;\nexports.returnFocus = returnFocus;\nexports.setupScopedFocus = setupScopedFocus;\nexports.teardownScopedFocus = teardownScopedFocus;\n\nvar _tabbable = require('../helpers/tabbable');\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar focusLaterElements = [];\nvar modalElement = null;\nvar needToFocus = false;\n\nfunction handleBlur() {\n  needToFocus = true;\n}\n\nfunction handleFocus() {\n  if (needToFocus) {\n    needToFocus = false;\n    if (!modalElement) {\n      return;\n    }\n    // need to see how jQuery shims document.on('focusin') so we don't need the\n    // setTimeout, firefox doesn't support focusin, if it did, we could focus\n    // the element outside of a setTimeout. Side-effect of this implementation\n    // is that the document.body gets focus, and then we focus our element right\n    // after, seems fine.\n    setTimeout(function () {\n      if (modalElement.contains(document.activeElement)) {\n        return;\n      }\n      var el = (0, _tabbable2.default)(modalElement)[0] || modalElement;\n      el.focus();\n    }, 0);\n  }\n}\n\nfunction markForFocusLater() {\n  focusLaterElements.push(document.activeElement);\n}\n\n/* eslint-disable no-console */\nfunction returnFocus() {\n  var toFocus = null;\n  try {\n    toFocus = focusLaterElements.pop();\n    toFocus.focus();\n    return;\n  } catch (e) {\n    console.warn(['You tried to return focus to', toFocus, 'but it is not in the DOM anymore'].join(\" \"));\n  }\n}\n/* eslint-enable no-console */\n\nfunction setupScopedFocus(element) {\n  modalElement = element;\n\n  if (window.addEventListener) {\n    window.addEventListener('blur', handleBlur, false);\n    document.addEventListener('focus', handleFocus, true);\n  } else {\n    window.attachEvent('onBlur', handleBlur);\n    document.attachEvent('onFocus', handleFocus);\n  }\n}\n\nfunction teardownScopedFocus() {\n  modalElement = null;\n\n  if (window.addEventListener) {\n    window.removeEventListener('blur', handleBlur);\n    document.removeEventListener('focus', handleFocus);\n  } else {\n    window.detachEvent('onBlur', handleBlur);\n    document.detachEvent('onFocus', handleFocus);\n  }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = findTabbableDescendants;\n/*!\n * Adapted from jQuery UI core\n *\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n\nvar tabbableNode = /input|select|textarea|button|object/;\n\nfunction hidden(el) {\n  return el.offsetWidth <= 0 && el.offsetHeight <= 0 || el.style.display === 'none';\n}\n\nfunction visible(element) {\n  var parentElement = element;\n  while (parentElement) {\n    if (parentElement === document.body) break;\n    if (hidden(parentElement)) return false;\n    parentElement = parentElement.parentNode;\n  }\n  return true;\n}\n\nfunction focusable(element, isTabIndexNotNaN) {\n  var nodeName = element.nodeName.toLowerCase();\n  var res = tabbableNode.test(nodeName) && !element.disabled || (nodeName === \"a\" ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);\n  return res && visible(element);\n}\n\nfunction tabbable(element) {\n  var tabIndex = element.getAttribute('tabindex');\n  if (tabIndex === null) tabIndex = undefined;\n  var isTabIndexNaN = isNaN(tabIndex);\n  return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\n}\n\nfunction findTabbableDescendants(element) {\n  return [].slice.call(element.querySelectorAll('*'), 0).filter(tabbable);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = scopeTab;\n\nvar _tabbable = require('./tabbable');\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction scopeTab(node, event) {\n  var tabbable = (0, _tabbable2.default)(node);\n  if (!tabbable.length) {\n    event.preventDefault();\n    return;\n  }\n  var finalTabbable = tabbable[event.shiftKey ? 0 : tabbable.length - 1];\n  var leavingFinalTabbable = finalTabbable === document.activeElement ||\n  // handle immediate shift+tab after opening with mouse\n  node === document.activeElement;\n  if (!leavingFinalTabbable) return;\n  event.preventDefault();\n  var target = tabbable[event.shiftKey ? tabbable.length - 1 : 0];\n  target.focus();\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setElement = setElement;\nexports.validateElement = validateElement;\nexports.hide = hide;\nexports.show = show;\nexports.toggle = toggle;\nexports.resetForTesting = resetForTesting;\nvar globalElement = typeof document !== 'undefined' ? document.body : null;\n\nfunction setElement(element) {\n  var useElement = element;\n  if (typeof useElement === 'string') {\n    var el = document.querySelectorAll(useElement);\n    useElement = 'length' in el ? el[0] : el;\n  }\n  globalElement = useElement || globalElement;\n  return globalElement;\n}\n\nfunction validateElement(appElement) {\n  if (!appElement && !globalElement) {\n    throw new Error(['react-modal: You must set an element with', '`Modal.setAppElement(el)` to make this accessible']);\n  }\n}\n\nfunction hide(appElement) {\n  validateElement(appElement);\n  (appElement || globalElement).setAttribute('aria-hidden', 'true');\n}\n\nfunction show(appElement) {\n  validateElement(appElement);\n  (appElement || globalElement).removeAttribute('aria-hidden');\n}\n\nfunction toggle(shouldHide, appElement) {\n  var apply = shouldHide ? hide : show;\n  apply(appElement);\n}\n\nfunction resetForTesting() {\n  globalElement = document.body;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.add = add;\nexports.remove = remove;\nexports.count = count;\nvar modals = [];\n\nfunction add(element) {\n  if (modals.indexOf(element) === -1) {\n    modals.push(element);\n  }\n}\n\nfunction remove(element) {\n  var index = modals.indexOf(element);\n  if (index === -1) {\n    return;\n  }\n  modals.splice(index, 1);\n}\n\nfunction count() {\n  return modals.length;\n}","import * as React from 'react';\r\nimport * as CopyToClipboard from 'react-copy-to-clipboard';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport * as TetherComponent from 'react-tether';\r\nimport {InlineData} from 'vega-lite/build/src/data';\r\nimport {isDiscrete, isFieldDef} from 'vega-lite/build/src/fielddef';\r\nimport {SortField, SortOrder} from 'vega-lite/build/src/sort';\r\nimport {TopLevelFacetedUnitSpec} from 'vega-lite/build/src/spec';\r\nimport {BOOKMARK_MODIFY_NOTE, BookmarkAction} from '../../actions/bookmark';\r\nimport {LogAction} from '../../actions/log';\r\nimport {ActionHandler} from '../../actions/redux-action';\r\nimport {ResultAction} from '../../actions/result';\r\nimport {ShelfAction, SPEC_LOAD} from '../../actions/shelf';\r\nimport {SHELF_PREVIEW_DISABLE, SHELF_PREVIEW_SPEC, ShelfPreviewAction} from '../../actions/shelf-preview';\r\nimport {PLOT_HOVER_MIN_DURATION} from '../../constants';\r\nimport {Bookmark} from '../../models/bookmark';\r\nimport {PlotFieldInfo, ResultPlot} from '../../models/result';\r\nimport {ShelfFilter, toTransforms} from '../../models/shelf/filter';\r\nimport {Field} from '../field/index';\r\nimport {Logger} from '../util/util.logger';\r\nimport {VegaLite} from '../vega-lite/index';\r\nimport {BookmarkButton} from './bookmarkbutton';\r\nimport * as styles from './plot.scss';\r\n\r\nexport interface PlotProps extends ActionHandler<\r\n  ShelfAction | BookmarkAction | ShelfPreviewAction | ResultAction | LogAction\r\n> {\r\n  data: InlineData;\r\n  filters: ShelfFilter[];\r\n  fieldInfos?: PlotFieldInfo[];\r\n  isPlotListItem?: boolean;\r\n  showBookmarkButton?: boolean;\r\n  showSpecifyButton?: boolean;\r\n\r\n  onSort?: (channel: 'x' | 'y', sort: SortField<string> | SortOrder) => void;\r\n\r\n  spec: TopLevelFacetedUnitSpec;\r\n  bookmark?: Bookmark;\r\n\r\n  // specified when it's in the modal\r\n  // so we can close the modal when the specify button is clicked.\r\n  closeModal?: () => void;\r\n}\r\n\r\n\r\nexport interface PlotState {\r\n  hovered: boolean;\r\n  preview: boolean;\r\n  copiedPopupIsOpened: boolean;\r\n}\r\n\r\nexport class PlotBase extends React.PureComponent<PlotProps, PlotState> {\r\n\r\n  private hoverTimeoutId: number;\r\n  private previewTimeoutId: number;\r\n  private vegaLiteWrapper: HTMLElement;\r\n  private plotLogger: Logger;\r\n\r\n  constructor(props: PlotProps) {\r\n    super(props);\r\n    this.state = {\r\n      hovered: false,\r\n      preview: false,\r\n      copiedPopupIsOpened: false\r\n    };\r\n\r\n    // Bind - https://facebook.github.io/react/docs/handling-events.html\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.onMouseEnter = this.onMouseEnter.bind(this);\r\n    this.onMouseLeave = this.onMouseLeave.bind(this);\r\n    this.onPreviewMouseEnter = this.onPreviewMouseEnter.bind(this);\r\n    this.onPreviewMouseLeave = this.onPreviewMouseLeave.bind(this);\r\n    this.onSpecify = this.onSpecify.bind(this);\r\n    this.onSort = this.onSort.bind(this);\r\n\r\n    this.plotLogger = new Logger(props.handleAction);\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: PlotProps, prevState: PlotState) {\r\n    // We have to check this here since we do not know if it is vertically overflown\r\n    // during render time.\r\n    if (!this.isVerticallyOverFlown(this.vegaLiteWrapper) && this.state.hovered) {\r\n      // add a padding similar to .plot\r\n      this.vegaLiteWrapper.style.paddingRight = '11px';\r\n    } else {\r\n      // reset state otherwise, so we clean up what we add in the case above.\r\n      delete this.vegaLiteWrapper.style.paddingRight;\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const {isPlotListItem, onSort, showBookmarkButton, showSpecifyButton, spec, data} = this.props;\r\n\r\n    let notesDiv;\r\n    const specKey = JSON.stringify(spec);\r\n    if (this.props.bookmark.dict[specKey]) {\r\n      notesDiv = (\r\n        <textarea\r\n          styleName='note'\r\n          placeholder={'notes'}\r\n          value={this.props.bookmark.dict[specKey].note}\r\n          onChange={this.handleTextChange}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div styleName={isPlotListItem ? 'plot-list-item-group' : 'plot-group'}>\r\n        <div styleName=\"plot-info\">\r\n          <div styleName=\"command-toolbox\">\r\n            {onSort && this.renderSortButton('x')}\r\n            {onSort && this.renderSortButton('y')}\r\n            {showBookmarkButton && this.renderBookmarkButton()}\r\n            {showSpecifyButton && this.renderSpecifyButton()}\r\n            <span styleName='command'>\r\n              <TetherComponent\r\n                attachment='bottom left'\r\n                offset='0px 30px'\r\n              >\r\n                {this.renderCopySpecButton()}\r\n                {this.state.copiedPopupIsOpened && <span styleName='copied'>copied</span>}\r\n              </TetherComponent>\r\n            </span>\r\n          </div>\r\n          <span\r\n            onMouseEnter={this.onPreviewMouseEnter}\r\n            onMouseLeave={this.onPreviewMouseLeave}\r\n          >\r\n            {this.renderFields()}\r\n          </span>\r\n        </div>\r\n        <div\r\n          ref={this.vegaLiteWrapperRefHandler}\r\n          styleName={this.state.hovered ? 'plot-scroll' : 'plot'}\r\n          className=\"persist-scroll\"\r\n          onMouseEnter={this.onMouseEnter}\r\n          onMouseLeave={this.onMouseLeave}\r\n        >\r\n          <VegaLite spec={spec} logger={this.plotLogger} data={data}/>\r\n        </div>\r\n        {notesDiv}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this.clearHoverTimeout();\r\n  }\r\n\r\n  private renderFields() {\r\n    const {fieldInfos} = this.props;\r\n    if (fieldInfos) {\r\n      return fieldInfos.map(fieldInfo => {\r\n        const {fieldDef, isEnumeratedWildcardField} = fieldInfo;\r\n        return (\r\n          <div styleName=\"plot-field-info\" key={JSON.stringify(fieldDef)}>\r\n            <Field\r\n              fieldDef={fieldDef}\r\n              caretShow={false}\r\n              draggable={false}\r\n              isEnumeratedWildcardField={isEnumeratedWildcardField}\r\n              isPill={false}\r\n            />\r\n          </div>\r\n        );\r\n      });\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  private clearHoverTimeout() {\r\n    if (this.hoverTimeoutId) {\r\n      clearTimeout(this.hoverTimeoutId);\r\n      this.hoverTimeoutId = undefined;\r\n    }\r\n  }\r\n\r\n  private clearPreviewTimeout() {\r\n    if (this.previewTimeoutId) {\r\n      clearTimeout(this.previewTimeoutId);\r\n      this.previewTimeoutId = undefined;\r\n    }\r\n  }\r\n\r\n  private onMouseEnter() {\r\n    this.hoverTimeoutId = window.setTimeout(\r\n      () => {\r\n        // TODO log action\r\n        this.setState({hovered: true});\r\n        this.hoverTimeoutId = undefined;\r\n      },\r\n      PLOT_HOVER_MIN_DURATION\r\n    );\r\n  }\r\n\r\n  private onMouseLeave() {\r\n    this.clearHoverTimeout();\r\n    if (this.state.hovered) {\r\n      this.setState({hovered: false});\r\n    }\r\n  }\r\n\r\n  private onSort(channel: 'x' | 'y') {\r\n    // TODO: really take `sort` as input instead of toggling like this\r\n    const {spec, onSort} = this.props;\r\n    const channelDef = spec.encoding[channel];\r\n    if (isFieldDef(channelDef)) {\r\n      const sort = channelDef.sort === 'descending' ? undefined : 'descending';\r\n      onSort(channel, sort);\r\n    }\r\n  }\r\n\r\n  private onSpecify() {\r\n    if (this.props.closeModal) {\r\n      this.props.closeModal();\r\n    }\r\n    this.onPreviewMouseLeave();\r\n    const {handleAction, spec} = this.props;\r\n    handleAction({\r\n      type: SPEC_LOAD,\r\n      payload: {spec, keepWildcardMark: true}\r\n    });\r\n  }\r\n\r\n  private onPreviewMouseEnter() {\r\n    this.previewTimeoutId = window.setTimeout(\r\n      () => {\r\n        const {handleAction, spec} = this.props;\r\n        this.setState({preview: true});\r\n        handleAction({\r\n          type: SHELF_PREVIEW_SPEC,\r\n          payload: {spec}\r\n        });\r\n        this.previewTimeoutId = undefined;\r\n      },\r\n      PLOT_HOVER_MIN_DURATION\r\n    );\r\n  }\r\n\r\n  private onPreviewMouseLeave() {\r\n    this.clearPreviewTimeout();\r\n    if (this.state.preview) {\r\n      this.setState({preview: false});\r\n      const {handleAction} = this.props;\r\n      handleAction({type: SHELF_PREVIEW_DISABLE});\r\n    }\r\n  }\r\n\r\n  private renderSortButton(channel: 'x' | 'y') {\r\n    const {spec} = this.props;\r\n    const channelDef = spec.encoding[channel];\r\n    if (isFieldDef(channelDef) && isDiscrete(channelDef)) {\r\n      return <i\r\n        title='Sort'\r\n        className=\"fa fa-sort-alpha-asc\"\r\n        styleName={channel === 'x' ? 'sort-x-command' : 'command'}\r\n        onClick={this.onSort.bind(this, channel)}\r\n      />;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  private renderSpecifyButton() {\r\n    return <i\r\n      title='Specify'\r\n      className=\"fa fa-server\"\r\n      styleName=\"specify-command\"\r\n      onClick={this.onSpecify}\r\n      onMouseEnter={this.onPreviewMouseEnter}\r\n      onMouseLeave={this.onPreviewMouseLeave}\r\n    />;\r\n  }\r\n\r\n  private renderBookmarkButton() {\r\n    const plot: ResultPlot = {\r\n      fieldInfos: this.props.fieldInfos,\r\n      spec: this.specWithFilter\r\n    };\r\n    return (\r\n      <BookmarkButton\r\n        bookmark={this.props.bookmark}\r\n        plot={plot}\r\n        handleAction={this.props.handleAction}\r\n      />\r\n    );\r\n  }\r\n\r\n  private handleTextChange(event: any) {\r\n    const {handleAction} = this.props;\r\n    handleAction({\r\n      type: BOOKMARK_MODIFY_NOTE,\r\n      payload: {\r\n        note: event.target.value,\r\n        spec: this.props.spec\r\n      }\r\n    });\r\n  }\r\n\r\n  private get specWithFilter() {\r\n    const {spec, filters} = this.props;\r\n    const transform = (spec.transform || []).concat(toTransforms(filters));\r\n    return {\r\n      ...spec,\r\n      ...(transform.length > 0 ? {transform} : {})\r\n    };\r\n  }\r\n\r\n  private renderCopySpecButton() {\r\n    // TODO: spec would only contain NamedData, but not the actual data.\r\n    // Need to augment spec.data\r\n    // TODO instead of pre-generating a text for the copy button, which\r\n    // takes a lot of memory for each plot\r\n    // Can only generate the text only when the button is clicked?\r\n    return (\r\n      <CopyToClipboard\r\n        onCopy={this.copied.bind(this)}\r\n        text={JSON.stringify(this.specWithFilter, null, 2)}>\r\n        <i title='Copy' className='fa fa-clipboard' />\r\n      </CopyToClipboard>\r\n    );\r\n  }\r\n\r\n  private copied() {\r\n    this.setState({\r\n      copiedPopupIsOpened: true\r\n    });\r\n    window.setTimeout(() => {\r\n      this.setState({\r\n        copiedPopupIsOpened: false\r\n      });\r\n    }, 1000);\r\n  }\r\n\r\n  private isVerticallyOverFlown(element: HTMLElement) {\r\n    return element.scrollHeight > element.clientHeight;\r\n  }\r\n\r\n  private vegaLiteWrapperRefHandler = (ref: any) => {\r\n    this.vegaLiteWrapper = ref;\r\n  }\r\n}\r\n\r\nexport const Plot = CSSModules(PlotBase, styles);\r\n","\"use strict\";\n\nvar _require = require('./Component'),\n    CopyToClipboard = _require.CopyToClipboard;\n\nCopyToClipboard.CopyToClipboard = CopyToClipboard;\nmodule.exports = CopyToClipboard;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CopyToClipboard = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _copyToClipboard = _interopRequireDefault(require(\"copy-to-clipboard\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar CopyToClipboard =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(CopyToClipboard, _React$PureComponent);\n\n  function CopyToClipboard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CopyToClipboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CopyToClipboard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event) {\n      var _this$props = _this.props,\n          text = _this$props.text,\n          onCopy = _this$props.onCopy,\n          children = _this$props.children,\n          options = _this$props.options;\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      var result = (0, _copyToClipboard[\"default\"])(text, options);\n\n      if (onCopy) {\n        onCopy(text, result);\n      } // Bypass onClick if it was present\n\n\n      if (elem && elem.props && typeof elem.props.onClick === 'function') {\n        elem.props.onClick(event);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(CopyToClipboard, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          _text = _this$props2.text,\n          _onCopy = _this$props2.onCopy,\n          _options = _this$props2.options,\n          children = _this$props2.children,\n          props = _objectWithoutProperties(_this$props2, [\"text\", \"onCopy\", \"options\", \"children\"]);\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      return _react[\"default\"].cloneElement(elem, _objectSpread({}, props, {\n        onClick: this.onClick\n      }));\n    }\n  }]);\n\n  return CopyToClipboard;\n}(_react[\"default\"].PureComponent);\n\nexports.CopyToClipboard = CopyToClipboard;\n\n_defineProperty(CopyToClipboard, \"defaultProps\", {\n  onCopy: undefined,\n  options: undefined\n});","'use strict';\n\nvar deselectCurrent = require('toggle-selection');\n\nvar defaultMessage = 'Copy to clipboard: #{key}, Enter';\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? '' : 'Ctrl') + '+C';\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug, message, reselectPrevious, range, selection, mark, success = false;\n  if (!options) { options = {}; }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement('span');\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = 'unset';\n    // prevents scrolling to the end of the page\n    mark.style.position = 'fixed';\n    mark.style.top = 0;\n    mark.style.clip = 'rect(0, 0, 0, 0)';\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = 'pre';\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = 'text';\n    mark.style.MozUserSelect = 'text';\n    mark.style.msUserSelect = 'text';\n    mark.style.userSelect = 'text';\n\n    document.body.appendChild(mark);\n\n    range.selectNode(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand('copy');\n    if (!successful) {\n      throw new Error('copy command was unsuccessful');\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error('unable to copy using execCommand: ', err);\n    debug && console.warn('trying IE specific stuff');\n    try {\n      window.clipboardData.setData('text', text);\n      success = true;\n    } catch (err) {\n      debug && console.error('unable to copy using clipboardData: ', err);\n      debug && console.error('falling back to prompt');\n      message = format('message' in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == 'function') {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","import {LOG_ERRORS_ADD, LOG_WARNINGS_ADD, LogAction} from '../../actions/log';\r\n\r\nexport class Logger {\r\n  private handleAction: (action: LogAction) => void;\r\n\r\n  constructor(handleAction: (action: LogAction) => void) {\r\n    this.handleAction = handleAction;\r\n  }\r\n\r\n  public level() {\r\n    return this;\r\n  }\r\n\r\n  public error(...args: string[]) {\r\n    this.handleAction({\r\n      type: LOG_ERRORS_ADD,\r\n      payload: {\r\n        errors: args\r\n      }\r\n    });\r\n  }\r\n\r\n  public warn(...args: string[]) {\r\n    this.handleAction({\r\n      type: LOG_WARNINGS_ADD,\r\n      payload: {\r\n        warnings: args,\r\n        level: 'warn'\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  public info(...args: string[]) {\r\n    this.handleAction({\r\n      type: LOG_WARNINGS_ADD,\r\n      payload: {\r\n        warnings: args,\r\n        level: 'info'\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  public debug(...args: string[]) {\r\n    this.handleAction({\r\n      type: LOG_WARNINGS_ADD,\r\n      payload: {\r\n        warnings: args,\r\n        level: 'debug'\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport {ClipLoader} from 'react-spinners';\r\nimport * as vega from 'vega';\r\nimport * as vl from 'vega-lite';\r\nimport {TopLevelSpec} from 'vega-lite';\r\nimport {InlineData, isNamedData} from 'vega-lite/build/src/data';\r\nimport * as vegaTooltip from 'vega-tooltip';\r\nimport {SPINNER_COLOR} from '../../constants';\r\nimport {Logger} from '../util/util.logger';\r\n\r\nexport interface VegaLiteProps {\r\n  spec: TopLevelSpec;\r\n\r\n  renderer?: 'svg' | 'canvas';\r\n\r\n  logger: Logger;\r\n\r\n  data: InlineData;\r\n\r\n  viewRunAfter?: (view: vega.View) => any;\r\n}\r\n\r\nexport interface VegaLiteState {\r\n  isLoading: boolean;\r\n}\r\n\r\nconst CHART_REF = 'chart';\r\n\r\nexport class VegaLite extends React.PureComponent<VegaLiteProps, VegaLiteState> {\r\n  private view: vega.View;\r\n  private size: {width: number, height: number};\r\n\r\n  private mountTimeout: number;\r\n  private updateTimeout: number;\r\n\r\n  constructor(props: VegaLiteProps) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: true\r\n    };\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div>\r\n        <ClipLoader color={SPINNER_COLOR} loading={this.state.isLoading}/>\r\n        <div className='chart' ref={CHART_REF}/>\r\n        {/* chart is defined in app.scss */}\r\n        <div id=\"vis-tooltip\" className=\"vg-tooltip\"/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public componentDidMount() {\r\n    if (this.mountTimeout) {\r\n      clearTimeout(this.mountTimeout);\r\n    }\r\n    this.setState({\r\n      isLoading: true\r\n    });\r\n    this.mountTimeout = window.setTimeout(() => {\r\n      this.updateSpec();\r\n      this.runView();\r\n      this.setState({\r\n        isLoading: false\r\n      });\r\n    });\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: VegaLiteProps) {\r\n    if (nextProps.spec !== this.props.spec) {\r\n      this.setState({\r\n        isLoading: true\r\n      });\r\n      this.size = this.getChartSize();\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: VegaLiteProps, prevState: VegaLiteState) {\r\n    if (this.updateTimeout) {\r\n      clearTimeout(this.updateTimeout);\r\n    }\r\n    this.updateTimeout = window.setTimeout(\r\n      (spec: TopLevelSpec, data: InlineData) => {\r\n        if (prevProps.spec !== spec) {\r\n          const chart = this.refs[CHART_REF] as HTMLElement;\r\n          chart.style.width = this.size.width + 'px';\r\n          chart.style.height = this.size.height + 'px';\r\n          this.updateSpec();\r\n        } else if (prevProps.data !== data) {\r\n          this.bindData();\r\n        }\r\n        this.runView();\r\n        this.setState({\r\n          isLoading: false\r\n        });\r\n      },\r\n      0, this.props.spec, this.props.data\r\n    );\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    if (this.mountTimeout) {\r\n      clearTimeout(this.mountTimeout);\r\n    }\r\n\r\n    if (this.updateTimeout) {\r\n      clearTimeout(this.updateTimeout);\r\n    }\r\n\r\n    if (this.view) {\r\n      this.view.finalize();\r\n    }\r\n  }\r\n\r\n  protected updateSpec() {\r\n    // NOTE: spec used to test warning logger\r\n    // vlSpec = {\r\n    //   \"description\": \"A simple bar chart with embedded data.\",\r\n    //   \"data\": {\r\n    //     \"values\": [\r\n    //       {\"a\": \"A\", \"b\": 28},\r\n    //       {\"a\": \"B\", \"b\": 55},\r\n    //       {\"a\": \"C\", \"b\": 43},\r\n    //       {\"a\": \"D\", \"b\": 91},\r\n    //       {\"a\": \"E\", \"b\": 81},\r\n    //       {\"a\": \"F\", \"b\": 53},\r\n    //       {\"a\": \"G\", \"b\": 19},\r\n    //       {\"a\": \"H\", \"b\": 87},\r\n    //       {\"a\": \"I\", \"b\": 52}\r\n    //     ]\r\n    //   },\r\n    //   \"mark\": \"bar\",\r\n    //   \"encoding\": {\r\n    //     \"x\": {\"field\": \"a\", \"type\": \"quantitative\"},\r\n    //     \"y\": {\"field\": \"b\", \"type\": \"quantitative\"}\r\n    //   }\r\n    // };\r\n    const {logger} = this.props;\r\n    const vlSpec = this.props.spec;\r\n    try {\r\n      const spec = vl.compile(vlSpec, {logger}).spec;\r\n      const runtime = vega.parse(spec, vlSpec.config);\r\n      this.view = new vega.View(runtime)\r\n        .logLevel(vega.Warn)\r\n        .initialize(this.refs[CHART_REF] as any)\r\n        .renderer(this.props.renderer || 'canvas')\r\n        .hover();\r\n      vegaTooltip.vega(this.view);\r\n      this.bindData();\r\n    } catch (err) {\r\n      logger.error(err);\r\n    }\r\n  }\r\n\r\n\r\n  private bindData() {\r\n    const {data, spec} = this.props;\r\n    if (data && isNamedData(spec.data)) {\r\n      this.view.change(spec.data.name,\r\n        vega.changeset()\r\n            .remove(() => true) // remove previous data\r\n            .insert(data.values)\r\n      );\r\n    }\r\n  }\r\n\r\n  private runView() {\r\n    try {\r\n      this.view.run();\r\n      if (this.props.viewRunAfter) {\r\n        this.view.runAfter(this.props.viewRunAfter);\r\n      }\r\n    } catch (err) {\r\n      this.props.logger.error(err);\r\n    }\r\n  }\r\n\r\n  private getChartSize(): {width: number, height: number} {\r\n    const chart = this.refs[CHART_REF] as HTMLElement;\r\n    const chartContainer = chart.querySelector(this.props.renderer || 'canvas');\r\n    const width = Number(chartContainer.getAttribute('width'));\r\n    const height = Number(chartContainer.getAttribute('height'));\r\n    return {width, height};\r\n  }\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__728__;","module.exports = __WEBPACK_EXTERNAL_MODULE__729__;","module.exports = __WEBPACK_EXTERNAL_MODULE__730__;","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport * as TetherComponent from 'react-tether';\r\nimport {BOOKMARK_ADD_PLOT, BOOKMARK_REMOVE_PLOT, BookmarkAction} from '../../actions/bookmark';\r\nimport {ActionHandler} from '../../actions/redux-action';\r\nimport {Bookmark} from '../../models/bookmark';\r\nimport {ResultPlot} from '../../models/result';\r\nimport * as styles from './bookmarkbutton.scss';\r\n\r\n\r\n\r\nexport interface BookmarkProps extends ActionHandler<BookmarkAction> {\r\n  bookmark: Bookmark;\r\n  plot: ResultPlot;\r\n}\r\n\r\nexport interface BookmarkButtonState {\r\n  openDialog: boolean;\r\n}\r\n\r\nexport class BookmarkButtonBase extends React.PureComponent<BookmarkProps, BookmarkButtonState> {\r\n  private bookmarkDialog: HTMLElement;\r\n  private bookmarkPopup: HTMLElement;\r\n  constructor(props: BookmarkProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      openDialog: false\r\n    };\r\n\r\n    this.onBookmarkRemove = this.onBookmarkRemove.bind(this);\r\n    this.onBookmarkAdd = this.onBookmarkAdd.bind(this);\r\n    this.onBookmarkClick = this.onBookmarkClick.bind(this);\r\n    this.onKeepBookmark = this.onKeepBookmark.bind(this);\r\n  }\r\n\r\n  public componentWillUpdate(nextProps: BookmarkProps, nextState: BookmarkButtonState) {\r\n    if (!nextState) {\r\n      return;\r\n    }\r\n\r\n    if (nextState.openDialog) {\r\n      document.addEventListener('click', this.handleClickOutside.bind(this), true);\r\n    } else if (this.state.openDialog) {\r\n      document.removeEventListener('click', this.handleClickOutside.bind(this), true);\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const styleName = (this.isBookmarked()) ? 'bookmark-command-selected' : 'command';\r\n\r\n    return (\r\n      <TetherComponent\r\n        attachment=\"top right\"\r\n        targetAttachment=\"bottom left\"\r\n      >\r\n        <i\r\n          title='Bookmark'\r\n          className=\"fa fa-bookmark\"\r\n          styleName={styleName}\r\n          onClick={this.onBookmarkClick}\r\n        />\r\n\r\n        {\r\n          this.state.openDialog &&\r\n          <div styleName='bookmark-alert' ref={this.alertHandler}>\r\n            <div ref={this.bookmarkHandler}>Remove Bookmark?</div>\r\n            <small>Your notes will be lost.</small>\r\n            <div>\r\n              <a onClick={this.onBookmarkRemove}>\r\n                <span styleName='fa-span'><i className=\"fa fa-trash-o\"/>&nbsp;Remove it&nbsp;&nbsp;</span>\r\n              </a>\r\n              <a onClick={this.onKeepBookmark}>\r\n                <span styleName='fa-span'><i className=\"fa fa-bookmark\"/>&nbsp;Keep it&nbsp;&nbsp;</span>\r\n              </a>\r\n            </div>\r\n          </div>\r\n        }\r\n      </TetherComponent>\r\n    );\r\n  }\r\n\r\n  private onKeepBookmark() {\r\n    this.setState({openDialog: false});\r\n  }\r\n\r\n  private isBookmarked() {\r\n    const {bookmark, plot} = this.props;\r\n    return !!bookmark.dict[JSON.stringify(plot.spec)];\r\n  }\r\n\r\n  private onBookmarkClick() {\r\n    if (this.isBookmarked()) {\r\n      this.setState({openDialog: !this.state.openDialog});\r\n    } else {\r\n      this.onBookmarkAdd();\r\n    }\r\n  }\r\n\r\n  private onBookmarkRemove() {\r\n    this.setState({openDialog: false});\r\n    this.props.handleAction({\r\n      type: BOOKMARK_REMOVE_PLOT,\r\n      payload: {\r\n        spec: this.props.plot.spec\r\n      }\r\n    });\r\n  }\r\n\r\n  private onBookmarkAdd() {\r\n    this.props.handleAction({\r\n      type: BOOKMARK_ADD_PLOT,\r\n      payload: {\r\n        plot: this.props.plot\r\n      }\r\n    });\r\n  }\r\n\r\n  private bookmarkHandler = (ref: any) => {\r\n    this.bookmarkPopup = ref;\r\n  }\r\n\r\n  private alertHandler = (ref: any) => {\r\n    this.bookmarkDialog = ref;\r\n  }\r\n\r\n  private handleClickOutside(e: any) {\r\n    if (this.bookmarkPopup && this.bookmarkDialog && (this.bookmarkDialog.contains(e.target) ||\r\n      this.bookmarkPopup.contains(e.target))) {\r\n      return;\r\n    }\r\n    this.setState({\r\n      openDialog: false\r\n    });\r\n  }\r\n}\r\n\r\nexport const BookmarkButton = CSSModules(BookmarkButtonBase, styles);\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"plot-group\":\"bookmarkbutton__plot-group\",\"plot-list-item-group\":\"bookmarkbutton__plot-list-item-group\",\"plot\":\"bookmarkbutton__plot\",\"plot-scroll\":\"bookmarkbutton__plot-scroll\",\"plot-info\":\"bookmarkbutton__plot-info\",\"plot-field-info\":\"bookmarkbutton__plot-field-info\",\"command-toolbox\":\"bookmarkbutton__command-toolbox\",\"command\":\"bookmarkbutton__command\",\"sort-x-command\":\"bookmarkbutton__sort-x-command\",\"specify-command\":\"bookmarkbutton__specify-command\",\"bookmark-command-selected\":\"bookmarkbutton__bookmark-command-selected\",\"copied\":\"bookmarkbutton__copied\",\"note\":\"bookmarkbutton__note\",\"bookmark-alert\":\"bookmarkbutton__bookmark-alert\",\"fa-span\":\"bookmarkbutton__fa-span\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"plot-group\":\"plot__plot-group\",\"plot-list-item-group\":\"plot__plot-list-item-group\",\"plot\":\"plot__plot\",\"plot-scroll\":\"plot__plot-scroll\",\"plot-info\":\"plot__plot-info\",\"plot-field-info\":\"plot__plot-field-info\",\"command-toolbox\":\"plot__command-toolbox\",\"command\":\"plot__command\",\"sort-x-command\":\"plot__sort-x-command\",\"specify-command\":\"plot__specify-command\",\"copied\":\"plot__copied\",\"note\":\"plot__note\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"modal\":\"bookmark__modal\",\"vis-list-empty\":\"bookmark__vis-list-empty\",\"bookmark-list-util\":\"bookmark__bookmark-list-util\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"controls\":\"controls__controls\"};","import * as React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {REDO, UNDO} from '../../actions/undo-redo';\r\nimport {State} from '../../models';\r\n\r\nexport interface UndoRedoProps {\r\n  canUndo: boolean;\r\n  canRedo: boolean;\r\n  onUndo: () => void;\r\n  onRedo: () => void;\r\n}\r\n\r\nclass UndoRedoBase extends React.PureComponent<UndoRedoProps, any> {\r\n  public render() {\r\n    const {canUndo, canRedo, onUndo, onRedo} = this.props;\r\n    return (\r\n      <div>\r\n        <button onClick={onUndo} disabled={!canUndo}>\r\n          <i className='fa fa-undo' /> Undo\r\n        </button>\r\n        <button onClick={onRedo} disabled={!canRedo}>\r\n          <i className='fa fa-repeat' /> Redo\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const UndoRedo = connect((state: State) => {\r\n  return {\r\n    canUndo: state.undoable.past.length > 0,\r\n    canRedo: state.undoable.future.length > 0\r\n  };\r\n}, dispatch => ({\r\n  onUndo() {\r\n    dispatch({type: UNDO});\r\n  },\r\n  onRedo() {\r\n    dispatch({type: REDO});\r\n  }\r\n}))(UndoRedoBase);\r\n\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"voyager-logo\":\"header__voyager-logo\",\"idl-logo\":\"header__idl-logo\",\"header\":\"header__header\"};","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {connect} from 'react-redux';\r\nimport {LOG_ERRORS_CLEAR, LOG_WARNINGS_CLEAR, LogAction} from '../../actions/log';\r\nimport {ActionHandler, createDispatchHandler} from '../../actions/redux-action';\r\nimport {State} from '../../models/index';\r\nimport {Log, WarningLevel} from '../../models/log';\r\nimport {selectLog} from '../../selectors/index';\r\nimport * as styles from './log-pane.scss';\r\n\r\nexport interface LogPaneProps extends ActionHandler<LogAction> {\r\n  log: Log;\r\n}\r\n\r\nexport class LogPaneBase extends React.PureComponent<LogPaneProps, {}> {\r\n  public render() {\r\n    const warnings = this.props.log.warnings;\r\n    const errors = this.props.log.errors;\r\n    const warningPane = warnings.warn.length > 0 || warnings.debug.length > 0 || warnings.info.length > 0 ? (\r\n      <div styleName='warning-pane'>\r\n        <a styleName='close' onClick={this.closeWarnings.bind(this)}>x</a>\r\n        <ul>\r\n          {this.returnLevelWarnings(warnings, 'warn')}\r\n          {this.returnLevelWarnings(warnings, 'info')}\r\n          {this.returnLevelWarnings(warnings, 'debug')}\r\n        </ul>\r\n      </div>\r\n    ) : null;\r\n\r\n    const errorPane = errors.length > 0 ? (\r\n      <div styleName='error-pane'>\r\n        <a styleName='close' onClick={this.closeErrors.bind(this)}>x</a>\r\n        <ul>\r\n          {errors.map((error, index) => {\r\n            return (\r\n              <li key={index}>{error}</li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    ) : null;\r\n\r\n    return (\r\n      <div>\r\n        {warningPane}\r\n        {errorPane}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  protected closeWarnings() {\r\n    this.props.handleAction({\r\n      type: LOG_WARNINGS_CLEAR\r\n    });\r\n  }\r\n\r\n  protected closeErrors() {\r\n    this.props.handleAction({\r\n      type: LOG_ERRORS_CLEAR,\r\n    });\r\n  }\r\n\r\n  private returnLevelWarnings(warnings: {warn: string[], info: string[], debug: string[]},\r\n                              level: WarningLevel): JSX.Element[] {\r\n    return warnings[level].map((warning, index: number) => {\r\n      return (\r\n        <li key={index}>[{level.toUpperCase()}] {warning}</li>\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\nexport const LogPane = connect(\r\n  (state: State) => {\r\n    return {\r\n      log: selectLog(state)\r\n    };\r\n  }, createDispatchHandler<LogAction>())(CSSModules(LogPaneBase, styles));\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"log-pane\":\"log-pane__log-pane\",\"error-pane\":\"log-pane__error-pane\",\"warning-pane\":\"log-pane__warning-pane\",\"close\":\"log-pane__close\"};","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {connect} from 'react-redux';\r\nimport {InlineData} from 'vega-lite/build/src/data';\r\nimport {SortField, SortOrder} from 'vega-lite/build/src/sort';\r\nimport {TopLevelFacetedUnitSpec} from 'vega-lite/build/src/spec';\r\nimport {Action} from '../../actions/index';\r\nimport {ActionHandler, createDispatchHandler} from '../../actions/redux-action';\r\nimport {ShelfAction} from '../../actions/shelf';\r\nimport {SHELF_AUTO_ADD_COUNT_CHANGE, SHELF_GROUP_BY_CHANGE} from '../../actions/shelf/index';\r\nimport {SPEC_FIELD_PROP_CHANGE} from '../../actions/shelf/spec';\r\nimport {State} from '../../models';\r\nimport {Bookmark} from '../../models/bookmark';\r\nimport {VoyagerConfig} from '../../models/config';\r\nimport {RelatedViews as RelatedViewsModel} from '../../models/related-views';\r\nimport {Result} from '../../models/result/index';\r\nimport {ShelfFilter} from '../../models/shelf/filter';\r\nimport {SHELF_GROUP_BYS, ShelfGroupBy} from '../../models/shelf/index';\r\nimport {selectBookmark, selectConfig, selectMainSpec} from '../../selectors';\r\nimport {selectFilteredData, selectRelatedViews} from '../../selectors/index';\r\nimport {selectResult} from '../../selectors/result';\r\nimport {\r\n  selectDefaultGroupBy, selectFilters, selectIsQuerySpecific,\r\n  selectShelfAutoAddCount, selectShelfGroupBy\r\n} from '../../selectors/shelf';\r\nimport {Plot} from '../plot';\r\nimport {PlotList} from '../plot-list';\r\nimport {RelatedViews} from './related-views';\r\nimport {RelatedViewsButton} from './related-views-button';\r\nimport * as styles from './view-pane.scss';\r\n\r\nexport interface ViewPaneProps extends ActionHandler<Action> {\r\n  isQuerySpecific: boolean;\r\n  spec: TopLevelFacetedUnitSpec;\r\n  result: Result;\r\n  bookmark: Bookmark;\r\n  autoAddCount: boolean;\r\n\r\n  relatedViews: RelatedViewsModel;\r\n\r\n  groupBy: ShelfGroupBy;\r\n  defaultGroupBy: ShelfGroupBy;\r\n  config: VoyagerConfig;\r\n\r\n  data: InlineData;\r\n  filters: ShelfFilter[];\r\n}\r\n\r\nconst NO_PLOT_MESSAGE = `No specified visualization yet. ` +\r\n  `Start exploring by dragging a field to encoding pane ` +\r\n  `on the left or examining univariate summaries below.`;\r\n\r\nconst GROUP_BY_LABEL: {[K in ShelfGroupBy]: string} = {\r\n  auto: 'Automatic',\r\n  field: 'Field',\r\n  fieldTransform: 'Field and Transformations',\r\n  encoding: 'Visual Encodings'\r\n};\r\n\r\nclass ViewPaneBase extends React.PureComponent<ViewPaneProps, {}> {\r\n\r\n  constructor(props: ViewPaneProps) {\r\n    super(props);\r\n    this.onSort = this.onSort.bind(this);\r\n\r\n    this.onAutoAddCountChange = this.onAutoAddCountChange.bind(this);\r\n    this.onGroupByChange = this.onGroupByChange.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    const {isQuerySpecific, handleAction, relatedViews, config} = this.props;\r\n\r\n    const collapseRelatedViews = relatedViews.isCollapsed === undefined ? config.relatedViews === 'initiallyCollapsed' :\r\n      relatedViews.isCollapsed;\r\n\r\n    const relatedViewsElement = config.relatedViews !== 'disabled' && (\r\n      <div className=\"pane\" styleName={collapseRelatedViews ? \"view-pane-related-views-collapse\" :\r\n        \"view-pane-related-views\"}>\r\n        <RelatedViewsButton\r\n          collapseRelatedViews={collapseRelatedViews}\r\n          handleAction={handleAction}\r\n        />\r\n        <h2>Related Views</h2>\r\n        {!collapseRelatedViews && <RelatedViews/>}\r\n      </div>\r\n    );\r\n\r\n    if (isQuerySpecific) {\r\n      return (\r\n        <div styleName=\"view-pane\">\r\n          <div className=\"pane\" styleName={collapseRelatedViews ? 'view-pane-specific-stretch' : 'view-pane-specific'}>\r\n            <h2>Specified View</h2>\r\n            {this.renderSpecifiedView()}\r\n          </div>\r\n          {relatedViewsElement}\r\n        </div>\r\n      );\r\n    } else {\r\n      return this.renderSpecifiedViews();\r\n    }\r\n  }\r\n\r\n  private onSort(channel: 'x' | 'y', value: SortOrder | SortField<string>) {\r\n    const {handleAction} = this.props;\r\n    handleAction({\r\n      type: SPEC_FIELD_PROP_CHANGE,\r\n      payload: {\r\n        shelfId: {channel},\r\n        prop: 'sort',\r\n        value\r\n      }\r\n    });\r\n  }\r\n\r\n  private renderSpecifiedView() {\r\n    const {bookmark, data, filters, handleAction, spec} = this.props;\r\n\r\n    if (spec) {\r\n      return (\r\n        <Plot\r\n          bookmark={bookmark}\r\n          data={data}\r\n          filters={filters}\r\n          handleAction={handleAction}\r\n          onSort={this.onSort}\r\n          showBookmarkButton={true}\r\n          spec={spec}\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <span>{NO_PLOT_MESSAGE}</span>\r\n      );\r\n    }\r\n  }\r\n\r\n  private renderSpecifiedViews() {\r\n    const {bookmark, handleAction, autoAddCount, groupBy, defaultGroupBy, result} = this.props;\r\n\r\n    const options = SHELF_GROUP_BYS.map(value => {\r\n      const label = value === 'auto' ?\r\n        `${GROUP_BY_LABEL[defaultGroupBy]} (Automatic)` :\r\n        GROUP_BY_LABEL[value];\r\n      return (\r\n        <option value={value} key={value}>\r\n          {label}\r\n        </option>\r\n      );\r\n    });\r\n    return (\r\n      <div className=\"pane\" styleName=\"view-pane-gallery\">\r\n        <div className=\"right\">\r\n          <label styleName=\"gallery-command\">\r\n            Showing views with different\r\n            {' '}\r\n            <select value={groupBy} onChange={this.onGroupByChange}>\r\n              {options}\r\n            </select>\r\n          </label>\r\n\r\n          <label styleName=\"gallery-command\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoAddCount}\r\n              onChange={this.onAutoAddCountChange}\r\n            />\r\n            {' '}\r\n            Auto Add Count\r\n          </label>\r\n        </div>\r\n\r\n        <h2>Specified Views</h2>\r\n        <PlotList\r\n          result={result}\r\n          resultType=\"main\"\r\n          handleAction={handleAction}\r\n          bookmark={bookmark}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private onAutoAddCountChange(event: any) {\r\n    const autoAddCount = event.target.checked;\r\n    const {handleAction} = this.props;\r\n    handleAction({\r\n      type: SHELF_AUTO_ADD_COUNT_CHANGE,\r\n      payload: {autoAddCount}\r\n    });\r\n  }\r\n\r\n  private onGroupByChange(event: any) {\r\n    const {handleAction} = this.props;\r\n    handleAction({\r\n      type: SHELF_GROUP_BY_CHANGE,\r\n      payload: {groupBy: event.target.value}\r\n    });\r\n  }\r\n}\r\nexport const ViewPane = connect(\r\n  (state: State) => {\r\n    return {\r\n      autoAddCount: selectShelfAutoAddCount(state),\r\n      bookmark: selectBookmark(state),\r\n      config: selectConfig(state),\r\n      data: selectFilteredData(state),\r\n      filters: selectFilters(state),\r\n      groupBy: selectShelfGroupBy(state),\r\n      defaultGroupBy: selectDefaultGroupBy(state),\r\n      isQuerySpecific: selectIsQuerySpecific(state),\r\n      result: selectResult.main(state),\r\n      spec: selectMainSpec(state),\r\n      relatedViews: selectRelatedViews(state)\r\n    };\r\n  },\r\n  createDispatchHandler<ShelfAction>()\r\n)(CSSModules(ViewPaneBase, styles));\r\n","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {connect} from 'react-redux';\r\nimport {ClipLoader} from 'react-spinners';\r\nimport {InlineData} from 'vega-lite/build/src/data';\r\nimport {SortField, SortOrder} from 'vega-lite/build/src/sort';\r\nimport {ActionHandler} from '../../actions/redux-action';\r\nimport {\r\n  RESULT_LIMIT_INCREASE, RESULT_MODIFY_FIELD_PROP,\r\n  ResultAction, ResultModifyFieldProp\r\n} from '../../actions/result';\r\nimport {ShelfAction} from '../../actions/shelf';\r\nimport {SPINNER_COLOR} from '../../constants';\r\nimport {Bookmark} from '../../models/bookmark';\r\nimport {State} from '../../models/index';\r\nimport {ResultType} from '../../models/result';\r\nimport {Result} from '../../models/result/index';\r\nimport {ShelfFilter} from '../../models/shelf/filter';\r\nimport {selectFilteredData} from '../../selectors/index';\r\nimport {selectFilters} from '../../selectors/shelf';\r\nimport {Plot} from '../plot';\r\nimport * as styles from './plot-list.scss';\r\n\r\nexport interface PlotListOwnProps extends ActionHandler<ShelfAction|ResultAction> {\r\n  result: Result;\r\n\r\n  resultType?: ResultType;\r\n\r\n  bookmark: Bookmark;\r\n}\r\n\r\nexport interface PlotListConnectProps {\r\n  data: InlineData;\r\n\r\n  filters: ShelfFilter[];\r\n}\r\n\r\nexport type PlotListProps = PlotListOwnProps & PlotListConnectProps;\r\n\r\nexport class PlotListBase extends React.PureComponent<PlotListProps, any> {\r\n  constructor(props: PlotListProps) {\r\n    super(props);\r\n\r\n    this.onLoadMore = this.onLoadMore.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    const {handleAction, bookmark, data, filters, result} = this.props;\r\n    const {plots, limit, isLoading} = result;\r\n    const plotListItems = plots && plots.slice(0, limit).map((plot, index) => {\r\n      const {spec, fieldInfos} = plot;\r\n      return (\r\n        <Plot\r\n          data={data}\r\n          key={index}\r\n          fieldInfos={fieldInfos}\r\n          filters={filters}\r\n          handleAction={handleAction}\r\n          isPlotListItem={true}\r\n          onSort={this.onPlotSort.bind(this, index)}\r\n          showBookmarkButton={true}\r\n          showSpecifyButton={true}\r\n          spec={spec}\r\n          bookmark={bookmark}\r\n        />\r\n      );\r\n    });\r\n    return (\r\n      <div>\r\n        <div styleName=\"plot-list\">\r\n          {isLoading ?\r\n            <div styleName='plot-list-loading'>\r\n              <ClipLoader color={SPINNER_COLOR}/>\r\n            </div> :\r\n          plotListItems}\r\n        </div>\r\n        {plots && plots.length > limit && (\r\n          <a styleName=\"load-more\" onClick={this.onLoadMore}>\r\n            Load more...\r\n          </a>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private onPlotSort(index: number, channel: 'x' | 'y', value: SortOrder | SortField<string>) {\r\n    const {handleAction, resultType} = this.props;\r\n    const action: ResultModifyFieldProp<'sort'> = {\r\n      type: RESULT_MODIFY_FIELD_PROP,\r\n      payload: {\r\n        resultType,\r\n        index,\r\n        channel,\r\n        prop: 'sort',\r\n        value\r\n      }\r\n    };\r\n    handleAction(action);\r\n  }\r\n\r\n  private onLoadMore() {\r\n    const {handleAction, resultType} = this.props;\r\n    handleAction({\r\n      type: RESULT_LIMIT_INCREASE,\r\n      payload: {\r\n        resultType,\r\n        increment: 4\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport const PlotList = connect<PlotListConnectProps, {}, PlotListOwnProps>(\r\n  (state: State /*, props*/) => {\r\n    // TODO: once we have multiple cached data from Leilani's engine\r\n    // take spec from props and read spec.data.name\r\n    return {\r\n      data: selectFilteredData(state),\r\n      filters: selectFilters(state)\r\n    };\r\n  }\r\n)(CSSModules(PlotListBase, styles));\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"plot-list\":\"plot-list__plot-list\",\"plot-list-loading\":\"plot-list__plot-list-loading\",\"load-more\":\"plot-list__load-more\"};","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {connect} from 'react-redux';\r\nimport {BookmarkAction} from '../../actions/bookmark';\r\nimport {ActionHandler, createDispatchHandler} from '../../actions/redux-action';\r\nimport {ResultAction} from '../../actions/result';\r\nimport {ShelfAction} from '../../actions/shelf';\r\nimport {SHELF_PREVIEW_DISABLE, SHELF_PREVIEW_QUERY, ShelfPreviewAction} from '../../actions/shelf-preview';\r\nimport {SHELF_LOAD_QUERY} from '../../actions/shelf/index';\r\nimport {Bookmark} from '../../models/bookmark';\r\nimport {State} from '../../models/index';\r\nimport {Result, RESULT_TYPES, ResultType} from '../../models/result';\r\nimport {RELATED_VIEWS_INDEX, RELATED_VIEWS_TYPES} from '../../queries/index';\r\nimport {selectBookmark} from '../../selectors/index';\r\nimport {selectResult} from '../../selectors/result';\r\nimport {PlotList} from '../plot-list/index';\r\nimport * as styles from './related-views.scss';\r\n\r\nexport interface RelatedViewsProps extends ActionHandler<BookmarkAction|ShelfAction|ShelfPreviewAction|ResultAction> {\r\n  results: {\r\n    [k in ResultType]: Result\r\n  };\r\n\r\n  bookmark: Bookmark;\r\n}\r\n\r\nexport class RelatedViewsBase extends React.PureComponent<RelatedViewsProps, {}> {\r\n  public render() {\r\n    const {bookmark, handleAction, results} = this.props;\r\n\r\n    const subpanes = RELATED_VIEWS_TYPES.map(relatedViewType => {\r\n      const title = RELATED_VIEWS_INDEX[relatedViewType].title;\r\n      const result = results[relatedViewType];\r\n      const {isLoading, plots} = result;\r\n      return (\r\n        (isLoading || plots && plots.length > 0) && <div styleName=\"related-views-subpane\" key={relatedViewType}>\r\n          <div>\r\n            <h3>\r\n              {title}\r\n            </h3>\r\n            {\r\n              relatedViewType !== 'histograms' &&\r\n              <i\r\n                title='Specify'\r\n                styleName='command'\r\n                className=\"fa fa-server\"\r\n                onClick={this.onSpecify.bind(this, relatedViewType)}\r\n                onMouseEnter={this.onPreviewMouseEnter.bind(this, relatedViewType)}\r\n                onMouseLeave={this.onPreviewMouseLeave.bind(this, relatedViewType)}\r\n              />\r\n            }\r\n          </div>\r\n\r\n          <PlotList\r\n            handleAction={handleAction}\r\n            bookmark={bookmark}\r\n            resultType={relatedViewType}\r\n            result={result}\r\n          />\r\n        </div>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        {subpanes}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private onSpecify(relatedViewType: ResultType) {\r\n    const {handleAction, results} = this.props;\r\n    const query = results[relatedViewType].query;\r\n    handleAction({\r\n      type: SHELF_LOAD_QUERY,\r\n      payload: {query}\r\n    });\r\n  }\r\n\r\n  private onPreviewMouseEnter(relatedViewType: ResultType) {\r\n    const {handleAction, results} = this.props;\r\n    const query = results[relatedViewType].query;\r\n    handleAction({\r\n      type: SHELF_PREVIEW_QUERY,\r\n      payload: {query}\r\n    });\r\n  }\r\n\r\n  private onPreviewMouseLeave(relatedViewType: ResultType) {\r\n    const {handleAction} = this.props;\r\n    handleAction({type: SHELF_PREVIEW_DISABLE});\r\n  }\r\n}\r\n\r\n\r\nexport const RelatedViews = connect(\r\n  (state: State) => {\r\n    return {\r\n      results: RESULT_TYPES.reduce((results, resultType) => {\r\n        results[resultType] = selectResult[resultType](state);\r\n        return results;\r\n      }, {}),\r\n      bookmark: selectBookmark(state)\r\n    };\r\n  },\r\n  createDispatchHandler<BookmarkAction|ShelfAction>()\r\n)(CSSModules(RelatedViewsBase, styles));\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"related-views-subpane\":\"related-views__related-views-subpane\",\"command\":\"related-views__command\"};","import * as React from 'react';\r\nimport * as CSSModules from 'react-css-modules';\r\nimport {ActionHandler} from '../../actions/redux-action';\r\nimport {RELATED_VIEWS_HIDE_TOGGLE, RelatedViewsAction} from '../../actions/related-views';\r\nimport * as styles from './related-views-button.scss';\r\n\r\n\r\nexport interface RelatedViewsButtonProps extends ActionHandler<RelatedViewsAction> {\r\n  collapseRelatedViews: boolean;\r\n}\r\n\r\nexport class RelatedViewsButtonBase extends React.PureComponent<RelatedViewsButtonProps, {}> {\r\n  constructor(props: RelatedViewsButtonProps) {\r\n    super(props);\r\n\r\n    this.onHideClick = this.onHideClick.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    const {collapseRelatedViews} = this.props;\r\n    return (\r\n      <div styleName=\"right\">\r\n        <a onClick={this.onHideClick}>\r\n          {collapseRelatedViews ? 'Expand' : 'Collapse'}\r\n          &nbsp;&nbsp;\r\n          {collapseRelatedViews ? <i className='fa fa-toggle-up'/> : <i className='fa fa-toggle-down'/>}\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private onHideClick() {\r\n    const {collapseRelatedViews} = this.props;\r\n    this.props.handleAction({\r\n      type: RELATED_VIEWS_HIDE_TOGGLE,\r\n      payload: {\r\n        newIsCollapsed: !collapseRelatedViews\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport const RelatedViewsButton = (CSSModules(RelatedViewsButtonBase, styles));\r\n\r\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"right\":\"related-views-button__right\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"view-pane\":\"view-pane__view-pane\",\"view-pane-gallery\":\"view-pane__view-pane-gallery\",\"view-pane-related-views-collapse\":\"view-pane__view-pane-related-views-collapse\",\"view-pane-related-views\":\"view-pane__view-pane-related-views\",\"view-pane-specific\":\"view-pane__view-pane-specific\",\"view-pane-specific-stretch\":\"view-pane__view-pane-specific-stretch\",\"gallery-command\":\"view-pane__gallery-command\"};"],"sourceRoot":""}